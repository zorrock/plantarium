var Jl=Object.defineProperty,Ql=Object.defineProperties;var Zl=Object.getOwnPropertyDescriptors;var Cr=Object.getOwnPropertySymbols;var Kl=Object.prototype.hasOwnProperty,ec=Object.prototype.propertyIsEnumerable;var zr=(t,e,s)=>e in t?Jl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,ye=(t,e)=>{for(var s in e||(e={}))Kl.call(e,s)&&zr(t,s,e[s]);if(Cr)for(var s of Cr(e))ec.call(e,s)&&zr(t,s,e[s]);return t},Re=(t,e)=>Ql(t,Zl(e));import{S as fe,i as de,s as pe,e as N,K as tc,c as P,a as A,d as w,b as k,J as E,E as q,L as ft,v as Yt,M as Ne,N as sc,O as Z,g as T,l as ae,n as oe,o as O,p as le,q as I,t as F,h as B,j as ve,F as rr,k as C,m as z,P as J,G as ir,H as ar,I as or,Q as We,R as vt,w as K,x as ne,f as G,y as ee,B as te,T as Pe,U as Ot,V as Fe,z as To,A as Io,C as Do,W as nc,X as rc,Y as ic,Z as Ce,_ as ke,$ as Ae,a0 as wt,a1 as Be,a2 as Xs,a3 as Ht,a4 as Xt,a5 as Ln,a6 as Os,a7 as $r,a8 as ac,a9 as oc,aa as lc,ab as Rr,ac as Fr,ad as cc,ae as Br}from"../chunks/index-e9ede3c3.js";import{w as Ue,c as Vt}from"../chunks/singletons-fdd1ebaf.js";const hc="#469c6e",uc="#b74141",fc="0px 0px 2px rgba(0, 0, 0, 0.7)",dc="#65e2a0",pc="#e26565",mc="0px 0px 5px rgba(0, 0, 0, 0.144)",vc="0px 0px 5px rgba(0, 0, 0, 0.144)";var gc={"dark_background-color":"#141516","dark_midground-color":"#242729",dark_accent:hc,"dark_accent-dark":"#65e2a0",dark_error:uc,"dark_foreground-color":"#33373a","dark_outline-color":"#212121","dark_text-color":"#ffffff","dark_text-color-invert":"black",dark_shadow:fc,"light_background-color":"#d0d0d0","light_midground-color":"white",light_accent:dc,"light_accent-dark":"#469c6e",light_error:pc,"light_foreground-color":"#e8e8e8","light_outline-color":"#b9b9b9","light_text-color":"#484848","light_text-color-invert":"white",light_shadow:mc,"pinky_background-color":"#d0d0d0","pinky_foreground-color":"pink","pinky_outline-color":"#b9b9b9","pinky_text-color":"#484848",pinky_shadow:vc};function yc(t){const e={};return Object.entries(t).forEach(([s,n])=>{const[r,i]=s.split("_");r in e?e[r][i]=n:e[r]={[i]:n}}),e}const lr=yc(gc),Vs=Object.keys(lr);let Gt="dark";"localStorage"in globalThis&&(Gt="theme"in localStorage?localStorage.getItem("theme"):Vs[0]);Vs.includes(Gt)||(Gt=Vs[0]);globalThis.window&&document.body.classList.add("theme-"+Gt);const hs=Ue(lr[Gt]),wc=Ue(Gt),jo=t=>{if(Vs.includes(t)){for(const e of document.body.classList.values())e.startsWith("theme-")&&document.body.classList.remove(e);document.body.classList.add("theme-"+t),hs.set(lr[t]),wc.set(t),localStorage.setItem("theme",t)}else console.warn("cannot set theme",t)};function bc(t){return Oo("",typeof t=="string"?JSON.parse(t):t)}function Oo(t,e){var s="";return Object.entries(e).forEach(function(n){var r=n[0],i=n[1];s+=typeof i=="object"?Oo(""+Ur(t,r),i):"--"+Ur(t,r)+": "+i+";"}),s}function Ur(t,e){return t?e==="__default"?t:t+"-"+e:e}function _c(t){let e;return{c(){e=N("style"),this.h()},l(s){const n=tc('[data-svelte="svelte-14spz5y"]',document.head);e=P(n,"STYLE",{type:!0,id:!0});var r=A(e);r.forEach(w),n.forEach(w),this.h()},h(){k(e,"type","text/css"),k(e,"id","theme-css")},m(s,n){E(document.head,e),t[3](e)},p:q,i:q,o:q,d(s){w(e),t[3](null)}}}function xc(t,e,s){let n,r;ft(t,hs,c=>s(2,r=c));let i,a=!1;function o(){a||!i||(a=!0,s(0,i.innerHTML="* {transition: color 0.2s ease, background-color 0.2s ease, outline 0.2s ease !important;}",i),setTimeout(()=>{s(0,i.innerHTML=`* {transition: color 0.2s ease, background-color 0.2s ease, outline 0.2s ease !important;} :root{${n}}`,i),setTimeout(()=>{s(0,i.innerHTML=`:root{${n}}`,i),a=!1},200)},1))}Yt(()=>{s(0,i.innerHTML=`:root{${n}}`,i)});function l(c){Ne[c?"unshift":"push"](()=>{i=c,s(0,i)})}return t.$$.update=()=>{t.$$.dirty&4&&s(1,n=bc(r)),t.$$.dirty&2&&n&&o()},[i,n,r,l]}class Mc extends fe{constructor(e){super(),de(this,e,xc,_c,pe,{})}}function Ec(){return"window"in globalThis}const Wr=Ec();function qr(t){const e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}function Vo(t){const e=t-1;return e*e*e+1}function Hr(t,{delay:e=0,duration:s=400,easing:n=sc}={}){const r=+getComputedStyle(t).opacity;return{delay:e,duration:s,easing:n,css:i=>`opacity: ${i*r}`}}function ht(t,{delay:e=0,duration:s=400,easing:n=Vo}={}){const r=getComputedStyle(t),i=+r.opacity,a=parseFloat(r.height),o=parseFloat(r.paddingTop),l=parseFloat(r.paddingBottom),c=parseFloat(r.marginTop),h=parseFloat(r.marginBottom),u=parseFloat(r.borderTopWidth),d=parseFloat(r.borderBottomWidth);return{delay:e,duration:s,easing:n,css:f=>`overflow: hidden;opacity: ${Math.min(f*20,1)*i};height: ${f*a}px;padding-top: ${f*o}px;padding-bottom: ${f*l}px;margin-top: ${f*c}px;margin-bottom: ${f*h}px;border-top-width: ${f*u}px;border-bottom-width: ${f*d}px;`}}function Xr(t,{delay:e=0,duration:s=400,easing:n=Vo,start:r=0,opacity:i=0}={}){const a=getComputedStyle(t),o=+a.opacity,l=a.transform==="none"?"":a.transform,c=1-r,h=o*(1-i);return{delay:e,duration:s,easing:n,css:(u,d)=>`
			transform: ${l} scale(${1-c*d});
			opacity: ${o-h*d}
		`}}var kc=`<svg version="1.2" baseProfile="tiny" id="Ebene_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
	 x="0px" y="0px" width="100px" height="100px" viewBox="0 0 100 100" xml:space="preserve">
</svg>
`,Ac=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  <title>branch</title>
  <path class="cls-1" d="M49.59,57.35,72.15,38.69"/>
  <path class="cls-1" d="M51.58,29.45,38,11.21"/>
  <path class="cls-1" d="M53.14,82.61,21.78,55.74"/>
  <path class="cls-1" d="M33.46,47.91l4,21"/>
  <polyline class="cls-1" points="56 97 50 58 51 28 56 16"/>
</svg>
`,Sc='<svg id="e7691b6e-31fa-49a4-aaec-be19b623d191" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><style>.b50603dd-20d5-40a2-a0ce-2fdf3b92ec21{fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:5px;}</style></defs><title>checkmark</title><path class="b50603dd-20d5-40a2-a0ce-2fdf3b92ec21" d="M75.5,30,40.43,72.47a2,2,0,0,1-3.08,0L24.5,57"/></svg>',Nc=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
<defs>
</defs>
	<circle  cx="50.37" cy="50.5" r="17.23"/>
  <path  d="M38.07,20.49,32.17,8.05,50.83,4.41l.61,13.8,12.13,2.28L68.73,8.05l14,10.16-9,10L81.17,38.7l12-5.47,3.34,17.3H81.93L80.57,63l12.59,6.37L82.7,83.62l-9-9.86L63.58,81.19l5.15,11.23-17.9,3.64V82.71L38.08,81.19,32.77,92.42,17.44,82.71l10.17-8.35L19.11,63,8.19,69.36,4.4,50.56H17.45l1.67-13.81L8.2,30.84l9.25-13.2,11.08,8.81Z"/>
</svg>
`,Pc=`<svg
  xmlns="http://www.w3.org/2000/svg"
	viewBox="0 0 100 100">
  <line fill="none" stroke="#FFFFFF" stroke-width="5" stroke-miterlimit="10" x1="27.836" y1="72.164" x2="72.164" y2="27.836"/>
  <line fill="none" stroke="#FFFFFF" stroke-width="5" stroke-miterlimit="10" x1="27.836" y1="27.988" x2="72.164" y2="72.012"/>
</svg>
`,Lc=`<svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M50.552 59.3295L39.0695 13.7056H60.2078L50.552 59.3295Z" stroke-linejoin="round"/>
<path d="M58.4305 77.2411C58.4305 80.8276 55.4725 83.7944 51.7497 83.7944C48.0269 83.7944 45.0688 80.8276 45.0688 77.2411C45.0688 73.6546 48.0269 70.6878 51.7497 70.6878C55.4725 70.6878 58.4305 73.6546 58.4305 77.2411Z"/>
</svg>
`,Tc=`<svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">

<defs>
	<style>
		path{
			stroke: white;
			stroke-width: 5px;
		}
	</style>
</defs>

<path d="M23.5167 72.9513V32.1483H82.1056L87.6855 37.0307V76.09L82.1056 78.5312H29.4453L23.5167 72.9513Z" />
<path d="M23.2747 73.6489L12.3145 30.0463L15.8885 21.4688H71.8808L75.693 32.9055" />
<path d="M25.488 43.9781H86.7394" />
</svg>
`,Ic=`<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
<path d="M70.5 26.5L77.5 23.5L82 32V69L77.5 82L64.5 92.5H47L32 82L18 46L21 40H27L35 57.5V15.5L39.5 11L45.5 13.5M70.5 26.5L69 15.5L58.5 14M70.5 26.5V57.5M58.5 14L55 8L45.5 13.5M58.5 14V49M45.5 13.5V49" stroke-width="5"/>
</svg>
`,Dc=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  <defs>
    <style>.cls-1{fill:none;stroke:#fff;stroke-width:5px;}</style>
  </defs>
  <title>leaf</title>
  <path class="cls-1" d="M50.69,96.21,72.86,72.33,77,47,65.91,21.7,50.66,4.5"/>
  <path class="cls-1" d="M53.37,96.21,31.2,72.33,27.07,47,38.15,21.7,53.4,4.5"/>
</svg>`,jc=`<svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M30.2312 46.4809V15.6962L33.3006 8H40.8035L44.3844 11.0785V29.7203H52.9104L55.9798 33.8249H65.0173L68.0867 38.9557L76.2717 40.1529L79 56.0583L73.7139 72.9899L66.8931 93H36.5405L30.2312 75.5553L20 60.334L21.7052 50.2435L30.2312 46.4809ZM30.2312 46.4809V58.1107M44.3844 29.3783V46.3099M56.4913 34.5091V46.3099M68.7688 39.2978V50.4145" stroke="white" stroke-width="5"/>
</svg>
`,Oc=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  <defs>
    <style>.cls-1{fill:none;stroke:#fff;stroke-width:5px;}</style>
  </defs>
  <title>stem</title>
  <path class="cls-1" d="M49,95.5l8.66-23.19L43.24,46.07l10.59-21L43.24,4.5"/>
</svg>`,Vc=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" xml:space="preserve">
  <polygon fill="none" stroke="#FFFFFF" stroke-width="5" stroke-miterlimit="10" points="33.5,73.759 33.5,26.241 67.441,50 "/>
</svg>
`,Cc=`<svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M54.7631 15.1799L91.7944 79.3201C93.9114 82.9867 91.2652 87.5701 87.0313 87.5701H12.9687C8.73476 87.5701 6.08857 82.9867 8.20552 79.3201L45.2368 15.1799C47.3538 11.5133 52.6462 11.5133 54.7631 15.1799Z" stroke="white" stroke-width="5" stroke-linejoin="round"/>
<ellipse cx="50.0578" cy="73.7787" rx="5.98166" ry="5.89858" fill="white"/>
<path d="M52.9755 60.2707C52.5275 63.7615 47.4723 63.7615 47.0243 60.2707L43.5981 33.5748C43.3678 31.781 44.7652 30.1929 46.5736 30.1929L53.4261 30.1929C55.2346 30.1929 56.6319 31.781 56.4017 33.5748L52.9755 60.2707Z" fill="white"/>
</svg>
`,zc=`<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
<path d="M32.7792 25.4477L45.6598 15.6472L61.6205 20.4075L67.2208 32.728L54.3402 46.4486L50.9801 59.3291V63.9218" stroke-width="8"/>
<path d="M47.3642 83.3434L44.983 79.0169L46.821 74.3331L51.3861 73.0881L55.5363 75.0446L56.307 80.8548L52.3347 84.3528L47.3642 83.3434Z" />
</svg>

`,$c=`<svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M42 88.5V80V63.5L32 55L26 39.5L32 24.5L46 15L67.5 19L78 30.5V51.5L65 66.5V76V88.5L59.5 94.5H46L42 88.5Z"/>
<path d="M42 74L64.5 83" />
<path d="M42.5 82.5L63 91" />
<path d="M42 70L67 71"/>
<path d="M51.5 69.5L49.5 58.5L43.5 51.5L60.5 50.5L59 57.5L58 71.5" />
<path d="M55 25.5L64.5 28.5L69 38V44"/>
<path d="M19 28.5L11.5 23.5M35 14L29 4.5M61 10L63 -0.5M78 19.5L90.5 10M85 39.5L92 39"/>
<path d="M22.5 50L14.5 52.5"/>
</svg>
`,Rc=`<svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M42 86.5V78V61.5L32 53L26 37.5L32 22.5L46 13L67.5 17L78 28.5V49.5L65 64.5V74V86.5L59.5 92.5H46L42 86.5Z" />
<path d="M42 72L64.5 81" />
<path d="M42.5 80.5L63 89" />
<path d="M42 68L67 69" />
<path d="M51.5 67.5L49.5 56.5L43.5 49.5L60.5 48.5L59 55.5L58 69.5"/>
<path d="M55 23.5L64.5 26.5L69 36V42" />
</svg>
`,Gr=Object.freeze(Object.defineProperty({__proto__:null,arrow:kc,branch:Ac,checkmark:Sc,cog:Nc,cross:Pc,exclamation:Lc,folder:Tc,hand:Ic,leaf:Dc,pointing:jc,stem:Oc,triangle:Vc,warning:Cc,question:zc,bulb:$c,bulb_dark:Rc},Symbol.toStringTag,{value:"Module"}));function Fc(t){let e;return{c(){e=N("div"),this.h()},l(s){e=P(s,"DIV",{class:!0});var n=A(e);n.forEach(w),this.h()},h(){k(e,"class","icon-wrapper svelte-vatcjz"),Z(e,"active",t[0]),Z(e,"dark",t[1]),Z(e,"circle",t[2])},m(s,n){T(s,e,n),e.innerHTML=t[3]},p(s,[n]){n&8&&(e.innerHTML=s[3]),n&1&&Z(e,"active",s[0]),n&2&&Z(e,"dark",s[1]),n&4&&Z(e,"circle",s[2])},i:q,o:q,d(s){s&&w(e)}}}function Bc(t,e,s){let n,{name:r="triangle"}=e,{active:i=!1}=e,{dark:a=!1}=e,{circle:o=!1}=e;return t.$$set=l=>{"name"in l&&s(4,r=l.name),"active"in l&&s(0,i=l.active),"dark"in l&&s(1,a=l.dark),"circle"in l&&s(2,o=l.circle)},t.$$.update=()=>{t.$$.dirty&16&&s(3,n=r in Gr?Gr[r]:r.toString()+" icon not found")},[i,a,o,n,r]}class us extends fe{constructor(e){super(),de(this,e,Bc,Fc,pe,{name:4,active:0,dark:1,circle:2})}}function Yr(t){let e,s,n,r;const i=[Wc,Uc],a=[];function o(l,c){return l[7]?0:1}return e=o(t),s=a[e]=i[e](t),{c(){s.c(),n=ae()},l(l){s.l(l),n=ae()},m(l,c){a[e].m(l,c),T(l,n,c),r=!0},p(l,c){let h=e;e=o(l),e===h?a[e].p(l,c):(oe(),O(a[h],1,1,()=>{a[h]=null}),le(),s=a[e],s?s.p(l,c):(s=a[e]=i[e](l),s.c()),I(s,1),s.m(n.parentNode,n))},i(l){r||(I(s),r=!0)},o(l){O(s),r=!1},d(l){a[e].d(l),l&&w(n)}}}function Uc(t){let e;return{c(){e=N("plant-icon"),this.h()},l(s){e=P(s,"PLANT-ICON",{name:!0,active:!0,class:!0}),A(e).forEach(w),this.h()},h(){vt(e,"name",t[1]),vt(e,"active",t[0]),vt(e,"class","svelte-rinkpy")},m(s,n){T(s,e,n)},p(s,n){n&2&&vt(e,"name",s[1]),n&1&&vt(e,"active",s[0])},i:q,o:q,d(s){s&&w(e)}}}function Wc(t){let e,s,n;return e=new us({props:{name:t[1],active:t[0]}}),{c(){s=N("div"),K(e.$$.fragment),this.h()},l(r){s=P(r,"DIV",{style:!0});var i=A(s);ne(e.$$.fragment,i),this.h()},h(){G(s,"display","contents"),G(s,"--width","25px")},m(r,i){T(r,s,i),ee(e,s,null),n=!0},p(r,i){const a={};i&2&&(a.name=r[1]),i&1&&(a.active=r[0]),e.$set(a)},i(r){n||(I(e.$$.fragment,r),n=!0)},o(r){O(e.$$.fragment,r),n=!1},d(r){r&&w(s),te(e,r)}}}function Jr(t){let e,s;return{c(){e=N("p"),s=F(t[2]),this.h()},l(n){e=P(n,"P",{class:!0});var r=A(e);s=B(r,t[2]),r.forEach(w),this.h()},h(){k(e,"class","svelte-rinkpy")},m(n,r){T(n,e,r),E(e,s)},p(n,r){r&4&&ve(s,n[2])},d(n){n&&w(e)}}}function qc(t){let e,s,n,r,i,a,o,l,c=t[1]&&Yr(t),h=t[2]&&Jr(t);const u=t[10].default,d=rr(u,t,t[9],null);return{c(){e=N("div"),s=N("button"),c&&c.c(),n=C(),h&&h.c(),r=C(),i=N("div"),d&&d.c(),this.h()},l(f){e=P(f,"DIV",{class:!0});var p=A(e);s=P(p,"BUTTON",{class:!0});var m=A(s);c&&c.l(m),n=z(m),h&&h.l(m),r=z(m),i=P(m,"DIV",{class:!0});var v=A(i);d&&d.l(v),v.forEach(w),m.forEach(w),p.forEach(w),this.h()},h(){k(i,"class","content svelte-rinkpy"),s.disabled=t[5],k(s,"class","svelte-rinkpy"),Z(s,"active",t[0]),Z(s,"invert",t[4]),Z(s,"useActive",t[3]),Z(s,"only-icon",!t[2]),Z(s,"has-icon",!!t[1]),k(e,"class","component-wrapper svelte-rinkpy")},m(f,p){T(f,e,p),E(e,s),c&&c.m(s,null),E(s,n),h&&h.m(s,null),E(s,r),E(s,i),d&&d.m(i,null),t[11](s),a=!0,o||(l=J(s,"click",t[8]),o=!0)},p(f,[p]){f[1]?c?(c.p(f,p),p&2&&I(c,1)):(c=Yr(f),c.c(),I(c,1),c.m(s,n)):c&&(oe(),O(c,1,1,()=>{c=null}),le()),f[2]?h?h.p(f,p):(h=Jr(f),h.c(),h.m(s,r)):h&&(h.d(1),h=null),d&&d.p&&(!a||p&512)&&ir(d,u,f,f[9],a?or(u,f[9],p,null):ar(f[9]),null),(!a||p&32)&&(s.disabled=f[5]),p&1&&Z(s,"active",f[0]),p&16&&Z(s,"invert",f[4]),p&8&&Z(s,"useActive",f[3]),p&4&&Z(s,"only-icon",!f[2]),p&2&&Z(s,"has-icon",!!f[1])},i(f){a||(I(c),I(d,f),a=!0)},o(f){O(c),O(d,f),a=!1},d(f){f&&w(e),c&&c.d(),h&&h.d(),d&&d.d(f),t[11](null),o=!1,l()}}}function Hc(t,e,s){let n,{$$slots:r={},$$scope:i}=e,{icon:a=void 0}=e,{name:o=""}=e,{active:l=!1}=e,{useActive:c=!1}=e,{invert:h=!1}=e,{disabled:u=!1}=e,d;const f=We(),p=()=>{s(0,l=!l),f("click")};function m(v){Ne[v?"unshift":"push"](()=>{d=v,s(6,d)})}return t.$$set=v=>{"icon"in v&&s(1,a=v.icon),"name"in v&&s(2,o=v.name),"active"in v&&s(0,l=v.active),"useActive"in v&&s(3,c=v.useActive),"invert"in v&&s(4,h=v.invert),"disabled"in v&&s(5,u=v.disabled),"$$scope"in v&&s(9,i=v.$$scope)},t.$$.update=()=>{t.$$.dirty&64&&s(7,n=d&&!!d.parentElement)},[l,a,o,c,h,u,d,n,p,i,r,m]}class Ie extends fe{constructor(e){super(),de(this,e,Hc,qc,pe,{icon:1,name:2,active:0,useActive:3,invert:4,disabled:5})}}var Qt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Co={exports:{}},Ts=1;function Xc(){return Ts=(Ts*9301+49297)%233280,Ts/233280}function Gc(t){Ts=t}var Yc={nextValue:Xc,seed:Gc},Tn=Yc,Pt="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-",Mt,Qr,Kt;function In(){Kt=!1}function zo(t){if(!t){Mt!==Pt&&(Mt=Pt,In());return}if(t!==Mt){if(t.length!==Pt.length)throw new Error("Custom alphabet for shortid must be "+Pt.length+" unique characters. You submitted "+t.length+" characters: "+t);var e=t.split("").filter(function(s,n,r){return n!==r.lastIndexOf(s)});if(e.length)throw new Error("Custom alphabet for shortid must be "+Pt.length+" unique characters. These characters were not unique: "+e.join(", "));Mt=t,In()}}function Jc(t){return zo(t),Mt}function Qc(t){Tn.seed(t),Qr!==t&&(In(),Qr=t)}function Zc(){Mt||zo(Pt);for(var t=Mt.split(""),e=[],s=Tn.nextValue(),n;t.length>0;)s=Tn.nextValue(),n=Math.floor(s*t.length),e.push(t.splice(n,1)[0]);return e.join("")}function $o(){return Kt||(Kt=Zc(),Kt)}function Kc(t){var e=$o();return e[t]}function eh(){return Mt||Pt}var cr={get:eh,characters:Jc,seed:Qc,lookup:Kc,shuffled:$o},Ks=typeof window=="object"&&(window.crypto||window.msCrypto),Dn;!Ks||!Ks.getRandomValues?Dn=function(t){for(var e=[],s=0;s<t;s++)e.push(Math.floor(Math.random()*256));return e}:Dn=function(t){return Ks.getRandomValues(new Uint8Array(t))};var th=Dn,sh=function(t,e,s){for(var n=(2<<Math.log(e.length-1)/Math.LN2)-1,r=-~(1.6*n*s/e.length),i="";;)for(var a=t(r),o=r;o--;)if(i+=e[a[o]&n]||"",i.length===+s)return i},nh=cr,rh=th,ih=sh;function ah(t){for(var e=0,s,n="";!s;)n=n+ih(rh,nh.get(),1),s=t<Math.pow(16,e+1),e++;return n}var oh=ah,ys=oh,lh=1567752802062,ch=7,ws,Zr;function hh(t){var e="",s=Math.floor((Date.now()-lh)*.001);return s===Zr?ws++:(ws=0,Zr=s),e=e+ys(ch),e=e+ys(t),ws>0&&(e=e+ys(ws)),e=e+ys(s),e}var uh=hh,fh=cr;function dh(t){if(!t||typeof t!="string"||t.length<6)return!1;var e=new RegExp("[^"+fh.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]");return!e.test(t)}var ph=dh;(function(t){var e=cr,s=uh,n=ph,r=0;function i(c){return e.seed(c),t.exports}function a(c){return r=c,t.exports}function o(c){return c!==void 0&&e.characters(c),e.shuffled()}function l(){return s(r)}t.exports=l,t.exports.generate=l,t.exports.seed=i,t.exports.worker=a,t.exports.characters=o,t.exports.isValid=n})(Co);var hr=Co.exports,st=(t=>(t.INFO="info",t.WARNING="warning",t.ERROR="error",t.SUCCESS="success",t))(st||{});const mh=t=>(e,s={})=>{var a;if(!e&&!s)return;const n=Array.isArray(s==null?void 0:s.values),r={id:hr(),type:st.INFO,content:e,props:s.props,title:(a=s==null?void 0:s.title)!=null?a:s==null?void 0:s.type,values:s==null?void 0:s.values,timeout:s==null?void 0:s.timeout},i=new Promise((o,l)=>{r.resolve=o,r.reject=()=>o(void 0)});if(i.finally(()=>t.update(o=>o.filter(l=>l.id!==r.id))),s&&"type"in s){const o=s.type.toLowerCase();Object.values(st).forEach(l=>{o===l&&(r.type=l)})}if(e instanceof Error&&(r.type=st.ERROR),typeof r.timeout=="undefined"){let o;r.type===st.SUCCESS&&(o=3e3),r.type===st.INFO&&(o=2e3),r.type===st.WARNING&&(o=7e3),o&&!n&&(r.timeout=o)}return"title"in r||(r.title=r.type.toUpperCase().slice(0,1)+r.type.slice(1)),t.update(o=>[...o,r]),r.timeout&&setTimeout(r.resolve,r.timeout),i};var Ro=()=>{const t=Ue([]),e=mh(t);return{store:t,createMessage:e,MessageType:st}};const{store:vh,createMessage:gh,MessageType:qg}=Ro(),yh=vh,gt=gh;function Kr(t,e,s){const n=t.slice();return n[7]=e[s],n}function ei(t){let e,s,n,r,i,a,o,l,c,h,u,d,f,p;r=new Ie({props:{icon:"cross"}}),r.$on("click",t[4]);let m=t[0].title&&ti(t);const v=[bh,wh],g=[];function _(y,M){return typeof y[0].content=="string"?0:1}l=_(t),c=g[l]=v[l](t);let b=t[0].values&&si(t);return{c(){e=N("div"),s=N("div"),n=N("div"),i=N("div"),K(r.$$.fragment),a=C(),m&&m.c(),o=C(),c.c(),h=C(),b&&b.c(),this.h()},l(y){e=P(y,"DIV",{class:!0});var M=A(e);s=P(M,"DIV",{class:!0});var x=A(s);n=P(x,"DIV",{class:!0});var L=A(n);i=P(L,"DIV",{style:!0});var S=A(i);ne(r.$$.fragment,S),L.forEach(w),a=z(x),m&&m.l(x),o=z(x),c.l(x),h=z(x),b&&b.l(x),x.forEach(w),M.forEach(w),this.h()},h(){G(i,"display","contents"),G(i,"--foreground-color","transparent"),k(n,"class","close-wrapper svelte-3vp4n3"),k(s,"class",u="alert-wrapper alert-"+t[0].type+" svelte-3vp4n3"),Z(s,"isInverted",t[1]),k(e,"class","alert-container svelte-3vp4n3")},m(y,M){T(y,e,M),E(e,s),E(s,n),E(n,i),ee(r,i,null),E(s,a),m&&m.m(s,null),E(s,o),g[l].m(s,null),E(s,h),b&&b.m(s,null),p=!0},p(y,M){y[0].title?m?m.p(y,M):(m=ti(y),m.c(),m.m(s,o)):m&&(m.d(1),m=null);let x=l;l=_(y),l===x?g[l].p(y,M):(oe(),O(g[x],1,1,()=>{g[x]=null}),le(),c=g[l],c?c.p(y,M):(c=g[l]=v[l](y),c.c()),I(c,1),c.m(s,h)),y[0].values?b?(b.p(y,M),M&1&&I(b,1)):(b=si(y),b.c(),I(b,1),b.m(s,null)):b&&(oe(),O(b,1,1,()=>{b=null}),le()),(!p||M&1&&u!==(u="alert-wrapper alert-"+y[0].type+" svelte-3vp4n3"))&&k(s,"class",u),M&3&&Z(s,"isInverted",y[1])},i(y){p||(I(r.$$.fragment,y),I(c),I(b),Ot(()=>{d||(d=Fe(s,Xr,{},!0)),d.run(1)}),Ot(()=>{f||(f=Fe(e,Hr,{},!0)),f.run(1)}),p=!0)},o(y){O(r.$$.fragment,y),O(c),O(b),d||(d=Fe(s,Xr,{},!1)),d.run(0),f||(f=Fe(e,Hr,{},!1)),f.run(0),p=!1},d(y){y&&w(e),te(r),m&&m.d(),g[l].d(),b&&b.d(),y&&d&&d.end(),y&&f&&f.end()}}}function ti(t){let e,s=t[0].title+"",n;return{c(){e=N("h2"),n=F(s),this.h()},l(r){e=P(r,"H2",{class:!0});var i=A(e);n=B(i,s),i.forEach(w),this.h()},h(){k(e,"class","svelte-3vp4n3")},m(r,i){T(r,e,i),E(e,n)},p(r,i){i&1&&s!==(s=r[0].title+"")&&ve(n,s)},d(r){r&&w(e)}}}function wh(t){let e,s,n;const r=[t[0].props];var i=t[0].content;function a(o){let l={};for(let c=0;c<r.length;c+=1)l=Do(l,r[c]);return{props:l}}return i&&(e=new i(a()),e.$on("close",t[5])),{c(){e&&K(e.$$.fragment),s=ae()},l(o){e&&ne(e.$$.fragment,o),s=ae()},m(o,l){e&&ee(e,o,l),T(o,s,l),n=!0},p(o,l){const c=l&1?To(r,[Io(o[0].props)]):{};if(i!==(i=o[0].content)){if(e){oe();const h=e;O(h.$$.fragment,1,0,()=>{te(h,1)}),le()}i?(e=new i(a()),e.$on("close",o[5]),K(e.$$.fragment),I(e.$$.fragment,1),ee(e,s.parentNode,s)):e=null}else i&&e.$set(c)},i(o){n||(e&&I(e.$$.fragment,o),n=!0)},o(o){e&&O(e.$$.fragment,o),n=!1},d(o){o&&w(s),e&&te(e,o)}}}function bh(t){let e,s=t[0].content+"";return{c(){e=N("p")},l(n){e=P(n,"P",{});var r=A(e);r.forEach(w)},m(n,r){T(n,e,r),e.innerHTML=s},p(n,r){r&1&&s!==(s=n[0].content+"")&&(e.innerHTML=s)},i:q,o:q,d(n){n&&w(e)}}}function si(t){let e,s,n=t[0].values,r=[];for(let a=0;a<n.length;a+=1)r[a]=ni(Kr(t,n,a));const i=a=>O(r[a],1,1,()=>{r[a]=null});return{c(){e=N("div");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=P(a,"DIV",{class:!0});var o=A(e);for(let l=0;l<r.length;l+=1)r[l].l(o);o.forEach(w),this.h()},h(){k(e,"class","options-wrapper svelte-3vp4n3")},m(a,o){T(a,e,o);for(let l=0;l<r.length;l+=1)r[l].m(e,null);s=!0},p(a,o){if(o&1){n=a[0].values;let l;for(l=0;l<n.length;l+=1){const c=Kr(a,n,l);r[l]?(r[l].p(c,o),I(r[l],1)):(r[l]=ni(c),r[l].c(),I(r[l],1),r[l].m(e,null))}for(oe(),l=n.length;l<r.length;l+=1)i(l);le()}},i(a){if(!s){for(let o=0;o<n.length;o+=1)I(r[o]);s=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)O(r[o]);s=!1},d(a){a&&w(e),Pe(r,a)}}}function ni(t){let e,s,n;function r(){return t[6](t[7])}return e=new Ie({props:{name:t[7]}}),e.$on("click",r),{c(){s=N("div"),K(e.$$.fragment),this.h()},l(i){s=P(i,"DIV",{style:!0});var a=A(s);ne(e.$$.fragment,a),this.h()},h(){G(s,"display","contents"),G(s,"--bg","#303030"),G(s,"--text","white"),G(s,"--margin","0 10px 0 0")},m(i,a){T(i,s,a),ee(e,s,null),n=!0},p(i,a){t=i;const o={};a&1&&(o.name=t[7]),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){O(e.$$.fragment,i),n=!1},d(i){i&&w(s),te(e,i)}}}function _h(t){let e,s,n,r,i=t[0]&&ei(t);return{c(){i&&i.c(),e=ae()},l(a){i&&i.l(a),e=ae()},m(a,o){i&&i.m(a,o),T(a,e,o),s=!0,n||(r=J(window,"keydown",t[2]),n=!0)},p(a,[o]){a[0]?i?(i.p(a,o),o&1&&I(i,1)):(i=ei(a),i.c(),I(i,1),i.m(e.parentNode,e)):i&&(oe(),O(i,1,1,()=>{i=null}),le())},i(a){s||(I(i),s=!0)},o(a){O(i),s=!1},d(a){i&&i.d(a),a&&w(e),n=!1,r()}}}function xh(t,e,s){let n,r,i;ft(t,yh,h=>s(3,i=h));function a(h){h.key==="Escape"&&n&&n.reject()}const o=()=>{n.reject()},l=()=>n.resolve(!1),c=h=>n.resolve(h);return t.$$.update=()=>{t.$$.dirty&8&&s(0,n=i[0]),t.$$.dirty&1&&(n?Wr&&document.body.classList.add("overlay-visible"):Wr&&document.body.classList.remove("overlay-visible")),t.$$.dirty&1&&s(1,r=n&&(n.type==="success"||n.type==="warning"))},[n,r,a,i,o,l,c]}class Mh extends fe{constructor(e){super(),de(this,e,xh,_h,pe,{})}}const{store:Eh,createMessage:kh}=Ro(),Ah=Eh,ct=kh;var Sh=(t,...e)=>{const s=(r,i)=>{Object.getOwnPropertyNames(i).concat(Object.getOwnPropertySymbols(i).map(a=>a.toString())).forEach(a=>{a.match(/^(?:constructor|prototype|arguments|caller|name|bind|call|apply|toString|length)$/)||Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(i,a))})},n=class extends t{constructor(...i){super(...i),e.forEach(a=>s(this,new a))}};return e.forEach(r=>{s(n.prototype,r.prototype),s(n,r)}),n};const jn=class extends Error{constructor(t,e={}){super(t),this.detail=t,this.meta=e}static fromParent(t,e,s,n){return new jn(s,Object.assign({cause:t},n))}getCause(){return this.meta.cause||void 0}unwrapChain(t=this){return jn.unwrapChain(t)}};let Nh=jn;Nh.unwrapChain=t=>{const e=[t];let s=t.getCause();for(;s;)e.push(s),s=s.getCause();return e};var ri=t=>{t[0]==="#"&&(t=t.replace("#","")),t.length===3&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);const e=t.match(/.{1,2}/g);return[parseInt(e[0],16)/255,parseInt(e[1],16)/255,parseInt(e[2],16)/255]};const at=.4;function Ph(t,e,s,n,r,i,a,o,l,c){const h=r-s,u=a-r,d=l-a,f=i-n,p=o-i,m=c-o;let v,g,_,b,y=-1e4,M=-1e4;const x=[{x:s,y:n}];for(let L=1;L<t;L++){const S=L/t;v=s+h*S,_=r+u*S;const $=a+d*S;v+=(_-v)*S,_+=($-_)*S,g=n+f*S,b=i+p*S;const R=o+m*S;g+=(b-g)*S,b+=(R-b)*S;const W=v+(_-v)*S,V=g+(b-g)*S,j=W-y,D=V-M;j*j+D*D>e&&(x.push({x:W,y:V}),y=W,M=V)}return x.push({x:l,y:c}),x}function Lh(t){const e=t.length-1;return t.map((s,n,r)=>{if(n===0)return{rx:r[n+1].x*at*0,ry:s.y+(r[n+1].y-s.y)*at*0};if(n===e)return{lx:r[n-1].x+(s.x-r[n-1].x)*at*2,ly:r[n-1].y+(s.y-r[n-1].y)*at*2};if(s.y>r[n+1].y&&s.y>r[n-1].y||s.y<r[n+1].y&&s.y<r[n-1].y)return{lx:r[n-1].x+(s.x-r[n-1].x)*at,ly:s.y,rx:s.x+(r[n+1].x-s.x)*at,ry:s.y};{const a={x:r[n-1].x-r[n+1].x,y:r[n-1].y-r[n+1].y},o=Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2));a.x/=o,a.y/=o;const l=r[n+1].x-s.x,c=s.x-r[n-1].x;return{lx:s.x+a.x*c*at,ly:s.y+a.y*c*at,rx:s.x-a.x*l*at,ry:s.y-a.y*l*at}}})}function Th(t){const e=t.length-1,s={},n=Lh(t);return t.map((r,i,a)=>{if(i<e)return Ph(e*20,0,r.x,r.y,n[i].rx,n[i].ry,n[i+1].lx,n[i+1].ly,a[i+1].x,a[i+1].y)}).flat().filter(r=>!r||r.x in s?!1:(s[r.x]=!0,!0))}function Fo(t,e,s){let n;return(...r)=>{const i=()=>{n=null,s||t(...r)},a=s&&!n;clearTimeout(n),n=setTimeout(i,e),a&&t(...r)}}function Ih(t,e=!1){return function(s,n,r){let i;const a=r.value;return r.value=function(...o){const l=()=>{i=null,e||a.apply(this,o)},c=e&&!i;clearTimeout(i),i=setTimeout(l,t),c&&a.apply(this,o)},r}}var Bo={exports:{}};(function(t,e){(function(s,n){n()})(Qt,function(){function s(c,h){return typeof h=="undefined"?h={autoBom:!1}:typeof h!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function n(c,h,u){var d=new XMLHttpRequest;d.open("GET",c),d.responseType="blob",d.onload=function(){l(d.response,h,u)},d.onerror=function(){console.error("could not download file")},d.send()}function r(c){var h=new XMLHttpRequest;h.open("HEAD",c,!1);try{h.send()}catch{}return 200<=h.status&&299>=h.status}function i(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(h)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Qt=="object"&&Qt.global===Qt?Qt:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(c,h,u){var d=a.URL||a.webkitURL,f=document.createElement("a");h=h||c.name||"download",f.download=h,f.rel="noopener",typeof c=="string"?(f.href=c,f.origin===location.origin?i(f):r(f.href)?n(c,h,u):i(f,f.target="_blank")):(f.href=d.createObjectURL(c),setTimeout(function(){d.revokeObjectURL(f.href)},4e4),setTimeout(function(){i(f)},0))}:"msSaveOrOpenBlob"in navigator?function(c,h,u){if(h=h||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(s(c,u),h);else if(r(c))n(c,h,u);else{var d=document.createElement("a");d.href=c,d.target="_blank",setTimeout(function(){i(d)})}}:function(c,h,u,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),typeof c=="string")return n(c,h,u);var f=c.type==="application/octet-stream",p=/constructor/i.test(a.HTMLElement)||a.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||f&&p||o)&&typeof FileReader!="undefined"){var v=new FileReader;v.onloadend=function(){var b=v.result;b=m?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=b:location=b,d=null},v.readAsDataURL(c)}else{var g=a.URL||a.webkitURL,_=g.createObjectURL(c);d?d.location=_:location.href=_,d=null,setTimeout(function(){g.revokeObjectURL(_)},4e4)}});a.saveAs=l.saveAs=l,t.exports=l})})(Bo);var Dh=Bo.exports;const Uo=(t,e,s,n)=>{typeof t!="string"&&(t=JSON.stringify(t));const r=new Blob([t],{type:s+";charset=utf-8"});Dh.saveAs(r,e+"."+n)},jh=(t,e="default")=>{Uo(JSON.stringify(t),e,"application/json","json")},Oh=(t,e="default")=>{Uo(t,e,"text/plain","obj")};function Gs(t,e){let s,n,r,i=null,a=0;const o=t,l=()=>{a=0,i=null,r=o.apply(s,n),i||(s=n=null)};return function(){const h=Date.now();a||(a=h);const u=e-(h-a);return s=this,n=arguments,u<=0||u>e?(i&&(clearTimeout(i),i=null),a=h,r=o.apply(s,n),i||(s=n=null)):i||(i=setTimeout(l,u)),r}}const lt={amountEmitters:0,amountCallbacks:0,emitters:[]};typeof self!="undefined"&&"window"in self&&(globalThis.debug=lt);class Ze{constructor(){this.index=0,this.cbs={},this.cbsOnce={},this.index=lt.amountEmitters,lt.amountEmitters++}emit(e,s){e in this.cbs&&this.cbs[e].forEach(n=>n(s)),e in this.cbsOnce&&(this.cbsOnce[e].forEach(n=>n(s)),delete this.cbsOnce[e])}on(e,s,n=0){n>0&&(s=Gs(s,n));const r=Object.assign(this.cbs,{[e]:[...this.cbs[e]||[],s]});return this.cbs=r,lt.emitters[this.index]={name:this.constructor.name,cbs:Object.fromEntries(Object.keys(this.cbs).map(i=>[i,this.cbs[i].length]))},lt.amountCallbacks++,()=>{var i;lt.amountCallbacks--,(i=r[e])==null||i.splice(r[e].indexOf(s),1),lt.emitters[this.index]={name:this.constructor.name,cbs:Object.fromEntries(Object.keys(this.cbs).map(a=>[a,this.cbs[a].length]))}}}once(e,s){return this.cbsOnce[e]=[...this.cbsOnce[e]||[],s],()=>{this.cbsOnce[e].splice(this.cbsOnce[e].indexOf(s),1)}}destroyEventEmitter(){lt.amountEmitters--,Object.keys(this.cbs).forEach(e=>{lt.amountCallbacks-=this.cbs[e].length,delete this.cbs[e]}),Object.keys(this.cbsOnce).forEach(e=>delete this.cbsOnce[e]),this.cbs={},this.cbsOnce={},delete lt.emitters[this.index]}}function Vh(t){if(t.length===0)return 0;let e=0;for(let s=0;s<t.length;s++)e=(e<<5)-e+t.charCodeAt(s),e=e&e;return e}var Ch=()=>{const t={};let e=0;const s=(n=0,r=0)=>{if(r>500)throw new Error("Infinite loop in id generation algo");return n in t?s(Math.max(n++,e++),r+1):(t[n]=!0,n.toString())};return s.reset=()=>{Object.keys(t).forEach(n=>delete t[+n]),e=0},s};const _t=t=>t>1?"s":"",ii=t=>{if(typeof t!="number"||isNaN(t))return"never";if(t<1e3)return"< 1 second";const e=Math.floor(t/1e3);if(e<60)return e+" second"+_t(e);const s=Math.floor(e/60);if(s<60)return s+" minute"+_t(s);const n=Math.floor(s/60);if(n<24)return n+" hour"+_t(n);const r=Math.floor(n/24);if(r<7)return r+" day"+_t(r);const i=Math.floor(r/7);if(i<30)return i+" week"+_t(i);const a=Math.floor(i/30);if(a<12)return a+" month"+_t(a);const o=Math.floor(a/12);if(o<10)return o+" year"+_t(o);const l=Math.floor(a/10);return l+" decade"+_t(l)};function en(t){let e,s={length:NaN};const n=(r,i)=>r===s[i];return function(...i){return(i.length!==s.length||!i.every(n))&&(s=i,e=t.apply(this,i)),e}}var zh=t=>new Promise(e=>setTimeout(e,t));function ai(t){let e=t[0],s=t[1],n=t[2];return Math.sqrt(e*e+s*s+n*n)}function On(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function $h(t,e,s,n){return t[0]=e,t[1]=s,t[2]=n,t}function oi(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t}function li(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t[2]=e[2]-s[2],t}function Rh(t,e,s){return t[0]=e[0]*s[0],t[1]=e[1]*s[1],t[2]=e[2]*s[2],t}function Fh(t,e,s){return t[0]=e[0]/s[0],t[1]=e[1]/s[1],t[2]=e[2]/s[2],t}function tn(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function Bh(t,e){let s=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(s*s+n*n+r*r)}function Uh(t,e){let s=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return s*s+n*n+r*r}function ci(t){let e=t[0],s=t[1],n=t[2];return e*e+s*s+n*n}function Wh(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function qh(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Vn(t,e){let s=e[0],n=e[1],r=e[2],i=s*s+n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function Wo(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function hi(t,e,s){let n=e[0],r=e[1],i=e[2],a=s[0],o=s[1],l=s[2];return t[0]=r*l-i*o,t[1]=i*a-n*l,t[2]=n*o-r*a,t}function Hh(t,e,s,n){let r=e[0],i=e[1],a=e[2];return t[0]=r+n*(s[0]-r),t[1]=i+n*(s[1]-i),t[2]=a+n*(s[2]-a),t}function Xh(t,e,s){let n=e[0],r=e[1],i=e[2],a=s[3]*n+s[7]*r+s[11]*i+s[15];return a=a||1,t[0]=(s[0]*n+s[4]*r+s[8]*i+s[12])/a,t[1]=(s[1]*n+s[5]*r+s[9]*i+s[13])/a,t[2]=(s[2]*n+s[6]*r+s[10]*i+s[14])/a,t}function Gh(t,e,s){let n=e[0],r=e[1],i=e[2],a=s[3]*n+s[7]*r+s[11]*i+s[15];return a=a||1,t[0]=(s[0]*n+s[4]*r+s[8]*i)/a,t[1]=(s[1]*n+s[5]*r+s[9]*i)/a,t[2]=(s[2]*n+s[6]*r+s[10]*i)/a,t}function Yh(t,e,s){let n=e[0],r=e[1],i=e[2],a=s[0],o=s[1],l=s[2],c=s[3],h=o*i-l*r,u=l*n-a*i,d=a*r-o*n,f=o*d-l*u,p=l*h-a*d,m=a*u-o*h,v=c*2;return h*=v,u*=v,d*=v,f*=2,p*=2,m*=2,t[0]=n+h+f,t[1]=r+u+p,t[2]=i+d+m,t}const Jh=function(){const t=[0,0,0],e=[0,0,0];return function(s,n){On(t,s),On(e,n),Vn(t,t),Vn(e,e);let r=Wo(t,e);return r>1?0:r<-1?Math.PI:Math.acos(r)}}();function Qh(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}const Zh=t=>!!t.length,Kh=t=>!!t.draw;class ie extends Array{constructor(e=0,s=e,n=e){return super(e,s,n),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e}set y(e){this[1]=e}set z(e){this[2]=e}set(e,s=e,n=e){return Zh(e)?this.copy(e):($h(this,e,s,n),this)}copy(e){return On(this,e),this}add(e,s){return s?oi(this,e,s):oi(this,this,e),this}sub(e,s){return s?li(this,e,s):li(this,this,e),this}multiply(e){return e.length?Rh(this,this,e):tn(this,this,e),this}divide(e){return e.length?Fh(this,this,e):tn(this,this,1/e),this}inverse(e=this){return qh(this,e),this}len(){return ai(this)}distance(e){return e?Bh(this,e):ai(this)}squaredLen(){return ci(this)}squaredDistance(e){return e?Uh(this,e):ci(this)}negate(e=this){return Wh(this,e),this}cross(e,s){return s?hi(this,e,s):hi(this,this,e),this}scale(e){return tn(this,this,e),this}normalize(){return Vn(this,this),this}dot(e){return Wo(this,e)}equals(e){return Qh(this,e)}applyMatrix4(e){return Xh(this,this,e),this}scaleRotateMatrix4(e){return Gh(this,this,e),this}applyQuaternion(e){return Yh(this,this,e),this}angle(e){return Jh(this,e)}lerp(e,s){return Hh(this,this,e,s),this}clone(){return new ie(this[0],this[1],this[2])}fromArray(e,s=0){return this[0]=e[s],this[1]=e[s+1],this[2]=e[s+2],this}toArray(e=[],s=0){return e[s]=this[0],e[s+1]=this[1],e[s+2]=this[2],e}transformDirection(e){const s=this[0],n=this[1],r=this[2];return this[0]=e[0]*s+e[4]*n+e[8]*r,this[1]=e[1]*s+e[5]*n+e[9]*r,this[2]=e[2]*s+e[6]*n+e[10]*r,this.normalize()}}const St=new ie;let e1=1,t1=1,ui=!1;class It{constructor(e,s={}){this.raycast="box",e.canvas||console.error("gl not passed as fist argument to Geometry"),this.gl=e,this.attributes=s,this.id=e1++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let n in s)this.addAttribute(n,s[n])}addAttribute(e,s){if(this.attributes[e]=s,s.id=t1++,s.size=s.size||1,s.type=s.type||(s.data.constructor===Float32Array?this.gl.FLOAT:s.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),s.target=e==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,s.normalized=s.normalized||!1,s.stride=s.stride||0,s.offset=s.offset||0,s.count=s.count||(s.stride?s.data.byteLength/s.stride:s.data.length/s.size),s.divisor=s.instanced||0,s.needsUpdate=!1,s.buffer||(s.buffer=this.gl.createBuffer(),this.updateAttribute(s)),s.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==s.count*s.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,s.count*s.divisor);this.instancedCount=s.count*s.divisor}else e==="index"?this.drawRange.count=s.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,s.count))}updateAttribute(e){this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),this.gl.bufferData(e.target,e.data,this.gl.STATIC_DRAW),e.needsUpdate=!1}setIndex(e){this.addAttribute("index",e)}setDrawRange(e,s){this.drawRange.start=e,this.drawRange.count=s}setInstancedCount(e){this.instancedCount=e}createVAO(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}bindAttributes(e){e.attributeLocations.forEach((s,{name:n,type:r})=>{if(!this.attributes[n]){console.warn(`active attribute ${n} not being supplied`);return}const i=this.attributes[n];this.gl.bindBuffer(i.target,i.buffer),this.glState.boundBuffer=i.buffer;let a=1;r===35674&&(a=2),r===35675&&(a=3),r===35676&&(a=4);const o=i.size/a,l=a===1?0:a*a*a,c=a===1?0:a*a;for(let h=0;h<a;h++)this.gl.vertexAttribPointer(s+h,o,i.type,i.normalized,i.stride+l,i.offset+h*c),this.gl.enableVertexAttribArray(s+h),this.gl.renderer.vertexAttribDivisor(s+h,i.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:e,mode:s=this.gl.TRIANGLES}){this.gl.renderer.currentGeometry!==`${this.id}_${e.attributeOrder}`&&(this.VAOs[e.attributeOrder]||this.createVAO(e),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${e.attributeOrder}`),e.attributeLocations.forEach((n,{name:r})=>{const i=this.attributes[r];i.needsUpdate&&this.updateAttribute(i)}),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(s,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*2,this.instancedCount):this.gl.renderer.drawArraysInstanced(s,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(s,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*2):this.gl.drawArrays(s,this.drawRange.start,this.drawRange.count)}getPosition(){const e=this.attributes.position;if(e.data)return e;if(!ui)return console.warn("No position buffer data found to compute bounds"),ui=!0}computeBoundingBox(e=null){e||(e=this.getPosition());const s=e.data,n=e.offset||0,r=e.stride||e.size;this.bounds||(this.bounds={min:new ie,max:new ie,center:new ie,scale:new ie,radius:1/0});const i=this.bounds.min,a=this.bounds.max,o=this.bounds.center,l=this.bounds.scale;i.set(1/0),a.set(-1/0);for(let c=n,h=s.length;c<h;c+=r){const u=s[c],d=s[c+1],f=s[c+2];i.x=Math.min(u,i.x),i.y=Math.min(d,i.y),i.z=Math.min(f,i.z),a.x=Math.max(u,a.x),a.y=Math.max(d,a.y),a.z=Math.max(f,a.z)}l.sub(a,i),o.add(i,a).divide(2)}computeBoundingSphere(e=null){e||(e=this.getPosition());const s=e.data,n=e.offset||0,r=e.stride||e.size;this.bounds||this.computeBoundingBox(e);let i=0;for(let a=n,o=s.length;a<o;a+=r)St.fromArray(s,a),i=Math.max(i,this.bounds.center.squaredDistance(St));this.bounds.radius=Math.sqrt(i)}computeVertexNormals(){const e=this.attributes.position;if(!e)return;let s=this.attributes.normal;s?s.data.fill(0):(this.addAttribute("normal",{size:3,data:new Float32Array(e.count*3)}),s=this.attributes.normal);const n=new ie,r=new ie,i=new ie,a=new ie,o=new ie,l=new ie,c=new ie,h=new ie,u=this.attributes.index;if(u){let d,f,p;for(let m=0,v=u.count;m<v;m+=3)d=u.data[m],f=u.data[m+1],p=u.data[m+2],n.fromArray(e.data,d*e.size),r.fromArray(e.data,f*e.size),i.fromArray(e.data,p*e.size),c.sub(i,r),h.sub(n,r),c.cross(h),a.fromArray(s.data,d*s.size),o.fromArray(s.data,f*s.size),l.fromArray(s.data,p*s.size),a.add(c),o.add(c),l.add(c),d*=s.size,s.data[d]=a.x,s.data[d+1]=a.y,s.data[d+2]=a.z,f*=s.size,s.data[f]=o.x,s.data[f+1]=o.y,s.data[f+2]=o.z,p*=s.size,s.data[p]=l.x,s.data[p+1]=l.y,s.data[p+2]=l.z}else for(let d=0,f=e.count;d<f;d+=3)n.fromArray(e.data,d*e.size),r.fromArray(e.data,(d+1)*e.size),i.fromArray(e.data,(d+2)*e.size),c.sub(i,r),h.sub(n,r),c.cross(h),s.data[d*s.size]=c.x,s.data[d*s.size+1]=c.y,s.data[d*s.size+2]=c.z,s.data[(d+1)*s.size]=c.x,s.data[(d+1)*s.size+1]=c.y,s.data[(d+1)*s.size+2]=c.z,s.data[(d+2)*s.size]=c.x,s.data[(d+2)*s.size+1]=c.y,s.data[(d+2)*s.size+2]=c.z;this.normalizeNormals(),s.needsUpdate=!0}normalizeNormals(){const e=this.attributes.normal;for(let s=0,n=e.count;s<n;s++)St.fromArray(e.data,s*e.size),St.normalize(),e.data[s*e.size]=St.x,e.data[s*e.size+1]=St.y,e.data[s*e.size+2]=St.z}remove(){for(let e in this.attributes)this.gl.deleteBuffer(this.attributes[e].buffer),delete this.attributes[e]}}let s1=1;const fi={};class Jt{constructor(e,{vertex:s,fragment:n,uniforms:r={},transparent:i=!1,cullFace:a=e.BACK,frontFace:o=e.CCW,depthTest:l=!0,depthWrite:c=!0,depthFunc:h=e.LESS}={}){e.canvas||console.error("gl not passed as fist argument to Program"),this.gl=e,this.uniforms=r,this.id=s1++,s||console.warn("vertex shader not supplied"),n||console.warn("fragment shader not supplied"),this.transparent=i,this.cullFace=a,this.frontFace=o,this.depthTest=l,this.depthWrite=c,this.depthFunc=h,this.blendFunc={},this.blendEquation={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA));const u=e.createShader(e.VERTEX_SHADER);e.shaderSource(u,s),e.compileShader(u),e.getShaderInfoLog(u)!==""&&console.warn(`${e.getShaderInfoLog(u)}
Vertex Shader
${di(s)}`);const d=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(d,n),e.compileShader(d),e.getShaderInfoLog(d)!==""&&console.warn(`${e.getShaderInfoLog(d)}
Fragment Shader
${di(n)}`),this.program=e.createProgram(),e.attachShader(this.program,u),e.attachShader(this.program,d),e.linkProgram(this.program),!e.getProgramParameter(this.program,e.LINK_STATUS)){console.warn(e.getProgramInfoLog(this.program));return}e.deleteShader(u),e.deleteShader(d),this.uniformLocations=new Map;let f=e.getProgramParameter(this.program,e.ACTIVE_UNIFORMS);for(let v=0;v<f;v++){let g=e.getActiveUniform(this.program,v);this.uniformLocations.set(g,e.getUniformLocation(this.program,g.name));const _=g.name.match(/(\w+)/g);g.uniformName=_[0],_.length===3?(g.isStructArray=!0,g.structIndex=Number(_[1]),g.structProperty=_[2]):_.length===2&&isNaN(Number(_[1]))&&(g.isStruct=!0,g.structProperty=_[1])}this.attributeLocations=new Map;const p=[],m=e.getProgramParameter(this.program,e.ACTIVE_ATTRIBUTES);for(let v=0;v<m;v++){const g=e.getActiveAttrib(this.program,v),_=e.getAttribLocation(this.program,g.name);p[_]=g.name,this.attributeLocations.set(g,_)}this.attributeOrder=p.join("")}setBlendFunc(e,s,n,r){this.blendFunc.src=e,this.blendFunc.dst=s,this.blendFunc.srcAlpha=n,this.blendFunc.dstAlpha=r,e&&(this.transparent=!0)}setBlendEquation(e,s){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=s}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha)}use({flipFaces:e=!1}={}){let s=-1;this.gl.renderer.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.currentProgram=this.id),this.uniformLocations.forEach((r,i)=>{let a=i.uniformName,o=this.uniforms[a];if(i.isStruct&&(o=o[i.structProperty],a+=`.${i.structProperty}`),i.isStructArray&&(o=o[i.structIndex][i.structProperty],a+=`[${i.structIndex}].${i.structProperty}`),!o)return pi(`Active uniform ${a} has not been supplied`);if(o&&o.value===void 0)return pi(`${a} uniform is missing a value parameter`);if(o.value.texture)return s=s+1,o.value.update(s),sn(this.gl,i.type,r,s);if(o.value.length&&o.value[0].texture){const l=[];return o.value.forEach(c=>{s=s+1,c.update(s),l.push(s)}),sn(this.gl,i.type,r,l)}sn(this.gl,i.type,r,o.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function sn(t,e,s,n){n=n.length?n1(n):n;const r=t.renderer.state.uniformLocations.get(s);if(n.length)if(r===void 0||r.length!==n.length)t.renderer.state.uniformLocations.set(s,n.slice(0));else{if(r1(r,n))return;r.set?r.set(n):i1(r,n),t.renderer.state.uniformLocations.set(s,r)}else{if(r===n)return;t.renderer.state.uniformLocations.set(s,n)}switch(e){case 5126:return n.length?t.uniform1fv(s,n):t.uniform1f(s,n);case 35664:return t.uniform2fv(s,n);case 35665:return t.uniform3fv(s,n);case 35666:return t.uniform4fv(s,n);case 35670:case 5124:case 35678:case 35680:return n.length?t.uniform1iv(s,n):t.uniform1i(s,n);case 35671:case 35667:return t.uniform2iv(s,n);case 35672:case 35668:return t.uniform3iv(s,n);case 35673:case 35669:return t.uniform4iv(s,n);case 35674:return t.uniformMatrix2fv(s,!1,n);case 35675:return t.uniformMatrix3fv(s,!1,n);case 35676:return t.uniformMatrix4fv(s,!1,n)}}function di(t){let e=t.split(`
`);for(let s=0;s<e.length;s++)e[s]=s+1+": "+e[s];return e.join(`
`)}function n1(t){const e=t.length,s=t[0].length;if(s===void 0)return t;const n=e*s;let r=fi[n];r||(fi[n]=r=new Float32Array(n));for(let i=0;i<e;i++)r.set(t[i],i*s);return r}function r1(t,e){if(t.length!==e.length)return!1;for(let s=0,n=t.length;s<n;s++)if(t[s]!==e[s])return!1;return!0}function i1(t,e){for(let s=0,n=t.length;s<n;s++)t[s]=e[s]}let nn=0;function pi(t){nn>100||(console.warn(t),nn++,nn>100&&console.warn("More than 100 program warnings - stopping logs."))}const rn=new ie;let a1=1;class o1{constructor({canvas:e=document.createElement("canvas"),width:s=300,height:n=150,dpr:r=1,alpha:i=!1,depth:a=!0,stencil:o=!1,antialias:l=!1,premultipliedAlpha:c=!1,preserveDrawingBuffer:h=!1,powerPreference:u="default",autoClear:d=!0,webgl:f=2}={}){const p={alpha:i,depth:a,stencil:o,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:h,powerPreference:u};this.dpr=r,this.alpha=i,this.color=!0,this.depth=a,this.stencil=o,this.premultipliedAlpha=c,this.autoClear=d,this._id=a1++,f===2&&(this.gl=e.getContext("webgl2",p)),this.isWebgl2=!!this.gl,this.gl||(this.gl=e.getContext("webgl",p)||e.getContext("experimental-webgl",p)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(s,n),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=null,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LESS,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}get id(){return this._id}setSize(e,s){this.width=e,this.height=s,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=s*this.dpr,Object.assign(this.gl.canvas.style,{width:e+"px",height:s+"px"})}setViewport(e,s){this.state.viewport.width===e&&this.state.viewport.height===s||(this.state.viewport.width=e,this.state.viewport.height=s,this.gl.viewport(0,0,e,s))}enable(e){this.state[e]!==!0&&(this.gl.enable(e),this.state[e]=!0)}disable(e){this.state[e]!==!1&&(this.gl.disable(e),this.state[e]=!1)}setBlendFunc(e,s,n,r){this.state.blendFunc.src===e&&this.state.blendFunc.dst===s&&this.state.blendFunc.srcAlpha===n&&this.state.blendFunc.dstAlpha===r||(this.state.blendFunc.src=e,this.state.blendFunc.dst=s,this.state.blendFunc.srcAlpha=n,this.state.blendFunc.dstAlpha=r,n!==void 0?this.gl.blendFuncSeparate(e,s,n,r):this.gl.blendFunc(e,s))}setBlendEquation(e,s){e=e||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===s)&&(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=s,s!==void 0?this.gl.blendEquationSeparate(e,s):this.gl.blendEquation(e))}setCullFace(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}setFrontFace(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}setDepthMask(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}setDepthFunc(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}activeTexture(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}bindFramebuffer({target:e=this.gl.FRAMEBUFFER,buffer:s=null}={}){this.state.framebuffer!==s&&(this.state.framebuffer=s,this.gl.bindFramebuffer(e,s))}getExtension(e,s,n){return s&&this.gl[s]?this.gl[s].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),s?this.extensions[e]?this.extensions[e][n].bind(this.extensions[e]):null:this.extensions[e])}sortOpaque(e,s){return e.renderOrder!==s.renderOrder?e.renderOrder-s.renderOrder:e.program.id!==s.program.id?e.program.id-s.program.id:e.zDepth!==s.zDepth?e.zDepth-s.zDepth:s.id-e.id}sortTransparent(e,s){return e.renderOrder!==s.renderOrder?e.renderOrder-s.renderOrder:e.zDepth!==s.zDepth?s.zDepth-e.zDepth:s.id-e.id}sortUI(e,s){return e.renderOrder!==s.renderOrder?e.renderOrder-s.renderOrder:e.program.id!==s.program.id?e.program.id-s.program.id:s.id-e.id}getRenderList({scene:e,camera:s,frustumCull:n,sort:r}){let i=[];if(s&&n&&s.updateFrustum(),e.traverse(a=>{if(!a.visible)return!0;!Kh(a)||n&&a.frustumCulled&&s&&!s.frustumIntersectsMesh(a)||i.push(a)}),r){const a=[],o=[],l=[];i.forEach(c=>{c.program.transparent?c.program.depthTest?o.push(c):l.push(c):a.push(c),c.zDepth=0,!(c.renderOrder!==0||!c.program.depthTest||!s)&&(c.worldMatrix.getTranslation(rn),rn.applyMatrix4(s.projectionViewMatrix),c.zDepth=rn.z)}),a.sort(this.sortOpaque),o.sort(this.sortTransparent),l.sort(this.sortUI),i=a.concat(o,l)}return i}render({scene:e,camera:s,target:n=null,update:r=!0,sort:i=!0,frustumCull:a=!0,clear:o}){n===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(n),this.setViewport(n.width,n.height)),(o||this.autoClear&&o!==!1)&&(this.depth&&(!n||n.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),r&&e.updateMatrixWorld(),s&&s.updateMatrixWorld(),this.getRenderList({scene:e,camera:s,frustumCull:a,sort:i}).forEach(c=>{c.draw({camera:s})})}}const l1=1e-6;function c1(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function h1(t,e,s,n,r,i,a,o,l,c,h,u,d,f,p,m,v){return t[0]=e,t[1]=s,t[2]=n,t[3]=r,t[4]=i,t[5]=a,t[6]=o,t[7]=l,t[8]=c,t[9]=h,t[10]=u,t[11]=d,t[12]=f,t[13]=p,t[14]=m,t[15]=v,t}function u1(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function f1(t,e){let s=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8],u=e[9],d=e[10],f=e[11],p=e[12],m=e[13],v=e[14],g=e[15],_=s*o-n*a,b=s*l-r*a,y=s*c-i*a,M=n*l-r*o,x=n*c-i*o,L=r*c-i*l,S=h*m-u*p,$=h*v-d*p,R=h*g-f*p,W=u*v-d*m,V=u*g-f*m,j=d*g-f*v,D=_*j-b*V+y*W+M*R-x*$+L*S;return D?(D=1/D,t[0]=(o*j-l*V+c*W)*D,t[1]=(r*V-n*j-i*W)*D,t[2]=(m*L-v*x+g*M)*D,t[3]=(d*x-u*L-f*M)*D,t[4]=(l*R-a*j-c*$)*D,t[5]=(s*j-r*R+i*$)*D,t[6]=(v*y-p*L-g*b)*D,t[7]=(h*L-d*y+f*b)*D,t[8]=(a*V-o*R+c*S)*D,t[9]=(n*R-s*V-i*S)*D,t[10]=(p*x-m*y+g*_)*D,t[11]=(u*y-h*x-f*_)*D,t[12]=(o*$-a*W-l*S)*D,t[13]=(s*W-n*$+r*S)*D,t[14]=(m*b-p*M-v*_)*D,t[15]=(h*M-u*b+d*_)*D,t):null}function d1(t){let e=t[0],s=t[1],n=t[2],r=t[3],i=t[4],a=t[5],o=t[6],l=t[7],c=t[8],h=t[9],u=t[10],d=t[11],f=t[12],p=t[13],m=t[14],v=t[15],g=e*a-s*i,_=e*o-n*i,b=e*l-r*i,y=s*o-n*a,M=s*l-r*a,x=n*l-r*o,L=c*p-h*f,S=c*m-u*f,$=c*v-d*f,R=h*m-u*p,W=h*v-d*p,V=u*v-d*m;return g*V-_*W+b*R+y*$-M*S+x*L}function mi(t,e,s){let n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],u=e[8],d=e[9],f=e[10],p=e[11],m=e[12],v=e[13],g=e[14],_=e[15],b=s[0],y=s[1],M=s[2],x=s[3];return t[0]=b*n+y*o+M*u+x*m,t[1]=b*r+y*l+M*d+x*v,t[2]=b*i+y*c+M*f+x*g,t[3]=b*a+y*h+M*p+x*_,b=s[4],y=s[5],M=s[6],x=s[7],t[4]=b*n+y*o+M*u+x*m,t[5]=b*r+y*l+M*d+x*v,t[6]=b*i+y*c+M*f+x*g,t[7]=b*a+y*h+M*p+x*_,b=s[8],y=s[9],M=s[10],x=s[11],t[8]=b*n+y*o+M*u+x*m,t[9]=b*r+y*l+M*d+x*v,t[10]=b*i+y*c+M*f+x*g,t[11]=b*a+y*h+M*p+x*_,b=s[12],y=s[13],M=s[14],x=s[15],t[12]=b*n+y*o+M*u+x*m,t[13]=b*r+y*l+M*d+x*v,t[14]=b*i+y*c+M*f+x*g,t[15]=b*a+y*h+M*p+x*_,t}function p1(t,e,s){let n=s[0],r=s[1],i=s[2],a,o,l,c,h,u,d,f,p,m,v,g;return e===t?(t[12]=e[0]*n+e[4]*r+e[8]*i+e[12],t[13]=e[1]*n+e[5]*r+e[9]*i+e[13],t[14]=e[2]*n+e[6]*r+e[10]*i+e[14],t[15]=e[3]*n+e[7]*r+e[11]*i+e[15]):(a=e[0],o=e[1],l=e[2],c=e[3],h=e[4],u=e[5],d=e[6],f=e[7],p=e[8],m=e[9],v=e[10],g=e[11],t[0]=a,t[1]=o,t[2]=l,t[3]=c,t[4]=h,t[5]=u,t[6]=d,t[7]=f,t[8]=p,t[9]=m,t[10]=v,t[11]=g,t[12]=a*n+h*r+p*i+e[12],t[13]=o*n+u*r+m*i+e[13],t[14]=l*n+d*r+v*i+e[14],t[15]=c*n+f*r+g*i+e[15]),t}function m1(t,e,s){let n=s[0],r=s[1],i=s[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function v1(t,e,s,n){let r=n[0],i=n[1],a=n[2],o=Math.hypot(r,i,a),l,c,h,u,d,f,p,m,v,g,_,b,y,M,x,L,S,$,R,W,V,j,D,H;return Math.abs(o)<l1?null:(o=1/o,r*=o,i*=o,a*=o,l=Math.sin(s),c=Math.cos(s),h=1-c,u=e[0],d=e[1],f=e[2],p=e[3],m=e[4],v=e[5],g=e[6],_=e[7],b=e[8],y=e[9],M=e[10],x=e[11],L=r*r*h+c,S=i*r*h+a*l,$=a*r*h-i*l,R=r*i*h-a*l,W=i*i*h+c,V=a*i*h+r*l,j=r*a*h+i*l,D=i*a*h-r*l,H=a*a*h+c,t[0]=u*L+m*S+b*$,t[1]=d*L+v*S+y*$,t[2]=f*L+g*S+M*$,t[3]=p*L+_*S+x*$,t[4]=u*R+m*W+b*V,t[5]=d*R+v*W+y*V,t[6]=f*R+g*W+M*V,t[7]=p*R+_*W+x*V,t[8]=u*j+m*D+b*H,t[9]=d*j+v*D+y*H,t[10]=f*j+g*D+M*H,t[11]=p*j+_*D+x*H,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function g1(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function qo(t,e){let s=e[0],n=e[1],r=e[2],i=e[4],a=e[5],o=e[6],l=e[8],c=e[9],h=e[10];return t[0]=Math.hypot(s,n,r),t[1]=Math.hypot(i,a,o),t[2]=Math.hypot(l,c,h),t}function y1(t){let e=t[0],s=t[1],n=t[2],r=t[4],i=t[5],a=t[6],o=t[8],l=t[9],c=t[10];const h=e*e+s*s+n*n,u=r*r+i*i+a*a,d=o*o+l*l+c*c;return Math.sqrt(Math.max(h,u,d))}const w1=function(){const t=[0,0,0];return function(e,s){let n=t;qo(n,s);let r=1/n[0],i=1/n[1],a=1/n[2],o=s[0]*r,l=s[1]*i,c=s[2]*a,h=s[4]*r,u=s[5]*i,d=s[6]*a,f=s[8]*r,p=s[9]*i,m=s[10]*a,v=o+u+m,g=0;return v>0?(g=Math.sqrt(v+1)*2,e[3]=.25*g,e[0]=(d-p)/g,e[1]=(f-c)/g,e[2]=(l-h)/g):o>u&&o>m?(g=Math.sqrt(1+o-u-m)*2,e[3]=(d-p)/g,e[0]=.25*g,e[1]=(l+h)/g,e[2]=(f+c)/g):u>m?(g=Math.sqrt(1+u-o-m)*2,e[3]=(f-c)/g,e[0]=(l+h)/g,e[1]=.25*g,e[2]=(d+p)/g):(g=Math.sqrt(1+m-o-u)*2,e[3]=(l-h)/g,e[0]=(f+c)/g,e[1]=(d+p)/g,e[2]=.25*g),e}}();function b1(t,e,s,n){let r=e[0],i=e[1],a=e[2],o=e[3],l=r+r,c=i+i,h=a+a,u=r*l,d=r*c,f=r*h,p=i*c,m=i*h,v=a*h,g=o*l,_=o*c,b=o*h,y=n[0],M=n[1],x=n[2];return t[0]=(1-(p+v))*y,t[1]=(d+b)*y,t[2]=(f-_)*y,t[3]=0,t[4]=(d-b)*M,t[5]=(1-(u+v))*M,t[6]=(m+g)*M,t[7]=0,t[8]=(f+_)*x,t[9]=(m-g)*x,t[10]=(1-(u+p))*x,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t}function _1(t,e){let s=e[0],n=e[1],r=e[2],i=e[3],a=s+s,o=n+n,l=r+r,c=s*a,h=n*a,u=n*o,d=r*a,f=r*o,p=r*l,m=i*a,v=i*o,g=i*l;return t[0]=1-u-p,t[1]=h+g,t[2]=d-v,t[3]=0,t[4]=h-g,t[5]=1-c-p,t[6]=f+m,t[7]=0,t[8]=d+v,t[9]=f-m,t[10]=1-c-u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function x1(t,e,s,n,r){let i=1/Math.tan(e/2),a=1/(n-r);return t[0]=i/s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+n)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*n*a,t[15]=0,t}function M1(t,e,s,n,r,i,a){let o=1/(e-s),l=1/(n-r),c=1/(i-a);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+s)*o,t[13]=(r+n)*l,t[14]=(a+i)*c,t[15]=1,t}function E1(t,e,s,n){let r=e[0],i=e[1],a=e[2],o=n[0],l=n[1],c=n[2],h=r-s[0],u=i-s[1],d=a-s[2],f=h*h+u*u+d*d;f===0?d=1:(f=1/Math.sqrt(f),h*=f,u*=f,d*=f);let p=l*d-c*u,m=c*h-o*d,v=o*u-l*h;return f=p*p+m*m+v*v,f===0&&(c?o+=1e-6:l?c+=1e-6:l+=1e-6,p=l*d-c*u,m=c*h-o*d,v=o*u-l*h,f=p*p+m*m+v*v),f=1/Math.sqrt(f),p*=f,m*=f,v*=f,t[0]=p,t[1]=m,t[2]=v,t[3]=0,t[4]=u*v-d*m,t[5]=d*p-h*v,t[6]=h*m-u*p,t[7]=0,t[8]=h,t[9]=u,t[10]=d,t[11]=0,t[12]=r,t[13]=i,t[14]=a,t[15]=1,t}class Et extends Array{constructor(e=1,s=0,n=0,r=0,i=0,a=1,o=0,l=0,c=0,h=0,u=1,d=0,f=0,p=0,m=0,v=1){return super(e,s,n,r,i,a,o,l,c,h,u,d,f,p,m,v),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(e){this[12]=e}set y(e){this[13]=e}set z(e){this[14]=e}set w(e){this[15]=e}set(e,s,n,r,i,a,o,l,c,h,u,d,f,p,m,v){return e.length?this.copy(e):(h1(this,e,s,n,r,i,a,o,l,c,h,u,d,f,p,m,v),this)}translate(e,s=this){return p1(this,s,e),this}rotate(e,s,n=this){return v1(this,n,e,s),this}scale(e,s=this){return m1(this,s,typeof e=="number"?[e,e,e]:e),this}multiply(e,s){return s?mi(this,e,s):mi(this,this,e),this}identity(){return u1(this),this}copy(e){return c1(this,e),this}fromPerspective({fov:e,aspect:s,near:n,far:r}={}){return x1(this,e,s,n,r),this}fromOrthogonal({left:e,right:s,bottom:n,top:r,near:i,far:a}){return M1(this,e,s,n,r,i,a),this}fromQuaternion(e){return _1(this,e),this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}inverse(e=this){return f1(this,e),this}compose(e,s,n){return b1(this,e,s,n),this}getRotation(e){return w1(e,this),this}getTranslation(e){return g1(e,this),this}getScaling(e){return qo(e,this),this}getMaxScaleOnAxis(){return y1(this)}lookAt(e,s,n){return E1(this,e,s,n),this}determinant(){return d1(this)}fromArray(e,s=0){return this[0]=e[s],this[1]=e[s+1],this[2]=e[s+2],this[3]=e[s+3],this[4]=e[s+4],this[5]=e[s+5],this[6]=e[s+6],this[7]=e[s+7],this[8]=e[s+8],this[9]=e[s+9],this[10]=e[s+10],this[11]=e[s+11],this[12]=e[s+12],this[13]=e[s+13],this[14]=e[s+14],this[15]=e[s+15],this}toArray(e=[],s=0){return e[s]=this[0],e[s+1]=this[1],e[s+2]=this[2],e[s+3]=this[3],e[s+4]=this[4],e[s+5]=this[5],e[s+6]=this[6],e[s+7]=this[7],e[s+8]=this[8],e[s+9]=this[9],e[s+10]=this[10],e[s+11]=this[11],e[s+12]=this[12],e[s+13]=this[13],e[s+14]=this[14],e[s+15]=this[15],e}}function k1(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function A1(t,e,s,n,r){return t[0]=e,t[1]=s,t[2]=n,t[3]=r,t}function S1(t,e){let s=e[0],n=e[1],r=e[2],i=e[3],a=s*s+n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=s*a,t[1]=n*a,t[2]=r*a,t[3]=i*a,t}function N1(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function P1(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function L1(t,e,s){s=s*.5;let n=Math.sin(s);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(s),t}function vi(t,e,s){let n=e[0],r=e[1],i=e[2],a=e[3],o=s[0],l=s[1],c=s[2],h=s[3];return t[0]=n*h+a*o+r*c-i*l,t[1]=r*h+a*l+i*o-n*c,t[2]=i*h+a*c+n*l-r*o,t[3]=a*h-n*o-r*l-i*c,t}function T1(t,e,s){s*=.5;let n=e[0],r=e[1],i=e[2],a=e[3],o=Math.sin(s),l=Math.cos(s);return t[0]=n*l+a*o,t[1]=r*l+i*o,t[2]=i*l-r*o,t[3]=a*l-n*o,t}function I1(t,e,s){s*=.5;let n=e[0],r=e[1],i=e[2],a=e[3],o=Math.sin(s),l=Math.cos(s);return t[0]=n*l-i*o,t[1]=r*l+a*o,t[2]=i*l+n*o,t[3]=a*l-r*o,t}function D1(t,e,s){s*=.5;let n=e[0],r=e[1],i=e[2],a=e[3],o=Math.sin(s),l=Math.cos(s);return t[0]=n*l+r*o,t[1]=r*l-n*o,t[2]=i*l+a*o,t[3]=a*l-i*o,t}function j1(t,e,s,n){let r=e[0],i=e[1],a=e[2],o=e[3],l=s[0],c=s[1],h=s[2],u=s[3],d,f,p,m,v;return f=r*l+i*c+a*h+o*u,f<0&&(f=-f,l=-l,c=-c,h=-h,u=-u),1-f>1e-6?(d=Math.acos(f),p=Math.sin(d),m=Math.sin((1-n)*d)/p,v=Math.sin(n*d)/p):(m=1-n,v=n),t[0]=m*r+v*l,t[1]=m*i+v*c,t[2]=m*a+v*h,t[3]=m*o+v*u,t}function O1(t,e){let s=e[0],n=e[1],r=e[2],i=e[3],a=s*s+n*n+r*r+i*i,o=a?1/a:0;return t[0]=-s*o,t[1]=-n*o,t[2]=-r*o,t[3]=i*o,t}function V1(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function C1(t,e){let s=e[0]+e[4]+e[8],n;if(s>0)n=Math.sqrt(s+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{let r=0;e[4]>e[0]&&(r=1),e[8]>e[r*3+r]&&(r=2);let i=(r+1)%3,a=(r+2)%3;n=Math.sqrt(e[r*3+r]-e[i*3+i]-e[a*3+a]+1),t[r]=.5*n,n=.5/n,t[3]=(e[i*3+a]-e[a*3+i])*n,t[i]=(e[i*3+r]+e[r*3+i])*n,t[a]=(e[a*3+r]+e[r*3+a])*n}return t}function z1(t,e,s="YXZ"){let n=Math.sin(e[0]*.5),r=Math.cos(e[0]*.5),i=Math.sin(e[1]*.5),a=Math.cos(e[1]*.5),o=Math.sin(e[2]*.5),l=Math.cos(e[2]*.5);return s==="XYZ"?(t[0]=n*a*l+r*i*o,t[1]=r*i*l-n*a*o,t[2]=r*a*o+n*i*l,t[3]=r*a*l-n*i*o):s==="YXZ"?(t[0]=n*a*l+r*i*o,t[1]=r*i*l-n*a*o,t[2]=r*a*o-n*i*l,t[3]=r*a*l+n*i*o):s==="ZXY"?(t[0]=n*a*l-r*i*o,t[1]=r*i*l+n*a*o,t[2]=r*a*o+n*i*l,t[3]=r*a*l-n*i*o):s==="ZYX"?(t[0]=n*a*l-r*i*o,t[1]=r*i*l+n*a*o,t[2]=r*a*o-n*i*l,t[3]=r*a*l+n*i*o):s==="YZX"?(t[0]=n*a*l+r*i*o,t[1]=r*i*l+n*a*o,t[2]=r*a*o-n*i*l,t[3]=r*a*l-n*i*o):s==="XZY"&&(t[0]=n*a*l-r*i*o,t[1]=r*i*l-n*a*o,t[2]=r*a*o+n*i*l,t[3]=r*a*l+n*i*o),t}const $1=k1,R1=A1,F1=N1,B1=S1;class U1 extends Array{constructor(e=0,s=0,n=0,r=1){return super(e,s,n,r),this.onChange=()=>{},this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(e){this[0]=e,this.onChange()}set y(e){this[1]=e,this.onChange()}set z(e){this[2]=e,this.onChange()}set w(e){this[3]=e,this.onChange()}identity(){return P1(this),this.onChange(),this}set(e,s,n,r){return e.length?this.copy(e):(R1(this,e,s,n,r),this.onChange(),this)}rotateX(e){return T1(this,this,e),this.onChange(),this}rotateY(e){return I1(this,this,e),this.onChange(),this}rotateZ(e){return D1(this,this,e),this.onChange(),this}inverse(e=this){return O1(this,e),this.onChange(),this}conjugate(e=this){return V1(this,e),this.onChange(),this}copy(e){return $1(this,e),this.onChange(),this}normalize(e=this){return B1(this,e),this.onChange(),this}multiply(e,s){return s?vi(this,e,s):vi(this,this,e),this.onChange(),this}dot(e){return F1(this,e)}fromMatrix3(e){return C1(this,e),this.onChange(),this}fromEuler(e){return z1(this,e,e.order),this}fromAxisAngle(e,s){return L1(this,e,s),this}slerp(e,s){return j1(this,this,e,s),this}fromArray(e,s=0){return this[0]=e[s],this[1]=e[s+1],this[2]=e[s+2],this[3]=e[s+3],this}toArray(e=[],s=0){return e[s]=this[0],e[s+1]=this[1],e[s+2]=this[2],e[s+3]=this[3],e}}function W1(t,e,s="YXZ"){return s==="XYZ"?(t[1]=Math.asin(Math.min(Math.max(e[8],-1),1)),Math.abs(e[8])<.99999?(t[0]=Math.atan2(-e[9],e[10]),t[2]=Math.atan2(-e[4],e[0])):(t[0]=Math.atan2(e[6],e[5]),t[2]=0)):s==="YXZ"?(t[0]=Math.asin(-Math.min(Math.max(e[9],-1),1)),Math.abs(e[9])<.99999?(t[1]=Math.atan2(e[8],e[10]),t[2]=Math.atan2(e[1],e[5])):(t[1]=Math.atan2(-e[2],e[0]),t[2]=0)):s==="ZXY"?(t[0]=Math.asin(Math.min(Math.max(e[6],-1),1)),Math.abs(e[6])<.99999?(t[1]=Math.atan2(-e[2],e[10]),t[2]=Math.atan2(-e[4],e[5])):(t[1]=0,t[2]=Math.atan2(e[1],e[0]))):s==="ZYX"?(t[1]=Math.asin(-Math.min(Math.max(e[2],-1),1)),Math.abs(e[2])<.99999?(t[0]=Math.atan2(e[6],e[10]),t[2]=Math.atan2(e[1],e[0])):(t[0]=0,t[2]=Math.atan2(-e[4],e[5]))):s==="YZX"?(t[2]=Math.asin(Math.min(Math.max(e[1],-1),1)),Math.abs(e[1])<.99999?(t[0]=Math.atan2(-e[9],e[5]),t[1]=Math.atan2(-e[2],e[0])):(t[0]=0,t[1]=Math.atan2(e[8],e[10]))):s==="XZY"&&(t[2]=Math.asin(-Math.min(Math.max(e[4],-1),1)),Math.abs(e[4])<.99999?(t[0]=Math.atan2(e[6],e[5]),t[1]=Math.atan2(e[8],e[0])):(t[0]=Math.atan2(-e[9],e[10]),t[1]=0)),t}const gi=new Et;class q1 extends Array{constructor(e=0,s=e,n=e,r="YXZ"){return super(e,s,n),this.order=r,this.onChange=()=>{},this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e,this.onChange()}set y(e){this[1]=e,this.onChange()}set z(e){this[2]=e,this.onChange()}set(e,s=e,n=e){return e.length?this.copy(e):(this[0]=e,this[1]=s,this[2]=n,this.onChange(),this)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.onChange(),this}reorder(e){return this.order=e,this.onChange(),this}fromRotationMatrix(e,s=this.order){return W1(this,e,s),this}fromQuaternion(e,s=this.order){return gi.fromQuaternion(e),this.fromRotationMatrix(gi,s)}toArray(e=[],s=0){return e[s]=this[0],e[s+1]=this[1],e[s+2]=this[2],e}}class ur{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new Et,this.worldMatrix=new Et,this.matrixAutoUpdate=!0,this.up=new ie(0,1,0),this.position=new ie,this.scale=new ie(1),this.quaternion=new U1,this.rotation=new q1,this.rotation.onChange=()=>this.quaternion.fromEuler(this.rotation),this.quaternion.onChange=()=>this.rotation.fromQuaternion(this.quaternion)}setParent(e,s=!0){this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,s&&e&&e.addChild(this,!1)}addChild(e,s=!0){~this.children.indexOf(e)||this.children.push(e),s&&e.setParent(this,!1)}removeChild(e,s=!0){~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),s&&e.setParent(null,!1)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(let s=0,n=this.children.length;s<n;s++)this.children[s].updateMatrixWorld(e)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(e){if(!e(this))for(let s=0,n=this.children.length;s<n;s++)this.children[s].traverse(e)}decompose(){this.matrix.getTranslation(this.position),this.matrix.getRotation(this.quaternion),this.matrix.getScaling(this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(e,s=!1){s?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion),this.rotation.fromQuaternion(this.quaternion)}}const H1=new Et,X1=new ie,G1=new ie;class Y1 extends ur{constructor(e,{near:s=.1,far:n=100,fov:r=45,aspect:i=1,left:a,right:o,bottom:l,top:c,zoom:h=1}={}){super(),Object.assign(this,{near:s,far:n,fov:r,aspect:i,left:a,right:o,bottom:l,top:c,zoom:h}),this.projectionMatrix=new Et,this.viewMatrix=new Et,this.projectionViewMatrix=new Et,this.worldPosition=new ie,this.type=a||o?"orthographic":"perspective",this.type==="orthographic"?this.orthographic():this.perspective()}perspective({near:e=this.near,far:s=this.far,fov:n=this.fov,aspect:r=this.aspect}={}){return Object.assign(this,{near:e,far:s,fov:n,aspect:r}),this.projectionMatrix.fromPerspective({fov:n*(Math.PI/180),aspect:r,near:e,far:s}),this.type="perspective",this}orthographic({near:e=this.near,far:s=this.far,left:n=this.left,right:r=this.right,bottom:i=this.bottom,top:a=this.top,zoom:o=this.zoom}={}){return Object.assign(this,{near:e,far:s,left:n,right:r,bottom:i,top:a,zoom:o}),n/=o,r/=o,i/=o,a/=o,this.projectionMatrix.fromOrthogonal({left:n,right:r,bottom:i,top:a,near:e,far:s}),this.type="orthographic",this}updateMatrixWorld(){return super.updateMatrixWorld(),this.viewMatrix.inverse(this.worldMatrix),this.worldMatrix.getTranslation(this.worldPosition),this.projectionViewMatrix.multiply(this.projectionMatrix,this.viewMatrix),this}lookAt(e){return super.lookAt(e,!0),this}project(e){return e.applyMatrix4(this.viewMatrix),e.applyMatrix4(this.projectionMatrix),this}unproject(e){return e.applyMatrix4(H1.inverse(this.projectionMatrix)),e.applyMatrix4(this.worldMatrix),this}updateFrustum(){this.frustum||(this.frustum=[new ie,new ie,new ie,new ie,new ie,new ie]);const e=this.projectionViewMatrix;this.frustum[0].set(e[3]-e[0],e[7]-e[4],e[11]-e[8]).constant=e[15]-e[12],this.frustum[1].set(e[3]+e[0],e[7]+e[4],e[11]+e[8]).constant=e[15]+e[12],this.frustum[2].set(e[3]+e[1],e[7]+e[5],e[11]+e[9]).constant=e[15]+e[13],this.frustum[3].set(e[3]-e[1],e[7]-e[5],e[11]-e[9]).constant=e[15]-e[13],this.frustum[4].set(e[3]-e[2],e[7]-e[6],e[11]-e[10]).constant=e[15]-e[14],this.frustum[5].set(e[3]+e[2],e[7]+e[6],e[11]+e[10]).constant=e[15]+e[14];for(let s=0;s<6;s++){const n=1/this.frustum[s].distance();this.frustum[s].multiply(n),this.frustum[s].constant*=n}}frustumIntersectsMesh(e){if(!e.geometry.attributes.position||((!e.geometry.bounds||e.geometry.bounds.radius===1/0)&&e.geometry.computeBoundingSphere(),!e.geometry.bounds))return!0;const s=X1;s.copy(e.geometry.bounds.center),s.applyMatrix4(e.worldMatrix);const n=e.geometry.bounds.radius*e.worldMatrix.getMaxScaleOnAxis();return this.frustumIntersectsSphere(s,n)}frustumIntersectsSphere(e,s){const n=G1;for(let r=0;r<6;r++){const i=this.frustum[r];if(n.copy(i).dot(e)+i.constant<-s)return!1}return!0}}function J1(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function Q1(t,e){let s=e[0],n=e[1],r=e[2],i=e[3],a=s+s,o=n+n,l=r+r,c=s*a,h=n*a,u=n*o,d=r*a,f=r*o,p=r*l,m=i*a,v=i*o,g=i*l;return t[0]=1-u-p,t[3]=h-g,t[6]=d+v,t[1]=h+g,t[4]=1-c-p,t[7]=f-m,t[2]=d-v,t[5]=f+m,t[8]=1-c-u,t}function Z1(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function K1(t,e,s,n,r,i,a,o,l,c){return t[0]=e,t[1]=s,t[2]=n,t[3]=r,t[4]=i,t[5]=a,t[6]=o,t[7]=l,t[8]=c,t}function eu(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function tu(t,e){let s=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8],u=h*a-o*c,d=-h*i+o*l,f=c*i-a*l,p=s*u+n*d+r*f;return p?(p=1/p,t[0]=u*p,t[1]=(-h*n+r*c)*p,t[2]=(o*n-r*a)*p,t[3]=d*p,t[4]=(h*s-r*l)*p,t[5]=(-o*s+r*i)*p,t[6]=f*p,t[7]=(-c*s+n*l)*p,t[8]=(a*s-n*i)*p,t):null}function yi(t,e,s){let n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],u=e[8],d=s[0],f=s[1],p=s[2],m=s[3],v=s[4],g=s[5],_=s[6],b=s[7],y=s[8];return t[0]=d*n+f*a+p*c,t[1]=d*r+f*o+p*h,t[2]=d*i+f*l+p*u,t[3]=m*n+v*a+g*c,t[4]=m*r+v*o+g*h,t[5]=m*i+v*l+g*u,t[6]=_*n+b*a+y*c,t[7]=_*r+b*o+y*h,t[8]=_*i+b*l+y*u,t}function su(t,e,s){let n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],u=e[8],d=s[0],f=s[1];return t[0]=n,t[1]=r,t[2]=i,t[3]=a,t[4]=o,t[5]=l,t[6]=d*n+f*a+c,t[7]=d*r+f*o+h,t[8]=d*i+f*l+u,t}function nu(t,e,s){let n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],u=e[8],d=Math.sin(s),f=Math.cos(s);return t[0]=f*n+d*a,t[1]=f*r+d*o,t[2]=f*i+d*l,t[3]=f*a-d*n,t[4]=f*o-d*r,t[5]=f*l-d*i,t[6]=c,t[7]=h,t[8]=u,t}function ru(t,e,s){let n=s[0],r=s[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function iu(t,e){let s=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8],u=e[9],d=e[10],f=e[11],p=e[12],m=e[13],v=e[14],g=e[15],_=s*o-n*a,b=s*l-r*a,y=s*c-i*a,M=n*l-r*o,x=n*c-i*o,L=r*c-i*l,S=h*m-u*p,$=h*v-d*p,R=h*g-f*p,W=u*v-d*m,V=u*g-f*m,j=d*g-f*v,D=_*j-b*V+y*W+M*R-x*$+L*S;return D?(D=1/D,t[0]=(o*j-l*V+c*W)*D,t[1]=(l*R-a*j-c*$)*D,t[2]=(a*V-o*R+c*S)*D,t[3]=(r*V-n*j-i*W)*D,t[4]=(s*j-r*R+i*$)*D,t[5]=(n*R-s*V-i*S)*D,t[6]=(m*L-v*x+g*M)*D,t[7]=(v*y-p*L-g*b)*D,t[8]=(p*x-m*y+g*_)*D,t):null}class au extends Array{constructor(e=1,s=0,n=0,r=0,i=1,a=0,o=0,l=0,c=1){return super(e,s,n,r,i,a,o,l,c),this}set(e,s,n,r,i,a,o,l,c){return e.length?this.copy(e):(K1(this,e,s,n,r,i,a,o,l,c),this)}translate(e,s=this){return su(this,s,e),this}rotate(e,s=this){return nu(this,s,e),this}scale(e,s=this){return ru(this,s,e),this}multiply(e,s){return s?yi(this,e,s):yi(this,this,e),this}identity(){return eu(this),this}copy(e){return Z1(this,e),this}fromMatrix4(e){return J1(this,e),this}fromQuaternion(e){return Q1(this,e),this}fromBasis(e,s,n){return this.set(e[0],e[1],e[2],s[0],s[1],s[2],n[0],n[1],n[2]),this}inverse(e=this){return tu(this,e),this}getNormalMatrix(e){return iu(this,e),this}}let ou=0;class Ho extends ur{constructor(e,{geometry:s,program:n,mode:r=e.TRIANGLES,frustumCulled:i=!0,renderOrder:a=0}={}){super(),this.hit=null,e.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=e,this.id=ou++,this.geometry=s,this.program=n,this.mode=r,this.frustumCulled=i,this.renderOrder=a,this.modelViewMatrix=new Et,this.normalMatrix=new au,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(e){return this.beforeRenderCallbacks.push(e),this}onAfterRender(e){return this.afterRenderCallbacks.push(e),this}draw({camera:e}={}){this.beforeRenderCallbacks.forEach(n=>n&&n({mesh:this,camera:e})),e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix);let s=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:s}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(n=>n&&n({mesh:this,camera:e}))}}const wi=new Uint8Array(4);function bi(t){return(t&t-1)===0}let lu=1;const cu=t=>t.isCompressedTexture===!0;class fr{constructor(e,{image:s,target:n=e.TEXTURE_2D,type:r=e.UNSIGNED_BYTE,format:i=e.RGBA,internalFormat:a=i,wrapS:o=e.CLAMP_TO_EDGE,wrapT:l=e.CLAMP_TO_EDGE,generateMipmaps:c=!0,minFilter:h=c?e.NEAREST_MIPMAP_LINEAR:e.LINEAR,magFilter:u=e.LINEAR,premultiplyAlpha:d=!1,unpackAlignment:f=4,flipY:p=n==e.TEXTURE_2D,anisotropy:m=0,level:v=0,width:g,height:_=g}={}){this.gl=e,this.id=lu++,this.image=s,this.target=n,this.type=r,this.format=i,this.internalFormat=a,this.minFilter=h,this.magFilter=u,this.wrapS=o,this.wrapT=l,this.generateMipmaps=c,this.premultiplyAlpha=d,this.unpackAlignment=f,this.flipY=p,this.anisotropy=Math.min(m,this.gl.renderer.parameters.maxAnisotropy),this.level=v,this.width=g,this.height=_,this.texture=this.gl.createTexture(),this.store={image:null},this.glState=this.gl.renderer.state,this.state={minFilter:this.gl.NEAREST_MIPMAP_LINEAR,magFilter:this.gl.LINEAR,wrapS:this.gl.REPEAT,wrapT:this.gl.REPEAT,anisotropy:0}}bind(){this.glState.textureUnits[this.glState.activeTextureUnit]!==this.id&&(this.gl.bindTexture(this.target,this.texture),this.glState.textureUnits[this.glState.activeTextureUnit]=this.id)}update(e=0){const s=!(this.image===this.store.image&&!this.needsUpdate);if((s||this.glState.textureUnits[e]!==this.id)&&(this.gl.renderer.activeTexture(e),this.bind()),!!s){if(this.needsUpdate=!1,this.flipY!==this.glState.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this.flipY),this.glState.flipY=this.flipY),this.premultiplyAlpha!==this.glState.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),this.glState.premultiplyAlpha=this.premultiplyAlpha),this.unpackAlignment!==this.glState.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this.unpackAlignment),this.glState.unpackAlignment=this.unpackAlignment),this.minFilter!==this.state.minFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.minFilter),this.state.minFilter=this.minFilter),this.magFilter!==this.state.magFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.magFilter),this.state.magFilter=this.magFilter),this.wrapS!==this.state.wrapS&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.wrapS),this.state.wrapS=this.wrapS),this.wrapT!==this.state.wrapT&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.wrapT),this.state.wrapT=this.wrapT),this.anisotropy&&this.anisotropy!==this.state.anisotropy&&(this.gl.texParameterf(this.target,this.gl.renderer.getExtension("EXT_texture_filter_anisotropic").TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropy),this.state.anisotropy=this.anisotropy),this.image){if(this.image.width&&(this.width=this.image.width,this.height=this.image.height),this.target===this.gl.TEXTURE_CUBE_MAP)for(let n=0;n<6;n++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+n,this.level,this.internalFormat,this.format,this.type,this.image[n]);else if(ArrayBuffer.isView(this.image))this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,this.image);else if(cu(this.image)){let n;for(let r=0;r<this.image.length;r++)n=this.image[r],this.gl.compressedTexImage2D(this.target,r,this.internalFormat,n.width,n.height,0,n.data)}else this.gl.texImage2D(this.target,this.level,this.internalFormat,this.format,this.type,this.image);this.generateMipmaps&&(!this.gl.renderer.isWebgl2&&(!bi(this.image.width)||!bi(this.image.height))?(this.generateMipmaps=!1,this.wrapS=this.wrapT=this.gl.CLAMP_TO_EDGE,this.minFilter=this.gl.LINEAR):this.gl.generateMipmap(this.target)),this.onUpdate&&this.onUpdate()}else if(this.target===this.gl.TEXTURE_CUBE_MAP)for(let n=0;n<6;n++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,wi);else this.width?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,null):this.gl.texImage2D(this.target,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,wi);this.store.image=this.image}}}const _i={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#00ff00",blue:"#0000ff",fuchsia:"#ff00ff",cyan:"#00ffff",yellow:"#ffff00",orange:"#ff8000"};function xi(t){t.length===4&&(t=t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e||console.warn(`Unable to convert hex string ${t} to rgb values`),[parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255]}function hu(t){return t=parseInt(t),[(t>>16&255)/255,(t>>8&255)/255,(t&255)/255]}function Mi(t=null){return t?arguments.length===3?arguments:isNaN(t)?t[0]==="#"?xi(t):_i[t.toLowerCase()]?xi(_i[t.toLowerCase()]):(console.warn("Color format not recognised"),[0,0,0]):hu(t):[0,0,0]}class Cn extends Array{constructor(e=null){Array.isArray(e)?super(...e):super(...Mi(...arguments))}get r(){return this[0]}get g(){return this[1]}get b(){return this[2]}set r(e){this[0]=e}set g(e){this[1]=e}set b(e){this[2]=e}set(e){return Array.isArray(e)?this.copy(e):this.copy(Mi(...arguments))}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this}}function uu(t,e){return t[0]=e[0],t[1]=e[1],t}function fu(t,e,s){return t[0]=e,t[1]=s,t}function Ei(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t}function ki(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t}function du(t,e,s){return t[0]=e[0]*s[0],t[1]=e[1]*s[1],t}function pu(t,e,s){return t[0]=e[0]/s[0],t[1]=e[1]/s[1],t}function an(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t}function mu(t,e){var s=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(s*s+n*n)}function vu(t,e){var s=e[0]-t[0],n=e[1]-t[1];return s*s+n*n}function Ai(t){var e=t[0],s=t[1];return Math.sqrt(e*e+s*s)}function gu(t){var e=t[0],s=t[1];return e*e+s*s}function yu(t,e){return t[0]=-e[0],t[1]=-e[1],t}function wu(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function bu(t,e){var s=e[0],n=e[1],r=s*s+n*n;return r>0&&(r=1/Math.sqrt(r)),t[0]=e[0]*r,t[1]=e[1]*r,t}function _u(t,e){return t[0]*e[0]+t[1]*e[1]}function Si(t,e){return t[0]*e[1]-t[1]*e[0]}function xu(t,e,s,n){var r=e[0],i=e[1];return t[0]=r+n*(s[0]-r),t[1]=i+n*(s[1]-i),t}function Mu(t,e,s){var n=e[0],r=e[1];return t[0]=s[0]*n+s[3]*r+s[6],t[1]=s[1]*n+s[4]*r+s[7],t}function Eu(t,e,s){let n=e[0],r=e[1];return t[0]=s[0]*n+s[4]*r+s[12],t[1]=s[1]*n+s[5]*r+s[13],t}function ku(t,e){return t[0]===e[0]&&t[1]===e[1]}class jt extends Array{constructor(e=0,s=e){return super(e,s),this}get x(){return this[0]}get y(){return this[1]}set x(e){this[0]=e}set y(e){this[1]=e}set(e,s=e){return e.length?this.copy(e):(fu(this,e,s),this)}copy(e){return uu(this,e),this}add(e,s){return s?Ei(this,e,s):Ei(this,this,e),this}sub(e,s){return s?ki(this,e,s):ki(this,this,e),this}multiply(e){return e.length?du(this,this,e):an(this,this,e),this}divide(e){return e.length?pu(this,this,e):an(this,this,1/e),this}inverse(e=this){return wu(this,e),this}len(){return Ai(this)}distance(e){return e?mu(this,e):Ai(this)}squaredLen(){return this.squaredDistance()}squaredDistance(e){return e?vu(this,e):gu(this)}negate(e=this){return yu(this,e),this}cross(e,s){return s?Si(e,s):Si(this,e)}scale(e){return an(this,this,e),this}normalize(){return bu(this,this),this}dot(e){return _u(this,e)}equals(e){return ku(this,e)}applyMatrix3(e){return Mu(this,this,e),this}applyMatrix4(e){return Eu(this,this,e),this}lerp(e,s){xu(this,this,e,s)}clone(){return new jt(this[0],this[1])}fromArray(e,s=0){return this[0]=e[s],this[1]=e[s+1],this}toArray(e=[],s=0){return e[s]=this[0],e[s+1]=this[1],e}}class mt extends It{constructor(e,{width:s=1,height:n=1,widthSegments:r=1,heightSegments:i=1,attributes:a={}}={}){const o=r,l=i,c=(o+1)*(l+1),h=o*l*6,u=new Float32Array(c*3),d=new Float32Array(c*3),f=new Float32Array(c*2),p=c>65536?new Uint32Array(h):new Uint16Array(h);mt.buildPlane(u,d,f,p,s,n,0,o,l),Object.assign(a,{position:{size:3,data:u},normal:{size:3,data:d},uv:{size:2,data:f},index:{data:p}}),super(e,a)}static buildPlane(e,s,n,r,i,a,o,l,c,h=0,u=1,d=2,f=1,p=-1,m=0,v=0){const g=m,_=i/l,b=a/c;for(let y=0;y<=c;y++){let M=y*b-a/2;for(let x=0;x<=l;x++,m++){let L=x*_-i/2;if(e[m*3+h]=L*f,e[m*3+u]=M*p,e[m*3+d]=o/2,s[m*3+h]=0,s[m*3+u]=0,s[m*3+d]=o>=0?1:-1,n[m*2]=x/l,n[m*2+1]=1-y/c,y===c||x===l)continue;let S=g+x+y*(l+1),$=g+x+(y+1)*(l+1),R=g+x+(y+1)*(l+1)+1,W=g+x+y*(l+1)+1;r[v*6]=S,r[v*6+1]=$,r[v*6+2]=W,r[v*6+3]=$,r[v*6+4]=R,r[v*6+5]=W,v++}}}}class Xo extends It{constructor(e,{width:s=1,height:n=1,depth:r=1,widthSegments:i=1,heightSegments:a=1,depthSegments:o=1,attributes:l={}}={}){const c=i,h=a,u=o,d=(c+1)*(h+1)*2+(c+1)*(u+1)*2+(h+1)*(u+1)*2,f=(c*h*2+c*u*2+h*u*2)*6,p=new Float32Array(d*3),m=new Float32Array(d*3),v=new Float32Array(d*2),g=d>65536?new Uint32Array(f):new Uint16Array(f);let _=0,b=0;mt.buildPlane(p,m,v,g,r,n,s,u,h,2,1,0,-1,-1,_,b),_+=(u+1)*(h+1),b+=u*h,mt.buildPlane(p,m,v,g,r,n,-s,u,h,2,1,0,1,-1,_,b),_+=(u+1)*(h+1),b+=u*h,mt.buildPlane(p,m,v,g,s,r,n,u,c,0,2,1,1,1,_,b),_+=(c+1)*(u+1),b+=c*u,mt.buildPlane(p,m,v,g,s,r,-n,u,c,0,2,1,1,-1,_,b),_+=(c+1)*(u+1),b+=c*u,mt.buildPlane(p,m,v,g,s,n,-r,c,h,0,1,2,-1,-1,_,b),_+=(c+1)*(h+1),b+=c*h,mt.buildPlane(p,m,v,g,s,n,r,c,h,0,1,2,1,-1,_,b),Object.assign(l,{position:{size:3,data:p},normal:{size:3,data:m},uv:{size:2,data:v},index:{data:g}}),super(e,l)}}const Ve={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,DOLLY_PAN:3},xt=new ie,Je=new jt,et=new jt;function Au(t,{element:e=document.body,enabled:s=!0,target:n=new ie,ease:r=.25,inertia:i=.85,enableRotate:a=!0,rotateSpeed:o=.1,autoRotate:l=!1,autoRotateSpeed:c=1,enableZoom:h=!0,zoomSpeed:u=1,enablePan:d=!0,panSpeed:f=.1,minPolarAngle:p=0,maxPolarAngle:m=Math.PI,minAzimuthAngle:v=-1/0,maxAzimuthAngle:g=1/0,minDistance:_=0,maxDistance:b=1/0}={}){this.enabled=s,this.target=n,r=r||1,i=i||0,this.minDistance=_,this.maxDistance=b;const y={radius:1,phi:0,theta:0},M={radius:1,phi:0,theta:0},x={radius:1,phi:0,theta:0},L=new ie,S=new ie;S.copy(t.position).sub(this.target),x.radius=M.radius=S.distance(),x.theta=M.theta=Math.atan2(S.x,S.z),x.phi=M.phi=Math.acos(Math.min(Math.max(S.y/M.radius,-1),1)),this.offset=S,this.update=()=>{l&&he(),M.radius*=y.radius,M.theta+=y.theta,M.phi+=y.phi,M.theta=Math.max(v,Math.min(g,M.theta)),M.phi=Math.max(p,Math.min(m,M.phi)),M.radius=Math.max(this.minDistance,Math.min(this.maxDistance,M.radius)),x.phi+=(M.phi-x.phi)*r,x.theta+=(M.theta-x.theta)*r,x.radius+=(M.radius-x.radius)*r,this.target.add(L);let X=x.radius*Math.sin(Math.max(1e-6,x.phi));S.x=X*Math.sin(x.theta),S.y=x.radius*Math.cos(x.phi),S.z=X*Math.cos(x.theta),t.position.copy(this.target).add(S),t.lookAt(this.target),y.theta*=i,y.phi*=i,L.multiply(i),y.radius=1},this.forcePosition=()=>{S.copy(t.position).sub(this.target),x.radius=M.radius=S.distance(),x.theta=M.theta=Math.atan2(S.x,S.z),x.phi=M.phi=Math.acos(Math.min(Math.max(S.y/M.radius,-1),1)),t.lookAt(this.target)};const $=new jt,R=new jt,W=new jt;let V=Ve.NONE;this.mouseButtons={ORBIT:0,ZOOM:1,PAN:2};function j(){return Math.pow(.95,u)}function D(X,me){xt.set(me[0],me[1],me[2]),xt.multiply(-X),L.add(xt)}function H(X,me){xt.set(me[4],me[5],me[6]),xt.multiply(X),L.add(xt)}const re=(X,me)=>{xt.copy(t.position).sub(this.target);let _e=xt.distance();_e*=Math.tan((t.fov||45)/2*Math.PI/180),D(2*X*_e/e.clientHeight,t.matrix),H(2*me*_e/e.clientHeight,t.matrix)};function se(X){y.radius/=X}function he(){const X=2*Math.PI/60/60*c;y.theta-=X}function ue(X,me){Je.set(X,me),et.sub(Je,$).multiply(o),y.theta-=2*Math.PI*et.x/e.clientHeight,y.phi-=2*Math.PI*et.y/e.clientHeight,$.copy(Je)}function we(X){Je.set(X.clientX,X.clientY),et.sub(Je,W),et.y>0?se(j()):et.y<0&&se(1/j()),W.copy(Je)}function ge(X,me){Je.set(X,me),et.sub(Je,R).multiply(f),re(et.x,et.y),R.copy(Je)}function Me(X){if(h){let me=X.touches[0].pageX-X.touches[1].pageX,_e=X.touches[0].pageY-X.touches[1].pageY,Ye=Math.sqrt(me*me+_e*_e);W.set(0,Ye)}if(d){let me=.5*(X.touches[0].pageX+X.touches[1].pageX),_e=.5*(X.touches[0].pageY+X.touches[1].pageY);R.set(me,_e)}}function Xe(X){if(h){let me=X.touches[0].pageX-X.touches[1].pageX,_e=X.touches[0].pageY-X.touches[1].pageY,Ye=Math.sqrt(me*me+_e*_e);Je.set(0,Ye),et.set(0,Math.pow(Je.y/W.y,u)),se(et.y),W.copy(Je)}if(d){let me=.5*(X.touches[0].pageX+X.touches[1].pageX),_e=.5*(X.touches[0].pageY+X.touches[1].pageY);ge(me,_e)}}const $e=X=>{if(!!this.enabled){switch(X.button){case this.mouseButtons.ORBIT:if(a===!1)return;$.set(X.clientX,X.clientY),V=Ve.ROTATE;break;case this.mouseButtons.ZOOM:if(h===!1)return;W.set(X.clientX,X.clientY),V=Ve.DOLLY;break;case this.mouseButtons.PAN:if(d===!1)return;R.set(X.clientX,X.clientY),V=Ve.PAN;break}V!==Ve.NONE&&(window.addEventListener("mousemove",ze,!1),window.addEventListener("mouseup",be,!1))}},ze=X=>{if(!!this.enabled)switch(V){case Ve.ROTATE:if(a===!1)return;ue(X.clientX,X.clientY);break;case Ve.DOLLY:if(h===!1)return;we(X);break;case Ve.PAN:if(d===!1)return;ge(X.clientX,X.clientY);break}},be=()=>{window.removeEventListener("mousemove",ze,!1),window.removeEventListener("mouseup",be,!1),V=Ve.NONE},Ee=X=>{!this.enabled||!h||V!==Ve.NONE&&V!==Ve.ROTATE||(X.stopPropagation(),X.preventDefault(),X.deltaY<0?se(1/j()):X.deltaY>0&&se(j()))},Te=X=>{if(!!this.enabled)switch(X.preventDefault(),X.touches.length){case 1:if(a===!1)return;$.set(X.touches[0].pageX,X.touches[0].pageY),V=Ve.ROTATE;break;case 2:if(h===!1&&d===!1)return;Me(X),V=Ve.DOLLY_PAN;break;default:V=Ve.NONE}},it=X=>{if(!!this.enabled)switch(X.preventDefault(),X.stopPropagation(),X.touches.length){case 1:if(a===!1)return;ue(X.touches[0].pageX,X.touches[0].pageY);break;case 2:if(h===!1&&d===!1)return;Xe(X);break;default:V=Ve.NONE}},Ke=()=>{!this.enabled||(V=Ve.NONE)},qe=X=>{!this.enabled||X.preventDefault()};function Ge(){e.addEventListener("contextmenu",qe,!1),e.addEventListener("mousedown",$e,!1),e.addEventListener("wheel",Ee,{passive:!1}),e.addEventListener("touchstart",Te,{passive:!1}),e.addEventListener("touchend",Ke,!1),e.addEventListener("touchmove",it,{passive:!1})}this.remove=function(){e.removeEventListener("contextmenu",qe),e.removeEventListener("mousedown",$e),e.removeEventListener("wheel",Ee),e.removeEventListener("touchstart",Te),e.removeEventListener("touchend",Ke),e.removeEventListener("touchmove",it),window.removeEventListener("mousemove",ze),window.removeEventListener("mouseup",be)},Ge()}const on={},Su=(t,e,s={})=>{if(on[e])return on[e];const n=new fr(t,s),r=new Image;return on[e]=n,r.onload=()=>{n.image=r},r.src=e,n};var Nu={texture:Su};const Pu=typeof globalThis.WorkerGlobalScope!="undefined"&&self instanceof globalThis.WorkerGlobalScope;let Cs=[],zs=2,Nt=0,Ni=0;const zn="plant.log.history",dr="localStorage"in globalThis,Ft=dr?zn in localStorage?JSON.parse(localStorage.getItem(zn)):[]:[];dr&&(zs=parseInt(localStorage.getItem("pt-log-level"))||2);function Lu(){dr&&localStorage.setItem(zn,JSON.stringify(Ft))}let Bt;function Le(t){Nt=Math.max(Nt,t.length);const e=Ni;Ni++;const s=(r,i)=>{if(!Pu&&(Ft.push({scope:t,args:r,level:zs,date:Date.now()}),Ft.length=Math.min(100,Ft.length),Bt&&Bt.set(Ft),Lu(),(!Cs.length||Cs.includes(t))&&i<=zs)){if(r instanceof Error){console.error(`[${t.padEnd(Nt," ")}]`,r);return}if(Array.isArray(r)&&typeof r[0]=="string"&&typeof r[1]=="object"){console.groupCollapsed(`%c[${t.padEnd(Nt," ")}]`,`color: hsl(${e*30}deg 68% 64%); font-weight: bold;`,r[0]),console.log(...r.slice(1)),console.groupEnd();return}if(i===0){console.error(`%c[${t.padEnd(Nt," ")}]`,`color: hsl(${e*30}deg 68% 64%); font-weight: bold;`,...r);return}if(i===1){console.warn(`[${t.padEnd(Nt," ")}]`,...r);return}i===2&&console.log(`%c[${t.padEnd(Nt," ")}]`,`color: hsl(${e*30}deg 68% 64%); font-weight: bold;`,...r)}},n=(...r)=>s(r,2);return n.warn=(...r)=>s(r,1),n.error=r=>s(r,0),n}Le.getStore=function(){return Bt||(Bt=Ue([]),Bt)};Le.getHistory=function(){return[...Ft]};Le.setFilter=(...t)=>{Cs=t,console.log("[log] set filter",{filters:Cs})};Le.setLevel=(t=0)=>{zs=t,localStorage.setItem("pt-log-level",""+t)};function Tu(t){const e={};return(...s)=>{const n=Vh(JSON.stringify(s));return n in e?e[n]:e[n]=t(...s)}}var fs="<unknown>";function Iu(t){var e=t.split(`
`);return e.reduce(function(s,n){var r=Ou(n)||Cu(n)||Ru(n)||Wu(n)||Bu(n);return r&&s.push(r),s},[])}var Du=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/|[a-z]:\\|\\\\).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,ju=/\((\S*)(?::(\d+))(?::(\d+))\)/;function Ou(t){var e=Du.exec(t);if(!e)return null;var s=e[2]&&e[2].indexOf("native")===0,n=e[2]&&e[2].indexOf("eval")===0,r=ju.exec(e[2]);return n&&r!=null&&(e[2]=r[1],e[3]=r[2],e[4]=r[3]),{file:s?null:e[2],methodName:e[1]||fs,arguments:s?[e[2]]:[],lineNumber:e[3]?+e[3]:null,column:e[4]?+e[4]:null}}var Vu=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function Cu(t){var e=Vu.exec(t);return e?{file:e[2],methodName:e[1]||fs,arguments:[],lineNumber:+e[3],column:e[4]?+e[4]:null}:null}var zu=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,$u=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function Ru(t){var e=zu.exec(t);if(!e)return null;var s=e[3]&&e[3].indexOf(" > eval")>-1,n=$u.exec(e[3]);return s&&n!=null&&(e[3]=n[1],e[4]=n[2],e[5]=null),{file:e[3],methodName:e[1]||fs,arguments:e[2]?e[2].split(","):[],lineNumber:e[4]?+e[4]:null,column:e[5]?+e[5]:null}}var Fu=/^\s*(?:([^@]*)(?:\((.*?)\))?@)?(\S.*?):(\d+)(?::(\d+))?\s*$/i;function Bu(t){var e=Fu.exec(t);return e?{file:e[3],methodName:e[1]||fs,arguments:[],lineNumber:+e[4],column:e[5]?+e[5]:null}:null}var Uu=/^\s*at (?:((?:\[object object\])?[^\\/]+(?: \[as \S+\])?) )?\(?(.*?):(\d+)(?::(\d+))?\)?\s*$/i;function Wu(t){var e=Uu.exec(t);return e?{file:e[2],methodName:e[1]||fs,arguments:[],lineNumber:+e[3],column:e[4]?+e[4]:null}:null}const qu=t=>t.replace(window.location.href,"").replace(/^node_modules/,"").replace(/.+?(?=plantarium)plantarium\//,"");var $n=t=>{const e=Iu(t.stack).map(s=>(s.file=qu(s.file),s));return{title:t.message,type:t.name,lines:e}};function Pi(t,e,s){const n=t.slice();return n[1]=e[s],n}function Li(t){let e,s,n,r=t[0].type+"",i,a,o,l=t[0].title+"",c,h,u,d,f,p,m,v,g=t[0].lines,_=[];for(let b=0;b<g.length;b+=1)_[b]=Ti(Pi(t,g,b));return{c(){e=N("div"),s=N("p"),n=N("b"),i=F(r),a=F(":"),o=C(),c=F(l),h=C(),u=N("pre"),d=F("    "),f=N("code"),p=F(`
      `);for(let b=0;b<_.length;b+=1)_[b].c();m=F(`
    `),v=F(`
  `),this.h()},l(b){e=P(b,"DIV",{class:!0});var y=A(e);s=P(y,"P",{});var M=A(s);n=P(M,"B",{});var x=A(n);i=B(x,r),a=B(x,":"),x.forEach(w),o=z(M),c=B(M,l),M.forEach(w),h=z(y),u=P(y,"PRE",{class:!0});var L=A(u);d=B(L,"    "),f=P(L,"CODE",{});var S=A(f);p=B(S,`
      `);for(let $=0;$<_.length;$+=1)_[$].l(S);m=B(S,`
    `),S.forEach(w),v=B(L,`
  `),L.forEach(w),y.forEach(w),this.h()},h(){k(u,"class","svelte-pl1jfp"),k(e,"class","wrapper svelte-pl1jfp")},m(b,y){T(b,e,y),E(e,s),E(s,n),E(n,i),E(n,a),E(s,o),E(s,c),E(e,h),E(e,u),E(u,d),E(u,f),E(f,p);for(let M=0;M<_.length;M+=1)_[M].m(f,null);E(f,m),E(u,v)},p(b,y){if(y&1&&r!==(r=b[0].type+"")&&ve(i,r),y&1&&l!==(l=b[0].title+"")&&ve(c,l),y&1){g=b[0].lines;let M;for(M=0;M<g.length;M+=1){const x=Pi(b,g,M);_[M]?_[M].p(x,y):(_[M]=Ti(x),_[M].c(),_[M].m(f,m))}for(;M<_.length;M+=1)_[M].d(1);_.length=g.length}},d(b){b&&w(e),Pe(_,b)}}}function Ti(t){let e,s,n=t[1].methodName+"",r,i,a,o=t[1].file+"",l,c;return{c(){e=F("at "),s=N("strong"),r=F(n),i=F(" "),a=N("i"),l=F(o),c=N("br")},l(h){e=B(h,"at "),s=P(h,"STRONG",{});var u=A(s);r=B(u,n),u.forEach(w),i=B(h," "),a=P(h,"I",{});var d=A(a);l=B(d,o),d.forEach(w),c=P(h,"BR",{})},m(h,u){T(h,e,u),T(h,s,u),E(s,r),T(h,i,u),T(h,a,u),E(a,l),T(h,c,u)},p(h,u){u&1&&n!==(n=h[1].methodName+"")&&ve(r,n),u&1&&o!==(o=h[1].file+"")&&ve(l,o)},d(h){h&&w(e),h&&w(s),h&&w(i),h&&w(a),h&&w(c)}}}function Hu(t){let e,s=t[0]&&Li(t);return{c(){s&&s.c(),e=ae()},l(n){s&&s.l(n),e=ae()},m(n,r){s&&s.m(n,r),T(n,e,r)},p(n,[r]){n[0]?s?s.p(n,r):(s=Li(n),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:q,o:q,d(n){s&&s.d(n),n&&w(e)}}}function Xu(t,e,s){let{stacktrace:n}=e;return t.$$set=r=>{"stacktrace"in r&&s(0,n=r.stacktrace)},[n]}class Go extends fe{constructor(e){super(),de(this,e,Xu,Hu,pe,{stacktrace:0})}}function Ii(t,e,s){const n=t.slice();return n[13]=e[s],n}function Di(t){let e,s,n,r,i,a,o,l,c,h,u,d,f,p,m,v,g,_,b,y,M,x,L=t[6]&&ji(t),S=t[0].title&&Oi(t);const $=[Ju,Yu,Gu],R=[];function W(D,H){return typeof D[0].content=="string"?0:D[0].content instanceof Error?1:D[0].content instanceof nc?2:-1}~(o=W(t))&&(l=R[o]=$[o](t));let V=t[0].content instanceof Error&&Ci(t),j=t[0].values&&zi(t);return p=new us({props:{name:"cross",dark:t[5]}}),{c(){e=N("div"),s=N("div"),n=N("div"),L&&L.c(),r=C(),i=N("div"),S&&S.c(),a=C(),l&&l.c(),c=C(),h=N("div"),V&&V.c(),u=C(),j&&j.c(),d=C(),f=N("div"),m=N("div"),K(p.$$.fragment),v=C(),g=N("div"),this.h()},l(D){e=P(D,"DIV",{class:!0});var H=A(e);s=P(H,"DIV",{class:!0});var re=A(s);n=P(re,"DIV",{class:!0});var se=A(n);L&&L.l(se),r=z(se),i=P(se,"DIV",{class:!0});var he=A(i);S&&S.l(he),a=z(he),l&&l.l(he),c=z(he),h=P(he,"DIV",{class:!0});var ue=A(h);V&&V.l(ue),u=z(ue),j&&j.l(ue),ue.forEach(w),he.forEach(w),d=z(se),f=P(se,"DIV",{class:!0});var we=A(f);m=P(we,"DIV",{style:!0});var ge=A(m);ne(p.$$.fragment,ge),we.forEach(w),se.forEach(w),v=z(re),g=P(re,"DIV",{style:!0,class:!0}),A(g).forEach(w),re.forEach(w),H.forEach(w),this.h()},h(){k(h,"class","button-wrapper svelte-11jarjr"),k(i,"class","toast-text svelte-11jarjr"),G(m,"display","contents"),G(m,"--width","fit-content"),k(f,"class","toast-close svelte-11jarjr"),k(n,"class","toast-content svelte-11jarjr"),Z(n,"hasIcon",!!t[6]),k(g,"style",_=`transition: width ${t[0].timeout}ms linear;`),k(g,"class","toast-progress svelte-11jarjr"),Z(g,"animateProgress",t[2]),k(s,"class",b="toast toast-"+t[0].type+" svelte-11jarjr"),Z(s,"isInverted",t[5]),k(e,"class","wrapper svelte-11jarjr")},m(D,H){T(D,e,H),E(e,s),E(s,n),L&&L.m(n,null),E(n,r),E(n,i),S&&S.m(i,null),E(i,a),~o&&R[o].m(i,null),E(i,c),E(i,h),V&&V.m(h,null),E(h,u),j&&j.m(h,null),E(n,d),E(n,f),E(f,m),ee(p,m,null),E(s,v),E(s,g),t[11](e),y=!0,M||(x=J(f,"click",t[10]),M=!0)},p(D,H){D[6]?L?(L.p(D,H),H&64&&I(L,1)):(L=ji(D),L.c(),I(L,1),L.m(n,r)):L&&(oe(),O(L,1,1,()=>{L=null}),le()),D[0].title?S?S.p(D,H):(S=Oi(D),S.c(),S.m(i,a)):S&&(S.d(1),S=null);let re=o;o=W(D),o===re?~o&&R[o].p(D,H):(l&&(oe(),O(R[re],1,1,()=>{R[re]=null}),le()),~o?(l=R[o],l?l.p(D,H):(l=R[o]=$[o](D),l.c()),I(l,1),l.m(i,c)):l=null),D[0].content instanceof Error?V?(V.p(D,H),H&1&&I(V,1)):(V=Ci(D),V.c(),I(V,1),V.m(h,u)):V&&(oe(),O(V,1,1,()=>{V=null}),le()),D[0].values?j?(j.p(D,H),H&1&&I(j,1)):(j=zi(D),j.c(),I(j,1),j.m(h,null)):j&&(oe(),O(j,1,1,()=>{j=null}),le());const se={};H&32&&(se.dark=D[5]),p.$set(se),H&64&&Z(n,"hasIcon",!!D[6]),(!y||H&1&&_!==(_=`transition: width ${D[0].timeout}ms linear;`))&&k(g,"style",_),H&4&&Z(g,"animateProgress",D[2]),(!y||H&1&&b!==(b="toast toast-"+D[0].type+" svelte-11jarjr"))&&k(s,"class",b),H&33&&Z(s,"isInverted",D[5])},i(D){y||(I(L),I(l),I(V),I(j),I(p.$$.fragment,D),y=!0)},o(D){O(L),O(l),O(V),O(j),O(p.$$.fragment,D),y=!1},d(D){D&&w(e),L&&L.d(),S&&S.d(),~o&&R[o].d(),V&&V.d(),j&&j.d(),te(p),t[11](null),M=!1,x()}}}function ji(t){let e,s,n,r;return s=new us({props:{name:t[6],dark:t[5],circle:!0}}),{c(){e=N("div"),n=N("div"),K(s.$$.fragment),this.h()},l(i){e=P(i,"DIV",{class:!0});var a=A(e);n=P(a,"DIV",{style:!0});var o=A(n);ne(s.$$.fragment,o),a.forEach(w),this.h()},h(){G(n,"display","contents"),G(n,"--width","40px"),G(n,"--height","40px"),k(e,"class","toast-icon svelte-11jarjr")},m(i,a){T(i,e,a),E(e,n),ee(s,n,null),r=!0},p(i,a){const o={};a&64&&(o.name=i[6]),a&32&&(o.dark=i[5]),s.$set(o)},i(i){r||(I(s.$$.fragment,i),r=!0)},o(i){O(s.$$.fragment,i),r=!1},d(i){i&&w(e),te(s)}}}function Oi(t){let e,s=t[0].title+"",n;return{c(){e=N("h3"),n=F(s),this.h()},l(r){e=P(r,"H3",{class:!0});var i=A(e);n=B(i,s),i.forEach(w),this.h()},h(){k(e,"class","svelte-11jarjr")},m(r,i){T(r,e,i),E(e,n)},p(r,i){i&1&&s!==(s=r[0].title+"")&&ve(n,s)},d(r){r&&w(e)}}}function Gu(t){let e,s,n;var r=t[0].content;function i(a){return{}}return r&&(e=new r(i())),{c(){e&&K(e.$$.fragment),s=ae()},l(a){e&&ne(e.$$.fragment,a),s=ae()},m(a,o){e&&ee(e,a,o),T(a,s,o),n=!0},p(a,o){if(r!==(r=a[0].content)){if(e){oe();const l=e;O(l.$$.fragment,1,0,()=>{te(l,1)}),le()}r?(e=new r(i()),K(e.$$.fragment),I(e.$$.fragment,1),ee(e,s.parentNode,s)):e=null}},i(a){n||(e&&I(e.$$.fragment,a),n=!0)},o(a){e&&O(e.$$.fragment,a),n=!1},d(a){a&&w(s),e&&te(e,a)}}}function Yu(t){let e,s=t[0].content.message+"",n,r,i,a,o=t[3]&&Vi(t);return{c(){e=N("p"),n=F(s),r=C(),o&&o.c(),i=ae(),this.h()},l(l){e=P(l,"P",{class:!0});var c=A(e);n=B(c,s),c.forEach(w),r=z(l),o&&o.l(l),i=ae(),this.h()},h(){k(e,"class","svelte-11jarjr")},m(l,c){T(l,e,c),E(e,n),T(l,r,c),o&&o.m(l,c),T(l,i,c),a=!0},p(l,c){(!a||c&1)&&s!==(s=l[0].content.message+"")&&ve(n,s),l[3]?o?(o.p(l,c),c&8&&I(o,1)):(o=Vi(l),o.c(),I(o,1),o.m(i.parentNode,i)):o&&(oe(),O(o,1,1,()=>{o=null}),le())},i(l){a||(I(o),a=!0)},o(l){O(o),a=!1},d(l){l&&w(e),l&&w(r),o&&o.d(l),l&&w(i)}}}function Ju(t){let e,s=t[0].content+"";return{c(){e=N("p"),this.h()},l(n){e=P(n,"P",{class:!0});var r=A(e);r.forEach(w),this.h()},h(){k(e,"class","svelte-11jarjr")},m(n,r){T(n,e,r),e.innerHTML=s},p(n,r){r&1&&s!==(s=n[0].content+"")&&(e.innerHTML=s)},i:q,o:q,d(n){n&&w(e)}}}function Vi(t){let e,s,n,r;return s=new Go({props:{stacktrace:$n(t[0].content)}}),{c(){e=N("div"),K(s.$$.fragment),this.h()},l(i){e=P(i,"DIV",{class:!0});var a=A(e);ne(s.$$.fragment,a),a.forEach(w),this.h()},h(){k(e,"class","stack-trace svelte-11jarjr")},m(i,a){T(i,e,a),ee(s,e,null),r=!0},p(i,a){const o={};a&1&&(o.stacktrace=$n(i[0].content)),s.$set(o)},i(i){r||(I(s.$$.fragment,i),Ot(()=>{n||(n=Fe(e,ht,{},!0)),n.run(1)}),r=!0)},o(i){O(s.$$.fragment,i),n||(n=Fe(e,ht,{},!1)),n.run(0),r=!1},d(i){i&&w(e),te(s),i&&n&&n.end()}}}function Ci(t){let e,s,n;return e=new Ie({props:{invert:t[5],name:"> StackTrace"}}),e.$on("click",t[7]),{c(){s=N("div"),K(e.$$.fragment),this.h()},l(r){s=P(r,"DIV",{style:!0});var i=A(s);ne(e.$$.fragment,i),this.h()},h(){G(s,"display","contents"),G(s,"--margin","5px 10px 5px 0px"),G(s,"--bg","transparent")},m(r,i){T(r,s,i),ee(e,s,null),n=!0},p(r,i){const a={};i&32&&(a.invert=r[5]),e.$set(a)},i(r){n||(I(e.$$.fragment,r),n=!0)},o(r){O(e.$$.fragment,r),n=!1},d(r){r&&w(s),te(e,r)}}}function zi(t){let e,s,n=t[0].values,r=[];for(let a=0;a<n.length;a+=1)r[a]=$i(Ii(t,n,a));const i=a=>O(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=ae()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=ae()},m(a,o){for(let l=0;l<r.length;l+=1)r[l].m(a,o);T(a,e,o),s=!0},p(a,o){if(o&17){n=a[0].values;let l;for(l=0;l<n.length;l+=1){const c=Ii(a,n,l);r[l]?(r[l].p(c,o),I(r[l],1)):(r[l]=$i(c),r[l].c(),I(r[l],1),r[l].m(e.parentNode,e))}for(oe(),l=n.length;l<r.length;l+=1)i(l);le()}},i(a){if(!s){for(let o=0;o<n.length;o+=1)I(r[o]);s=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)O(r[o]);s=!1},d(a){Pe(r,a),a&&w(e)}}}function Qu(t){let e,s,n;function r(){return t[9](t[13])}return e=new Ie({props:{invert:!0,name:t[13]}}),e.$on("click",r),{c(){s=N("div"),K(e.$$.fragment),this.h()},l(i){s=P(i,"DIV",{style:!0});var a=A(s);ne(e.$$.fragment,a),this.h()},h(){G(s,"display","contents"),G(s,"--height","fit-content"),G(s,"--white-space","break-spaces"),G(s,"--margin","5px 10px 5px 0")},m(i,a){T(i,s,a),ee(e,s,null),n=!0},p(i,a){t=i;const o={};a&1&&(o.name=t[13]),e.$set(o)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){O(e.$$.fragment,i),n=!1},d(i){i&&w(s),te(e,i)}}}function Zu(t){let e,s,n,r;function i(){return t[8](t[13])}return{c(){e=N("plant-button"),this.h()},l(a){e=P(a,"PLANT-BUTTON",{name:!0}),A(e).forEach(w),this.h()},h(){vt(e,"name",s=t[13])},m(a,o){T(a,e,o),n||(r=J(e,"click",i),n=!0)},p(a,o){t=a,o&1&&s!==(s=t[13])&&vt(e,"name",s)},i:q,o:q,d(a){a&&w(e),n=!1,r()}}}function $i(t){let e,s,n,r,i;const a=[Zu,Qu],o=[];function l(c,h){return c[4]?0:1}return s=l(t),n=o[s]=a[s](t),{c(){e=N("div"),n.c(),r=C(),this.h()},l(c){e=P(c,"DIV",{class:!0});var h=A(e);n.l(h),r=z(h),h.forEach(w),this.h()},h(){k(e,"class","button-spacer svelte-11jarjr")},m(c,h){T(c,e,h),o[s].m(e,null),E(e,r),i=!0},p(c,h){let u=s;s=l(c),s===u?o[s].p(c,h):(oe(),O(o[u],1,1,()=>{o[u]=null}),le(),n=o[s],n?n.p(c,h):(n=o[s]=a[s](c),n.c()),I(n,1),n.m(e,r))},i(c){i||(I(n),i=!0)},o(c){O(n),i=!1},d(c){c&&w(e),o[s].d()}}}function Ku(t){let e,s,n=t[0]&&Di(t);return{c(){n&&n.c(),e=ae()},l(r){n&&n.l(r),e=ae()},m(r,i){n&&n.m(r,i),T(r,e,i),s=!0},p(r,[i]){r[0]?n?(n.p(r,i),i&1&&I(n,1)):(n=Di(r),n.c(),I(n,1),n.m(e.parentNode,e)):n&&(oe(),O(n,1,1,()=>{n=null}),le())},i(r){s||(I(n),s=!0)},o(r){O(n),s=!1},d(r){n&&n.d(r),r&&w(e)}}}function ef(t,e,s){let n,r,{toast:i}=e,a=!1,o=!1;function l(){if(i.type===st.ERROR)return"warning";if(i.type===st.SUCCESS)return"checkmark";if(i.type===st.WARNING)return"exclamation"}let c=!1,h;Yt(()=>{setTimeout(()=>{s(2,a=!0)},10)});const u=()=>{s(3,o=!o)},d=v=>i.resolve(v),f=v=>i.resolve(v),p=()=>i.reject();function m(v){Ne[v?"unshift":"push"](()=>{h=v,s(1,h)})}return t.$$set=v=>{"toast"in v&&s(0,i=v.toast)},t.$$.update=()=>{t.$$.dirty&1&&s(6,n=i&&l()),t.$$.dirty&1&&s(5,r=i&&(i.type==="success"||i.type==="warning"||i.type==="error")),t.$$.dirty&2&&s(4,c=h&&!h.parentElement)},[i,h,a,o,c,r,n,u,d,f,p,m]}class tf extends fe{constructor(e){super(),de(this,e,ef,Ku,pe,{toast:0})}}function Ri(t,e,s){const n=t.slice();return n[4]=e[s],n}function sf(t){let e,s;return e=new tf({props:{toast:t[4]}}),{c(){K(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,r){ee(e,n,r),s=!0},p(n,r){const i={};r&4&&(i.toast=n[4]),e.$set(i)},i(n){s||(I(e.$$.fragment,n),s=!0)},o(n){O(e.$$.fragment,n),s=!1},d(n){te(e,n)}}}function nf(t){let e,s;return{c(){e=N("plant-toast"),this.h()},l(n){e=P(n,"PLANT-TOAST",{toast:!0}),A(e).forEach(w),this.h()},h(){vt(e,"toast",s=t[4])},m(n,r){T(n,e,r)},p(n,r){r&4&&s!==(s=n[4])&&vt(e,"toast",s)},i:q,o:q,d(n){n&&w(e)}}}function Fi(t,e){let s,n,r,i,a,o;const l=[nf,sf],c=[];function h(u,d){return u[0]?0:1}return n=h(e),r=c[n]=l[n](e),{key:t,first:null,c(){s=N("div"),r.c(),i=C(),this.h()},l(u){s=P(u,"DIV",{});var d=A(s);r.l(d),i=z(d),d.forEach(w),this.h()},h(){this.first=s},m(u,d){T(u,s,d),c[n].m(s,null),E(s,i),o=!0},p(u,d){e=u;let f=n;n=h(e),n===f?c[n].p(e,d):(oe(),O(c[f],1,1,()=>{c[f]=null}),le(),r=c[n],r?r.p(e,d):(r=c[n]=l[n](e),r.c()),I(r,1),r.m(s,i))},i(u){o||(I(r),Ot(()=>{a||(a=Fe(s,ht,{easing:qr},!0)),a.run(1)}),o=!0)},o(u){O(r),a||(a=Fe(s,ht,{easing:qr},!1)),a.run(0),o=!1},d(u){u&&w(s),c[n].d(),u&&a&&a.end()}}}function rf(t){let e,s=[],n=new Map,r,i=t[2];const a=o=>o[4].id;for(let o=0;o<i.length;o+=1){let l=Ri(t,i,o),c=a(l);n.set(c,s[o]=Fi(c,l))}return{c(){e=N("div");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){e=P(o,"DIV",{id:!0,class:!0});var l=A(e);for(let c=0;c<s.length;c+=1)s[c].l(l);l.forEach(w),this.h()},h(){k(e,"id","toast-wrapper"),k(e,"class","svelte-1ujlok7")},m(o,l){T(o,e,l);for(let c=0;c<s.length;c+=1)s[c].m(e,null);t[3](e),r=!0},p(o,[l]){l&5&&(i=o[2],oe(),s=rc(s,l,a,1,o,i,n,e,ic,Fi,null,Ri),le())},i(o){if(!r){for(let l=0;l<i.length;l+=1)I(s[l]);r=!0}},o(o){for(let l=0;l<s.length;l+=1)O(s[l]);r=!1},d(o){o&&w(e);for(let l=0;l<s.length;l+=1)s[l].d();t[3](null)}}}function af(t,e,s){let n;ft(t,Ah,o=>s(2,n=o));let r=!1,i;Yt(function(){s(0,r=!i.parentElement)});function a(o){Ne[o?"unshift":"push"](()=>{i=o,s(1,i)})}return[r,i,n,a]}class of extends fe{constructor(e){super(),de(this,e,af,rf,pe,{})}}function lf(t){let e,s,n,r,i,a,o,l,c,h,u;return{c(){e=N("div"),s=N("input"),n=C(),r=N("label"),i=ke("svg"),a=ke("title"),o=F("cross"),l=ke("line"),c=ke("line"),this.h()},l(d){e=P(d,"DIV",{class:!0});var f=A(e);s=P(f,"INPUT",{type:!0,id:!0,class:!0}),n=z(f),r=P(f,"LABEL",{class:!0,for:!0});var p=A(r);i=Ae(p,"svg",{xmlns:!0,viewBox:!0,class:!0});var m=A(i);a=Ae(m,"title",{class:!0});var v=A(a);o=B(v,"cross"),v.forEach(w),l=Ae(m,"line",{"vector-effect":!0,x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),A(l).forEach(w),c=Ae(m,"line",{"vector-effect":!0,x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),A(c).forEach(w),m.forEach(w),p.forEach(w),f.forEach(w),this.h()},h(){k(s,"type","checkbox"),k(s,"id",t[1]),k(s,"class","svelte-ra9mrk"),k(a,"class","svelte-ra9mrk"),k(l,"vector-effect","non-scaling-stroke"),k(l,"x1","0"),k(l,"y1","100"),k(l,"x2","100"),k(l,"y2","0"),k(l,"class","svelte-ra9mrk"),k(c,"vector-effect","non-scaling-stroke"),k(c,"x1","0"),k(c,"y1","0"),k(c,"x2","100"),k(c,"y2","100"),k(c,"class","svelte-ra9mrk"),k(i,"xmlns","http://www.w3.org/2000/svg"),k(i,"viewBox","0 0 100 100"),k(i,"class","svelte-ra9mrk"),k(r,"class","checkbox-label svelte-ra9mrk"),k(r,"for",t[1]),k(e,"class","component-wrapper svelte-ra9mrk")},m(d,f){T(d,e,f),E(e,s),s.checked=t[0],E(e,n),E(e,r),E(r,i),E(i,a),E(a,o),E(i,l),E(i,c),h||(u=J(s,"change",t[2]),h=!0)},p(d,[f]){f&2&&k(s,"id",d[1]),f&1&&(s.checked=d[0]),f&2&&k(r,"for",d[1])},i:q,o:q,d(d){d&&w(e),h=!1,u()}}}function cf(t,e,s){const n=We();let{value:r=!1}=e,{id:i=hr()}=e;function a(){r=this.checked,s(0,r)}return t.$$set=o=>{"value"in o&&s(0,r=o.value),"id"in o&&s(1,i=o.id)},t.$$.update=()=>{t.$$.dirty&1&&r!==void 0&&n("change",!!r)},[r,i,a]}class ls extends fe{constructor(e){super(),de(this,e,cf,lf,pe,{value:0,id:1})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),Ce()}get id(){return this.$$.ctx[1]}set id(e){this.$$set({id:e}),Ce()}}/**
 * Convert a series of points to a monotone cubic spline
 * Algorithm based on https://github.com/mbostock/d3
 * https://github.com/yr/monotone-cubic-spline
 * @copyright Yr
 * @license MIT
 */var hf=1e-6,Bi={points:function(e){var s=uf(e),n=e[1],r=e[0],i=[],a=s[1],o=s[0];i.push(r,[r[0]+o[0],r[1]+o[1],n[0]-a[0],n[1]-a[1],n[0],n[1]]);for(var l=2,c=s.length;l<c;l++){var h=e[l],u=s[l];i.push([h[0]-u[0],h[1]-u[1],h[0],h[1]])}return i},slice:function(e,s,n){var r=e.slice(s,n);if(s){if(r[1].length<6){var i=r[0].length;r[1]=[r[0][i-2]*2-r[0][i-4],r[0][i-1]*2-r[0][i-3]].concat(r[1])}r[0]=r[0].slice(-2)}return r},svgPath:function(e){for(var s="",n=0;n<e.length;n++){var r=e[n],i=r.length;n?i>4?(s+="C"+r[0]+", "+r[1],s+=", "+r[2]+", "+r[3],s+=", "+r[4]+", "+r[5]):(s+="S"+r[0]+", "+r[1],s+=", "+r[2]+", "+r[3]):s+="M"+r[i-2]+" "+r[i-1]}return s}};function uf(t){for(var e=ff(t),s=t.length-1,n=[],r=void 0,i=void 0,a=void 0,o=void 0,l=0;l<s;l++)a=Rn(t[l],t[l+1]),Math.abs(a)<hf?e[l]=e[l+1]=0:(r=e[l]/a,i=e[l+1]/a,o=r*r+i*i,o>9&&(o=a*3/Math.sqrt(o),e[l]=o*r,e[l+1]=o*i));for(var c=0;c<=s;c++)o=(t[Math.min(s,c+1)][0]-t[Math.max(0,c-1)][0])/(6*(1+e[c]*e[c])),n.push([o||0,e[c]*o||0]);return n}function Rn(t,e){return(e[1]-t[1])/(e[0]-t[0])}function ff(t){for(var e=[],s=t[0],n=t[1],r=e[0]=Rn(s,n),i=1,a=t.length-1;i<a;i++)s=n,n=t[i+1],e[i]=(r+(r=Rn(s,n)))*.5;return e[i]=r,e}function Ui(t,e,s){const n=t.slice();return n[19]=e[s],n[21]=s,n}function Wi(t,e,s){const n=t.slice();return n[19]=e[s],n}function qi(t){let e,s,n,r,i;function a(){return t[10](t[19])}return{c(){e=ke("circle"),this.h()},l(o){e=Ae(o,"circle",{cx:!0,cy:!0,r:!0,class:!0}),A(e).forEach(w),this.h()},h(){k(e,"cx",s=t[19].x*100),k(e,"cy",n=t[19].y*100),k(e,"r","2"),k(e,"class","svelte-1hhavr7"),Z(e,"pinned",t[19].pinned)},m(o,l){T(o,e,l),r||(i=J(e,"mousedown",a),r=!0)},p(o,l){t=o,l&1&&s!==(s=t[19].x*100)&&k(e,"cx",s),l&1&&n!==(n=t[19].y*100)&&k(e,"cy",n),l&1&&Z(e,"pinned",t[19].pinned)},d(o){o&&w(e),r=!1,i()}}}function df(t){let e,s,n,r,i;return{c(){e=ke("line"),this.h()},l(a){e=Ae(a,"line",{x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),A(e).forEach(w),this.h()},h(){k(e,"x1",s=t[3][t[21]-1].x*100),k(e,"y1",n=t[3][t[21]-1].y*100),k(e,"x2",r=t[19].x*100),k(e,"y2",i=t[19].y*100),k(e,"class","svelte-1hhavr7")},m(a,o){T(a,e,o)},p:q,d(a){a&&w(e)}}}function Hi(t){let e,s,n,r=t[21]>0&&t[21]%2===0&&df(t);return{c(){r&&r.c(),e=ke("circle"),this.h()},l(i){r&&r.l(i),e=Ae(i,"circle",{cx:!0,cy:!0,r:!0,class:!0}),A(e).forEach(w),this.h()},h(){k(e,"cx",s=t[19].x*100),k(e,"cy",n=t[19].y*100),k(e,"r","1"),k(e,"class","svelte-1hhavr7"),Z(e,"pinned",t[19].pinned)},m(i,a){r&&r.m(i,a),T(i,e,a)},p(i,a){i[21]>0&&i[21]%2===0&&r.p(i,a)},d(i){r&&r.d(i),i&&w(e)}}}function pf(t){let e,s,n,r,i,a,o=t[0],l=[];for(let u=0;u<o.length;u+=1)l[u]=qi(Wi(t,o,u));let c=t[3],h=[];for(let u=0;u<c.length;u+=1)h[u]=Hi(Ui(t,c,u));return{c(){e=N("div"),s=ke("svg"),n=ke("path");for(let u=0;u<l.length;u+=1)l[u].c();r=ke("g");for(let u=0;u<h.length;u+=1)h[u].c();this.h()},l(u){e=P(u,"DIV",{class:!0});var d=A(e);s=Ae(d,"svg",{viewBox:!0,width:!0,height:!0,class:!0});var f=A(s);n=Ae(f,"path",{d:!0,fill:!0,stroke:!0,class:!0}),A(n).forEach(w);for(let m=0;m<l.length;m+=1)l[m].l(f);r=Ae(f,"g",{id:!0,class:!0});var p=A(r);for(let m=0;m<h.length;m+=1)h[m].l(p);p.forEach(w),f.forEach(w),d.forEach(w),this.h()},h(){k(n,"d",t[2]),k(n,"fill","none"),k(n,"stroke","grey"),k(n,"class","svelte-1hhavr7"),k(r,"id","debug"),k(r,"class","svelte-1hhavr7"),k(s,"viewBox","0 0 100 100"),k(s,"width","100"),k(s,"height","100"),k(s,"class","svelte-1hhavr7"),k(e,"class","component-wrapper svelte-1hhavr7")},m(u,d){T(u,e,d),E(e,s),E(s,n);for(let f=0;f<l.length;f+=1)l[f].m(s,null);E(s,r);for(let f=0;f<h.length;f+=1)h[f].m(r,null);i||(a=[J(s,"mousedown",t[5]),J(s,"mousemove",t[4]),J(s,"mouseover",t[7]),J(s,"mouseout",t[8]),J(s,"mouseup",t[6]),J(s,"focus",t[7]),J(s,"blur",t[8])],i=!0)},p(u,[d]){if(d&4&&k(n,"d",u[2]),d&3){o=u[0];let f;for(f=0;f<o.length;f+=1){const p=Wi(u,o,f);l[f]?l[f].p(p,d):(l[f]=qi(p),l[f].c(),l[f].m(s,r))}for(;f<l.length;f+=1)l[f].d(1);l.length=o.length}if(d&8){c=u[3];let f;for(f=0;f<c.length;f+=1){const p=Ui(u,c,f);h[f]?h[f].p(p,d):(h[f]=Hi(p),h[f].c(),h[f].m(r,null))}for(;f<h.length;f+=1)h[f].d(1);h.length=c.length}},i:q,o:q,d(u){u&&w(e),Pe(l,u),Pe(h,u),i=!1,wt(a)}}}function mf(t,e,s){let n,r;const i=We();let{value:a=[{x:0,y:1,pinned:!0},{x:1,y:0,pinned:!0}]}=e,o=!1,l,c,h=0,u=0,d=[];const f=()=>{requestAnimationFrame(()=>{i("change",n),s(0,n=n.sort((x,L)=>x.x>L.x?-1:1))})},p=x=>{x.pinned||(n.splice(n.indexOf(l),1),f())},m=x=>{o&&(h=x.offsetX,u=x.offsetY,l&&(c=l,s(1,l=void 0)),c&&(c.x=h/100,c.y=u/100,f()))},v=()=>{if(!l){const x={x:h/100,y:u/100,pinned:!1};s(1,l=x),n.push(l),f()}},g=()=>{l&&(p(l),s(1,l=void 0)),c=void 0},_=()=>{o=!0},b=()=>{o=!1};function y(x){const L=Bi.points(x.map(S=>[S.x*100,S.y*100]));return Bi.svgPath(L)}const M=x=>{s(1,l=x)};return t.$$set=x=>{"value"in x&&s(9,a=x.value)},t.$$.update=()=>{t.$$.dirty&512&&s(0,n=a),t.$$.dirty&1&&s(2,r=y(n))},[n,l,r,d,m,v,g,_,b,a,M]}class vf extends fe{constructor(e){super(),de(this,e,mf,pf,pe,{value:9})}get value(){return this.$$.ctx[9]}set value(e){this.$$set({value:e}),Ce()}}function Xi(t){let e,s;return{c(){e=N("span"),this.h()},l(n){e=P(n,"SPAN",{class:!0,style:!0}),A(e).forEach(w),this.h()},h(){k(e,"class","overlay svelte-14cj8jq"),k(e,"style",s=`width: ${(t[0]-t[1])/(t[2]-t[1])*100}%`)},m(n,r){T(n,e,r)},p(n,r){r&7&&s!==(s=`width: ${(n[0]-n[1])/(n[2]-n[1])*100}%`)&&k(e,"style",s)},d(n){n&&w(e)}}}function gf(t){let e,s,n,r,i,a,o,l,c,h,u,d,f=typeof t[1]!="undefined"&&typeof t[2]!="undefined"&&Xi(t);return{c(){e=N("div"),f&&f.c(),s=C(),n=N("button"),r=F("-"),i=C(),a=N("input"),l=C(),c=N("button"),h=F("+"),this.h()},l(p){e=P(p,"DIV",{class:!0});var m=A(e);f&&f.l(m),s=z(m),n=P(m,"BUTTON",{class:!0});var v=A(n);r=B(v,"-"),v.forEach(w),i=z(m),a=P(m,"INPUT",{step:!0,max:!0,min:!0,type:!0,style:!0,class:!0}),l=z(m),c=P(m,"BUTTON",{class:!0});var g=A(c);h=B(g,"+"),g.forEach(w),m.forEach(w),this.h()},h(){k(n,"class","svelte-14cj8jq"),k(a,"step",t[3]),k(a,"max",t[2]),k(a,"min",t[1]),k(a,"type","number"),k(a,"style",o=`width:${t[5]};`),k(a,"class","svelte-14cj8jq"),k(c,"class","svelte-14cj8jq"),k(e,"class","component-wrapper svelte-14cj8jq")},m(p,m){T(p,e,m),f&&f.m(e,null),E(e,s),E(e,n),E(n,r),E(e,i),E(e,a),Be(a,t[0]),t[11](a),E(e,l),E(e,c),E(c,h),u||(d=[J(n,"click",t[9]),J(a,"input",t[10]),J(a,"mousedown",t[7]),J(a,"mouseup",t[8]),J(c,"click",t[12])],u=!0)},p(p,[m]){typeof p[1]!="undefined"&&typeof p[2]!="undefined"?f?f.p(p,m):(f=Xi(p),f.c(),f.m(e,s)):f&&(f.d(1),f=null),m&8&&k(a,"step",p[3]),m&4&&k(a,"max",p[2]),m&2&&k(a,"min",p[1]),m&32&&o!==(o=`width:${p[5]};`)&&k(a,"style",o),m&1&&Xs(a.value)!==p[0]&&Be(a,p[0])},i:q,o:q,d(p){p&&w(e),f&&f.d(),t[11](null),u=!1,wt(d)}}}function yf(t,e,s){let n,r;const i=We();let{min:a=-1/0}=e,{max:o=1/0}=e,{step:l=1}=e,{value:c=0}=e;c||(c=0);let h;function u(x){s(0,c=Math.max(a,Math.min(+c+x,o)))}let d=0,f=0,p;function m(x){x.preventDefault(),f=c,d=x.clientX,p=h.getBoundingClientRect(),window.removeEventListener("mousemove",g),window.addEventListener("mousemove",g),window.addEventListener("mouseup",v),document.body.style.cursor="ew-resize"}function v(){f===c?h.focus():h.blur(),document.body.style.cursor="unset",window.removeEventListener("mouseup",v),window.removeEventListener("mousemove",g)}function g(x){if(n){const L=(x.clientX-p.left)/p.width;s(0,c=Math.max(Math.min(Math.floor(a+(o-a)*L),o),a))}else{const L=x.clientX-d;s(0,c=f+Math.floor(L/10))}}const _=()=>u(-l);function b(){c=Xs(this.value),s(0,c)}function y(x){Ne[x?"unshift":"push"](()=>{h=x,s(4,h)})}const M=()=>u(+l);return t.$$set=x=>{"min"in x&&s(1,a=x.min),"max"in x&&s(2,o=x.max),"step"in x&&s(3,l=x.step),"value"in x&&s(0,c=x.value)},t.$$.update=()=>{var x;t.$$.dirty&6&&(n=typeof a!="undefined"&&typeof o!="undefined"&&Number.isFinite(a)&&Number.isFinite(o)),t.$$.dirty&1&&c!==void 0&&i("change",parseFloat(c+"")),t.$$.dirty&1&&s(5,r=Number.isFinite(c)?Math.max(((x=c==null?void 0:c.toString().length)!=null?x:1)*8,30)+"px":"20px")},[c,a,o,l,h,r,u,m,v,_,b,y,M]}class Gi extends fe{constructor(e){super(),de(this,e,yf,gf,pe,{min:1,max:2,step:3,value:0})}get min(){return this.$$.ctx[1]}set min(e){this.$$set({min:e}),Ce()}get max(){return this.$$.ctx[2]}set max(e){this.$$set({max:e}),Ce()}get step(){return this.$$.ctx[3]}set step(e){this.$$set({step:e}),Ce()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),Ce()}}function wf(t){let e,s,n,r,i,a,o,l;return{c(){e=N("div"),s=N("span"),r=C(),i=N("input"),this.h()},l(c){e=P(c,"DIV",{class:!0});var h=A(e);s=P(h,"SPAN",{class:!0,style:!0}),A(s).forEach(w),r=z(h),i=P(h,"INPUT",{step:!0,max:!0,min:!0,type:!0,style:!0,class:!0}),h.forEach(w),this.h()},h(){k(s,"class","overlay svelte-1srgbo4"),k(s,"style",n=`width: ${(t[0]-t[1])/(t[2]-t[1])*100}%`),k(i,"step",t[3]),k(i,"max",t[2]),k(i,"min",t[1]),k(i,"type","number"),k(i,"style",a=`width:${t[6]};`),k(i,"class","svelte-1srgbo4"),k(e,"class","component-wrapper svelte-1srgbo4"),Z(e,"is-down",t[5])},m(c,h){T(c,e,h),E(e,s),E(e,r),E(e,i),Be(i,t[0]),t[10](i),o||(l=[J(i,"input",t[9]),J(i,"mousedown",t[7]),J(i,"mouseup",t[8])],o=!0)},p(c,[h]){h&7&&n!==(n=`width: ${(c[0]-c[1])/(c[2]-c[1])*100}%`)&&k(s,"style",n),h&8&&k(i,"step",c[3]),h&4&&k(i,"max",c[2]),h&2&&k(i,"min",c[1]),h&64&&a!==(a=`width:${c[6]};`)&&k(i,"style",a),h&1&&Xs(i.value)!==c[0]&&Be(i,c[0]),h&32&&Z(e,"is-down",c[5])},i:q,o:q,d(c){c&&w(e),t[10](null),o=!1,wt(l)}}}function bf(t){return parseFloat(t).toPrecision(2)}function _f(t,e,s){let n,{value:r=.5}=e,{step:i=.01}=e,{min:a=0}=e,{max:o=1}=e;const l=We();let c,h=!1,u=0,d=0,f=0,p;function m(y){y.preventDefault(),s(5,h=!0),d=r,u=y.clientY,p=c.getBoundingClientRect(),window.removeEventListener("mousemove",g),window.addEventListener("mousemove",g),window.addEventListener("mouseup",v),document.body.style.cursor="ew-resize"}function v(){s(5,h=!1),d===r&&c.focus(),r<a&&s(1,a=r),r>o&&s(2,o=r),document.body.style.cursor="unset",window.removeEventListener("mouseup",v),window.removeEventListener("mousemove",g)}function g(y){if(f=(y.clientX-p.left)/p.width,y.clientY-u,y.ctrlKey){let M=a+(o-a)*f;s(0,r=M)}else s(0,r=Math.max(Math.min(a+(o-a)*f,o),a))}function _(){r=Xs(this.value),s(0,r)}function b(y){Ne[y?"unshift":"push"](()=>{c=y,s(4,c)})}return t.$$set=y=>{"value"in y&&s(0,r=y.value),"step"in y&&s(3,i=y.step),"min"in y&&s(1,a=y.min),"max"in y&&s(2,o=y.max)},t.$$.update=()=>{var y;t.$$.dirty&1&&(r||0).toString().length>5&&s(0,r=bf(r||0)),t.$$.dirty&1&&r!==void 0&&l("change",parseFloat(r+"")),t.$$.dirty&1&&s(6,n=Number.isFinite(r)?Math.max(((y=r==null?void 0:r.toString().length)!=null?y:1)*8,50)+"px":"20px")},[r,a,o,i,c,h,n,m,v,_,b]}class Yi extends fe{constructor(e){super(),de(this,e,_f,wf,pe,{value:0,step:3,min:1,max:2})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),Ce()}get step(){return this.$$.ctx[3]}set step(e){this.$$set({step:e}),Ce()}get min(){return this.$$.ctx[1]}set min(e){this.$$set({min:e}),Ce()}get max(){return this.$$.ctx[2]}set max(e){this.$$set({max:e}),Ce()}}function Ji(t,e,s){const n=t.slice();return n[7]=e[s],n}function Qi(t){let e,s=t[7]+"",n,r,i,a,o;function l(){return t[5](t[7])}return{c(){e=N("p"),n=F(s),r=C(),this.h()},l(c){e=P(c,"P",{style:!0,class:!0});var h=A(e);n=B(h,s),r=z(h),h.forEach(w),this.h()},h(){k(e,"style",i=`opacity: ${t[7]===t[0]?.5:1}`),k(e,"class","item svelte-3ixr9b"),Z(e,"selected",t[0]===t[7])},m(c,h){T(c,e,h),E(e,n),E(e,r),a||(o=J(e,"click",l),a=!0)},p(c,h){t=c,h&2&&s!==(s=t[7]+"")&&ve(n,s),h&3&&i!==(i=`opacity: ${t[7]===t[0]?.5:1}`)&&k(e,"style",i),h&3&&Z(e,"selected",t[0]===t[7])},d(c){c&&w(e),a=!1,o()}}}function xf(t){let e,s,n=t[1],r=[];for(let i=0;i<n.length;i+=1)r[i]=Qi(Ji(t,n,i));return{c(){e=N("div"),s=N("div");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){e=P(i,"DIV",{class:!0});var a=A(e);s=P(a,"DIV",{id:!0,class:!0});var o=A(s);for(let l=0;l<r.length;l+=1)r[l].l(o);o.forEach(w),a.forEach(w),this.h()},h(){k(s,"id","main"),k(s,"class","svelte-3ixr9b"),k(e,"class","component-wrapper svelte-3ixr9b")},m(i,a){T(i,e,a),E(e,s);for(let o=0;o<r.length;o+=1)r[o].m(s,null)},p(i,[a]){if(a&7){n=i[1];let o;for(o=0;o<n.length;o+=1){const l=Ji(i,n,o);r[o]?r[o].p(l,a):(r[o]=Qi(l),r[o].c(),r[o].m(s,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},i:q,o:q,d(i){i&&w(e),Pe(r,i)}}}function Mf(t,e,s){const n=We();let{value:r=void 0}=e;function i(h){s(0,r=h),open=!1}let{values:a=[]}=e;function o(h){s(1,a=h)}function l(h){s(0,r=h)}const c=h=>i(h);return t.$$set=h=>{"value"in h&&s(0,r=h.value),"values"in h&&s(1,a=h.values)},t.$$.update=()=>{t.$$.dirty&1&&r&&n("change",r)},[r,a,i,o,l,c]}class Yo extends fe{constructor(e){super(),de(this,e,Mf,xf,pe,{value:0,values:1,setItems:3,setValue:4})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),Ce()}get values(){return this.$$.ctx[1]}set values(e){this.$$set({values:e}),Ce()}get setItems(){return this.$$.ctx[3]}get setValue(){return this.$$.ctx[4]}}function Zi(t,e,s){const n=t.slice();return n[11]=e[s],n}function Ef(t){let e,s,n,r;return{c(){e=N("div"),s=F("none"),this.h()},l(i){e=P(i,"DIV",{id:!0,class:!0});var a=A(e);s=B(a,"none"),a.forEach(w),this.h()},h(){k(e,"id","selected-value"),k(e,"class","svelte-1t3rhtn")},m(i,a){T(i,e,a),E(e,s),n||(r=J(e,"click",t[4]),n=!0)},p:q,d(i){i&&w(e),n=!1,r()}}}function kf(t){let e,s,n,r;return{c(){e=N("div"),s=F(t[0]),this.h()},l(i){e=P(i,"DIV",{id:!0,class:!0});var a=A(e);s=B(a,t[0]),a.forEach(w),this.h()},h(){k(e,"id","selected-value"),k(e,"class","svelte-1t3rhtn")},m(i,a){T(i,e,a),E(e,s),n||(r=J(e,"click",t[4]),n=!0)},p(i,a){a&1&&ve(s,i[0])},d(i){i&&w(e),n=!1,r()}}}function Ki(t){let e,s=t[11]+"",n,r,i,a,o;function l(){return t[8](t[11])}return{c(){e=N("p"),n=F(s),r=C(),this.h()},l(c){e=P(c,"P",{style:!0,class:!0});var h=A(e);n=B(h,s),r=z(h),h.forEach(w),this.h()},h(){k(e,"style",i=`opacity: ${t[11]===t[0]?.5:1}`),k(e,"class","item svelte-1t3rhtn")},m(c,h){T(c,e,h),E(e,n),E(e,r),a||(o=J(e,"click",l),a=!0)},p(c,h){t=c,h&2&&s!==(s=t[11]+"")&&ve(n,s),h&3&&i!==(i=`opacity: ${t[11]===t[0]?.5:1}`)&&k(e,"style",i)},d(c){c&&w(e),a=!1,o()}}}function ea(t){let e,s=t[11]!==t[0]&&Ki(t);return{c(){s&&s.c(),e=ae()},l(n){s&&s.l(n),e=ae()},m(n,r){s&&s.m(n,r),T(n,e,r)},p(n,r){n[11]!==n[0]?s?s.p(n,r):(s=Ki(n),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},d(n){s&&s.d(n),n&&w(e)}}}function Af(t){let e,s,n,r;function i(h,u){return h[0]!==void 0?kf:Ef}let a=i(t),o=a(t),l=t[1],c=[];for(let h=0;h<l.length;h+=1)c[h]=ea(Zi(t,l,h));return{c(){e=N("div"),s=N("div"),o.c(),n=C(),r=N("div");for(let h=0;h<c.length;h+=1)c[h].c();this.h()},l(h){e=P(h,"DIV",{class:!0});var u=A(e);s=P(u,"DIV",{id:!0,class:!0});var d=A(s);o.l(d),n=z(d),r=P(d,"DIV",{id:!0,class:!0});var f=A(r);for(let p=0;p<c.length;p+=1)c[p].l(f);f.forEach(w),d.forEach(w),u.forEach(w),this.h()},h(){k(r,"id","item-wrapper"),k(r,"class","svelte-1t3rhtn"),k(s,"id","main"),k(s,"class","svelte-1t3rhtn"),k(e,"class","component-wrapper svelte-1t3rhtn"),Z(e,"open",t[2])},m(h,u){T(h,e,u),E(e,s),o.m(s,null),E(s,n),E(s,r);for(let d=0;d<c.length;d+=1)c[d].m(r,null);t[9](s)},p(h,[u]){if(a===(a=i(h))&&o?o.p(h,u):(o.d(1),o=a(h),o&&(o.c(),o.m(s,n))),u&35){l=h[1];let d;for(d=0;d<l.length;d+=1){const f=Zi(h,l,d);c[d]?c[d].p(f,u):(c[d]=ea(f),c[d].c(),c[d].m(r,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=l.length}u&4&&Z(e,"open",h[2])},i:q,o:q,d(h){h&&w(e),o.d(),Pe(c,h),t[9](null)}}}function Sf(t,e,s){const n=We();let{value:r=void 0}=e,i=!1,a;function o(){s(2,i=!0),setTimeout(()=>{document.addEventListener("click",()=>{s(2,i=!1)},{once:!0})},50)}function l(p){s(0,r=p),s(2,i=!1)}let{values:c=[]}=e;function h(p){s(1,c=p)}function u(p){s(0,r=p)}const d=p=>l(p);function f(p){Ne[p?"unshift":"push"](()=>{a=p,s(3,a)})}return t.$$set=p=>{"value"in p&&s(0,r=p.value),"values"in p&&s(1,c=p.values)},t.$$.update=()=>{t.$$.dirty&1&&r&&n("change",r)},[r,c,i,a,o,l,h,u,d,f]}class Nf extends fe{constructor(e){super(),de(this,e,Sf,Af,pe,{value:0,values:1,setItems:6,setValue:7})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),Ce()}get values(){return this.$$.ctx[1]}set values(e){this.$$set({values:e}),Ce()}get setItems(){return this.$$.ctx[6]}get setValue(){return this.$$.ctx[7]}}function ta(t,e,s){const n=t.slice();return n[19]=e[s],n}function sa(t){let e,s,n,r,i;function a(){return t[9](t[19])}return{c(){e=ke("circle"),this.h()},l(o){e=Ae(o,"circle",{cx:!0,cy:!0,r:!0,class:!0}),A(e).forEach(w),this.h()},h(){k(e,"cx",s=t[19].x*100),k(e,"cy",n=t[19].y*200-50),k(e,"r","4"),k(e,"class","svelte-1b0v1ro"),Z(e,"pinned",t[19].pinned)},m(o,l){T(o,e,l),r||(i=J(e,"mousedown",a),r=!0)},p(o,l){t=o,l&1&&s!==(s=t[19].x*100)&&k(e,"cx",s),l&1&&n!==(n=t[19].y*200-50)&&k(e,"cy",n),l&1&&Z(e,"pinned",t[19].pinned)},d(o){o&&w(e),r=!1,i()}}}function Pf(t){let e,s,n,r,i,a,o,l,c,h,u,d,f=t[0],p=[];for(let m=0;m<f.length;m+=1)p[m]=sa(ta(t,f,m));return{c(){e=N("div"),s=ke("svg"),n=ke("path");for(let m=0;m<p.length;m+=1)p[m].c();r=C(),i=ke("svg"),a=ke("defs"),o=ke("linearGradient"),l=ke("stop"),c=ke("stop"),h=ke("path"),this.h()},l(m){e=P(m,"DIV",{class:!0});var v=A(e);s=Ae(v,"svg",{viewBox:!0,width:!0,height:!0,class:!0});var g=A(s);n=Ae(g,"path",{d:!0,fill:!0,class:!0}),A(n).forEach(w);for(let M=0;M<p.length;M+=1)p[M].l(g);g.forEach(w),r=z(v),i=Ae(v,"svg",{id:!0,viewBox:!0,width:!0,height:!0,class:!0});var _=A(i);a=Ae(_,"defs",{class:!0});var b=A(a);o=Ae(b,"linearGradient",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0,class:!0});var y=A(o);l=Ae(y,"stop",{offset:!0,style:!0,class:!0}),A(l).forEach(w),c=Ae(y,"stop",{offset:!0,style:!0,class:!0}),A(c).forEach(w),y.forEach(w),b.forEach(w),h=Ae(_,"path",{d:!0,fill:!0,stroke:!0,class:!0}),A(h).forEach(w),_.forEach(w),v.forEach(w),this.h()},h(){k(n,"d",t[2]),k(n,"fill","none"),k(n,"class","left-path svelte-1b0v1ro"),k(s,"viewBox","0 0 100 100"),k(s,"width","50"),k(s,"height","100"),k(s,"class","svelte-1b0v1ro"),k(l,"offset","0%"),G(l,"stop-color","#65E2A0"),G(l,"stop-opacity","1"),k(l,"class","svelte-1b0v1ro"),k(c,"offset","100%"),G(c,"stop-color","#469C6E"),G(c,"stop-opacity","1"),k(c,"class","svelte-1b0v1ro"),k(o,"id","grad1"),k(o,"x1","0%"),k(o,"y1","0%"),k(o,"x2","100%"),k(o,"y2","0%"),k(o,"class","svelte-1b0v1ro"),k(a,"class","svelte-1b0v1ro"),k(h,"d",t[2]),k(h,"fill","url(#grad1)"),k(h,"stroke","grey"),k(h,"class","svelte-1b0v1ro"),k(i,"id","right"),k(i,"viewBox","0 0 100 100"),k(i,"width","50"),k(i,"height","100"),k(i,"class","svelte-1b0v1ro"),k(e,"class","component-wrapper svelte-1b0v1ro")},m(m,v){T(m,e,v),E(e,s),E(s,n);for(let g=0;g<p.length;g+=1)p[g].m(s,null);E(e,r),E(e,i),E(i,a),E(a,o),E(o,l),E(o,c),E(i,h),u||(d=[J(s,"mousedown",t[4]),J(s,"mousemove",t[3]),J(s,"mouseover",t[6]),J(s,"mouseout",t[7]),J(s,"mouseup",t[5]),J(s,"focus",t[6]),J(s,"blur",t[7])],u=!0)},p(m,[v]){if(v&4&&k(n,"d",m[2]),v&3){f=m[0];let g;for(g=0;g<f.length;g+=1){const _=ta(m,f,g);p[g]?p[g].p(_,v):(p[g]=sa(_),p[g].c(),p[g].m(s,null))}for(;g<p.length;g+=1)p[g].d(1);p.length=f.length}v&4&&k(h,"d",m[2])},i:q,o:q,d(m){m&&w(e),Pe(p,m),u=!1,wt(d)}}}function Lf(t,e,s){let n,r;const i=We();let{value:a=[{x:1,y:0,pinned:!0},{x:.5,y:.5,pinned:!0},{x:1,y:1,pinned:!0}]}=e,o=!1,l,c,h=0,u=0;const d=()=>{requestAnimationFrame(()=>{i("change",n),s(0,n=n.sort((x,L)=>x.y>L.y?-1:1))})},f=x=>{x.pinned||(n.splice(n.indexOf(l),1),d())},p=x=>{o&&(h=x.offsetX,u=x.offsetY,l&&(c=l,s(1,l=void 0)),c&&(c.x=h/50,c.y=u/100,d()))},m=()=>{if(!l){const x={x:h/50,y:u/100,pinned:!1};s(1,l=x),n.push(l),d()}},v=()=>{l&&(f(l),s(1,l=void 0)),c=void 0},g=()=>{o=!0},_=()=>{o=!1},b=x=>`L ${x.x*100} ${x.y*200-50}`;function y(x){return x.reduce((L,S,$)=>$===0?`M ${S.x*100},${S.y*200-50}`:`${L} ${b(S)}`,"")}const M=x=>{s(1,l=x)};return t.$$set=x=>{"value"in x&&s(8,a=x.value)},t.$$.update=()=>{t.$$.dirty&256&&s(0,n=a),t.$$.dirty&1&&s(2,r=y(n))},[n,l,r,p,m,v,g,_,a,M]}class Tf extends fe{constructor(e){super(),de(this,e,Lf,Pf,pe,{value:8})}get value(){return this.$$.ctx[8]}set value(e){this.$$set({value:e}),Ce()}}function na(t,e,s){const n=t.slice();return n[21]=e[s],n[23]=s,n}function ra(t){let e,s=(t[21].title||t[21].value)+"",n,r,i,a;function o(){return t[14](t[21])}function l(){return t[15](t[21])}function c(){return t[16](t[21])}return{c(){e=N("div"),n=F(s),r=C(),this.h()},l(h){e=P(h,"DIV",{class:!0});var u=A(e);n=B(u,s),r=z(u),u.forEach(w),this.h()},h(){k(e,"class","search-entry svelte-1xpdwt6"),Z(e,"focused",t[21].value===t[3])},m(h,u){T(h,e,u),E(e,n),E(e,r),i||(a=[J(e,"focus",o),J(e,"mouseover",l),J(e,"click",c)],i=!0)},p(h,u){t=h,u&16&&s!==(s=(t[21].title||t[21].value)+"")&&ve(n,s),u&24&&Z(e,"focused",t[21].value===t[3])},d(h){h&&w(e),i=!1,wt(a)}}}function ia(t){let e,s=t[23]<t[0]&&ra(t);return{c(){s&&s.c(),e=ae()},l(n){s&&s.l(n),e=ae()},m(n,r){s&&s.m(n,r),T(n,e,r)},p(n,r){n[23]<n[0]?s?s.p(n,r):(s=ra(n),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},d(n){s&&s.d(n),n&&w(e)}}}function If(t){let e,s,n,r,i,a=t[4],o=[];for(let l=0;l<a.length;l+=1)o[l]=ia(na(t,a,l));return{c(){e=N("div"),s=N("input"),n=C();for(let l=0;l<o.length;l+=1)o[l].c();this.h()},l(l){e=P(l,"DIV",{class:!0});var c=A(e);s=P(c,"INPUT",{type:!0,placeholder:!0,class:!0}),n=z(c);for(let h=0;h<o.length;h+=1)o[h].l(c);c.forEach(w),this.h()},h(){k(s,"type","text"),k(s,"placeholder","Search"),k(s,"class","svelte-1xpdwt6"),k(e,"class","search-wrapper svelte-1xpdwt6")},m(l,c){T(l,e,c),E(e,s),t[12](s),Be(s,t[1]),E(e,n);for(let h=0;h<o.length;h+=1)o[h].m(e,null);r||(i=[J(window,"keydown",t[6]),J(s,"input",t[13])],r=!0)},p(l,[c]){if(c&2&&s.value!==l[1]&&Be(s,l[1]),c&185){a=l[4];let h;for(h=0;h<a.length;h+=1){const u=na(l,a,h);o[h]?o[h].p(u,c):(o[h]=ia(u),o[h].c(),o[h].m(e,null))}for(;h<o.length;h+=1)o[h].d(1);o.length=a.length}},i:q,o:q,d(l){l&&w(e),t[12](null),Pe(o,l),r=!1,wt(i)}}}function Df(t,e,s){let n,r;const i=We(),a={};let{limitAmount:o=10}=e,{values:l=[]}=e,c,h="";function u(S,$){if(!($!=null&&$.length))return S;const R=S.filter(V=>!!(V.value.includes($)||V.title&&V.title.toLowerCase().includes($)));return R.length?(R.find(V=>V.value===r)||s(3,r=R[0].value),R):[{value:"Nothing Found"}]}function d(){c.focus()}function f(){s(1,h="")}function p({value:S=r}={value:r}){a[S]=a[S]+1||1,i("input",S)}function m(S){if(!r.length){s(3,r=n[0].value);return}const $=n.slice(0,o).find(j=>j.value===r);if(!$)return;const R=n.indexOf($),W=Math.min(n.length,o),V=((R+S)%W+W)%W;s(3,r=n[V].value)}function v({key:S}){S==="Enter"&&r.length&&p(),S==="ArrowDown"&&m(1),S==="ArrowUp"&&m(-1)}function g(S){s(3,r=S.value)}const _=S=>{s(8,l=S)};function b(S){Ne[S?"unshift":"push"](()=>{c=S,s(2,c)})}function y(){h=this.value,s(1,h)}const M=S=>g(S),x=S=>g(S),L=S=>p(S);return t.$$set=S=>{"limitAmount"in S&&s(0,o=S.limitAmount),"values"in S&&s(8,l=S.values)},t.$$.update=()=>{t.$$.dirty&258&&s(4,n=u(l,h.toLowerCase()))},s(3,r=""),[o,h,c,r,n,p,v,g,l,d,f,_,b,y,M,x,L]}class jf extends fe{constructor(e){super(),de(this,e,Df,If,pe,{limitAmount:0,values:8,focus:9,clear:10,setItems:11})}get focus(){return this.$$.ctx[9]}get clear(){return this.$$.ctx[10]}get setItems(){return this.$$.ctx[11]}}function aa(t){let e,s,n;return{c(){e=N("div"),s=N("p"),n=F(t[1]),this.h()},l(r){e=P(r,"DIV",{class:!0});var i=A(e);s=P(i,"P",{class:!0});var a=A(s);n=B(a,t[1]),a.forEach(w),i.forEach(w),this.h()},h(){k(s,"class","svelte-1aw08v2"),k(e,"class","border svelte-1aw08v2")},m(r,i){T(r,e,i),E(e,s),E(s,n)},p(r,i){i&2&&ve(n,r[1])},d(r){r&&w(e)}}}function Of(t){let e,s,n,r,i,a,o,l,c,h,u=t[1]&&aa(t);const d=t[4].default,f=rr(d,t,t[3],null);return{c(){e=N("div"),s=N("div"),n=ke("svg"),r=ke("path"),i=C(),u&&u.c(),a=C(),o=N("div"),f&&f.c(),this.h()},l(p){e=P(p,"DIV",{class:!0});var m=A(e);s=P(m,"DIV",{class:!0});var v=A(s);n=Ae(v,"svg",{xmlns:!0,viewBox:!0,width:!0,height:!0,class:!0});var g=A(n);r=Ae(g,"path",{d:!0,class:!0}),A(r).forEach(w),g.forEach(w),i=z(v),u&&u.l(v),v.forEach(w),a=z(m),o=P(m,"DIV",{class:!0});var _=A(o);f&&f.l(_),_.forEach(w),m.forEach(w),this.h()},h(){k(r,"d","M13.172 12l-4.95-4.95 1.414-1.414L16 12l-6.364 6.364-1.414-1.414z"),k(r,"class","svelte-1aw08v2"),k(n,"xmlns","http://www.w3.org/2000/svg"),k(n,"viewBox","0 0 24 24"),k(n,"width","24"),k(n,"height","24"),k(n,"class","svelte-1aw08v2"),k(s,"class","header svelte-1aw08v2"),k(o,"class","content svelte-1aw08v2"),k(e,"class","wrapper svelte-1aw08v2"),Z(e,"open",t[0])},m(p,m){T(p,e,m),E(e,s),E(s,n),E(n,r),E(s,i),u&&u.m(s,null),E(e,a),E(e,o),f&&f.m(o,null),l=!0,c||(h=J(s,"click",t[2]),c=!0)},p(p,[m]){p[1]?u?u.p(p,m):(u=aa(p),u.c(),u.m(s,null)):u&&(u.d(1),u=null),f&&f.p&&(!l||m&8)&&ir(f,d,p,p[3],l?or(d,p[3],m,null):ar(p[3]),null),m&1&&Z(e,"open",p[0])},i(p){l||(I(f,p),l=!0)},o(p){O(f,p),l=!1},d(p){p&&w(e),u&&u.d(),f&&f.d(p),c=!1,h()}}}function Vf(t,e,s){let{$$slots:n={},$$scope:r}=e;const i=We();let{open:a=!1}=e,{name:o=""}=e;const l=()=>{s(0,a=!a),i("toggle",a)};return t.$$set=c=>{"open"in c&&s(0,a=c.open),"name"in c&&s(1,o=c.name),"$$scope"in c&&s(3,r=c.$$scope)},[a,o,l,r,n]}class $s extends fe{constructor(e){super(),de(this,e,Vf,Of,pe,{open:0,name:1})}}function oa(t,e,s){const n=t.slice();return n[1]=e[s],n}function la(t){let e,s,n,r,i,a,o,l,c=JSON.stringify(t[1].args[1],null,2)+"",h,u,d;return{c(){e=N("tr"),s=N("td"),n=N("details"),r=N("summary"),i=F("args"),a=C(),o=N("pre"),l=N("code"),h=F(c),u=N("pre"),d=C(),this.h()},l(f){e=P(f,"TR",{colspan:!0});var p=A(e);s=P(p,"TD",{colspan:!0});var m=A(s);n=P(m,"DETAILS",{});var v=A(n);r=P(v,"SUMMARY",{});var g=A(r);i=B(g,"args"),g.forEach(w),a=z(v),o=P(v,"PRE",{});var _=A(o);l=P(_,"CODE",{});var b=A(l);h=B(b,c),b.forEach(w),u=P(_,"PRE",{}),A(u).forEach(w),_.forEach(w),v.forEach(w),m.forEach(w),d=z(p),p.forEach(w),this.h()},h(){k(s,"colspan","3"),k(e,"colspan","3")},m(f,p){T(f,e,p),E(e,s),E(s,n),E(n,r),E(r,i),E(n,a),E(n,o),E(o,l),E(l,h),E(o,u),E(e,d)},p(f,p){p&1&&c!==(c=JSON.stringify(f[1].args[1],null,2)+"")&&ve(h,c)},d(f){f&&w(e)}}}function ca(t){let e,s,n=ha(t[1].date)+"",r,i,a,o,l,c=t[1].scope+"",h,u,d,f,p=t[1].args[0]+"",m,v,g,_=t[1].args[1]&&la(t);return{c(){e=N("tr"),s=N("td"),r=F(n),i=C(),a=N("td"),o=N("b"),l=F("["),h=F(c),u=F("]"),d=C(),f=N("td"),m=F(p),v=C(),_&&_.c(),g=ae()},l(b){e=P(b,"TR",{});var y=A(e);s=P(y,"TD",{});var M=A(s);r=B(M,n),M.forEach(w),i=z(y),a=P(y,"TD",{});var x=A(a);o=P(x,"B",{});var L=A(o);l=B(L,"["),h=B(L,c),u=B(L,"]"),L.forEach(w),x.forEach(w),d=z(y),f=P(y,"TD",{});var S=A(f);m=B(S,p),S.forEach(w),y.forEach(w),v=z(b),_&&_.l(b),g=ae()},m(b,y){T(b,e,y),E(e,s),E(s,r),E(e,i),E(e,a),E(a,o),E(o,l),E(o,h),E(o,u),E(e,d),E(e,f),E(f,m),T(b,v,y),_&&_.m(b,y),T(b,g,y)},p(b,y){y&1&&n!==(n=ha(b[1].date)+"")&&ve(r,n),y&1&&c!==(c=b[1].scope+"")&&ve(h,c),y&1&&p!==(p=b[1].args[0]+"")&&ve(m,p),b[1].args[1]?_?_.p(b,y):(_=la(b),_.c(),_.m(g.parentNode,g)):_&&(_.d(1),_=null)},d(b){b&&w(e),b&&w(v),_&&_.d(b),b&&w(g)}}}function Cf(t){let e,s,n=t[0],r=[];for(let i=0;i<n.length;i+=1)r[i]=ca(oa(t,n,i));return{c(){e=N("div"),s=N("table");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){e=P(i,"DIV",{id:!0,class:!0});var a=A(e);s=P(a,"TABLE",{});var o=A(s);for(let l=0;l<r.length;l+=1)r[l].l(o);o.forEach(w),a.forEach(w),this.h()},h(){k(e,"id","wrapper"),k(e,"class","svelte-1xdbmis")},m(i,a){T(i,e,a),E(e,s);for(let o=0;o<r.length;o+=1)r[o].m(s,null)},p(i,[a]){if(a&1){n=i[0];let o;for(o=0;o<n.length;o+=1){const l=oa(i,n,o);r[o]?r[o].p(l,a):(r[o]=ca(l),r[o].c(),r[o].m(s,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},i:q,o:q,d(i){i&&w(e),Pe(r,i)}}}function ha(t){const e=new Date(t);return`${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}`}function zf(t,e,s){let{logs:n}=e;return t.$$set=r=>{"logs"in r&&s(0,n=r.logs)},[n]}class $f extends fe{constructor(e){super(),de(this,e,zf,Cf,pe,{logs:0})}}function Rf({target:t,template:e,value:s}){const n=Fn(e),r=Re(ye({},e),{value:s});return delete r.type,delete r.internal,delete r.label,delete r.inputType,new n({target:t,props:r})}function Fn(t){if(t.type==="select")return t.inputType==="tab"?Yo:Nf;if(t.type==="curve")return vf;if(t.type==="shape")return Tf;if(t.type==="number"){if(t.inputType){if(t.inputType==="float")return Yi;if(t.inputType==="integer")return Gi}return(t==null?void 0:t.step)&&t.step%1!==0?Yi:Gi}return ls}let ua;function Jo(t){const e=t.position,s=t.index,n=t.normal;for(let r=0;r<s.length/3;r++){const i=new ie(e[s[r*3+0]*3+0],e[s[r*3+0]*3+1],e[s[r*3+0]*3+2]),a=new ie(e[s[r*3+1]*3+0]-i.x,e[s[r*3+1]*3+1]-i.y,e[s[r*3+1]*3+2]-i.z),o=new ie(e[s[r*3+2]*3+0]-i.x,e[s[r*3+2]*3+1]-i.y,e[s[r*3+2]*3+2]-i.z);let l=new ie().cross(a,o).normalize();l[0]===0&&l[1]===0&&l[3]===0&&(l=ua);for(let c=0;c<3;c++)n[s[r*3+c]*3+0]=l.x,n[s[r*3+c]*3+1]=l.y,n[s[r*3+c]*3+2]=l.z;ua=l}return t}function Ff(t,e=[0,0,0],s=[0,0,0],n=[1,1,1]){const r=new Float32Array(t.position.length),i=t.position.length,a=t.position;for(let o=0;o<i;o+=3){const l=a[o+0]*n[0],c=a[o+1]*n[1],h=a[o+2]*n[2],u=l,d=Math.cos(s[0])*c-Math.sin(s[0])*h,f=Math.sin(s[0])*c+Math.cos(s[0])*h,p=Math.cos(s[1])*u-Math.sin(s[1])*f,m=d,v=Math.sin(s[1])*u+Math.cos(s[1])*f;r[o+0]=p+e[0],r[o+1]=m+e[1],r[o+2]=v+e[2]}return{position:r,uv:t.uv,normal:t.normal,index:t.index}}function Qo(t){if(Array.isArray(t))return t.map(o=>Qo(o)).flat();const e=[],s={position:t.position,normal:t.normal,uv:t.uv,index:t.index},n=t.offset,r=t.rotation,i=t.scale,a=t.offset.length;for(let o=0;o<a;o+=3)e.push(Ff(s,[n[o+0],n[o+1],n[o+2]],[r[o+0],r[o+1],r[o+2]],[i[o+0],i[o+1],i[o+2]]));return e}var xe=1e-6,ut=typeof Float32Array!="undefined"?Float32Array:Array,fa=Math.random;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Bf(){var t=new ut(16);return ut!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Uf(t){var e=new ut(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Wf(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function qf(t,e,s,n,r,i,a,o,l,c,h,u,d,f,p,m){var v=new ut(16);return v[0]=t,v[1]=e,v[2]=s,v[3]=n,v[4]=r,v[5]=i,v[6]=a,v[7]=o,v[8]=l,v[9]=c,v[10]=h,v[11]=u,v[12]=d,v[13]=f,v[14]=p,v[15]=m,v}function Hf(t,e,s,n,r,i,a,o,l,c,h,u,d,f,p,m,v){return t[0]=e,t[1]=s,t[2]=n,t[3]=r,t[4]=i,t[5]=a,t[6]=o,t[7]=l,t[8]=c,t[9]=h,t[10]=u,t[11]=d,t[12]=f,t[13]=p,t[14]=m,t[15]=v,t}function Zo(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Xf(t,e){if(t===e){var s=e[1],n=e[2],r=e[3],i=e[6],a=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=s,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=i,t[11]=e[14],t[12]=r,t[13]=a,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Gf(t,e){var s=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8],u=e[9],d=e[10],f=e[11],p=e[12],m=e[13],v=e[14],g=e[15],_=s*o-n*a,b=s*l-r*a,y=s*c-i*a,M=n*l-r*o,x=n*c-i*o,L=r*c-i*l,S=h*m-u*p,$=h*v-d*p,R=h*g-f*p,W=u*v-d*m,V=u*g-f*m,j=d*g-f*v,D=_*j-b*V+y*W+M*R-x*$+L*S;return D?(D=1/D,t[0]=(o*j-l*V+c*W)*D,t[1]=(r*V-n*j-i*W)*D,t[2]=(m*L-v*x+g*M)*D,t[3]=(d*x-u*L-f*M)*D,t[4]=(l*R-a*j-c*$)*D,t[5]=(s*j-r*R+i*$)*D,t[6]=(v*y-p*L-g*b)*D,t[7]=(h*L-d*y+f*b)*D,t[8]=(a*V-o*R+c*S)*D,t[9]=(n*R-s*V-i*S)*D,t[10]=(p*x-m*y+g*_)*D,t[11]=(u*y-h*x-f*_)*D,t[12]=(o*$-a*W-l*S)*D,t[13]=(s*W-n*$+r*S)*D,t[14]=(m*b-p*M-v*_)*D,t[15]=(h*M-u*b+d*_)*D,t):null}function Yf(t,e){var s=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8],u=e[9],d=e[10],f=e[11],p=e[12],m=e[13],v=e[14],g=e[15];return t[0]=o*(d*g-f*v)-u*(l*g-c*v)+m*(l*f-c*d),t[1]=-(n*(d*g-f*v)-u*(r*g-i*v)+m*(r*f-i*d)),t[2]=n*(l*g-c*v)-o*(r*g-i*v)+m*(r*c-i*l),t[3]=-(n*(l*f-c*d)-o*(r*f-i*d)+u*(r*c-i*l)),t[4]=-(a*(d*g-f*v)-h*(l*g-c*v)+p*(l*f-c*d)),t[5]=s*(d*g-f*v)-h*(r*g-i*v)+p*(r*f-i*d),t[6]=-(s*(l*g-c*v)-a*(r*g-i*v)+p*(r*c-i*l)),t[7]=s*(l*f-c*d)-a*(r*f-i*d)+h*(r*c-i*l),t[8]=a*(u*g-f*m)-h*(o*g-c*m)+p*(o*f-c*u),t[9]=-(s*(u*g-f*m)-h*(n*g-i*m)+p*(n*f-i*u)),t[10]=s*(o*g-c*m)-a*(n*g-i*m)+p*(n*c-i*o),t[11]=-(s*(o*f-c*u)-a*(n*f-i*u)+h*(n*c-i*o)),t[12]=-(a*(u*v-d*m)-h*(o*v-l*m)+p*(o*d-l*u)),t[13]=s*(u*v-d*m)-h*(n*v-r*m)+p*(n*d-r*u),t[14]=-(s*(o*v-l*m)-a*(n*v-r*m)+p*(n*l-r*o)),t[15]=s*(o*d-l*u)-a*(n*d-r*u)+h*(n*l-r*o),t}function Jf(t){var e=t[0],s=t[1],n=t[2],r=t[3],i=t[4],a=t[5],o=t[6],l=t[7],c=t[8],h=t[9],u=t[10],d=t[11],f=t[12],p=t[13],m=t[14],v=t[15],g=e*a-s*i,_=e*o-n*i,b=e*l-r*i,y=s*o-n*a,M=s*l-r*a,x=n*l-r*o,L=c*p-h*f,S=c*m-u*f,$=c*v-d*f,R=h*m-u*p,W=h*v-d*p,V=u*v-d*m;return g*V-_*W+b*R+y*$-M*S+x*L}function Ko(t,e,s){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],u=e[8],d=e[9],f=e[10],p=e[11],m=e[12],v=e[13],g=e[14],_=e[15],b=s[0],y=s[1],M=s[2],x=s[3];return t[0]=b*n+y*o+M*u+x*m,t[1]=b*r+y*l+M*d+x*v,t[2]=b*i+y*c+M*f+x*g,t[3]=b*a+y*h+M*p+x*_,b=s[4],y=s[5],M=s[6],x=s[7],t[4]=b*n+y*o+M*u+x*m,t[5]=b*r+y*l+M*d+x*v,t[6]=b*i+y*c+M*f+x*g,t[7]=b*a+y*h+M*p+x*_,b=s[8],y=s[9],M=s[10],x=s[11],t[8]=b*n+y*o+M*u+x*m,t[9]=b*r+y*l+M*d+x*v,t[10]=b*i+y*c+M*f+x*g,t[11]=b*a+y*h+M*p+x*_,b=s[12],y=s[13],M=s[14],x=s[15],t[12]=b*n+y*o+M*u+x*m,t[13]=b*r+y*l+M*d+x*v,t[14]=b*i+y*c+M*f+x*g,t[15]=b*a+y*h+M*p+x*_,t}function Qf(t,e,s){var n=s[0],r=s[1],i=s[2],a,o,l,c,h,u,d,f,p,m,v,g;return e===t?(t[12]=e[0]*n+e[4]*r+e[8]*i+e[12],t[13]=e[1]*n+e[5]*r+e[9]*i+e[13],t[14]=e[2]*n+e[6]*r+e[10]*i+e[14],t[15]=e[3]*n+e[7]*r+e[11]*i+e[15]):(a=e[0],o=e[1],l=e[2],c=e[3],h=e[4],u=e[5],d=e[6],f=e[7],p=e[8],m=e[9],v=e[10],g=e[11],t[0]=a,t[1]=o,t[2]=l,t[3]=c,t[4]=h,t[5]=u,t[6]=d,t[7]=f,t[8]=p,t[9]=m,t[10]=v,t[11]=g,t[12]=a*n+h*r+p*i+e[12],t[13]=o*n+u*r+m*i+e[13],t[14]=l*n+d*r+v*i+e[14],t[15]=c*n+f*r+g*i+e[15]),t}function Zf(t,e,s){var n=s[0],r=s[1],i=s[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Kf(t,e,s,n){var r=n[0],i=n[1],a=n[2],o=Math.hypot(r,i,a),l,c,h,u,d,f,p,m,v,g,_,b,y,M,x,L,S,$,R,W,V,j,D,H;return o<xe?null:(o=1/o,r*=o,i*=o,a*=o,l=Math.sin(s),c=Math.cos(s),h=1-c,u=e[0],d=e[1],f=e[2],p=e[3],m=e[4],v=e[5],g=e[6],_=e[7],b=e[8],y=e[9],M=e[10],x=e[11],L=r*r*h+c,S=i*r*h+a*l,$=a*r*h-i*l,R=r*i*h-a*l,W=i*i*h+c,V=a*i*h+r*l,j=r*a*h+i*l,D=i*a*h-r*l,H=a*a*h+c,t[0]=u*L+m*S+b*$,t[1]=d*L+v*S+y*$,t[2]=f*L+g*S+M*$,t[3]=p*L+_*S+x*$,t[4]=u*R+m*W+b*V,t[5]=d*R+v*W+y*V,t[6]=f*R+g*W+M*V,t[7]=p*R+_*W+x*V,t[8]=u*j+m*D+b*H,t[9]=d*j+v*D+y*H,t[10]=f*j+g*D+M*H,t[11]=p*j+_*D+x*H,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ed(t,e,s){var n=Math.sin(s),r=Math.cos(s),i=e[4],a=e[5],o=e[6],l=e[7],c=e[8],h=e[9],u=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*r+c*n,t[5]=a*r+h*n,t[6]=o*r+u*n,t[7]=l*r+d*n,t[8]=c*r-i*n,t[9]=h*r-a*n,t[10]=u*r-o*n,t[11]=d*r-l*n,t}function td(t,e,s){var n=Math.sin(s),r=Math.cos(s),i=e[0],a=e[1],o=e[2],l=e[3],c=e[8],h=e[9],u=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*r-c*n,t[1]=a*r-h*n,t[2]=o*r-u*n,t[3]=l*r-d*n,t[8]=i*n+c*r,t[9]=a*n+h*r,t[10]=o*n+u*r,t[11]=l*n+d*r,t}function sd(t,e,s){var n=Math.sin(s),r=Math.cos(s),i=e[0],a=e[1],o=e[2],l=e[3],c=e[4],h=e[5],u=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*r+c*n,t[1]=a*r+h*n,t[2]=o*r+u*n,t[3]=l*r+d*n,t[4]=c*r-i*n,t[5]=h*r-a*n,t[6]=u*r-o*n,t[7]=d*r-l*n,t}function nd(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function rd(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function id(t,e,s){var n=s[0],r=s[1],i=s[2],a=Math.hypot(n,r,i),o,l,c;return a<xe?null:(a=1/a,n*=a,r*=a,i*=a,o=Math.sin(e),l=Math.cos(e),c=1-l,t[0]=n*n*c+l,t[1]=r*n*c+i*o,t[2]=i*n*c-r*o,t[3]=0,t[4]=n*r*c-i*o,t[5]=r*r*c+l,t[6]=i*r*c+n*o,t[7]=0,t[8]=n*i*c+r*o,t[9]=r*i*c-n*o,t[10]=i*i*c+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function ad(t,e){var s=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=s,t[7]=0,t[8]=0,t[9]=-s,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function od(t,e){var s=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-s,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=s,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ld(t,e){var s=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=s,t[2]=0,t[3]=0,t[4]=-s,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function el(t,e,s){var n=e[0],r=e[1],i=e[2],a=e[3],o=n+n,l=r+r,c=i+i,h=n*o,u=n*l,d=n*c,f=r*l,p=r*c,m=i*c,v=a*o,g=a*l,_=a*c;return t[0]=1-(f+m),t[1]=u+_,t[2]=d-g,t[3]=0,t[4]=u-_,t[5]=1-(h+m),t[6]=p+v,t[7]=0,t[8]=d+g,t[9]=p-v,t[10]=1-(h+f),t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t}function cd(t,e){var s=new ut(3),n=-e[0],r=-e[1],i=-e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],u=n*n+r*r+i*i+a*a;return u>0?(s[0]=(o*a+h*n+l*i-c*r)*2/u,s[1]=(l*a+h*r+c*n-o*i)*2/u,s[2]=(c*a+h*i+o*r-l*n)*2/u):(s[0]=(o*a+h*n+l*i-c*r)*2,s[1]=(l*a+h*r+c*n-o*i)*2,s[2]=(c*a+h*i+o*r-l*n)*2),el(t,e,s),t}function hd(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function tl(t,e){var s=e[0],n=e[1],r=e[2],i=e[4],a=e[5],o=e[6],l=e[8],c=e[9],h=e[10];return t[0]=Math.hypot(s,n,r),t[1]=Math.hypot(i,a,o),t[2]=Math.hypot(l,c,h),t}function ud(t,e){var s=new ut(3);tl(s,e);var n=1/s[0],r=1/s[1],i=1/s[2],a=e[0]*n,o=e[1]*r,l=e[2]*i,c=e[4]*n,h=e[5]*r,u=e[6]*i,d=e[8]*n,f=e[9]*r,p=e[10]*i,m=a+h+p,v=0;return m>0?(v=Math.sqrt(m+1)*2,t[3]=.25*v,t[0]=(u-f)/v,t[1]=(d-l)/v,t[2]=(o-c)/v):a>h&&a>p?(v=Math.sqrt(1+a-h-p)*2,t[3]=(u-f)/v,t[0]=.25*v,t[1]=(o+c)/v,t[2]=(d+l)/v):h>p?(v=Math.sqrt(1+h-a-p)*2,t[3]=(d-l)/v,t[0]=(o+c)/v,t[1]=.25*v,t[2]=(u+f)/v):(v=Math.sqrt(1+p-a-h)*2,t[3]=(o-c)/v,t[0]=(d+l)/v,t[1]=(u+f)/v,t[2]=.25*v),t}function fd(t,e,s,n){var r=e[0],i=e[1],a=e[2],o=e[3],l=r+r,c=i+i,h=a+a,u=r*l,d=r*c,f=r*h,p=i*c,m=i*h,v=a*h,g=o*l,_=o*c,b=o*h,y=n[0],M=n[1],x=n[2];return t[0]=(1-(p+v))*y,t[1]=(d+b)*y,t[2]=(f-_)*y,t[3]=0,t[4]=(d-b)*M,t[5]=(1-(u+v))*M,t[6]=(m+g)*M,t[7]=0,t[8]=(f+_)*x,t[9]=(m-g)*x,t[10]=(1-(u+p))*x,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t}function dd(t,e,s,n,r){var i=e[0],a=e[1],o=e[2],l=e[3],c=i+i,h=a+a,u=o+o,d=i*c,f=i*h,p=i*u,m=a*h,v=a*u,g=o*u,_=l*c,b=l*h,y=l*u,M=n[0],x=n[1],L=n[2],S=r[0],$=r[1],R=r[2],W=(1-(m+g))*M,V=(f+y)*M,j=(p-b)*M,D=(f-y)*x,H=(1-(d+g))*x,re=(v+_)*x,se=(p+b)*L,he=(v-_)*L,ue=(1-(d+m))*L;return t[0]=W,t[1]=V,t[2]=j,t[3]=0,t[4]=D,t[5]=H,t[6]=re,t[7]=0,t[8]=se,t[9]=he,t[10]=ue,t[11]=0,t[12]=s[0]+S-(W*S+D*$+se*R),t[13]=s[1]+$-(V*S+H*$+he*R),t[14]=s[2]+R-(j*S+re*$+ue*R),t[15]=1,t}function pd(t,e){var s=e[0],n=e[1],r=e[2],i=e[3],a=s+s,o=n+n,l=r+r,c=s*a,h=n*a,u=n*o,d=r*a,f=r*o,p=r*l,m=i*a,v=i*o,g=i*l;return t[0]=1-u-p,t[1]=h+g,t[2]=d-v,t[3]=0,t[4]=h-g,t[5]=1-c-p,t[6]=f+m,t[7]=0,t[8]=d+v,t[9]=f-m,t[10]=1-c-u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function md(t,e,s,n,r,i,a){var o=1/(s-e),l=1/(r-n),c=1/(i-a);return t[0]=i*2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i*2*l,t[6]=0,t[7]=0,t[8]=(s+e)*o,t[9]=(r+n)*l,t[10]=(a+i)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*i*2*c,t[15]=0,t}function sl(t,e,s,n,r){var i=1/Math.tan(e/2),a;return t[0]=i/s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,r!=null&&r!==1/0?(a=1/(n-r),t[10]=(r+n)*a,t[14]=2*r*n*a):(t[10]=-1,t[14]=-2*n),t}var vd=sl;function gd(t,e,s,n,r){var i=1/Math.tan(e/2),a;return t[0]=i/s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,r!=null&&r!==1/0?(a=1/(n-r),t[10]=r*a,t[14]=r*n*a):(t[10]=-1,t[14]=-n),t}function yd(t,e,s,n){var r=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),l=2/(a+o),c=2/(r+i);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-((a-o)*l*.5),t[9]=(r-i)*c*.5,t[10]=n/(s-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*s/(s-n),t[15]=0,t}function nl(t,e,s,n,r,i,a){var o=1/(e-s),l=1/(n-r),c=1/(i-a);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+s)*o,t[13]=(r+n)*l,t[14]=(a+i)*c,t[15]=1,t}var wd=nl;function bd(t,e,s,n,r,i,a){var o=1/(e-s),l=1/(n-r),c=1/(i-a);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=c,t[11]=0,t[12]=(e+s)*o,t[13]=(r+n)*l,t[14]=i*c,t[15]=1,t}function _d(t,e,s,n){var r,i,a,o,l,c,h,u,d,f,p=e[0],m=e[1],v=e[2],g=n[0],_=n[1],b=n[2],y=s[0],M=s[1],x=s[2];return Math.abs(p-y)<xe&&Math.abs(m-M)<xe&&Math.abs(v-x)<xe?Zo(t):(h=p-y,u=m-M,d=v-x,f=1/Math.hypot(h,u,d),h*=f,u*=f,d*=f,r=_*d-b*u,i=b*h-g*d,a=g*u-_*h,f=Math.hypot(r,i,a),f?(f=1/f,r*=f,i*=f,a*=f):(r=0,i=0,a=0),o=u*a-d*i,l=d*r-h*a,c=h*i-u*r,f=Math.hypot(o,l,c),f?(f=1/f,o*=f,l*=f,c*=f):(o=0,l=0,c=0),t[0]=r,t[1]=o,t[2]=h,t[3]=0,t[4]=i,t[5]=l,t[6]=u,t[7]=0,t[8]=a,t[9]=c,t[10]=d,t[11]=0,t[12]=-(r*p+i*m+a*v),t[13]=-(o*p+l*m+c*v),t[14]=-(h*p+u*m+d*v),t[15]=1,t)}function xd(t,e,s,n){var r=e[0],i=e[1],a=e[2],o=n[0],l=n[1],c=n[2],h=r-s[0],u=i-s[1],d=a-s[2],f=h*h+u*u+d*d;f>0&&(f=1/Math.sqrt(f),h*=f,u*=f,d*=f);var p=l*d-c*u,m=c*h-o*d,v=o*u-l*h;return f=p*p+m*m+v*v,f>0&&(f=1/Math.sqrt(f),p*=f,m*=f,v*=f),t[0]=p,t[1]=m,t[2]=v,t[3]=0,t[4]=u*v-d*m,t[5]=d*p-h*v,t[6]=h*m-u*p,t[7]=0,t[8]=h,t[9]=u,t[10]=d,t[11]=0,t[12]=r,t[13]=i,t[14]=a,t[15]=1,t}function Md(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Ed(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function kd(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t[3]=e[3]+s[3],t[4]=e[4]+s[4],t[5]=e[5]+s[5],t[6]=e[6]+s[6],t[7]=e[7]+s[7],t[8]=e[8]+s[8],t[9]=e[9]+s[9],t[10]=e[10]+s[10],t[11]=e[11]+s[11],t[12]=e[12]+s[12],t[13]=e[13]+s[13],t[14]=e[14]+s[14],t[15]=e[15]+s[15],t}function rl(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t[2]=e[2]-s[2],t[3]=e[3]-s[3],t[4]=e[4]-s[4],t[5]=e[5]-s[5],t[6]=e[6]-s[6],t[7]=e[7]-s[7],t[8]=e[8]-s[8],t[9]=e[9]-s[9],t[10]=e[10]-s[10],t[11]=e[11]-s[11],t[12]=e[12]-s[12],t[13]=e[13]-s[13],t[14]=e[14]-s[14],t[15]=e[15]-s[15],t}function Ad(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12]*s,t[13]=e[13]*s,t[14]=e[14]*s,t[15]=e[15]*s,t}function Sd(t,e,s,n){return t[0]=e[0]+s[0]*n,t[1]=e[1]+s[1]*n,t[2]=e[2]+s[2]*n,t[3]=e[3]+s[3]*n,t[4]=e[4]+s[4]*n,t[5]=e[5]+s[5]*n,t[6]=e[6]+s[6]*n,t[7]=e[7]+s[7]*n,t[8]=e[8]+s[8]*n,t[9]=e[9]+s[9]*n,t[10]=e[10]+s[10]*n,t[11]=e[11]+s[11]*n,t[12]=e[12]+s[12]*n,t[13]=e[13]+s[13]*n,t[14]=e[14]+s[14]*n,t[15]=e[15]+s[15]*n,t}function Nd(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Pd(t,e){var s=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],l=t[6],c=t[7],h=t[8],u=t[9],d=t[10],f=t[11],p=t[12],m=t[13],v=t[14],g=t[15],_=e[0],b=e[1],y=e[2],M=e[3],x=e[4],L=e[5],S=e[6],$=e[7],R=e[8],W=e[9],V=e[10],j=e[11],D=e[12],H=e[13],re=e[14],se=e[15];return Math.abs(s-_)<=xe*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(n-b)<=xe*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-y)<=xe*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(i-M)<=xe*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(a-x)<=xe*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(o-L)<=xe*Math.max(1,Math.abs(o),Math.abs(L))&&Math.abs(l-S)<=xe*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(c-$)<=xe*Math.max(1,Math.abs(c),Math.abs($))&&Math.abs(h-R)<=xe*Math.max(1,Math.abs(h),Math.abs(R))&&Math.abs(u-W)<=xe*Math.max(1,Math.abs(u),Math.abs(W))&&Math.abs(d-V)<=xe*Math.max(1,Math.abs(d),Math.abs(V))&&Math.abs(f-j)<=xe*Math.max(1,Math.abs(f),Math.abs(j))&&Math.abs(p-D)<=xe*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(m-H)<=xe*Math.max(1,Math.abs(m),Math.abs(H))&&Math.abs(v-re)<=xe*Math.max(1,Math.abs(v),Math.abs(re))&&Math.abs(g-se)<=xe*Math.max(1,Math.abs(g),Math.abs(se))}var Ld=Ko,Td=rl,Id=Object.freeze(Object.defineProperty({__proto__:null,create:Bf,clone:Uf,copy:Wf,fromValues:qf,set:Hf,identity:Zo,transpose:Xf,invert:Gf,adjoint:Yf,determinant:Jf,multiply:Ko,translate:Qf,scale:Zf,rotate:Kf,rotateX:ed,rotateY:td,rotateZ:sd,fromTranslation:nd,fromScaling:rd,fromRotation:id,fromXRotation:ad,fromYRotation:od,fromZRotation:ld,fromRotationTranslation:el,fromQuat2:cd,getTranslation:hd,getScaling:tl,getRotation:ud,fromRotationTranslationScale:fd,fromRotationTranslationScaleOrigin:dd,fromQuat:pd,frustum:md,perspectiveNO:sl,perspective:vd,perspectiveZO:gd,perspectiveFromFieldOfView:yd,orthoNO:nl,ortho:wd,orthoZO:bd,lookAt:_d,targetTo:xd,str:Md,frob:Ed,add:kd,subtract:rl,multiplyScalar:Ad,multiplyScalarAndAdd:Sd,exactEquals:Nd,equals:Pd,mul:Ld,sub:Td},Symbol.toStringTag,{value:"Module"}));function il(){var t=new ut(3);return ut!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Dd(t){var e=new ut(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function al(t){var e=t[0],s=t[1],n=t[2];return Math.hypot(e,s,n)}function jd(t,e,s){var n=new ut(3);return n[0]=t,n[1]=e,n[2]=s,n}function Od(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Vd(t,e,s,n){return t[0]=e,t[1]=s,t[2]=n,t}function Cd(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t}function ol(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t[2]=e[2]-s[2],t}function ll(t,e,s){return t[0]=e[0]*s[0],t[1]=e[1]*s[1],t[2]=e[2]*s[2],t}function cl(t,e,s){return t[0]=e[0]/s[0],t[1]=e[1]/s[1],t[2]=e[2]/s[2],t}function zd(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function $d(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function Rd(t,e,s){return t[0]=Math.min(e[0],s[0]),t[1]=Math.min(e[1],s[1]),t[2]=Math.min(e[2],s[2]),t}function Fd(t,e,s){return t[0]=Math.max(e[0],s[0]),t[1]=Math.max(e[1],s[1]),t[2]=Math.max(e[2],s[2]),t}function Bd(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function Ud(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function Wd(t,e,s,n){return t[0]=e[0]+s[0]*n,t[1]=e[1]+s[1]*n,t[2]=e[2]+s[2]*n,t}function hl(t,e){var s=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return Math.hypot(s,n,r)}function ul(t,e){var s=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return s*s+n*n+r*r}function fl(t){var e=t[0],s=t[1],n=t[2];return e*e+s*s+n*n}function qd(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Hd(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Xd(t,e){var s=e[0],n=e[1],r=e[2],i=s*s+n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function dl(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Gd(t,e,s){var n=e[0],r=e[1],i=e[2],a=s[0],o=s[1],l=s[2];return t[0]=r*l-i*o,t[1]=i*a-n*l,t[2]=n*o-r*a,t}function Yd(t,e,s,n){var r=e[0],i=e[1],a=e[2];return t[0]=r+n*(s[0]-r),t[1]=i+n*(s[1]-i),t[2]=a+n*(s[2]-a),t}function Jd(t,e,s,n,r,i){var a=i*i,o=a*(2*i-3)+1,l=a*(i-2)+i,c=a*(i-1),h=a*(3-2*i);return t[0]=e[0]*o+s[0]*l+n[0]*c+r[0]*h,t[1]=e[1]*o+s[1]*l+n[1]*c+r[1]*h,t[2]=e[2]*o+s[2]*l+n[2]*c+r[2]*h,t}function Qd(t,e,s,n,r,i){var a=1-i,o=a*a,l=i*i,c=o*a,h=3*i*o,u=3*l*a,d=l*i;return t[0]=e[0]*c+s[0]*h+n[0]*u+r[0]*d,t[1]=e[1]*c+s[1]*h+n[1]*u+r[1]*d,t[2]=e[2]*c+s[2]*h+n[2]*u+r[2]*d,t}function Zd(t,e){e=e||1;var s=fa()*2*Math.PI,n=fa()*2-1,r=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(s)*r,t[1]=Math.sin(s)*r,t[2]=n*e,t}function Kd(t,e,s){var n=e[0],r=e[1],i=e[2],a=s[3]*n+s[7]*r+s[11]*i+s[15];return a=a||1,t[0]=(s[0]*n+s[4]*r+s[8]*i+s[12])/a,t[1]=(s[1]*n+s[5]*r+s[9]*i+s[13])/a,t[2]=(s[2]*n+s[6]*r+s[10]*i+s[14])/a,t}function e0(t,e,s){var n=e[0],r=e[1],i=e[2];return t[0]=n*s[0]+r*s[3]+i*s[6],t[1]=n*s[1]+r*s[4]+i*s[7],t[2]=n*s[2]+r*s[5]+i*s[8],t}function t0(t,e,s){var n=s[0],r=s[1],i=s[2],a=s[3],o=e[0],l=e[1],c=e[2],h=r*c-i*l,u=i*o-n*c,d=n*l-r*o,f=r*d-i*u,p=i*h-n*d,m=n*u-r*h,v=a*2;return h*=v,u*=v,d*=v,f*=2,p*=2,m*=2,t[0]=o+h+f,t[1]=l+u+p,t[2]=c+d+m,t}function s0(t,e,s,n){var r=[],i=[];return r[0]=e[0]-s[0],r[1]=e[1]-s[1],r[2]=e[2]-s[2],i[0]=r[0],i[1]=r[1]*Math.cos(n)-r[2]*Math.sin(n),i[2]=r[1]*Math.sin(n)+r[2]*Math.cos(n),t[0]=i[0]+s[0],t[1]=i[1]+s[1],t[2]=i[2]+s[2],t}function n0(t,e,s,n){var r=[],i=[];return r[0]=e[0]-s[0],r[1]=e[1]-s[1],r[2]=e[2]-s[2],i[0]=r[2]*Math.sin(n)+r[0]*Math.cos(n),i[1]=r[1],i[2]=r[2]*Math.cos(n)-r[0]*Math.sin(n),t[0]=i[0]+s[0],t[1]=i[1]+s[1],t[2]=i[2]+s[2],t}function r0(t,e,s,n){var r=[],i=[];return r[0]=e[0]-s[0],r[1]=e[1]-s[1],r[2]=e[2]-s[2],i[0]=r[0]*Math.cos(n)-r[1]*Math.sin(n),i[1]=r[0]*Math.sin(n)+r[1]*Math.cos(n),i[2]=r[2],t[0]=i[0]+s[0],t[1]=i[1]+s[1],t[2]=i[2]+s[2],t}function i0(t,e){var s=t[0],n=t[1],r=t[2],i=e[0],a=e[1],o=e[2],l=Math.sqrt(s*s+n*n+r*r),c=Math.sqrt(i*i+a*a+o*o),h=l*c,u=h&&dl(t,e)/h;return Math.acos(Math.min(Math.max(u,-1),1))}function a0(t){return t[0]=0,t[1]=0,t[2]=0,t}function o0(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function l0(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function c0(t,e){var s=t[0],n=t[1],r=t[2],i=e[0],a=e[1],o=e[2];return Math.abs(s-i)<=xe*Math.max(1,Math.abs(s),Math.abs(i))&&Math.abs(n-a)<=xe*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=xe*Math.max(1,Math.abs(r),Math.abs(o))}var h0=ol,u0=ll,f0=cl,d0=hl,p0=ul,m0=al,v0=fl,g0=function(){var t=il();return function(e,s,n,r,i,a){var o,l;for(s||(s=3),n||(n=0),r?l=Math.min(r*s+n,e.length):l=e.length,o=n;o<l;o+=s)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],i(t,t,a),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2];return e}}(),y0=Object.freeze(Object.defineProperty({__proto__:null,create:il,clone:Dd,length:al,fromValues:jd,copy:Od,set:Vd,add:Cd,subtract:ol,multiply:ll,divide:cl,ceil:zd,floor:$d,min:Rd,max:Fd,round:Bd,scale:Ud,scaleAndAdd:Wd,distance:hl,squaredDistance:ul,squaredLength:fl,negate:qd,inverse:Hd,normalize:Xd,dot:dl,cross:Gd,lerp:Yd,hermite:Jd,bezier:Qd,random:Zd,transformMat4:Kd,transformMat3:e0,transformQuat:t0,rotateX:s0,rotateY:n0,rotateZ:r0,angle:i0,zero:a0,str:o0,exactEquals:l0,equals:c0,sub:h0,mul:u0,div:f0,dist:d0,sqrDist:p0,len:m0,sqrLen:v0,forEach:g0},Symbol.toStringTag,{value:"Module"}));function yt(t,e,s){for(let n=0;n<s.length;n++)t[e+n]=s[n]}const{identity:w0,rotate:b0}=Id,{add:_0,cross:x0,dot:M0,mul:E0,normalize:k0,subtract:ln,transformMat4:A0}=y0;function S0(t){const e=2*Math.PI/t;return new Array(t).fill(null).map((s,n)=>[Math.cos(e*n),Math.sin(e*n)])}function N0(t,e=1){const s=new Uint16Array(t*(Math.max(e,1)-1)*6);for(let n=0;n<e;n++){const r=n*t*6,i=n*t;for(let a=0;a<t;a++){const o=r+a*6,l=i+a;a===t-1?(s[o+0]=l+1,s[o+1]=l-t+1,s[o+2]=l,s[o+3]=l,s[o+4]=l+t,s[o+5]=l+1):(s[o+0]=l+t+1,s[o+1]=l+1,s[o+2]=l,s[o+3]=l,s[o+4]=l+t,s[o+5]=l+t+1)}}return s}function P0(t,e=3){const s=[],n=[],r=[],i=t.length/4,a=i*e,o=new Float32Array(a*3),l=new Float32Array(a*3),c=new Float32Array(a*2),h=N0(e,i),u=S0(e);for(let d=0;d<i;d++){const f=[0,0,1],p=t.slice(d*4,d*4+3),m=t.slice((d+1)*4,(d+1)*4+3),v=t.slice((d-1)*4,(d-1)*4+3),g=t[d*4+3];d===0?ln(n,p,m):d===i-1?ln(n,v,p):ln(n,v,m),k0(n,n),x0(r,f,n);const _=Math.acos(M0(f,n));w0(s),b0(s,s,_,r);for(let b=0;b<e;b++){const y=[...u[b],0];E0(y,y,[g,g,1]),A0(y,y,s);const M=d*e*3+b*3;_0(y,y,p),yt(o,M,y),yt(c,d*e*2+b*2,[b/e,d/i])}}return{position:o,normal:l,uv:c,index:h}}function es(t,e,s){return t*(1-s)+e*s}function L0(t,e=0){const s=(t.length-1)*e,n=Math.floor(s),r=Math.ceil(s);return es(t[r],t[n],r-s)}function pl(t,e){const s=t.length/4*Math.max(Math.min(e,.9999),1e-4),n=Math.max(Math.floor(s),0),r=Math.min(Math.ceil(s),t.length/4-1),i=r-s;return[es(t[r*4+0],t[n*4+0],i),es(t[r*4+1],t[n*4+1],i),es(t[r*4+2],t[n*4+2],i),es(t[r*4+3],t[n*4+3],i)]}function pr(t,e){const s=t.length/4*Math.max(Math.min(e,.9999),1e-4),n=Math.max(Math.floor(s),0),r=Math.min(Math.ceil(s),t.length/4-1);return[t[r*4+0]-t[n*4+0],t[r*4+1]-t[n*4+1],t[r*4+2]-t[n*4+2],t[r*4+3]+t[n*4+3]/2]}function Rs(...t){const e=t.filter(f=>!!f);if(e.length===1)return e[0];let s=0,n=0,r=0;for(const{position:f,index:p,uv:m}of e)s+=f.length,n+=m.length,r+=p.length;const i=new Float32Array(n),a=new Float32Array(s),o=new Float32Array(s),l=r>65536?new Uint32Array(r):new Uint16Array(r);let c=0,h=0,u=0,d=0;for(let f=0;f<e.length;f++){const p=e[f].normal,m=p.length;for(let x=0;x<m;x++)o[h+x]=p[x];h+=m;const v=e[f].uv,g=v.length;for(let x=0;x<g;x++)i[u+x]=v[x];u+=g;const _=e[f].index,b=_.length;for(let x=0;x<b;x++)l[x+d]=_[x]+c/3;d+=b;const y=e[f].position,M=y.length;for(let x=0;x<M;x++)a[c+x]=y[x];c+=M}return{position:a,normal:o,uv:i,index:l}}var T0=(t,e)=>Math.sqrt(t*t+e*e),I0=(t,e,s)=>Math.sqrt(t*t+e*e+s*s),cs={},Ys={},ds={};Object.defineProperty(ds,"__esModule",{value:!0});function D0(t){var e=new Uint32Array(1);return e[0]=t[0]*1664525+1013904223,e}ds.default=D0;Object.defineProperty(Ys,"__esModule",{value:!0});Ys.makeNoise2D=void 0;var bs=ds,j0=1/47,Bn=(Math.sqrt(2+1)-1)/2,O0=(1/Math.sqrt(2+1)-1)/2;function da(t,e,s){return{dx:-e-t*Bn,dy:-s-t*Bn,xsb:e,ysb:s}}function V0(t){for(var e=[],s=0;s<Zt.length;s+=4){for(var n=C0[Zt[s]],r=null,i=null,a=0;a<n.length;a+=3)i=da(n[a],n[a+1],n[a+2]),r===null?e[s/4]=i:r.next=i,r=i;i.next=da(Zt[s+1],Zt[s+2],Zt[s+3])}for(var o=[],s=0;s<cn.length;s+=2)o[cn[s]]=e[cn[s+1]];for(var l=new Uint8Array(256),c=new Uint8Array(256),h=new Uint8Array(256),s=0;s<256;s++)h[s]=s;var u=new Uint32Array(1);u[0]=t,u=bs.default(bs.default(bs.default(u)));for(var s=255;s>=0;s--){u=bs.default(u);var d=new Uint32Array(1);d[0]=(u[0]+31)%(s+1),d[0]<0&&(d[0]+=s+1),l[s]=h[d[0]],c[s]=l[s]&14,h[d[0]]=h[s]}return function(f,p){for(var m=(f+p)*O0,v=f+m,g=p+m,_=Math.floor(v),b=Math.floor(g),y=(_+b)*Bn,M=f-(_+y),x=p-(b+y),L=v-_,S=g-b,$=L+S,R=L-S+1|$<<1|$+S<<2|$+L<<4,W=0,V=o[R];V!==void 0;V=V.next){var j=M+V.dx,D=x+V.dy,H=2-j*j-D*D;if(H>0){var re=_+V.xsb,se=b+V.ysb,he=l[re&255],ue=c[he+se&255],we=pa[ue]*j+pa[ue+1]*D;W+=H*H*H*H*we}}return W*j0}}Ys.makeNoise2D=V0;var C0=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],pa=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],cn=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],Zt=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0],Js={};Object.defineProperty(Js,"__esModule",{value:!0});Js.makeNoise3D=void 0;var _s=ds,z0=1/103,Is=(Math.sqrt(3+1)-1)/3,$0=(1/Math.sqrt(3+1)-1)/3;function hn(t,e,s,n){return{dx:-e-t*Is,dy:-s-t*Is,dz:-n-t*Is,xsb:e,ysb:s,zsb:n}}function R0(t){for(var e=[],s=0;s<ot.length;s+=9){for(var n=F0[ot[s]],r=null,i=null,a=0;a<n.length;a+=4)i=hn(n[a],n[a+1],n[a+2],n[a+3]),r===null?e[s/9]=i:r.next=i,r=i;i.next=hn(ot[s+1],ot[s+2],ot[s+3],ot[s+4]),i.next.next=hn(ot[s+5],ot[s+6],ot[s+7],ot[s+8])}for(var o=[],s=0;s<fn.length;s+=2)o[fn[s]]=e[fn[s+1]];for(var l=new Uint8Array(256),c=new Uint8Array(256),h=new Uint8Array(256),s=0;s<256;s++)h[s]=s;var u=new Uint32Array(1);u[0]=t,u=_s.default(_s.default(_s.default(u)));for(var s=255;s>=0;s--){u=_s.default(u);var d=new Uint32Array(1);d[0]=(u[0]+31)%(s+1),d[0]<0&&(d[0]+=s+1),l[s]=h[d[0]],c[s]=l[s]%24*3,h[d[0]]=h[s]}return function(f,p,m){for(var v=(f+p+m)*$0,g=f+v,_=p+v,b=m+v,y=Math.floor(g),M=Math.floor(_),x=Math.floor(b),L=(y+M+x)*Is,S=f-(y+L),$=p-(M+L),R=m-(x+L),W=g-y,V=_-M,j=b-x,D=W+V+j,H=V-j+1|W-V+1<<1|W-j+1<<2|D<<3|D+j<<5|D+V<<7|D+W<<9,re=0,se=o[H];se!==void 0;se=se.next){var he=S+se.dx,ue=$+se.dy,we=R+se.dz,ge=2-he*he-ue*ue-we*we;if(ge>0){var Me=y+se.xsb,Xe=M+se.ysb,$e=x+se.zsb,ze=l[Me&255],be=l[ze+Xe&255],Ee=c[be+$e&255],Te=un[Ee]*he+un[Ee+1]*ue+un[Ee+2]*we;re+=ge*ge*ge*ge*Te}}return re*z0}}Js.makeNoise3D=R0;var F0=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],un=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],fn=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],ot=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0],Qs={};Object.defineProperty(Qs,"__esModule",{value:!0});Qs.makeNoise4D=void 0;var xs=ds,B0=1/30,ts=(Math.sqrt(4+1)-1)/4,U0=(1/Math.sqrt(4+1)-1)/4;function Ms(t,e,s,n,r){return{dx:-e-t*ts,dy:-s-t*ts,dz:-n-t*ts,dw:-r-t*ts,xsb:e,ysb:s,zsb:n,wsb:r}}function W0(t){for(var e=[],s=0;s<De.length;s+=16){for(var n=q0[De[s]],r=null,i=null,a=0;a<n.length;a+=5)i=Ms(n[a],n[a+1],n[a+2],n[a+3],n[a+4]),r===null?e[s/16]=i:r.next=i,r=i;i.next=Ms(De[s+1],De[s+2],De[s+3],De[s+4],De[s+5]),i.next.next=Ms(De[s+6],De[s+7],De[s+8],De[s+9],De[s+10]),i.next.next.next=Ms(De[s+11],De[s+12],De[s+13],De[s+14],De[s+15])}for(var o=[],s=0;s<dn.length;s+=2)o[dn[s]]=e[dn[s+1]];for(var l=new Uint8Array(256),c=new Uint8Array(256),h=new Uint8Array(256),s=0;s<256;s++)h[s]=s;var u=new Uint32Array(1);u[0]=t,u=xs.default(xs.default(xs.default(u)));for(var s=255;s>=0;s--){u=xs.default(u);var d=new Uint32Array(1);d[0]=(u[0]+31)%(s+1),d[0]<0&&(d[0]+=s+1),l[s]=h[d[0]],c[s]=l[s]&252,h[d[0]]=h[s]}return function(f,p,m,v){for(var g=(f+p+m+v)*U0,_=f+g,b=p+g,y=m+g,M=v+g,x=Math.floor(_),L=Math.floor(b),S=Math.floor(y),$=Math.floor(M),R=(x+L+S+$)*ts,W=f-(x+R),V=p-(L+R),j=m-(S+R),D=v-($+R),H=_-x,re=b-L,se=y-S,he=M-$,ue=H+re+se+he,we=se-he+1|re-se+1<<1|re-he+1<<2|H-re+1<<3|H-se+1<<4|H-he+1<<5|ue<<6|ue+he<<8|ue+se<<11|ue+re<<14|ue+H<<17,ge=0,Me=o[we];Me!==void 0;Me=Me.next){var Xe=W+Me.dx,$e=V+Me.dy,ze=j+Me.dz,be=D+Me.dw,Ee=2-Xe*Xe-$e*$e-ze*ze-be*be;if(Ee>0){var Te=x+Me.xsb,it=L+Me.ysb,Ke=S+Me.zsb,qe=$+Me.wsb,Ge=l[Te&255],X=l[Ge+it&255],me=l[X+Ke&255],_e=c[me+qe&255],Ye=Es[_e]*Xe+Es[_e+1]*$e+Es[_e+2]*ze+Es[_e+3]*be;ge+=Ee*Ee*Ee*Ee*Ye}}return ge*B0}}Qs.makeNoise4D=W0;var q0=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],Es=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],dn=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],De=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1];(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.makeNoise4D=t.makeNoise3D=t.makeNoise2D=void 0;var e=Ys;Object.defineProperty(t,"makeNoise2D",{enumerable:!0,get:function(){return e.makeNoise2D}});var s=Js;Object.defineProperty(t,"makeNoise3D",{enumerable:!0,get:function(){return s.makeNoise3D}});var n=Qs;Object.defineProperty(t,"makeNoise4D",{enumerable:!0,get:function(){return n.makeNoise4D}})})(cs);let Lt=0,pn=cs.makeNoise2D(Lt),ma=cs.makeNoise3D(Lt);var Dt={n1d:t=>pn(t,0),n2d:(t,e)=>pn(t,e),n3d:(t,e,s)=>ma(t,e,s),get seed(){return Lt},set seed(t){t!==Lt&&(Lt=t,pn=cs.makeNoise2D(Lt),ma=cs.makeNoise3D(Lt))}},ml=([t,e])=>{const s=T0(t,e);return s===0?[1,0]:[t/s,e/s]},Un=([t,e,s])=>{const n=I0(t,e,s);return[t/n,e/n,s/n]};function H0(t,{offset:e,scale:s,rotation:n,id:r,baseAlpha:i,depth:a}){const o=Math.max(...[e==null?void 0:e.length,s==null?void 0:s.length,n==null?void 0:n.length].filter(u=>!!u)),l=new Float32Array(o),c=new Float32Array(o).fill(1),h=new Float32Array(o);return e!=null&&e.length&&yt(l,0,e),s!=null&&s.length&&yt(c,0,s),n!=null&&n.length&&yt(h,0,n),Re(ye({},t),{id:r,baseAlpha:i,depth:a,offset:l,scale:c,rotation:h})}var Fs=([t,e],s)=>s===0?[t,e]:[t*Math.cos(-s)-e*Math.sin(-s),t*Math.sin(-s)+e*Math.cos(-s)];function Bs(t,e,s){const[n,r,i]=t,[a,o,l]=Un(e),c=Math.cos(s),h=Math.sin(s);return new ie((c+(1-c)*a*a)*n+((1-c)*a*o-l*h)*r+((1-c)*a*l+o*h)*i,((1-c)*a*o+l*h)*n+(c+(1-c)*o*o)*r+((1-c)*o*l-a*h)*i,((1-c)*a*l-o*h)*n+((1-c)*o*l+a*h)*r+(c+(1-c)*l*l)*i)}function mr(t,e){let s=e.normal.length/3;for(let n=0;n<s;n++)e.normal[n*3+0]=e.normal[n*3+0],e.normal[n*3+1]=e.normal[n*3+1],e.normal[n*3+2]=e.normal[n*3+2];return new It(t,{position:{size:3,data:e.position},normal:{size:3,data:e.normal},uv:{size:2,data:e.uv},index:{data:e.index}})}const X0=/^[og]\s*(.+)?/,G0=/^mtllib /,Y0=/^usemtl /,J0=/^usemap /,va=new ie,mn=new ie,ga=new ie,ya=new ie,Qe=new ie,Ct=new Cn;function Q0(){const t={objects:[],object:{smooth:!1},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,s=!1){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=s!==!1;return}this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:s!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1}}},finalize:function(){console.log(this.object)},parseVertexIndex:function(e,s){const n=parseInt(e,10);return(n>=0?n-1:n+s/3)*3},parseNormalIndex:function(e,s){const n=parseInt(e,10);return(n>=0?n-1:n+s/3)*3},parseUVIndex:function(e,s){const n=parseInt(e,10);return(n>=0?n-1:n+s/2)*2},addVertex:function(e,s,n){const r=this.vertices,i=this.object.geometry.vertices;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[s+0],r[s+1],r[s+2]),i.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(e){const s=this.vertices;this.object.geometry.vertices.push(s[e+0],s[e+1],s[e+2])},addVertexLine:function(e){const s=this.vertices;this.object.geometry.vertices.push(s[e+0],s[e+1],s[e+2])},addNormal:function(e,s,n){const r=this.normals,i=this.object.geometry.normals;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[s+0],r[s+1],r[s+2]),i.push(r[n+0],r[n+1],r[n+2])},addFaceNormal:function(e,s,n){const r=this.vertices,i=this.object.geometry.normals;va.fromArray(r,e),mn.fromArray(r,s),ga.fromArray(r,n),Qe.sub(ga,mn),ya.sub(va,mn),Qe.cross(ya),Qe.normalize(),i.push(Qe.x,Qe.y,Qe.z),i.push(Qe.x,Qe.y,Qe.z),i.push(Qe.x,Qe.y,Qe.z)},addColor:function(e,s,n){const r=this.colors,i=this.object.geometry.colors;r[e]!==void 0&&i.push(r[e+0],r[e+1],r[e+2]),r[s]!==void 0&&i.push(r[s+0],r[s+1],r[s+2]),r[n]!==void 0&&i.push(r[n+0],r[n+1],r[n+2])},addUV:function(e,s,n){const r=this.uvs,i=this.object.geometry.uvs;i.push(r[e+0],r[e+1]),i.push(r[s+0],r[s+1]),i.push(r[n+0],r[n+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const s=this.uvs;this.object.geometry.uvs.push(s[e+0],s[e+1])},addFace:function(e,s,n,r,i,a,o,l,c){const h=this.vertices.length;let u=this.parseVertexIndex(e,h),d=this.parseVertexIndex(s,h),f=this.parseVertexIndex(n,h);if(this.addVertex(u,d,f),this.addColor(u,d,f),o!==void 0&&o!==""){const p=this.normals.length;u=this.parseNormalIndex(o,p),d=this.parseNormalIndex(l,p),f=this.parseNormalIndex(c,p),this.addNormal(u,d,f)}else this.addFaceNormal(u,d,f);if(r!==void 0&&r!==""){const p=this.uvs.length;u=this.parseUVIndex(r,p),d=this.parseUVIndex(i,p),f=this.parseUVIndex(a,p),this.addUV(u,d,f),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const s=this.vertices.length;for(let n=0,r=e.length;n<r;n++){const i=this.parseVertexIndex(e[n],s);this.addVertexPoint(i),this.addColor(i)}},addLineGeometry:function(e,s){this.object.geometry.type="Line";const n=this.vertices.length,r=this.uvs.length;for(let i=0,a=e.length;i<a;i++)this.addVertexLine(this.parseVertexIndex(e[i],n));for(let i=0,a=s.length;i<a;i++)this.addUVLine(this.parseUVIndex(s[i],r))}};return t.startObject("",!1),t}var Z0=t=>{const e=Q0();t.indexOf(`\r
`)!==-1&&(t=t.replace(/\r\n/g,`
`)),t.indexOf(`\\
`)!==-1&&(t=t.replace(/\\\n/g,""));const s=t.split(`
`);let n="",r="",i=0,a=[];const o=typeof"".trimLeft=="function";for(let l=0,c=s.length;l<c;l++)if(n=s[l],n=o?n.trimLeft():n.trim(),i=n.length,i!==0&&(r=n.charAt(0),r!=="#")){if(r==="v"){const h=n.split(/\s+/);switch(h[0]){case"v":e.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),h.length>=7?(Ct[0]=parseFloat(h[4]),Ct[1]=parseFloat(h[5]),Ct[2]=parseFloat(h[6]),e.colors.push(Ct.r,Ct.g,Ct.b)):e.colors.push(void 0,void 0,void 0);break;case"vn":e.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));break;case"vt":e.uvs.push(parseFloat(h[1]),parseFloat(h[2]));break}}else if(r==="f"){const u=n.slice(1).trim().split(/\s+/),d=[];for(let p=0,m=u.length;p<m;p++){const v=u[p];if(v.length>0){const g=v.split("/");d.push(g)}}const f=d[0];for(let p=1,m=d.length-1;p<m;p++){const v=d[p],g=d[p+1];e.addFace(f[0],v[0],g[0],f[1],v[1],g[1],f[2],v[2],g[2])}}else if(r==="l"){const h=n.substring(1).trim().split(" ");let u=[];const d=[];if(n.indexOf("/")===-1)u=h;else for(let f=0,p=h.length;f<p;f++){const m=h[f].split("/");m[0]!==""&&u.push(m[0]),m[1]!==""&&d.push(m[1])}e.addLineGeometry(u,d)}else if(r==="p"){const u=n.slice(1).trim().split(" ");e.addPointGeometry(u)}else if((a=X0.exec(n))!==null){const h=(" "+a[0].slice(1).trim()).slice(1);e.startObject(h)}else if(!Y0.test(n))if(G0.test(n))e.materialLibraries.push(n.substring(7).trim());else if(J0.test(n))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(r==="s")if(a=n.split(" "),a.length>1){const h=a[1].trim().toLowerCase();e.object.smooth=h!=="0"&&h!=="off"}else e.object.smooth=!0;else{if(n==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+n+'"')}}e.finalize()};function K0(t){const e=Array.isArray(t)?t:[t];console.log("TOOBJ",e);let s="",n=0,r=0,i=0;const a=[];function o(l){let c=0,h=0,u=0;const{index:d,uv:f,normal:p,position:m}=l;if(d.includes(NaN)&&console.warn("Export will fail, index includes NaN"),f.includes(NaN)&&console.warn("Export will fail, uv includes NaN"),p.includes(NaN)&&console.warn("Export will fail, normal includes NaN"),m.includes(NaN)&&console.warn("Export will fail, position includes NaN"),s+=`o plant
`,m!=null&&m.length)for(let v=0;v<m.length;v+=3){const[g,_,b]=m.slice(v,v+3);s+="v "+g+" "+_+" "+b+`
`}if(f!=null&&f.length)for(let v=0;v<f.length;v+=2){const[g,_]=f.slice(v,v+2);s+="vt "+g+" "+_+`
`}if(p!=null&&p.length)for(let v=0;v<p.length;v+=3){const[g,_,b]=p.slice(v,v+3);s+="vn "+g+" "+_+" "+b+`
`}if(d!=null&&d.length)for(let v=0;v<d.length;v+=3){for(let g=0;g<3;g++){const _=d[v+g]+1;a[g]=n+_+(p||f?"/"+(f?r+_:"")+(p?"/"+(i+_):""):"")}s+="f "+a.join(" ")+`
`}else for(let v=0,g=m.length;v<g;v+=3){for(let _=0;_<3;_++){const b=v+_+1;a[_]=n+b+(p||f?"/"+(f?r+b:"")+(p?"/"+(i+b):""):"")}s+="f "+a.join(" ")+`
`}n+=c,r+=u,i+=h}return e.forEach(l=>o(l)),Z0(s),s}const zt=t=>{console.groupCollapsed(t),console.trace(),console.groupEnd()};function wa(t,e=!1){const s=t.normal.includes(NaN);s&&zt("Normals has NaN");const n=t.index.includes(NaN);n&&zt("Index has NaN");const r=t.position.includes(NaN);r&&zt("Position has NaN");const i=t.uv.includes(NaN);i&&zt("UV has NaN");const a=t.position.length/3;t.position.length!==t.normal.length&&zt("position and normal amount not eqal"),t.uv.length!==a*2&&zt("uv amount not correct, should be "+a*2+" is "+t.uv.length),(s||n||r||i||e)&&console.log("Check",{p:t.position.length,pn:r,n:t.normal.length,nn:s,i:t.index.length,in:n,u:t.uv.length,un:i})}function ep([t,e,s]){return t===0&&s===0?[1,0,0]:[1,1,-((t+e)/s)]}const tp=100,vn=2,ba=1;function sp(t=1,e=12,s=12){const n=360*(Math.PI/180)/s,r=e*s+1,i=(e-1)*s*2+s,a=new Float32Array(r*3),o=new Float32Array(r*3),l=new Float32Array(r*2),c=new Uint16Array(i*3);a[0]=0,a[1]=1-ba,a[2]=0,o[0]=0,o[1]=1,o[2]=0,l[0]=.5,l[1]=.5;const h=new Array(e-1).fill(null).map((d,f,p)=>t+f/(p.length-1)*vn);h.push(tp);const u=h.map(d=>{const f=(Math.max(Math.min(d,t+vn),t)-t)/vn;return Math.sin((f+.5)*Math.PI)/2+.5-ba});for(let d=0;d<e;d++){const f=h[d],p=u[d];for(let m=0;m<s;m++){const v=n*m,g=Math.cos(v)*f,_=p,b=Math.sin(v)*f,M=d*s+m+1;if(a[M*3+0]=g,a[M*3+1]=_,a[M*3+2]=b,o[M*3+0]=0,o[M*3+1]=1,o[M*3+2]=0,l[M*2+0]=g,l[M*2+1]=b,d===0){const x=(M-1)*3;c[x+0]=0,c[x+1]=(m+1)%s+1,c[x+2]=m+1}else if(m===s-1){const x=d*s*6+m*6-s*3;c[x+0]=M,c[x+1]=M+1-s-s,c[x+2]=M+1-s,c[x+3]=M,c[x+4]=M-s,c[x+5]=M+1-s*2}else{const x=d*s*6+m*6-s*3;c[x+0]=M,c[x+1]=M+1-s,c[x+2]=M+1,c[x+3]=M,c[x+4]=M-s,c[x+5]=M+1-s}}}return{position:a,normal:o,uv:l,index:c}}function np(t,{res:e=1,xCurvature:s=.5,yCurvature:n=.2}={}){const r=t.length,i=3+e*2,a=i*r,o=(i-1)*(r-1)*2,l=new Float32Array(a*3),c=new Float32Array(a*3),h=new Float32Array(a*2),u=new Uint16Array(o*3);let d=0,f=0,p=0,m=0;return t.sort((v,g)=>v.y>g.y?1:-1).forEach((v,g)=>{const _=g*i;let b=v.y-f;m+=b*n;let[y,M]=Fs([b,0],m);const x=Math.sin(Math.PI*v.y);for(let L=0;L<i;L++){const S=2-L/(i-1)*2-1,$=Math.sin(Math.abs(S)*Math.PI)*.01;let[R,W]=Fs([1e-4,$*s*x],m),V=(Math.min(Math.max(v.x,.001),.999)-1)*S*.5;if(l[_*3+L*3+0]=V,l[_*3+L*3+1]=W+M+p,l[_*3+L*3+2]=R+y+d,h[_*2+L*2+0]=l[_*3+L*3+0]+1/2,h[_*2+L*2+1]=l[_*3+L*3+2],g!==t.length-1){const j=g*(i-1);u[j*6+L*6+0]=_+L+i,u[j*6+L*6+1]=_+L+1,u[j*6+L*6+2]=_+L+0,u[j*6+L*6+3]=_+L+1,u[j*6+L*6+4]=_+L+i,u[j*6+L*6+5]=_+L+i+1}}p+=M,d+=y,f=v.y}),Jo({position:l,normal:c,index:u,uv:h})}function vl(t,e=8){return P0(t,e)}function rp(t,e=1,s=1,n=0,r=!0){var v,g,_,b,y,M;const i=Array.isArray(s)?1:s,a=((v=s[0])!=null?v:i)*10,o=((g=s[1])!=null?g:i)*10,l=((_=s[2])!=null?_:i)*10,c=Array.isArray(n)?0:n,h=(b=n[0])!=null?b:c,u=(y=n[1])!=null?y:c,d=(M=n[2])!=null?M:c,f=t.length/4,p=[t[0],t[1],t[2]];let m=0;for(let x=0;x<f;x++){const L=x/f;m+=(Math.abs(p[0]-t[x*4+0])+Math.abs(p[1]-t[x*4+1])+Math.abs(p[2]-t[x*4+2]))/3,p[0]=t[x*4+0],p[1]=t[x*4+1],p[2]=t[x*4+2];const S=r?e*L:e,[$,R,W]=t.slice(x*4,x*4+3);t[x*4+0]=$+Dt.n1d(1e3+h+m*a)*S,t[x*4+1]=R+Dt.n1d(2e3+u+m*o)*S,t[x*4+2]=W+Dt.n1d(3e3+d+m*l)*S}return t}function _a(t,[e,s,n]){let r=t.length/4,i=-1;for(;i++<r-1;)t[i*4+0]=t[i*4+0]+e,t[i*4+1]=t[i*4+1]+s,t[i*4+2]=t[i*4+2]+n;return t}function xa(t,e,s=1,n,r=!1){const[i=0,a=0,o=0]=n||t;i&&a&&o&&_a(t,[-i,-a,-o]);const l=t.length/4;let c=-1;for(;c++<l-1;){const h=t.slice(c*4,c*4+3),u=c/l,d=Bs([...h],e,r?s*u:s);t[c*4+0]=d[0],t[c*4+1]=d[1],t[c*4+2]=d[2]}return i&&a&&o&&_a(t,[i,a,o]),t}function ip(t,e=.5,s=2,n=1){const r=Math.max(Math.min(e,1),0),i=Math.floor(Math.max(0,s));if(i<2)return[t];const a=t.length/4,o=Math.floor(a*r),l=Un(pr(t,r)),c=Un(ep(l));return[...o<0?[]:[t.slice(0,o*4)],...new Array(i).fill(null).map((h,u)=>{const d=t.slice((o-2)*4),f=u/s;return xa(d,c,n,void 0,!0),xa(d,l,f*6),d})].filter(h=>h.length>4)}function gl({stems:t=[],instances:e=[]}){return Math.max(...t.map(s=>s.depth),...e.map(s=>s.depth),0)}function ap(t,e=0,s=1,n=-1){return t.filter(r=>{if(n!==-1&&r.depth!==n)return!0;let i=r.baseAlpha.filter(u=>u>=e&&u<=s).length;if(!i)return!1;if(i===r.baseAlpha.length)return!0;const a=new Float32Array(i*3),o=new Float32Array(i*3),l=new Float32Array(i*3),c=new Float32Array(i);let h=0;for(let u=0;u<r.baseAlpha.length;u++)r.baseAlpha[u]>=e&&r.baseAlpha[u]<=s&&(yt(a,h*3,r.scale.slice(u*3,u*3+3)),yt(o,h*3,r.offset.slice(u*3,u*3+3)),yt(l,h*3,r.rotation.slice(u*3,u*3+3)),c[h]=r.baseAlpha[u],h++);return r.baseAlpha=c,r.offset=o,r.rotation=l,r.scale=a,!0})}var op={title:"Branches",type:"branches",outputs:["plant"],parameters:{input:{type:"plant",label:"plant",external:!0,required:!0},length:{type:"number",min:0,max:3,step:.05,value:.8},thiccness:{type:"number",min:0,max:1,step:.01,value:.8},offsetSingle:{type:"number",min:0,max:1,step:.01,value:.5},lowestBranch:{type:"number",min:0,max:1,step:.01,value:.2},amount:{type:"number",min:0,max:64,value:10}},computeStem(t,e){if(!t.input)return{stems:[]};const s=t.input(),n=e.getSetting("stemResY"),r=gl(s),i=s.stems.map(a=>{const o=[];if(r!==a.depth)return[];const l=t.amount(),c=t.lowestBranch();for(let h=0;h<l;h++){const u=h/l,d=t.length(u)*(1-u),f=t.thiccness(u),p=t.offsetSingle(u),m=h%2===0;let v=c+(1-c)*u;v=Math.min(v-1/l*p*(m?-1:1),1);const[g,,_]=pr(a.skeleton,v),b=ml([g,_]),[y,M]=Fs(b,m?-Math.PI/2:Math.PI/2),[x,L,S,$]=pl(a.skeleton,v),R=Math.max(Math.floor(n),4),W=new Float32Array(R*4);for(let V=0;V<R*4;V++){const j=V/R;W[V*4+0]=x+y*j*d,W[V*4+1]=L,W[V*4+2]=S+M*j*d,W[V*4+3]=$*f*(1-j)}o.push({skeleton:W,id:a.id+"-"+h,baseAlpha:v,depth:a.depth+1})}return o}).flat();return{instances:s.instances,stems:[...s.stems,...i]}}},lp={title:"Random",type:"random",outputs:["number"],parameters:{min:{type:"number",value:0,min:0,max:1,step:.05},max:{type:"number",value:1,min:0,max:1,step:.05}},computeValue(t,e,s){const n=t.max(),r=t.min();return n?r+e.n1dn(200+s*1e3)*Math.abs(n-r):0}},cp={title:"Curve",type:"curve",outputs:["number"],parameters:{value:{type:"curve",internal:!0,label:!1,value:[{x:0,y:1,pinned:!0},{x:1,y:0,pinned:!0}]}},computeValue(t,e,s){const n=Th(t.value).map(r=>r.y);return L0(n,1-s)}},hp={title:"Gravity",type:"gravity",outputs:["plant"],parameters:{input:{type:"plant",required:!0,external:!0},type:{internal:!0,type:"select",values:["simple","verlet","test"],value:"simple"},strength:{type:"number",min:0,max:2,step:.05,value:1}},computeStem(t){const{input:e,type:s,strength:n}=t,{stems:r}=e(),i=Math.max(...r.map(a=>a.depth));return s==="simple"&&r.forEach(({skeleton:a,depth:o},l)=>{if(o!==i)return;const c=a.length/4,h=n(l/r.length);for(let u=1;u<c;u++){const d=u/c,f=a[u*4+1];a[u*4+1]=f-f*d*d*d*h}return a}),s==="test"&&r.forEach(({skeleton:a,depth:o})=>{if(o!==i)return;const l=a.length/4;for(let c=1;c<l;c++){const h=c/l,u=n(h),d=a[c*4+0],f=a[c*4+1],p=a[c*4+2],m=a[(c-1)*4+0],v=a[(c-1)*4+1],g=a[(c-1)*4+2],_=m-d,b=v-f,y=v-p,[M,x]=Fs([_,y],Math.PI/2);for(let L=c;L<l;L++){const S=a[L*4+0],$=a[L*4+1],R=a[L*4+2],W=S-m,V=$-v,j=R-g;let[D,H,re]=Bs([W,V,j],[M,b,x],u*h);const se=D+m,he=H+v,ue=re+g;a[L*4+0]=se,a[L*4+1]=he,a[L*4+2]=ue}}return a}),s==="verlet"&&r.forEach(({skeleton:a})=>{const o=a.length/4;for(let l=1;l<o;l++){const c=a[l*4+0],h=a[l*4+1],u=a[l*4+2],d=new ie(5,0,0).cross(new ie(c,h,u),new ie(0,1,0)),f=l/o,p=n(f);for(let m=l;m<o;m++){const v=Bs([c,h,u],d,f*p);a[m*4+0]=v[0],a[m*4+1]=v[1],a[m*4+2]=v[2]}}return a}),{stems:r}},computeGeometry(t){return t.input()}};const gn=Le("nodes.join");var up={title:"Join",type:"join",outputs:["plant"],parameters:{inputA:{type:"plant",label:"plant",required:!0,external:!0},inputB:{type:"plant",label:"plant",required:!0,external:!0}},computeStem(t,e){gn("compute skeleton",t,e);const{inputA:s,inputB:n}=t;if(!s||!n)return s?s():n();const{stems:r}=s(),{stems:i}=n();return gn(r,i),{stems:[...r,...i]}},computeGeometry(t){const{inputA:e,inputB:s}=t;if(!e||!s)return e?e():s();const{geometry:n,instances:r}=e(),{geometry:i,instances:a}=s(),o=Rs(n,i),l=[];return r&&l.push(r),a&&l.push(a),gn("compute geometry",{geometryA:n,geometryB:i,result:o}),{geometry:o,instances:l}}};const fp=[{x:.8,y:1,pinned:!0},{x:.62,y:.84,pinned:!1},{x:.54,y:.63,pinned:!1},{x:.38,y:.41,pinned:!0},{x:.44,y:.23,pinned:!1},{x:.64,y:.12,pinned:!1},{x:.98,y:.02,pinned:!0}];var dp={title:"Leaf",type:"leaf",outputs:["plant"],parameters:{input:{type:"plant",required:!0,external:!0},size:{type:"number",min:0,max:3,step:.05,value:.2},shape:{type:"shape",external:!0,value:fp},lowestLeaf:{type:"number",min:0,max:1,step:.01,value:.5},curvature:{external:!0,type:"vec2",value:{x:.5,y:.2}},amount:{type:"number",min:0,max:20,value:10}},computeStem(t){const e=t.input(),s=gl(e),n=e.stems.map((r,i)=>{const a=i/e.stems.length;if(r.depth!==s)return;const o=t.amount(a);if(!o)return;const l=new Float32Array(o*3),c=new Float32Array(o*3),h=new Float32Array(o*3),u=new Float32Array(o);for(let d=0;d<o;d++){const f=d/(o-1),p=t.size(1-f),m=t.lowestLeaf(f),v=m+(1-m)*f-.001;u[d]=v;const[g,_,b]=pl(r.skeleton,v),[y,M,x]=pr(r.skeleton,v),L=ml([y,x]),S=Math.atan2(-L[0],L[1]);l[d*3+0]=g,l[d*3+1]=_,l[d*3+2]=b,c[d*3+0]=p,c[d*3+1]=p,c[d*3+2]=p,h[d*3+0]=0,h[d*3+1]=S-Math.PI/2*(d%2===0?-1:1),h[d*3+2]=0}return{offset:l,scale:c,rotation:h,id:r.id+"-"+i,baseAlpha:u,depth:r.depth}}).filter(r=>!!r);return e.instances&&n.push(...e.instances),{stems:e.stems,instances:n}},computeGeometry(t,e,s){const{shape:n,input:r,curvature:i}=t,{instances:a}=e,o=i(),l=np(n(),{res:s.getSetting("leafRes")||2,xCurvature:o.x,yCurvature:o.y});return{geometry:r().geometry,instances:a.map(c=>H0(l,c))}}},pp={title:"Math",type:"math",outputs:["number"],parameters:{mode:{type:"select",internal:!0,label:!1,value:"add",values:["add","multiply","subtract"]},a:{type:"number",value:0,label:!1},b:{type:"number",value:0,label:!1}},computeValue(t,e,s){const{mode:n}=t,r=t.a(s),i=t.b(s);switch(n){case"multiply":return r*i;case"subtract":return r-i;default:return r+i}}};const mp=Le("nodes.noise");var vp={title:"Noise",type:"noise",outputs:["plant"],parameters:{input:{type:"plant",label:"plant",external:!0,required:!0},size:{type:"number",min:0,max:2,step:.05,value:1},strength:{type:"number",min:0,max:2,step:.01,value:.5}},computeStem(t){mp("computeSkeleton",t);const{stems:e}=t.input(),s=t.size(),n=t.strength(),r=Math.max(...e.map(i=>i.depth));return e.forEach((i,a)=>{i.depth===r&&rp(i.skeleton,n,s,a*200)}),{stems:e}},computeGeometry(t,e,s){var a;const n=s.getSetting("stemResX"),r=(a=t==null?void 0:t.input)==null?void 0:a.call(t),{stems:i}=e;return{geometry:Rs(r?r.geometry:null,...i.map(({skeleton:o})=>vl(o,n)))}}},gp={title:"Output",type:"output",outputs:[],parameters:{input:{type:"plant",required:!0,label:"plant",external:!0}}},yp={title:"Parameter",type:"parameter",outputs:["number"],parameters:{value:{type:"number",inputType:"float",value:0},variation:{type:"number",value:0,min:0,max:1,step:.05}},computeValue(t,e,s=1){const n=t.value(),r=t.variation();return r?n+e.n1d(200*s)*r*Math.max(n,1):n}};const wp=t=>t==="x"?[1,0,0]:t==="z"?[0,0,1]:[0,1,0];var bp={title:"Rotate",type:"rotate",outputs:["plant"],parameters:{input:{type:"plant",required:!0,external:!0},axis:{type:"select",internal:!0,label:!1,inputType:"tab",values:["x","y","z"],value:"x"},spread:{internal:!0,type:"boolean",value:!0},angle:{type:"number",min:0,max:Math.PI*2,step:.05,value:0}},computeStem(t){const{input:e,axis:s,spread:n}=t,r=e(),i=r.stems,a=wp(s),{depth:o}=i[i.length-1];return i.forEach((l,c)=>{if(l.depth!==o)return;const h=l.skeleton,u=l.skeleton.length/4,d=h[0],f=h[1],p=h[2],m=c/i.length,v=t.angle(m)*(n?m:1);for(let g=1;g<u;g++){let _=h[g*4+0],b=h[g*4+1],y=h[g*4+2];_-=d,b-=f,y-=p,[_,b,y]=Bs([_,b,y],a,v),_+=d,b+=f,y+=p,h[g*4+0]=_,h[g*4+1]=b,h[g*4+2]=y}}),Re(ye({},r),{stems:i})}},_p={title:"Shape",type:"shape",outputs:["shape"],parameters:{value:{type:"shape",internal:!0,label:!1,value:[{x:1,y:0,pinned:!0},{x:.5,y:.5,pinned:!0},{x:1,y:1,pinned:!0}]}},computeValue(t){return t.value}},xp={title:"Slider",type:"slider",outputs:["number"],parameters:{value:{type:"number",label:!1,internal:!0,min:0,max:1,step:.01,value:0}},computeValue(t){return t.value}};const Mp=Le("nodes.stem");var Ep={title:"Stem",type:"stem",outputs:["plant"],parameters:{origin:{type:"vec3",external:!0,value:{x:0,y:0,z:0}},height:{type:"number",min:0,max:5,step:.05,value:2},thiccness:{type:"number",min:0,max:.2,step:.01,value:.06},amount:{type:"number",min:0,max:20,value:1}},computeStem(t,e){Mp("computeSkeleton",t);const s=t.amount(),n=e.getSetting("stemResY"),r=[];for(let i=0;i<s;i++){const{x:a,y:o,z:l}=t.origin(i),c=t.height(),h=new Float32Array(n*4);for(let u=0;u<n;u++){const d=u/n,f=t.thiccness(d)*(1-d),p=a,m=o+d*c,v=l;h[u*4+0]=p,h[u*4+1]=m,h[u*4+2]=v,h[u*4+3]=f}r.push({depth:0,skeleton:h,id:"stem-"+e.getId(),baseAlpha:0})}return{stems:r}}},kp={title:"Vec2",type:"vec2",outputs:["vec2"],parameters:{x:{label:!1,type:"number",value:0,defaultValue:0},y:{label:!1,type:"number",value:0,defaultValue:0}}},Ap={title:"Vec3",type:"vec3",outputs:["vec3"],parameters:{x:{label:!1,type:"number",value:0,defaultValue:0},y:{label:!1,type:"number",value:0,defaultValue:0},z:{label:!1,type:"number",value:0,defaultValue:0}}},Sp={title:"Vec3Length",type:"vec3length",outputs:["number"],parameters:{vec:{type:"vec3",label:!1,value:{x:0,y:0,z:0}}},computeValue(t){const e=t.vec();return e?Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2)+Math.pow(e.z,2)):0}},Np={title:"Split",type:"split",outputs:["plant"],parameters:{input:{type:"plant",label:"plant",required:!0,external:!0},height:{type:"number",min:0,max:1,step:.05,value:.7},angle:{type:"number",min:0,max:2,step:.01,value:.5},amount:{type:"number",min:2,max:20,value:2}},computeStem(t){const e=t.height(),s=t.angle(),n=t.amount(),r=t.input(),i=Math.max(...r.stems.map(o=>o.depth)),a=r.stems.map(o=>o.depth===i?ip(o.skeleton,e,n,s).map((c,h)=>({skeleton:c,id:o.id,baseAlpha:e,depth:o.depth+(h===0?0:1)})):o).flat().filter(o=>!!o);return r.instances&&(r.instances=ap(r.instances,0,e,i)),{stems:a,instances:r.instances}}},Pp={title:"Number",type:"number",outputs:["number"],parameters:{value:{type:"number",internal:!0,label:!1,value:0}},computeValue({value:t=0}){return t}},Lp=Object.freeze(Object.defineProperty({__proto__:null,Branch:op,Random:lp,Curve:cp,Gravity:hp,Join:up,Leaf:dp,Math:pp,Noise:vp,Output:gp,Parameter:yp,Rotate:bp,Shape:_p,Slider:xp,Stem:Ep,Vec2:kp,Vec3:Ap,VecLength:Sp,Split:Np,Number:Pp},Symbol.toStringTag,{value:"Module"})),yl=Object.values(Lp);const qt=new Map;for(const t of yl)t.computeStem&&(t.computeStem=en(t.computeStem)),t.computeGeometry&&(t.computeGeometry=en(t.computeGeometry)),t.computeValue&&(t.computeValue=en(t.computeValue)),qt.set(t.type,t);let Ma="",yn,wn=2;const Tp=t=>{let e=0;return Dt.seed=0,{_id:"",getId(){return this._id},n1d(s){return Dt.n1d(wn++*s)},n1dn(s){return 1+Dt.n1d(wn++*s)/2},getSetting(s){return t[s]},get settings(){return t},get seed(){return e},refresh(){wn=2,t!=null&&t.useRandomSeed&&(e=Math.floor(Math.random()*1e5),Dt.seed=e)}}};var Ip=t=>{const e=JSON.stringify(t);return e!==Ma&&(Ma=e,yn=Tp(t)),yn.refresh(),yn};function Dp({nodes:t},e){const s=Ip(e),n=new Map,r=new Map,i=u=>{var d;return(d=r.get(u))!=null?d:[]},a=u=>{var d;return(d=n.get(u))!=null?d:[]};let o=[];for(const{attributes:u,state:d}of t){const f=qt.get(u.type);if(!f)return console.log("Existing node types: ",{nodeMap:qt}),{errors:["Missing NodeType "+u.type]};o.push({attributes:u,state:d,exec:f,type:u.type,id:u.id,level:-1,results:[]})}let l;if(o.forEach(u=>{n.set(u.id,u),!l&&u.type==="output"&&(l=u,l.level=0),u.attributes.refs.forEach(d=>{r.has(d.id)?r.set(d.id,[...r.get(d.id),{n:u,in:d.in,out:d.out}]):r.set(d.id,[{n:u,in:d.in,out:d.out}])})}),!l)return{errors:["Missing output node"]};function c(u){if(u!=null&&u.buckets)return u.buckets;let d=[u],f=[u];for(;d.length;){const m=d.shift(),v=i(m.id);if(v!=null&&v.length)for(const{n:g}of v)g.level=m.level+1,f.includes(g)||f.push(g),d.push(g)}const p=[];for(const m of f)p[m.level]?p[m.level].push(m):p[m.level]=[m];return u.buckets=p,p}function h(u){var p,m,v,g;if("parameters"in u)return u.parameters;let d={};const f=qt.get(u.type);for(const _ of i(u.id)){const b=_.n;b.exec.outputs[0]==="plant"?d[_.in]=()=>_.n.results[0]:(p=b.exec)!=null&&p.computeValue?d[_.in]=(y=1)=>{const M=h(_.n);return b.exec.computeValue(M,s,y)}:d[_.in]=(y=1)=>{const M={},x=h(_.n);return Object.keys(x).forEach(S=>{M[S]=x[S](y)}),M}}for(const _ of Object.keys(f.parameters))if((m=f.parameters[_])!=null&&m.internal)d[_]=u.state[_];else if(d[_]===void 0){if((v=f.parameters[_])!=null&&v.required&&d[_]===void 0)return{errors:["Missing Input ["+(((g=f.parameters[_])==null?void 0:g.label)||_)+"] in "+f.type]};d[_]=()=>u.state[_]}return u.parameters=d,d}return{nodes:o,outputNode:l,getNodeRef:i,getNode:a,getBucketsForNode:c,constructParametersForNode:h,ctx:s}}async function jp(t,e){var c,h;const s=Dp(t,e);if(s.errors)return{errors:s.errors};const n=s.ctx,r=s.getBucketsForNode(s.outputNode);for(const u of r.reverse())for(const d of u){const f=qt.get(d.type);if(f){let p=s.constructParametersForNode(d);if(p!=null&&p.errors)return{errors:p.errors};if(f!=null&&f.computeStem){n._id=d.id;const m=f.computeStem(p,n);m.stems.find(v=>v.skeleton.includes(NaN))&&(console.warn("Node "+f.type+" produced NaN in skeleton"),console.log({result:m})),d.results=Array.isArray(m)?m:[m]}if(f!=null&&f.computeGeometry){const m=f.computeGeometry(p,d.results[0],n);d.results[0]=ye(ye({},d.results[0]),m)}}else console.warn("Missing Type",d.type),console.log(qt)}if(!((h=(c=s==null?void 0:s.outputNode)==null?void 0:c.parameters)!=null&&h.input))return{errors:["Missing input connection to output node"]};const i=s.outputNode.parameters.input();if(!i)return{errors:["DUnno?"]};const{stems:a,instances:o}=i;let l=Rs(...a.map(u=>vl(u.skeleton,n.getSetting("stemResX"))));if(o){wa(l);const u=o==null?void 0:o.map(d=>Qo(d)).flat();l=Rs(l,...u),wa(l)}return{stems:a,geometry:Jo(l)}}function Op(){return new Worker("/_app/assets/worker.d0c2ede2.js",{type:"module"})}const wl=Symbol("Comlink.proxy"),Vp=Symbol("Comlink.endpoint"),Cp=Symbol("Comlink.releaseProxy"),Wn=Symbol("Comlink.thrown"),bl=t=>typeof t=="object"&&t!==null||typeof t=="function",zp={canHandle:t=>bl(t)&&t[wl],serialize(t){const{port1:e,port2:s}=new MessageChannel;return xl(t,e),[s,[s]]},deserialize(t){return t.start(),El(t)}},$p={canHandle:t=>bl(t)&&Wn in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},_l=new Map([["proxy",zp],["throw",$p]]);function xl(t,e=self){e.addEventListener("message",function s(n){if(!n||!n.data)return;const{id:r,type:i,path:a}=Object.assign({path:[]},n.data),o=(n.data.argumentList||[]).map(Tt);let l;try{const c=a.slice(0,-1).reduce((u,d)=>u[d],t),h=a.reduce((u,d)=>u[d],t);switch(i){case"GET":l=h;break;case"SET":c[a.slice(-1)[0]]=Tt(n.data.value),l=!0;break;case"APPLY":l=h.apply(c,o);break;case"CONSTRUCT":{const u=new h(...o);l=Up(u)}break;case"ENDPOINT":{const{port1:u,port2:d}=new MessageChannel;xl(t,d),l=Bp(u,[u])}break;case"RELEASE":l=void 0;break;default:return}}catch(c){l={value:c,[Wn]:0}}Promise.resolve(l).catch(c=>({value:c,[Wn]:0})).then(c=>{const[h,u]=vr(c);e.postMessage(Object.assign(Object.assign({},h),{id:r}),u),i==="RELEASE"&&(e.removeEventListener("message",s),Ml(e))})}),e.start&&e.start()}function Rp(t){return t.constructor.name==="MessagePort"}function Ml(t){Rp(t)&&t.close()}function El(t,e){return qn(t,[],e)}function ks(t){if(t)throw new Error("Proxy has been released and is not useable")}function qn(t,e=[],s=function(){}){let n=!1;const r=new Proxy(s,{get(i,a){if(ks(n),a===Cp)return()=>$t(t,{type:"RELEASE",path:e.map(o=>o.toString())}).then(()=>{Ml(t),n=!0});if(a==="then"){if(e.length===0)return{then:()=>r};const o=$t(t,{type:"GET",path:e.map(l=>l.toString())}).then(Tt);return o.then.bind(o)}return qn(t,[...e,a])},set(i,a,o){ks(n);const[l,c]=vr(o);return $t(t,{type:"SET",path:[...e,a].map(h=>h.toString()),value:l},c).then(Tt)},apply(i,a,o){ks(n);const l=e[e.length-1];if(l===Vp)return $t(t,{type:"ENDPOINT"}).then(Tt);if(l==="bind")return qn(t,e.slice(0,-1));const[c,h]=Ea(o);return $t(t,{type:"APPLY",path:e.map(u=>u.toString()),argumentList:c},h).then(Tt)},construct(i,a){ks(n);const[o,l]=Ea(a);return $t(t,{type:"CONSTRUCT",path:e.map(c=>c.toString()),argumentList:o},l).then(Tt)}});return r}function Fp(t){return Array.prototype.concat.apply([],t)}function Ea(t){const e=t.map(vr);return[e.map(s=>s[0]),Fp(e.map(s=>s[1]))]}const kl=new WeakMap;function Bp(t,e){return kl.set(t,e),t}function Up(t){return Object.assign(t,{[wl]:!0})}function vr(t){for(const[e,s]of _l)if(s.canHandle(t)){const[n,r]=s.serialize(t);return[{type:"HANDLER",name:e,value:n},r]}return[{type:"RAW",value:t},kl.get(t)||[]]}function Tt(t){switch(t.type){case"HANDLER":return _l.get(t.name).deserialize(t.value);case"RAW":return t.value}}function $t(t,e,s){return new Promise(n=>{const r=Wp();t.addEventListener("message",function i(a){!a.data||!a.data.id||a.data.id!==r||(t.removeEventListener("message",i),n(a.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:r},e),s)})}function Wp(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const{DEV:qp=!1}={VITE_API_URL:"https://plantarium.fly.dev",VITE_SVELTEKIT_APP_VERSION:"1653002786760",VITE_SVELTEKIT_APP_VERSION_FILE:"_app/version.json",VITE_SVELTEKIT_APP_VERSION_POLL_INTERVAL:"0",VITE_SVELTEKIT_AMP:"",BASE_URL:"/_app/",MODE:"production",DEV:!1,PROD:!0};let As;var gr=()=>{if(!("window"in globalThis))return;if(As)return As;const t=El(new Op);let e;return As={async executeNodeSystem(s,n){if(e)return e;e=qp?jp(s,n):t.executeNodeSystem(s,n);const r=await e;return e=void 0,r}},As};const Hp=(t,e)=>s=>Math.min(Math.max(s,t),e),Xp=t=>{const e=10**t;return s=>Math.floor(s*e)/e},Gp=Hp(-1e5,1e5),Yp=Xp(1),Ss=t=>Gp(Yp(t));class Al{constructor({x1:e=0,y1:s=0,x2:n=0,y2:r=0},i){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x1=e,this.y1=s,this.x2=n,this.y2=r,this.system=i.node.system,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("viewbox","0 0 100 100"),this.svg.setAttribute("width","100"),this.svg.setAttribute("height","100"),this.svg.style.overflow="visible",this.svg.style.position="absolute",this.svg.style.top="3.5px",this.svg.style.pointerEvents="none",this.svg.style.zIndex="-1",i.view.wrapper.append(this.svg),this.path=document.createElementNS("http://www.w3.org/2000/svg","path"),this.path.classList.add("node-connection-path"),this.path.setAttribute("vector-effect","non-scaling-stroke"),this.path.setAttribute("d",`
      M 0 0
      C 50 0 
        50 100
				100  100
      `),this.svg.appendChild(this.path),this.setPosition()}setPosition({x1:e=this.x1,y1:s=this.y1,x2:n=this.x2,y2:r=this.y2}={}){var o;this.x1=Ss(e),this.y1=Ss(s),this.x2=Ss(n),this.y2=Ss(r);const i=this.x2-this.x1+7,a=this.y2-this.y1;(o=this==null?void 0:this.hoverPath)==null||o.setAttribute("d",`
      M 0 0
      C ${i/2} 0 
        ${i/2} ${a}
				${i}  ${a}
      `),this.path.setAttribute("d",`
      M 0 0
      C ${i/2} 0 
        ${i/2} ${a}
				${i}  ${a}
      `)}remove(){var e;this.path.remove(),(e=this==null?void 0:this.hoverPath)==null||e.remove(),this.system.save()}}class Jp extends Al{constructor(e){super({},e.output),this.connection=e,this.input=e.input.view,this.output=e.output.view,this.hoverPath=document.createElementNS("http://www.w3.org/2000/svg","path"),this.hoverPath.classList.add("node-connection-hover"),this.hoverPath.setAttribute("vector-effect","non-scaling-stroke"),this.svg.append(this.hoverPath),this.hoverPath.addEventListener("mouseover",()=>{const{activeNode:n}=this.system.view;n&&n.view.active&&n.view.hoveredConnection!==this&&this.handleNodeOver(n)}),this.hoverPath.addEventListener("mouseout",()=>{const{activeNode:n}=this.system.view;this.handleNodeOut(n)}),e.input.node.system.view.colorStore.onType(e.output.type,n=>{this.path.style.stroke=n,this.svg.style.setProperty("--socket-color",n)})}handleNodeOver(e){this.connection.isNodeJoinable(e)&&(e.view.hoveredConnection=this,this.path.classList.add("hover-active"),this.hoverPath.classList.add("hover-active"))}handleNodeOut(e){e&&e.view.hoveredConnection===this&&delete e.view.hoveredConnection,this.hoverPath.classList.remove("hover-active"),this.path.classList.remove("hover-active")}remove(){super.remove()}}function Qp(t){if(!Zp(t))throw new Error("panzoom requires DOM element to be attached to the DOM tree");const s=t.parentElement;return t.scrollTop=0,{getBBox:i,getOwner:r,applyTransform:a};function r(){return s}function i(){return{left:0,top:0,width:t.clientWidth,height:t.clientHeight}}function a(o){t.style.transformOrigin="0 0 0",t.style.transform="matrix("+o.scale+", 0, 0, "+o.scale+", "+o.x+", "+o.y+")"}}function Zp(t){return t&&t.parentElement&&t.style}function Kp(t,e,s){typeof s!="object"&&(s={});const n=typeof s.minVelocity=="number"?s.minVelocity:5,r=typeof s.amplitude=="number"?s.amplitude:.25,i=typeof s.cancelAnimationFrame=="function"?s.cancelAnimationFrame:em(),a=typeof s.requestAnimationFrame=="function"?s.requestAnimationFrame:tm();let o,l;const c=342;let h,u,d,f,p,m,v,g;return{start:b,stop:M,cancel:_};function _(){i(h),i(g)}function b(){o=t(),f=v=u=p=0,l=new Date,i(h),i(g),h=a(y)}function y(){const L=Date.now(),S=L-l;l=L;const $=t(),R=$.x-o.x,W=$.y-o.y;o=$;const V=1e3/(1+S);u=.8*R*V+.2*u,p=.8*W*V+.2*p,h=a(y)}function M(){i(h),i(g);const L=t();d=L.x,m=L.y,l=Date.now(),(u<-n||u>n)&&(f=r*u,d+=f),(p<-n||p>n)&&(v=r*p,m+=v),g=a(x)}function x(){const L=Date.now()-l;let S=!1,$=0,R=0;f&&($=-f*Math.exp(-L/c),$>.5||$<-.5?S=!0:$=f=0),v&&(R=-v*Math.exp(-L/c),R>.5||R<-.5?S=!0:R=v=0),S&&(e(d+$,m+R),g=a(x))}}function em(){return typeof cancelAnimationFrame=="function"?cancelAnimationFrame:clearTimeout}function tm(){return typeof requestAnimationFrame=="function"?requestAnimationFrame:function(t){return setTimeout(t,16)}}const sm=.2;function nm(t,e){const s=Qp(t),n=s.getOwner(),r={x:0,y:0};let i=!1;const a={x:0,y:0,scale:1},o=typeof e.pinchSpeed=="number"?e.pinchSpeed:1,l=e.bounds,c=typeof e.maxZoom=="number"?e.maxZoom:Number.POSITIVE_INFINITY,h=typeof e.minZoom=="number"?e.minZoom:0,u=typeof e.boundsPadding=="number"?e.boundsPadding:.05,d=typeof e.zoomSpeed=="number"?e.zoomSpeed:sm;let f=ka(e.transformOrigin);rm(l);let p,m=!1,v=!1,g,_,b;const y=Kp(ue,Ge,e.smoothScroll);let M,x=!1;me();const L={dispose:X,moveBy:ge,moveTo:we,smoothMoveTo:Ke,centerOn:it,zoomTo:ms,zoomAbs:Te,pause:W,resume:V,isPaused:j,getTransform:re,setTransform:H,getTransformOrigin:se,setTransformOrigin:he},S=typeof e.initialX=="number"?e.initialX:a.x,$=typeof e.initialY=="number"?e.initialY:a.y,R=typeof e.initialZoom=="number"?e.initialZoom:a.scale;return(S!=a.x||$!=a.y||R!=a.scale)&&Te(S,$,R),L;function W(){_e(),x=!0}function V(){x&&(me(),x=!1)}function j(){return x}function D(U,Y){return r.x=U,r.y=Y,r}function H(U,Y,Q){a.x=U,a.y=Y,a.scale=Q,be()}function re(){return a}function se(){return f}function he(U){f=ka(U)}function ue(){return{x:a.x,y:a.y}}function we(U,Y){a.x=U,a.y=Y,Me(),be()}function ge(U,Y){we(a.x+U,a.y+Y)}function Me(){const U=Xe();if(!U)return;let Y=!1;const Q=$e();let ce=U.left-Q.right;return ce>0&&(a.x+=ce,Y=!0),ce=U.right-Q.left,ce<0&&(a.x+=ce,Y=!0),ce=U.top-Q.bottom,ce>0&&(a.y+=ce,Y=!0),ce=U.bottom-Q.top,ce<0&&(a.y+=ce,Y=!0),Y}function Xe(){if(!!l){if(typeof l=="boolean"){const U=n.getBoundingClientRect(),Y=U.width,Q=U.height;return{left:Y*u,top:Q*u,right:Y*(1-u),bottom:Q*(1-u)}}return l}}function $e(){const U=s.getBBox(),Y=ze(U.left,U.top);return{left:Y.x,top:Y.y,right:U.width*a.scale+Y.x,bottom:U.height*a.scale+Y.y}}function ze(U,Y){return{x:U*a.scale+a.x,y:Y*a.scale+a.y}}function be(){i=!0,p=window.requestAnimationFrame(Ye)}function Ee(U,Y,Q){if(bn(U)||bn(Y)||bn(Q))throw new Error("zoom requires valid numbers");const ce=a.scale*Q;if(ce<h){if(a.scale===h)return;Q=h/a.scale}if(ce>c){if(a.scale===c)return;Q=c/a.scale}const He=D(U,Y);a.x=He.x-Q*(He.x-a.x),a.y=He.y-Q*(He.y-a.y),l&&u===1&&h===1?(a.scale*=Q,Me()):Me()||(a.scale*=Q),be()}function Te(U,Y,Q){const ce=Q/a.scale;Ee(U,Y,ce)}function it(U){const Y=U.ownerSVGElement;if(!Y)throw new Error("ui element is required to be within the scene");const Q=U.getBoundingClientRect(),ce=Q.left+Q.width/2,He=Q.top+Q.height/2,dt=Y.getBoundingClientRect(),vs=dt.width/2-ce,gs=dt.height/2-He;qe(vs,gs)}function Ke(U,Y){qe(U-a.x,Y-a.y)}function qe(U,Y){return ge(U,Y)}function Ge(U,Y){we(U,Y)}function X(){_e()}function me(){n.addEventListener("mousedown",Pr,{passive:!0}),n.addEventListener("dblclick",Nr,{passive:!1}),n.addEventListener("touchstart",Er,{passive:!0}),n.addEventListener("keydown",Mr),n.addEventListener("wheel",Dr,{passive:!0}),be()}function _e(){n.removeEventListener("wheel",Dr),n.removeEventListener("mousedown",Pr),n.removeEventListener("keydown",Mr),n.removeEventListener("dblclick",Nr),n.removeEventListener("touchstart",Er),p&&(window.cancelAnimationFrame(p),p=0),y.cancel(),Ir(),Yl(),Vr()}function Ye(){i&&Wl()}function Wl(){i=!1,s.applyTransform(a),p=0,e.onTransform&&e.onTransform(a)}function Mr(U){let Y=0;if(U.keyCode===38||U.keyCode===40||U.keyCode===37||U.keyCode===39||(U.keyCode===189||U.keyCode===109?Y=1:(U.keyCode===187||U.keyCode===107)&&(Y=-1)),Y){const Q=jr(Y*100),ce=f?Zs():ql();ms(ce.x,ce.y,Q)}}function ql(){const U=n.getBoundingClientRect();return{x:U.width/2,y:U.height/2}}function Er(U){if(Hl(U),U.touches.length===1)return Gl(U);U.touches.length===2&&(b=Sr(U.touches[0],U.touches[1]),M=!0,kr())}function Hl(U){U.stopPropagation(),U.preventDefault()}function Xl(U){U.preventDefault(),U.stopPropagation()}function Gl(U){const Y=U.touches[0],Q=bt(Y),ce=D(Q.x,Q.y);g=ce.x,_=ce.y,y.cancel(),kr()}function kr(){m||(m=!0,document.addEventListener("touchmove",Ar),document.addEventListener("touchend",ps),document.addEventListener("touchcancel",ps))}function Ar(U){if(U.touches.length===1){U.stopPropagation();const Y=U.touches[0],Q=bt(Y),ce=D(Q.x,Q.y),He=ce.x-g,dt=ce.y-_;He!==0&&dt!==0&&Or(),g=ce.x,_=ce.y,qe(He,dt)}else if(U.touches.length===2){M=!0;const Y=U.touches[0],Q=U.touches[1],ce=Sr(Y,Q),He=1+(ce/b-1)*o,dt=bt(Y),vs=bt(Q);if(g=(dt.x+vs.x)/2,_=(dt.y+vs.y)/2,f){const gs=Zs();g=gs.x,_=gs.y}ms(g,_,He),b=ce,U.stopPropagation(),U.preventDefault()}}function ps(U){if(U.touches.length>0){const Y=bt(U.touches[0]),Q=D(Y.x,Y.y);g=Q.x,_=Q.y}}function Sr(U,Y){const Q=U.clientX-Y.clientX,ce=U.clientY-Y.clientY;return Math.sqrt(Q*Q+ce*ce)}function Nr(U){Xl(U)}function Pr(U){if(m)return U.stopPropagation(),!1;if(U.target!==n&&U.target!==t||!(U.button===1&&window.event!==null||U.button===0))return;y.cancel();const Q=bt(U),ce=D(Q.x,Q.y);return g=ce.x,_=ce.y,document.addEventListener("mousemove",Lr),document.addEventListener("mouseup",Tr),!1}function Lr(U){if(m||U.ctrlKey)return;Or();const Y=bt(U),Q=D(Y.x,Y.y),ce=Q.x-g,He=Q.y-_;g=Q.x,_=Q.y,qe(ce,He)}function Tr(){Vr(),Ir()}function Ir(){document.removeEventListener("mousemove",Lr),document.removeEventListener("mouseup",Tr),v=!1}function Yl(){document.removeEventListener("touchmove",Ar),document.removeEventListener("touchend",ps),document.removeEventListener("touchcancel",ps),v=!1,M=!1,m=!1}function Dr(U){y.cancel();let Y=U.deltaY;U.deltaMode>0&&(Y*=100);const Q=jr(Y);if(Q!==1){const ce=f?Zs():bt(U);ms(ce.x,ce.y,Q)}}function bt(U){const Y=n.getBoundingClientRect(),Q=U.clientX-Y.left,ce=U.clientY-Y.top;return{x:Q,y:ce}}function Zs(){const U=n.getBoundingClientRect();return{x:U.width*f.x,y:U.height*f.y}}function ms(U,Y,Q){return y.cancel(),Ee(U,Y,Q)}function jr(U){const Y=Math.sign(U),Q=Math.min(.25,Math.abs(d*U/128));return 1-Y*Q}function Or(){v||(v=!0,y.start())}function Vr(){v&&(M||y.stop())}}function ka(t){if(!!t){if(typeof t=="object")return(!Ut(t.x)||!Ut(t.y))&&Aa(),t;Aa()}}function Aa(t){throw new Error(["Cannot parse transform origin.","Some good examples:",'  "center center" can be achieved with {x: 0.5, y: 0.5}','  "top center" can be achieved with {x: 0.5, y: 0}','  "bottom right" can be achieved with {x: 1, y: 1}'].join(`
`))}function rm(t){const e=typeof t;if(e==="undefined"||e==="boolean")return;if(!(Ut(t.left)&&Ut(t.top)&&Ut(t.bottom)&&Ut(t.right)))throw new Error("Bounds object is not valid. It can be: undefined, boolean (true|false) or an object {left, top, right, bottom}")}function Ut(t){return Number.isFinite(t)}function bn(t){return Number.isNaN?Number.isNaN(t):t!==t}function im(t,e){const s=t.x2<e.x1,n=t.x1>e.x2,r=t.y1>e.y2,i=t.y2<e.y1;return!(s||n||r||i)}var am=(t,e)=>e.type.includes(t.type)||e.type.includes("*");function Us(t,e){if(t===void 0&&e===void 0)return;const s=Array.isArray(t)?"array":typeof t;if(s==="string"||s==="boolean"||s==="number")return t===e?void 0:e;if(Array.isArray(t)){const a=t.map((o,l)=>typeof e=="object"&&l in e?Us(o,e[l]):e[l]);return!a.length||a.length===1&&!a[0]?void 0:a}if(!t)return e;const n=Object.keys(t),r={};let i=!1;if(n.forEach(a=>{const o=Us(t[a],e[a]);o!==void 0&&(i=!0,r[a]=o)}),!!i)return r}function om(t,e){return[Us(t,e),Us(e,t)]}function Ws(t,e){const s=typeof t;if(s==="string"||s==="boolean"||s==="number")return e;if(Array.isArray(t))return t.map((n,r)=>e[r]?Ws(n,e[r]):n);if(typeof t=="object"){const n=Object.keys(e),r=ye({},t);return n.forEach(i=>{r[i]=Ws(t[i],e[i])}),r}}class lm{constructor(e,{input:s,output:n}){var i;if(n.connections.find(a=>a.input===s))return;if(((i=s==null?void 0:s.connection)==null?void 0:i.output)===n||!n||!s)return;if(this.system=e,s.node.getChildren().includes(n.node))throw new Error("Circular reference");if(!am(n,s))throw new Error("Can't connect type "+s.type+" to "+n.type);this.output=n,this.input=s,e.options.view&&(this.view=new Jp(this)),this.output.setConnection(this),this.input.setConnection(this),this.output.node.system.save()}joinNode(e){if(!this.isNodeJoinable(e))return;this.system.isPaused=!0,this.remove(),this.output.node.connectTo(e,0,e.getInputs()[0].key);const s=this.input.node.getInputs(),n=s.indexOf(this.input),r=s[n].key;e.connectTo(this.input.node,0,r),this.system.isPaused=!1,e.update()}isNodeJoinable(e){const s=this.input.type,n=this.output.type;if(this.input.node===e||this.output.node===e)return!1;const r=e.getInputs();if(!r.length||!r.find(a=>a.type.includes(n)))return!1;const i=e.outputs;return!(!i.length||!i.find(a=>s.includes(a.type)||s.includes("*")))}remove(){this.view&&this.view.remove(),this.input.removeConnection(),this.output.removeConnection(this)}deserialize(){return{id:this.input.node.attributes.id,out:this.indexOut,in:this.indexIn}}get indexOut(){return this.output.node.outputs.indexOf(this.output)}get indexIn(){return this.input.key}}class yr extends Ze{constructor(e,s){super(),this.outputs=[],this._state={},this.states={},this.inputData=[],this.enableUpdates=!0,this.refs=[],this.system=e;const{attributes:n,state:r={}}=s;this._state=r,this.attributes=n,this.id=n.id,this._compute=Tu((i=this._state)=>this.compute(i))}get state(){return this._state}bindView(e){this.view=e,this.outputs.forEach(s=>s.bindView()),Object.values(this.states).forEach(s=>s.bindView())}setAttributes(e){this.enableUpdates&&this.system.history.addAction(),this.attributes=ye(ye({},this.attributes),e),this==null||this.view.updateViewPosition(),this.save()}compute(e){return e}getChildren(){return this.outputs.map(n=>n.connections).flat().map(n=>n.input.node)}getSockets(){return[...this.getInputs(),...this.outputs]}getInputs(){return Object.values(this.states).map(e=>e.getInput()).filter(e=>!!e)}setStateValue(e,s){this.states[e].setValue(s)}getStateValue(e){return this.state[e]}update(){!this.enableUpdates||(this.system.options.showUpdates&&this.view&&this.view.showUpdate(),Object.values(this.states).find(e=>!e.isOkay)?this.computedData=void 0:this.computedData=this._compute(this.state),this.emit("computedData",this.computedData),this.refs.forEach(e=>{e.node.enableUpdates=!1,e.keyIn.forEach(s=>{this.system.options.deferCompute?e.node.setStateValue(s,{type:this.attributes.type,parameters:this.computedData}):e.node.setStateValue(s,this.computedData)}),e.node.enableUpdates=!0,e.node.update()}),this.save())}remove(){this.system.removeNode(this),this.destroyEventEmitter()}connectTo(e,s=0,n=e.getInputs()[0].key){var l,c,h;const r=this.outputs[s],i=(l=e.states[n])==null?void 0:l.getInput();if(!i)return;const a=new lm(this.system,{output:r,input:i});(c=r==null?void 0:r.view)==null||c.updatePosition(),(h=i==null?void 0:i.view)==null||h.updatePosition();const o=this.refs.find(u=>u.node.id===e.id&&u.indexOut===s);return o?o.keyIn=[...o.keyIn,n]:this.refs.push({node:e,keyIn:[n],indexOut:s}),this.update(),a}disconnectFrom(e,s,n){this.refs=this.refs.filter(r=>!(r.indexOut!==n||(r.keyIn.splice(r.keyIn.indexOf(s),1),r.keyIn.length===0))),this.update()}deserialize(){const e=Object.assign({},this.attributes);e.refs=this.outputs.map(n=>n.connections).flat().map(n=>n.deserialize());const s={};return Object.values(this.states).forEach(n=>{s[n.key]=n.getValue()}),JSON.parse(JSON.stringify({attributes:e,state:s}))}save(){this.system.save()}}class wr{constructor(e){this.inputs=[],this.outputs=[],this.active=!1,this.x=0,this.y=0,this.downX=0,this.downY=0,this.mDownX=0,this.mDownY=0,this.height=50,this.width=91,this.node=e,this.system=e.system,this.wrapper=document.createElement("div"),this.wrapper.style.minHeight=this.height+"px",this.wrapper.style.minWidth=this.width+"px",this.wrapper.classList.add("node-wrapper","node-type-"+e.attributes.type.toLowerCase()),this.wrapper.setAttribute("id","node-view-"+this.system.id+"-"+this.node.id),this.outputWrapper=document.createElement("div"),this.outputWrapper.classList.add("node-outputs-wrapper"),this.wrapper.append(this.outputWrapper);const s=document.createElement("p");s.innerHTML=e.attributes.name||e.attributes.type,s.classList.add("node-title"),this.wrapper.appendChild(s),this.stateWrapper=document.createElement("div"),this.stateWrapper.classList.add("node-state-wrapper"),this.wrapper.append(this.stateWrapper),e.system.view.nodeContainer.append(this.wrapper);const{pos:{x:n=0,y:r=0}={}}=e.attributes;this.x=n,this.y=r,this.bindEventListeners(),this.wrapper.style.left=n+"px",this.wrapper.style.top=r+"px",setTimeout(()=>{const{width:i,height:a}=this.wrapper.getBoundingClientRect();this.width=i/this.system.view.s,this.height=a/this.system.view.s,this.updateViewPosition(n,r)},10)}bindEventListeners(){this.wrapper.addEventListener("mousedown",e=>this.handleMouseDown(e)),this._unsubscribeMouseMove=this.system.view.on("mousemove",e=>this.handleMouseMove(e)),this._unsubscribeMouseUp=this.system.view.on("mouseup",()=>this.handleMouseUp())}removeEventListeners(){this._unsubscribeMouseMove(),this._unsubscribeMouseUp(),this.wrapper.addEventListener("mousedown",e=>this.handleMouseDown(e))}set state(e){this.wrapper.classList.remove("node-active","node-selected","node-dragging"),e==="no-error"&&this.wrapper.classList.remove("node-error"),this.wrapper.classList.add("node-"+e),this._state=e}get state(){return this._state}handleMouseDown(e){var r,i,a,o;if(this.system.view.keyMap.space||e.button===2||e.target!==e.currentTarget)return;e.stopImmediatePropagation(),e.stopPropagation(),this.node.system.view.setActive(this.node,e);const{rmx:s,rmy:n}=this.system.view;this.mDownX=s,this.mDownY=n,this.downX=((i=(r=this.node.attributes)==null?void 0:r.pos)==null?void 0:i.x)||0,this.downY=((o=(a=this.node.attributes)==null?void 0:a.pos)==null?void 0:o.y)||0,this.active=!0,this.system.view.selectedNodes.length&&this.system.view.selectedNodes.forEach(l=>{l.view.active=!0,l.view.mDownX=s,l.view.mDownY=n,l.view.downX=l.view.x,l.view.downY=l.view.y})}handleMouseUp(){this.active=!1,this.hoveredConnection&&(this.hoveredConnection.connection.joinNode(this.node),delete this.hoveredConnection)}showUpdate(){this.wrapper.classList.add("is-updating"),setTimeout(()=>{this.wrapper.classList.remove("is-updating")},200)}handleMouseMove({mx:e,my:s,keys:n}){if(this.active){this.state="dragging";const r=n.ctrlKey?.02:1;let i=this.mDownX-e,a=this.mDownY-s;n.shiftKey&&(Math.abs(i)>Math.abs(a)?a=0:i=0);const o=Math.round((this.downX-i/this.system.view.s)*r)/r,l=Math.round((this.downY-a/this.system.view.s)*r)/r;this.setPosition(o,l)}}updateViewPosition(e=(i=>(i=(r=>(r=(n=>(n=this.node.attributes)==null?void 0:n.pos)())==null?void 0:r.x)())!=null?i:this.x)(),s=(l=>(l=(o=>(o=(a=>(a=this.node.attributes)==null?void 0:a.pos)())==null?void 0:o.y)())!=null?l:this.y)()){this.wrapper.style.left=e+"px",this.wrapper.style.top=s+"px",Object.values(this.node.states).forEach(c=>{var h;return(h=c==null?void 0:c.view)==null?void 0:h.updatePosition()}),this.node.outputs.forEach(c=>c.view.updatePosition())}setPosition(e,s){this.x=e,this.y=s,this.node.setAttributes({pos:{x:e,y:s}}),this.updateViewPosition()}remove(){this.removeEventListeners(),this.wrapper.remove()}}class cm{constructor(e){this.nodeState=e,this.wrapper=document.createElement("div"),this.input=document.createElement("div"),this.wrapper.classList.add("node-state-single-wrapper"),this.input.classList.add("node-state-input");const s=e.template,n=s.label||e.key;if(typeof n=="string"){const r=document.createElement("p");r.className="state-label",r.innerHTML=n,this.wrapper.appendChild(r)}(s==null?void 0:s.label)===!1&&this.wrapper.classList.add("hide-label"),!s.external&&s.type!=="*"&&(this.element=Rf({target:this.input,template:s,value:e.getValue()}),this.element&&this.element.$on("change",({detail:r})=>{typeof r!="undefined"&&!Number.isNaN(r)&&this.nodeState.setValue(r)})),e.node.view.stateWrapper.appendChild(this.wrapper),this.wrapper.appendChild(this.input)}updateValue(){setTimeout(()=>{this.element&&(this.element.value=this.nodeState.getValue())},50)}updatePosition(){var e,s;this.rect=this.wrapper.getBoundingClientRect(),(s=(e=this.nodeState.getInput())==null?void 0:e.view)==null||s.updatePosition()}setErrorState(e){e?this.wrapper.classList.add("state-error"):this.wrapper.classList.remove("state-error")}get y(){return this.rect.y-this.nodeState.node.view.y}get height(){return this.rect.height}setActive(e){this.wrapper.classList[e?"remove":"add"]("disabled"),this.nodeState.node.getInputs().forEach(s=>s.view.updatePosition())}}class hm{constructor(e){if(!e||!e.node)throw new Error("Somethings missing");this.input=e,this.node=e.node,this.wrapper=document.createElement("div"),this.wrapper.classList.add("node-input-wrapper"),e.type.forEach(s=>{this.wrapper.classList.add(`socket-type-${s==="*"?"all":s}`)}),e.state.view.wrapper.appendChild(this.wrapper),this.wrapper.addEventListener("mousedown",async s=>{s.stopPropagation(),s.preventDefault(),this.node.enableUpdates=!1;const n=this.input.connection;n?(n.remove(),await this.node.system.view.createFloatingConnection(n.output)):await this.node.system.view.createFloatingConnection(this.input),this.node.enableUpdates=!0,this.node.update()},!1),this.node.system.view.colorStore.onType(e.type[0],s=>{const n=window.getComputedStyle(this.wrapper,null).getPropertyValue("background-color");this.wrapper.style.setProperty("--socket-color",s),this.wrapper.style.backgroundColor=n!=="rgba(0, 0, 0, 0)"?n:s})}updatePosition(){var e;this.rect=this.wrapper.getBoundingClientRect(),(e=this==null?void 0:this.connection)==null||e.setPosition({x2:this.x,y2:this.y})}remove(){this.wrapper.remove(),this.connection&&this.connection.remove()}set state(e){this.wrapper.classList.forEach(s=>{s.includes("socket-state-")&&this.wrapper.classList.remove(s)}),e&&e.length&&this.wrapper.classList.add("socket-state-"+e)}get x(){return this.node.view.x-3}get y(){const e=this.node.system.view;return(this.rect.y+this.rect.height/2-e.y-e.top)/e.s-e.height/2}}class ss{constructor(e,s,n){this.state=e,this.key=n,this.node=e.node,this.type=Array.isArray(s)?s:[s]}bindView(){this.view=new hm(this)}removeConnection(){const e=this.connection;delete this.connection,e&&e.remove(),this.node.setStateValue(this.key,void 0),this.state.setIsExternal(!1)}setConnection(e){this.connection&&this.connection.remove(),this.connection=e,this.view&&(this.view.connection=e.view),this.state.setIsExternal(!0)}remove(){this.view&&this.view.remove(),this.removeConnection()}}class br extends Ze{constructor(e,s,n){var r;super(),this.node=e,this.key=s,this.template=n,this.isExternal=!1,this.isOkay=!0,this.value=(r=e.state[s])!=null?r:n.value,this.node._state[s]=this.value,this.template.internal||(this.input=new ss(this,n.type,s))}setIsExternal(e=!1){var s;this.isExternal=e,(s=this==null?void 0:this.view)==null||s.setActive(!e)}getValue(){return this.value}checkErrors(e=this.template.value){var s;((s=this.template)==null?void 0:s.required)&&e===void 0?this.isOkay=!1:this.isOkay=!0,this!=null&&this.view&&this.view.setErrorState(!this.isOkay)}setValue(e=this.template.value){this.isExternal||(this.node.enableUpdates&&this.node.system.history.addAction(),this.value=e),this.node._state[this.key]=e,this.checkErrors(e),this.node.enableUpdates&&(this==null||this.view.updateValue(),this.isOkay&&this.node.update())}remove(){}getInput(){return this.input}bindView(){this.view=new cm(this),this.input&&this.input.bindView(),this.checkErrors()}}var um={title:"Boolean",type:"boolean",outputs:["boolean"],parameters:{value:{type:"boolean",value:!1}},compute({value:t=!1}){return t}},fm={title:"Math",type:"math",outputs:["number"],parameters:{mode:{type:"select",internal:!0,label:!1,value:"add",values:["add","multiply","subtract"]},a:{type:"number",value:0,label:!1},b:{type:"number",value:0,label:!1}},compute({mode:t,a:e,b:s}){switch(t){case"multiply":return e*s;case"subtract":return e-s;default:return e+s}}},dm={title:"Number",type:"number",outputs:["number"],parameters:{value:{type:"number",internal:!0,label:!1,value:0}},compute({value:t=0}){return t}};class pm extends yr{constructor(e,s){super(e,s),this.states={input:new br(this,"input",{type:"*"})},this.outputs=[]}compute({input:e}){return e}}class mm extends wr{constructor(e){super(e);const s=document.createElement("div");s.style.color="var(--text-color, white)",e.on("computedData",n=>{s.innerHTML="";const r=document.createElement("p");r.innerHTML=JSON.stringify(n,null," "),s.append(r)}),this.wrapper.appendChild(s)}}var vm={title:"Debug",type:"debug",meta:{description:"Outputs any inputs for debug purposes"},node:pm,view:mm};class gm extends yr{constructor(e,s){super(e,s),this.attributes.type="output",this.states={input:new br(this,"input",{type:"*",external:!0,label:!1})},this.outputs=[]}compute({input:e}){return e}}class ym extends wr{constructor(e){super(e);const s=document.createElement("p");s.style.margin="0px",s.style.padding="4px",s.style.color="var(--text-color,white)",s.style.fontWeight="bold",e.on("computedData",n=>{s.innerHTML=JSON.stringify(n,null,2)}),this.wrapper.appendChild(s)}}var wm={title:"Output",type:"output",meta:{description:"Outputs the final value"},node:gm,view:ym};const _n={BooleanNode:um,MathNode:fm,NumberNode:dm,DebugNode:vm,OutputNode:wm};const bm=Le("AddMenu");class _m{constructor(e){this.x=0,this.y=0,this.types=[],this.view=e,this.system=e.system,this.wrapper=document.createElement("div"),this.wrapper.classList.add("context-wrapper"),this.searchEl=new jf({target:this.wrapper}),this.searchEl.$on("input",({detail:s})=>{this.resolve(s)}),this.view.wrapper.append(this.wrapper),this.view.system.store.on("types",s=>this.updateTypes(s),20),this.wrapper.classList.add("cl-"+Math.floor(Math.random()*1e3)),this.view.on("keydown",({key:s})=>s==="Escape"&&this.hide())}updateTypes(e=this.types){this.types=e,bm("register types",e),console.log(this.socket),this.searchEl.setItems(e.map(s=>({outputs:s.outputs,inputs:s.inputs,value:s.type||s.title,title:s.title})).filter(s=>{var n,r;return this.socket?(console.log({v:s}),Array.isArray(this.socket.type)?(n=s==null?void 0:s.outputs)==null?void 0:n.find(i=>this.socket.type.includes(i)):(r=s==null?void 0:s.inputs)==null?void 0:r.includes(this.socket.type)):!0}))}handleWindowClick(e){e.composedPath().includes(this.wrapper)||this.reject()}reject(){this.rej&&this.rej(),this.hide()}resolve(e){const s=this.system.store.getByType(e),{x:n,y:r}=this.view.projectWindowToLocal(this.x,this.y),i=n-this.view.width/2,a=r-this.view.height/2;s?this.res({attributes:{pos:{x:i,y:a},id:"",name:s.title,type:s.type,refs:[]},state:{value:void 0}}):this.reject(),this.hide()}hide(){this.searchEl.clear(),this.wrapper.classList.remove("context-visible"),this.wrapper.blur(),this.rej&&this.rej(),this.res=e=>e,this.reject=()=>{}}show({x:e,y:s,socket:n}){return this.x=e,this.y=s,this.socket=n,this.wrapper.style.left=e/this.system.view.width*100+"%",this.wrapper.style.top=s/this.system.view.height*100+"%",this.wrapper.classList.add("context-visible"),this.updateTypes(),setTimeout(()=>{this.searchEl.focus()},20),new Promise((r,i)=>{this.res=r,this.rej=i})}}class xm extends Ze{constructor(e){super(),this.mDownX=0,this.mDownY=0,this.downX=0,this.downY=0,this.isShiftKey=!1,this.view=e,this.wrapper=document.createElement("div"),this.wrapper.classList.add("box-selection-wrapper"),this.view.wrapper.append(this.wrapper),this.view.on("mousedown",({target:s,mx:n,x:r,my:i,y:a,keys:o})=>{var l;o.space||o.shiftKey||o.button===2||!o.ctrlKey||s&&!((l=s==null?void 0:s.className)!=null&&l.includes("nodesystem"))||(this.mDownX=n,this.mDownY=i,this.downX=r,this.downY=a,this.wrapper.style.left=n+"px",this.wrapper.style.top=i+"px",this.wrapper.style.width="0px",this.wrapper.style.height="0px",this.isShiftKey=o.shift,this.show())})}show(){this.wrapper.classList.add("box-selection-visible");const e=this.view.system.nodes.map(r=>{const{width:i,height:a}=r.view,{x:o,y:l}=r.view,c=o+this.view.width/2,h=l+this.view.height/2,u=c+i,d=h+a;return{n:r,state:r.view.state,x1:c,y1:h,x2:u,y2:d}});let s=[];const n=this.view.on("mousemove",({mx:r,my:i,x:a,y:o})=>{const{mDownX:l,mDownY:c,downX:h,downY:u,isShiftKey:d}=this,f={x1:Math.min(r,l),x2:Math.max(r,l),y1:Math.min(i,c),y2:Math.max(i,c)};this.wrapper.style.left=f.x1+"px",this.wrapper.style.top=f.y1+"px",this.wrapper.style.width=Math.abs(l-r)+"px",this.wrapper.style.height=Math.abs(c-i)+"px";const p={x1:Math.min(a,h),x2:Math.max(a,h),y1:Math.min(o,u),y2:Math.max(o,u)};s=e.filter(m=>im(p,m)?!0:(d||(m.state="normal",m.n.view.state="normal"),!1)).map(({n:m,state:v})=>(v!=="active"&&(v="selected",m.view.state="selected"),m))},5);this.view.once("mouseup",()=>{n(),this.hide(),this.emit("selection",s)})}projectBox(e){const{x:s,y:n}=this.view.projectWindowToLocal(e.x1,e.y1),{x:r,y:i}=this.view.projectWindowToLocal(e.x2,e.y2);return{x1:s,y1:n,x2:r,y2:i}}hide(){this.wrapper.classList.remove("box-selection-visible")}}class Mm{constructor(e){this.connections=[],this.output=e,this.node=e.node,this.wrapper=document.createElement("div"),this.wrapper.classList.add("node-output-wrapper"),this.wrapper.classList.add(`socket-type-${e.type}`),e.node.view.outputWrapper.appendChild(this.wrapper),this.wrapper.addEventListener("mousedown",s=>{s.target===this.wrapper&&(s.stopPropagation(),s.preventDefault(),this.node.system.view.createFloatingConnection(this.output))},!1),this.node.system.view.colorStore.onType(e.type,s=>{const n=window.getComputedStyle(this.wrapper,null).getPropertyValue("background-color");this.wrapper.style.setProperty("--socket-color",s),this.wrapper.style.backgroundColor=n!=="rgba(0, 0, 0, 0)"&&n!=="rgb(0,0,0)"?n:s})}remove(){this.wrapper.remove(),this.connections.forEach(e=>e.remove())}set state(e){this.wrapper.classList.forEach(s=>{s.includes("socket-state-")&&this.wrapper.classList.remove(s)}),e&&e.length&&this.wrapper.classList.add("socket-state-"+e)}updatePosition(){this.rect=this.wrapper.getBoundingClientRect(),this.output.connections.forEach(e=>e.view.setPosition({x1:this.x,y1:this.y}))}get x(){return this.node.view.x+this.node.view.width+3}get y(){const e=this.node.system.view;return(this.rect.y+this.rect.height/2-e.y-e.top)/e.s-e.height/2}}class Ds{constructor(e,s){if(this.connections=[],this.node=e,this.type=s,Array.isArray(s))throw new Error("Output can only output one type, not "+s)}bindView(){this.view=new Mm(this)}connectTo(e){const s=this.node.outputs.indexOf(this);return this.node.connectTo(e.node,s,e.key)}removeConnection(e){const s=this.connections.indexOf(e);this.connections.splice(s,1),this.node.disconnectFrom(e.input.node,e.indexIn,e.indexOut),this.view&&this.view.connections.splice(s,1)}setConnection(e){this.connections.push(e),this.view&&this.view.connections.push(e.view)}remove(){this.connections.forEach(e=>e.remove())}}class Em extends Sh(Al,Ze){constructor(e,s={}){const{system:n}=e.node;super({},e),this.view=n.view,this.path.style.zIndex="999";const r=Array.isArray(e.type)?e.type[0]:e.type;n.view.colorStore.onType(r,u=>{this.path.style.stroke=u}),e.view.updatePosition();const i=e.view.x,a=e.view.y;let o=i,l=a;s&&(o=s.x-n.view.width/2,l=s.y-n.view.height/2),this.setPosition({x1:i,y1:a,x2:o,y2:l}),this.dx2=this.x2,this.dy2=this.y2,this.isInput=e instanceof ss,this.allSockets=e instanceof ss?n.getOutputs(e.type):n.getInputs(e.type),this.allSockets.forEach(u=>u.view.state="potential");let c=this.allSockets.filter(u=>u.node.attributes.id!==e.node.attributes.id);c.forEach(u=>u.view.state="middle");const h="connection"in e?[e.connection]:e.connections;if(h&&!!h.length){const u=h.map(d=>[d.input,d.output]).flat();c=c.filter(d=>!u.includes(d))}this.potentialSockets=c,this.potentialSockets.forEach(u=>u.view.updatePosition()),this.potentialSockets.forEach(u=>u.view.state="highlight"),this._unsubMouseUp=this.view.on("mouseup",this.handleMouseUp.bind(this)),this._unsubMouseMove=this.view.on("mousemove",this.handleMouseMove.bind(this)),this.mdx=this.view.mx,this.mdy=this.view.my,this.socket=e,e.view.updatePosition()}handleMouseUp(e){const{x:s,y:n,keys:r}=e;this._unsubMouseUp(),this._unsubMouseMove(),this.allSockets.forEach(o=>o.view.state="");let i,a=0;this.socket instanceof ss&&this.hoveredSocket instanceof Ds?(i=this.socket.key,a=this.hoveredSocket.node.outputs.indexOf(this.hoveredSocket)):this.socket instanceof Ds&&this.hoveredSocket instanceof ss&&(i=this.hoveredSocket.key,a=this.socket.node.outputs.indexOf(this.socket)),this.hoveredSocket?(this.emit("connection",{keyIn:i,indexOut:a,inputNode:this.isInput?this.socket.node:this.hoveredSocket.node,outputNode:this.isInput?this.hoveredSocket.node:this.socket.node}),this.remove()):r.ctrlKey?this.view.addMenu.show({x:s,y:n,socket:this.socket}).then(o=>this.view.system.createNode(o)).then(o=>{this.socket instanceof Ds?this.socket.node.connectTo(o,a,i):o.connectTo(this.socket.node,a,i),this.remove()}).catch(()=>{this.remove()}).finally(()=>{this.remove()}):this.remove()}handleMouseMove(e){const{x:s,y:n}=e;this.mdx||(this.mdx=s,this.mdy=n);const r=this.dx2+(s-this.mdx),i=this.dy2+(n-this.mdy),a=20,o=this.potentialSockets.map(l=>{const{x:c,y:h}=l.view;return{socket:l,distance:Math.abs(r-c)+Math.abs(i-h)}}).filter(l=>l.distance<a).sort((l,c)=>l.distance>c.distance?-1:1).map(l=>l.socket);if(o.length){const{x:l,y:c}=o[0].view;this.hoveredSocket=o[0],this.setPosition({x2:l,y2:c})}else this.hoveredSocket=void 0,this.setPosition({x2:r,y2:i})}remove(){super.remove(),this.emit("remove"),this.system.isPaused=!1}}const km=[{color:"#a52a2a",name:"brown"},{color:"#008000",name:"green"},{color:"#4b0082",name:"indigo"},{color:"#f0e68c",name:"khaki"},{color:"#add8e6",name:"lightblue"},{color:"#e0ffff",name:"lightcyan"},{color:"#90ee90",name:"lightgreen"},{color:"#d3d3d3",name:"lightgrey"},{color:"#ffb6c1",name:"lightpink"},{color:"#ffffe0",name:"lightyellow"},{color:"#00ff00",name:"lime"},{color:"#ff00ff",name:"magenta"},{color:"#800000",name:"maroon"},{color:"#000080",name:"navy"},{color:"#808000",name:"olive"},{color:"#ffa500",name:"orange"},{color:"#ffc0cb",name:"pink"},{color:"#800080",name:"purple"},{color:"#800080",name:"violet"},{color:"#ff0000",name:"red"},{color:"#c0c0c0",name:"silver"},{color:"#ffffff",name:"white"}];class Am extends Ze{constructor(e){super(),this.colors={},this.index=0,this.updateTypes(e.system.store.types),e.system.store.on("types",s=>this.updateTypes(s))}updateTypes(e){e.forEach(s=>{var n,r;(n=s==null?void 0:s.inputs)==null||n.forEach(i=>Array.isArray(i)?i.forEach(a=>this.setType(a)):this.setType(i)),(r=s==null?void 0:s.outputs)==null||r.forEach(i=>this.setType(i))})}setColors(e){for(const s in e)this.colors[s]=e[s]}setType(e){!e||(e in this.colors||(this.colors[e]=km[this.index].color,this.index++),this.emit(e,this.colors[e]),this.emit("colors",Object.entries(this.colors)))}get(e){return this.colors[e]}onType(e,s){return this.setType(e),s(this.colors[e]),super.on(e,s)}}let Wt,ns;globalThis.document&&(typeof document.hidden!="undefined"?(ns="visibilitychange",Wt="visibilityState"):typeof document.mozHidden!="undefined"?(ns="mozvisibilitychange",Wt="mozVisibilityState"):typeof document.msHidden!="undefined"?(ns="msvisibilitychange",Wt="msVisibilityState"):typeof document.webkitHidden!="undefined"&&(ns="webkitvisibilitychange",Wt="webkitVisibilityState"));var Sm=t=>{globalThis.document&&(t(document[Wt]),document.addEventListener(ns,function(){t(document[Wt])},!1))};class Nm{constructor(e){this.wrapper=document.createElement("div"),this.wrapper.addEventListener("click",()=>{this.wrapper.focus()}),this.wrapper.classList.add("nodesystem-socket-legend"),e.wrapper.appendChild(this.wrapper),this.updateTypes(Object.entries(e.colorStore.colors)),e.colorStore.on("colors",s=>{this.updateTypes(s)})}updateTypes(e){this.wrapper.style.setProperty("--max-height",(1+e.length)*30+"px"),this.wrapper.innerHTML=`<input type="checkbox"/><div class="socket-legend-title">Legend</div> 
<div class="socket-legend-type-wrapper">
${e.map(([s,n])=>`
<div class="socket-legend-col" style="background-color:${n}"></div><div class="socket-legend-type">${s}</div>
`).join("")}
</div>
`}}class Pm extends Ze{constructor(e){var s,n,r,i,a;super(),this.width=0,this.height=0,this.top=0,this.left=0,this.x=window.innerWidth/2,this.y=window.innerHeight/2,this.s=1,this.mx=0,this.my=0,this.mdx=0,this.mdy=0,this.rmx=0,this.rmy=0,this.mouseDown=!1,this.keyMap={},this.selectedNodes=[],this.selectedNodesDown=[],this.clipboard=[],this.system=e,this.colorStore=new Am(this),this.wrapper=(n=(s=e.options)==null?void 0:s.wrapper)!=null?n:document.createElement("div"),this.wrapper.classList.add("nodesystem-wrapper"),e.options.parent&&e.options.parent.appendChild(this.wrapper),(r=e.options)!=null&&r.hideLegend||new Nm(this),this.transformWrapper=document.createElement("div"),this.transformWrapper.classList.add("nodesystem-transform"),this.wrapper.appendChild(this.transformWrapper),this.errorWrapper=document.createElement("div"),this.errorWrapper.classList.add("nodesystem-errors"),this.wrapper.appendChild(this.errorWrapper),this.nodeContainer=document.createElement("div"),this.nodeContainer.classList.add("nodes-container"),this.transformWrapper.append(this.nodeContainer),this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("viewBox","0 0 1 1"),this.svg.setAttribute("height","1"),this.svg.setAttribute("width","1"),this.svg.setAttribute("preserveAspectRatio","none"),this.svg.style.transform=`scale(${(i=window.devicePixelRatio)!=null?i:1})`,this.transformWrapper.appendChild(this.svg),this.addMenu=new _m(this),this.boxSelection=new xm(this),this.boxSelection.on("selection",o=>{this.selectedNodes=o}),this.dpr=(a=window.devicePixelRatio)!=null?a:1,this.bindEventListeners(),this.handleResize(),Sm(()=>{setTimeout(()=>{this.handleResize(),this.system.nodes.forEach(o=>{o.view.updateViewPosition()})},500)})}showErrorMessages(e){if(!e){this.errorWrapper.innerHTML="";return}const s=Array.isArray(e)?e:[e];this.errorWrapper.innerHTML=s.map(n=>`<p>${n}</p>`).join("")}createFloatingConnection(e){const s=new Em(e,{x:this.mx,y:this.my});return new Promise(n=>{s.once("remove",n),s.once("connection",({inputNode:r,outputNode:i,keyIn:a,indexOut:o})=>{i.connectTo(r,o,a)})})}setActive(e,{shiftKey:s=!1,ctrlKey:n=!1}={}){if(!e)this.activeNode&&(this.activeNode.view.state="normal",this.activeNode=void 0),this.selectedNodes.forEach(r=>r.view.state="normal"),this.selectedNodes=[];else if(s&&n){if(this.activeNode&&(this.activeNode.view.state="normal",this.activeNode=void 0),this.activeNode=e,this.activeNode.view.state="active",this.activeNode.outputs.length){const r=this.system.createNode({state:{},attributes:{type:"debug",id:"0",name:"debug",refs:[],pos:{x:this.activeNode.view.x+this.activeNode.view.width+10,y:this.activeNode.view.y}}});r.enableUpdates=!0,this.activeNode.connectTo(r,0,"input")}}else s?this.activeNode?(this.selectedNodes.push(this.activeNode),this.activeNode.view.state="selected",this.activeNode=e,this.activeNode.view.state="active"):(this.activeNode=e,this.activeNode.view.state="active"):this.activeNode?(this.selectedNodes.forEach(r=>r.view.state="normal"),this.selectedNodes=[],this.activeNode!==e&&(this.activeNode.view.state="normal",this.activeNode=e,this.activeNode.view.state="active")):(this.activeNode=e,this.activeNode.view.state="active")}getSelectedNodes(){return this.activeNode&&this.selectedNodes.includes(this.activeNode)?this.selectedNodes:this.activeNode?[...this.selectedNodes,this.activeNode]:[...this.selectedNodes]}projectLocalToWindow(e,s){const n=e+this.x,r=s+this.y,i=n*this.s,a=r*this.s;return{x:i,y:a}}projectWindowToLocal(e,s){const n=e-this.x,r=s-this.y,i=n/this.s,a=r/this.s;return{x:i,y:a}}setTransform({x:e=this.x,y:s=this.y,s:n=this.s}={}){this.x=e,this.y=s,this.s=n,this.panzoom.setTransform(e,s,n)}showAddMenu(){this.addMenu.show({x:this.rmx,y:this.rmy}).then(e=>{const s=this.system.createNode(e);this.setActive(s)}).catch()}bindEventListeners(){window.addEventListener("keydown",e=>this.handleKeyDown(e)),window.addEventListener("keyup",e=>this.handleKeyUp(e)),this.wrapper.addEventListener("mousemove",e=>this.handleMouseMove(e)),this.wrapper.addEventListener("contextmenu",e=>{e.preventDefault(),this.showAddMenu()}),this.wrapper.addEventListener("mousedown",e=>this.handleMouseDown(e)),this.wrapper.addEventListener("touchdown",e=>this.handleMouseDown(e)),this.wrapper.addEventListener("mouseup",e=>this.handleMouseUp(e)),window.addEventListener("resize",Gs(()=>this.handleResize(),10)),this.panzoom=nm(this.transformWrapper,{minZoom:.2,maxZoom:5,onTransform:({x:e,y:s,scale:n})=>{this.x=e,this.y=s,this.s=n;const r=(n-.2)/5/2,i=n*this.height*.02,a=n*this.width*.02;this.wrapper.style.setProperty("--scale",Math.abs(r)+""),this.wrapper.style.setProperty("--scale-x",i+"%"),this.wrapper.style.setProperty("--scale-y",a+"%"),this.wrapper.style.setProperty("--pos-x",`${e}px`),this.wrapper.style.setProperty("--pos-y",`${s}px`),this.system.setMetaData({transform:{x:e,y:s,s:n}})}})}handleResize(){const{width:e,height:s,top:n,left:r}=this.wrapper.getBoundingClientRect();this.width=e,this.height=s,this.top=n,this.left=r,this.emit("resize",{width:e,height:s})}handleMouseMove(e){this.ev=e;const{clientX:s,clientY:n,shiftKey:r,ctrlKey:i}=e;this.rmx=s-this.left,this.rmy=n-this.top;const{x:a,y:o}=this.projectWindowToLocal(this.rmx,this.rmy);this.mx=a,this.my=o,this.emit("mousemove",{x:a,y:o,mx:this.rmx,my:this.rmy,keys:Re(ye({},this.keyMap),{shiftKey:r,ctrlKey:i})})}handleMouseDown(e){const{shiftKey:s,ctrlKey:n,clientX:r,clientY:i,button:a,target:o}=e;s||this.setActive(),e.path&&![...e.path].includes(this.addMenu.wrapper)&&(this.addMenu.hide(),e.preventDefault()),this.mouseDown=!0,this.rmx=r-this.left,this.rmy=i-this.top;const{x:l,y:c}=this.projectWindowToLocal(this.rmx,this.rmy);this.selectedNodesDown=this.selectedNodes.map(h=>[h.view.x,h.view.y]),this.emit("mousedown",{x:l,y:c,mx:this.rmx,my:this.rmy,target:o,keys:Re(ye({},this.keyMap),{shiftKey:s,ctrlKey:n,button:a})})}handleMouseUp({clientX:e,clientY:s,shiftKey:n,ctrlKey:r}){this.mouseDown=!1;const i=e-this.left,a=s-this.top;this.emit("mouseup",{x:i,y:a,keys:Re(ye({},this.keyMap),{shiftKey:n,ctrlKey:r})})}handleKeyUp({key:e}){e===" "&&(e="space"),delete this.keyMap[e&&e.toLowerCase()],this.emit("keyup",{key:e,keys:this.keyMap})}handleKeyDown({key:e,ctrlKey:s,shiftKey:n}){switch(e=e===" "?"space":e.toLowerCase(),this.keyMap[e&&e.toLowerCase()]=!0,e==="space"&&this.ev&&this.handleMouseDown(this.ev),e){case"escape":this.addMenu.hide();break;case"a":n&&this.showAddMenu();break;case"c":if(n&&s)window.confirm("Clear Storage?")&&(localStorage.clear(),window.location.reload());else if(s){const r=this.selectedNodes.splice(0);this.activeNode&&!r.includes(this.activeNode)&&r.push(this.activeNode),this.clipboard=r.map(i=>i.deserialize()).map(i=>(i.attributes.pos.x-=this.mx,i.attributes.pos.y-=this.my,i))}else this.selectedNodes.length&&this.activeNode&&this.selectedNodes[0].connectTo(this.activeNode);break;case"f":this.setTransform({x:0,y:0,s:1});break;case"g":this.keyMap.g||(this.mdx=this.mx,this.mdy=this.my,this.selectedNodesDown=this.selectedNodes.map(r=>[r.view.x,r.view.y]));break;case"x":s?(this.activeNode&&this.system.spliceNode(this.activeNode),this.selectedNodes.forEach(r=>this.system.spliceNode(r))):(this.activeNode&&this.system.removeNode(this.activeNode),this.selectedNodes.forEach(r=>r.remove()));break;case"z":this.system.history&&s&&(n?this.system.history.redo():this.system.history.undo());break;case"l":this.activeNode&&(console.log(this.activeNode),console.log(this.activeNode.deserialize()));break;case"v":s&&this.clipboard.map(r=>{const{pos:{x:i=0,y:a=0}={}}=r.attributes;return r.attributes.pos={x:i+this.mx,y:a+this.my},r}).forEach(r=>this.system.createNode(r));break}this.emit("keydown",{key:e,keys:Re(ye({},this.keyMap),{ctrlKey:s})})}}const xn=Le("NodeFactory");class Lm{constructor(e){this.id=Ch(),this.system=e,xn("Initialized")}reset(){this.id.reset(),xn("Reset id generator")}create(e){const{attributes:s}=e;s.type=s.type.toLowerCase();const n=this.system.store.getByType(s.type);s.id=this.id(+s.id);const r=new n.node(this.system,e);if(this.system.options.view&&n.view){const i=new n.view(r);r.bindView(i)}return n.type==="output"&&this.system.setOutputNode(r),xn(`Created node with type ${s.type}`,e),r}}const Ns=Le("NodeHistory");class Tm{constructor(e){this.system=e,this.history=[],this.historyIndex=-1,this.isApplyingChanges=!1,Ns("Initialized")}addAction(){!this.system.isLoaded||this.isApplyingChanges||(this._timeout?clearTimeout(this._timeout):this.prevState=this.system.serialize().nodes,this._timeout=setTimeout(()=>{this._addAction(),this._timeout=void 0},200))}_addAction(){if(Ns("Register History Step"),this.isApplyingChanges)return;this.historyIndex!==this.history.length-1&&(this.history.length=this.historyIndex+1);const e=this.system.serialize().nodes,[s,n]=om(this.prevState,e);!n||!s||(this.history.push({previous:n,next:s}),this.history.length>60&&(this.history=this.history.reverse().slice(0,60).reverse()),this.historyIndex=this.history.length-1)}serialize(){return{steps:this.history,index:this.historyIndex}}deserialize(e){this.historyIndex=e.index,this.history=e.steps}undo(){if(this.isApplyingChanges)return;if(this.isApplyingChanges=!0,this.historyIndex<0){Ns("Reached beginning of Stack"),this.isApplyingChanges=!1;return}const{previous:e}=this.history[this.historyIndex],s=this.system.serialize(),n=Ws(s.nodes,e);s.nodes=n,this.system.load(s),this.historyIndex--,this.isApplyingChanges=!1}redo(){if(this.isApplyingChanges)return;if(this.isApplyingChanges=!0,this.historyIndex>=this.history.length-1){Ns("Reached end of Stack"),this.isApplyingChanges=!1;return}const{next:e}=this.history[this.historyIndex+1],s=this.system.serialize(),n=Ws(s.nodes,e);s.nodes=n,this.system.load(s),this.historyIndex++,this.isApplyingChanges=!1}}class Im{constructor(e){this.system=e}parseSystem(e){const{nodes:s}=e,n=new Map,r=s.map(i=>{const a=this.system.factory.create(i);return a.enableUpdates=!1,n.set(a.id,a),a});return r.forEach(i=>{i.attributes.refs&&i.attributes.refs.forEach(a=>{const o=n.get(a.id);if(!o)throw new Error(`Failed ref: from ${i.attributes.name||i.attributes.id} to ${a.id} `);i.connectTo(o,a.out,a.in)})}),r.forEach(i=>{i.enableUpdates=!0,i.update()}),r}parseType(e){const{compute:s,meta:n,outputs:r,title:i,parameters:a={}}=e,o=class extends yr{constructor(c,h){if(super(c,h),s&&(this.compute=s),r){const u=Array.isArray(r)?r:[r];this.outputs=u.map(d=>new Ds(this,d))}Object.entries(a).forEach(([u,d])=>{this.states[u]=new br(this,u,d)})}},l=Object.values(a).filter(c=>c.internal!==!0).map(c=>c.type);if(this.system.options.view){const c=class extends wr{constructor(u){super(u)}};return Re(ye({},e),{inputs:l,title:i,meta:n,node:o,view:c})}return Re(ye({inputs:l},e),{title:i,meta:n,node:o})}getData(){return{meta:this.system.meta,nodes:this.system.nodes.map(e=>e.deserialize())}}}const Dm=Le("NodeTypeStore");class jm extends Ze{constructor(){super(),this.types=[],this.typeMap={}}add(e){Dm("register new type "+e.title,e),this.types=[...this.types.filter(s=>s.type.toLowerCase()!==e.type.toLowerCase()),e],this.typeMap[e.type.toLowerCase()]=e,this.emit("types",this.types),this.emit("type",e)}clear(){this.typeMap={},this.types=[],this.emit("types",this.types)}getByType(e){if(e in this.typeMap)return this.typeMap[e];if(e.toLowerCase()in this.typeMap)return this.typeMap[e.toLowerCase()];throw console.log({typeMap:this.typeMap}),new Error("NodeTypeStore: type "+e+" does not exist")}}var Om=Object.defineProperty,Vm=Object.getOwnPropertyDescriptor,Cm=(t,e,s,n)=>{for(var r=n>1?void 0:n?Vm(e,s):e,i=t.length-1,a;i>=0;i--)(a=t[i])&&(r=(n?a(e,s,r):a(r))||r);return n&&r&&Om(e,s,r),r};let zm=0;const Rt=Le("NodeSystem");class Sl extends Ze{constructor(e={}){super(),this.parser=new Im(this),this.meta={lastSaved:Date.now()},this.isLoaded=!1,this.isPaused=!1,this.nodes=[],this.states=[],this.id=zm++;const{view:s=!1,wrapper:n,defaultNodes:r=!1,registerNodes:i=!1,connectionColors:a=!1,showUpdates:o=!1,deferCompute:l=!1}=e;this.options={view:s,wrapper:n,showUpdates:o,deferCompute:l};try{if(Rt(`Instantiated id:${this.id}`),this.store=new jm,this.factory=new Lm(this),this.history=new Tm(this),s&&(this.view=new Pm(this),a&&this.view.colorStore.setColors(a)),r){const c=[];r===!0?c.push(...Object.entries(_n).map(h=>h[1])):Array.isArray(r)&&r.length&&r.forEach(h=>{typeof h=="string"&&h in _n&&c.push(_n[h])}),c.forEach(h=>this.registerNodeType(h))}i&&i.length&&i.forEach(c=>this.registerNodeType(c))}catch(c){console.warn("Error Loading",c),this.emit("error",{type:"init",error:c})}}get result(){return this._result}set result(e){this._result=e,this.isLoaded&&this.emit("result",e)}setMetaData(e){this.meta=ye(ye({},this.meta),e),this.save()}load(e){var s;if(Rt("Loading NodeSystemData",{systemData:e}),!e){this.isLoaded=!0;return}try{this.isLoaded=!1,this.isPaused=!0,this.nodes.forEach(r=>r.enableUpdates=!1),this.nodes.forEach(r=>r.remove()),this.factory.reset();const n=this.parser.parseSystem(e);return this.addNodes(n),this.meta=e.meta||{lastSaved:0},this.meta.lastSaved=Date.now(),(s=this==null?void 0:this.view)==null||s.setTransform(this.meta.transform),Rt(`Loaded NodeSystemData with ${n.length} Nodes`,e),"history"in e&&this.history.deserialize(e.history),this.isPaused=!1,this.isLoaded=!0,this.result=this._result,this}catch(n){console.warn("Error",n),this.emit("error",{type:"loading",error:n})}}serialize(){return Re(ye({},this.parser.getData()),{history:this.history.serialize(),meta:this.meta})}save(){this.isLoaded&&(this.meta.lastSaved=Date.now(),Rt("save system",this.serialize()),this.emit("save",this.serialize()))}setOutputNode(e){this.outputNode&&this.outputNode.remove(),this.outputNode=e,e.on("computedData",s=>{this.options.deferCompute?this.result={type:"output",parameters:s}:this.result=s})}addNodes(e){e.forEach(s=>this.addNode(s))}addNode(e){this.history.addAction(),this.nodes.push(e),this.save()}removeNode(e){this.history.addAction(),e.enableUpdates=!1,e.view.remove(),Object.values(e.states).forEach(s=>s.remove()),e.outputs.forEach(s=>s.remove()),e.getInputs().forEach(s=>s.remove()),this.nodes=this.nodes.filter(s=>s!==e),this.save(),Rt(`Removed Node id:${e.id} type:${e.attributes.type}`,e.deserialize())}spliceNode(e){const s=e.getInputs().map(r=>{var i;return(i=r==null?void 0:r.connection)==null?void 0:i.output}),n=e.outputs.map(r=>r.connections).flat().map(r=>r.input);for(let r=0;r<s.length;r++){const i=s[r],a=n[r];!a||!i||i.connectTo(a)}return this.removeNode(e)}getSockets(e){const s=this.nodes.map(n=>[...n.getSockets()]).flat();return e?s.filter(n=>n.type===e):s}getInputs(e){const s=this.nodes.map(n=>n.getInputs()).flat();return!e||e==="*"?s:s.filter(n=>n.type.includes("*")||n.type.includes(e))}getOutputs(e){const s=this.nodes.map(n=>n.outputs).flat();return!e||e.includes("*")?s:s.filter(n=>n.type==="*"||e.includes(n.type))}createNode(e){const s=this.factory.create(e);return this.addNode(s),this.save(),Rt(`Created new node id:${e.attributes.id} type:${e.attributes.type}`,e),s}getNodes(){return this.nodes}findNodeById(e){return this.nodes.filter(s=>s.id===e)[0]}getNodeTypes(){return this.store.types}registerNodeType(e){if(Array.isArray(e)){e.forEach(s=>this.registerNodeType(s));return}if("node"in e)this.store.add(e);else{const s=this.parser.parseType(e);this.store.add(s)}}}Cm([Ih(1e3)],Sl.prototype,"save",1);const $m=(t,e)=>e.some(s=>t instanceof s);let Sa,Na;function Rm(){return Sa||(Sa=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Fm(){return Na||(Na=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nl=new WeakMap,Hn=new WeakMap,Pl=new WeakMap,Mn=new WeakMap,_r=new WeakMap;function Bm(t){const e=new Promise((s,n)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{s(kt(t.result)),r()},a=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(s=>{s instanceof IDBCursor&&Nl.set(s,t)}).catch(()=>{}),_r.set(e,t),e}function Um(t){if(Hn.has(t))return;const e=new Promise((s,n)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{s(),r()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Hn.set(t,e)}let Xn={get(t,e,s){if(t instanceof IDBTransaction){if(e==="done")return Hn.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Pl.get(t);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return kt(t[e])},set(t,e,s){return t[e]=s,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Wm(t){Xn=t(Xn)}function qm(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const n=t.call(En(this),e,...s);return Pl.set(n,e.sort?e.sort():[e]),kt(n)}:Fm().includes(t)?function(...e){return t.apply(En(this),e),kt(Nl.get(this))}:function(...e){return kt(t.apply(En(this),e))}}function Hm(t){return typeof t=="function"?qm(t):(t instanceof IDBTransaction&&Um(t),$m(t,Rm())?new Proxy(t,Xn):t)}function kt(t){if(t instanceof IDBRequest)return Bm(t);if(Mn.has(t))return Mn.get(t);const e=Hm(t);return e!==t&&(Mn.set(t,e),_r.set(e,t)),e}const En=t=>_r.get(t);function Xm(t,e,{blocked:s,upgrade:n,blocking:r,terminated:i}={}){const a=indexedDB.open(t,e),o=kt(a);return n&&a.addEventListener("upgradeneeded",l=>{n(kt(a.result),l.oldVersion,l.newVersion,kt(a.transaction))}),s&&a.addEventListener("blocked",()=>s()),o.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",()=>r())}).catch(()=>{}),o}const Gm=["get","getKey","getAll","getAllKeys","count"],Ym=["put","add","delete","clear"],kn=new Map;function Pa(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kn.get(e))return kn.get(e);const s=e.replace(/FromIndex$/,""),n=e!==s,r=Ym.includes(s);if(!(s in(n?IDBIndex:IDBObjectStore).prototype)||!(r||Gm.includes(s)))return;const i=async function(a,...o){const l=this.transaction(a,r?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[s](...o),r&&l.done]))[0]};return kn.set(e,i),i}Wm(t=>Re(ye({},t),{get:(e,s,n)=>Pa(e,s)||t.get(e,s,n),has:(e,s)=>!!Pa(e,s)||t.has(e,s)}));const xr=(()=>Xm("keyval-store",1,{upgrade(t){t.createObjectStore("keyval")}}))();async function rs(t,e){return(await xr).put("keyval",e,t)}async function js(t){return(await xr).get("keyval",t)}async function Jm(t){return(await xr).delete("keyval",t)}const Qm=JSON.parse(localStorage.getItem("pt_local_state")),as=ye({},Qm),Zm=Fo((t,e)=>{as[t]=e,localStorage.setItem("pt_local_state",JSON.stringify(as))},100,!1);var nt={get(t,e){var s;return as[t]=(s=as[t])!=null?s:e,as[t]},set:Zm};let La=0;class Ll extends Ze{constructor({canvas:e,width:s,height:n,clearColor:r="ffffff",alpha:i=!1,camPos:a=[0,2,4]}={}){if(super(),this.scene=new ur,this.lastCamPos=new ie(0,0,0),this.canvas=e,(!s||!n)&&e){const o=e.getBoundingClientRect();s=o.width,n=o.height}!globalThis.document||(this.renderer=new o1({canvas:e,width:s,premultipliedAlpha:!0,height:n,alpha:i,antialias:!0}),this.gl=this.renderer.gl,this.gl.clearColor(...ri(r),0),this.renderer.gl.canvas&&(this.canvas=this.renderer.gl.canvas),this.camera=new Y1(this.gl,{fov:70,aspect:s/n}),this.lastCamPos.set(a),this.camera.position.set(a),this.camera.lookAt(new ie(0,0,0)),e&&(this.controls=new Au(this.camera,{element:e,target:new ie(0,.2,0),maxPolarAngle:1.6,minDistance:.2,maxDistance:15,ease:.7,rotateSpeed:.5,inertia:.5})),this.bindEventlisteners(),e&&this.render())}setControlTarget(e){Number.isNaN(e.x)||(this.controlTarget||(this.controls.target=e),this.controlTarget=e)}setClearColor(e){this.gl.clearColor(...ri(e),1)}renderScene(e){this.renderer.render({scene:e,camera:this.camera})}render(){requestAnimationFrame(this.render.bind(this)),this.lastCamPos.equals(this.camera.position)||(this.lastCamPos.set(this.camera.position),this.emit("camPos",this.camera.position.toArray())),this.controlTarget&&(this.controlTarget.squaredDistance(this.controls.target)<5e-5?this.controls.target=this.controlTarget:this.controls.target.lerp(this.controlTarget,.05)),this.controls.update(),this.renderer.render({scene:this.scene,camera:this.camera}),this.emit("perf",performance.now()-La),La=performance.now()}bindEventlisteners(){const e=Gs(()=>this.handleResize(),500);window.addEventListener("resize",()=>{this.canvas.classList.add("resizing"),e()})}handleResize(){let e=this.canvas.parentElement;e||(e=this.canvas);const{width:s,height:n}=e.getBoundingClientRect();this.renderer.setSize(s,n),this.camera.perspective({aspect:this.gl.canvas.width/this.gl.canvas.height}),this.canvas.classList.remove("resizing")}}var Km=`precision highp float;
precision highp int;
#define GLSLIFY 1

uniform float uTime;
uniform sampler2D tMap;
uniform vec3 uFogColor;
uniform float uFogNear;
uniform float uFogFar;
uniform float texScale;

varying vec2 vUv;
varying vec4 vMVPos;
varying vec3 vPos;

void main() {
    vec3 tex = texture2D(tMap, vUv*texScale).rgb;
    
    // add the fog relative to the distance from the camera
    float dist = length(vMVPos);
    float fog = smoothstep(uFogNear, uFogFar, dist);
    tex = mix(tex, uFogColor, fog);
    
    // add some fog along the height of each tree to simulate low-lying fog 
    tex = mix(tex, uFogColor, smoothstep(0.0, -1.0, vPos.y)); 
    
    gl_FragColor.rgb = tex;
}`,ev=`precision highp float;
precision highp int;
#define GLSLIFY 1

attribute vec2 uv;
attribute vec3 position;

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float uTime;

varying vec2 vUv;
varying vec4 vMVPos;
varying vec3 vPos;

void main() {
    vUv = uv;
    
    // copy position so that we can modify the instances
    vec3 pos = position;
    
    // pass scaled object position to fragment to add low-lying fog
    vPos = pos;
    
    // pass model view position to fragment shader to get distance from camera 
    vMVPos = modelViewMatrix * vec4(pos, 1.0);
    
    gl_Position = projectionMatrix * vMVPos;
}`,tv=`#version 300 es
precision highp float;
#define varying in
#define texture2D texture
#define gl_FragColor FragColor
out vec4 FragColor;
precision highp float;
#define GLSLIFY 1
uniform sampler2D tMap;
varying vec4 vMVPos;
vec3 normals(vec3 pos) {
  vec3 fdx = dFdx(pos);
  vec3 fdy = dFdy(pos);
  return normalize(cross(fdx, fdy));
}
vec2 matcap(vec3 eye, vec3 normal) {
  vec3 reflected = reflect(eye, normal);
  float m = 2.8284271247461903 * sqrt(reflected.z + 1.0);
  return reflected.xy / m + 0.5;
}
void main() {
  vec3 normal = normals(vMVPos.xyz);
  // We're using the matcap to add some shininess to the model
  vec3 mat = texture2D(tMap, matcap(normalize(vMVPos.xyz), normal)).rgb;
  
  gl_FragColor.rgb = mat;
  gl_FragColor.a = 1.0;
}
`,sv=`#version 300 es
#define GLSLIFY 1
#define attribute in
#define varying out

attribute vec3 position;

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;

varying vec4 vMVPos;

void main() {
  vMVPos = modelViewMatrix * vec4(position, 1.0);
  gl_Position = projectionMatrix * vMVPos;
}
`,nv=`precision highp float;
#define GLSLIFY 1
float pointSize = 0.02;
varying float distToCamera;
void main() {
    vec2 uv = gl_PointCoord.xy;

    float dist = 2.0 - distToCamera;
    
    float circle = pointSize*dist> length(uv - 0.5)?0.8:0.0;

    float xMask =min(abs(uv.x-0.5),abs(uv.y-0.5));

    circle = xMask>0.003?0.0:circle;

    gl_FragColor.rgb = vec3(0.0, 0.0, 0.0);
    gl_FragColor.a = circle;
}`,rv=`#define GLSLIFY 1
attribute vec3 position;
uniform mat4 modelMatrix;
uniform mat4 viewMatrix;
uniform mat4 projectionMatrix;
varying float distToCamera;

void main() {

    // modelMatrix is one of the automatically attached uniforms when using the Mesh class
    vec4 mPos = modelMatrix * vec4(position, 1.0);

    
    // get the model view position so that we can scale the points off into the distance
    vec4 mvPos = viewMatrix * mPos;

    gl_PointSize = 300.0 / length(mvPos.xyz);
    distToCamera = -mvPos.z/10.0+1.0;
    gl_Position = projectionMatrix * mvPos;
}`,iv=`precision highp float;
precision highp int;
#define GLSLIFY 1

varying float vDepth;
uniform float maxDepth;

void main(){
    float v = vDepth/maxDepth;
    gl_FragColor=vec4(v,v,0.5,.9);
}
`,av=`precision highp float;
precision highp int;
#define GLSLIFY 1

attribute vec2 uv;
attribute vec3 position;
attribute float depth;

varying float vDepth;

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat3 normalMatrix;

void main(){
    vDepth = depth;
    gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);
}
`,ov=`precision highp float;
#define GLSLIFY 1

varying vec3 vNormal;
varying vec4 vMVPos;

uniform sampler2D tMap;

vec2 matcap(vec3 eye, vec3 normal) {
  vec3 reflected = reflect(eye, normal);
  float m = 2.8284271247461903 * sqrt(reflected.z + 1.0);
  return reflected.xy / m + 0.5;
}

void main() {
    vec3 normal = normalize(vNormal);
    float lighting = dot(normal, normalize(vec3(-0.3, 0.8, 0.6)));

    vec3 mat = texture2D(tMap, matcap(normalize(vMVPos.xyz), normal*0.8)).rgb;

    gl_FragColor.rgb = mat;
    gl_FragColor.a = 1.0;
}
`,lv=`#define GLSLIFY 1
attribute vec3 position;
attribute vec3 normal;

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat3 normalMatrix;

varying vec3 vNormal;
varying vec4 vMVPos;

void main() {
    vNormal = normalize(normalMatrix * normal);
    vMVPos = modelViewMatrix * vec4(position, 1.0);
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,cv=`precision highp float;
precision highp int;
#define GLSLIFY 1

varying vec3 vNormal;
varying vec2 vUv;

void main(){
    
    vec3 normal=vNormal;
    
    float v = normal.z;
    
    gl_FragColor.rgb=vec3(v,v,v);
    gl_FragColor.rgb=normal;
    // gl_FragColor.rgb=vec3(vUv.x,vUv.y,vNormal.x);
    
    gl_FragColor.a=1.0;
    
}
`,hv=`precision highp float;
precision highp int;
#define GLSLIFY 1

attribute vec2 uv;
attribute vec3 position;
attribute vec3 normal;

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat3 normalMatrix;

varying vec3 vNormal;
varying vec2 vUv;

void main() {
    vUv = uv;

    vNormal = normal;

    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`;const Ta={fragment:Km,vertex:ev},uv=t=>new Jt(t,{fragment:cv,vertex:hv,cullFace:t.NONE}),fv=t=>new Jt(t,{fragment:iv,vertex:av,uniforms:{maxDepth:{value:1}},depthTest:!1}),Ia={fragment:nv,vertex:rv},Tl=t=>{const e=new fr(t),s=new Image;return s.onload=()=>e.image=s,s.src="assets/matcap_green.jpg",new Jt(t,{vertex:sv,fragment:tv,uniforms:{tMap:{value:e}},cullFace:t.NONE})},dv=t=>{const e=new fr(t),s=new Image;return s.onload=()=>e.image=s,s.src="assets/matcap_green.jpg",new Jt(t,{vertex:lv,fragment:ov,uniforms:{tMap:{value:e}},cullFace:t.NONE})},pv=gr();let je,pt,Gn,is,Da=!1;function mv(){Da||(Da=!0,je=new Ll({width:100,height:100,alpha:!0,clearColor:"000"}),pt=new Ho(je.gl,{geometry:new Xo(je.gl,{width:0,height:0,depth:0}),program:Tl(je.gl)}),is=document.createElement("canvas"),is.width=is.height=100,Gn=is.getContext("2d"),pt.setParent(je.scene))}async function vv({pd:t,geo:e}){mv();let s;if(e&&(s=e),s||(s=(await pv.executeNodeSystem(t,{stemResX:12,stemResY:12})).geometry),!s)return;pt.geometry=mr(je.gl,s),pt.geometry.computeBoundingBox(),je.camera.fov=10,je.camera.position.x=pt.geometry.bounds.center.x,je.camera.position.y=pt.geometry.bounds.center.y;const r=(pt.geometry.bounds.max.y-pt.geometry.bounds.min.y)/2/Math.tan(Math.PI*je.camera.fov/360);if(je.camera.position.z=r/5,je.camera.lookAt(pt.geometry.bounds.center),je.renderScene(je.scene),await new Promise(i=>setTimeout(i,100)),!(je.canvas.width===0||je.canvas.height===0))return Gn.clearRect(0,0,100,100),Gn.drawImage(je.canvas,0,0),is.toDataURL("image/webp",1)}class gv{constructor(e,s,n){this.name=e,this.version=s,this.os=n,this.type="browser"}}class yv{constructor(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}}class wv{constructor(e,s,n,r){this.name=e,this.version=s,this.os=n,this.bot=r,this.type="bot-device"}}class bv{constructor(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}}class _v{constructor(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}}const xv=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Mv=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ja=3,Ev=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",xv]],Oa=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Va(t){return t?Ca(t):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new _v:typeof navigator!="undefined"?Ca(navigator.userAgent):Sv()}function kv(t){return t!==""&&Ev.reduce((e,[s,n])=>{if(e)return e;const r=n.exec(t);return!!r&&[s,r]},!1)}function Ca(t){const e=kv(t);if(!e)return null;const[s,n]=e;if(s==="searchbot")return new bv;let r=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);r?r.length<ja&&(r=[...r,...Nv(ja-r.length)]):r=[];const i=r.join("."),a=Av(t),o=Mv.exec(t);return o&&o[1]?new wv(s,i,a,o[1]):new gv(s,i,a)}function Av(t){for(let e=0,s=Oa.length;e<s;e++){const[n,r]=Oa[e];if(r.exec(t))return n}return null}function Sv(){return typeof process!="undefined"&&process.version?new yv(process.version.slice(1)):null}function Nv(t){const e=[];for(let s=0;s<t;s++)e.push("0");return e}function Pv(){return"window"in globalThis}let Il={};const Yn=(()=>{if(!("sessionStorage"in globalThis)){const t={getItem:e=>{},setItem:(e,s)=>{t[e]=s}};return t}return globalThis.sessionStorage})();if("user"in Yn)try{Il=JSON.parse(Yn.getItem("user"))}catch{}const Dl=Ue(Il);Dl.subscribe(t=>Yn.setItem("user",JSON.stringify(t)));const qs=Dl,{VITE_API_URL:Lv="http://localhost:3000"}={VITE_API_URL:"https://plantarium.fly.dev",VITE_SVELTEKIT_APP_VERSION:"1653002786760",VITE_SVELTEKIT_APP_VERSION_FILE:"_app/version.json",VITE_SVELTEKIT_APP_VERSION_POLL_INTERVAL:"0",VITE_SVELTEKIT_AMP:"",BASE_URL:"/_app/",MODE:"production",DEV:!1,PROD:!0};function Tv(t){const s=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(s).split("").map(function(r){return"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(n)}const za=Pv(),Hs=(()=>{let t=za&&localStorage.getItem("token");function e(){if(!t||t.length<10){qs.set({});return}const s=Tv(t);qs.set({username:s.username,id:s.sub})}return e(),{set token(s){t=s,za&&localStorage.setItem("token",s),e()},get token(){return t}}})();async function rt({method:t,path:e,data:s,isJSON:n=!0}){const r={method:t,headers:{}};s&&(r.headers["Content-Type"]="application/json",r.body=JSON.stringify(s)),Hs.token&&(r.headers["access-token"]=`Bearer ${Hs.token}`);const i=await fetch(`${Lv}/${e}`,r);if(i.ok){if(n)try{return await i.json()}catch(o){console.error("Response from "+e+" failed to parse"),console.error(o)}return i.text()}const a=await i.json();return console.error(a),a}function jl(t,e={}){return rt(ye({method:"GET",path:t},e))}function Iv(t,e){return rt({method:"POST",path:t,data:e})}function Dv(t){return rt({method:"GET",path:`api/report/${t}`})}function jv(t){return rt({method:"PUT",path:`api/report/${t}/publish`})}function Ov(t){return rt({method:"DELETE",path:`api/report/${t}`})}function Vv(t){return rt({method:"PUT",path:`api/report/${t}/unpublish`})}function Cv(){return rt({method:"GET",path:"api/report/labels"})}function zv(t,e){return rt({method:"PUT",path:`api/report/${t}`,data:{labels:e}})}function $v(t,e){return rt({method:"PUT",path:`api/report/${t}`,data:e})}var Rv=Object.freeze(Object.defineProperty({__proto__:null,getReport:Dv,publishReport:jv,deleteReport:Ov,unpublishReport:Vv,getAvailableLabels:Cv,setReportLabels:zv,updateReport:$v},Symbol.toStringTag,{value:"Module"}));async function Fv(t,e){const s=await Iv("api/auth/login",{username:t,password:e});Hs.token=s.access_token}function Bv(){Hs.token=""}function Ol(t){return rt({method:"POST",path:"api/report",data:t})}function Vl(){return rt({method:"GET",path:"api/report"})}async function Uv(){const t=await jl("api/user/role",{isJSON:!1});return qs.update(e=>(e.role=t,e)),t}async function Wv(){const t=await jl("api/user/permission");return qs.update(e=>(e.permissions=t,e)),t}var qv=Object.freeze(Object.defineProperty({__proto__:null,login:Fv,logout:Bv,submitReport:Ol,getReports:Vl,getRole:Uv,getPermission:Wv},Symbol.toStringTag,{value:"Module"}));ye(ye({},Rv),qv);const tt=Le("ProjectManager"),An="pt_project_";class Hv extends Ze{constructor(){super(),this.activeProject=Ue(),this.projects={},this.store=Ue([]),this.loadProjects()}createNewProject(e){const s={meta:Re(ye({},(e==null?void 0:e.meta)||{transform:{x:0,y:0,s:1},name:"DefaultProject"}),{id:hr()}),nodes:(e==null?void 0:e.nodes)||[{attributes:{pos:{x:-100,y:0},type:"stem",id:"1",refs:[{id:"0",out:0,in:"input"}]},state:{origin:{x:0,y:0,z:0},height:2,thiccness:.06,amount:1}},{attributes:{pos:{x:0,y:0},type:"output",id:"0"}}]},n=Object.values(this.projects).map(r=>r.meta.name);if(n.includes(s.meta.name)){let r=s.meta.name.replace(/\d+$/,""),i=0;for(;n.includes(s.meta.name);)s.meta.name=r+i,i++}return tt("created new plant",s),s}createNew(e){const s=this.createNewProject(e);this.emit("new",s),this.saveProject(s),this.setActiveProject(s.meta.id)}async updateProjectMeta(e,s){const n=await this.getProject(e);n.meta=ye(ye({},n.meta),s),tt("update meta",e),this.emit("update",n),this.saveProject(n)}async saveProject(e){const s=JSON.parse(JSON.stringify(e));this.projects[s.meta.id]=s,this.emit("save",s),await rs("pt_project_ids",Object.keys(this.projects)),await rs(An+s.meta.id,s),tt("saved plant id: ",s.meta.id),this.store.set(Object.values(this.projects))}async getProject(e){if(e in this.projects)return this.projects[e];const s=await js(An+e);return this.projects[e]=s,s}async deleteProject(e){e in this.projects?(delete this.projects[e],await Jm(An+e),await rs("pt_project_ids",Object.keys(this.projects)),this.store.set(Object.values(this.projects)),this.emit("delete",e),tt("deleted project with id: "+e)):tt.warn("cant delete project with id: "+e)}async setActiveProject(e){if(this.loadingActiveProject&&await this.loadingActiveProject,e===this.activeProjectId)return;this.activeProjectId=e,this.loadingActiveProject=this.getProject(e);const s=await this.loadingActiveProject;this.loadingActiveProject?(this.activeProjectId=e,this.saveProject(s),this.activeProject.set(s),await rs("pt_active_id",e),tt("set active project to id: "+e),this.emit("load",s),delete this.loadingActiveProject):tt.warn("cant find plant with id: "+e)}async renderThumbnail({project:e,geo:s}){var a;const n=((a=e==null?void 0:e.meta)==null?void 0:a.id)||this.activeProjectId;if(!n||!(n in this.projects))return;const r=performance.now(),i=await vv({pd:e,geo:s});if(i){const o=performance.now()-r;this.projects[n].meta.thumbnail=i,tt("generated thumbnail for "+n+" in "+Math.floor(o)+"ms"),this.saveProject(this.projects[n]),this.store.set(Object.values(this.projects))}else tt.warn("There was an error rendering a thumbnail for: "+n)}async loadProjects(){const e=await js("pt_project_ids")||[];tt("loaded project ids",e);const s=await js("pt_active_id");if(!e.length){const n=this.createNewProject();e.push(n.meta.id),await this.saveProject(n)}await Promise.all(e.map(async n=>{const r=await this.getProject(n);tt("loaded ",n),this.projects[n]=r})),s&&e.includes(s)?this.setActiveProject(s):this.setActiveProject(e[0]),this.store.set(Object.values(this.projects))}setProject(e){this.plant=e,this.emit("plant",e)}getActiveProject(){return this.plant}setSettings(e){this.emit("settings",e)}}const Xv={description:"",transform:{x:63.94975437618115,y:236.56997968981221,s:.36102747024591014},name:"Tree",thumbnail:"data:image/webp;base64,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"},Gv=[{attributes:{pos:{x:-1298,y:-154},type:"stem",id:"1",refs:[{id:"5",out:0,in:"input"}]},state:{origin:{x:0,y:0,z:0},height:3.2,thiccness:.13,amount:1}},{attributes:{pos:{x:384,y:-103},type:"output",id:"0",refs:[]},state:{}},{attributes:{pos:{x:-888,y:-81},id:"2",name:"Split",type:"split",refs:[{id:"3",out:0,in:"input"}]},state:{height:.36,angle:0,amount:2}},{attributes:{pos:{x:-663,y:-61},id:"3",name:"Split",type:"split",refs:[{id:"4",out:0,in:"input"}]},state:{height:.35,angle:0,amount:5}},{attributes:{pos:{x:-462,y:-85},id:"4",name:"Noise",type:"noise",refs:[{id:"10",out:0,in:"input"}]},state:{size:.52,strength:.22}},{attributes:{pos:{x:-199,y:-79},id:"7",name:"Branches",type:"branches",refs:[{id:"14",out:0,in:"input"}]},state:{length:1.6,thiccness:.63,offsetSingle:1,lowestBranch:.2,amount:7}},{attributes:{pos:{x:20,y:-78},id:"8",name:"Noise",type:"noise",refs:[{id:"11",out:0,in:"input"}]},state:{size:1.2,strength:.12}},{attributes:{pos:{x:-320,y:-88},id:"10",name:"Gravity",type:"gravity",refs:[{id:"7",out:0,in:"input"}]},state:{type:"simple",strength:.22}},{attributes:{pos:{x:-1086,y:-109},id:"5",name:"Noise",type:"noise",refs:[{id:"2",out:0,in:"input"}]},state:{size:.32,strength:.5}},{attributes:{pos:{x:165,y:-100},id:"11",name:"Leaf",type:"leaf",refs:[{id:"0",out:0,in:"input"}]},state:{size:.2,shape:[{x:1,y:1,pinned:!0},{x:.62,y:.84,pinned:!1},{x:.54,y:.63,pinned:!1},{x:.38,y:.41,pinned:!0},{x:.44,y:.23,pinned:!1},{x:.64,y:.12,pinned:!1},{x:.98,y:.02,pinned:!0}],lowestLeaf:0,curvature:{x:.5,y:.2},amount:10}},{attributes:{pos:{x:-218,y:286},id:"12",name:"Curve",type:"curve",refs:[{id:"13",out:0,in:"a"}]},state:{value:[{x:0,y:1,pinned:!0},{x:1,y:0,pinned:!0}]}},{attributes:{pos:{x:-74,y:177},id:"13",name:"Math",type:"math",refs:[{id:"11",out:0,in:"size"}]},state:{mode:"multiply",a:0,b:.2}},{attributes:{pos:{x:-89,y:-79},id:"14",name:"Gravity",type:"gravity",refs:[{id:"8",out:0,in:"input"}]},state:{type:"simple",strength:.25}}];var Yv={meta:Xv,nodes:Gv};const Jv={name:"Fern",description:"",transform:{x:211.38675180876214,y:115.91546088675673,s:.3333982577192747},id:"JS46K-CmZ",thumbnail:"data:image/webp;base64,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"},Qv=[{attributes:{pos:{x:1e3,y:-150},type:"output",id:"0",refs:[]},state:{}},{attributes:{pos:{x:-450,y:-150},id:"2",name:"Stem",type:"stem",refs:[{id:"9",out:0,in:"input"}]},state:{origin:{x:0,y:0,z:0},height:1,thiccness:.011,amount:7}},{attributes:{pos:{x:-600,y:-150},id:"7",name:"Vec3",type:"vec3",refs:[{id:"2",out:0,in:"origin"}]},state:{x:0,y:0,z:0}},{attributes:{pos:{x:-750,y:-200},id:"3",name:"Parameter",type:"parameter",refs:[{id:"7",out:0,in:"x"}]},state:{value:0,variation:.4}},{attributes:{pos:{x:-750,y:-50},id:"8",name:"Parameter",type:"parameter",refs:[{id:"7",out:0,in:"z"}]},state:{value:0,variation:.32}},{attributes:{pos:{x:-300,y:-150},id:"9",name:"Rotate",type:"rotate",refs:[{id:"10",out:0,in:"input"}]},state:{axis:"x",spread:!1,angle:0}},{attributes:{pos:{x:-150,y:-150},id:"10",name:"Rotate",type:"rotate",refs:[{id:"1",out:0,in:"input"}]},state:{axis:"y",spread:!0,angle:6.2}},{attributes:{pos:{x:-450,y:100},id:"11",name:"Parameter",type:"parameter",refs:[{id:"9",out:0,in:"angle"}]},state:{value:.87,variation:.27}},{attributes:{pos:{x:150,y:-150},id:"12",name:"Gravity",type:"gravity",refs:[{id:"13",out:0,in:"input"}]},state:{type:"simple",strength:.62}},{attributes:{pos:{x:300,y:-150},id:"13",name:"Branches",type:"branches",refs:[{id:"17",out:0,in:"input"}]},state:{length:.46,thiccness:.42,offsetSingle:.5,lowestBranch:.25,amount:22}},{attributes:{pos:{x:-600,y:150},id:"14",name:"Random",type:"random",refs:[{id:"2",out:0,in:"amount"}]},state:{min:7,max:12}},{attributes:{pos:{x:-600,y:0},id:"16",name:"Parameter",type:"parameter",refs:[{id:"2",out:0,in:"height"}]},state:{value:1,variation:.052}},{attributes:{pos:{x:450,y:-150},id:"17",name:"Noise",type:"noise",refs:[{id:"18",out:0,in:"input"}]},state:{size:6,strength:.03}},{attributes:{pos:{x:600,y:-150},id:"18",name:"Gravity",type:"gravity",refs:[{id:"19",out:0,in:"input"}]},state:{type:"simple",strength:.7}},{attributes:{pos:{x:850,y:-150},id:"19",name:"Leaf",type:"leaf",refs:[{id:"0",out:0,in:"input"}]},state:{size:.2,shape:[{x:1,y:1,pinned:!0},{x:.62,y:.84,pinned:!1},{x:.54,y:.63,pinned:!1},{x:.38,y:.41,pinned:!0},{x:.44,y:.23,pinned:!1},{x:.64,y:.12,pinned:!1},{x:.98,y:.02,pinned:!0}],lowestLeaf:0,curvature:{x:.5,y:.2},amount:40}},{attributes:{pos:{x:729,y:95},id:"21",name:"Vec2",type:"vec2",refs:[{id:"19",out:0,in:"curvature"}]},state:{x:.1,y:.05}},{attributes:{pos:{x:450,y:100},id:"22",name:"Curve",type:"curve",refs:[{id:"23",out:0,in:"a"}]},state:{value:[{x:0,y:1,pinned:!0},{x:1,y:0,pinned:!0}]}},{attributes:{pos:{x:600,y:100},id:"23",name:"Math",type:"math",refs:[{id:"19",out:0,in:"size"}]},state:{mode:"multiply",a:0,b:.04}},{attributes:{pos:{x:450,y:250},id:"24",name:"Parameter",type:"parameter",refs:[{id:"23",out:0,in:"b"}]},state:{value:.04,variation:0}},{attributes:{pos:{x:0,y:-150},id:"1",name:"Noise",type:"noise",refs:[{id:"12",out:0,in:"input"}]},state:{size:1,strength:.02}}];var Zv={meta:Jv,nodes:Qv},Jn=[Zv,Yv];function $a(t,e,s){const n=t.slice();return n[15]=e[s],n}function Ra(t,e,s){const n=t.slice();return n[12]=e[s],n}function Kv(t){let e,s,n,r,i,a,o;return{c(){e=N("p"),s=F("Seems all right"),n=C(),r=N("button"),i=F("Finish Import")},l(l){e=P(l,"P",{});var c=A(e);s=B(c,"Seems all right"),c.forEach(w),n=z(l),r=P(l,"BUTTON",{});var h=A(r);i=B(h,"Finish Import"),h.forEach(w)},m(l,c){T(l,e,c),E(e,s),T(l,n,c),T(l,r,c),E(r,i),a||(o=J(r,"click",t[5]),a=!0)},p:q,i:q,o:q,d(l){l&&w(e),l&&w(n),l&&w(r),a=!1,o()}}}function e2(t){let e,s,n,r,i,a,o,l,c=t[3],h=[];for(let u=0;u<c.length;u+=1)h[u]=Fa($a(t,c,u));return{c(){e=N("p"),s=F("Errors"),n=C();for(let u=0;u<h.length;u+=1)h[u].c();r=C(),i=N("button"),a=F("okay")},l(u){e=P(u,"P",{});var d=A(e);s=B(d,"Errors"),d.forEach(w),n=z(u);for(let p=0;p<h.length;p+=1)h[p].l(u);r=z(u),i=P(u,"BUTTON",{});var f=A(i);a=B(f,"okay"),f.forEach(w)},m(u,d){T(u,e,d),E(e,s),T(u,n,d);for(let f=0;f<h.length;f+=1)h[f].m(u,d);T(u,r,d),T(u,i,d),E(i,a),o||(l=J(i,"click",t[9]),o=!0)},p(u,d){if(d&8){c=u[3];let f;for(f=0;f<c.length;f+=1){const p=$a(u,c,f);h[f]?h[f].p(p,d):(h[f]=Fa(p),h[f].c(),h[f].m(r.parentNode,r))}for(;f<h.length;f+=1)h[f].d(1);h.length=c.length}},i:q,o:q,d(u){u&&w(e),u&&w(n),Pe(h,u),u&&w(r),u&&w(i),o=!1,l()}}}function t2(t){let e,s,n,r,i,a,o,l,c;function h(m){t[6](m)}let u={values:["clipboard","file","examples"]};t[1]!==void 0&&(u.value=t[1]),e=new Yo({props:u}),Ne.push(()=>Ht(e,"value",h));const d=[r2,n2,s2],f=[];function p(m,v){return m[1]==="clipboard"?0:m[1]==="file"?1:m[1]==="examples"?2:-1}return~(a=p(t))&&(o=f[a]=d[a](t)),{c(){K(e.$$.fragment),n=C(),r=N("br"),i=C(),o&&o.c(),l=ae()},l(m){ne(e.$$.fragment,m),n=z(m),r=P(m,"BR",{}),i=z(m),o&&o.l(m),l=ae()},m(m,v){ee(e,m,v),T(m,n,v),T(m,r,v),T(m,i,v),~a&&f[a].m(m,v),T(m,l,v),c=!0},p(m,v){const g={};!s&&v&2&&(s=!0,g.value=m[1],Xt(()=>s=!1)),e.$set(g);let _=a;a=p(m),a===_?~a&&f[a].p(m,v):(o&&(oe(),O(f[_],1,1,()=>{f[_]=null}),le()),~a?(o=f[a],o?o.p(m,v):(o=f[a]=d[a](m),o.c()),I(o,1),o.m(l.parentNode,l)):o=null)},i(m){c||(I(e.$$.fragment,m),I(o),c=!0)},o(m){O(e.$$.fragment,m),O(o),c=!1},d(m){te(e,m),m&&w(n),m&&w(r),m&&w(i),~a&&f[a].d(m),m&&w(l)}}}function Fa(t){let e,s=t[15]+"",n;return{c(){e=N("p"),n=F(s)},l(r){e=P(r,"P",{});var i=A(e);n=B(i,s),i.forEach(w)},m(r,i){T(r,e,i),E(e,n)},p(r,i){i&8&&s!==(s=r[15]+"")&&ve(n,s)},d(r){r&&w(e)}}}function s2(t){let e,s,n=Jn,r=[];for(let a=0;a<n.length;a+=1)r[a]=Ba(Ra(t,n,a));const i=a=>O(r[a],1,1,()=>{r[a]=null});return{c(){e=N("div");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=P(a,"DIV",{class:!0});var o=A(e);for(let l=0;l<r.length;l+=1)r[l].l(o);o.forEach(w),this.h()},h(){k(e,"class","example-wrapper svelte-y598c1")},m(a,o){T(a,e,o);for(let l=0;l<r.length;l+=1)r[l].m(e,null);s=!0},p(a,o){if(o&32){n=Jn;let l;for(l=0;l<n.length;l+=1){const c=Ra(a,n,l);r[l]?(r[l].p(c,o),I(r[l],1)):(r[l]=Ba(c),r[l].c(),I(r[l],1),r[l].m(e,null))}for(oe(),l=n.length;l<r.length;l+=1)i(l);le()}},i(a){if(!s){for(let o=0;o<n.length;o+=1)I(r[o]);s=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)O(r[o]);s=!1},d(a){a&&w(e),Pe(r,a)}}}function n2(t){let e,s,n,r,i,a;return{c(){e=N("label"),s=F("file"),n=C(),r=N("input"),this.h()},l(o){e=P(o,"LABEL",{for:!0});var l=A(e);s=B(l,"file"),l.forEach(w),n=z(o),r=P(o,"INPUT",{type:!0,id:!0,accept:!0}),this.h()},h(){k(e,"for","file"),k(r,"type","file"),k(r,"id","file"),k(r,"accept","application/json")},m(o,l){T(o,e,l),E(e,s),T(o,n,l),T(o,r,l),i||(a=J(r,"change",t[4]),i=!0)},p:q,i:q,o:q,d(o){o&&w(e),o&&w(n),o&&w(r),i=!1,a()}}}function r2(t){let e,s,n,r,i,a;return{c(){e=N("p"),s=F("Paste Here:"),n=C(),r=N("textarea"),this.h()},l(o){e=P(o,"P",{});var l=A(e);s=B(l,"Paste Here:"),l.forEach(w),n=z(o),r=P(o,"TEXTAREA",{name:!0,id:!0,cols:!0,rows:!0,class:!0}),A(r).forEach(w),this.h()},h(){k(r,"name",""),k(r,"id",""),k(r,"cols","30"),k(r,"rows","10"),k(r,"class","svelte-y598c1")},m(o,l){T(o,e,l),E(e,s),T(o,n,l),T(o,r,l),Be(r,t[0]),i||(a=J(r,"input",t[7]),i=!0)},p(o,l){l&1&&Be(r,o[0])},i:q,o:q,d(o){o&&w(e),o&&w(n),o&&w(r),i=!1,a()}}}function i2(t){let e,s;return{c(){e=N("img"),this.h()},l(n){e=P(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ln(e.src,s=t[12].meta.thumbnail)||k(e,"src",s),k(e,"alt",""),k(e,"class","svelte-y598c1")},m(n,r){T(n,e,r)},p:q,d(n){n&&w(e)}}}function Ba(t){var f,p,m;let e,s,n,r,i=((f=t[12])==null?void 0:f.meta.name)+"",a,o,l,c,h,u=((m=(p=t[12])==null?void 0:p.meta)==null?void 0:m.thumbnail)&&i2(t);function d(){return t[8](t[12])}return l=new Ie({props:{name:"import",icon:"checkmark"}}),l.$on("click",d),{c(){e=N("div"),u&&u.c(),s=C(),n=N("div"),r=N("h3"),a=F(i),o=C(),K(l.$$.fragment),c=C(),this.h()},l(v){e=P(v,"DIV",{class:!0});var g=A(e);u&&u.l(g),s=z(g),n=P(g,"DIV",{});var _=A(n);r=P(_,"H3",{});var b=A(r);a=B(b,i),b.forEach(w),o=z(_),ne(l.$$.fragment,_),_.forEach(w),c=z(g),g.forEach(w),this.h()},h(){k(e,"class","example svelte-y598c1")},m(v,g){T(v,e,g),u&&u.m(e,null),E(e,s),E(e,n),E(n,r),E(r,a),E(n,o),ee(l,n,null),E(e,c),h=!0},p(v,g){var _,b;t=v,(b=(_=t[12])==null?void 0:_.meta)!=null&&b.thumbnail&&u.p(t,g)},i(v){h||(I(l.$$.fragment,v),h=!0)},o(v){O(l.$$.fragment,v),h=!1},d(v){v&&w(e),u&&u.d(),te(l)}}}function a2(t){let e,s,n,r,i,a,o;const l=[t2,e2,Kv],c=[];function h(u,d){return u[0]?u[3].length?1:u[2]?2:-1:0}return~(r=h(t))&&(i=c[r]=l[r](t)),{c(){e=N("h2"),s=F("Import"),n=C(),i&&i.c(),a=ae()},l(u){e=P(u,"H2",{});var d=A(e);s=B(d,"Import"),d.forEach(w),n=z(u),i&&i.l(u),a=ae()},m(u,d){T(u,e,d),E(e,s),T(u,n,d),~r&&c[r].m(u,d),T(u,a,d),o=!0},p(u,[d]){let f=r;r=h(u),r===f?~r&&c[r].p(u,d):(i&&(oe(),O(c[f],1,1,()=>{c[f]=null}),le()),~r?(i=c[r],i?i.p(u,d):(i=c[r]=l[r](u),i.c()),I(i,1),i.m(a.parentNode,a)):i=null)},i(u){o||(I(i),o=!0)},o(u){O(i),o=!1},d(u){u&&w(e),u&&w(n),~r&&c[r].d(u),u&&w(a)}}}function o2(t,e,s){let n,r;console.log({examples:Jn});let i,a="examples";function o(m){console.log({s:m});let v;try{v=JSON.parse(m)}catch(g){if(g)return[null,["Not valid JSON",g.message]]}return[v,[]]}function l(m){const v=m.target.files[0];let g=new FileReader;g.readAsText(v),g.onload=_=>{s(0,i=_.target.result)}}const c=We();function h(m=n){Se.createNew(m),c("close")}function u(m){a=m,s(1,a)}function d(){i=this.value,s(0,i)}const f=m=>h(m),p=()=>{s(0,i="")};return t.$$.update=()=>{t.$$.dirty&1&&s(2,[n,r]=o(i),n,(s(3,r),s(0,i)))},[i,a,n,r,l,h,u,d,f,p]}class l2 extends fe{constructor(e){super(),de(this,e,o2,a2,pe,{})}}const c2=gr();async function h2(t,e,s){var r,i;const n=await c2.executeNodeSystem(t,e);if(!n.geometry){n.errors&&ct(n.errors[0],{type:"error"});return}if(s==="obj"){const a=K0(n.geometry);Oh(a,"plant-"+(((r=t==null?void 0:t.meta)==null?void 0:r.name)||((i=t==null?void 0:t.meta)==null?void 0:i.id)))}}function u2(t){let e,s,n,r,i,a,o,l;return n=new Ie({props:{name:"copy"}}),n.$on("click",t[3]),i=new Ie({props:{name:"download"}}),i.$on("click",t[4]),o=new Ie({props:{name:"download obj"}}),o.$on("click",t[2]),{c(){e=N("div"),s=N("div"),K(n.$$.fragment),r=C(),K(i.$$.fragment),a=C(),K(o.$$.fragment),this.h()},l(c){e=P(c,"DIV",{id:!0,class:!0});var h=A(e);s=P(h,"DIV",{id:!0,class:!0});var u=A(s);ne(n.$$.fragment,u),r=z(u),ne(i.$$.fragment,u),a=z(u),ne(o.$$.fragment,u),u.forEach(w),h.forEach(w),this.h()},h(){k(s,"id","header"),k(s,"class","svelte-673lrq"),k(e,"id","wrapper"),k(e,"class","svelte-673lrq")},m(c,h){T(c,e,h),E(e,s),ee(n,s,null),E(s,r),ee(i,s,null),E(s,a),ee(o,s,null),l=!0},p:q,i(c){l||(I(n.$$.fragment,c),I(i.$$.fragment,c),I(o.$$.fragment,c),l=!0)},o(c){O(n.$$.fragment,c),O(i.$$.fragment,c),O(o.$$.fragment,c),l=!1},d(c){c&&w(e),te(n),te(i),te(o)}}}function f2(t){const e=JSON.parse(JSON.stringify(t));return delete e.meta.lastSaved,delete e.history,e}function d2(t,e,s){let n;const r=We();let{project:i}=e,a;async function o(){r("close"),ct("Export started",{type:"success"}),await zh(100),h2(i,Oe.getSettings(),"obj")}async function l(){r("close"),a||(a=document.createElement("textarea")),a.value=JSON.stringify(n),document.body.appendChild(a),a.select(),document.execCommand("copy"),a.blur(),document.body.removeChild(a),ct("Copied to clipboard",{type:"success"})}const c=()=>{var h;return jh(n,(h=i.meta.name)!=null?h:`plant-${i.meta.id}`)};return t.$$set=h=>{"project"in h&&s(0,i=h.project)},t.$$.update=()=>{t.$$.dirty&1&&s(1,n=f2(i))},[i,n,o,l,c]}class p2 extends fe{constructor(e){super(),de(this,e,d2,u2,pe,{project:0})}}function m2(t){var W;let e,s,n,r,i,a,o,l,c,h,u,d,f=ii(Date.now()-((W=t[0])==null?void 0:W.meta.lastSaved))+"",p,m,v,g,_,b,y,M,x,L,S,$,R;return{c(){e=N("div"),s=N("div"),n=N("img"),a=C(),o=N("div"),l=N("div"),c=N("input"),u=C(),d=N("p"),p=F(f),m=F(" ago"),v=C(),g=N("div"),_=C(),b=N("div"),y=N("button"),M=F("delete"),x=C(),L=N("button"),S=F("export"),this.h()},l(V){e=P(V,"DIV",{class:!0});var j=A(e);s=P(j,"DIV",{class:!0});var D=A(s);n=P(D,"IMG",{src:!0,alt:!0,class:!0}),D.forEach(w),a=z(j),o=P(j,"DIV",{class:!0});var H=A(o);l=P(H,"DIV",{class:!0});var re=A(l);c=P(re,"INPUT",{contenteditable:!0,class:!0}),u=z(re),d=P(re,"P",{class:!0});var se=A(d);p=B(se,f),m=B(se," ago"),se.forEach(w),re.forEach(w),v=z(H),g=P(H,"DIV",{class:!0}),A(g).forEach(w),_=z(H),b=P(H,"DIV",{class:!0});var he=A(b);y=P(he,"BUTTON",{class:!0});var ue=A(y);M=B(ue,"delete"),ue.forEach(w),x=z(he),L=P(he,"BUTTON",{class:!0});var we=A(L);S=B(we,"export"),we.forEach(w),he.forEach(w),H.forEach(w),j.forEach(w),this.h()},h(){var V,j;Ln(n.src,r=(V=t[0])==null?void 0:V.meta.thumbnail)||k(n,"src",r),k(n,"alt",i="thumbnail of project "+t[0].meta.name),k(n,"class","svelte-m3frj4"),k(s,"class","project-image svelte-m3frj4"),k(c,"contenteditable",""),c.value=h=(j=t[0])==null?void 0:j.meta.name,k(c,"class","svelte-m3frj4"),k(d,"class","svelte-m3frj4"),k(l,"class","project-content-header svelte-m3frj4"),k(g,"class","project-content-main svelte-m3frj4"),k(y,"class","delete svelte-m3frj4"),k(L,"class","export svelte-m3frj4"),k(b,"class","project-content-footer svelte-m3frj4"),k(o,"class","project-content svelte-m3frj4"),k(e,"class","project-wrapper svelte-m3frj4"),Z(e,"active",t[0].meta.id===Se.activeProjectId||t[1])},m(V,j){T(V,e,j),E(e,s),E(s,n),E(e,a),E(e,o),E(o,l),E(l,c),E(l,u),E(l,d),E(d,p),E(d,m),E(o,v),E(o,g),E(o,_),E(o,b),E(b,y),E(y,M),E(b,x),E(b,L),E(L,S),$||(R=[J(c,"blur",t[4]),J(c,"keydown",t[5]),J(y,"click",Os(t[6])),J(L,"click",Os(t[7])),J(e,"resize",alert),J(e,"click",t[8])],$=!0)},p(V,[j]){var D,H,re;j&1&&!Ln(n.src,r=(D=V[0])==null?void 0:D.meta.thumbnail)&&k(n,"src",r),j&1&&i!==(i="thumbnail of project "+V[0].meta.name)&&k(n,"alt",i),j&1&&h!==(h=(H=V[0])==null?void 0:H.meta.name)&&c.value!==h&&(c.value=h),j&1&&f!==(f=ii(Date.now()-((re=V[0])==null?void 0:re.meta.lastSaved))+"")&&ve(p,f),j&3&&Z(e,"active",V[0].meta.id===Se.activeProjectId||V[1])},i:q,o:q,d(V){V&&w(e),$=!1,wt(R)}}}function v2(t,e,s){let{project:n}=e,r=!1;function i(){return s(1,r=!0),setTimeout(()=>{s(1,r=!1)},100),!0}async function a(){var f,p;await gt(`Are you sure you want to delete ${(f=n.meta.name)!=null?f:n.meta.id}?`,{values:["Yes","No"]})==="Yes"&&(await Se.deleteProject(n.meta.id),ct(`Project ${(p=n.meta.name)!=null?p:n.meta.id} deleted!`,{type:"success"}))}const o=function(){const d=this.value.split(`
`).join("").trim();Se.updateProjectMeta(n.meta.id,{name:d})},l=function(d){if(d.key==="Enter"){const f=this.value.split(`
`).join("").trim();this.blur(),d.preventDefault(),Se.updateProjectMeta(n==null?void 0:n.meta.id,{name:f})}},c=()=>a(),h=()=>gt(p2,{props:{project:n},timeout:0}),u=()=>i()&&Se.setActiveProject(n.meta.id);return t.$$set=d=>{"project"in d&&s(0,n=d.project)},[n,r,i,a,o,l,c,h,u]}class g2 extends fe{constructor(e){super(),de(this,e,v2,m2,pe,{project:0})}}function Ua(t,e,s){const n=t.slice();return n[9]=e[s],n}function y2(t){let e;return{c(){e=N("div"),this.h()},l(s){e=P(s,"DIV",{class:!0}),A(e).forEach(w),this.h()},h(){k(e,"class","svelte-2epw3e")},m(s,n){T(s,e,n)},p:q,d(s){s&&w(e)}}}function w2(t){let e,s,n;return{c(){e=N("input"),this.h()},l(r){e=P(r,"INPUT",{type:!0,class:!0,placeholder:!0}),this.h()},h(){k(e,"type","text"),k(e,"class","search svelte-2epw3e"),k(e,"placeholder","Search")},m(r,i){T(r,e,i),Be(e,t[1]),s||(n=J(e,"input",t[8]),s=!0)},p(r,i){i&2&&e.value!==r[1]&&Be(e,r[1])},d(r){r&&w(e),s=!1,n()}}}function Wa(t){let e,s,n=t[2],r=[];for(let a=0;a<n.length;a+=1)r[a]=Ha(Ua(t,n,a));const i=a=>O(r[a],1,1,()=>{r[a]=null});return{c(){e=N("div");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=P(a,"DIV",{class:!0});var o=A(e);for(let l=0;l<r.length;l+=1)r[l].l(o);o.forEach(w),this.h()},h(){k(e,"class","project-list svelte-2epw3e")},m(a,o){T(a,e,o);for(let l=0;l<r.length;l+=1)r[l].m(e,null);s=!0},p(a,o){if(o&6){n=a[2];let l;for(l=0;l<n.length;l+=1){const c=Ua(a,n,l);r[l]?(r[l].p(c,o),I(r[l],1)):(r[l]=Ha(c),r[l].c(),I(r[l],1),r[l].m(e,null))}for(oe(),l=n.length;l<r.length;l+=1)i(l);le()}},i(a){if(!s){for(let o=0;o<n.length;o+=1)I(r[o]);s=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)O(r[o]);s=!1},d(a){a&&w(e),Pe(r,a)}}}function qa(t){let e,s;return e=new g2({props:{project:t[9]}}),{c(){K(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,r){ee(e,n,r),s=!0},p(n,r){const i={};r&4&&(i.project=n[9]),e.$set(i)},i(n){s||(I(e.$$.fragment,n),s=!0)},o(n){O(e.$$.fragment,n),s=!1},d(n){te(e,n)}}}function Ha(t){let e=Xa(t[1],t[9]),s,n,r=e&&qa(t);return{c(){r&&r.c(),s=ae()},l(i){r&&r.l(i),s=ae()},m(i,a){r&&r.m(i,a),T(i,s,a),n=!0},p(i,a){a&6&&(e=Xa(i[1],i[9])),e?r?(r.p(i,a),a&6&&I(r,1)):(r=qa(i),r.c(),I(r,1),r.m(s.parentNode,s)):r&&(oe(),O(r,1,1,()=>{r=null}),le())},i(i){n||(I(r),n=!0)},o(i){O(r),n=!1},d(i){r&&r.d(i),i&&w(s)}}}function b2(t){let e,s,n,r,i,a,o,l,c,h,u,d,f,p;function m(b,y){return b[2].length>3?w2:y2}let v=m(t),g=v(t),_=t[0]&&Wa(t);return{c(){e=N("div"),s=N("div"),n=N("button"),r=N("p"),i=F("new"),a=C(),o=N("button"),l=N("p"),c=F("import"),h=C(),g.c(),u=C(),_&&_.c(),this.h()},l(b){e=P(b,"DIV",{class:!0,style:!0});var y=A(e);s=P(y,"DIV",{class:!0});var M=A(s);n=P(M,"BUTTON",{class:!0});var x=A(n);r=P(x,"P",{class:!0});var L=A(r);i=B(L,"new"),L.forEach(w),x.forEach(w),a=z(M),o=P(M,"BUTTON",{class:!0});var S=A(o);l=P(S,"P",{class:!0});var $=A(l);c=B($,"import"),$.forEach(w),S.forEach(w),h=z(M),g.l(M),M.forEach(w),u=z(y),_&&_.l(y),y.forEach(w),this.h()},h(){k(r,"class","svelte-2epw3e"),k(n,"class","add-new svelte-2epw3e"),k(l,"class","svelte-2epw3e"),k(o,"class","import svelte-2epw3e"),k(s,"class","header svelte-2epw3e"),k(e,"class","project-manager-wrapper svelte-2epw3e"),k(e,"style",`width: ${t[4]}px; height: ${t[5]}px;`)},m(b,y){T(b,e,y),E(e,s),E(s,n),E(n,r),E(r,i),E(s,a),E(s,o),E(o,l),E(l,c),E(s,h),g.m(s,null),E(e,u),_&&_.m(e,null),d=!0,f||(p=[J(n,"click",t[6]),J(o,"click",t[7])],f=!0)},p(b,[y]){v===(v=m(b))&&g?g.p(b,y):(g.d(1),g=v(b),g&&(g.c(),g.m(s,null))),b[0]?_?(_.p(b,y),y&1&&I(_,1)):(_=Wa(b),_.c(),I(_,1),_.m(e,null)):_&&(oe(),O(_,1,1,()=>{_=null}),le())},i(b){d||(I(_),d=!0)},o(b){O(_),d=!1},d(b){b&&w(e),g.d(),_&&_.d(),f=!1,wt(p)}}}function Xa(t,e){if(!t||t.length<1)return!0;const s=e.meta.name.toLowerCase();return t=t.toLowerCase(),!!(s.includes(t)||t.includes(s))}function _2(t,e,s){var d;let n;const{store:r}=Se;ft(t,r,f=>s(2,n=f));let{visible:i}=e,a;const{width:o,height:l}=nt.get("projectManagerSize",{width:300,height:((d=globalThis.innerHeight)!=null?d:1)/2}),c=()=>Se.createNew(),h=()=>gt(l2,{timeout:0});function u(){a=this.value,s(1,a)}return t.$$set=f=>{"visible"in f&&s(0,i=f.visible)},[i,a,n,r,o,l,c,h,u]}class x2 extends fe{constructor(e){super(),de(this,e,_2,b2,pe,{visible:0})}}var Qn={enableSync:{type:"boolean",value:!1},useRandomSeed:{type:"boolean",value:!1},theme:{type:"select",inputType:"tab",values:["dark","light"],value:"dark"},debug:{onlyDev:!0,options:{material:{type:"select",values:["MatCap","Basic","Debug"],value:"Basic"},hideMesh:{type:"boolean",value:!1},showNodeUpdates:{type:"boolean",value:!1},renderPerf:{type:"boolean",value:!1},generatePerf:{type:"boolean",value:!1},pd:{type:"boolean",value:!1},skeleton:{type:"boolean",value:!1},wireframe:{type:"boolean",value:!1},logLevel:{type:"number",min:0,max:2,value:1}}},background:{options:{grid:{label:"Show Grid",type:"boolean",value:!1},ground:{label:"Show Ground",type:"boolean",value:!0},resX:{onlyDev:!0,type:"number",min:8,max:64,step:1,value:8},resY:{onlyDev:!0,type:"number",min:8,max:64,step:1,value:16},scale:{type:"number",min:0,max:5,step:.1,value:1}}},leafRes:{onlyDev:!0,type:"number",min:3,max:12,step:1,value:2},stemResX:{onlyDev:!0,type:"number",min:3,max:32,step:1,value:3},stemResY:{onlyDev:!0,type:"number",min:3,max:64,step:1,value:32},isDev:{label:"Advanced",type:"boolean",value:!1}};const Ps=Le("SettingsManager"),Cl=(t,e)=>{const s={};return Object.entries(t).forEach(([n,r])=>{var a;const i=e&&n in e?e[n]:void 0;typeof r=="object"&&"options"in r?s[n]=Cl(r.options,i):s[n]=(a=i!=null?i:r.defaultValue)!=null?a:r.value}),s},Zn=(t,e)=>{const s=e.shift();if(s&&s in t)return e.length?Zn(t[s],e):t[s]},Ga=t=>t.includes(".")?t.split("."):[t];class M2 extends Ze{constructor(){super(),this.settings={},this.store=Ue(this.settings),Ps("Initialized"),this._save=Fo(()=>{rs("pt_settings",this.settings)},500,!1)}save(){var e,s,n;this.emit("settings",this.settings),Le.setLevel((n=(s=(e=this.settings)==null?void 0:e.debug)==null?void 0:s.logLevel)!=null?n:2),this.store.set(this.settings),Ps("save settings",this.settings),this._save()}async loadFromLocal(){var s,n,r;const e=await js("pt_settings")||{};this.settings=Cl(Qn,e),Le.setLevel((r=(n=(s=this.settings)==null?void 0:s.debug)==null?void 0:n.logLevel)!=null?r:2),this.store.set(this.settings),Ps("loaded settings from local",this.settings),this.emit("settings",this.settings)}set(e,s){const n=Ga(e);if(n.length>1){const r=n.pop(),i=Zn(this.settings,n);i&&(i[r]=s)}else this.settings[n[0]]=s;Ps(`Set ${e}`,s),this.emit(e+".update",s),this.save()}get(e){return Zn(this.settings,Ga(e))}getSettings(){return JSON.parse(JSON.stringify(this.settings))}}let E2=0;const Sn=nt.get("sections")||[];var k2=()=>{const t=E2++;return{get(){return Sn[t]||!1},set(e){Sn[t]=e,nt.set("sections",Sn)}}};function Ya(t,e,s){const n=t.slice();return n[10]=e[s][0],n[11]=e[s][1],n}function Ja(t){let e,s,n,r,i;const a=[S2,A2],o=[];function l(c,h){return c[3].options?0:1}return s=l(t),n=o[s]=a[s](t),{c(){e=N("div"),n.c(),this.h()},l(c){e=P(c,"DIV",{class:!0});var h=A(e);n.l(h),h.forEach(w),this.h()},h(){k(e,"class","wrapper svelte-mq0msn")},m(c,h){T(c,e,h),o[s].m(e,null),i=!0},p(c,h){let u=s;s=l(c),s===u?o[s].p(c,h):(oe(),O(o[u],1,1,()=>{o[u]=null}),le(),n=o[s],n?n.p(c,h):(n=o[s]=a[s](c),n.c()),I(n,1),n.m(e,null))},i(c){i||(I(n),Ot(()=>{r||(r=Fe(e,ht,{},!0)),r.run(1)}),i=!0)},o(c){O(n),r||(r=Fe(e,ht,{},!1)),r.run(0),i=!1},d(c){c&&w(e),o[s].d(),c&&r&&r.end()}}}function A2(t){let e,s=(t[3].label||t[2])+"",n,r,i,a,o;const l=[t[6],{value:t[1]}];var c=Fn(t[6]);function h(u){let d={};for(let f=0;f<l.length;f+=1)d=Do(d,l[f]);return{props:d}}return c&&(i=new c(h()),i.$on("change",t[9])),{c(){e=N("p"),n=F(s),r=C(),i&&K(i.$$.fragment),a=ae()},l(u){e=P(u,"P",{});var d=A(e);n=B(d,s),d.forEach(w),r=z(u),i&&ne(i.$$.fragment,u),a=ae()},m(u,d){T(u,e,d),E(e,n),T(u,r,d),i&&ee(i,u,d),T(u,a,d),o=!0},p(u,d){(!o||d&12)&&s!==(s=(u[3].label||u[2])+"")&&ve(n,s);const f=d&66?To(l,[d&64&&Io(u[6]),d&2&&{value:u[1]}]):{};if(c!==(c=Fn(u[6]))){if(i){oe();const p=i;O(p.$$.fragment,1,0,()=>{te(p,1)}),le()}c?(i=new c(h()),i.$on("change",u[9]),K(i.$$.fragment),I(i.$$.fragment,1),ee(i,a.parentNode,a)):i=null}else c&&i.$set(f)},i(u){o||(i&&I(i.$$.fragment,u),o=!0)},o(u){i&&O(i.$$.fragment,u),o=!1},d(u){u&&w(e),u&&w(r),u&&w(a),i&&te(i,u)}}}function S2(t){let e,s;return e=new $s({props:{name:t[2],open:t[7].get(),$$slots:{default:[L2]},$$scope:{ctx:t}}}),e.$on("toggle",t[8]),{c(){K(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,r){ee(e,n,r),s=!0},p(n,r){const i={};r&4&&(i.name=n[2]),r&16395&&(i.$$scope={dirty:r,ctx:n}),e.$set(i)},i(n){s||(I(e.$$.fragment,n),s=!0)},o(n){O(e.$$.fragment,n),s=!1},d(n){te(e,n)}}}function N2(t){let e,s;return{c(){e=N("p"),s=F("error")},l(n){e=P(n,"P",{});var r=A(e);s=B(r,"error"),r.forEach(w)},m(n,r){T(n,e,r),E(e,s)},p:q,i:q,o:q,d(n){n&&w(e)}}}function P2(t){let e,s;return e=new zl({props:{path:t[0],value:t[11],key:t[10],template:t[3].options[t[10]]}}),{c(){K(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,r){ee(e,n,r),s=!0},p(n,r){const i={};r&1&&(i.path=n[0]),r&2&&(i.value=n[11]),r&2&&(i.key=n[10]),r&10&&(i.template=n[3].options[n[10]]),e.$set(i)},i(n){s||(I(e.$$.fragment,n),s=!0)},o(n){O(e.$$.fragment,n),s=!1},d(n){te(e,n)}}}function Qa(t){let e,s,n,r;const i=[P2,N2],a=[];function o(l,c){return l[10]in l[3].options?0:1}return e=o(t),s=a[e]=i[e](t),{c(){s.c(),n=ae()},l(l){s.l(l),n=ae()},m(l,c){a[e].m(l,c),T(l,n,c),r=!0},p(l,c){let h=e;e=o(l),e===h?a[e].p(l,c):(oe(),O(a[h],1,1,()=>{a[h]=null}),le(),s=a[e],s?s.p(l,c):(s=a[e]=i[e](l),s.c()),I(s,1),s.m(n.parentNode,n))},i(l){r||(I(s),r=!0)},o(l){O(s),r=!1},d(l){a[e].d(l),l&&w(n)}}}function L2(t){let e,s,n=Object.entries(t[1]),r=[];for(let a=0;a<n.length;a+=1)r[a]=Qa(Ya(t,n,a));const i=a=>O(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=ae()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=ae()},m(a,o){for(let l=0;l<r.length;l+=1)r[l].m(a,o);T(a,e,o),s=!0},p(a,o){if(o&11){n=Object.entries(a[1]);let l;for(l=0;l<n.length;l+=1){const c=Ya(a,n,l);r[l]?(r[l].p(c,o),I(r[l],1)):(r[l]=Qa(c),r[l].c(),I(r[l],1),r[l].m(e.parentNode,e))}for(oe(),l=n.length;l<r.length;l+=1)i(l);le()}},i(a){if(!s){for(let o=0;o<n.length;o+=1)I(r[o]);s=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)O(r[o]);s=!1},d(a){Pe(r,a),a&&w(e)}}}function T2(t){let e,s,n=(t[4].isDev||!t[3].onlyDev)&&Ja(t);return{c(){n&&n.c(),e=ae()},l(r){n&&n.l(r),e=ae()},m(r,i){n&&n.m(r,i),T(r,e,i),s=!0},p(r,[i]){r[4].isDev||!r[3].onlyDev?n?(n.p(r,i),i&24&&I(n,1)):(n=Ja(r),n.c(),I(n,1),n.m(e.parentNode,e)):n&&(oe(),O(n,1,1,()=>{n=null}),le())},i(r){s||(I(n),s=!0)},o(r){O(n),s=!1},d(r){n&&n.d(r),r&&w(e)}}}function I2(t,e,s){let n;const r=Oe.store;ft(t,r,f=>s(4,n=f));let{value:i}=e,{key:a}=e,{path:o=""}=e;o=o+(o.length?".":"")+a;let{template:l}=e,c=l;const h=k2(),u=({detail:f})=>h.set(f),d=f=>Oe.set(o,f.detail);return t.$$set=f=>{"value"in f&&s(1,i=f.value),"key"in f&&s(2,a=f.key),"path"in f&&s(0,o=f.path),"template"in f&&s(3,l=f.template)},[o,i,a,l,n,r,c,h,u,d]}class zl extends fe{constructor(e){super(),de(this,e,I2,T2,pe,{value:1,key:2,path:0,template:3})}}function Za(t,e,s){const n=t.slice();return n[2]=e[s][0],n[3]=e[s][1],n}function Ka(t){let e,s;return e=new zl({props:{key:t[2],value:t[3],template:Qn[t[2]]}}),{c(){K(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,r){ee(e,n,r),s=!0},p(n,r){const i={};r&1&&(i.key=n[2]),r&1&&(i.value=n[3]),r&1&&(i.template=Qn[n[2]]),e.$set(i)},i(n){s||(I(e.$$.fragment,n),s=!0)},o(n){O(e.$$.fragment,n),s=!1},d(n){te(e,n)}}}function D2(t){let e,s,n=Object.entries(t[0]),r=[];for(let a=0;a<n.length;a+=1)r[a]=Ka(Za(t,n,a));const i=a=>O(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=ae()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=ae()},m(a,o){for(let l=0;l<r.length;l+=1)r[l].m(a,o);T(a,e,o),s=!0},p(a,[o]){if(o&1){n=Object.entries(a[0]);let l;for(l=0;l<n.length;l+=1){const c=Za(a,n,l);r[l]?(r[l].p(c,o),I(r[l],1)):(r[l]=Ka(c),r[l].c(),I(r[l],1),r[l].m(e.parentNode,e))}for(oe(),l=n.length;l<r.length;l+=1)i(l);le()}},i(a){if(!s){for(let o=0;o<n.length;o+=1)I(r[o]);s=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)O(r[o]);s=!1},d(a){Pe(r,a),a&&w(e)}}}function j2(t,e,s){let n;const r=Oe.store;return ft(t,r,i=>s(0,n=i)),[n,r]}class O2 extends fe{constructor(e){super(),de(this,e,j2,D2,pe,{})}}function V2(t){let e,s;return{c(){e=N("p"),s=F(`\u{1F389} Now you have all the knowledge to use the Plantarium. Have some fun with
  it.`),this.h()},l(n){e=P(n,"P",{class:!0});var r=A(e);s=B(r,`\u{1F389} Now you have all the knowledge to use the Plantarium. Have some fun with
  it.`),r.forEach(w),this.h()},h(){k(e,"class","svelte-1h3eb6p")},m(n,r){T(n,e,r),E(e,s)},p:q,i:q,o:q,d(n){n&&w(e)}}}class C2 extends fe{constructor(e){super(),de(this,e,null,V2,pe,{})}}function z2(t){let e,s,n,r,i,a,o,l,c,h,u,d;return r=new us({props:{name:"hand"}}),{c(){e=N("p"),s=F("Hey there "),n=N("span"),i=N("div"),K(r.$$.fragment),a=C(),o=N("p"),l=F("Welcome to "),c=N("b"),h=F("Plantarium"),u=F(`, a tool for creating parametrized, procedural 3D
  plants.`),this.h()},l(f){e=P(f,"P",{class:!0});var p=A(e);s=B(p,"Hey there "),n=P(p,"SPAN",{class:!0});var m=A(n);i=P(m,"DIV",{style:!0});var v=A(i);ne(r.$$.fragment,v),m.forEach(w),p.forEach(w),a=z(f),o=P(f,"P",{class:!0});var g=A(o);l=B(g,"Welcome to "),c=P(g,"B",{});var _=A(c);h=B(_,"Plantarium"),_.forEach(w),u=B(g,`, a tool for creating parametrized, procedural 3D
  plants.`),g.forEach(w),this.h()},h(){G(i,"display","contents"),G(i,"--stroke","#1a1a1a"),k(n,"class","svelte-1tutruj"),k(e,"class","svelte-1tutruj"),k(o,"class","svelte-1tutruj")},m(f,p){T(f,e,p),E(e,s),E(e,n),E(n,i),ee(r,i,null),T(f,a,p),T(f,o,p),E(o,l),E(o,c),E(c,h),E(o,u),d=!0},p:q,i(f){d||(I(r.$$.fragment,f),d=!0)},o(f){O(r.$$.fragment,f),d=!1},d(f){f&&w(e),te(r),f&&w(a),f&&w(o)}}}class $2 extends fe{constructor(e){super(),de(this,e,null,z2,pe,{})}}const Nn=[{title:"Tutorial",description:$2,options:{"lets go":()=>{}},type:"alert"},{description:`This is the <b>Plant View</b>, here you can explore the generated 3D model of your plant. 
      Try to change the view by:`,selector:".scene-wrapper",checks:[{description:"Clicking and dragging",setup:function(t,{c:e}){const s=document.querySelector(e.selector);s.getAttribute("setup")!=="true"&&(s.setAttribute("setup","true"),s.addEventListener("click",t,{once:!0}))}},{description:"Scrolling / Zooming",setup:(t,{c:e})=>{const s=document.querySelector(e.selector+"> canvas");s.getAttribute("setup")!=="true"&&(s.setAttribute("setup","true"),s.addEventListener("wheel",t,{once:!0,passive:!0}))}}]},{selector:"#nodesystem-view",description:`This is the <b>Node View</b>, here you define the way your plant looks. Try playing with some of the settings. If you are not so sure how this works, maybe visit the <a href="/nodes/tutorial?ref=${window.location}">NodeTutorial</a>`},{description:"This Button opens the project view",clickSelector:"header > div.left > div > div"},{description:"This is the ProjectView, here you can create/rename/delete projects.",selector:".project-manager-wrapper",checks:[{description:"create a new project",setup:(t,{pm:e})=>{e.once("new",t)}},{description:"rename the project",setup:(t,{pm:e})=>{e.once("update",t)}},{description:"delete the project",setup:(t,{pm:e})=>{e.once("delete",t)}}]},{description:"This Button opens the <b>Settings View</b>",clickSelector:"header > div.right > div:nth-child(2) .icon-wrapper"},{description:"This is the <b>SettingView</b>, here you can change some general settings.",selector:"header > div.right > div:nth-child(2) > div > div > div.wrapper.right.visible"},{description:"When you encounter something which doesnt work or you have an Idea for a new feature, use this button to report it.",clickSelector:"header > div.right > div:nth-child(1) > div"},{title:"Tutorial",description:C2,options:{"lets go":()=>{}},type:"alert"}];var os=Ue(void 0);function eo(t,e,s){const n=t.slice();return n[14]=e[s],n[15]=e,n[16]=s,n}function to(t){let e,s,n,r,i,a,o,l,c=t[6].description+"",h,u,d,f,p,m=t[3]&&so(t);i=new Ie({props:{icon:"cross"}}),i.$on("click",t[11]);let v=t[1]&&no(t),g=!t[4]&&io(t),_=t[0]&&t[5]&&ao(t);return{c(){e=N("span"),m&&m.c(),s=C(),n=N("div"),r=N("div"),a=N("div"),K(i.$$.fragment),o=C(),l=N("p"),h=C(),v&&v.c(),u=C(),g&&g.c(),f=C(),_&&_.c(),this.h()},l(b){e=P(b,"SPAN",{class:!0});var y=A(e);m&&m.l(y),s=z(y),n=P(y,"DIV",{class:!0,style:!0});var M=A(n);r=P(M,"DIV",{class:!0});var x=A(r);a=P(x,"DIV",{style:!0});var L=A(a);ne(i.$$.fragment,L),x.forEach(w),o=z(M),l=P(M,"P",{class:!0});var S=A(l);S.forEach(w),h=z(M),v&&v.l(M),u=z(M),g&&g.l(M),M.forEach(w),f=z(y),_&&_.l(y),y.forEach(w),this.h()},h(){G(a,"display","contents"),G(a,"--foreground-color","transparent"),k(r,"class","close-wrapper svelte-1h8kzc2"),k(l,"class","svelte-1h8kzc2"),k(n,"class","wrapper svelte-1h8kzc2"),k(n,"style",d=`left: ${t[8]}px; top: ${t[0].top+20}px;`),k(e,"class","svelte-1h8kzc2"),Z(e,"isLeft",t[2]),Z(e,"hasElement",!!t[5]),Z(e,"hasClick",!!t[3])},m(b,y){T(b,e,y),m&&m.m(e,null),E(e,s),E(e,n),E(n,r),E(r,a),ee(i,a,null),E(n,o),E(n,l),l.innerHTML=c,E(n,h),v&&v.m(n,null),E(n,u),g&&g.m(n,null),E(e,f),_&&_.m(e,null),p=!0},p(b,y){b[3]?m?(m.p(b,y),y&8&&I(m,1)):(m=so(b),m.c(),I(m,1),m.m(e,s)):m&&(oe(),O(m,1,1,()=>{m=null}),le()),(!p||y&64)&&c!==(c=b[6].description+"")&&(l.innerHTML=c),b[1]?v?(v.p(b,y),y&2&&I(v,1)):(v=no(b),v.c(),I(v,1),v.m(n,u)):v&&(oe(),O(v,1,1,()=>{v=null}),le()),b[4]?g&&(oe(),O(g,1,1,()=>{g=null}),le()):g?(g.p(b,y),y&16&&I(g,1)):(g=io(b),g.c(),I(g,1),g.m(n,null)),(!p||y&257&&d!==(d=`left: ${b[8]}px; top: ${b[0].top+20}px;`))&&k(n,"style",d),b[0]&&b[5]?_?_.p(b,y):(_=ao(b),_.c(),_.m(e,null)):_&&(_.d(1),_=null),y&4&&Z(e,"isLeft",b[2]),y&32&&Z(e,"hasElement",!!b[5]),y&8&&Z(e,"hasClick",!!b[3])},i(b){p||(I(m),I(i.$$.fragment,b),I(v),I(g),p=!0)},o(b){O(m),O(i.$$.fragment,b),O(v),O(g),p=!1},d(b){b&&w(e),m&&m.d(),te(i),v&&v.d(),g&&g.d(),_&&_.d()}}}function so(t){let e,s,n,r,i;return s=new us({props:{name:"pointing"}}),{c(){e=N("div"),n=N("div"),K(s.$$.fragment),this.h()},l(a){e=P(a,"DIV",{class:!0,style:!0});var o=A(e);n=P(o,"DIV",{style:!0});var l=A(n);ne(s.$$.fragment,l),o.forEach(w),this.h()},h(){G(n,"display","contents"),G(n,"--fill","#303030"),k(e,"class","click-wrapper svelte-1h8kzc2"),k(e,"style",r=`top: ${t[0].top+20}px; left: ${t[8]-(t[2]?20:-0)}px;`)},m(a,o){T(a,e,o),E(e,n),ee(s,n,null),i=!0},p(a,o){(!i||o&261&&r!==(r=`top: ${a[0].top+20}px; left: ${a[8]-(a[2]?20:-0)}px;`))&&k(e,"style",r)},i(a){i||(I(s.$$.fragment,a),i=!0)},o(a){O(s.$$.fragment,a),i=!1},d(a){a&&w(e),te(s)}}}function no(t){let e,s,n=t[1],r=[];for(let a=0;a<n.length;a+=1)r[a]=ro(eo(t,n,a));const i=a=>O(r[a],1,1,()=>{r[a]=null});return{c(){e=N("div");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=P(a,"DIV",{class:!0});var o=A(e);for(let l=0;l<r.length;l+=1)r[l].l(o);o.forEach(w),this.h()},h(){k(e,"class","checks-wrapper svelte-1h8kzc2")},m(a,o){T(a,e,o);for(let l=0;l<r.length;l+=1)r[l].m(e,null);s=!0},p(a,o){if(o&2){n=a[1];let l;for(l=0;l<n.length;l+=1){const c=eo(a,n,l);r[l]?(r[l].p(c,o),I(r[l],1)):(r[l]=ro(c),r[l].c(),I(r[l],1),r[l].m(e,null))}for(oe(),l=n.length;l<r.length;l+=1)i(l);le()}},i(a){if(!s){for(let o=0;o<n.length;o+=1)I(r[o]);s=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)O(r[o]);s=!1},d(a){a&&w(e),Pe(r,a)}}}function ro(t){let e,s,n,r,i,a=t[14].description+"",o,l,c;function h(d){t[12](d,t[14])}let u={};return t[14]._isCompleted!==void 0&&(u.value=t[14]._isCompleted),s=new ls({props:u}),Ne.push(()=>Ht(s,"value",h)),{c(){e=N("div"),K(s.$$.fragment),r=C(),i=N("p"),o=F(a),l=C(),this.h()},l(d){e=P(d,"DIV",{class:!0});var f=A(e);ne(s.$$.fragment,f),r=z(f),i=P(f,"P",{class:!0});var p=A(i);o=B(p,a),p.forEach(w),l=z(f),f.forEach(w),this.h()},h(){k(i,"class","svelte-1h8kzc2"),k(e,"class","check-wrapper svelte-1h8kzc2"),Z(e,"is-completed",t[14]._isCompleted)},m(d,f){T(d,e,f),ee(s,e,null),E(e,r),E(e,i),E(i,o),E(e,l),c=!0},p(d,f){t=d;const p={};!n&&f&2&&(n=!0,p.value=t[14]._isCompleted,Xt(()=>n=!1)),s.$set(p),(!c||f&2)&&a!==(a=t[14].description+"")&&ve(o,a),f&2&&Z(e,"is-completed",t[14]._isCompleted)},i(d){c||(I(s.$$.fragment,d),c=!0)},o(d){O(s.$$.fragment,d),c=!1},d(d){d&&w(e),te(s)}}}function io(t){let e,s,n,r;return s=new Ie({props:{name:"next"}}),s.$on("click",t[13]),{c(){e=N("div"),n=N("div"),K(s.$$.fragment),this.h()},l(i){e=P(i,"DIV",{class:!0});var a=A(e);n=P(a,"DIV",{style:!0});var o=A(n);ne(s.$$.fragment,o),a.forEach(w),this.h()},h(){G(n,"display","contents"),G(n,"--text","white"),G(n,"--bg","#303030"),k(e,"class","next-wrapper svelte-1h8kzc2")},m(i,a){T(i,e,a),E(e,n),ee(s,n,null),r=!0},p:q,i(i){r||(I(s.$$.fragment,i),r=!0)},o(i){O(s.$$.fragment,i),r=!1},d(i){i&&w(e),te(s)}}}function ao(t){let e,s;return{c(){e=N("span"),this.h()},l(n){e=P(n,"SPAN",{class:!0,style:!0}),A(e).forEach(w),this.h()},h(){k(e,"class","highlighter  svelte-1h8kzc2"),k(e,"style",s=`width: ${t[0].width}px; height: ${t[0].height}px; left: ${t[0].left}px; top: ${t[0].top}px;`)},m(n,r){T(n,e,r)},p(n,r){r&1&&s!==(s=`width: ${n[0].width}px; height: ${n[0].height}px; left: ${n[0].left}px; top: ${n[0].top}px;`)&&k(e,"style",s)},d(n){n&&w(e)}}}function R2(t){let e,s,n=t[7]&&to(t);return{c(){n&&n.c(),e=ae()},l(r){n&&n.l(r),e=ae()},m(r,i){n&&n.m(r,i),T(r,e,i),s=!0},p(r,[i]){r[7]?n?(n.p(r,i),i&128&&I(n,1)):(n=to(r),n.c(),I(n,1),n.m(e.parentNode,e)):n&&(oe(),O(n,1,1,()=>{n=null}),le())},i(r){s||(I(n),s=!0)},o(r){O(n),s=!1},d(r){n&&n.d(r),r&&w(e)}}}function F2(t,e,s){let n,r,i,a,o,l,c,h,u,d,f;ft(t,os,g=>s(6,f=g));const p=()=>{s(7,d=!1)};function m(g,_){t.$$.not_equal(_._isCompleted,g)&&(_._isCompleted=g,s(1,u),s(6,f))}const v=()=>$r(os,f._isCompleted=!0,f);return t.$$.update=()=>{if(t.$$.dirty&64&&f&&f.clickSelector){const g=document.querySelector(f.clickSelector);g&&g.getAttribute("setup")!=="true"&&(g.setAttribute("setup","true"),g.addEventListener("click",()=>{setTimeout(()=>{$r(os,f._isCompleted=!0,f)},20)},{once:!0}))}t.$$.dirty&64&&s(10,n=f&&f.selector),t.$$.dirty&1024&&s(5,r=n&&document.querySelector(n)),t.$$.dirty&32&&s(9,i=r&&r.getBoundingClientRect()),t.$$.dirty&64&&s(4,a=f&&f.clickSelector&&document.querySelector(f.clickSelector)),t.$$.dirty&16&&s(3,o=a&&a.getBoundingClientRect()),t.$$.dirty&520&&s(0,l=i||o),t.$$.dirty&1&&s(2,c=l&&l.left+l.width>window.innerWidth-100),t.$$.dirty&5&&s(8,h=l&&(c?l.left-10:l.left+l.width+10)),t.$$.dirty&64&&s(1,u=f&&f.checks),t.$$.dirty&66&&u&&u.forEach((g,_)=>(g._isSetup||(g._isSetup=!0,g.setup(()=>{s(1,u[_]._isCompleted=!0,u),s(1,u),s(6,f)},{pm:Se,c:f})),g)),t.$$.dirty&1&&s(7,d=!!l)},[l,u,c,o,a,r,f,d,h,i,n,p,m,v]}class B2 extends fe{constructor(e){super(),de(this,e,F2,R2,pe,{})}}const oo=["yes","next","lets go","okay"];let lo;const $l={handleReject:()=>{nt.set("hasViewedTutorial",!0),ct("The tutorial is accessable under...")},currentIndex:0,previous:async function(){},next:async function(){var s;const t=Nn[this.currentIndex];if(this.currentIndex===Nn.length)return;if(t.setup&&await t.setup({pm:lo}),os.set(t),this.currentIndex++,this.currentIndex>2&&nt.set("hasViewedTutorial",!0),t.title=(s=t.title)!=null?s:`Tutorial (${this.currentIndex}/${Nn.length})`,t.type==="alert"){const n=await gt(t.description,{title:t.title,type:"success",values:t.options?Object.keys(t.options):void 0,timeout:0});if(oo.includes(n.toString()))return this.next()}if(t.type==="toast"){const n=await ct(t.description,{values:t.options?Object.keys(t.options):void 0,timeout:0});if(oo.includes(n.toString()))return this.next()}const e=os.subscribe(n=>{n._isCompleted&&(e(),this.next())})},init:function({projectManager:t}){if(nt.get("hasViewedTutorial"))return;lo=t;const e=`It looks like this is your first time here...
    Want to take a little tour? `;setTimeout(async()=>{await ct(e,{title:"",timeout:8e3,values:["nah","yes"]})==="yes"?this.next():this.handleReject()},1e4)},restart:function(){nt.set("hasViewedTutorial",!1),this.currentIndex=0,this.next()}},U2=Ue([]),W2=Ue([]),Rl={},Kn={render:!1,generate:!1},er={render:U2,generate:W2};function q2(t){Rl[t]=performance.now()}function Fl(t){var e,s;Kn.render=!!((e=t==null?void 0:t.debug)!=null&&e.renderPerf),Kn.generate=!!((s=t==null?void 0:t.debug)!=null&&s.generatePerf)}function Bl(t,e){(t in er?er[t]:Ue([])).update(n=>(n.push(e),n.length>200&&n.shift(),n)),t in tr&&tr[t]()}function H2(t){var s;if(!Kn[t])return;const e=performance.now()-((s=Rl[t])!=null?s:0);Bl(t,e)}const co={},tr={};function ho(t,e){e=e||co[t]||document.createElement("canvas"),co[t]=e;const s=200,n=100;e.width=s,e.height=n;const r=e.getContext("2d");tr[t]=()=>{const i=[...ac(er[t])],a=Math.max(...i);let o=0;const l=s/200;r.clearRect(0,0,s,n),r.fillStyle="rgba(255, 255, 255, 0.5)",r.fillRect(0,0,s,n);for(let c=0;c<i.length;c++){o+=i[c];const h=i[c]*(n/a);r.fillStyle="rgba(0, 0, 0, 0.5)",r.fillRect(c*l,n-h,l,h)}r.fillStyle="black",r.textAlign="left",r.fillText(t+"",10,10),r.textAlign="right",r.fillText(`avg: ${Math.floor(o/i.length*10)/10}ms max: ${Math.floor(a*10)/10}ms`,180,10)}}const Oe=new M2,Se=new Hv;jo(Oe.get("theme"));Fl(Oe.getSettings());Oe.on("enableSync.update",t=>{ct(`${t?"Enabled":"Disabled"} sync`,{type:"success"})});Oe.on("debug.logLevel.update",t=>{Le.setLevel(t)});Oe.on("theme.update",t=>{document.body.classList.add("transition-all"),setTimeout(()=>{jo(t),setTimeout(()=>{document.body.classList.remove("transition-all")},400)},100)});const At=new Sl({view:!0,defaultNodes:!1,registerNodes:yl,connectionColors:{boolean:"#f00",number:"#fff",plant:"#65e2a0",vec3:"#6363C7"},deferCompute:!0});Oe.on("debug.showNodeUpdates.update",t=>{console.log(t),At.options.showUpdates=t});Se.on("load",t=>At.load(t));At.on("result",()=>Se.setProject(At.serialize()),50);At.on("save",t=>{Se.saveProject(t)});Oe.on("settings",t=>{Se.setSettings(t),Fl(t)},50);$l.init({projectManager:Se});const X2=(t,e)=>{const{background:{scale:s=1,resX:n=16,resY:r=16}={}}=e||{},i=s!=null?s:0,a=n!=null?n:8,o=r!=null?r:8,l=sp(i,a,o);return mr(t,l)};class G2{constructor(e,s){this.scene=e,this.gl=e.renderer.gl,this.initMeshes(),s.on("settings",this.setSettings.bind(this)),this.setSettings(Oe.getSettings())}initMeshes(){const e=new mt(this.gl),s=Nu.texture(this.gl,"assets/rocky_dirt1-albedo.jpg",{wrapS:this.gl.REPEAT,wrapT:this.gl.REPEAT}),n=new Jt(this.gl,{vertex:Ta.vertex,fragment:Ta.fragment,uniforms:{uTime:{value:0},tMap:{value:s},uFogColor:{value:new Cn("#ffffff")},uFogNear:{value:10},uFogFar:{value:30},texScale:{value:1}}});hs.subscribe(i=>{n.uniforms.uFogColor.value=new Cn(i["background-color"])}),this.ground=this.scene.addMesh({geometry:e,program:n});const r=(i=0)=>{requestAnimationFrame(r),n.uniforms.uTime.value=i};r()}setSettings(e){var s,n;this.settings=e,(s=e==null?void 0:e.background)!=null&&s.ground&&(this.ground.geometry=X2(this.gl,e)),this.ground.visible=!!((n=e==null?void 0:e.background)!=null&&n.ground)}}function Y2(t){let e,s,n=t[1]?"<b>[NEW]</b>":"",r,i=t[0].subject+"",a;return{c(){e=N("p"),s=new oc(!1),r=C(),a=F(i),this.h()},l(o){e=P(o,"P",{});var l=A(e);s=lc(l,!1),r=z(l),a=B(l,i),l.forEach(w),this.h()},h(){s.a=r},m(o,l){T(o,e,l),s.m(n,e),E(e,r),E(e,a)},p(o,[l]){l&2&&n!==(n=o[1]?"<b>[NEW]</b>":"")&&s.p(n),l&1&&i!==(i=o[0].subject+"")&&ve(a,i)},i:q,o:q,d(o){o&&w(e)}}}function J2(t,e,s){let{commit:n}=e,{isNew:r=!1}=e;return t.$$set=i=>{"commit"in i&&s(0,n=i.commit),"isNew"in i&&s(1,r=i.isNew)},[n,r]}class Q2 extends fe{constructor(e){super(),de(this,e,J2,Y2,pe,{commit:0,isNew:1})}}const Ul=Ue([]);let sr=nt.get("lastUpdated",Date.now());function Z2(t){const e=Date.parse(t.date);return Re(ye({},t),{date:e,new:sr<e})}let Ls;async function K2(){const e=await(await fetch("commits.json")).json();return sr=Date.now(),nt.set("lastUpdated",sr),e.map(s=>Z2(s))}const eg=async()=>{if(Ls)return Ls;Ls=K2();const t=await Ls;Ul.set(t)};function uo(t,e,s){const n=t.slice();return n[4]=e[s],n}function fo(t){let e,s=t[2](t[4].date)+"",n;return{c(){e=N("h3"),n=F(s),this.h()},l(r){e=P(r,"H3",{class:!0});var i=A(e);n=B(i,s),i.forEach(w),this.h()},h(){k(e,"class","svelte-13vbnbr")},m(r,i){T(r,e,i),E(e,n)},p(r,i){i&1&&s!==(s=r[2](r[4].date)+"")&&ve(n,s)},d(r){r&&w(e)}}}function po(t){let e=t[1](t[4]),s,n,r,i=e&&fo(t);return n=new Q2({props:{commit:t[4]}}),{c(){i&&i.c(),s=C(),K(n.$$.fragment)},l(a){i&&i.l(a),s=z(a),ne(n.$$.fragment,a)},m(a,o){i&&i.m(a,o),T(a,s,o),ee(n,a,o),r=!0},p(a,o){o&1&&(e=a[1](a[4])),e?i?i.p(a,o):(i=fo(a),i.c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null);const l={};o&1&&(l.commit=a[4]),n.$set(l)},i(a){r||(I(n.$$.fragment,a),r=!0)},o(a){O(n.$$.fragment,a),r=!1},d(a){i&&i.d(a),a&&w(s),te(n,a)}}}function tg(t){let e,s,n,r,i,a=t[0],o=[];for(let c=0;c<a.length;c+=1)o[c]=po(uo(t,a,c));const l=c=>O(o[c],1,1,()=>{o[c]=null});return{c(){e=N("h1"),s=F("Changelog"),n=C(),r=N("div");for(let c=0;c<o.length;c+=1)o[c].c();this.h()},l(c){e=P(c,"H1",{});var h=A(e);s=B(h,"Changelog"),h.forEach(w),n=z(c),r=P(c,"DIV",{class:!0});var u=A(r);for(let d=0;d<o.length;d+=1)o[d].l(u);u.forEach(w),this.h()},h(){k(r,"class","svelte-13vbnbr")},m(c,h){T(c,e,h),E(e,s),T(c,n,h),T(c,r,h);for(let u=0;u<o.length;u+=1)o[u].m(r,null);i=!0},p(c,[h]){if(h&7){a=c[0];let u;for(u=0;u<a.length;u+=1){const d=uo(c,a,u);o[u]?(o[u].p(d,h),I(o[u],1)):(o[u]=po(d),o[u].c(),I(o[u],1),o[u].m(r,null))}for(oe(),u=a.length;u<o.length;u+=1)l(u);le()}},i(c){if(!i){for(let h=0;h<a.length;h+=1)I(o[h]);i=!0}},o(c){o=o.filter(Boolean);for(let h=0;h<o.length;h+=1)O(o[h]);i=!1},d(c){c&&w(e),c&&w(n),c&&w(r),Pe(o,c)}}}function sg(t,e,s){let n;ft(t,Ul,o=>s(0,n=o)),eg();let r=n.length&&new Date(n[0].date).getDay();return[n,o=>{const l=new Date(o.date);return l.getDay()!=r?(r=l.getDay(),!0):!1},o=>new Date(o).toLocaleDateString()]}class ng extends fe{constructor(e){super(),de(this,e,sg,tg,pe,{})}}function rg(t){let e,s,n,r,i;const a=t[4].default,o=rr(a,t,t[3],null);return{c(){e=C(),s=N("div"),o&&o.c()},l(l){e=z(l),s=P(l,"DIV",{});var c=A(s);o&&o.l(c),c.forEach(w)},m(l,c){T(l,e,c),T(l,s,c),o&&o.m(s,null),t[5](s),n=!0,r||(i=J(document.body,"click",t[1]),r=!0)},p(l,[c]){o&&o.p&&(!n||c&8)&&ir(o,a,l,l[3],n?or(a,l[3],c,null):ar(l[3]),null)},i(l){n||(I(o,l),n=!0)},o(l){O(o,l),n=!1},d(l){l&&w(e),l&&w(s),o&&o.d(l),t[5](null),r=!1,i()}}}function ig(t,e,s){let{$$slots:n={},$$scope:r}=e,{exclude:i=[]}=e,a;const o=We();function l(u){for(var d=u;d;){if(i.indexOf(d)>=0||d===a)return!0;d=d.parentNode}return!1}function c(u){l(u.target)||o("clickoutside")}function h(u){Ne[u?"unshift":"push"](()=>{a=u,s(0,a)})}return t.$$set=u=>{"exclude"in u&&s(2,i=u.exclude),"$$scope"in u&&s(3,r=u.$$scope)},[a,c,i,r,n,h]}class ag extends fe{constructor(e){super(),de(this,e,ig,rg,pe,{exclude:2})}}function og(t){let e,s,n,r,i,a,o,l,c;function h(p){t[6](p)}let u={useActive:!0,icon:t[3],name:t[1]};t[0]!==void 0&&(u.active=t[0]),s=new Ie({props:u}),Ne.push(()=>Ht(s,"active",h));var d=t[4];function f(p){return{props:{visible:p[0]}}}return d&&(l=new d(f(t))),{c(){e=N("div"),n=N("div"),K(s.$$.fragment),a=C(),o=N("div"),l&&K(l.$$.fragment),this.h()},l(p){e=P(p,"DIV",{class:!0});var m=A(e);n=P(m,"DIV",{style:!0});var v=A(n);ne(s.$$.fragment,v),a=z(m),o=P(m,"DIV",{class:!0});var g=A(o);l&&ne(l.$$.fragment,g),g.forEach(w),m.forEach(w),this.h()},h(){G(n,"display","contents"),G(n,"--bg","transparent"),G(n,"--text",i=t[5]["text-color"]),k(o,"class","wrapper svelte-1yk4lbj"),Z(o,"visible",t[0]),Z(o,"right",t[2]),k(e,"class","icon-wrapper svelte-1yk4lbj"),Z(e,"active",t[0])},m(p,m){T(p,e,m),E(e,n),ee(s,n,null),E(e,a),E(e,o),l&&ee(l,o,null),c=!0},p(p,m){m&32&&i!==(i=p[5]["text-color"])&&G(n,"--text",i);const v={};m&8&&(v.icon=p[3]),m&2&&(v.name=p[1]),!r&&m&1&&(r=!0,v.active=p[0],Xt(()=>r=!1)),s.$set(v);const g={};if(m&1&&(g.visible=p[0]),d!==(d=p[4])){if(l){oe();const _=l;O(_.$$.fragment,1,0,()=>{te(_,1)}),le()}d?(l=new d(f(p)),K(l.$$.fragment),I(l.$$.fragment,1),ee(l,o,null)):l=null}else d&&l.$set(g);m&1&&Z(o,"visible",p[0]),m&4&&Z(o,"right",p[2]),m&1&&Z(e,"active",p[0])},i(p){c||(I(s.$$.fragment,p),l&&I(l.$$.fragment,p),c=!0)},o(p){O(s.$$.fragment,p),l&&O(l.$$.fragment,p),c=!1},d(p){p&&w(e),te(s),l&&te(l)}}}function lg(t){let e,s;return e=new ag({props:{$$slots:{default:[og]},$$scope:{ctx:t}}}),e.$on("clickoutside",t[7]),{c(){K(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,r){ee(e,n,r),s=!0},p(n,[r]){const i={};r&319&&(i.$$scope={dirty:r,ctx:n}),e.$set(i)},i(n){s||(I(e.$$.fragment,n),s=!0)},o(n){O(e.$$.fragment,n),s=!1},d(n){te(e,n)}}}function cg(t,e,s){let n;ft(t,hs,u=>s(5,n=u));let{name:r=""}=e,{right:i=!1}=e,{icon:a}=e,{component:o}=e,{visible:l=!1}=e;function c(u){l=u,s(0,l)}const h=()=>s(0,l=!1);return t.$$set=u=>{"name"in u&&s(1,r=u.name),"right"in u&&s(2,i=u.right),"icon"in u&&s(3,a=u.icon),"component"in u&&s(4,o=u.component),"visible"in u&&s(0,l=u.visible)},[l,r,i,a,o,n,c,h]}class Pn extends fe{constructor(e){super(),de(this,e,cg,lg,pe,{name:1,right:2,icon:3,component:4,visible:0})}}function hg(t){let e,s,n,r,i,a,o,l,c,h,u,d,f,p,m,v,g,_,b=t[0]==="bug"&&mo(t);return m=new Ie({props:{name:"Submit"}}),m.$on("click",t[10]),{c(){e=N("section"),s=N("label"),n=F("Title"),r=C(),i=N("input"),a=C(),o=N("section"),l=N("label"),c=F("Description"),h=C(),u=N("textarea"),f=C(),b&&b.c(),p=C(),K(m.$$.fragment),this.h()},l(y){e=P(y,"SECTION",{class:!0});var M=A(e);s=P(M,"LABEL",{for:!0,class:!0});var x=A(s);n=B(x,"Title"),x.forEach(w),r=z(M),i=P(M,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),M.forEach(w),a=z(y),o=P(y,"SECTION",{class:!0});var L=A(o);l=P(L,"LABEL",{for:!0,class:!0});var S=A(l);c=B(S,"Description"),S.forEach(w),h=z(L),u=P(L,"TEXTAREA",{type:!0,id:!0,rowspan:!0,placeholder:!0,class:!0}),A(u).forEach(w),L.forEach(w),f=z(y),b&&b.l(y),p=z(y),ne(m.$$.fragment,y),this.h()},h(){k(s,"for","title"),k(s,"class","svelte-1jitmh9"),k(i,"type","text"),k(i,"id","title"),k(i,"placeholder","Simple Title"),k(i,"class","svelte-1jitmh9"),k(e,"class","svelte-1jitmh9"),k(l,"for","description"),k(l,"class","svelte-1jitmh9"),k(u,"type","text"),k(u,"id","description"),k(u,"rowspan","5"),k(u,"placeholder",d=t[0]==="bug"?"Please provide a detailed description of what happened.":"Please describe the idea."),k(u,"class","svelte-1jitmh9"),k(o,"class","svelte-1jitmh9")},m(y,M){T(y,e,M),E(e,s),E(s,n),E(e,r),E(e,i),Be(i,t[1]),T(y,a,M),T(y,o,M),E(o,l),E(l,c),E(o,h),E(o,u),Be(u,t[2]),T(y,f,M),b&&b.m(y,M),T(y,p,M),ee(m,y,M),v=!0,g||(_=[J(i,"keydown",Os(t[13])),J(i,"input",t[15]),J(u,"keydown",Os(t[12])),J(u,"input",t[16])],g=!0)},p(y,M){M&2&&i.value!==y[1]&&Be(i,y[1]),(!v||M&1&&d!==(d=y[0]==="bug"?"Please provide a detailed description of what happened.":"Please describe the idea."))&&k(u,"placeholder",d),M&4&&Be(u,y[2]),y[0]==="bug"?b?(b.p(y,M),M&1&&I(b,1)):(b=mo(y),b.c(),I(b,1),b.m(p.parentNode,p)):b&&(oe(),O(b,1,1,()=>{b=null}),le())},i(y){v||(I(b),I(m.$$.fragment,y),v=!0)},o(y){O(b),O(m.$$.fragment,y),v=!1},d(y){y&&w(e),y&&w(a),y&&w(o),y&&w(f),b&&b.d(y),y&&w(p),te(m,y),g=!1,wt(_)}}}function ug(t){let e,s,n={ctx:t,current:null,token:null,hasCatch:!0,pending:gg,then:vg,catch:mg,error:21};return Fr(s=t[6],n),{c(){e=ae(),n.block.c()},l(r){e=ae(),n.block.l(r)},m(r,i){T(r,e,i),n.block.m(r,n.anchor=i),n.mount=()=>e.parentNode,n.anchor=e},p(r,i){t=r,n.ctx=t,i&64&&s!==(s=t[6])&&Fr(s,n)||cc(n,t,i)},i:q,o:q,d(r){r&&w(e),n.block.d(r),n.token=null,n=null}}}function mo(t){let e,s,n,r,i,a,o,l,c,h,u,d,f,p,m,v,g,_,b,y,M,x,L,S=t[7]&&vo(t);function $(j){t[18](j)}let R={};t[3]!==void 0&&(R.value=t[3]),r=new ls({props:R}),Ne.push(()=>Ht(r,"value",$)),u=new $s({props:{name:"What is that?",$$slots:{default:[dg]},$$scope:{ctx:t}}});function W(j){t[19](j)}let V={};return t[4]!==void 0&&(V.value=t[4]),m=new ls({props:V}),Ne.push(()=>Ht(m,"value",W)),x=new $s({props:{name:"What is that?",$$slots:{default:[pg]},$$scope:{ctx:t}}}),{c(){S&&S.c(),e=C(),s=N("section"),n=N("div"),K(r.$$.fragment),a=C(),o=N("p"),l=F("Include Browser Info"),c=C(),h=N("div"),K(u.$$.fragment),d=C(),f=N("section"),p=N("div"),K(m.$$.fragment),g=C(),_=N("p"),b=F("Include Logs"),y=C(),M=N("div"),K(x.$$.fragment),this.h()},l(j){S&&S.l(j),e=z(j),s=P(j,"SECTION",{class:!0});var D=A(s);n=P(D,"DIV",{style:!0});var H=A(n);ne(r.$$.fragment,H),a=z(H),o=P(H,"P",{style:!0});var re=A(o);l=B(re,"Include Browser Info"),re.forEach(w),H.forEach(w),c=z(D),h=P(D,"DIV",{class:!0});var se=A(h);ne(u.$$.fragment,se),se.forEach(w),D.forEach(w),d=z(j),f=P(j,"SECTION",{class:!0});var he=A(f);p=P(he,"DIV",{style:!0});var ue=A(p);ne(m.$$.fragment,ue),g=z(ue),_=P(ue,"P",{style:!0});var we=A(_);b=B(we,"Include Logs"),we.forEach(w),ue.forEach(w),y=z(he),M=P(he,"DIV",{class:!0});var ge=A(M);ne(x.$$.fragment,ge),ge.forEach(w),he.forEach(w),this.h()},h(){G(o,"margin-left","5px"),G(n,"display","flex"),G(n,"align-items","center"),k(h,"class","info svelte-1jitmh9"),k(s,"class","svelte-1jitmh9"),G(_,"margin-left","5px"),G(p,"display","flex"),G(p,"align-items","center"),k(M,"class","info svelte-1jitmh9"),k(f,"class","svelte-1jitmh9")},m(j,D){S&&S.m(j,D),T(j,e,D),T(j,s,D),E(s,n),ee(r,n,null),E(n,a),E(n,o),E(o,l),E(s,c),E(s,h),ee(u,h,null),T(j,d,D),T(j,f,D),E(f,p),ee(m,p,null),E(p,g),E(p,_),E(_,b),E(f,y),E(f,M),ee(x,M,null),L=!0},p(j,D){j[7]?S?(S.p(j,D),D&128&&I(S,1)):(S=vo(j),S.c(),I(S,1),S.m(e.parentNode,e)):S&&(oe(),O(S,1,1,()=>{S=null}),le());const H={};!i&&D&8&&(i=!0,H.value=j[3],Xt(()=>i=!1)),r.$set(H);const re={};D&4194304&&(re.$$scope={dirty:D,ctx:j}),u.$set(re);const se={};!v&&D&16&&(v=!0,se.value=j[4],Xt(()=>v=!1)),m.$set(se);const he={};D&4194304&&(he.$$scope={dirty:D,ctx:j}),x.$set(he)},i(j){L||(I(S),I(r.$$.fragment,j),I(u.$$.fragment,j),I(m.$$.fragment,j),I(x.$$.fragment,j),L=!0)},o(j){O(S),O(r.$$.fragment,j),O(u.$$.fragment,j),O(m.$$.fragment,j),O(x.$$.fragment,j),L=!1},d(j){S&&S.d(j),j&&w(e),j&&w(s),te(r),te(u),j&&w(d),j&&w(f),te(m),te(x)}}}function vo(t){let e,s,n,r,i,a,o,l,c,h,u;function d(p){t[17](p)}let f={};return t[5]!==void 0&&(f.value=t[5]),n=new ls({props:f}),Ne.push(()=>Ht(n,"value",d)),h=new $s({props:{name:"What is that?",$$slots:{default:[fg]},$$scope:{ctx:t}}}),{c(){e=N("section"),s=N("div"),K(n.$$.fragment),i=C(),a=N("p"),o=F("Include StackTrace"),l=C(),c=N("div"),K(h.$$.fragment),this.h()},l(p){e=P(p,"SECTION",{class:!0});var m=A(e);s=P(m,"DIV",{style:!0});var v=A(s);ne(n.$$.fragment,v),i=z(v),a=P(v,"P",{style:!0});var g=A(a);o=B(g,"Include StackTrace"),g.forEach(w),v.forEach(w),l=z(m),c=P(m,"DIV",{class:!0});var _=A(c);ne(h.$$.fragment,_),_.forEach(w),m.forEach(w),this.h()},h(){G(a,"margin-left","5px"),G(s,"display","flex"),G(s,"align-items","center"),k(c,"class","info svelte-1jitmh9"),k(e,"class","svelte-1jitmh9")},m(p,m){T(p,e,m),E(e,s),ee(n,s,null),E(s,i),E(s,a),E(a,o),E(e,l),E(e,c),ee(h,c,null),u=!0},p(p,m){const v={};!r&&m&32&&(r=!0,v.value=p[5],Xt(()=>r=!1)),n.$set(v);const g={};m&4194432&&(g.$$scope={dirty:m,ctx:p}),h.$set(g)},i(p){u||(I(n.$$.fragment,p),I(h.$$.fragment,p),u=!0)},o(p){O(n.$$.fragment,p),O(h.$$.fragment,p),u=!1},d(p){p&&w(e),te(n),te(h)}}}function fg(t){let e,s;return e=new Go({props:{stacktrace:t[7]}}),{c(){K(e.$$.fragment)},l(n){ne(e.$$.fragment,n)},m(n,r){ee(e,n,r),s=!0},p(n,r){const i={};r&128&&(i.stacktrace=n[7]),e.$set(i)},i(n){s||(I(e.$$.fragment,n),s=!0)},o(n){O(e.$$.fragment,n),s=!1},d(n){te(e,n)}}}function dg(t){let e,s,n,r,i,a,o,l,c=t[8].os+"",h,u,d,f,p,m,v,g=t[8].name+"",_,b,y=t[8].version+"",M,x,L,S,$,R,W,V=window.innerWidth+"",j,D,H=window.innerHeight+"",re,se,he,ue,we,ge,Me,Xe=window.devicePixelRatio+"",$e,ze;return{c(){e=N("p"),s=F(`This information makes it easier for a developer to track down what might have caused
						the bug.`),n=C(),r=N("ul"),i=N("li"),a=F("OS "),o=N("i"),l=F("("),h=F(c),u=F(")"),d=C(),f=N("li"),p=F("Browser "),m=N("i"),v=F("("),_=F(g),b=F(" / "),M=F(y),x=F(")"),L=C(),S=N("li"),$=F("Screen Resolution "),R=N("i"),W=F("("),j=F(V),D=F("x"),re=F(H),se=F(")"),he=C(),ue=N("li"),we=F("Screen DPI "),ge=N("i"),Me=F("("),$e=F(Xe),ze=F(")")},l(be){e=P(be,"P",{});var Ee=A(e);s=B(Ee,`This information makes it easier for a developer to track down what might have caused
						the bug.`),Ee.forEach(w),n=z(be),r=P(be,"UL",{});var Te=A(r);i=P(Te,"LI",{});var it=A(i);a=B(it,"OS "),o=P(it,"I",{});var Ke=A(o);l=B(Ke,"("),h=B(Ke,c),u=B(Ke,")"),Ke.forEach(w),it.forEach(w),d=z(Te),f=P(Te,"LI",{});var qe=A(f);p=B(qe,"Browser "),m=P(qe,"I",{});var Ge=A(m);v=B(Ge,"("),_=B(Ge,g),b=B(Ge," / "),M=B(Ge,y),x=B(Ge,")"),Ge.forEach(w),qe.forEach(w),L=z(Te),S=P(Te,"LI",{});var X=A(S);$=B(X,"Screen Resolution "),R=P(X,"I",{});var me=A(R);W=B(me,"("),j=B(me,V),D=B(me,"x"),re=B(me,H),se=B(me,")"),me.forEach(w),X.forEach(w),he=z(Te),ue=P(Te,"LI",{});var _e=A(ue);we=B(_e,"Screen DPI "),ge=P(_e,"I",{});var Ye=A(ge);Me=B(Ye,"("),$e=B(Ye,Xe),ze=B(Ye,")"),Ye.forEach(w),_e.forEach(w),Te.forEach(w)},m(be,Ee){T(be,e,Ee),E(e,s),T(be,n,Ee),T(be,r,Ee),E(r,i),E(i,a),E(i,o),E(o,l),E(o,h),E(o,u),E(r,d),E(r,f),E(f,p),E(f,m),E(m,v),E(m,_),E(m,b),E(m,M),E(m,x),E(r,L),E(r,S),E(S,$),E(S,R),E(R,W),E(R,j),E(R,D),E(R,re),E(R,se),E(r,he),E(r,ue),E(ue,we),E(ue,ge),E(ge,Me),E(ge,$e),E(ge,ze)},p:q,d(be){be&&w(e),be&&w(n),be&&w(r)}}}function pg(t){let e,s,n,r,i;return r=new $f({props:{logs:t[9]}}),{c(){e=N("p"),s=F(`This information makes it easier for a developer to track down what might have caused
						the bug.`),n=C(),K(r.$$.fragment)},l(a){e=P(a,"P",{});var o=A(e);s=B(o,`This information makes it easier for a developer to track down what might have caused
						the bug.`),o.forEach(w),n=z(a),ne(r.$$.fragment,a)},m(a,o){T(a,e,o),E(e,s),T(a,n,o),ee(r,a,o),i=!0},p:q,i(a){i||(I(r.$$.fragment,a),i=!0)},o(a){O(r.$$.fragment,a),i=!1},d(a){a&&w(e),a&&w(n),te(r,a)}}}function mg(t){let e,s,n,r,i=JSON.stringify(t[21],null,2)+"",a,o,l,c,h,u;return{c(){e=N("p"),s=F("Errror"),n=C(),r=N("code"),a=F(i),o=C(),l=N("button"),c=F("go back")},l(d){e=P(d,"P",{});var f=A(e);s=B(f,"Errror"),f.forEach(w),n=z(d),r=P(d,"CODE",{});var p=A(r);a=B(p,i),p.forEach(w),o=z(d),l=P(d,"BUTTON",{});var m=A(l);c=B(m,"go back"),m.forEach(w)},m(d,f){T(d,e,f),E(e,s),T(d,n,f),T(d,r,f),E(r,a),T(d,o,f),T(d,l,f),E(l,c),h||(u=J(l,"click",t[14]),h=!0)},p(d,f){f&64&&i!==(i=JSON.stringify(d[21],null,2)+"")&&ve(a,i)},d(d){d&&w(e),d&&w(n),d&&w(r),d&&w(o),d&&w(l),h=!1,u()}}}function vg(t){return{c:q,l:q,m:q,p:q,d:q}}function gg(t){let e;return{c(){e=F("Submitting Reprot")},l(s){e=B(s,"Submitting Reprot")},m(s,n){T(s,e,n)},p:q,d(s){s&&w(e)}}}function yg(t){let e,s,n,r;const i=[ug,hg],a=[];function o(l,c){return l[6]?0:1}return e=o(t),s=a[e]=i[e](t),{c(){s.c(),n=ae()},l(l){s.l(l),n=ae()},m(l,c){a[e].m(l,c),T(l,n,c),r=!0},p(l,[c]){let h=e;e=o(l),e===h?a[e].p(l,c):(oe(),O(a[h],1,1,()=>{a[h]=null}),le(),s=a[e],s?s.p(l,c):(s=a[e]=i[e](l),s.c()),I(s,1),s.m(n.parentNode,n))},i(l){r||(I(s),r=!0)},o(l){O(s),r=!1},d(l){a[e].d(l),l&&w(n)}}}function wg(t,e,s){let n,{mode:r="bug"}=e,i=Va(),a,o,l=!1,c=!1;const h=Le.getHistory();let{error:u}=e,d=!0;const f=We();let p;function m(){const S={type:r,title:a,description:o};d&&(S.stacktrace=n),l&&(S.browser=Va(),S.browser.screen={width:window.innerWidth,height:window.innerHeight,dpi:window.devicePixelRatio}),c&&(S.logs=h),s(6,p=Ol(S)),p.then(()=>{f("close"),ct("Yeeeah, report submitted",{type:"success"})})}Yt(async()=>{n&&s(1,a=n.type+": "+n.title)});function v(S){Rr.call(this,t,S)}function g(S){Rr.call(this,t,S)}const _=()=>s(6,p=void 0);function b(){a=this.value,s(1,a)}function y(){o=this.value,s(2,o)}function M(S){d=S,s(5,d)}function x(S){l=S,s(3,l)}function L(S){c=S,s(4,c)}return t.$$set=S=>{"mode"in S&&s(0,r=S.mode),"error"in S&&s(11,u=S.error)},t.$$.update=()=>{t.$$.dirty&2048&&s(7,n=u&&$n(u))},[r,a,o,l,c,d,p,n,i,h,m,u,v,g,_,b,y,M,x,L]}class nr extends fe{constructor(e){super(),de(this,e,wg,yg,pe,{mode:0,error:11})}}class bg{constructor(e,s){this.scene=e,this.m={},this.gl=e.renderer.gl,this.initGeometry(),this.settings=Oe.getSettings(),this.setSettings(this.settings),s.on("settings",n=>this.setSettings(n))}initGeometry(){this.m.skeleton=this.scene.addMesh({geometry:new It(this.gl,{position:{size:3,data:new Float32Array([0,0,0])},uv:{size:2,data:new Float32Array([0,0])},index:{size:1,data:new Uint16Array([0])}}),program:fv(this.gl),mode:this.gl.LINES}),this.m.vertices=this.scene.addMesh({mode:this.gl.POINTS,geometry:new It(this.gl,{position:{size:3,data:new Float32Array(3)}}),program:new Jt(this.gl,{vertex:Ia.vertex,fragment:Ia.fragment,depthTest:!1,transparent:!0})})}setSettings(e){var s,n;this.settings=JSON.parse(JSON.stringify(e)),this.m.skeleton.visible=!!((s=this.settings.debug)!=null&&s.skeleton),this.m.vertices.visible=!!((n=this.settings.debug)!=null&&n.skeleton),this.update()}setPlant(e){this.plant=e,this.update()}update(e=this.plant,s=this.settings){var n;if(!(!e||!s)&&e.stems&&((n=s.debug)==null?void 0:n.skeleton)){const r=e.stems;let i=0;for(const u of r)i+=u.skeleton.length/4*3;const a=new Float32Array(i),o=new Uint32Array((i/3-1)*2),l=new Float32Array(i);let c=0,h=0;r.forEach(({skeleton:u,depth:d})=>{const f=u.length/4;c=Math.max(c,d),yt(l,h,new Float32Array(f).fill(d));for(let p=0;p<f;p++)a[h*3+p*3+0]=u[p*4+0],a[h*3+p*3+1]=u[p*4+1],a[h*3+p*3+2]=u[p*4+2];for(let p=0;p<f-1;p++)o[h*2+p*2]=h+p,o[h*2+p*2+1]=h+p+1;h+=f}),this.m.skeleton.program.uniforms.maxDepth.value=c,this.m.skeleton.geometry=new It(this.gl,{position:{size:3,data:a},depth:{size:1,data:l},index:{size:1,data:o}}),this.m.vertices.geometry=new It(this.gl,{position:{size:3,data:a}})}}}const _g=Gs(t=>{Se.renderThumbnail({geo:t})},5e3);function go(t){return t==="MatCap"?Tl:t==="Debug"?uv:dv}const xg=Le("scene.foreground");class Mg extends Ze{constructor(e,s){var r;super(),this.scene=e,this.pm=s,this.worker=gr(),this.gl=e.renderer.gl;const n=new Xo(this.gl,{width:0,height:0,depth:0});this.mesh=this.scene.addMesh({geometry:n,program:go((r=this.settings)==null?void 0:r.debug.material)(this.gl)}),this.dbg=new bg(e,s),this.setSettings(Oe.getSettings()),this.setPlant(s.getActiveProject()),this.pm.on("settings",i=>this.setSettings(i)),this.pm.on("plant",i=>this.setPlant(i))}setSettings(e){var s,n,r,i,a;this.mesh&&((s=e==null?void 0:e.debug)==null?void 0:s.material)!==((r=(n=this.settings)==null?void 0:n.debug)==null?void 0:r.material)&&(this.mesh.program=go((i=e==null?void 0:e.debug)==null?void 0:i.material)(this.gl)),this.mesh&&((a=e==null?void 0:e.debug)==null?void 0:a.wireframe)?this.mesh.mode=this.gl.LINE_LOOP:this.mesh.mode=this.gl.TRIANGLES,this.settings=JSON.parse(JSON.stringify(e)),console.log("Seeettings",{settings:e}),this.update()}setPlant(e){!e||(this.plant=window.structuredClone(e),this.update())}async update(e=this.plant,s=this.settings){var n,r;if(!(!e||!s)){this.scene.isLoading.set(!0);try{q2("generate");const i=await this.worker.executeNodeSystem(e,s);if(H2("generate"),this.scene.isLoading.set(!1),!i||i.errors||!i.geometry){this.mesh.visible=!1,i.errors&&this.emit("node-errors",i.errors);return}else this.emit("node-errors",[]),this.mesh.visible=!((r=(n=this==null?void 0:this.settings)==null?void 0:n.debug)!=null&&r.hideMesh);_g(i.geometry),this.dbg.setPlant(i),this.mesh.geometry=mr(this.gl,i.geometry),this.mesh.geometry.computeBoundingBox(),this.scene.renderer.setControlTarget(this.mesh.geometry.bounds.center)}catch(i){xg.error(i),await ct(i,{title:"Error [Generator]",values:["report"]})==="report"&&(console.error(i),gt(nr,{timeout:0,title:"Report Bug",type:"error",props:{mode:"bug",error:i}}))}}}}class Eg{constructor(e,s){this.isLoading=Ue(!1),this.renderer=new Ll({canvas:s,camPos:nt.get("camPos")}),this.renderer.on("camPos",n=>nt.set("camPos",n)),this.renderer.on("perf",n=>Bl("render",n),40),this.renderer.handleResize(),this.scene=this.renderer.scene,this.gl=this.renderer.gl,hs.subscribe(n=>{this.renderer.setClearColor(n["background-color"])}),this.wrapper=s.parentElement,this.bg=new G2(this,e),this.fg=new Mg(this,e)}addMesh(e){const s=new Ho(this.gl,e);return s.setParent(this.scene),s}}function yo(t){let e,s,n,r,i=JSON.stringify(t[1],null,2)+"",a,o,l;return{c(){e=N("pre"),s=F("    "),n=N("code"),r=F(`
      `),a=F(i),o=F(`
    `),l=F(`
  `),this.h()},l(c){e=P(c,"PRE",{class:!0});var h=A(e);s=B(h,"    "),n=P(h,"CODE",{class:!0});var u=A(n);r=B(u,`
      `),a=B(u,i),o=B(u,`
    `),u.forEach(w),l=B(h,`
  `),h.forEach(w),this.h()},h(){k(n,"class","svelte-6jsjoz"),k(e,"class","svelte-6jsjoz")},m(c,h){T(c,e,h),E(e,s),E(e,n),E(n,r),E(n,a),E(n,o),E(e,l)},p(c,h){h&2&&i!==(i=JSON.stringify(c[1],null,2)+"")&&ve(a,i)},d(c){c&&w(e)}}}function wo(t){let e,s,n;return{c(){e=N("div"),s=N("p"),n=F("Is Loading"),this.h()},l(r){e=P(r,"DIV",{class:!0});var i=A(e);s=P(i,"P",{class:!0});var a=A(s);n=B(a,"Is Loading"),a.forEach(w),i.forEach(w),this.h()},h(){k(s,"class","svelte-6jsjoz"),k(e,"class","is-loading svelte-6jsjoz")},m(r,i){T(r,e,i),E(e,s),E(s,n)},d(r){r&&w(e)}}}function bo(t){let e,s,n;return{c(){e=N("div"),s=N("h2"),n=F("Logs:"),this.h()},l(r){e=P(r,"DIV",{class:!0});var i=A(e);s=P(i,"H2",{class:!0});var a=A(s);n=B(a,"Logs:"),a.forEach(w),i.forEach(w),this.h()},h(){k(s,"class","svelte-6jsjoz"),k(e,"class","log-wrapper svelte-6jsjoz")},m(r,i){T(r,e,i),E(e,s),E(s,n)},d(r){r&&w(e)}}}function kg(t){var v,g,_,b;let e,s,n,r,i,a,o,l,c,h,u,d,f=((g=(v=t[6])==null?void 0:v.debug)==null?void 0:g.pd)&&t[1]&&yo(t),p=t[7]&&wo(),m=((b=(_=t[6])==null?void 0:_.debug)==null?void 0:b.showLogs)&&bo();return{c(){e=N("div"),f&&f.c(),s=C(),n=N("div"),r=N("canvas"),a=C(),o=N("canvas"),c=C(),h=N("canvas"),u=C(),p&&p.c(),d=C(),m&&m.c(),this.h()},l(y){e=P(y,"DIV",{class:!0});var M=A(e);f&&f.l(M),s=z(M),n=P(M,"DIV",{class:!0});var x=A(n);r=P(x,"CANVAS",{style:!0,class:!0}),A(r).forEach(w),a=z(x),o=P(x,"CANVAS",{style:!0,class:!0}),A(o).forEach(w),x.forEach(w),c=z(M),h=P(M,"CANVAS",{class:!0}),A(h).forEach(w),u=z(M),p&&p.l(M),d=z(M),m&&m.l(M),M.forEach(w),this.h()},h(){var y,M,x,L;k(r,"style",i=`display: ${(M=(y=t[6])==null?void 0:y.debug)!=null&&M.generatePerf?"visible":"none"}`),k(r,"class","svelte-6jsjoz"),k(o,"style",l=`display: ${(L=(x=t[6])==null?void 0:x.debug)!=null&&L.renderPerf?"visible":"none"}`),k(o,"class","svelte-6jsjoz"),k(n,"class","performance-wrapper svelte-6jsjoz"),k(h,"class","svelte-6jsjoz"),k(e,"class","scene-wrapper svelte-6jsjoz")},m(y,M){T(y,e,M),f&&f.m(e,null),E(e,s),E(e,n),E(n,r),t[10](r),E(n,a),E(n,o),t[11](o),E(e,c),E(e,h),t[12](h),E(e,u),p&&p.m(e,null),E(e,d),m&&m.m(e,null)},p(y,[M]){var x,L,S,$,R,W,V,j;((L=(x=y[6])==null?void 0:x.debug)==null?void 0:L.pd)&&y[1]?f?f.p(y,M):(f=yo(y),f.c(),f.m(e,s)):f&&(f.d(1),f=null),M&64&&i!==(i=`display: ${($=(S=y[6])==null?void 0:S.debug)!=null&&$.generatePerf?"visible":"none"}`)&&k(r,"style",i),M&64&&l!==(l=`display: ${(W=(R=y[6])==null?void 0:R.debug)!=null&&W.renderPerf?"visible":"none"}`)&&k(o,"style",l),y[7]?p||(p=wo(),p.c(),p.m(e,d)):p&&(p.d(1),p=null),(j=(V=y[6])==null?void 0:V.debug)!=null&&j.showLogs?m||(m=bo(),m.c(),m.m(e,null)):m&&(m.d(1),m=null)},i:q,o:q,d(y){y&&w(e),f&&f.d(),t[10](null),t[11](null),t[12](null),p&&p.d(),m&&m.d()}}}function Ag(t,e,s){let n,r,i=q,a=()=>(i(),i=Br(p,y=>s(6,r=y)),p),o,l=q,c=()=>(l(),l=Br(n,y=>s(7,o=y)),n);t.$$.on_destroy.push(()=>i()),t.$$.on_destroy.push(()=>l());let h,u,d,f,p,m,v;Yt(()=>(s(8,u=new Eg(Se,h)),ho("render",v),ho("generate",m),u.fg.on("node-errors",y=>{At.view.showErrorMessages(y)})));function g(y){Ne[y?"unshift":"push"](()=>{m=y,s(3,m)})}function _(y){Ne[y?"unshift":"push"](()=>{v=y,s(4,v)})}function b(y){Ne[y?"unshift":"push"](()=>{h=y,s(0,h)})}return t.$$.update=()=>{t.$$.dirty&256&&c(s(5,n=u&&u.isLoading)),t.$$.dirty&512&&Se&&(f&&f(),s(9,f=Se.on("save",y=>{const M=JSON.parse(JSON.stringify(y));M.meta.thumbnail="",s(1,d=M)})))},Oe&&a(s(2,p=Oe.store)),[h,d,p,m,v,n,r,o,u,f,g,_,b]}class Sg extends fe{constructor(e){super(),de(this,e,Ag,kg,pe,{})}}Vt.disable_scroll_handling;const Ng=Vt.goto;Vt.invalidate;Vt.prefetch;Vt.prefetch_routes;Vt.before_navigate;Vt.after_navigate;function _o(t,e,s){const n=t.slice();return n[5]=e[s],n[6]=e,n[7]=s,n}function xo(t,e,s){const n=t.slice();return n[5]=e[s],n[8]=e,n[9]=s,n}function Pg(t){let e,s,n,r=t[1].length&&Mo(t),i=t[2].length&&So(t);return{c(){r&&r.c(),e=C(),i&&i.c(),s=ae()},l(a){r&&r.l(a),e=z(a),i&&i.l(a),s=ae()},m(a,o){r&&r.m(a,o),T(a,e,o),i&&i.m(a,o),T(a,s,o),n=!0},p(a,o){a[1].length?r?(r.p(a,o),o&2&&I(r,1)):(r=Mo(a),r.c(),I(r,1),r.m(e.parentNode,e)):r&&(oe(),O(r,1,1,()=>{r=null}),le()),a[2].length?i?(i.p(a,o),o&4&&I(i,1)):(i=So(a),i.c(),I(i,1),i.m(s.parentNode,s)):i&&(oe(),O(i,1,1,()=>{i=null}),le())},i(a){n||(I(r),I(i),n=!0)},o(a){O(r),O(i),n=!1},d(a){r&&r.d(a),a&&w(e),i&&i.d(a),a&&w(s)}}}function Lg(t){let e,s;return{c(){e=N("h3"),s=F("Loading..")},l(n){e=P(n,"H3",{});var r=A(e);s=B(r,"Loading.."),r.forEach(w)},m(n,r){T(n,e,r),E(e,s)},p:q,i:q,o:q,d(n){n&&w(e)}}}function Mo(t){let e,s,n,r,i,a,o,l,c,h,u,d=t[1],f=[];for(let m=0;m<d.length;m+=1)f[m]=Ao(xo(t,d,m));const p=m=>O(f[m],1,1,()=>{f[m]=null});return{c(){e=N("h3"),s=F("Open Reports:"),n=C(),r=N("hr"),i=C(),a=N("div");for(let m=0;m<f.length;m+=1)f[m].c();o=C(),l=N("br"),c=C(),h=N("br"),this.h()},l(m){e=P(m,"H3",{});var v=A(e);s=B(v,"Open Reports:"),v.forEach(w),n=z(m),r=P(m,"HR",{}),i=z(m),a=P(m,"DIV",{class:!0});var g=A(a);for(let _=0;_<f.length;_+=1)f[_].l(g);g.forEach(w),o=z(m),l=P(m,"BR",{}),c=z(m),h=P(m,"BR",{}),this.h()},h(){k(a,"class","reports-wrapper svelte-svogey")},m(m,v){T(m,e,v),E(e,s),T(m,n,v),T(m,r,v),T(m,i,v),T(m,a,v);for(let g=0;g<f.length;g+=1)f[g].m(a,null);T(m,o,v),T(m,l,v),T(m,c,v),T(m,h,v),u=!0},p(m,v){if(v&2){d=m[1];let g;for(g=0;g<d.length;g+=1){const _=xo(m,d,g);f[g]?(f[g].p(_,v),I(f[g],1)):(f[g]=Ao(_),f[g].c(),I(f[g],1),f[g].m(a,null))}for(oe(),g=d.length;g<f.length;g+=1)p(g);le()}},i(m){if(!u){for(let v=0;v<d.length;v+=1)I(f[v]);u=!0}},o(m){f=f.filter(Boolean);for(let v=0;v<f.length;v+=1)O(f[v]);u=!1},d(m){m&&w(e),m&&w(n),m&&w(r),m&&w(i),m&&w(a),Pe(f,m),m&&w(o),m&&w(l),m&&w(c),m&&w(h)}}}function Eo(t){let e,s,n;return{c(){e=N("a"),s=F("Github Issue"),this.h()},l(r){e=P(r,"A",{href:!0,target:!0,class:!0});var i=A(e);s=B(i,"Github Issue"),i.forEach(w),this.h()},h(){k(e,"href",n="https://github.com/jim-fx/plantarium/issues/"+t[5].gh_issue),k(e,"target","__blank"),k(e,"class","svelte-svogey")},m(r,i){T(r,e,i),E(e,s)},p(r,i){i&2&&n!==(n="https://github.com/jim-fx/plantarium/issues/"+r[5].gh_issue)&&k(e,"href",n)},d(r){r&&w(e)}}}function ko(t){let e,s,n,r,i=t[5].description+"",a,o,l;return{c(){e=N("h3"),s=F("description:"),n=C(),r=N("p"),a=F(i)},l(c){e=P(c,"H3",{});var h=A(e);s=B(h,"description:"),h.forEach(w),n=z(c),r=P(c,"P",{});var u=A(r);a=B(u,i),u.forEach(w)},m(c,h){T(c,e,h),E(e,s),T(c,n,h),T(c,r,h),E(r,a),l=!0},p(c,h){(!l||h&2)&&i!==(i=c[5].description+"")&&ve(a,i)},i(c){l||(Ot(()=>{o||(o=Fe(r,ht,{},!0)),o.run(1)}),l=!0)},o(c){o||(o=Fe(r,ht,{},!1)),o.run(0),l=!1},d(c){c&&w(e),c&&w(n),c&&w(r),c&&o&&o.end()}}}function Ao(t){let e,s,n,r=t[5].type+"",i,a,o,l,c=t[5].title+"",h,u,d,f,p,m,v=t[5].gh_issue&&Eo(t),g=t[5]._expanded&&ko(t);function _(){return t[3](t[5],t[8],t[9])}return{c(){e=N("div"),s=N("div"),n=N("b"),i=F(r),a=C(),v&&v.c(),o=C(),l=N("p"),h=F(c),u=C(),g&&g.c(),d=C(),this.h()},l(b){e=P(b,"DIV",{class:!0});var y=A(e);s=P(y,"DIV",{class:!0});var M=A(s);n=P(M,"B",{});var x=A(n);i=B(x,r),x.forEach(w),a=z(M),v&&v.l(M),M.forEach(w),o=z(y),l=P(y,"P",{});var L=A(l);h=B(L,c),L.forEach(w),u=z(y),g&&g.l(y),d=z(y),y.forEach(w),this.h()},h(){k(s,"class","report-header"),k(e,"class","report svelte-svogey"),Z(e,"expanded",t[5]._expanded)},m(b,y){T(b,e,y),E(e,s),E(s,n),E(n,i),E(s,a),v&&v.m(s,null),E(e,o),E(e,l),E(l,h),E(e,u),g&&g.m(e,null),E(e,d),f=!0,p||(m=J(e,"click",_),p=!0)},p(b,y){t=b,(!f||y&2)&&r!==(r=t[5].type+"")&&ve(i,r),t[5].gh_issue?v?v.p(t,y):(v=Eo(t),v.c(),v.m(s,null)):v&&(v.d(1),v=null),(!f||y&2)&&c!==(c=t[5].title+"")&&ve(h,c),t[5]._expanded?g?(g.p(t,y),y&2&&I(g,1)):(g=ko(t),g.c(),I(g,1),g.m(e,d)):g&&(oe(),O(g,1,1,()=>{g=null}),le()),y&2&&Z(e,"expanded",t[5]._expanded)},i(b){f||(I(g),f=!0)},o(b){O(g),f=!1},d(b){b&&w(e),v&&v.d(),g&&g.d(),p=!1,m()}}}function So(t){let e,s,n,r,i,a,o,l=t[2],c=[];for(let u=0;u<l.length;u+=1)c[u]=Lo(_o(t,l,u));const h=u=>O(c[u],1,1,()=>{c[u]=null});return{c(){e=N("h3"),s=F("Closed Reports"),n=C(),r=N("hr"),i=C(),a=N("div");for(let u=0;u<c.length;u+=1)c[u].c();this.h()},l(u){e=P(u,"H3",{});var d=A(e);s=B(d,"Closed Reports"),d.forEach(w),n=z(u),r=P(u,"HR",{}),i=z(u),a=P(u,"DIV",{class:!0});var f=A(a);for(let p=0;p<c.length;p+=1)c[p].l(f);f.forEach(w),this.h()},h(){k(a,"class","reports-wrapper svelte-svogey")},m(u,d){T(u,e,d),E(e,s),T(u,n,d),T(u,r,d),T(u,i,d),T(u,a,d);for(let f=0;f<c.length;f+=1)c[f].m(a,null);o=!0},p(u,d){if(d&4){l=u[2];let f;for(f=0;f<l.length;f+=1){const p=_o(u,l,f);c[f]?(c[f].p(p,d),I(c[f],1)):(c[f]=Lo(p),c[f].c(),I(c[f],1),c[f].m(a,null))}for(oe(),f=l.length;f<c.length;f+=1)h(f);le()}},i(u){if(!o){for(let d=0;d<l.length;d+=1)I(c[d]);o=!0}},o(u){c=c.filter(Boolean);for(let d=0;d<c.length;d+=1)O(c[d]);o=!1},d(u){u&&w(e),u&&w(n),u&&w(r),u&&w(i),u&&w(a),Pe(c,u)}}}function No(t){let e,s,n;return{c(){e=N("a"),s=F("Github Issue"),this.h()},l(r){e=P(r,"A",{href:!0,target:!0,class:!0});var i=A(e);s=B(i,"Github Issue"),i.forEach(w),this.h()},h(){k(e,"href",n="https://github.com/jim-fx/plantarium/issues/"+t[5].gh_issue),k(e,"target","__blank"),k(e,"class","svelte-svogey")},m(r,i){T(r,e,i),E(e,s)},p(r,i){i&4&&n!==(n="https://github.com/jim-fx/plantarium/issues/"+r[5].gh_issue)&&k(e,"href",n)},d(r){r&&w(e)}}}function Po(t){let e,s,n,r,i=t[5].description+"",a,o,l;return{c(){e=N("h3"),s=F("description:"),n=C(),r=N("p"),a=F(i)},l(c){e=P(c,"H3",{});var h=A(e);s=B(h,"description:"),h.forEach(w),n=z(c),r=P(c,"P",{});var u=A(r);a=B(u,i),u.forEach(w)},m(c,h){T(c,e,h),E(e,s),T(c,n,h),T(c,r,h),E(r,a),l=!0},p(c,h){(!l||h&4)&&i!==(i=c[5].description+"")&&ve(a,i)},i(c){l||(Ot(()=>{o||(o=Fe(r,ht,{},!0)),o.run(1)}),l=!0)},o(c){o||(o=Fe(r,ht,{},!1)),o.run(0),l=!1},d(c){c&&w(e),c&&w(n),c&&w(r),c&&o&&o.end()}}}function Lo(t){let e,s,n,r=t[5].type+"",i,a,o,l,c=t[5].title+"",h,u,d,f,p,m,v=t[5].gh_issue&&No(t),g=t[5]._expanded&&Po(t);function _(){return t[4](t[5],t[6],t[7])}return{c(){e=N("div"),s=N("div"),n=N("b"),i=F(r),a=C(),v&&v.c(),o=C(),l=N("p"),h=F(c),u=C(),g&&g.c(),d=C(),this.h()},l(b){e=P(b,"DIV",{class:!0});var y=A(e);s=P(y,"DIV",{class:!0});var M=A(s);n=P(M,"B",{});var x=A(n);i=B(x,r),x.forEach(w),a=z(M),v&&v.l(M),M.forEach(w),o=z(y),l=P(y,"P",{});var L=A(l);h=B(L,c),L.forEach(w),u=z(y),g&&g.l(y),d=z(y),y.forEach(w),this.h()},h(){k(s,"class","report-header"),k(e,"class","report svelte-svogey"),Z(e,"expanded",t[5]._expanded)},m(b,y){T(b,e,y),E(e,s),E(s,n),E(n,i),E(s,a),v&&v.m(s,null),E(e,o),E(e,l),E(l,h),E(e,u),g&&g.m(e,null),E(e,d),f=!0,p||(m=J(e,"click",_),p=!0)},p(b,y){t=b,(!f||y&4)&&r!==(r=t[5].type+"")&&ve(i,r),t[5].gh_issue?v?v.p(t,y):(v=No(t),v.c(),v.m(s,null)):v&&(v.d(1),v=null),(!f||y&4)&&c!==(c=t[5].title+"")&&ve(h,c),t[5]._expanded?g?(g.p(t,y),y&4&&I(g,1)):(g=Po(t),g.c(),I(g,1),g.m(e,d)):g&&(oe(),O(g,1,1,()=>{g=null}),le()),y&4&&Z(e,"expanded",t[5]._expanded)},i(b){f||(I(g),f=!0)},o(b){O(g),f=!1},d(b){b&&w(e),v&&v.d(),g&&g.d(),p=!1,m()}}}function Tg(t){let e,s,n,r;const i=[Lg,Pg],a=[];function o(l,c){return l[0]?0:1}return e=o(t),s=a[e]=i[e](t),{c(){s.c(),n=ae()},l(l){s.l(l),n=ae()},m(l,c){a[e].m(l,c),T(l,n,c),r=!0},p(l,[c]){let h=e;e=o(l),e===h?a[e].p(l,c):(oe(),O(a[h],1,1,()=>{a[h]=null}),le(),s=a[e],s?s.p(l,c):(s=a[e]=i[e](l),s.c()),I(s,1),s.m(n.parentNode,n))},i(l){r||(I(s),r=!0)},o(l){O(s),r=!1},d(l){a[e].d(l),l&&w(n)}}}function Ig(t,e,s){let n=!0,r=[],i=[];return Vl().then(l=>{l.forEach(c=>{c.open?r.push(c):i.push(c)}),s(0,n=!1)}),[n,r,i,(l,c,h)=>s(1,c[h]._expanded=!l._expanded,r),(l,c,h)=>s(2,c[h]._expanded=!l._expanded,i)]}class Dg extends fe{constructor(e){super(),de(this,e,Ig,Tg,pe,{})}}function jg(t){let e,s,n,r,i,a,o,l,c,h,u,d,f,p,m,v,g,_,b;return s=new Ie({props:{name:"Tutorial",icon:"hand"}}),s.$on("click",t[0]),i=new Ie({props:{name:"Node Tutorial",icon:"hand"}}),i.$on("click",t[1]),l=new Ie({props:{name:"Report Bug",icon:"exclamation"}}),l.$on("click",t[2]),u=new Ie({props:{name:"Submit Idea",icon:"bulb"}}),u.$on("click",t[3]),p=new Ie({props:{name:"Changelog"}}),p.$on("click",t[4]),g=new Ie({props:{name:"Bug Reports"}}),g.$on("click",t[5]),{c(){e=N("div"),n=N("div"),K(s.$$.fragment),r=C(),a=N("div"),K(i.$$.fragment),o=C(),c=N("div"),K(l.$$.fragment),h=C(),d=N("div"),K(u.$$.fragment),f=C(),m=N("div"),K(p.$$.fragment),v=C(),_=N("div"),K(g.$$.fragment),this.h()},l(y){e=P(y,"DIV",{class:!0});var M=A(e);n=P(M,"DIV",{style:!0});var x=A(n);ne(s.$$.fragment,x),r=z(M),a=P(M,"DIV",{style:!0});var L=A(a);ne(i.$$.fragment,L),o=z(M),c=P(M,"DIV",{style:!0});var S=A(c);ne(l.$$.fragment,S),h=z(M),d=P(M,"DIV",{style:!0});var $=A(d);ne(u.$$.fragment,$),f=z(M),m=P(M,"DIV",{style:!0});var R=A(m);ne(p.$$.fragment,R),v=z(M),_=P(M,"DIV",{style:!0});var W=A(_);ne(g.$$.fragment,W),M.forEach(w),this.h()},h(){G(n,"display","contents"),G(n,"--bg","#303030"),G(n,"--text","white"),G(n,"--width","100%"),G(a,"display","contents"),G(a,"--bg","#303030"),G(a,"--text","white"),G(a,"--width","100%"),G(c,"display","contents"),G(c,"--bg","#303030"),G(c,"--text","white"),G(d,"display","contents"),G(d,"--bg","#303030"),G(d,"--text","white"),G(m,"display","contents"),G(m,"--bg","#303030"),G(m,"--width","100%"),G(m,"--text","white"),G(_,"display","contents"),G(_,"--bg","#303030"),G(_,"--width","100%"),G(_,"--text","white"),k(e,"class","svelte-1sr1d3o")},m(y,M){T(y,e,M),E(e,n),ee(s,n,null),E(e,r),E(e,a),ee(i,a,null),E(e,o),E(e,c),ee(l,c,null),E(e,h),E(e,d),ee(u,d,null),E(e,f),E(e,m),ee(p,m,null),E(e,v),E(e,_),ee(g,_,null),b=!0},p:q,i(y){b||(I(s.$$.fragment,y),I(i.$$.fragment,y),I(l.$$.fragment,y),I(u.$$.fragment,y),I(p.$$.fragment,y),I(g.$$.fragment,y),b=!0)},o(y){O(s.$$.fragment,y),O(i.$$.fragment,y),O(l.$$.fragment,y),O(u.$$.fragment,y),O(p.$$.fragment,y),O(g.$$.fragment,y),b=!1},d(y){y&&w(e),te(s),te(i),te(l),te(u),te(p),te(g)}}}function Og(t){return[()=>$l.restart(),()=>Ng("nodes/tutorial"),()=>gt(nr,{timeout:0,title:"Report Bug",type:"error",props:{mode:"bug"}}),()=>gt(nr,{timeout:0,title:"Submit Idea",props:{mode:"feat"}}),()=>gt(ng,{timeout:0}),()=>gt(Dg,{timeout:0})]}class Vg extends fe{constructor(e){super(),de(this,e,Og,jg,pe,{})}}function Cg(t){var m,v;let e,s,n,r,i,a=((v=(m=t[0])==null?void 0:m.meta.name)!=null?v:"")+"",o,l,c,h,u,d,f,p;return n=new Pn({props:{icon:"folder",name:"Projects",component:x2}}),h=new Pn({props:{icon:"question",component:Vg,right:!0}}),d=new Pn({props:{icon:"cog",component:O2,right:!0}}),{c(){e=N("header"),s=N("div"),K(n.$$.fragment),r=C(),i=N("h3"),o=F(a),l=C(),c=N("div"),K(h.$$.fragment),u=C(),f=N("div"),K(d.$$.fragment),this.h()},l(g){e=P(g,"HEADER",{class:!0});var _=A(e);s=P(_,"DIV",{class:!0});var b=A(s);ne(n.$$.fragment,b),b.forEach(w),r=z(_),i=P(_,"H3",{class:!0});var y=A(i);o=B(y,a),y.forEach(w),l=z(_),c=P(_,"DIV",{class:!0});var M=A(c);ne(h.$$.fragment,M),u=z(M),f=P(M,"DIV",{style:!0});var x=A(f);ne(d.$$.fragment,x),M.forEach(w),_.forEach(w),this.h()},h(){k(s,"class","left svelte-bcc39x"),k(i,"class","svelte-bcc39x"),G(f,"display","contents"),G(f,"--min-width","250px"),k(c,"class","right svelte-bcc39x"),k(e,"class","svelte-bcc39x")},m(g,_){T(g,e,_),E(e,s),ee(n,s,null),E(e,r),E(e,i),E(i,o),E(e,l),E(e,c),ee(h,c,null),E(c,u),E(c,f),ee(d,f,null),p=!0},p(g,[_]){var b,y;(!p||_&1)&&a!==(a=((y=(b=g[0])==null?void 0:b.meta.name)!=null?y:"")+"")&&ve(o,a)},i(g){p||(I(n.$$.fragment,g),I(h.$$.fragment,g),I(d.$$.fragment,g),p=!0)},o(g){O(n.$$.fragment,g),O(h.$$.fragment,g),O(d.$$.fragment,g),p=!1},d(g){g&&w(e),te(n),te(h),te(d)}}}function zg(t,e,s){let n;const r=Se.activeProject;return ft(t,r,i=>s(0,n=i)),[n,r]}class $g extends fe{constructor(e){super(),de(this,e,zg,Cg,pe,{})}}function Rg(t){let e,s,n,r,i,a,o,l,c,h,u,d,f,p,m;return e=new Mc({}),n=new Mh({}),i=new of({}),o=new B2({}),c=new $g({}),d=new Sg({}),{c(){K(e.$$.fragment),s=C(),K(n.$$.fragment),r=C(),K(i.$$.fragment),a=C(),K(o.$$.fragment),l=C(),K(c.$$.fragment),h=C(),u=N("main"),K(d.$$.fragment),f=C(),p=N("div"),this.h()},l(v){ne(e.$$.fragment,v),s=z(v),ne(n.$$.fragment,v),r=z(v),ne(i.$$.fragment,v),a=z(v),ne(o.$$.fragment,v),l=z(v),ne(c.$$.fragment,v),h=z(v),u=P(v,"MAIN",{class:!0});var g=A(u);ne(d.$$.fragment,g),f=z(g),p=P(g,"DIV",{id:!0,class:!0}),A(p).forEach(w),g.forEach(w),this.h()},h(){k(p,"id","nodesystem-view"),k(p,"class","svelte-1nn7mny"),k(u,"class","svelte-1nn7mny")},m(v,g){ee(e,v,g),T(v,s,g),ee(n,v,g),T(v,r,g),ee(i,v,g),T(v,a,g),ee(o,v,g),T(v,l,g),ee(c,v,g),T(v,h,g),T(v,u,g),ee(d,u,null),E(u,f),E(u,p),t[1](p),m=!0},p:q,i(v){m||(I(e.$$.fragment,v),I(n.$$.fragment,v),I(i.$$.fragment,v),I(o.$$.fragment,v),I(c.$$.fragment,v),I(d.$$.fragment,v),m=!0)},o(v){O(e.$$.fragment,v),O(n.$$.fragment,v),O(i.$$.fragment,v),O(o.$$.fragment,v),O(c.$$.fragment,v),O(d.$$.fragment,v),m=!1},d(v){te(e,v),v&&w(s),te(n,v),v&&w(r),te(i,v),v&&w(a),te(o,v),v&&w(l),te(c,v),v&&w(h),v&&w(u),te(d),t[1](null)}}}function Fg(t,e,s){let n;Yt(async()=>{await Oe.loadFromLocal(),n.append(At.view.wrapper),At.view.handleResize()});function r(i){Ne[i?"unshift":"push"](()=>{n=i,s(0,n)})}return[n,r]}class Gg extends fe{constructor(e){super(),de(this,e,Fg,Rg,pe,{})}}export{Gg as default};
