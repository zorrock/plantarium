var fo=Object.defineProperty,ho=Object.defineProperties;var po=Object.getOwnPropertyDescriptors;var An=Object.getOwnPropertySymbols;var mo=Object.prototype.hasOwnProperty,vo=Object.prototype.propertyIsEnumerable;var Pt=(s,e,t)=>e in s?fo(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,Q=(s,e)=>{for(var t in e||(e={}))mo.call(e,t)&&Pt(s,t,e[t]);if(An)for(var t of An(e))vo.call(e,t)&&Pt(s,t,e[t]);return s},_e=(s,e)=>ho(s,po(e));var ot=(s,e,t)=>(Pt(s,typeof e!="symbol"?e+"":e,t),t);import{w as me,S as X,i as J,s as Z,e as b,a as j,b as v,c as y,d as $,n as T,f as M,g as Pe,o as De,t as go,h as ae,j as F,k as le,l as H,m as P,p as U,q as S,r as Y,u as ne,v as Vn,x as G,y as Dn,z as Rn,A as Fn,B as Ee,C as Ne,D as V,E as D,F as R,G as Nt,H as O,I as ve,J as rt,K as Ce,L as zn,M as Bn,N as Wn,O as Gn,P as Hn,T as Un,Q as wo,R as lt,U as yo,V as Yn,W as _o,X as ce,Y as ie,Z as Re,_ as qn,$ as be,a0 as at,a1 as Lt,a2 as bo,a3 as ko,a4 as So,a5 as xo,a6 as Mo,a7 as $o,a8 as Po,a9 as No,aa as ct,ab as Ae,ac as Ge,ad as Lo,ae as jo,af as Eo,ag as Co,ah as To,ai as ut,aj as Xn,ak as Jn,al as ke,am as jt,an as Oo,ao as ft,ap as ht,aq as Zn,ar as Io,as as Ao,at as Vo,au as Do,av as Ro,aw as Kn,ax as Et,ay as Fo,az as Qn}from"./vendor.3ca9cd45.js";const zo=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}};zo();const Bo="0px 0px 2px rgba(0, 0, 0, 0.7)",Wo="0px 0px 5px rgba(0, 0, 0, 0.144)";var Go={"dark_background-color":"#1a1a1a","dark_foreground-color":"#303030","dark_outline-color":"#212121","dark_text-color":"#ffffff",dark_shadow:Bo,"light_background-color":"#d0d0d0","light_foreground-color":"white","light_outline-color":"#b9b9b9","light_text-color":"#484848",light_shadow:Wo};function Ho(s){const e={};return Object.entries(s).forEach(([t,n])=>{const[i,o]=t.split("_");i in e?e[i][o]=n:e[i]={[o]:n}}),e}const Ct=Ho(Go),dt=Object.keys(Ct);let Tt="theme"in localStorage?localStorage.getItem("theme"):dt[0];dt.includes(Tt)||(Tt=dt[0]);const Ot=me(Ct[Tt]),es=s=>{dt.includes(s)&&(Ot.set(Ct[s]),localStorage.setItem("theme",s))};function Uo(s){let e,t;return{c(){e=b("style"),t=j(),v(e,"type","text/css")},m(n,i){y(document.head,e),s[3](e),$(n,t,i)},p:T,i:T,o:T,d(n){M(e),s[3](null),n&&M(t)}}}function Yo(s,e,t){let n,i;Pe(s,Ot,c=>t(2,i=c));let o,r=!1;function a(){r||!o||(r=!0,t(0,o.innerHTML="* {transition: color 0.2s ease, background-color 0.2s ease, outline 0.2s ease !important;}",o),setTimeout(()=>{t(0,o.innerHTML=`* {transition: color 0.2s ease, background-color 0.2s ease, outline 0.2s ease !important;} :root{${n}}`,o),setTimeout(()=>{t(0,o.innerHTML=`:root{${n}}`,o),r=!1},200)},1))}De(()=>{t(0,o.innerHTML=`:root{${n}}`,o)});function l(c){ae[c?"unshift":"push"](()=>{o=c,t(0,o)})}return s.$$.update=()=>{s.$$.dirty&4&&t(1,n=go(i)),s.$$.dirty&2&&n&&a()},[o,n,i,l]}class qo extends X{constructor(e){super();J(this,e,Yo,Uo,Z,{})}}function Xo(){return"window"in globalThis}const ts=Xo();var Jo=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.2" baseProfile="tiny" id="Ebene_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
	 x="0px" y="0px" width="100px" height="100px" viewBox="0 0 100 100" xml:space="preserve">
</svg>
`,Zo=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  <defs>
    <style>.cls-1{fill:none;stroke:#fff;stroke-width:5px;}</style>
  </defs>
  <title>branch</title>
  <path class="cls-1" d="M49.59,57.35,72.15,38.69"/>
  <path class="cls-1" d="M51.58,29.45,38,11.21"/>
  <path class="cls-1" d="M53.14,82.61,21.78,55.74"/>
  <path class="cls-1" d="M33.46,47.91l4,21"/>
  <polyline class="cls-1" points="56 97 50 58 51 28 56 16"/>
</svg>`,Ko='<svg id="e7691b6e-31fa-49a4-aaec-be19b623d191" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><style>.b50603dd-20d5-40a2-a0ce-2fdf3b92ec21{fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:5px;}</style></defs><title>checkmark</title><path class="b50603dd-20d5-40a2-a0ce-2fdf3b92ec21" d="M75.5,30,40.43,72.47a2,2,0,0,1-3.08,0L24.5,57"/></svg>',Qo=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
<defs>
	<style>
		circle, path{
			fill:none;
			stroke: var(--text, white);
			stroke-width: 5px;
		}
	</style>
</defs>
	<circle class="cls-1" cx="50.37" cy="50.5" r="17.23"/>
  <path class="cls-1" d="M38.07,20.49,32.17,8.05,50.83,4.41l.61,13.8,12.13,2.28L68.73,8.05l14,10.16-9,10L81.17,38.7l12-5.47,3.34,17.3H81.93L80.57,63l12.59,6.37L82.7,83.62l-9-9.86L63.58,81.19l5.15,11.23-17.9,3.64V82.71L38.08,81.19,32.77,92.42,17.44,82.71l10.17-8.35L19.11,63,8.19,69.36,4.4,50.56H17.45l1.67-13.81L8.2,30.84l9.25-13.2,11.08,8.81Z"/>
</svg>
`,er=`<svg
  xmlns="http://www.w3.org/2000/svg"
	viewBox="0 0 100 100">
  <line fill="none" stroke="#FFFFFF" stroke-width="5" stroke-miterlimit="10" x1="27.836" y1="72.164" x2="72.164" y2="27.836"/>
  <line fill="none" stroke="#FFFFFF" stroke-width="5" stroke-miterlimit="10" x1="27.836" y1="27.988" x2="72.164" y2="72.012"/>
</svg>
`,tr=`<svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M50.552 59.3295L39.0695 13.7056H60.2078L50.552 59.3295Z" stroke="white" stroke-width="5" stroke-linejoin="round"/>
<path d="M58.4305 77.2411C58.4305 80.8276 55.4725 83.7944 51.7497 83.7944C48.0269 83.7944 45.0688 80.8276 45.0688 77.2411C45.0688 73.6546 48.0269 70.6878 51.7497 70.6878C55.4725 70.6878 58.4305 73.6546 58.4305 77.2411Z" stroke="white" stroke-width="5"/>
</svg>
`,nr=`<svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">

<defs>
	<style>
		path{
			stroke: white;
			stroke-width: 5px;
		}
	</style>
</defs>

<path d="M23.5167 72.9513V32.1483H82.1056L87.6855 37.0307V76.09L82.1056 78.5312H29.4453L23.5167 72.9513Z" />
<path d="M23.2747 73.6489L12.3145 30.0463L15.8885 21.4688H71.8808L75.693 32.9055" />
<path d="M25.488 43.9781H86.7394" />
</svg>
`,sr=`<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
<path d="M70.5 26.5L77.5 23.5L82 32V69L77.5 82L64.5 92.5H47L32 82L18 46L21 40H27L35 57.5V15.5L39.5 11L45.5 13.5M70.5 26.5L69 15.5L58.5 14M70.5 26.5V57.5M58.5 14L55 8L45.5 13.5M58.5 14V49M45.5 13.5V49" stroke-width="5"/>
</svg>
`,ir=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  <defs>
    <style>.cls-1{fill:none;stroke:#fff;stroke-width:5px;}</style>
  </defs>
  <title>leaf</title>
  <path class="cls-1" d="M50.69,96.21,72.86,72.33,77,47,65.91,21.7,50.66,4.5"/>
  <path class="cls-1" d="M53.37,96.21,31.2,72.33,27.07,47,38.15,21.7,53.4,4.5"/>
</svg>`,or=`<svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M30.2312 46.4809V15.6962L33.3006 8H40.8035L44.3844 11.0785V29.7203H52.9104L55.9798 33.8249H65.0173L68.0867 38.9557L76.2717 40.1529L79 56.0583L73.7139 72.9899L66.8931 93H36.5405L30.2312 75.5553L20 60.334L21.7052 50.2435L30.2312 46.4809ZM30.2312 46.4809V58.1107M44.3844 29.3783V46.3099M56.4913 34.5091V46.3099M68.7688 39.2978V50.4145" stroke="white" stroke-width="5"/>
</svg>
`,rr=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  <defs>
    <style>.cls-1{fill:none;stroke:#fff;stroke-width:5px;}</style>
  </defs>
  <title>stem</title>
  <path class="cls-1" d="M49,95.5l8.66-23.19L43.24,46.07l10.59-21L43.24,4.5"/>
</svg>`,lr=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" xml:space="preserve">
  <polygon fill="none" stroke="#FFFFFF" stroke-width="5" stroke-miterlimit="10" points="33.5,73.759 33.5,26.241 67.441,50 "/>
</svg>
`,ar=`<svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M54.7631 15.1799L91.7944 79.3201C93.9114 82.9867 91.2652 87.5701 87.0313 87.5701H12.9687C8.73476 87.5701 6.08857 82.9867 8.20552 79.3201L45.2368 15.1799C47.3538 11.5133 52.6462 11.5133 54.7631 15.1799Z" stroke="white" stroke-width="5" stroke-linejoin="round"/>
<ellipse cx="50.0578" cy="73.7787" rx="5.98166" ry="5.89858" fill="white"/>
<path d="M52.9755 60.2707C52.5275 63.7615 47.4723 63.7615 47.0243 60.2707L43.5981 33.5748C43.3678 31.781 44.7652 30.1929 46.5736 30.1929L53.4261 30.1929C55.2346 30.1929 56.6319 31.781 56.4017 33.5748L52.9755 60.2707Z" fill="white"/>
</svg>
`,cr=`<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
<path d="M32.7792 25.4477L45.6598 15.6472L61.6205 20.4075L67.2208 32.728L54.3402 46.4486L50.9801 59.3291V63.9218" stroke-width="8"/>
<path d="M47.3642 83.3434L44.983 79.0169L46.821 74.3331L51.3861 73.0881L55.5363 75.0446L56.307 80.8548L52.3347 84.3528L47.3642 83.3434Z" />
</svg>

`,ns=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",arrow:Jo,branch:Zo,checkmark:Ko,cog:Qo,cross:er,exclamation:tr,folder:nr,hand:sr,leaf:ir,pointing:or,stem:rr,triangle:lr,warning:ar,question:cr});function ur(s){let e;return{c(){e=b("div"),v(e,"class","icon-wrapper svelte-1ho94ty"),F(e,"active",s[0]),F(e,"dark",s[1]),F(e,"circle",s[2])},m(t,n){$(t,e,n),e.innerHTML=s[3]},p(t,[n]){n&8&&(e.innerHTML=t[3]),n&1&&F(e,"active",t[0]),n&2&&F(e,"dark",t[1]),n&4&&F(e,"circle",t[2])},i:T,o:T,d(t){t&&M(e)}}}function fr(s,e,t){let n,{name:i="triangle"}=e,{active:o=!1}=e,{dark:r=!1}=e,{circle:a=!1}=e;return s.$$set=l=>{"name"in l&&t(4,i=l.name),"active"in l&&t(0,o=l.active),"dark"in l&&t(1,r=l.dark),"circle"in l&&t(2,a=l.circle)},s.$$.update=()=>{s.$$.dirty&16&&t(3,n=i in ns?ns[i]:i.toString()+" icon not found")},[o,r,a,n,i]}class He extends X{constructor(e){super();J(this,e,fr,ur,Z,{name:4,active:0,dark:1,circle:2})}}function ss(s){let e,t,n,i;const o=[dr,hr],r=[];function a(l,c){return l[6]?0:1}return e=a(s),t=r[e]=o[e](s),{c(){t.c(),n=le()},m(l,c){r[e].m(l,c),$(l,n,c),i=!0},p(l,c){let u=e;e=a(l),e===u?r[e].p(l,c):(H(),P(r[u],1,1,()=>{r[u]=null}),U(),t=r[e],t?t.p(l,c):(t=r[e]=o[e](l),t.c()),S(t,1),t.m(n.parentNode,n))},i(l){i||(S(t),i=!0)},o(l){P(t),i=!1},d(l){r[e].d(l),l&&M(n)}}}function hr(s){let e;return{c(){e=b("plant-icon"),Ne(e,"name",s[1]),Ne(e,"active",s[0]),Ne(e,"class","svelte-1om2jl4")},m(t,n){$(t,e,n)},p(t,n){n&2&&Ne(e,"name",t[1]),n&1&&Ne(e,"active",t[0])},i:T,o:T,d(t){t&&M(e)}}}function dr(s){let e,t;return e=new He({props:{name:s[1],active:s[0]}}),{c(){V(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p(n,i){const o={};i&2&&(o.name=n[1]),i&1&&(o.active=n[0]),e.$set(o)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){R(e,n)}}}function is(s){let e,t;return{c(){e=b("p"),t=Y(s[2]),v(e,"class","svelte-1om2jl4")},m(n,i){$(n,e,i),y(e,t)},p(n,i){i&4&&ne(t,n[2])},d(n){n&&M(e)}}}function pr(s){let e,t,n,i,o,r,a,l=s[1]&&ss(s),c=s[2]&&is(s);const u=s[9].default,f=Vn(u,s,s[8],null);return{c(){e=b("button"),l&&l.c(),t=j(),c&&c.c(),n=j(),i=b("div"),f&&f.c(),v(i,"class","content svelte-1om2jl4"),e.disabled=s[4],v(e,"class","svelte-1om2jl4"),F(e,"active",s[0]),F(e,"useActive",s[3]),F(e,"only-icon",!s[2]),F(e,"has-icon",!!s[1])},m(h,d){$(h,e,d),l&&l.m(e,null),y(e,t),c&&c.m(e,null),y(e,n),y(e,i),f&&f.m(i,null),s[10](e),o=!0,r||(a=G(e,"click",s[7]),r=!0)},p(h,[d]){h[1]?l?(l.p(h,d),d&2&&S(l,1)):(l=ss(h),l.c(),S(l,1),l.m(e,t)):l&&(H(),P(l,1,1,()=>{l=null}),U()),h[2]?c?c.p(h,d):(c=is(h),c.c(),c.m(e,n)):c&&(c.d(1),c=null),f&&f.p&&(!o||d&256)&&Dn(f,u,h,h[8],o?Fn(u,h[8],d,null):Rn(h[8]),null),(!o||d&16)&&(e.disabled=h[4]),d&1&&F(e,"active",h[0]),d&8&&F(e,"useActive",h[3]),d&4&&F(e,"only-icon",!h[2]),d&2&&F(e,"has-icon",!!h[1])},i(h){o||(S(l),S(f,h),o=!0)},o(h){P(l),P(f,h),o=!1},d(h){h&&M(e),l&&l.d(),c&&c.d(),f&&f.d(h),s[10](null),r=!1,a()}}}function mr(s,e,t){let n,{$$slots:i={},$$scope:o}=e,{icon:r=void 0}=e,{name:a=""}=e,{active:l=!1}=e,{useActive:c=!1}=e,{disabled:u=!1}=e,f;const h=Ee(),d=()=>{t(0,l=!l),h("click")};function p(m){ae[m?"unshift":"push"](()=>{f=m,t(5,f)})}return s.$$set=m=>{"icon"in m&&t(1,r=m.icon),"name"in m&&t(2,a=m.name),"active"in m&&t(0,l=m.active),"useActive"in m&&t(3,c=m.useActive),"disabled"in m&&t(4,u=m.disabled),"$$scope"in m&&t(8,o=m.$$scope)},s.$$.update=()=>{s.$$.dirty&32&&t(6,n=f&&!!f.parentElement)},[l,r,a,c,u,f,n,d,o,i,p]}class de extends X{constructor(e){super();J(this,e,mr,pr,Z,{icon:1,name:2,active:0,useActive:3,disabled:4})}}var ge;(function(s){s.INFO="info",s.WARNING="warning",s.ERROR="error",s.SUCCESS="success"})(ge||(ge={}));const vr=s=>(e,t)=>{var r;if(!e&&!t)return;const n=Array.isArray(t==null?void 0:t.values),i={id:Nt(),type:ge.INFO,content:e,props:t.props,title:(r=t==null?void 0:t.title)!=null?r:t==null?void 0:t.type,values:t==null?void 0:t.values,timeout:t==null?void 0:t.timeout},o=new Promise((a,l)=>{i.resolve=a,i.reject=l});if(o.finally(()=>s.update(a=>a.filter(l=>l.id!==i.id))),t&&"type"in t){const a=t.type.toLowerCase();Object.values(ge).forEach(l=>{a===l&&(i.type=l)})}if(e instanceof Error&&(i.type=ge.ERROR),typeof i.timeout=="undefined"){let a;i.type===ge.SUCCESS&&(a=3e3),i.type===ge.INFO&&(a=2e3),i.type===ge.WARNING&&(a=7e3),a&&!n&&(i.timeout=a)}return"title"in i||(i.title=i.type.toUpperCase().slice(0,1)+i.type.slice(1)),s.update(a=>[...a,i]),i.timeout&&setTimeout(i.resolve,i.timeout),o};var os=()=>{const s=me([]),e=vr(s);return{store:s,createMessage:e,MessageType:ge}};const{store:gr,createMessage:wr,MessageType:lf}=os(),Ue=wr;function rs(s,e,t){const n=s.slice();return n[6]=e[t],n}function ls(s){let e,t,n,i,o,r,a,l,c,u,f,h,d,p;i=new de({props:{icon:"cross"}}),i.$on("click",s[4]);let m=s[0].title&&as(s);const g=[_r,yr],w=[];function x(k,C){return typeof k[0].content=="string"?0:1}l=x(s),c=w[l]=g[l](s);let _=s[0].values&&cs(s);return{c(){e=b("div"),t=b("div"),n=b("div"),o=b("div"),V(i.$$.fragment),r=j(),m&&m.c(),a=j(),c.c(),u=j(),_&&_.c(),O(o,"display","contents"),O(o,"--bg","transparent"),v(n,"class","close-wrapper svelte-r4wwk4"),v(t,"class",f="alert-wrapper alert-"+s[0].type+" svelte-r4wwk4"),F(t,"isInverted",s[1]),v(e,"class","alert-container svelte-r4wwk4")},m(k,C){$(k,e,C),y(e,t),y(t,n),y(n,o),D(i,o,null),y(t,r),m&&m.m(t,null),y(t,a),w[l].m(t,null),y(t,u),_&&_.m(t,null),p=!0},p(k,C){k[0].title?m?m.p(k,C):(m=as(k),m.c(),m.m(t,a)):m&&(m.d(1),m=null);let N=l;l=x(k),l===N?w[l].p(k,C):(H(),P(w[N],1,1,()=>{w[N]=null}),U(),c=w[l],c?c.p(k,C):(c=w[l]=g[l](k),c.c()),S(c,1),c.m(t,u)),k[0].values?_?(_.p(k,C),C&1&&S(_,1)):(_=cs(k),_.c(),S(_,1),_.m(t,null)):_&&(H(),P(_,1,1,()=>{_=null}),U()),(!p||C&1&&f!==(f="alert-wrapper alert-"+k[0].type+" svelte-r4wwk4"))&&v(t,"class",f),C&3&&F(t,"isInverted",k[1])},i(k){p||(S(i.$$.fragment,k),S(c),S(_),rt(()=>{h||(h=Ce(t,zn,{},!0)),h.run(1)}),rt(()=>{d||(d=Ce(e,Bn,{},!0)),d.run(1)}),p=!0)},o(k){P(i.$$.fragment,k),P(c),P(_),h||(h=Ce(t,zn,{},!1)),h.run(0),d||(d=Ce(e,Bn,{},!1)),d.run(0),p=!1},d(k){k&&M(e),R(i),m&&m.d(),w[l].d(),_&&_.d(),k&&h&&h.end(),k&&d&&d.end()}}}function as(s){let e,t=s[0].title+"",n;return{c(){e=b("h2"),n=Y(t),v(e,"class","svelte-r4wwk4")},m(i,o){$(i,e,o),y(e,n)},p(i,o){o&1&&t!==(t=i[0].title+"")&&ne(n,t)},d(i){i&&M(e)}}}function yr(s){let e,t,n;const i=[s[0].props];var o=s[0].content;function r(a){let l={};for(let c=0;c<i.length;c+=1)l=Hn(l,i[c]);return{props:l}}return o&&(e=new o(r())),{c(){e&&V(e.$$.fragment),t=le()},m(a,l){e&&D(e,a,l),$(a,t,l),n=!0},p(a,l){const c=l&1?Wn(i,[Gn(a[0].props)]):{};if(o!==(o=a[0].content)){if(e){H();const u=e;P(u.$$.fragment,1,0,()=>{R(u,1)}),U()}o?(e=new o(r()),V(e.$$.fragment),S(e.$$.fragment,1),D(e,t.parentNode,t)):e=null}else o&&e.$set(c)},i(a){n||(e&&S(e.$$.fragment,a),n=!0)},o(a){e&&P(e.$$.fragment,a),n=!1},d(a){a&&M(t),e&&R(e,a)}}}function _r(s){let e,t=s[0].content+"";return{c(){e=b("p")},m(n,i){$(n,e,i),e.innerHTML=t},p(n,i){i&1&&t!==(t=n[0].content+"")&&(e.innerHTML=t)},i:T,o:T,d(n){n&&M(e)}}}function cs(s){let e,t,n=s[0].values,i=[];for(let r=0;r<n.length;r+=1)i[r]=us(rs(s,n,r));const o=r=>P(i[r],1,1,()=>{i[r]=null});return{c(){e=b("div");for(let r=0;r<i.length;r+=1)i[r].c();v(e,"class","options-wrapper svelte-r4wwk4")},m(r,a){$(r,e,a);for(let l=0;l<i.length;l+=1)i[l].m(e,null);t=!0},p(r,a){if(a&1){n=r[0].values;let l;for(l=0;l<n.length;l+=1){const c=rs(r,n,l);i[l]?(i[l].p(c,a),S(i[l],1)):(i[l]=us(c),i[l].c(),S(i[l],1),i[l].m(e,null))}for(H(),l=n.length;l<i.length;l+=1)o(l);U()}},i(r){if(!t){for(let a=0;a<n.length;a+=1)S(i[a]);t=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)P(i[a]);t=!1},d(r){r&&M(e),ve(i,r)}}}function us(s){let e,t,n;function i(){return s[5](s[6])}return e=new de({props:{name:s[6]}}),e.$on("click",i),{c(){t=b("div"),V(e.$$.fragment),O(t,"display","contents"),O(t,"--bg","#303030"),O(t,"--text","white")},m(o,r){$(o,t,r),D(e,t,null),n=!0},p(o,r){s=o;const a={};r&1&&(a.name=s[6]),e.$set(a)},i(o){n||(S(e.$$.fragment,o),n=!0)},o(o){P(e.$$.fragment,o),n=!1},d(o){o&&M(t),R(e,o)}}}function br(s){let e,t,n,i,o=s[0]&&ls(s);return{c(){o&&o.c(),e=le()},m(r,a){o&&o.m(r,a),$(r,e,a),t=!0,n||(i=G(window,"keydown",s[2]),n=!0)},p(r,[a]){r[0]?o?(o.p(r,a),a&1&&S(o,1)):(o=ls(r),o.c(),S(o,1),o.m(e.parentNode,e)):o&&(H(),P(o,1,1,()=>{o=null}),U())},i(r){t||(S(o),t=!0)},o(r){P(o),t=!1},d(r){o&&o.d(r),r&&M(e),n=!1,i()}}}function kr(s,e,t){let n,i,o;Pe(s,gr,c=>t(3,o=c));function r(c){c.key==="Escape"&&n&&n.reject()}const a=()=>{n.reject()},l=c=>n.resolve(c);return s.$$.update=()=>{s.$$.dirty&8&&t(0,n=o[0]),s.$$.dirty&1&&(n?ts&&document.body.classList.add("overlay-visible"):ts&&document.body.classList.remove("overlay-visible")),s.$$.dirty&1&&t(1,i=n&&(n.type==="success"||n.type==="warning"))},[n,i,r,o,a,l]}class Sr extends X{constructor(e){super();J(this,e,kr,br,Z,{})}}const{store:xr,createMessage:Mr}=os(),Ye=Mr;var $r=(s,...e)=>{const t=(i,o)=>{Object.getOwnPropertyNames(o).concat(Object.getOwnPropertySymbols(o).map(r=>r.toString())).forEach(r=>{r.match(/^(?:constructor|prototype|arguments|caller|name|bind|call|apply|toString|length)$/)||Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(o,r))})},n=class extends s{constructor(...o){super(...o);e.forEach(r=>t(this,new r))}};return e.forEach(i=>{t(n.prototype,i.prototype),t(n,i)}),n},fs=s=>{s[0]==="#"&&(s=s.replace("#","")),s.length===3&&(s=s[0]+s[0]+s[1]+s[1]+s[2]+s[2]);const e=s.match(/.{1,2}/g);return[parseInt(e[0],16)/255,parseInt(e[1],16)/255,parseInt(e[2],16)/255]};const Se=.4;function Pr(s,e,t,n,i,o,r,a,l,c){const u=i-t,f=r-i,h=l-r,d=o-n,p=a-o,m=c-a;let g,w,x,_,k=-1e4,C=-1e4;const N=[{x:t,y:n}];for(let A=1;A<s;A++){const z=A/s;g=t+u*z,x=i+f*z;const ee=r+h*z;g+=(x-g)*z,x+=(ee-x)*z,w=n+d*z,_=o+p*z;const K=a+m*z;w+=(_-w)*z,_+=(K-_)*z;const oe=g+(x-g)*z,q=w+(_-w)*z,te=oe-k,B=q-C;te*te+B*B>e&&(N.push({x:oe,y:q}),k=oe,C=q)}return N.push({x:l,y:c}),N}function Nr(s){const e=s.length-1;return s.map((t,n,i)=>{if(n===0)return{rx:i[n+1].x*Se*0,ry:t.y+(i[n+1].y-t.y)*Se*0};if(n===e)return{lx:i[n-1].x+(t.x-i[n-1].x)*Se*2,ly:i[n-1].y+(t.y-i[n-1].y)*Se*2};if(t.y>i[n+1].y&&t.y>i[n-1].y||t.y<i[n+1].y&&t.y<i[n-1].y)return{lx:i[n-1].x+(t.x-i[n-1].x)*Se,ly:t.y,rx:t.x+(i[n+1].x-t.x)*Se,ry:t.y};{const r={x:i[n-1].x-i[n+1].x,y:i[n-1].y-i[n+1].y},a=Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2));r.x/=a,r.y/=a;const l=i[n+1].x-t.x,c=t.x-i[n-1].x;return{lx:t.x+r.x*c*Se,ly:t.y+r.y*c*Se,rx:t.x-r.x*l*Se,ry:t.y-r.y*l*Se}}})}function Lr(s){const e=s.length-1,t={},n=Nr(s);return s.map((i,o,r)=>{if(o<e)return Pr(e*20,0,i.x,i.y,n[o].rx,n[o].ry,n[o+1].lx,n[o+1].ly,r[o+1].x,r[o+1].y)}).flat().filter(i=>!i||i.x in t?!1:(t[i.x]=!0,!0))}function hs(s,e,t){let n;return(...i)=>{const o=()=>{n=null,t||s(...i)},r=t&&!n;clearTimeout(n),n=setTimeout(o,e),r&&s(...i)}}function jr(s,e=!1){return function(t,n,i){let o;const r=i.value;return i.value=function(...a){const l=()=>{o=null,e||r.apply(this,a)},c=e&&!o;clearTimeout(o),o=setTimeout(l,s),c&&r.apply(this,a)},i}}function pt(s,e){let t,n,i,o=null,r=0;const a=()=>{r=0,o=null,i=s.apply(t,n),o||(t=n=null)};return function(){const l=Date.now();r||(r=l);const c=e-(l-r);return t=this,n=arguments,c<=0||c>e?(o&&(window.clearTimeout(o),o=null),r=l,i=s.apply(t,n),o||(t=n=null)):o||(o=window.setTimeout(a,c)),i}}const xe={amountEmitters:0,amountCallbacks:0,emitters:[]};typeof self!="undefined"&&"window"in self&&(window.debug=xe);class ye{constructor(){ot(this,"index",0);ot(this,"cbs",{});ot(this,"cbsOnce",{});this.index=xe.amountEmitters,xe.amountEmitters++}emit(e,t){e in this.cbs&&this.cbs[e].forEach(n=>n(t)),e in this.cbsOnce&&(this.cbsOnce[e].forEach(n=>n(t)),delete this.cbsOnce[e])}on(e,t,n=0){n>0&&(t=pt(t,n));const i=Object.assign(this.cbs,{[e]:[...this.cbs[e]||[],t]});return this.cbs=i,xe.emitters[this.index]={name:this.constructor.name,cbs:Object.fromEntries(Object.keys(this.cbs).map(o=>[o,this.cbs[o].length]))},xe.amountCallbacks++,()=>{var o;xe.amountCallbacks--,(o=i[e])==null||o.splice(i[e].indexOf(t),1),xe.emitters[this.index]={name:this.constructor.name,cbs:Object.fromEntries(Object.keys(this.cbs).map(r=>[r,this.cbs[r].length]))}}}once(e,t){return this.cbsOnce[e]=[...this.cbsOnce[e]||[],t],()=>{this.cbsOnce[e].splice(this.cbsOnce[e].indexOf(t),1)}}destroyEventEmitter(){xe.amountEmitters--,Object.keys(this.cbs).forEach(e=>{xe.amountCallbacks-=this.cbs[e].length,delete this.cbs[e]}),Object.keys(this.cbsOnce).forEach(e=>delete this.cbsOnce[e]),this.cbs={},this.cbsOnce={},delete xe.emitters[this.index]}}function Er(s){if(s.length===0)return 0;let e=0;for(let t=0;t<s.length;t++)e=(e<<5)-e+s.charCodeAt(t),e=e&e;return e}var Cr=()=>{const s={};let e=0;const t=(n=0,i=0)=>{if(i>500)throw new Error("Infinite loop in id generation algo");return n in s?t(Math.max(n++,e++),i+1):(s[n]=!0,n.toString())};return t.reset=()=>{Object.keys(s).forEach(n=>delete s[+n]),e=0},t};function Tr(s,e){const t=[],n=s.length/e;for(let i=0;i<n;i++){const o=[];for(let r=0;r<e;r++)o[r]=s[i*e+r];t.push(o)}return t}const Te=s=>s>1?"s":"",ds=s=>{if(typeof s!="number"||isNaN(s))return"never";if(s<1e3)return"< 1 second";const e=Math.floor(s/1e3);if(e<60)return e+" second"+Te(e);const t=Math.floor(e/60);if(t<60)return t+" minute"+Te(t);const n=Math.floor(t/60);if(n<24)return n+" hour"+Te(n);const i=Math.floor(n/24);if(i<7)return i+" day"+Te(i);const o=Math.floor(i/7);if(o<30)return o+" week"+Te(o);const r=Math.floor(o/30);if(r<12)return r+" month"+Te(r);const a=Math.floor(r/12);if(a<10)return a+" year"+Te(a);const l=Math.floor(r/10);return l+" decade"+Te(l)};function It(s){let e,t={length:NaN};const n=(i,o)=>i===t[o];return function(...o){return(o.length!==t.length||!o.every(n))&&(t=o,e=s.apply(this,o)),e}}const At={},Or=(s,e,t={})=>{if(At[e])return At[e];const n=new Un(s,t),i=new Image;return At[e]=n,i.onload=()=>{n.image=i},i.src=e,n};var Ir={texture:Or};let Vt=[],mt=2,Ve=0;const Ar={};let Dt=0;const Vr=["#00ffff","#f0ffff","#f5f5dc","#000000","#0000ff","#a52a2a","#00ffff","#00008b","#008b8b","#a9a9a9","#006400","#bdb76b","#8b008b","#556b2f","#ff8c00","#9932cc","#8b0000","#e9967a","#9400d3","#ff00ff","#ffd700","#008000","#4b0082","#f0e68c","#add8e6","#e0ffff","#90ee90","#d3d3d3","#ffb6c1","#ffffe0","#00ff00","#ff00ff","#800000","#000080","#808000","#ffa500","#ffc0cb","#800080","#800080","#ff0000","#c0c0c0","#ffffff","#ffff00"];function ue(s){Ve=Math.max(Ve,s.length);const e=Dt;Ar[s]=Vr[Dt],Dt++;const t=(...n)=>{if((!Vt.length||Vt.includes(s))&&mt===0){if(typeof n[0]=="string"&&typeof n[1]=="object"){console.groupCollapsed(`%c[${s.padEnd(Ve," ")}]`,`color: hsl(${e*30}deg 68% 64%); font-weight: bold;`,n[0]),console.log(...n.slice(1)),console.groupEnd();return}console.log(`%c[${s.padEnd(Ve," ")}]`,`color: hsl(${e*30}deg 68% 64%); font-weight: bold;`,...n)}};return t.group=(...n)=>{mt<1&&console.groupCollapsed(`%c[${s.padEnd(Ve," ")}]`,`color: hsl(${e*30}deg 68% 64%); font-weight: bold;`,...n)},t.warn=(...n)=>{mt<=1&&console.warn(`[${s.padEnd(Ve," ")}]`,...n)},t.error=n=>{console.error(`[${s.padEnd(Ve," ")}]`,n)},t}ue.setFilter=(...s)=>{Vt=s};ue.setLevel=(s=0)=>{mt=s};function Dr(s){const e={};return(...t)=>{const n=Er(JSON.stringify(t));return n in e?e[n]:e[n]=s(...t)}}const Rr=/^(?:[ ]+)?(?:at )([^ ]*)?(?: )?(?:\[(.*?)\] )?(?:\(([^()]+)\))?$/gm,ps=s=>s.replace(window.location.href,"").replace(/^node_modules/,"").replace(/.+?(?=plantarium)plantarium\//,"");var Rt=s=>{const[e,...t]=s.split(`
`),[n,i]=e.split(":"),o=t.map(r=>{const a=[...r.matchAll(Rr)][0],[,l,c,u]=a;return Q(Q({name:ps(l)},u?{location:ps(u)}:{}),c?{alias:c.trim().replace("as ","")}:{})});return{title:i,type:n,lines:o}};function ms(s,e,t){const n=s.slice();return n[1]=e[t],n}function vs(s){let e,t,n,i=s[0].type+"",o,r,a,l=s[0].title+"",c,u,f,h,d=s[0].lines,p=[];for(let m=0;m<d.length;m+=1)p[m]=ys(ms(s,d,m));return{c(){e=b("div"),t=b("p"),n=b("b"),o=Y(i),r=Y(":"),a=j(),c=Y(l),u=j(),f=b("pre"),h=b("code");for(let m=0;m<p.length;m+=1)p[m].c();v(f,"class","svelte-1e5rtbs"),v(e,"class","wrapper svelte-1e5rtbs")},m(m,g){$(m,e,g),y(e,t),y(t,n),y(n,o),y(n,r),y(t,a),y(t,c),y(e,u),y(e,f),y(f,h);for(let w=0;w<p.length;w+=1)p[w].m(h,null)},p(m,g){if(g&1&&i!==(i=m[0].type+"")&&ne(o,i),g&1&&l!==(l=m[0].title+"")&&ne(c,l),g&1){d=m[0].lines;let w;for(w=0;w<d.length;w+=1){const x=ms(m,d,w);p[w]?p[w].p(x,g):(p[w]=ys(x),p[w].c(),p[w].m(h,null))}for(;w<p.length;w+=1)p[w].d(1);p.length=d.length}},d(m){m&&M(e),ve(p,m)}}}function gs(s){let e,t,n,i=s[1].alias+"",o;return{c(){e=Y("as "),t=b("strong"),n=Y("$"),o=Y(i)},m(r,a){$(r,e,a),$(r,t,a),y(t,n),y(t,o)},p(r,a){a&1&&i!==(i=r[1].alias+"")&&ne(o,i)},d(r){r&&M(e),r&&M(t)}}}function ws(s){let e,t,n=s[1].location+"",i,o;return{c(){e=Y("\xA0("),t=b("i"),i=Y(n),o=Y(")")},m(r,a){$(r,e,a),$(r,t,a),y(t,i),$(r,o,a)},p(r,a){a&1&&n!==(n=r[1].location+"")&&ne(i,n)},d(r){r&&M(e),r&&M(t),r&&M(o)}}}function ys(s){let e,t,n=s[1].name+"",i,o,r,a=s[1].alias&&gs(s),l=s[1].location&&ws(s);return{c(){e=Y("at "),t=b("strong"),i=Y(n),a&&a.c(),o=le(),l&&l.c(),r=b("br")},m(c,u){$(c,e,u),$(c,t,u),y(t,i),a&&a.m(c,u),$(c,o,u),l&&l.m(c,u),$(c,r,u)},p(c,u){u&1&&n!==(n=c[1].name+"")&&ne(i,n),c[1].alias?a?a.p(c,u):(a=gs(c),a.c(),a.m(o.parentNode,o)):a&&(a.d(1),a=null),c[1].location?l?l.p(c,u):(l=ws(c),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(c){c&&M(e),c&&M(t),a&&a.d(c),c&&M(o),l&&l.d(c),c&&M(r)}}}function Fr(s){let e,t=s[0]&&vs(s);return{c(){t&&t.c(),e=le()},m(n,i){t&&t.m(n,i),$(n,e,i)},p(n,[i]){n[0]?t?t.p(n,i):(t=vs(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:T,o:T,d(n){t&&t.d(n),n&&M(e)}}}function zr(s,e,t){let{stacktrace:n}=e;return s.$$set=i=>{"stacktrace"in i&&t(0,n=i.stacktrace)},[n]}class Br extends X{constructor(e){super();J(this,e,zr,Fr,Z,{stacktrace:0})}}function _s(s,e,t){const n=s.slice();return n[13]=e[t],n}function bs(s){let e,t,n,i,o,r,a,l,c,u,f,h,d,p,m,g,w,x,_,k,C,N,A=s[6]&&ks(s),z=s[0].title&&Ss(s);const ee=[Hr,Gr,Wr],K=[];function oe(B,se){return typeof B[0].content=="string"?0:B[0].content instanceof Error?1:B[0].content instanceof wo?2:-1}~(a=oe(s))&&(l=K[a]=ee[a](s));let q=s[0].content instanceof Error&&Ms(s),te=s[0].values&&$s(s);return p=new He({props:{name:"cross"}}),{c(){e=b("div"),t=b("div"),n=b("div"),A&&A.c(),i=j(),o=b("div"),z&&z.c(),r=j(),l&&l.c(),c=j(),u=b("div"),q&&q.c(),f=j(),te&&te.c(),h=j(),d=b("div"),m=b("div"),V(p.$$.fragment),g=j(),w=b("div"),v(u,"class","button-wrapper svelte-bnz79m"),v(o,"class","toast-text svelte-bnz79m"),O(m,"display","contents"),O(m,"--height","fit-content"),v(d,"class","toast-close svelte-bnz79m"),v(n,"class","toast-content svelte-bnz79m"),F(n,"hasIcon",!!s[6]),v(w,"style",x=`transition: width ${s[0].timeout}ms linear;`),v(w,"class","toast-progress svelte-bnz79m"),F(w,"animateProgress",s[2]),v(t,"class",_="toast toast-"+s[0].type+" svelte-bnz79m"),F(t,"isInverted",s[5]),v(e,"class","wrapper svelte-bnz79m")},m(B,se){$(B,e,se),y(e,t),y(t,n),A&&A.m(n,null),y(n,i),y(n,o),z&&z.m(o,null),y(o,r),~a&&K[a].m(o,null),y(o,c),y(o,u),q&&q.m(u,null),y(u,f),te&&te.m(u,null),y(n,h),y(n,d),y(d,m),D(p,m,null),y(t,g),y(t,w),s[11](e),k=!0,C||(N=G(d,"click",s[10]),C=!0)},p(B,se){B[6]?A?(A.p(B,se),se&64&&S(A,1)):(A=ks(B),A.c(),S(A,1),A.m(n,i)):A&&(H(),P(A,1,1,()=>{A=null}),U()),B[0].title?z?z.p(B,se):(z=Ss(B),z.c(),z.m(o,r)):z&&(z.d(1),z=null);let Ie=a;a=oe(B),a===Ie?~a&&K[a].p(B,se):(l&&(H(),P(K[Ie],1,1,()=>{K[Ie]=null}),U()),~a?(l=K[a],l?l.p(B,se):(l=K[a]=ee[a](B),l.c()),S(l,1),l.m(o,c)):l=null),B[0].content instanceof Error?q?(q.p(B,se),se&1&&S(q,1)):(q=Ms(B),q.c(),S(q,1),q.m(u,f)):q&&(H(),P(q,1,1,()=>{q=null}),U()),B[0].values?te?(te.p(B,se),se&1&&S(te,1)):(te=$s(B),te.c(),S(te,1),te.m(u,null)):te&&(H(),P(te,1,1,()=>{te=null}),U()),se&64&&F(n,"hasIcon",!!B[6]),(!k||se&1&&x!==(x=`transition: width ${B[0].timeout}ms linear;`))&&v(w,"style",x),se&4&&F(w,"animateProgress",B[2]),(!k||se&1&&_!==(_="toast toast-"+B[0].type+" svelte-bnz79m"))&&v(t,"class",_),se&33&&F(t,"isInverted",B[5])},i(B){k||(S(A),S(l),S(q),S(te),S(p.$$.fragment,B),k=!0)},o(B){P(A),P(l),P(q),P(te),P(p.$$.fragment,B),k=!1},d(B){B&&M(e),A&&A.d(),z&&z.d(),~a&&K[a].d(),q&&q.d(),te&&te.d(),R(p),s[11](null),C=!1,N()}}}function ks(s){let e,t,n,i;return t=new He({props:{name:s[6],circle:!0}}),{c(){e=b("div"),n=b("div"),V(t.$$.fragment),O(n,"display","contents"),O(n,"--width","40px"),O(n,"--height","40px"),v(e,"class","toast-icon svelte-bnz79m")},m(o,r){$(o,e,r),y(e,n),D(t,n,null),i=!0},p(o,r){const a={};r&64&&(a.name=o[6]),t.$set(a)},i(o){i||(S(t.$$.fragment,o),i=!0)},o(o){P(t.$$.fragment,o),i=!1},d(o){o&&M(e),R(t)}}}function Ss(s){let e,t=s[0].title+"",n;return{c(){e=b("h3"),n=Y(t),v(e,"class","svelte-bnz79m")},m(i,o){$(i,e,o),y(e,n)},p(i,o){o&1&&t!==(t=i[0].title+"")&&ne(n,t)},d(i){i&&M(e)}}}function Wr(s){let e,t,n;var i=s[0].content;function o(r){return{}}return i&&(e=new i(o())),{c(){e&&V(e.$$.fragment),t=le()},m(r,a){e&&D(e,r,a),$(r,t,a),n=!0},p(r,a){if(i!==(i=r[0].content)){if(e){H();const l=e;P(l.$$.fragment,1,0,()=>{R(l,1)}),U()}i?(e=new i(o()),V(e.$$.fragment),S(e.$$.fragment,1),D(e,t.parentNode,t)):e=null}},i(r){n||(e&&S(e.$$.fragment,r),n=!0)},o(r){e&&P(e.$$.fragment,r),n=!1},d(r){r&&M(t),e&&R(e,r)}}}function Gr(s){let e,t=s[0].content.message+"",n,i,o,r,a=s[3]&&xs(s);return{c(){e=b("p"),n=Y(t),i=j(),a&&a.c(),o=le(),v(e,"class","svelte-bnz79m")},m(l,c){$(l,e,c),y(e,n),$(l,i,c),a&&a.m(l,c),$(l,o,c),r=!0},p(l,c){(!r||c&1)&&t!==(t=l[0].content.message+"")&&ne(n,t),l[3]?a?(a.p(l,c),c&8&&S(a,1)):(a=xs(l),a.c(),S(a,1),a.m(o.parentNode,o)):a&&(H(),P(a,1,1,()=>{a=null}),U())},i(l){r||(S(a),r=!0)},o(l){P(a),r=!1},d(l){l&&M(e),l&&M(i),a&&a.d(l),l&&M(o)}}}function Hr(s){let e,t=s[0].content+"";return{c(){e=b("p"),v(e,"class","svelte-bnz79m")},m(n,i){$(n,e,i),e.innerHTML=t},p(n,i){i&1&&t!==(t=n[0].content+"")&&(e.innerHTML=t)},i:T,o:T,d(n){n&&M(e)}}}function xs(s){let e,t,n,i;return t=new Br({props:{stacktrace:Rt(s[0].content.stack)}}),{c(){e=b("div"),V(t.$$.fragment),v(e,"class","stack-trace svelte-bnz79m")},m(o,r){$(o,e,r),D(t,e,null),i=!0},p(o,r){const a={};r&1&&(a.stacktrace=Rt(o[0].content.stack)),t.$set(a)},i(o){i||(S(t.$$.fragment,o),rt(()=>{n||(n=Ce(e,lt,{},!0)),n.run(1)}),i=!0)},o(o){P(t.$$.fragment,o),n||(n=Ce(e,lt,{},!1)),n.run(0),i=!1},d(o){o&&M(e),R(t),o&&n&&n.end()}}}function Ms(s){let e,t,n,i;return e=new de({props:{name:"> StackTrace"}}),e.$on("click",s[7]),{c(){t=b("div"),V(e.$$.fragment),O(t,"display","contents"),O(t,"--margin","5px 10px 5px -10px"),O(t,"--text",n=s[5]?"#1a1a1a":"white"),O(t,"--bg","transparent")},m(o,r){$(o,t,r),D(e,t,null),i=!0},p(o,r){r&32&&n!==(n=o[5]?"#1a1a1a":"white")&&O(t,"--text",n)},i(o){i||(S(e.$$.fragment,o),i=!0)},o(o){P(e.$$.fragment,o),i=!1},d(o){o&&M(t),R(e,o)}}}function $s(s){let e,t,n=s[0].values,i=[];for(let r=0;r<n.length;r+=1)i[r]=Ps(_s(s,n,r));const o=r=>P(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=le()},m(r,a){for(let l=0;l<i.length;l+=1)i[l].m(r,a);$(r,e,a),t=!0},p(r,a){if(a&49){n=r[0].values;let l;for(l=0;l<n.length;l+=1){const c=_s(r,n,l);i[l]?(i[l].p(c,a),S(i[l],1)):(i[l]=Ps(c),i[l].c(),S(i[l],1),i[l].m(e.parentNode,e))}for(H(),l=n.length;l<i.length;l+=1)o(l);U()}},i(r){if(!t){for(let a=0;a<n.length;a+=1)S(i[a]);t=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)P(i[a]);t=!1},d(r){ve(i,r),r&&M(e)}}}function Ur(s){let e,t,n,i,o;function r(){return s[9](s[13])}return e=new de({props:{name:s[13]}}),e.$on("click",r),{c(){t=b("div"),V(e.$$.fragment),O(t,"display","contents"),O(t,"--margin","5px 10px 5px 0"),O(t,"--text",n=s[5]?"white":"#1a1a1a"),O(t,"--bg",i=s[5]?"#1a1a1a":"white")},m(a,l){$(a,t,l),D(e,t,null),o=!0},p(a,l){s=a,l&32&&n!==(n=s[5]?"white":"#1a1a1a")&&O(t,"--text",n),l&32&&i!==(i=s[5]?"#1a1a1a":"white")&&O(t,"--bg",i);const c={};l&1&&(c.name=s[13]),e.$set(c)},i(a){o||(S(e.$$.fragment,a),o=!0)},o(a){P(e.$$.fragment,a),o=!1},d(a){a&&M(t),R(e,a)}}}function Yr(s){let e,t,n,i;function o(){return s[8](s[13])}return{c(){e=b("plant-button"),Ne(e,"name",t=s[13])},m(r,a){$(r,e,a),n||(i=G(e,"click",o),n=!0)},p(r,a){s=r,a&1&&t!==(t=s[13])&&Ne(e,"name",t)},i:T,o:T,d(r){r&&M(e),n=!1,i()}}}function Ps(s){let e,t,n,i,o;const r=[Yr,Ur],a=[];function l(c,u){return c[4]?0:1}return t=l(s),n=a[t]=r[t](s),{c(){e=b("div"),n.c(),i=j(),v(e,"class","button-spacer svelte-bnz79m")},m(c,u){$(c,e,u),a[t].m(e,null),y(e,i),o=!0},p(c,u){let f=t;t=l(c),t===f?a[t].p(c,u):(H(),P(a[f],1,1,()=>{a[f]=null}),U(),n=a[t],n?n.p(c,u):(n=a[t]=r[t](c),n.c()),S(n,1),n.m(e,i))},i(c){o||(S(n),o=!0)},o(c){P(n),o=!1},d(c){c&&M(e),a[t].d()}}}function qr(s){let e,t,n=s[0]&&bs(s);return{c(){n&&n.c(),e=le()},m(i,o){n&&n.m(i,o),$(i,e,o),t=!0},p(i,[o]){i[0]?n?(n.p(i,o),o&1&&S(n,1)):(n=bs(i),n.c(),S(n,1),n.m(e.parentNode,e)):n&&(H(),P(n,1,1,()=>{n=null}),U())},i(i){t||(S(n),t=!0)},o(i){P(n),t=!1},d(i){n&&n.d(i),i&&M(e)}}}function Xr(s,e,t){let n,i,{toast:o}=e,r=!1,a=!1;function l(){if(o.type===ge.ERROR)return"warning";if(o.type===ge.SUCCESS)return"checkmark";if(o.type===ge.WARNING)return"exclamation"}let c=!1,u;De(()=>{setTimeout(()=>{t(2,r=!0)},10)});const f=()=>{t(3,a=!a)},h=g=>o.resolve(g),d=g=>o.resolve(g),p=()=>o.reject();function m(g){ae[g?"unshift":"push"](()=>{u=g,t(1,u)})}return s.$$set=g=>{"toast"in g&&t(0,o=g.toast)},s.$$.update=()=>{s.$$.dirty&1&&t(6,n=o&&l()),s.$$.dirty&1&&t(5,i=o&&(o.type==="success"||o.type==="warning")),s.$$.dirty&2&&t(4,c=u&&!u.parentElement)},[o,u,r,a,c,i,n,f,h,d,p,m]}class Jr extends X{constructor(e){super();J(this,e,Xr,qr,Z,{toast:0})}}function Ns(s,e,t){const n=s.slice();return n[4]=e[t],n}function Zr(s){let e,t;return e=new Jr({props:{toast:s[4]}}),{c(){V(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p(n,i){const o={};i&4&&(o.toast=n[4]),e.$set(o)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){R(e,n)}}}function Kr(s){let e,t;return{c(){e=b("plant-toast"),Ne(e,"toast",t=s[4])},m(n,i){$(n,e,i)},p(n,i){i&4&&t!==(t=n[4])&&Ne(e,"toast",t)},i:T,o:T,d(n){n&&M(e)}}}function Ls(s,e){let t,n,i,o,r,a;const l=[Kr,Zr],c=[];function u(f,h){return f[0]?0:1}return n=u(e),i=c[n]=l[n](e),{key:s,first:null,c(){t=b("div"),i.c(),o=j(),this.first=t},m(f,h){$(f,t,h),c[n].m(t,null),y(t,o),a=!0},p(f,h){e=f;let d=n;n=u(e),n===d?c[n].p(e,h):(H(),P(c[d],1,1,()=>{c[d]=null}),U(),i=c[n],i?i.p(e,h):(i=c[n]=l[n](e),i.c()),S(i,1),i.m(t,o))},i(f){a||(S(i),rt(()=>{r||(r=Ce(t,lt,{easing:Yn},!0)),r.run(1)}),a=!0)},o(f){P(i),r||(r=Ce(t,lt,{easing:Yn},!1)),r.run(0),a=!1},d(f){f&&M(t),c[n].d(),f&&r&&r.end()}}}function Qr(s){let e,t=[],n=new Map,i,o=s[2];const r=a=>a[4].id;for(let a=0;a<o.length;a+=1){let l=Ns(s,o,a),c=r(l);n.set(c,t[a]=Ls(c,l))}return{c(){e=b("div");for(let a=0;a<t.length;a+=1)t[a].c();v(e,"id","toast-wrapper"),v(e,"class","svelte-1ujlok7")},m(a,l){$(a,e,l);for(let c=0;c<t.length;c+=1)t[c].m(e,null);s[3](e),i=!0},p(a,[l]){l&5&&(o=a[2],H(),t=yo(t,l,r,1,a,o,n,e,_o,Ls,null,Ns),U())},i(a){if(!i){for(let l=0;l<o.length;l+=1)S(t[l]);i=!0}},o(a){for(let l=0;l<t.length;l+=1)P(t[l]);i=!1},d(a){a&&M(e);for(let l=0;l<t.length;l+=1)t[l].d();s[3](null)}}}function el(s,e,t){let n;Pe(s,xr,a=>t(2,n=a));let i=!1,o;De(function(){t(0,i=!o.parentElement)});function r(a){ae[a?"unshift":"push"](()=>{o=a,t(1,o)})}return[i,o,n,r]}class tl extends X{constructor(e){super();J(this,e,el,Qr,Z,{})}}function nl(s){let e,t,n,i,o,r,a,l,c,u,f;return{c(){e=b("div"),t=b("input"),n=j(),i=b("label"),o=ie("svg"),r=ie("title"),a=Y("cross"),l=ie("line"),c=ie("line"),v(t,"type","checkbox"),v(t,"id",s[1]),v(t,"class","svelte-1r80sp7"),v(r,"class","svelte-1r80sp7"),v(l,"vector-effect","non-scaling-stroke"),v(l,"x1","0"),v(l,"y1","100"),v(l,"x2","100"),v(l,"y2","0"),v(l,"class","svelte-1r80sp7"),v(c,"vector-effect","non-scaling-stroke"),v(c,"x1","0"),v(c,"y1","0"),v(c,"x2","100"),v(c,"y2","100"),v(c,"class","svelte-1r80sp7"),v(o,"xmlns","http://www.w3.org/2000/svg"),v(o,"viewBox","0 0 100 100"),v(o,"class","svelte-1r80sp7"),v(i,"class","checkbox-label svelte-1r80sp7"),v(i,"for",s[1]),v(e,"class","component-wrapper svelte-1r80sp7")},m(h,d){$(h,e,d),y(e,t),t.checked=s[0],y(e,n),y(e,i),y(i,o),y(o,r),y(r,a),y(o,l),y(o,c),u||(f=G(t,"change",s[2]),u=!0)},p(h,[d]){d&2&&v(t,"id",h[1]),d&1&&(t.checked=h[0]),d&2&&v(i,"for",h[1])},i:T,o:T,d(h){h&&M(e),u=!1,f()}}}function sl(s,e,t){const n=Ee();let{value:i=!1}=e,{id:o=Nt()}=e;function r(){i=this.checked,t(0,i)}return s.$$set=a=>{"value"in a&&t(0,i=a.value),"id"in a&&t(1,o=a.id)},s.$$.update=()=>{s.$$.dirty&1&&i!==void 0&&n("change",!!i)},[i,o,r]}class vt extends X{constructor(e){super();J(this,e,sl,nl,Z,{value:0,id:1})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),ce()}get id(){return this.$$.ctx[1]}set id(e){this.$$set({id:e}),ce()}}function js(s,e,t){const n=s.slice();return n[19]=e[t],n[21]=t,n}function Es(s,e,t){const n=s.slice();return n[19]=e[t],n}function Cs(s){let e,t,n,i,o;function r(){return s[10](s[19])}return{c(){e=ie("circle"),v(e,"cx",t=s[19].x*100),v(e,"cy",n=s[19].y*100),v(e,"r","2"),v(e,"class","svelte-rytqgf"),F(e,"pinned",s[19].pinned)},m(a,l){$(a,e,l),i||(o=G(e,"mousedown",r),i=!0)},p(a,l){s=a,l&1&&t!==(t=s[19].x*100)&&v(e,"cx",t),l&1&&n!==(n=s[19].y*100)&&v(e,"cy",n),l&1&&F(e,"pinned",s[19].pinned)},d(a){a&&M(e),i=!1,o()}}}function il(s){let e,t,n,i,o;return{c(){e=ie("line"),v(e,"x1",t=s[3][s[21]-1].x*100),v(e,"y1",n=s[3][s[21]-1].y*100),v(e,"x2",i=s[19].x*100),v(e,"y2",o=s[19].y*100),v(e,"class","svelte-rytqgf")},m(r,a){$(r,e,a)},p:T,d(r){r&&M(e)}}}function Ts(s){let e,t,n,i=s[21]>0&&s[21]%2==0&&il(s);return{c(){i&&i.c(),e=ie("circle"),v(e,"cx",t=s[19].x*100),v(e,"cy",n=s[19].y*100),v(e,"r","1"),v(e,"class","svelte-rytqgf"),F(e,"pinned",s[19].pinned)},m(o,r){i&&i.m(o,r),$(o,e,r)},p(o,r){o[21]>0&&o[21]%2==0&&i.p(o,r)},d(o){i&&i.d(o),o&&M(e)}}}function ol(s){let e,t,n,i,o,r,a=s[0],l=[];for(let f=0;f<a.length;f+=1)l[f]=Cs(Es(s,a,f));let c=s[3],u=[];for(let f=0;f<c.length;f+=1)u[f]=Ts(js(s,c,f));return{c(){e=b("div"),t=ie("svg"),n=ie("path");for(let f=0;f<l.length;f+=1)l[f].c();i=ie("g");for(let f=0;f<u.length;f+=1)u[f].c();v(n,"d",s[2]),v(n,"fill","none"),v(n,"stroke","grey"),v(n,"class","svelte-rytqgf"),v(i,"id","debug"),v(i,"class","svelte-rytqgf"),v(t,"viewBox","0 0 100 100"),v(t,"width","100"),v(t,"height","100"),v(t,"class","svelte-rytqgf"),v(e,"class","component-wrapper svelte-rytqgf")},m(f,h){$(f,e,h),y(e,t),y(t,n);for(let d=0;d<l.length;d+=1)l[d].m(t,null);y(t,i);for(let d=0;d<u.length;d+=1)u[d].m(i,null);o||(r=[G(t,"mousedown",s[5]),G(t,"mousemove",s[4]),G(t,"mouseover",s[7]),G(t,"mouseout",s[8]),G(t,"mouseup",s[6]),G(t,"focus",s[7]),G(t,"blur",s[8])],o=!0)},p(f,[h]){if(h&4&&v(n,"d",f[2]),h&3){a=f[0];let d;for(d=0;d<a.length;d+=1){const p=Es(f,a,d);l[d]?l[d].p(p,h):(l[d]=Cs(p),l[d].c(),l[d].m(t,i))}for(;d<l.length;d+=1)l[d].d(1);l.length=a.length}if(h&8){c=f[3];let d;for(d=0;d<c.length;d+=1){const p=js(f,c,d);u[d]?u[d].p(p,h):(u[d]=Ts(p),u[d].c(),u[d].m(i,null))}for(;d<u.length;d+=1)u[d].d(1);u.length=c.length}},i:T,o:T,d(f){f&&M(e),ve(l,f),ve(u,f),o=!1,Re(r)}}}function rl(s,e,t){let n,i;const o=Ee();let{value:r=[{x:0,y:1,pinned:!0},{x:1,y:0,pinned:!0}]}=e,a=!1,l,c,u=0,f=0,h=[];const d=()=>{requestAnimationFrame(()=>{o("change",n),t(0,n=n.sort((N,A)=>N.x>A.x?-1:1))})},p=N=>{N.pinned||(n.splice(n.indexOf(l),1),d())},m=N=>{a&&(u=N.offsetX,f=N.offsetY,l&&(c=l,t(1,l=void 0)),c&&(c.x=u/100,c.y=f/100,d()))},g=()=>{if(!l){const N={x:u/100,y:f/100,pinned:!1};t(1,l=N),n.push(l),d()}},w=()=>{l&&(p(l),t(1,l=void 0)),c=void 0},x=()=>{a=!0},_=()=>{a=!1};function k(N){const A=qn.points(N.map(z=>[z.x*100,z.y*100]));return qn.svgPath(A)}const C=N=>{t(1,l=N)};return s.$$set=N=>{"value"in N&&t(9,r=N.value)},s.$$.update=()=>{s.$$.dirty&512&&t(0,n=r),s.$$.dirty&1&&t(2,i=k(n))},[n,l,i,h,m,g,w,x,_,r,C]}class ll extends X{constructor(e){super();J(this,e,rl,ol,Z,{value:9})}get value(){return this.$$.ctx[9]}set value(e){this.$$set({value:e}),ce()}}function Os(s){let e,t;return{c(){e=b("span"),v(e,"class","overlay svelte-bolkyu"),v(e,"style",t=`width: ${(s[0]-s[1])/(s[2]-s[1])*100}%`)},m(n,i){$(n,e,i)},p(n,i){i&7&&t!==(t=`width: ${(n[0]-n[1])/(n[2]-n[1])*100}%`)&&v(e,"style",t)},d(n){n&&M(e)}}}function al(s){let e,t,n,i,o,r,a,l,c,u,f=typeof s[1]!="undefined"&&typeof s[2]!="undefined"&&Os(s);return{c(){e=b("div"),f&&f.c(),t=j(),n=b("button"),n.textContent="-",i=j(),o=b("input"),a=j(),l=b("button"),l.textContent="+",v(n,"class","svelte-bolkyu"),v(o,"step",s[3]),v(o,"max",s[2]),v(o,"min",s[1]),v(o,"type","number"),v(o,"style",r=`width:${s[5]};`),v(o,"class","svelte-bolkyu"),v(l,"class","svelte-bolkyu"),v(e,"class","component-wrapper svelte-bolkyu")},m(h,d){$(h,e,d),f&&f.m(e,null),y(e,t),y(e,n),y(e,i),y(e,o),be(o,s[0]),s[11](o),y(e,a),y(e,l),c||(u=[G(n,"click",s[9]),G(o,"input",s[10]),G(o,"mousedown",s[7]),G(o,"mouseup",s[8]),G(l,"click",s[12])],c=!0)},p(h,[d]){typeof h[1]!="undefined"&&typeof h[2]!="undefined"?f?f.p(h,d):(f=Os(h),f.c(),f.m(e,t)):f&&(f.d(1),f=null),d&8&&v(o,"step",h[3]),d&4&&v(o,"max",h[2]),d&2&&v(o,"min",h[1]),d&32&&r!==(r=`width:${h[5]};`)&&v(o,"style",r),d&1&&at(o.value)!==h[0]&&be(o,h[0])},i:T,o:T,d(h){h&&M(e),f&&f.d(),s[11](null),c=!1,Re(u)}}}function cl(s,e,t){let n,i;const o=Ee();let{min:r=-1/0}=e,{max:a=1/0}=e,{step:l=1}=e,{value:c=0}=e,u;function f(N){t(0,c=Math.max(r,Math.min(+c+N,a)))}let h=0,d=0,p;function m(N){N.preventDefault(),d=c,h=N.clientX,p=u.getBoundingClientRect(),window.removeEventListener("mousemove",w),window.addEventListener("mousemove",w),window.addEventListener("mouseup",g),document.body.style.cursor="ew-resize"}function g(){d===c?u.focus():u.blur(),document.body.style.cursor="unset",window.removeEventListener("mouseup",g),window.removeEventListener("mousemove",w)}function w(N){if(n){const A=(N.clientX-p.left)/p.width;t(0,c=Math.max(Math.min(Math.floor(r+(a-r)*A),a),r))}else{const A=N.clientX-h;t(0,c=d+Math.floor(A/10))}}const x=()=>f(-l);function _(){c=at(this.value),t(0,c)}function k(N){ae[N?"unshift":"push"](()=>{u=N,t(4,u)})}const C=()=>f(+l);return s.$$set=N=>{"min"in N&&t(1,r=N.min),"max"in N&&t(2,a=N.max),"step"in N&&t(3,l=N.step),"value"in N&&t(0,c=N.value)},s.$$.update=()=>{var N;s.$$.dirty&6&&(n=typeof r!="undefined"&&typeof a!="undefined"&&Number.isFinite(r)&&Number.isFinite(a)),s.$$.dirty&1&&c!==void 0&&o("change",parseFloat(c+"")),s.$$.dirty&1&&t(5,i=Number.isFinite(c)?Math.max(((N=c==null?void 0:c.toString().length)!=null?N:1)*8,30)+"px":"20px")},[c,r,a,l,u,i,f,m,g,x,_,k,C]}class ul extends X{constructor(e){super();J(this,e,cl,al,Z,{min:1,max:2,step:3,value:0})}get min(){return this.$$.ctx[1]}set min(e){this.$$set({min:e}),ce()}get max(){return this.$$.ctx[2]}set max(e){this.$$set({max:e}),ce()}get step(){return this.$$.ctx[3]}set step(e){this.$$set({step:e}),ce()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),ce()}}function fl(s){let e,t,n,i,o,r,a,l;return{c(){e=b("div"),t=b("span"),i=j(),o=b("input"),v(t,"class","overlay svelte-mh6l3o"),v(t,"style",n=`width: ${(s[0]-s[2])/(s[3]-s[2])*100}%`),v(o,"step",s[1]),v(o,"max",s[3]),v(o,"min",s[2]),v(o,"type","number"),v(o,"style",r=`width:${s[6]};`),v(o,"class","svelte-mh6l3o"),v(e,"class","component-wrapper svelte-mh6l3o"),F(e,"is-down",s[5])},m(c,u){$(c,e,u),y(e,t),y(e,i),y(e,o),be(o,s[0]),s[10](o),a||(l=[G(o,"input",s[9]),G(o,"mousedown",s[7]),G(o,"mouseup",s[8])],a=!0)},p(c,[u]){u&13&&n!==(n=`width: ${(c[0]-c[2])/(c[3]-c[2])*100}%`)&&v(t,"style",n),u&2&&v(o,"step",c[1]),u&8&&v(o,"max",c[3]),u&4&&v(o,"min",c[2]),u&64&&r!==(r=`width:${c[6]};`)&&v(o,"style",r),u&1&&at(o.value)!==c[0]&&be(o,c[0]),u&32&&F(e,"is-down",c[5])},i:T,o:T,d(c){c&&M(e),s[10](null),a=!1,Re(l)}}}function hl(s){return parseFloat(s).toPrecision(2)}function dl(s,e,t){let n,{value:i=.5}=e,{step:o=.01}=e,{min:r=0}=e,{max:a=1}=e;const l=Ee();let c,u=!1,f=0,h=0,d=0,p;function m(k){k.preventDefault(),t(5,u=!0),h=i,f=k.clientY,p=c.getBoundingClientRect(),window.removeEventListener("mousemove",w),window.addEventListener("mousemove",w),window.addEventListener("mouseup",g),document.body.style.cursor="ew-resize"}function g(){t(5,u=!1),h===i&&c.focus(),document.body.style.cursor="unset",window.removeEventListener("mouseup",g),window.removeEventListener("mousemove",w)}function w(k){d=(k.clientX-p.left)/p.width,k.clientY-f,t(0,i=Math.max(Math.min(r+(a-r)*d,a),r))}function x(){i=at(this.value),t(0,i)}function _(k){ae[k?"unshift":"push"](()=>{c=k,t(4,c)})}return s.$$set=k=>{"value"in k&&t(0,i=k.value),"step"in k&&t(1,o=k.step),"min"in k&&t(2,r=k.min),"max"in k&&t(3,a=k.max)},s.$$.update=()=>{var k;s.$$.dirty&1&&i.toString().length>15&&t(0,i=hl(i)),s.$$.dirty&1&&i!==void 0&&l("change",parseFloat(i+"")),s.$$.dirty&1&&t(6,n=Number.isFinite(i)?Math.max(((k=i==null?void 0:i.toString().length)!=null?k:1)*8,50)+"px":"20px")},[i,o,r,a,c,u,n,m,g,x,_]}class pl extends X{constructor(e){super();J(this,e,dl,fl,Z,{value:0,step:1,min:2,max:3})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),ce()}get step(){return this.$$.ctx[1]}set step(e){this.$$set({step:e}),ce()}get min(){return this.$$.ctx[2]}set min(e){this.$$set({min:e}),ce()}get max(){return this.$$.ctx[3]}set max(e){this.$$set({max:e}),ce()}}function Is(s,e,t){const n=s.slice();return n[11]=e[t],n}function ml(s){let e,t,n;return{c(){e=b("div"),e.textContent="none",v(e,"id","selected-value"),v(e,"class","svelte-11xg3i7")},m(i,o){$(i,e,o),t||(n=G(e,"click",s[4]),t=!0)},p:T,d(i){i&&M(e),t=!1,n()}}}function vl(s){let e,t,n,i;return{c(){e=b("div"),t=Y(s[0]),v(e,"id","selected-value"),v(e,"class","svelte-11xg3i7")},m(o,r){$(o,e,r),y(e,t),n||(i=G(e,"click",s[4]),n=!0)},p(o,r){r&1&&ne(t,o[0])},d(o){o&&M(e),n=!1,i()}}}function As(s){let e,t=s[11]+"",n,i,o,r,a;function l(){return s[8](s[11])}return{c(){e=b("p"),n=Y(t),i=j(),v(e,"style",o=`opacity: ${s[11]===s[0]?.5:1}`),v(e,"class","item svelte-11xg3i7")},m(c,u){$(c,e,u),y(e,n),y(e,i),r||(a=G(e,"click",l),r=!0)},p(c,u){s=c,u&2&&t!==(t=s[11]+"")&&ne(n,t),u&3&&o!==(o=`opacity: ${s[11]===s[0]?.5:1}`)&&v(e,"style",o)},d(c){c&&M(e),r=!1,a()}}}function Vs(s){let e,t=s[11]!==s[0]&&As(s);return{c(){t&&t.c(),e=le()},m(n,i){t&&t.m(n,i),$(n,e,i)},p(n,i){n[11]!==n[0]?t?t.p(n,i):(t=As(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){t&&t.d(n),n&&M(e)}}}function gl(s){let e,t,n,i;function o(u,f){return u[0]!==void 0?vl:ml}let r=o(s),a=r(s),l=s[1],c=[];for(let u=0;u<l.length;u+=1)c[u]=Vs(Is(s,l,u));return{c(){e=b("div"),t=b("div"),a.c(),n=j(),i=b("div");for(let u=0;u<c.length;u+=1)c[u].c();v(i,"id","item-wrapper"),v(i,"class","svelte-11xg3i7"),v(t,"id","main"),v(t,"class","svelte-11xg3i7"),v(e,"class","component-wrapper svelte-11xg3i7"),F(e,"open",s[2])},m(u,f){$(u,e,f),y(e,t),a.m(t,null),y(t,n),y(t,i);for(let h=0;h<c.length;h+=1)c[h].m(i,null);s[9](t)},p(u,[f]){if(r===(r=o(u))&&a?a.p(u,f):(a.d(1),a=r(u),a&&(a.c(),a.m(t,n))),f&35){l=u[1];let h;for(h=0;h<l.length;h+=1){const d=Is(u,l,h);c[h]?c[h].p(d,f):(c[h]=Vs(d),c[h].c(),c[h].m(i,null))}for(;h<c.length;h+=1)c[h].d(1);c.length=l.length}f&4&&F(e,"open",u[2])},i:T,o:T,d(u){u&&M(e),a.d(),ve(c,u),s[9](null)}}}function wl(s,e,t){const n=Ee();let{value:i=void 0}=e,o=!1,r;function a(){t(2,o=!0),setTimeout(()=>{document.addEventListener("click",()=>{t(2,o=!1)},{once:!0})},50)}function l(p){t(0,i=p),t(2,o=!1)}let{values:c=[]}=e;function u(p){t(1,c=p)}function f(p){t(0,i=p)}const h=p=>l(p);function d(p){ae[p?"unshift":"push"](()=>{r=p,t(3,r)})}return s.$$set=p=>{"value"in p&&t(0,i=p.value),"values"in p&&t(1,c=p.values)},s.$$.update=()=>{s.$$.dirty&1&&i&&n("change",i)},[i,c,o,r,a,l,u,f,h,d]}class yl extends X{constructor(e){super();J(this,e,wl,gl,Z,{value:0,values:1,setItems:6,setValue:7})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),ce()}get values(){return this.$$.ctx[1]}set values(e){this.$$set({values:e}),ce()}get setItems(){return this.$$.ctx[6]}get setValue(){return this.$$.ctx[7]}}function Ds(s,e,t){const n=s.slice();return n[19]=e[t],n}function Rs(s){let e,t,n,i,o;function r(){return s[9](s[19])}return{c(){e=ie("circle"),v(e,"cx",t=s[19].x*100),v(e,"cy",n=s[19].y*200-50),v(e,"r","4"),v(e,"class","svelte-qu578u"),F(e,"pinned",s[19].pinned)},m(a,l){$(a,e,l),i||(o=G(e,"mousedown",r),i=!0)},p(a,l){s=a,l&1&&t!==(t=s[19].x*100)&&v(e,"cx",t),l&1&&n!==(n=s[19].y*200-50)&&v(e,"cy",n),l&1&&F(e,"pinned",s[19].pinned)},d(a){a&&M(e),i=!1,o()}}}function _l(s){let e,t,n,i,o,r,a,l,c,u,f,h,d=s[0],p=[];for(let m=0;m<d.length;m+=1)p[m]=Rs(Ds(s,d,m));return{c(){e=b("div"),t=ie("svg"),n=ie("path");for(let m=0;m<p.length;m+=1)p[m].c();i=j(),o=ie("svg"),r=ie("defs"),a=ie("linearGradient"),l=ie("stop"),c=ie("stop"),u=ie("path"),v(n,"d",s[2]),v(n,"fill","none"),v(n,"stroke","#65E2A0"),v(n,"class","svelte-qu578u"),v(t,"viewBox","0 0 100 100"),v(t,"width","50"),v(t,"height","100"),v(t,"class","svelte-qu578u"),v(l,"offset","0%"),O(l,"stop-color","#65E2A0"),O(l,"stop-opacity","1"),v(l,"class","svelte-qu578u"),v(c,"offset","100%"),O(c,"stop-color","#469C6E"),O(c,"stop-opacity","1"),v(c,"class","svelte-qu578u"),v(a,"id","grad1"),v(a,"x1","0%"),v(a,"y1","0%"),v(a,"x2","100%"),v(a,"y2","0%"),v(a,"class","svelte-qu578u"),v(r,"class","svelte-qu578u"),v(u,"d",s[2]),v(u,"fill","url(#grad1)"),v(u,"stroke","grey"),v(u,"class","svelte-qu578u"),v(o,"id","right"),v(o,"viewBox","0 0 100 100"),v(o,"width","50"),v(o,"height","100"),v(o,"class","svelte-qu578u"),v(e,"class","component-wrapper svelte-qu578u")},m(m,g){$(m,e,g),y(e,t),y(t,n);for(let w=0;w<p.length;w+=1)p[w].m(t,null);y(e,i),y(e,o),y(o,r),y(r,a),y(a,l),y(a,c),y(o,u),f||(h=[G(t,"mousedown",s[4]),G(t,"mousemove",s[3]),G(t,"mouseover",s[6]),G(t,"mouseout",s[7]),G(t,"mouseup",s[5]),G(t,"focus",s[6]),G(t,"blur",s[7])],f=!0)},p(m,[g]){if(g&4&&v(n,"d",m[2]),g&3){d=m[0];let w;for(w=0;w<d.length;w+=1){const x=Ds(m,d,w);p[w]?p[w].p(x,g):(p[w]=Rs(x),p[w].c(),p[w].m(t,null))}for(;w<p.length;w+=1)p[w].d(1);p.length=d.length}g&4&&v(u,"d",m[2])},i:T,o:T,d(m){m&&M(e),ve(p,m),f=!1,Re(h)}}}function bl(s,e,t){let n,i;const o=Ee();let{value:r=[{x:1,y:0,pinned:!0},{x:.5,y:.5,pinned:!0},{x:1,y:1,pinned:!0}]}=e,a=!1,l,c,u=0,f=0;const h=()=>{requestAnimationFrame(()=>{o("change",n),t(0,n=n.sort((N,A)=>N.y>A.y?-1:1))})},d=N=>{N.pinned||(n.splice(n.indexOf(l),1),h())},p=N=>{a&&(u=N.offsetX,f=N.offsetY,l&&(c=l,t(1,l=void 0)),c&&(c.x=u/50,c.y=f/100,h()))},m=()=>{if(!l){const N={x:u/50,y:f/100,pinned:!1};t(1,l=N),n.push(l),h()}},g=()=>{l&&(d(l),t(1,l=void 0)),c=void 0},w=()=>{a=!0},x=()=>{a=!1},_=N=>`L ${N.x*100} ${N.y*200-50}`;function k(N){return N.reduce((A,z,ee)=>ee===0?`M ${z.x*100},${z.y*200-50}`:`${A} ${_(z)}`,"")}const C=N=>{t(1,l=N)};return s.$$set=N=>{"value"in N&&t(8,r=N.value)},s.$$.update=()=>{s.$$.dirty&256&&t(0,n=r),s.$$.dirty&1&&t(2,i=k(n))},[n,l,i,p,m,g,w,x,r,C]}class kl extends X{constructor(e){super();J(this,e,bl,_l,Z,{value:8})}get value(){return this.$$.ctx[8]}set value(e){this.$$set({value:e}),ce()}}function Fs(s){let e,t,n;return{c(){e=b("div"),t=b("p"),n=Y(s[1]),v(t,"class","svelte-1aw08v2"),v(e,"class","border svelte-1aw08v2")},m(i,o){$(i,e,o),y(e,t),y(t,n)},p(i,o){o&2&&ne(n,i[1])},d(i){i&&M(e)}}}function Sl(s){let e,t,n,i,o,r,a,l,c,u,f=s[1]&&Fs(s);const h=s[4].default,d=Vn(h,s,s[3],null);return{c(){e=b("div"),t=b("div"),n=ie("svg"),i=ie("path"),o=j(),f&&f.c(),r=j(),a=b("div"),d&&d.c(),v(i,"d","M13.172 12l-4.95-4.95 1.414-1.414L16 12l-6.364 6.364-1.414-1.414z"),v(i,"class","svelte-1aw08v2"),v(n,"xmlns","http://www.w3.org/2000/svg"),v(n,"viewBox","0 0 24 24"),v(n,"width","24"),v(n,"height","24"),v(n,"class","svelte-1aw08v2"),v(t,"class","header svelte-1aw08v2"),v(a,"class","content svelte-1aw08v2"),v(e,"class","wrapper svelte-1aw08v2"),F(e,"open",s[0])},m(p,m){$(p,e,m),y(e,t),y(t,n),y(n,i),y(t,o),f&&f.m(t,null),y(e,r),y(e,a),d&&d.m(a,null),l=!0,c||(u=G(t,"click",s[2]),c=!0)},p(p,[m]){p[1]?f?f.p(p,m):(f=Fs(p),f.c(),f.m(t,null)):f&&(f.d(1),f=null),d&&d.p&&(!l||m&8)&&Dn(d,h,p,p[3],l?Fn(h,p[3],m,null):Rn(p[3]),null),m&1&&F(e,"open",p[0])},i(p){l||(S(d,p),l=!0)},o(p){P(d,p),l=!1},d(p){p&&M(e),f&&f.d(),d&&d.d(p),c=!1,u()}}}function xl(s,e,t){let{$$slots:n={},$$scope:i}=e;const o=Ee();let{open:r=!1}=e,{name:a=""}=e;const l=()=>{t(0,r=!r),o("toggle",r)};return s.$$set=c=>{"open"in c&&t(0,r=c.open),"name"in c&&t(1,a=c.name),"$$scope"in c&&t(3,i=c.$$scope)},[r,a,l,i,n]}class Ft extends X{constructor(e){super();J(this,e,xl,Sl,Z,{open:0,name:1})}}function Ml({target:s,template:e,value:t}){t===void 0&&"value"in e&&(t=e.value);const n=zt(e,t),i=Q({},e);return delete i.type,delete i.inputType,delete i.defaultValue,delete i.internal,i.value=t,new n({target:s,props:_e(Q({},i),{"--width":"100%"})})}function zt(s,e){return s.inputType==="select"||Array.isArray(s.values)?yl:s.inputType==="curve"?ll:s.inputType==="shape"?kl:s.type==="number"||typeof e=="number"?s.step&&s.step%1!=0?pl:ul:vt}function $l(s){const e=2*Math.PI/s;return new Array(s).fill(null).map((n,i)=>[Math.cos(e*i),Math.sin(e*i)])}function Pl(s,e){const t=new Uint16Array(s*(e-1)*6);for(let n=0;n<e;n++){const i=n*s*6,o=n*s;for(let r=0;r<s;r++){const a=i+r*6,l=o+r;t[a+0]=l,t[a+1]=l-s+1,t[a+2]=l+1,t[a+3]=l+1,t[a+4]=l+s,t[a+5]=l,r===s-1?(t[a+0]=l,t[a+1]=l-s+1,t[a+2]=l+1,t[a+3]=l+1,t[a+4]=l+s,t[a+5]=l):(t[a+0]=l,t[a+1]=l+1,t[a+2]=l+s+1,t[a+3]=l+s+1,t[a+4]=l+s,t[a+5]=l)}}return t}function Nl(s,e){const t=[],n=[],i=[],o={position:[],index:Pl(e,s.length)},r=$l(e),a=r.length,l=s.length;for(let c=0;c<l;c++){const u=[0,0,1];c===0?Lt(n,s[c],s[c+1]):c===l-1?Lt(n,s[c-1],s[c]):Lt(n,s[c-1],s[c+1]),bo(n,n),ko(i,u,n);const f=Math.acos(So(u,n));xo(t),Mo(t,t,f,i);for(let h=0;h<a;h++){const d=r[h],p=[d[0],d[1],0],m=s[c][3];$o(p,p,[m,m,1]),Po(p,p,t),No(p,p,s[c]),o.position.push(p)}}return o}function qe(s,e,t){return s*(1-t)+e*t}function Ll(s,e=0){const t=(s.length-1)*e,n=Math.floor(t),i=Math.ceil(t);return qe(s[i],s[n],i-t)}function zs(s,e){const t=(s.length/4-1)*e,n=Math.floor(t),i=Math.ceil(t),o=i-t;return[qe(s[i*4+0],s[n*4+0],o),qe(s[i*4+1],s[n*4+1],o),qe(s[i*4+2],s[n*4+2],o),qe(s[i*4+3],s[n*4+3],o)]}function Bs(s,e){const t=(s.length/4-1)*e,n=Math.floor(t),i=Math.ceil(t);return[s[i*4+0]-s[n*4+0],s[i*4+1]-s[n*4+1],s[i*4+2]-s[n*4+2],s[i*4+3]+s[n*4+3]/2]}function Bt(...s){if(s.length===1)return s[0];const e=new Float32Array(s.reduce((u,f)=>u+f.position.length,0)),t=new Float32Array(s.reduce((u,f)=>u+f.normal.length,0)),n=new Float32Array(s.reduce((u,f)=>u+f.uv.length,0)),i=s.reduce((u,f)=>u+f.index.length,0),o=i>65536?new Uint32Array(i):new Uint16Array(i);let r=0,a=0,l=0,c=0;for(let u=0;u<s.length;u++){const f=s[u].normal,h=f.length;for(let _=0;_<h;_++)t[a+_]=f[_];a+=h;const d=s[u].uv,p=d.length;for(let _=0;_<p;_++)n[l+_]=d[_];l+=p;const m=s[u].index,g=m.length;for(let _=0;_<g;_++)o[_+c]=m[_]+r/3;c+=g;const w=s[u].position,x=w.length;for(let _=0;_<x;_++)e[r+_]=w[_];r+=x}return{position:e,normal:t,uv:n,index:o}}var jl=(s,e)=>Math.sqrt(s*s+e*e),El=(s,e,t)=>Math.sqrt(s*s+e*e+t*t);let Fe=0,Wt=ct.makeNoise2D(Fe),Ws=ct.makeNoise3D(Fe);var Gt={n1d:s=>Wt(s,0),n2d:(s,e)=>Wt(s,e),n3d:(s,e,t)=>Ws(s,e,t),get seed(){return Fe},set seed(s){Fe=s,Wt=ct.makeNoise2D(Fe),Ws=ct.makeNoise3D(Fe)}},Gs=([s,e])=>{const t=jl(s,e);return t===0?[1,0]:[s/t,e/t]},Cl=(s,e,t)=>{const n=El(s,e,t);return[s/n,e/n,t/n]},Hs=(s,e,t)=>[s*Math.cos(t)-e*Math.sin(t),s*Math.sin(t)+e*Math.cos(t)];function Ht(s,e,t){const[n,i,o]=s,[r,a,l]=Cl(e[0],e[1],e[2]),c=Math.cos(t),u=Math.sin(t);return new Ae((c+(1-c)*r*r)*n+((1-c)*r*a-l*u)*i+((1-c)*r*l+a*u)*o,((1-c)*r*a+l*u)*n+(c+(1-c)*a*a)*i+((1-c)*a*l-r*u)*o,((1-c)*r*l-a*u)*n+((1-c)*a*l+r*u)*i+(c+(1-c)*l*l)*o)}function Ut(s,e){return new Ge(s,{position:{size:3,data:e.position},normal:{size:3,data:e.normal},uv:{size:2,data:e.uv},index:{data:e.index}})}const Tl=100,Yt=2,Us=1;function Ol(s=1,e=12,t=12){const n=360*(Math.PI/180)/t,i=e*t+1,o=(e-1)*t*2+t,r=new Float32Array(i*3),a=new Float32Array(i*3),l=new Float32Array(i*2),c=new Uint16Array(o*3);r[0]=0,r[1]=1-Us,r[2]=0,a[0]=0,a[1]=1,a[2]=0,l[0]=.5,l[1]=.5;const u=new Array(e-1).fill(null).map((h,d,p)=>s+d/(p.length-1)*Yt);u.push(Tl);const f=u.map(h=>{const d=(Math.max(Math.min(h,s+Yt),s)-s)/Yt;return Math.sin((d+.5)*Math.PI)/2+.5-Us});for(let h=0;h<e;h++){const d=u[h],p=f[h];for(let m=0;m<t;m++){const g=n*m,w=Math.cos(g)*d,x=p,_=Math.sin(g)*d,C=h*t+m+1;if(r[C*3+0]=w,r[C*3+1]=x,r[C*3+2]=_,a[C*3+0]=0,a[C*3+1]=1,a[C*3+2]=0,l[C*2+0]=w,l[C*2+1]=_,h===0){const N=(C-1)*3;c[N+0]=0,c[N+1]=(m+1)%t+1,c[N+2]=m+1}else if(m===t-1){const N=h*t*6+m*6-t*3;c[N+0]=C,c[N+1]=C+1-t-t,c[N+2]=C+1-t,c[N+3]=C,c[N+4]=C-t,c[N+5]=C+1-t*2}else{const N=h*t*6+m*6-t*3;c[N+0]=C,c[N+1]=C+1-t,c[N+2]=C+1,c[N+3]=C,c[N+4]=C-t,c[N+5]=C+1-t}}}return{position:r,normal:a,uv:l,index:c}}function Il(s,{res:e=1,xCurvature:t=.5,yCurvature:n=.2}={}){const i=s.length,o=3+e*2,r=o*i,a=(o-1)*(i-1)*2,l=new Float32Array(r*3),c=new Float32Array(r*2),u=new Float32Array(r*2),f=new Uint16Array(a*3);return s.forEach((h,d)=>{const p=d*o;for(let m=0;m<o;m++){const g=2-m/(o-1)*2-1;l[p*3+m*3+0]=(h.x-1)*g*.5;const w=-(1-h.y)*(1-h.y)*.5,x=Math.sin(Math.abs(g)*Math.PI)*.01;if(l[p*3+m*3+1]=x*t+w*n,l[p*3+m*3+2]=h.y-1,u[p*2+m*2+0]=l[p*3+m*3+0]+1/2,u[p*2+m*2+1]=l[p*3+m*3+2],d<s.length-1){const _=d*(o-1);f[_*6+m*6+0]=p+m+0,f[_*6+m*6+1]=p+m+1,f[_*6+m*6+2]=p+m+o,f[_*6+m*6+3]=p+m+1,f[_*6+m*6+4]=p+m+o,f[_*6+m*6+5]=p+m+o+1}}}),{position:l,normal:c,index:f,uv:u}}function Ys(s,e=8){const t=Tr(s,4),n=Nl(t,e);return{position:Float32Array.from(n.position.map(o=>o.splice(0,3)).flat()),index:n.index,normal:new Float32Array,uv:new Float32Array}}const Al={title:"Branches",type:"branch",outputs:["plant"],parameters:{input:{type:"plant",label:"plant",external:!0},length:{type:["number","parameter","curve"],min:0,max:3,step:.05,value:.8},thiccness:{type:"number",min:0,max:1,step:.01,value:.8},offsetSingle:{type:"number",min:0,max:1,step:.01,value:.5},lowestBranch:{type:"number",min:0,max:1,step:.01,value:.2},amount:{type:"number",min:0,max:64,value:10}},computeSkeleton(s,e){const{skeletons:t}=s.input.result,n=e.getSetting("stemResY"),i=t.map(o=>{const r=[],a=e.handleParameter(s.amount),l=e.handleParameter(s.lowestBranch);for(let c=0;c<a;c++){const u=c/a,f=e.handleParameter(s.length,u)*(1-u),h=e.handleParameter(s.thiccness,u),d=e.handleParameter(s.offsetSingle,u),p=c%2==0;let m=l+(1-l)*u;m-=1/a*d*(p?-1:1);const[g,,w]=Bs(o,m),x=Gs([g,w]),[_,k]=Hs(x[0],x[1],p?-Math.PI/2:Math.PI/2),[C,N,A,z]=zs(o,m),ee=Math.max(Math.floor(n*f*10),4),K=new Float32Array(ee*4);for(let oe=0;oe<ee*4;oe++){const q=oe/ee;K[oe*4+0]=C+_*q*f,K[oe*4+1]=N,K[oe*4+2]=A+k*q*f,K[oe*4+3]=z*h*(1-q)}r.push(K)}return r}).flat();return{skeletons:i,allSkeletons:[...i,...t]}},computeGeometry(s,e,t){const n=t.getSetting("stemResX"),{geometry:i}=s.input.result,{skeletons:o}=e;return{geometry:Bt(i,...o.map(r=>Ys(r,n)))}}},Vl={title:"Curve",type:"curve",outputs:["number"],parameters:{value:{type:"curve",inputType:"curve",internal:!0,label:!1,value:[{x:0,y:1,pinned:!0},{x:1,y:0,pinned:!0}]}},computeValue(s,e,t){const n=Lr(s.value).map(i=>i.y);return Ll(n,1-t)}},Dl={title:"Gravity",type:"gravity",outputs:["plant"],parameters:{input:{type:"plant",external:!0},type:{internal:!0,type:"select",values:["simple","verlet","test"]},strength:{type:"number",inputType:"slider",min:0,max:2,step:.05}},computeSkeleton(s,e){const{input:t,type:n,strength:i}=s,{skeletons:o}=t.result;return n==="simple"&&o.forEach(r=>{const a=r.length/4;for(let l=1;l<a;l++){const c=l/a,u=r[l*4+1],f=e.handleParameter(i,c);r[l*4+1]=u-u*c*c*c*f}return r}),n==="test"&&o.forEach(r=>{const a=r.length/4;for(let l=1;l<a;l++){const c=l/a,u=e.handleParameter(i,c),f=r[l*4+0],h=r[l*4+1],d=r[l*4+2],p=r[(l-1)*4+0],m=r[(l-1)*4+1],g=r[(l-1)*4+2],w=p-f,x=m-h,_=m-d,[k,C]=Hs(w,_,90);for(let N=l;N<a;N++){const A=r[N*4+0],z=r[N*4+1],ee=r[N*4+2],K=A-p,oe=z-m,q=ee-g;let[te,B,se]=Ht([K,oe,q],[k,x,C],u*c);const Ie=te+p,kt=B+m,St=se+g;r[N*4+0]=Ie,r[N*4+1]=kt,r[N*4+2]=St}}return r}),n==="verlet"&&o.forEach(r=>{const a=r.length/4;for(let l=1;l<a;l++){const c=r[l*4+0],u=r[l*4+1],f=r[l*4+2],h=new Ae(5,0,0).cross(new Ae(c,u,f),new Ae(0,1,0)),d=l/a,p=e.handleParameter(i,d);for(let m=l;m<a;m++){const g=Ht([c,u,f],h,d*p);r[m*4+0]=g[0],r[m*4+1]=g[1],r[m*4+2]=g[2]}}return r}),{skeletons:o}},computeGeometry(s){return s.input.result}},qt=ue("nodes.join"),Rl={title:"Join",type:"join",outputs:["plant"],parameters:{inputA:{type:"plant",label:"plant",external:!0},inputB:{type:"plant",label:"plant",external:!0}},computeSkeleton(s,e){qt("compute skeleton",s,e);const{inputA:t,inputB:n}=s;if(!t||!n)return t?t.result:n.result;const{skeletons:i,allSkeletons:o}=t.result,{skeletons:r,allSkeletons:a}=n.result;qt(i,r);const l=[...i,...r],c=[];return o&&c.push(...o),a&&c.push(...a),{allSkeletons:c,skeletons:l}},computeGeometry(s){const{inputA:e,inputB:t}=s;if(!e||!t)return e?e.result:t.result;const{geometry:n,instances:i}=e.result,{geometry:o,instances:r}=t.result,a=Bt(n,o),l=[];return i&&l.push(...i),r&&l.push(...r),qt("compute geometry",{geometryA:n,geometryB:o,result:a}),{geometry:a,instances:l}}},Fl=[{x:1,y:1,pinned:!0},{x:.62,y:.84,pinned:!1},{x:.54,y:.63,pinned:!1},{x:.38,y:.41,pinned:!0},{x:.44,y:.23,pinned:!1},{x:.64,y:.12,pinned:!1},{x:.98,y:.02,pinned:!0}],zl={title:"Leaf",type:"leaf",outputs:["plant","leaf"],parameters:{input:{type:"plant",external:!0},size:{type:["number","parameter","curve","vec2"],inputType:"slider",min:0,max:3,step:.05,value:.2},shape:{type:"leaf",external:!0,defaultValue:Fl},lowestLeaf:{type:"number",inputType:"slider",min:0,max:1,step:.01,value:.5},curvature:{external:!0,type:"vec2",defaultValue:{x:.5,y:.2}},amount:{type:"number",min:0,max:20,value:10}},computeSkeleton(s,e){const{input:t}=s,{skeletons:n}=t.result,i=n.map((o,r)=>{const a=r/n.length,l=e.handleParameter(s.amount,a),c=new Float32Array(l*3),u=new Float32Array(l*3),f=new Float32Array(l*3);for(let h=0;h<l;h++){const d=h/(l-1),p=e.handleParameter(s.size,1-d),m=e.handleParameter(s.lowestLeaf,d),g=m+(1-m)*d-.001,[w,x,_]=zs(o,g),[k,,C]=Bs(o,g),N=Gs([k,C]),A=Math.atan2(-N[0],N[1]);c[h*3+0]=w,c[h*3+1]=x,c[h*3+2]=_,u[h*3+0]=p,u[h*3+1]=1,u[h*3+2]=p,f[h*3+0]=0,f[h*3+1]=A-Math.PI/2*(h%2==0?-1:1),f[h*3+2]=0}return{offset:c,scale:u,rotation:f}});return{allSkeletons:t.result.allSkeletons,skeletons:n,instances:i}},computeGeometry(s,e,t){const{shape:n,input:i,curvature:o}=s,{instances:r}=e,a=t.handleParameter(o),l=Il(t.handleParameter(n),{res:t.getSetting("leafRes",2),xCurvature:a.x,yCurvature:a.y});return{geometry:i.result.geometry,instances:r.map(c=>Q(Q({},c),l))}}},Bl={title:"Math",type:"math",outputs:["number"],parameters:{mode:{type:"whatever",internal:!0,inputType:"selection",label:!1,defaultValue:"add",values:["add","multiply","subtract"]},a:{type:"number",defaultValue:0,label:!1},b:{type:"number",defaultValue:0,label:!1}},computeValue(s,e,t){const{mode:n}=s,i=e.handleParameter(s.a,t),o=e.handleParameter(s.b,t);switch(n){case"multiply":return i*o;case"subtract":return i-o;default:return i+o}}},Wl=ue("nodes.noise"),Gl={title:"Noise",type:"noise",outputs:["plant"],parameters:{input:{type:"plant",label:"plant",external:!0},size:{type:"number",inputType:"slider",min:0,max:20,step:.05,value:1},strength:{type:"number",inputType:"slider",min:0,max:2,step:.01,value:.5}},computeSkeleton(s,e){Wl(s);const{input:t}=s,n=e.handleParameter(s.size),i=e.handleParameter(s.strength),{skeletons:o}=t.result;return o.forEach((r,a)=>{const l=r.length/4,c=[r[0],r[1],r[2]];let u=0;for(let f=0;f<l;f++){const h=f/l;u+=(Math.abs(c[0]-r[f*4+0])+Math.abs(c[1]-r[f*4+1])+Math.abs(c[2]-r[f*4+2]))/3,c[0]=r[f*4+0],c[1]=r[f*4+1],c[2]=r[f*4+2],r[f*4+0]=r[f*4+0]+Gt.n1d(u*n+0+a*500)*i*h,r[f*4+1]=r[f*4+1]+Gt.n1d(u*n+1e3+a*500)*i*h,r[f*4+2]=r[f*4+2]+Gt.n1d(u*n+2e3+a*500)*i*h}}),{skeletons:o,allSkeletons:t.result.allSkeletons}},computeGeometry(s){return s.input.result}},Hl={title:"Output",type:"output",outputs:[],parameters:{main:{type:"plant",label:"plant",external:!0}},computeNode(s={}){return s.main}},Ul={title:"Parameter",type:"parameter",outputs:["number"],parameters:{value:{type:"number",value:0},variation:{type:"number",inputType:"slider",value:0,min:0,max:1,step:.05}},computeValue(s,e){const{value:t=0,variation:n=0}=s;return n?t+e.n1d(200)*n*Math.max(t,1):t}},Yl=s=>s==="X"?[1,0,0]:s==="Z"?[0,0,1]:[0,1,0],ql={title:"Rotate",type:"rotate",outputs:["plant"],parameters:{input:{type:"plant",external:!0},type:{internal:!0,label:!1,type:"select",values:["Y","X","Z"]},spread:{internal:!0,type:"boolean",value:!0},angle:{type:"number",inputType:"slider",min:0,max:Math.PI*2,step:.05,value:0}},computeSkeleton(s,e){const{input:t,type:n,spread:i}=s,{result:{skeletons:o,allSkeletons:r}}=t,a=Yl(n);return o.forEach((l,c)=>{const u=l.length/4,f=l[0],h=l[1],d=l[2],p=c/o.length,m=e.handleParameter(s.angle,p)*(i?p:1);for(let g=1;g<u;g++){let w=l[g*4+0],x=l[g*4+1],_=l[g*4+2];w-=f,x-=h,_-=d,[w,x,_]=Ht([w,x,_],a,m),w+=f,x+=h,_+=d,l[g*4+0]=w,l[g*4+1]=x,l[g*4+2]=_}}),{skeletons:o,allSkeletons:r}},computeGeometry(s){return s.input.result}},Xl={title:"Shape",type:"shape",outputs:["leaf"],parameters:{value:{type:"leaf",inputType:"shape",internal:!0,label:!1,value:[{x:1,y:0,pinned:!0},{x:.5,y:.5,pinned:!0},{x:1,y:1,pinned:!0}]}},computeValue(s){return s.value}},Jl={title:"Slider",type:"slider",outputs:["number"],parameters:{value:{type:"number",label:!1,inputType:"slider",internal:!0,min:0,max:1,step:.01,value:0}},computeValue(s){return s.value}},qs=ue("nodes.stem"),Zl={title:"Stem",type:"stem",outputs:["plant"],parameters:{origin:{type:"vec3",external:!0,defaultValue:{x:0,y:0,z:0}},height:{type:"number",inputType:"slider",min:0,max:5,step:.05,value:2},thiccness:{type:"number",inputType:"slider",min:0,max:.2,step:.01,value:.06},amount:{type:"number",min:0,max:20,value:1}},computeSkeleton(s,e){qs("computeSkeleton",s);const t=e.handleParameter(s.amount),n=e.getSetting("stemResY"),i=[];for(let o=0;o<t;o++){const{x:r,y:a,z:l}=e.handleParameter(s.origin),c=e.handleParameter(s.height),u=new Float32Array(n*4);for(let f=0;f<n;f++){const h=f/n,d=e.handleParameter(s.thiccness,h)*(1-h),p=r,m=a+h*c,g=l;u[f*4+0]=p,u[f*4+1]=m,u[f*4+2]=g,u[f*4+3]=d}i.push(u)}return{skeletons:i,allSkeletons:i}},computeGeometry(s,e,t){qs("computeNode",s,e);const n=t.getSetting("stemResX");return{geometry:Bt(...e.skeletons.map(i=>Ys(i,n)))}}},Kl={title:"Vec2",type:"vec2",outputs:["vec2"],parameters:{x:{label:!1,type:"number",value:0,defaultValue:0},y:{label:!1,type:"number",value:0,defaultValue:0}}},Ql={title:"Vec3",type:"vec3",outputs:["vec3"],parameters:{x:{label:!1,type:"number",value:0,defaultValue:0},y:{label:!1,type:"number",value:0,defaultValue:0},z:{label:!1,type:"number",value:0,defaultValue:0}}};var ea=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Branch:Al,Curve:Vl,Gravity:Dl,Join:Rl,Leaf:zl,Math:Bl,Noise:Gl,Output:Hl,Parameter:Ul,Rotate:ql,Shape:Xl,Slider:Jl,Stem:Zl,Vec2:Kl,Vec3:Ql});const Xt=Object.values(ea).map(s=>("computeNode"in s?s.compute=s.computeNode:s.compute=e=>({type:s.type,parameters:e}),s));const ta=(s,e)=>t=>Math.min(Math.max(t,s),e),na=s=>{const e=10**s;return t=>Math.floor(t*e)/e},sa=ta(-1e5,1e5),ia=na(1),gt=s=>sa(ia(s));class Xs{constructor({x1:e=0,y1:t=0,x2:n=0,y2:i=0},o){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x1=e,this.y1=t,this.x2=n,this.y2=i,this.system=o.node.system,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("viewbox","0 0 100 100"),this.svg.setAttribute("width","100"),this.svg.setAttribute("height","100"),this.svg.style.overflow="visible",this.svg.style.position="absolute",this.svg.style.top="3.5px",this.svg.style.pointerEvents="none",this.svg.style.zIndex="-1",o.view.wrapper.append(this.svg),this.path=document.createElementNS("http://www.w3.org/2000/svg","path"),this.path.classList.add("node-connection-path"),this.path.setAttribute("vector-effect","non-scaling-stroke"),this.path.setAttribute("d",`
      M 0 0
      C 50 0 
        50 100
				100  100
      `),this.svg.appendChild(this.path),this.setPosition()}setPosition({x1:e=this.x1,y1:t=this.y1,x2:n=this.x2,y2:i=this.y2}={}){var a;this.x1=gt(e),this.y1=gt(t),this.x2=gt(n),this.y2=gt(i);const o=this.x2-this.x1+3.5,r=this.y2-this.y1;(a=this==null?void 0:this.hoverPath)==null||a.setAttribute("d",`
      M 0 0
      C ${o/2} 0 
        ${o/2} ${r}
				${o}  ${r}
      `),this.path.setAttribute("d",`
      M 0 0
      C ${o/2} 0 
        ${o/2} ${r}
				${o}  ${r}
      `)}remove(){var e;this.path.remove(),(e=this==null?void 0:this.hoverPath)==null||e.remove(),this.system.save()}}class oa extends Xs{constructor(e){super({},e.output);this.connection=e,this.input=e.input.view,this.output=e.output.view,this.hoverPath=document.createElementNS("http://www.w3.org/2000/svg","path"),this.hoverPath.classList.add("node-connection-hover"),this.hoverPath.setAttribute("vector-effect","non-scaling-stroke"),this.svg.append(this.hoverPath),this.hoverPath.addEventListener("mouseover",()=>{const{activeNode:t}=this.system.view;t&&t.view.active&&t.view.hoveredConnection!==this&&this.handleNodeOver(t)}),this.hoverPath.addEventListener("mouseout",()=>{const{activeNode:t}=this.system.view;this.handleNodeOut(t)}),e.input.node.system.view.colorStore.on(e.input.type[0],t=>{this.path.style.stroke=t})}handleNodeOver(e){this.connection.isNodeJoinable(e)&&(e.view.hoveredConnection=this,this.path.classList.add("hover-active"))}handleNodeOut(e){e&&e.view.hoveredConnection===this&&delete e.view.hoveredConnection,this.path.classList.remove("hover-active")}remove(){super.remove()}}function ra(s){if(!la(s))throw new Error("panzoom requires DOM element to be attached to the DOM tree");const t=s.parentElement;return s.scrollTop=0,{getBBox:o,getOwner:i,applyTransform:r};function i(){return t}function o(){return{left:0,top:0,width:s.clientWidth,height:s.clientHeight}}function r(a){s.style.transformOrigin="0 0 0",s.style.transform="matrix("+a.scale+", 0, 0, "+a.scale+", "+a.x+", "+a.y+")"}}function la(s){return s&&s.parentElement&&s.style}function aa(s,e,t){typeof t!="object"&&(t={});const n=typeof t.minVelocity=="number"?t.minVelocity:5,i=typeof t.amplitude=="number"?t.amplitude:.25,o=typeof t.cancelAnimationFrame=="function"?t.cancelAnimationFrame:ca(),r=typeof t.requestAnimationFrame=="function"?t.requestAnimationFrame:ua();let a,l;const c=342;let u,f,h,d,p,m,g,w;return{start:_,stop:C,cancel:x};function x(){o(u),o(w)}function _(){a=s(),d=g=f=p=0,l=new Date,o(u),o(w),u=r(k)}function k(){const A=Date.now(),z=A-l;l=A;const ee=s(),K=ee.x-a.x,oe=ee.y-a.y;a=ee;const q=1e3/(1+z);f=.8*K*q+.2*f,p=.8*oe*q+.2*p,u=r(k)}function C(){o(u),o(w);const A=s();h=A.x,m=A.y,l=Date.now(),(f<-n||f>n)&&(d=i*f,h+=d),(p<-n||p>n)&&(g=i*p,m+=g),w=r(N)}function N(){const A=Date.now()-l;let z=!1,ee=0,K=0;d&&(ee=-d*Math.exp(-A/c),ee>.5||ee<-.5?z=!0:ee=d=0),g&&(K=-g*Math.exp(-A/c),K>.5||K<-.5?z=!0:K=g=0),z&&(e(h+ee,m+K),w=r(N))}}function ca(){return typeof cancelAnimationFrame=="function"?cancelAnimationFrame:clearTimeout}function ua(){return typeof requestAnimationFrame=="function"?requestAnimationFrame:function(s){return setTimeout(s,16)}}const fa=.2;function ha(s,e){const t=ra(s),n=t.getOwner(),i={x:0,y:0};let o=!1;const r={x:0,y:0,scale:1},a=typeof e.pinchSpeed=="number"?e.pinchSpeed:1,l=e.bounds,c=typeof e.maxZoom=="number"?e.maxZoom:Number.POSITIVE_INFINITY,u=typeof e.minZoom=="number"?e.minZoom:0,f=typeof e.boundsPadding=="number"?e.boundsPadding:.05,h=typeof e.zoomSpeed=="number"?e.zoomSpeed:fa;let d=Js(e.transformOrigin);da(l);let p,m=!1,g=!1,w,x,_;const k=aa(Ji,no,e.smoothScroll);let C,N=!1;_n();const A={dispose:so,moveBy:gn,moveTo:xt,smoothMoveTo:to,centerOn:eo,zoomTo:nt,zoomAbs:yn,pause:oe,resume:q,isPaused:te,getTransform:Ie,setTransform:se,getTransformOrigin:kt,setTransformOrigin:St},z=typeof e.initialX=="number"?e.initialX:r.x,ee=typeof e.initialY=="number"?e.initialY:r.y,K=typeof e.initialZoom=="number"?e.initialZoom:r.scale;return(z!=r.x||ee!=r.y||K!=r.scale)&&yn(z,ee,K),A;function oe(){bn(),N=!0}function q(){N&&(_n(),N=!1)}function te(){return N}function B(L,E){return i.x=L,i.y=E,i}function se(L,E,I){r.x=L,r.y=E,r.scale=I,Qe()}function Ie(){return r}function kt(){return d}function St(L){d=Js(L)}function Ji(){return{x:r.x,y:r.y}}function xt(L,E){r.x=L,r.y=E,Mt(),Qe()}function gn(L,E){xt(r.x+L,r.y+E)}function Mt(){const L=Zi();if(!L)return;let E=!1;const I=Ki();let W=L.left-I.right;return W>0&&(r.x+=W,E=!0),W=L.right-I.left,W<0&&(r.x+=W,E=!0),W=L.top-I.bottom,W>0&&(r.y+=W,E=!0),W=L.bottom-I.top,W<0&&(r.y+=W,E=!0),E}function Zi(){if(!!l){if(typeof l=="boolean"){const L=n.getBoundingClientRect(),E=L.width,I=L.height;return{left:E*f,top:I*f,right:E*(1-f),bottom:I*(1-f)}}return l}}function Ki(){const L=t.getBBox(),E=Qi(L.left,L.top);return{left:E.x,top:E.y,right:L.width*r.scale+E.x,bottom:L.height*r.scale+E.y}}function Qi(L,E){return{x:L*r.scale+r.x,y:E*r.scale+r.y}}function Qe(){o=!0,p=window.requestAnimationFrame(io)}function wn(L,E,I){if(Jt(L)||Jt(E)||Jt(I))throw new Error("zoom requires valid numbers");const W=r.scale*I;if(W<u){if(r.scale===u)return;I=u/r.scale}if(W>c){if(r.scale===c)return;I=c/r.scale}const he=B(L,E);r.x=he.x-I*(he.x-r.x),r.y=he.y-I*(he.y-r.y),l&&f===1&&u===1?(r.scale*=I,Mt()):Mt()||(r.scale*=I),Qe()}function yn(L,E,I){const W=I/r.scale;wn(L,E,W)}function eo(L){const E=L.ownerSVGElement;if(!E)throw new Error("ui element is required to be within the scene");const I=L.getBoundingClientRect(),W=I.left+I.width/2,he=I.top+I.height/2,$e=E.getBoundingClientRect(),st=$e.width/2-W,it=$e.height/2-he;et(st,it)}function to(L,E){et(L-r.x,E-r.y)}function et(L,E){return gn(L,E)}function no(L,E){xt(L,E)}function so(){bn()}function _n(){n.addEventListener("mousedown",Nn,{passive:!0}),n.addEventListener("dblclick",Pn,{passive:!1}),n.addEventListener("touchstart",Sn,{passive:!0}),n.addEventListener("keydown",kn),n.addEventListener("wheel",Cn,{passive:!0}),Qe()}function bn(){n.removeEventListener("wheel",Cn),n.removeEventListener("mousedown",Nn),n.removeEventListener("keydown",kn),n.removeEventListener("dblclick",Pn),n.removeEventListener("touchstart",Sn),p&&(window.cancelAnimationFrame(p),p=0),k.cancel(),En(),uo(),In()}function io(){o&&oo()}function oo(){o=!1,t.applyTransform(r),p=0,e.onTransform&&e.onTransform(r)}function kn(L){let E=0;if(L.keyCode===38||L.keyCode===40||L.keyCode===37||L.keyCode===39||(L.keyCode===189||L.keyCode===109?E=1:(L.keyCode===187||L.keyCode===107)&&(E=-1)),E){const I=Tn(E*100),W=d?$t():ro();nt(W.x,W.y,I)}}function ro(){const L=n.getBoundingClientRect();return{x:L.width/2,y:L.height/2}}function Sn(L){if(lo(L),L.touches.length===1)return co(L);L.touches.length===2&&(_=$n(L.touches[0],L.touches[1]),C=!0,xn())}function lo(L){L.stopPropagation(),L.preventDefault()}function ao(L){L.preventDefault(),L.stopPropagation()}function co(L){const E=L.touches[0],I=je(E),W=B(I.x,I.y);w=W.x,x=W.y,k.cancel(),xn()}function xn(){m||(m=!0,document.addEventListener("touchmove",Mn),document.addEventListener("touchend",tt),document.addEventListener("touchcancel",tt))}function Mn(L){if(L.touches.length===1){L.stopPropagation();const E=L.touches[0],I=je(E),W=B(I.x,I.y),he=W.x-w,$e=W.y-x;he!==0&&$e!==0&&On(),w=W.x,x=W.y,et(he,$e)}else if(L.touches.length===2){C=!0;const E=L.touches[0],I=L.touches[1],W=$n(E,I),he=1+(W/_-1)*a,$e=je(E),st=je(I);if(w=($e.x+st.x)/2,x=($e.y+st.y)/2,d){const it=$t();w=it.x,x=it.y}nt(w,x,he),_=W,L.stopPropagation(),L.preventDefault()}}function tt(L){if(L.touches.length>0){const E=je(L.touches[0]),I=B(E.x,E.y);w=I.x,x=I.y}}function $n(L,E){const I=L.clientX-E.clientX,W=L.clientY-E.clientY;return Math.sqrt(I*I+W*W)}function Pn(L){ao(L)}function Nn(L){if(m)return L.stopPropagation(),!1;if(L.target!==n&&L.target!==s||!(L.button===1&&window.event!==null||L.button===0))return;k.cancel();const I=je(L),W=B(I.x,I.y);return w=W.x,x=W.y,document.addEventListener("mousemove",Ln),document.addEventListener("mouseup",jn),!1}function Ln(L){if(m||L.ctrlKey)return;On();const E=je(L),I=B(E.x,E.y),W=I.x-w,he=I.y-x;w=I.x,x=I.y,et(W,he)}function jn(){In(),En()}function En(){document.removeEventListener("mousemove",Ln),document.removeEventListener("mouseup",jn),g=!1}function uo(){document.removeEventListener("touchmove",Mn),document.removeEventListener("touchend",tt),document.removeEventListener("touchcancel",tt),g=!1,C=!1,m=!1}function Cn(L){k.cancel();let E=L.deltaY;L.deltaMode>0&&(E*=100);const I=Tn(E);if(I!==1){const W=d?$t():je(L);nt(W.x,W.y,I)}}function je(L){const E=n.getBoundingClientRect(),I=L.clientX-E.left,W=L.clientY-E.top;return{x:I,y:W}}function $t(){const L=n.getBoundingClientRect();return{x:L.width*d.x,y:L.height*d.y}}function nt(L,E,I){return k.cancel(),wn(L,E,I)}function Tn(L){const E=Math.sign(L),I=Math.min(.25,Math.abs(h*L/128));return 1-E*I}function On(){g||(g=!0,k.start())}function In(){g&&(C||k.stop())}}function Js(s){if(!!s){if(typeof s=="object")return(!ze(s.x)||!ze(s.y))&&Zs(),s;Zs()}}function Zs(s){throw new Error(["Cannot parse transform origin.","Some good examples:",'  "center center" can be achieved with {x: 0.5, y: 0.5}','  "top center" can be achieved with {x: 0.5, y: 0}','  "bottom right" can be achieved with {x: 1, y: 1}'].join(`
`))}function da(s){const e=typeof s;if(e==="undefined"||e==="boolean")return;if(!(ze(s.left)&&ze(s.top)&&ze(s.bottom)&&ze(s.right)))throw new Error("Bounds object is not valid. It can be: undefined, boolean (true|false) or an object {left, top, right, bottom}")}function ze(s){return Number.isFinite(s)}function Jt(s){return Number.isNaN?Number.isNaN(s):s!==s}function pa(s,e){const t=s.x2<e.x1,n=s.x1>e.x2,i=s.y1>e.y2,o=s.y2<e.y1;return!(t||n||i||o)}var ma=(s,e)=>e.type.includes(s.type)||e.type.includes("*");class va{constructor(e,{input:t,output:n}){if(!n||!t)return;if(this.system=e,t.node.getChildren().includes(n.node))throw new Error("Circular reference");if(!ma(n,t))throw new Error("Can't connect type "+t.type+" to "+n.type);this.output=n,this.input=t,e.options.view&&(this.view=new oa(this)),this.output.setConnection(this),this.input.setConnection(this),this.output.node.system.save()}joinNode(e){if(!this.isNodeJoinable(e))return;this.remove(),this.output.node.connectTo(e,0,e.getInputs()[0].key);const t=this.input.node.getInputs(),n=t.indexOf(this.input),i=t[n].key;e.connectTo(this.input.node,0,i)}isNodeJoinable(e){const t=this.input.type,n=this.output.type;if(this.input.node===e||this.output.node===e)return!1;const i=e.getInputs();if(!i.length||!i.find(r=>r.type.includes(n)))return!1;const o=e.outputs;return!(!o.length||!o.find(r=>t.includes(r.type)||t.includes("*")))}remove(){this.view&&this.view.remove(),this.input.removeConnection(),this.output.removeConnection(this)}deserialize(){return{id:this.input.node.attributes.id,out:this.indexOut,in:this.indexIn}}get indexOut(){return this.output.node.outputs.indexOf(this.output)}get indexIn(){return this.input.key}}class Zt extends ye{constructor(e,t){super();this.outputs=[],this._state={},this.states={},this.inputData=[],this.enableUpdates=!0,this.refs=[],this.system=e;const{attributes:n,state:i={}}=t;this._state=i,this.attributes=n,this.id=n.id,this._compute=Dr((o=this._state)=>this.compute(o))}get state(){return this._state}bindView(e){this.view=e,this.outputs.forEach(t=>t.bindView()),Object.values(this.states).forEach(t=>t.bindView())}setAttributes(e){this.attributes=Q(Q({},this.attributes),e),this.save()}compute(e){return e}getChildren(){return this.outputs.map(n=>n.connections).flat().map(n=>n.input.node)}getSockets(){return[...this.getInputs(),...this.outputs]}getInputs(){return Object.values(this.states).map(e=>e.getInput()).filter(e=>!!e)}setStateValue(e,t){this.states[e].setValue(t)}getStateValue(e){return this.state[e]}update(){!this.enableUpdates||(this.computedData=this._compute(this.state),this.emit("computedData",this.computedData),this.refs.forEach(e=>{e.node.enableUpdates=!1,e.keyIn.forEach(t=>{e.node.setStateValue(t,this.computedData)}),e.node.enableUpdates=!0,e.node.update()}),this.save())}remove(){this.system.removeNode(this),this.destroyEventEmitter()}connectTo(e,t=0,n=e.getInputs()[0].key){var l,c,u;const i=this.outputs[t],o=(l=e.states[n])==null?void 0:l.getInput();if(!o)return;const r=new va(this.system,{output:i,input:o});(c=i==null?void 0:i.view)==null||c.updatePosition(),(u=o==null?void 0:o.view)==null||u.updatePosition();const a=this.refs.find(f=>f.node.id===e.id&&f.indexOut===t);return a?a.keyIn=[...a.keyIn,n]:this.refs.push({node:e,keyIn:[n],indexOut:t}),this.update(),r}disconnectFrom(e,t,n){this.refs=this.refs.filter(i=>!(i.indexOut!==n||(i.keyIn.splice(i.keyIn.indexOf(t),1),i.keyIn.length===0))),this.update()}deserialize(){const e=Object.assign({},this.attributes);e.refs=this.outputs.map(n=>n.connections).flat().map(n=>n.deserialize());const t={};return Object.values(this.states).forEach(n=>{t[n.key]=n.getValue()}),Object.assign({},{attributes:e,state:t})}save(){this.system.save()}}var ga={title:"Boolean",type:"boolean",outputs:["boolean"],parameters:{value:{type:"boolean",defaultValue:!1}},compute({value:s=!1}){return s}};const wa={title:"Math",type:"math",outputs:["number","number"],parameters:{mode:{type:"whatever",internal:!0,inputType:"selection",label:!1,defaultValue:"add",values:["add","multiply","subtract"]},a:{type:"number",defaultValue:0,label:!1},b:{type:"number",defaultValue:0,label:!1}},compute({mode:s,a:e,b:t}){switch(s){case"multiply":return e*t;case"subtract":return e-t;default:return e+t}}};var ya={title:"Number",type:"number",outputs:["number"],parameters:{value:{type:"number",internal:!0,label:!1,defaultValue:0}},compute({value:s=0}){return s}};class _a{constructor(e){this.nodeState=e,this.wrapper=document.createElement("div"),this.input=document.createElement("div"),this.wrapper.classList.add("node-state-single-wrapper"),this.input.classList.add("node-state-input");const t=e.template,n=t.label||e.key;if(typeof n=="string"){const i=document.createElement("p");i.className="state-label",i.innerHTML=n,this.wrapper.appendChild(i)}if((t==null?void 0:t.label)===!1&&this.wrapper.classList.add("hide-label"),!t.external){const i=Ml({target:this.input,template:t,value:e.getValue()});i&&i.$on("change",({detail:o})=>{typeof o!="undefined"&&!Number.isNaN(o)&&this.nodeState.setValue(o)})}e.node.view.stateWrapper.appendChild(this.wrapper),this.wrapper.appendChild(this.input)}updatePosition(){var e,t;this.rect=this.wrapper.getBoundingClientRect(),(t=(e=this.nodeState.getInput())==null?void 0:e.view)==null||t.updatePosition()}get y(){return this.rect.y-this.nodeState.node.view.y}get height(){return this.rect.height}setActive(e){this.wrapper.classList[e?"remove":"add"]("disabled")}}class ba{constructor(e){if(!e||!e.node)throw new Error("Somethings missing");this.input=e,this.node=e.node,this.wrapper=document.createElement("div"),this.wrapper.classList.add("node-input-wrapper"),e.type.forEach(t=>{this.wrapper.classList.add(`socket-type-${t==="*"?"all":t}`)}),e.state.view.wrapper.appendChild(this.wrapper),this.wrapper.addEventListener("mousedown",t=>{t.stopPropagation(),t.preventDefault();const n=this.input.connection;n?(n.remove(),this.node.system.view.createFloatingConnection(n.output)):this.node.system.view.createFloatingConnection(this.input)},!1),this.node.system.view.colorStore.on(e.type[0],t=>{const n=window.getComputedStyle(this.wrapper,null).getPropertyValue("background-color");this.wrapper.style.backgroundColor=n!=="rgba(0, 0, 0, 0)"?n:t})}updatePosition(){var e;this.rect=this.wrapper.getBoundingClientRect(),(e=this==null?void 0:this.connection)==null||e.setPosition({x2:this.x,y2:this.y})}remove(){this.wrapper.remove(),this.connection&&this.connection.remove()}set state(e){this.wrapper.classList.forEach(t=>{t.includes("socket-state-")&&this.wrapper.classList.remove(t)}),e&&e.length&&this.wrapper.classList.add("socket-state-"+e)}get x(){return this.node.view.x-3}get y(){const e=this.node.system.view;return(this.rect.y+this.rect.height/2-e.y-e.top)/e.s-e.height/2}}class Be{constructor(e,t,n){this.state=e,this.key=n,this.node=e.node,this.type=Array.isArray(t)?t:[t]}bindView(){this.view=new ba(this)}removeConnection(){const e=this.connection;delete this.connection,e&&e.remove(),this.node.setStateValue(this.key,void 0),this.state.setIsExternal(!1)}setConnection(e){this.connection&&this.connection.remove(),this.connection=e,this.view&&(this.view.connection=e.view),this.state.setIsExternal(!0)}remove(){this.view&&this.view.remove(),this.removeConnection()}}class Kt extends ye{constructor(e,t,n){super();var i,o;this.node=e,this.key=t,this.template=n,this.isExternal=!1,this.value=(o=(i=e.state[t])!=null?i:n.defaultValue)!=null?o:n.value,this.node._state[t]=this.value,this.template.internal||(this.input=new Be(this,n.type,t))}setIsExternal(e=!1){var t;this.isExternal=e,(t=this==null?void 0:this.view)==null||t.setActive(!e)}getValue(){return this.value}setValue(e){this.isExternal||(this.value=e),this.node._state[this.key]=e,this.node.update()}remove(){}getInput(){return this.input}bindView(){this.view=new _a(this),this.input&&this.input.bindView()}}class Qt{constructor(e){this.inputs=[],this.outputs=[],this.active=!1,this.x=0,this.y=0,this.downX=0,this.downY=0,this.mDownX=0,this.mDownY=0,this.height=50,this.width=91,this.node=e,this.system=e.system,this.wrapper=document.createElement("div"),this.wrapper.style.minHeight=this.height+"px",this.wrapper.style.minWidth=this.width+"px",this.wrapper.classList.add("node-wrapper","node-type-"+e.attributes.type.toLowerCase()),this.wrapper.setAttribute("id","node-view-"+this.system.id+"-"+this.node.id),this.outputWrapper=document.createElement("div"),this.outputWrapper.classList.add("node-outputs-wrapper"),this.wrapper.append(this.outputWrapper);const t=document.createElement("p");t.innerHTML=e.attributes.name||e.attributes.type,t.classList.add("node-title"),this.wrapper.appendChild(t),this.stateWrapper=document.createElement("div"),this.stateWrapper.classList.add("node-state-wrapper"),this.wrapper.append(this.stateWrapper),e.system.view.nodeContainer.append(this.wrapper);const{pos:{x:n=0,y:i=0}={}}=e.attributes;this.bindEventListeners(),setTimeout(()=>{const{width:o,height:r}=this.wrapper.getBoundingClientRect();this.width=o/this.system.view.s,this.height=r/this.system.view.s,this.setPosition(n,i)},100)}bindEventListeners(){this.wrapper.addEventListener("mousedown",e=>this.handleMouseDown(e)),this._unsubscribeMouseMove=this.system.view.on("mousemove",e=>this.handleMouseMove(e)),this._unsubscribeMouseUp=this.system.view.on("mouseup",()=>this.handleMouseUp())}removeEventListeners(){this._unsubscribeMouseMove(),this._unsubscribeMouseUp(),this.wrapper.addEventListener("mousedown",e=>this.handleMouseDown(e))}set state(e){this.wrapper.classList.remove("node-active","node-selected","node-dragging"),this.wrapper.classList.add("node-"+e),this._state=e}get state(){return this._state}handleMouseDown(e){var i,o,r,a;if(this.system.view.keyMap.space||e.button===2||e.target!==e.currentTarget)return;e.stopImmediatePropagation(),e.stopPropagation(),this.node.system.view.setActive(this.node,e);const{rmx:t,rmy:n}=this.system.view;this.mDownX=t,this.mDownY=n,this.downX=((o=(i=this.node.attributes)==null?void 0:i.pos)==null?void 0:o.x)||0,this.downY=((a=(r=this.node.attributes)==null?void 0:r.pos)==null?void 0:a.y)||0,this.active=!0,this.system.view.selectedNodes.length&&this.system.view.selectedNodes.forEach(l=>{l.view.active=!0,l.view.mDownX=t,l.view.mDownY=n,l.view.downX=l.view.x,l.view.downY=l.view.y})}handleMouseUp(){this.active=!1,this.hoveredConnection&&(this.hoveredConnection.connection.joinNode(this.node),delete this.hoveredConnection)}handleMouseMove({mx:e,my:t,keys:n}){if(this.active){this.state="dragging";const i=n.ctrlKey?.02:1;let o=this.mDownX-e,r=this.mDownY-t;n.shiftKey&&(Math.abs(o)>Math.abs(r)?r=0:o=0);const a=Math.round((this.downX-o/this.system.view.s)*i)/i,l=Math.round((this.downY-r/this.system.view.s)*i)/i;this.setPosition(a,l)}}setPosition(e,t){this.x=e,this.y=t,this.wrapper.style.left=e+"px",this.wrapper.style.top=t+"px",Object.values(this.node.states).forEach(n=>{var i;return(i=n==null?void 0:n.view)==null?void 0:i.updatePosition()}),this.node.outputs.forEach(n=>n.view.updatePosition()),this.node.setAttributes({pos:{x:e,y:t}})}remove(){this.removeEventListeners(),this.wrapper.remove()}}class ka extends Zt{constructor(e,t){super(e,t);this.states={input:new Kt(this,"input",{type:"*"})},this.outputs=[]}compute({input:e}){return e}}class Sa extends Qt{constructor(e){super(e);const t=document.createElement("div");e.on("computedData",n=>{t.innerHTML="";const i=document.createElement("p");i.innerHTML=JSON.stringify(n,null," "),t.append(i)}),this.wrapper.appendChild(t)}}var xa={title:"Debug",meta:{description:"Outputs any inputs for debug purposes"},node:ka,view:Sa};class Ma extends Zt{constructor(e,t){super(e,t);this.states={input:new Kt(this,"input",{type:"*",external:!0,label:!1})},this.outputs=[]}compute({input:e}){return e}}class $a extends Qt{constructor(e){super(e);const t=document.createElement("p");t.style.margin="0px",t.style.padding="4px",t.style.color="white",t.style.fontWeight="bold",e.on("computedData",n=>{t.innerHTML=JSON.stringify(n,null,2)}),this.wrapper.appendChild(t)}}var Pa={title:"Output",meta:{description:"Outputs the final value"},node:Ma,view:$a};const en={BooleanNode:ga,MathNode:wa,NumberNode:ya,DebugNode:xa,OutputNode:Pa};let tn=0;class nn{constructor(e,t="system"in e?e.system.log.level:2){this.isGrouped=!1,this.output=ue("logger"),this.module=e,this.name=e.constructor.name,this.length=this.name.length,tn=Math.max(tn,this.length),this.level=t,this.output=ue(this.getModuleName())}getModuleName(){return this.isGrouped?"":`${this.name.padEnd(tn," ")}`}handle(e,t,n){n&&n.length?(console.groupCollapsed(`${this.getModuleName()} ${t}`),e(...n),console.groupEnd()):e(`${this.getModuleName()} ${t}`)}info(e,...t){this.level>=3&&this.output(e,...t)}log(e,...t){this.level>=2&&this.output(e,...t)}warn(e,...t){this.level>=1&&this.output.warn(e,...t)}error(e,...t){this.level>=0&&(this.output.error(e),this.output(...t))}group(e){this.output.group(e),this.isGrouped=!0}groupEnd(){console.groupEnd(),this.isGrouped=!1}}class Na{constructor(e,t,n){this.children=[],this.menu=e,this.type=t,n&&this.children.push(...n),this.wrapper=document.createElement("div"),this.wrapper.classList.add("search-container");const i=document.createElement("p");i.innerHTML=this.type.title,this.wrapper.appendChild(i);const o=[t.title];this.type.meta&&(this.type.meta.description&&o.push(this.type.meta.description.split(" ").join(":")),this.type.meta.tags&&o.push(...this.type.meta.tags)),this.searchString=o.join(":").toLowerCase(),this.menu.wrapper.appendChild(this.wrapper)}show(){this.wrapper.style.display=""}hide(){this.wrapper.style.display="none"}blur(){this.wrapper.classList.remove("focused")}focus(){this.menu.activeContainer&&this.menu.activeContainer.blur(),this.menu.activeContainer=this,this.wrapper.classList.add("focused")}showIfSearch(e){return this.searchString.includes(e.toLowerCase())?(this.show(),!0):(this.hide(),!1)}destroy(){this.wrapper.remove()}}class La{constructor(e){this.x=0,this.y=0,this.visible=!1,this.possibleContainers=[],this.filteredContainers=[],this.containers=[],this.view=e,this.system=e.system,this.log=new nn(this),this.wrapper=document.createElement("div"),this.wrapper.classList.add("context-wrapper"),this.searchInput=document.createElement("input"),this.searchInput.type="text",this.searchInput.placeholder="Search",this.wrapper.appendChild(this.searchInput),this.view.wrapper.append(this.wrapper),this.bindEventListeners(),this.view.on("keydown",({key:t})=>t==="Escape"&&this.hide())}updateTypes(e){this.containers.forEach(t=>t.destroy()),this.containers.push(...e.map(t=>new Na(this,t)))}setActive(e){const{length:t}=this.filteredContainers;if(!t)return;const i=(((this.activeContainer?this.filteredContainers.indexOf(this.activeContainer):0)+e)%t+t)%t;this.filteredContainers[i].focus(),this.log.info(`Set active entry ${i}`)}bindEventListeners(){window.addEventListener("mousedown",e=>this.handleWindowClick(e)),this.view.system.store.on("types",e=>this.updateTypes(e),20),this.view.on("keydown",({key:e})=>{switch(e){case"escape":this.reject();break;case"arrowdown":this.setActive(1);break;case"arrowup":this.setActive(-1);break}}),this.searchInput.addEventListener("input",()=>{const{value:e=""}=this.searchInput;this.search(e)}),this.searchInput.addEventListener("keydown",({keyCode:e})=>{e===13&&this.activeContainer&&this.resolve()})}handleWindowClick(e){const t=e.composedPath();this.visible&&!t.includes(this.wrapper)&&this.reject()}search(e){if(e&&e.length){const t=this.possibleContainers.filter(n=>n.showIfSearch(e));t.length===0?(this.filteredContainers=[...this.possibleContainers],this.filteredContainers.forEach(n=>n.show())):(this.filteredContainers=[...t],t[0].focus()),this.log.info(`Found ${t.length} entries for search:${e}`)}else this.filteredContainers=[...this.possibleContainers],this.filteredContainers.forEach(t=>t.show())}reject(){this.rej&&this.rej(),this.hide()}resolve(){var r;const e=(r=this.activeContainer)==null?void 0:r.type,{x:t,y:n}=this.view.projectWindowToLocal(this.x,this.y),i=t-this.view.width/2,o=n-this.view.height/2;e?this.res({attributes:{pos:{x:i,y:o},id:"",name:e.title,type:e.title,refs:[]},state:{value:void 0}}):this.reject(),this.hide()}hide(){this.visible=!1,this.wrapper.classList.remove("context-visible"),this.wrapper.blur(),this.res=e=>e,this.reject=()=>{},this.searchInput.disabled=!0}show({x:e,y:t,socket:n}){return this.x=e,this.y=t,this.socket=n,this.visible=!0,this.wrapper.style.left=e+"px",this.wrapper.style.top=t+"px",setTimeout(()=>{this.searchInput.disabled=!1,this.wrapper.classList.add("context-visible"),this.searchInput.value="",this.searchInput.focus(),this.search()},10),this.containers.forEach(i=>i.hide()),this.possibleContainers=n?this.containers.filter(i=>{var o,r,a;if(n instanceof Be){const{type:l}=n;return!i.type.outputs||!i.type.outputs.length?!1:l.includes("*")?!0:(o=i.type.outputs)==null?void 0:o.some(c=>l.includes(c))}else{const{type:l}=n;return!i.type.inputs||!i.type.inputs.length?!1:l==="*"?!0:((r=i.type.inputs)==null?void 0:r.includes("*"))||((a=i.type.inputs)==null?void 0:a.includes(l))}}):this.containers,this.possibleContainers.forEach(i=>i.show()),this.possibleContainers.length&&this.possibleContainers[0].focus(),this.filteredContainers=[...this.possibleContainers],new Promise((i,o)=>{this.res=i,this.rej=o})}}class ja extends ye{constructor(e){super();this.mDownX=0,this.mDownY=0,this.downX=0,this.downY=0,this.isShiftKey=!1,this.view=e,this.wrapper=document.createElement("div"),this.wrapper.classList.add("box-selection-wrapper"),this.view.wrapper.append(this.wrapper),this.view.on("mousedown",({target:t,mx:n,x:i,my:o,y:r,keys:a})=>{var l;a.space||a.shiftKey||a.button===2||!a.ctrlKey||t&&!((l=t==null?void 0:t.className)==null?void 0:l.includes("nodesystem"))||(this.mDownX=n,this.mDownY=o,this.downX=i,this.downY=r,this.wrapper.style.left=n+"px",this.wrapper.style.top=o+"px",this.wrapper.style.width="0px",this.wrapper.style.height="0px",this.isShiftKey=a.shift,this.show())})}show(){this.wrapper.classList.add("box-selection-visible");const e=this.view.system.nodes.map(i=>{const{width:o,height:r}=i.view,{x:a,y:l}=i.view,c=a+this.view.width/2,u=l+this.view.height/2,f=c+o,h=u+r;return{n:i,state:i.view.state,x1:c,y1:u,x2:f,y2:h}});let t=[];const n=this.view.on("mousemove",({mx:i,my:o,x:r,y:a})=>{const{mDownX:l,mDownY:c,downX:u,downY:f,isShiftKey:h}=this,d={x1:Math.min(i,l),x2:Math.max(i,l),y1:Math.min(o,c),y2:Math.max(o,c)};this.wrapper.style.left=d.x1+"px",this.wrapper.style.top=d.y1+"px",this.wrapper.style.width=Math.abs(l-i)+"px",this.wrapper.style.height=Math.abs(c-o)+"px";const p={x1:Math.min(r,u),x2:Math.max(r,u),y1:Math.min(a,f),y2:Math.max(a,f)};t=e.filter(m=>pa(p,m)?!0:(h||(m.state="normal",m.n.view.state="normal"),!1)).map(({n:m,state:g})=>(g!=="active"&&(g="selected",m.view.state="selected"),m))},5);this.view.once("mouseup",()=>{n(),this.hide(),this.emit("selection",t)})}projectBox(e){const{x:t,y:n}=this.view.projectWindowToLocal(e.x1,e.y1),{x:i,y:o}=this.view.projectWindowToLocal(e.x2,e.y2);return{x1:t,y1:n,x2:i,y2:o}}hide(){this.wrapper.classList.remove("box-selection-visible")}}class Ea{constructor(e){this.connections=[],this.output=e,this.node=e.node,this.wrapper=document.createElement("div"),this.wrapper.classList.add("node-output-wrapper"),this.wrapper.classList.add(`socket-type-${e.type}`),e.node.view.outputWrapper.appendChild(this.wrapper),this.wrapper.addEventListener("mousedown",t=>{t.stopPropagation(),t.preventDefault(),this.node.system.view.createFloatingConnection(this.output)},!1),this.node.system.view.colorStore.on(e.type,t=>{const n=window.getComputedStyle(this.wrapper,null).getPropertyValue("background-color");this.wrapper.style.backgroundColor=n!=="rgba(0, 0, 0, 0)"&&n!=="rgb(0,0,0)"?n:t})}remove(){this.wrapper.remove(),this.connections.forEach(e=>e.remove())}set state(e){this.wrapper.classList.forEach(t=>{t.includes("socket-state-")&&this.wrapper.classList.remove(t)}),e&&e.length&&this.wrapper.classList.add("socket-state-"+e)}updatePosition(){this.rect=this.wrapper.getBoundingClientRect(),this.output.connections.forEach(e=>e.view.setPosition({x1:this.x,y1:this.y}))}get x(){return this.node.view.x+this.node.view.width+3}get y(){const e=this.node.system.view;return(this.rect.y+this.rect.height/2-e.y-e.top)/e.s-e.height/2}}class wt{constructor(e,t){if(this.connections=[],this.node=e,this.type=t,Array.isArray(t))throw new Error("Output can only output one type, not "+t)}bindView(){this.view=new Ea(this)}connectTo(e){const t=this.node.outputs.indexOf(this);return this.node.connectTo(e.node,t,e.key)}removeConnection(e){const t=this.connections.indexOf(e);this.connections.splice(t,1),this.node.disconnectFrom(e.input.node,e.indexIn,e.indexOut),this.view&&this.view.connections.splice(t,1)}setConnection(e){this.connections.push(e),this.view&&this.view.connections.push(e.view)}remove(){this.connections.forEach(e=>e.remove())}}class Ca extends $r(Xs,ye){constructor(e,t={}){const{system:n}=e.node;super({},e);this.view=n.view,this.path.style.zIndex="999";const i=Array.isArray(e.type)?e.type[0]:e.type;n.view.colorStore.on(i,f=>{this.path.style.stroke=f}),e.view.updatePosition();const o=e.view.x,r=e.view.y;let a=o,l=r;t&&(a=t.x-n.view.width/2,l=t.y-n.view.height/2),this.setPosition({x1:o,y1:r,x2:a,y2:l}),this.dx2=this.x2,this.dy2=this.y2,this.isInput=e instanceof Be,this.allSockets=e instanceof Be?n.getOutputs(e.type):n.getInputs(e.type),this.allSockets.forEach(f=>f.view.state="potential");let c=this.allSockets.filter(f=>f.node.attributes.id!==e.node.attributes.id);c.forEach(f=>f.view.state="middle");const u="connection"in e?[e.connection]:e.connections;if(u&&!!u.length){const f=u.map(h=>[h.input,h.output]).flat();c=c.filter(h=>!f.includes(h))}this.potentialSockets=c,this.potentialSockets.forEach(f=>f.view.updatePosition()),this.potentialSockets.forEach(f=>f.view.state="highlight"),this._unsubMouseUp=this.view.on("mouseup",this.handleMouseUp.bind(this)),this._unsubMouseMove=this.view.on("mousemove",this.handleMouseMove.bind(this)),this.mdx=this.view.mx,this.mdy=this.view.my,this.socket=e}handleMouseUp(e){const{x:t,y:n,keys:i}=e;this._unsubMouseUp(),this._unsubMouseMove(),this.allSockets.forEach(a=>a.view.state="");let o,r=0;this.socket instanceof Be&&this.hoveredSocket instanceof wt?(o=this.socket.key,r=this.hoveredSocket.node.outputs.indexOf(this.hoveredSocket)):this.socket instanceof wt&&this.hoveredSocket instanceof Be&&(o=this.hoveredSocket.key,r=this.socket.node.outputs.indexOf(this.socket)),this.hoveredSocket?(this.emit("connection",{keyIn:o,indexOut:r,inputNode:this.isInput?this.socket.node:this.hoveredSocket.node,outputNode:this.isInput?this.hoveredSocket.node:this.socket.node}),this.remove()):i.ctrlKey?this.view.addMenu.show({x:t,y:n,socket:this.socket}).then(a=>this.view.system.createNode(a)).then(a=>{this.socket instanceof wt?this.socket.node.connectTo(a,r,o):a.connectTo(this.socket.node,r,o)}).catch(()=>{}).finally(()=>{this.remove()}):this.remove()}handleMouseMove(e){const{x:t,y:n}=e;this.mdx||(this.mdx=t,this.mdy=n);const i=this.dx2+(t-this.mdx),o=this.dy2+(n-this.mdy),r=20,a=this.potentialSockets.map(l=>{const{x:c,y:u}=l.view;return{socket:l,distance:Math.abs(i-c)+Math.abs(o-u)}}).filter(l=>l.distance<r).sort((l,c)=>l.distance>c.distance?-1:1).map(l=>l.socket);if(a.length){const{x:l,y:c}=a[0].view;this.hoveredSocket=a[0],this.setPosition({x2:l,y2:c})}else this.hoveredSocket=void 0,this.setPosition({x2:i,y2:o})}remove(){super.remove()}}const Ta=[{color:"#a52a2a",name:"brown"},{color:"#008000",name:"green"},{color:"#4b0082",name:"indigo"},{color:"#f0e68c",name:"khaki"},{color:"#add8e6",name:"lightblue"},{color:"#e0ffff",name:"lightcyan"},{color:"#90ee90",name:"lightgreen"},{color:"#d3d3d3",name:"lightgrey"},{color:"#ffb6c1",name:"lightpink"},{color:"#ffffe0",name:"lightyellow"},{color:"#00ff00",name:"lime"},{color:"#ff00ff",name:"magenta"},{color:"#800000",name:"maroon"},{color:"#000080",name:"navy"},{color:"#808000",name:"olive"},{color:"#ffa500",name:"orange"},{color:"#ffc0cb",name:"pink"},{color:"#800080",name:"purple"},{color:"#800080",name:"violet"},{color:"#ff0000",name:"red"},{color:"#c0c0c0",name:"silver"},{color:"#ffffff",name:"white"}];class Oa extends ye{constructor(){super();this.colors={boolean:"#f00",number:"#fff",plant:"#65e2a0",vec3:"#6363C7"},this.index=0}setType(e){e in this.colors||(this.colors[e]=Ta[this.index].color,this.index++),this.emit(e,this.colors[e])}on(e,t){return this.setType(e),t(this.colors[e]),super.on(e,t)}}class Ia extends ye{constructor(e){super();var t,n,i,o;this.colorStore=new Oa,this.width=0,this.height=0,this.top=0,this.left=0,this.x=window.innerWidth/2,this.y=window.innerHeight/2,this.s=1,this.mx=0,this.my=0,this.mdx=0,this.mdy=0,this.rmx=0,this.rmy=0,this.mouseDown=!1,this.keyMap={},this.selectedNodes=[],this.selectedNodesDown=[],this.clipboard=[],this.system=e,this.wrapper=(n=(t=e.options)==null?void 0:t.wrapper)!=null?n:document.createElement("div"),this.wrapper.classList.add("nodesystem-wrapper"),e.options.parent&&e.options.parent.appendChild(this.wrapper),this.transformWrapper=document.createElement("div"),this.transformWrapper.classList.add("nodesystem-transform"),this.wrapper.appendChild(this.transformWrapper),this.nodeContainer=document.createElement("div"),this.nodeContainer.classList.add("nodes-container"),this.transformWrapper.append(this.nodeContainer),this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("viewBox","0 0 1 1"),this.svg.setAttribute("height","1"),this.svg.setAttribute("width","1"),this.svg.setAttribute("preserveAspectRatio","none"),this.svg.style.transform=`scale(${(i=window.devicePixelRatio)!=null?i:1})`,this.transformWrapper.appendChild(this.svg),this.addMenu=new La(this),this.boxSelection=new ja(this),this.boxSelection.on("selection",r=>{this.selectedNodes=r}),this.dpr=(o=window.devicePixelRatio)!=null?o:1,this.bindEventListeners(),this.handleResize(),setTimeout(()=>{this.setTransform({x:0,y:0,s:1})},1)}createFloatingConnection(e){new Ca(e,{x:this.mx,y:this.my}).once("connection",({inputNode:n,outputNode:i,keyIn:o,indexOut:r})=>{i.connectTo(n,r,o)})}setActive(e,{shiftKey:t=!1,ctrlKey:n=!1}={}){if(!e)this.activeNode&&(this.activeNode.view.state="normal",this.activeNode=void 0),this.selectedNodes.forEach(i=>i.view.state="normal"),this.selectedNodes=[];else if(t&&n){if(this.activeNode&&(this.activeNode.view.state="normal",this.activeNode=void 0),this.activeNode=e,this.activeNode.view.state="active",this.activeNode.outputs.length){const i=this.system.createNode({state:{},attributes:{type:"debug",id:"0",name:"debug",refs:[],pos:{x:this.activeNode.view.x+this.activeNode.view.width+10,y:this.activeNode.view.y}}});i.enableUpdates=!0,this.activeNode.connectTo(i,0,"input")}}else t?this.activeNode?(this.selectedNodes.push(this.activeNode),this.activeNode.view.state="selected",this.activeNode=e,this.activeNode.view.state="active"):(this.activeNode=e,this.activeNode.view.state="active"):this.activeNode?(this.selectedNodes.forEach(i=>i.view.state="normal"),this.selectedNodes=[],this.activeNode!==e&&(this.activeNode.view.state="normal",this.activeNode=e,this.activeNode.view.state="active")):(this.activeNode=e,this.activeNode.view.state="active")}getSelectedNodes(){return this.activeNode&&this.selectedNodes.includes(this.activeNode)?this.selectedNodes:this.activeNode?[...this.selectedNodes,this.activeNode]:[...this.selectedNodes]}projectLocalToWindow(e,t){const n=e+this.x,i=t+this.y,o=n*this.s,r=i*this.s;return{x:o,y:r}}projectWindowToLocal(e,t){const n=e-this.x,i=t-this.y,o=n/this.s,r=i/this.s;return{x:o,y:r}}setTransform({x:e=this.x,y:t=this.y,s:n=this.s}={}){this.x=e,this.y=t,this.s=n/this.dpr,this.panzoom.setTransform(e,t,n/this.dpr)}bindEventListeners(){window.addEventListener("keydown",e=>this.handleKeyDown(e)),window.addEventListener("keyup",e=>this.handleKeyUp(e)),this.wrapper.addEventListener("mousemove",e=>this.handleMouseMove(e)),this.wrapper.addEventListener("mousedown",e=>this.handleMouseDown(e)),this.wrapper.addEventListener("touchdown",e=>this.handleMouseDown(e)),this.wrapper.addEventListener("mouseup",e=>this.handleMouseUp(e)),window.addEventListener("resize",pt(()=>this.handleResize(),10)),this.panzoom=ha(this.transformWrapper,{minZoom:.2,maxZoom:5,onTransform:({x:e,y:t,scale:n})=>{this.x=e,this.y=t,this.s=n,this.wrapper.style.backgroundPosition=`${e}px ${t}px`,this.wrapper.style.backgroundSize=n*this.height*.02+"% "+n*this.width*.02+"%",this.wrapper.style.backgroundOrigin=`${e}px ${t}px`,window.t={x:e,y:t,s:n},this.system.setMetaData({transform:{x:e,y:t,s:n}})}})}handleResize(){const{width:e,height:t,top:n,left:i}=this.wrapper.getBoundingClientRect();this.width=e,this.height=t,this.top=n,this.left=i,this.emit("resize",{width:e,height:t})}handleMouseMove(e){this.ev=e;const{clientX:t,clientY:n,shiftKey:i,ctrlKey:o}=e;this.rmx=t-this.left,this.rmy=n-this.top;const{x:r,y:a}=this.projectWindowToLocal(this.rmx,this.rmy);this.mx=r,this.my=a,this.emit("mousemove",{x:r,y:a,mx:this.rmx,my:this.rmy,keys:_e(Q({},this.keyMap),{shiftKey:i,ctrlKey:o})})}handleMouseDown(e){const{shiftKey:t,ctrlKey:n,clientX:i,clientY:o,button:r,target:a}=e;t||this.setActive(),this.mouseDown=!0,this.rmx=i-this.left,this.rmy=o-this.top;const{x:l,y:c}=this.projectWindowToLocal(this.rmx,this.rmy);this.mx=l,this.my=c,this.selectedNodesDown=this.selectedNodes.map(u=>[u.view.x,u.view.y]),this.emit("mousedown",{x:l,y:c,mx:this.rmx,my:this.rmy,target:a,keys:_e(Q({},this.keyMap),{shiftKey:t,ctrlKey:n,button:r})})}handleMouseUp({clientX:e,clientY:t,shiftKey:n,ctrlKey:i}){this.mouseDown=!1;const o=e-this.left,r=t-this.top;this.emit("mouseup",{x:o,y:r,keys:_e(Q({},this.keyMap),{shiftKey:n,ctrlKey:i})})}handleKeyUp({key:e}){e===" "&&(e="space"),delete this.keyMap[e&&e.toLowerCase()],this.emit("keyup",{key:e,keys:this.keyMap})}handleKeyDown({key:e,ctrlKey:t,shiftKey:n}){switch(e=e===" "?"space":e.toLowerCase(),this.keyMap[e&&e.toLowerCase()]=!0,e==="space"&&this.ev&&this.handleMouseDown(this.ev),e){case"a":n&&this.addMenu.show({x:this.rmx,y:this.rmy}).then(i=>{this.system.createNode(i)}).catch();break;case"c":if(n&&t)localStorage.clear(),window.location.reload();else if(t){const i=this.selectedNodes.splice(0);this.activeNode&&!i.includes(this.activeNode)&&i.push(this.activeNode),this.clipboard=i.map(o=>o.deserialize())}else this.selectedNodes.length&&this.activeNode&&this.selectedNodes[0].connectTo(this.activeNode);break;case"f":this.setTransform({x:0,y:0,s:1});break;case"g":this.keyMap.g||(this.mdx=this.mx,this.mdy=this.my,this.selectedNodesDown=this.selectedNodes.map(i=>[i.view.x,i.view.y]));break;case"x":this.activeNode&&(t?this.system.spliceNode(this.activeNode):this.system.removeNode(this.activeNode)),this.selectedNodes.forEach(i=>i.remove());break;case"z":break;case"l":this.activeNode&&(console.log(this.activeNode),console.log(this.activeNode.deserialize()));break;case"v":if(t){const i=this.clipboard.sort((c,u)=>{const{pos:{x:f=0,y:h=0}={}}=c.attributes,{pos:{x:d=0,y:p=0}={}}=u.attributes;return f+h<d+p?-1:1});let{pos:{x:o=0,y:r=0}={}}=i[0].attributes;const{x:a,y:l}=this.projectWindowToLocal(this.mx,this.my);o-=a,r-=l,this.clipboard.map(c=>{const{pos:{x:u=0,y:f=0}={}}=c.attributes;return c.attributes.pos={x:u-o,y:f-r},c}).forEach(c=>this.system.createNode(c))}break}this.emit("keydown",{key:e,keys:_e(Q({},this.keyMap),{ctrlKey:t})})}}class Aa{constructor(e){this.id=Cr(),this.system=e,this.log=new nn(this),this.log.info("Initialized")}reset(){this.id.reset(),this.log.info("Reset id generator")}create(e){const{attributes:t}=e,n=t.type.toLowerCase(),i=this.system.store.getByName(n);t.id=this.id(+t.id);const o=new i.node(this.system,e);if(this.system.options.view&&i.view){const r=new i.view(o);o.bindView(r)}return n==="output"&&(this.system.outputNode&&this.system.outputNode.remove(),this.system.outputNode=o,o.on("computedData",r=>this.system.result=r)),this.log.info(`Created node with type ${t.type}`,e),o}}class Va{constructor(e){this.system=e}parseSystem(e){const{nodes:t}=e,n=new Map,i=t.map(o=>{const r=this.system.factory.create(o);return r.enableUpdates=!1,n.set(r.id,r),r});return i.forEach(o=>{o.attributes.refs&&o.attributes.refs.forEach(r=>{const a=n.get(r.id);if(!a)throw new Error(`Failed ref: from ${o.attributes.name||o.attributes.id} to ${r.id} `);o.connectTo(a,r.out,r.in)})}),i.forEach(o=>{o.enableUpdates=!0,o.update()}),i}parseType(e){const{compute:t,meta:n,outputs:i,title:o,parameters:r}=e,a=class extends Zt{constructor(c,u){super(c,u);if(t&&(this.compute=t),i){const f=Array.isArray(i)?i:[i];this.outputs=f.map(h=>new wt(this,h))}Object.entries(r).forEach(([f,h])=>{this.states[f]=new Kt(this,f,h)})}},l=Object.values(r).filter(c=>c.internal!==!0).map(c=>c.type);if(this.system.options.view){const c=class extends Qt{constructor(f){super(f)}};return _e(Q({},e),{inputs:l,title:o,meta:n,node:a,view:c})}return _e(Q({inputs:l},e),{title:o,meta:n,node:a})}getData(){return{meta:this.system.meta,nodes:this.system.nodes.map(e=>e.deserialize())}}}const Da=ue("NodeTypeStore");class Ra extends ye{constructor(){super();this.types=[],this.typeMap={}}add(e){Da("register new type "+e.title,e),this.types=[...this.types.filter(t=>t.title.toLowerCase()!==e.title.toLowerCase()),e],this.typeMap[e.title.toLowerCase()]=e,this.emit("types",this.types),this.emit("type",e)}getByName(e){if(e in this.typeMap)return this.typeMap[e];throw new Error("NodeTypeStore: type "+e+" does not exist")}}var Fa=Object.defineProperty,za=Object.getOwnPropertyDescriptor,Ba=(s,e,t,n)=>{for(var i=n>1?void 0:n?za(e,t):e,o=s.length-1,r;o>=0;o--)(r=s[o])&&(i=(n?r(e,t,i):r(i))||i);return n&&i&&Fa(e,t,i),i};let Wa=0;class sn extends ye{constructor(e={}){super();this.parser=new Va(this),this.meta={lastSaved:Date.now()},this.isLoaded=!1,this.isPaused=!1,this.nodes=[],this.states=[],this.id=Wa++;const{view:t=!1,wrapper:n,defaultNodes:i=!1,registerNodes:o=!1,logLevel:r=5}=e;this.options={view:t,wrapper:n};try{if(this.log=new nn(this,r),this.log.group(`Instantiated id:${this.id}`),this.store=new Ra,this.factory=new Aa(this),t&&(this.view=new Ia(this)),i){const a=[];i===!0?a.push(...Object.entries(en).map(l=>l[1])):Array.isArray(i)&&i.length&&i.forEach(l=>{typeof l=="string"&&l in en&&a.push(en[l])}),a.forEach(l=>this.registerNodeType(l))}o&&o.length&&o.forEach(this.registerNodeType.bind(this)),this.log.groupEnd()}catch(a){this.emit("error",{type:"init",error:a})}}get result(){return this._result}set result(e){this._result=e,this.isLoaded&&this.emit("result",e)}setMetaData(e){this.meta=Q(Q({},this.meta),e),this.save()}load(e){try{this.isLoaded=!1,this.isPaused=!0,this.nodes.forEach(n=>n.enableUpdates=!1),this.nodes.forEach(n=>n.remove()),this.factory.reset();const t=this.parser.parseSystem(e);return this.addNodes(t),this.meta=e.meta||{lastSaved:0},this.meta.lastSaved=Date.now(),this.view&&this.view.setTransform(this.meta.transform),this.log.info(`Loaded NodeSystemData with ${t.length} Nodes`,e),this.isPaused=!1,this.isLoaded=!0,this.result=this._result,this}catch(t){this.emit("error",{type:"loading",error:t})}}serialize(){return _e(Q({},this.parser.getData()),{meta:this.meta})}save(){this.isLoaded&&(this.meta.lastSaved=Date.now(),this.log.info("save system",this.serialize()),this.emit("save",this.serialize()))}addNodes(e){e.forEach(t=>this.addNode(t))}addNode(e){this.nodes.push(e),this.save()}removeNode(e){e.view.remove(),Object.values(e.states).forEach(t=>t.remove()),e.outputs.forEach(t=>t.remove()),e.getInputs().forEach(t=>t.remove()),this.nodes=this.nodes.filter(t=>t!==e),this.save(),this.log.info(`Removed Node id:${e.id} type:${e.attributes.type}`,e.deserialize())}spliceNode(e){const t=e.getInputs().map(i=>{var o;return(o=i==null?void 0:i.connection)==null?void 0:o.output}),n=e.outputs.map(i=>i.connections).flat().map(i=>i.input);for(let i=0;i<t.length;i++){const o=t[i],r=n[i];!r||!o||o.connectTo(r)}return this.removeNode(e)}getSockets(e){const t=this.nodes.map(n=>[...n.getSockets()]).flat();return e?t.filter(n=>n.type===e):t}getInputs(e){const t=this.nodes.map(n=>n.getInputs()).flat();return!e||e==="*"?t:t.filter(n=>n.type.includes("*")||n.type.includes(e))}getOutputs(e){const t=this.nodes.map(n=>n.outputs).flat();return!e||e.includes("*")?t:t.filter(n=>n.type==="*"||e.includes(n.type))}createNode(e){const t=this.factory.create(e);return this.addNode(t),this.save(),this.log.info(`Created new node id:${e.attributes.id} type:${e.attributes.type}`,e),t}getNodes(){return this.nodes}getNodeTypes(){return this.store.types}registerNodeType(e){if("node"in e)this.store.add(e);else{const t=this.parser.parseType(e);this.store.add(t)}this.log.info(`Registered new nodeType type:${e.title}`,e)}}Ba([jr(1e3)],sn.prototype,"save",1);const Ga=JSON.parse(localStorage.getItem("pt_local_state")),Xe=Q({},Ga),Ha=hs((s,e)=>{Xe[s]=e,localStorage.setItem("pt_local_state",JSON.stringify(Xe))},100,!1);var we={get(s,e){var t;return Xe[s]=(t=Xe[s])!=null?t:e,Xe[s]},set:Ha};var uf=(()=>{let s=Math.random();return()=>(s=s>0?s-Math.random():s+Math.random(),s.toString().split(".")[1])})();const Ua={};Xt.forEach(s=>{Ua[s.type]=s,"computeSkeleton"in s&&(s.computeSkeleton=It(s.computeSkeleton)),"computeGeometry"in s&&(s.computeGeometry=It(s.computeGeometry)),"computeValue"in s&&(s.computeValue=It(s.computeValue))});const ff=ue("gen.plant");function Ya(){return new Worker("assets/webWorker.6bda6666.js",{type:"module"})}var Ks=()=>{const s=Ya(),e=Lo(s);let t=!1;async function n(i,o){if(t)return;t=!0;const r=await e.plant(i,o);return t=!1,r}return{plant:n}};let Qs=0;class ei extends ye{constructor({canvas:e,width:t,height:n,clearColor:i="ffffff",alpha:o=!1,camPos:r=[0,2,4]}={}){super();if(this.scene=new jo,this.lastCamPos=new Ae(0,0,0),this.canvas=e,(!t||!n)&&e){const a=e.getBoundingClientRect();t=a.width,n=a.height}this.renderer=new Eo({canvas:e,width:t,premultipliedAlpha:!0,height:n,alpha:o,antialias:!0,dpr:1}),this.gl=this.renderer.gl,this.gl.clearColor(...fs(i),0),this.renderer.gl.canvas&&(this.canvas=this.renderer.gl.canvas),this.camera=new Co(this.gl,{fov:70,aspect:t/n}),this.lastCamPos.set(r),this.camera.position.set(r),this.camera.lookAt(new Ae(0,0,0)),e&&(this.controls=new To(this.camera,{element:e,target:new Ae(0,.2,0),maxPolarAngle:1.6,minDistance:.2,maxDistance:15,ease:.7,rotateSpeed:.5,inertia:.5})),this.bindEventlisteners(),e&&this.render()}setControlTarget(e){Number.isNaN(e.x)||(this.controlTarget||(this.controls.target=e),this.controlTarget=e)}setClearColor(e){this.gl.clearColor(...fs(e),1)}renderScene(e){this.renderer.render({scene:e,camera:this.camera})}render(){requestAnimationFrame(this.render.bind(this)),this.lastCamPos.equals(this.camera.position)||(this.lastCamPos.set(this.camera.position),this.emit("camPos",this.camera.position.toArray())),this.controlTarget&&(this.controlTarget.squaredDistance(this.controls.target)<5e-5?this.controls.target=this.controlTarget:this.controls.target.lerp(this.controlTarget,.05)),window.target=this.controls.target,this.controls.update(),this.renderer.render({scene:this.scene,camera:this.camera}),this.emit("perf",performance.now()-Qs),Qs=performance.now()}bindEventlisteners(){const e=pt(()=>this.handleResize(),500);window.addEventListener("resize",()=>{this.canvas.classList.add("resizing"),e()})}handleResize(){let e=this.canvas.parentElement;e||(e=this.canvas);const{width:t,height:n}=e.getBoundingClientRect();this.renderer.setSize(t,n),this.camera.perspective({aspect:this.gl.canvas.width/this.gl.canvas.height}),this.canvas.classList.remove("resizing")}}var qa=`precision highp float;precision highp int;
#define GLSLIFY 1
uniform float uTime;uniform sampler2D tMap;uniform vec3 uFogColor;uniform float uFogNear;uniform float uFogFar;uniform float texScale;varying vec2 vUv;varying vec4 vMVPos;varying vec3 vPos;void main(){vec3 tex=texture2D(tMap,vUv*texScale).rgb;float dist=length(vMVPos);float fog=smoothstep(uFogNear,uFogFar,dist);tex=mix(tex,uFogColor,fog);tex=mix(tex,uFogColor,smoothstep(0.0,-1.0,vPos.y));gl_FragColor.rgb=tex;}`,Xa=`precision highp float;precision highp int;
#define GLSLIFY 1
attribute vec2 uv;attribute vec3 position;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform float uTime;varying vec2 vUv;varying vec4 vMVPos;varying vec3 vPos;void main(){vUv=uv;vec3 pos=position;vPos=pos;vMVPos=modelViewMatrix*vec4(pos,1.0);gl_Position=projectionMatrix*vMVPos;}`,Ja=`#version 300 es
precision highp float;
#define varying in
#define texture2D texture
#define gl_FragColor FragColor
out vec4 FragColor;precision highp float;
#define GLSLIFY 1
uniform sampler2D tMap;varying vec4 vMVPos;vec3 normals(vec3 pos){vec3 fdx=dFdx(pos);vec3 fdy=dFdy(pos);return normalize(cross(fdx,fdy));}vec2 matcap(vec3 eye,vec3 normal){vec3 reflected=reflect(eye,normal);float m=2.8284271247461903*sqrt(reflected.z+1.0);return reflected.xy/m+0.5;}void main(){vec3 normal=normals(vMVPos.xyz);vec3 mat=texture2D(tMap,matcap(normalize(vMVPos.xyz),normal)).rgb;gl_FragColor.rgb=mat;gl_FragColor.a=1.0;}`,Za=`#version 300 es
#define GLSLIFY 1
#define attribute in
#define varying out
attribute vec3 position;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;varying vec4 vMVPos;void main(){vMVPos=modelViewMatrix*vec4(position,1.0);gl_Position=projectionMatrix*vMVPos;}`,Ka=`precision highp float;
#define GLSLIFY 1
float pointSize=0.02;varying float distToCamera;void main(){vec2 uv=gl_PointCoord.xy;float dist=2.0-distToCamera;float circle=pointSize*dist>length(uv-0.5)?0.8:0.0;float xMask=min(abs(uv.x-0.5),abs(uv.y-0.5));circle=xMask>0.003?0.0:circle;gl_FragColor.rgb=vec3(0.0,0.0,0.0);gl_FragColor.a=circle;}`,Qa=`#define GLSLIFY 1
attribute vec3 position;uniform mat4 modelMatrix;uniform mat4 viewMatrix;uniform mat4 projectionMatrix;varying float distToCamera;void main(){vec4 mPos=modelMatrix*vec4(position,1.0);vec4 mvPos=viewMatrix*mPos;gl_PointSize=300.0/length(mvPos.xyz);distToCamera=-mvPos.z/10.0+1.0;gl_Position=projectionMatrix*mvPos;}`,ec=`precision highp float;precision highp int;
#define GLSLIFY 1
void main(){gl_FragColor=vec4(1.,.9,.4,.7);}`,tc=`precision highp float;precision highp int;
#define GLSLIFY 1
attribute vec2 uv;attribute vec3 position;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform mat3 normalMatrix;void main(){gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}`;const ti={fragment:qa,vertex:Xa},ni={fragment:ec,vertex:tc},si={fragment:Ka,vertex:Qa},ii=s=>{const e=new Un(s),t=new Image;return t.onload=()=>e.image=t,t.src="assets/matcap_green.jpg",new ut(s,{vertex:Za,fragment:Ja,uniforms:{tMap:{value:e}},cullFace:null})},nc=Ks(),fe=new ei({width:100,height:100,alpha:!0,clearColor:"000"}),oi=new sn({view:!1,defaultNodes:!1,registerNodes:Xt}),Oe=new Xn(fe.gl,{geometry:new Jn(fe.gl,{width:0,height:0,depth:0}),program:ii(fe.gl)}),Je=document.createElement("canvas");Je.width=Je.height=100;const We=Je.getContext("2d");Oe.setParent(fe.scene);async function sc({pd:s,geo:e}){oi.load(s);const t=oi.result;let n;if(e&&(n=e),s&&!n&&(n=(await(await nc).plant(t,{stemResX:12,stemResY:12})).geometry),!n)return;Oe.geometry=Ut(fe.gl,n),Oe.geometry.computeBoundingBox(),fe.camera.position.x=Oe.geometry.bounds.center.x,fe.camera.position.y=Oe.geometry.bounds.center.y;const o=(Oe.geometry.bounds.max.y-Oe.geometry.bounds.center.y)*2/2/Math.tan(Math.PI*fe.camera.fov/360);fe.camera.position.z=o,fe.camera.lookAt(Oe.geometry.bounds.center),fe.renderScene(fe.scene),We.clearRect(0,0,100,100);for(let r=0;r<10;r++)We.drawImage(Je,0,0),We.drawImage(fe.canvas,0,0),We.filter="blur(7px) opacity(0.6) brightness(0.95)";return We.filter="blur(0px) drop-shadow(0px 0px 10px rgba(0, 0, 0, 0.8))",We.drawImage(fe.canvas,0,0),Je.toDataURL("image/webp",1)}class ic{constructor(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"}}class oc{constructor(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}}class rc{constructor(e,t,n,i){this.name=e,this.version=t,this.os=n,this.bot=i,this.type="bot-device"}}class lc{constructor(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}}class ac{constructor(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}}const cc=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,uc=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ri=3,fc=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",cc]],li=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ai(s){return s?ci(s):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new ac:typeof navigator!="undefined"?ci(navigator.userAgent):pc()}function hc(s){return s!==""&&fc.reduce((e,[t,n])=>{if(e)return e;const i=n.exec(s);return!!i&&[t,i]},!1)}function ci(s){const e=hc(s);if(!e)return null;const[t,n]=e;if(t==="searchbot")return new lc;let i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<ri&&(i=[...i,...mc(ri-i.length)]):i=[];const o=i.join("."),r=dc(s),a=uc.exec(s);return a&&a[1]?new rc(t,o,r,a[1]):new ic(t,o,r)}function dc(s){for(let e=0,t=li.length;e<t;e++){const[n,i]=li[e];if(i.exec(s))return n}return null}function pc(){return typeof process!="undefined"&&process.version?new oc(process.version.slice(1)):null}function mc(s){const e=[];for(let t=0;t<s;t++)e.push("0");return e}function vc(){return"window"in globalThis}let ui={};(()=>{"sessionStorage"in globalThis||(globalThis.sessionStorage={getItem:s=>{},setItem:(s,e)=>{}})})();if("user"in sessionStorage)try{ui=JSON.parse(sessionStorage.getItem("user"))}catch{}const fi=me(ui);fi.subscribe(s=>{sessionStorage.setItem("user",JSON.stringify(s))});const yt=fi,{VITE_API_URL:gc="http://localhost:3000"}={VITE_API_URL:"https://plant-api.jim-fx.com",BASE_URL:"",MODE:"production",DEV:!1,PROD:!0};function wc(s){const t=s.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(t).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(n)}const hi=vc(),_t=(()=>{let s=hi&&localStorage.getItem("token");function e(){if(!s||s.length<10){yt.set({});return}const t=wc(s);yt.set({username:t.username,id:t.sub})}return e(),{set token(t){s=t,hi&&localStorage.setItem("token",t),e()},get token(){return s}}})();async function Le({method:s,path:e,data:t,isJSON:n=!0}){const i={method:s,headers:{}};t&&(i.headers["Content-Type"]="application/json",i.body=JSON.stringify(t)),_t.token&&(i.headers["access-token"]=`Bearer ${_t.token}`);const o=await fetch(`${gc}/${e}`,i);if(o.ok){if(n)try{return await o.json()}catch(a){console.error("Response from "+e+" failed to parse"),console.error(a)}return o.text()}const r=await o.json();return console.error(r),r}function di(s,e={}){return Le(Q({method:"GET",path:s},e))}function yc(s){return Le({method:"DELETE",path:s})}function _c(s,e){return Le({method:"POST",path:s,data:e})}function bc(s){return Le({method:"GET",path:`api/report/${s}`})}function kc(s){return Le({method:"PUT",path:`api/report/${s}/publish`})}function Sc(s){return Le({method:"PUT",path:`api/report/${s}/unpublish`})}function xc(){return Le({method:"GET",path:"api/report/labels"})}function Mc(s,e){return Le({method:"PUT",path:`api/report/${s}`,data:{labels:e}})}var $c=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getReport:bc,publishReport:kc,unpublishReport:Sc,getAvailableLabels:xc,setReportLabels:Mc});async function Pc(s,e){const t=await _c("api/auth/login",{username:s,password:e});_t.token=t.access_token}function Nc(){_t.token=""}function pi(s){return Le({method:"POST",path:"api/report",data:s})}function Lc(s){return yc(`api/report/${s}`)}async function jc(){const s=await di("api/user/role",{isJSON:!1});return yt.update(e=>(e.role=s,e)),s}async function Ec(){const s=await di("api/user/permission");return yt.update(e=>(e.permissions=s,e)),s}var Cc=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",login:Pc,logout:Nc,submitReport:pi,deleteReport:Lc,getRole:jc,getPermission:Ec});Q(Q({},$c),Cc);const Me=ue("ProjectManager"),on="pt_project_";class Tc extends ye{constructor(){super();this.activeProject=me(),this.projects={},this.store=me([]),this.loadProjects()}createNewProject(){const e=Object.values(this.projects).filter(n=>/^DefaultProject((\d)+)?/.test(n.meta.name)).length,t={meta:{name:"DefaultProject"+(e||""),id:Nt(),transform:{x:0,y:0,s:1}},nodes:[{attributes:{pos:{x:-100,y:0},type:"stem",id:"1",refs:[{id:"0",in:"main",out:0}]}},{attributes:{pos:{x:0,y:0},type:"output",id:"0",refs:[]}}]};return Me("created new plant",t),t}createNew(){const e=this.createNewProject();this.emit("new",e),this.saveProject(e)}async updateProjectMeta(e,t){const n=await this.getProject(e);n.meta=Q(Q({},n.meta),t),Me("update meta",e),this.emit("update",n),this.saveProject(n)}async saveProject(e){var n;const t=JSON.parse(JSON.stringify(e));this.projects[t.meta.id]=t,this.emit("save",t),((n=t==null?void 0:t.meta)==null?void 0:n.thumbnail)||this.renderThumbnail({project:t}),await ke.setItem("pt_project_ids",Object.keys(this.projects)),await ke.setItem(on+t.meta.id,t),Me("saved plant id: ",t.meta.id),this.store.set(Object.values(this.projects))}async getProject(e){if(e in this.projects)return this.projects[e];const t=await ke.getItem(on+e);return this.projects[e]=t,t}async deleteProject(e){e in this.projects?(delete this.projects[e],await ke.removeItem(on+e),await ke.setItem("pt_project_ids",Object.keys(this.projects)),this.store.set(Object.values(this.projects)),this.emit("delete",e),Me("deleted project with id: "+e)):Me.warn("cant delete project with id: "+e)}async setActiveProject(e){if(this.loadingActiveProject&&await this.loadingActiveProject,e===this.activeProjectId)return;this.activeProjectId=e,this.loadingActiveProject=this.getProject(e);const t=await this.loadingActiveProject;this.loadingActiveProject?(this.activeProjectId=e,this.saveProject(t),this.activeProject.set(t),await ke.setItem("pt_active_id",e),Me("set active project to id: "+e),this.emit("load",t),delete this.loadingActiveProject):Me.warn("cant find plant with id: "+e)}async renderThumbnail({project:e,geo:t}){var a;const n=((a=e==null?void 0:e.meta)==null?void 0:a.id)||this.activeProjectId;if(!(n in this.projects))return;const i=performance.now(),o=await sc(t?{geo:t}:{pd:e}),r=performance.now()-i;this.projects[n].meta.thumbnail=o,Me("generated thumbnail for "+n+" in "+Math.floor(r)+"ms"),this.saveProject(this.projects[n]),this.store.set(Object.values(this.projects))}async loadProjects(){const e=await ke.getItem("pt_project_ids")||[];Me("loaded project ids",e);const t=await ke.getItem("pt_active_id");if(!e.length){const n=this.createNewProject();e.push(n.meta.id),await this.saveProject(n)}await Promise.all(e.map(async n=>{const i=await this.getProject(n);Me("loaded ",n),this.projects[n]=i})),t&&e.includes(t)?this.setActiveProject(t):this.setActiveProject(e[0]),this.store.set(Object.values(this.projects))}setProject(e){this.plant=e,this.emit("plant",e)}getActiveProject(){return this.plant}setSettings(e){this.emit("settings",e)}}function Oc(s){let e,t,n,i,o,r,a,l,c,u=ds(Date.now()-s[0].meta.lastSaved)+"",f,h,d,p,m,g,w,x,_;return{c(){e=b("div"),t=b("div"),n=j(),i=b("div"),o=b("div"),r=b("input"),l=j(),c=b("p"),f=Y(u),h=Y(" ago"),d=j(),p=b("div"),m=j(),g=b("div"),w=b("button"),w.textContent="delete",v(t,"class","project-image svelte-cu2aw0"),O(t,"background-image","url("+s[0].meta.thumbnail+")"),v(r,"contenteditable",""),r.value=a=s[0].meta.name,v(r,"class","svelte-cu2aw0"),v(c,"class","svelte-cu2aw0"),v(o,"class","project-content-header svelte-cu2aw0"),v(p,"class","project-content-main svelte-cu2aw0"),v(w,"class","delete svelte-cu2aw0"),v(g,"class","project-content-footer svelte-cu2aw0"),v(i,"class","project-content svelte-cu2aw0"),v(e,"class","project-wrapper svelte-cu2aw0"),F(e,"active",s[0].meta.id===re.activeProjectId||s[1])},m(k,C){$(k,e,C),y(e,t),y(e,n),y(e,i),y(i,o),y(o,r),y(o,l),y(o,c),y(c,f),y(c,h),y(i,d),y(i,p),y(i,m),y(i,g),y(g,w),x||(_=[G(r,"blur",s[3]),G(r,"keydown",s[4]),G(w,"click",jt(s[5])),G(e,"resize",alert),G(e,"click",s[6])],x=!0)},p(k,[C]){C&1&&O(t,"background-image","url("+k[0].meta.thumbnail+")"),C&1&&a!==(a=k[0].meta.name)&&r.value!==a&&(r.value=a),C&1&&u!==(u=ds(Date.now()-k[0].meta.lastSaved)+"")&&ne(f,u),C&3&&F(e,"active",k[0].meta.id===re.activeProjectId||k[1])},i:T,o:T,d(k){k&&M(e),x=!1,Re(_)}}}function Ic(s,e,t){let{project:n}=e,i=!1;function o(){return t(1,i=!0),setTimeout(()=>{t(1,i=!1)},100),!0}const r=function(){const u=this.value.split(`
`).join("").trim();re.updateProjectMeta(n.meta.id,{name:u})},a=function(u){if(u.key==="Enter"){const f=this.value.split(`
`).join("").trim();this.blur(),u.preventDefault(),re.updateProjectMeta(n.meta.id,{name:f})}},l=()=>re.deleteProject(n.meta.id),c=()=>o()&&re.setActiveProject(n.meta.id);return s.$$set=u=>{"project"in u&&t(0,n=u.project)},[n,i,o,r,a,l,c]}class Ac extends X{constructor(e){super();J(this,e,Ic,Oc,Z,{project:0})}}function mi(s,e,t){const n=s.slice();return n[9]=e[t],n}function Vc(s){let e;return{c(){e=b("div"),v(e,"class","svelte-7wgw1o")},m(t,n){$(t,e,n)},p:T,d(t){t&&M(e)}}}function Dc(s){let e,t,n;return{c(){e=b("input"),v(e,"type","text"),v(e,"class","search svelte-7wgw1o"),v(e,"placeholder","Search")},m(i,o){$(i,e,o),be(e,s[1]),t||(n=G(e,"input",s[8]),t=!0)},p(i,o){o&2&&e.value!==i[1]&&be(e,i[1])},d(i){i&&M(e),t=!1,n()}}}function vi(s){let e,t,n=s[2],i=[];for(let r=0;r<n.length;r+=1)i[r]=wi(mi(s,n,r));const o=r=>P(i[r],1,1,()=>{i[r]=null});return{c(){e=b("div");for(let r=0;r<i.length;r+=1)i[r].c();v(e,"class","project-list svelte-7wgw1o")},m(r,a){$(r,e,a);for(let l=0;l<i.length;l+=1)i[l].m(e,null);t=!0},p(r,a){if(a&6){n=r[2];let l;for(l=0;l<n.length;l+=1){const c=mi(r,n,l);i[l]?(i[l].p(c,a),S(i[l],1)):(i[l]=wi(c),i[l].c(),S(i[l],1),i[l].m(e,null))}for(H(),l=n.length;l<i.length;l+=1)o(l);U()}},i(r){if(!t){for(let a=0;a<n.length;a+=1)S(i[a]);t=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)P(i[a]);t=!1},d(r){r&&M(e),ve(i,r)}}}function gi(s){let e,t;return e=new Ac({props:{project:s[9]}}),{c(){V(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p(n,i){const o={};i&4&&(o.project=n[9]),e.$set(o)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){R(e,n)}}}function wi(s){let e=yi(s[1],s[9]),t,n,i=e&&gi(s);return{c(){i&&i.c(),t=le()},m(o,r){i&&i.m(o,r),$(o,t,r),n=!0},p(o,r){r&6&&(e=yi(o[1],o[9])),e?i?(i.p(o,r),r&6&&S(i,1)):(i=gi(o),i.c(),S(i,1),i.m(t.parentNode,t)):i&&(H(),P(i,1,1,()=>{i=null}),U())},i(o){n||(S(i),n=!0)},o(o){P(i),n=!1},d(o){i&&i.d(o),o&&M(t)}}}function Rc(s){let e,t,n,i,o,r,a,l,c,u;t=new Oo({}),t.$on("resize",s[6]);function f(m,g){return m[2].length>3?Dc:Vc}let h=f(s),d=h(s),p=s[0]&&vi(s);return{c(){e=b("div"),V(t.$$.fragment),n=j(),i=b("div"),o=b("button"),o.innerHTML='<p class="svelte-7wgw1o">new</p>',r=j(),d.c(),a=j(),p&&p.c(),v(o,"class","add-new svelte-7wgw1o"),v(i,"class","header svelte-7wgw1o"),v(e,"class","project-manager-wrapper svelte-7wgw1o"),v(e,"style",`width: ${s[4]}px; height: ${s[5]}px;`)},m(m,g){$(m,e,g),D(t,e,null),y(e,n),y(e,i),y(i,o),y(i,r),d.m(i,null),y(e,a),p&&p.m(e,null),l=!0,c||(u=G(o,"click",s[7]),c=!0)},p(m,[g]){h===(h=f(m))&&d?d.p(m,g):(d.d(1),d=h(m),d&&(d.c(),d.m(i,null))),m[0]?p?(p.p(m,g),g&1&&S(p,1)):(p=vi(m),p.c(),S(p,1),p.m(e,null)):p&&(H(),P(p,1,1,()=>{p=null}),U())},i(m){l||(S(t.$$.fragment,m),S(p),l=!0)},o(m){P(t.$$.fragment,m),P(p),l=!1},d(m){m&&M(e),R(t),d.d(),p&&p.d(),c=!1,u()}}}function yi(s,e){if(!s||s.length<1)return!0;const t=e.meta.name.toLowerCase();return s=s.toLowerCase(),!!(t.includes(s)||s.includes(t))}function Fc(s,e,t){let n;const{store:i}=re;Pe(s,i,h=>t(2,n=h));let{visible:o}=e,r;const{width:a,height:l}=we.get("projectManagerSize",{width:300,height:window.innerHeight/2}),c=h=>{o&&we.set("projectManagerSize",{width:h.detail.clientWidth,height:h.detail.clientHeight})},u=()=>re.createNew();function f(){r=this.value,t(1,r)}return s.$$set=h=>{"visible"in h&&t(0,o=h.visible)},[o,r,n,i,a,l,c,u,f]}class zc extends X{constructor(e){super();J(this,e,Fc,Rc,Z,{visible:0})}}const rn={enableSync:{type:"boolean",defaultValue:!1},useRandomSeed:{type:"boolean",defaultValue:!1},theme:{type:"select",values:["dark","light"],defaultValue:"dark"},debug:{options:{renderPerf:{type:"boolean",defaultValue:!1},generatePerf:{type:"boolean",defaultValue:!1},pd:{type:"boolean",defaultValue:!1},skeleton:{type:"boolean",defaultValue:!1},wireframe:{type:"boolean",defaultValue:!1},logLevel:{type:"number",min:0,max:2,defaultValue:1}}},ground:{options:{enabled:{type:"boolean",defaultValue:!0},resX:{type:"number",min:8,max:64,step:1,defaultValue:8},resY:{type:"number",min:8,max:64,step:1,defaultValue:16},scale:{type:"number",min:0,max:5,step:.1,defaultValue:1}}},leafRes:{type:"number",min:3,max:12,step:1,defaultValue:2},stemResX:{type:"number",min:3,max:32,step:1,defaultValue:3},stemResY:{type:"number",min:3,max:64,step:1,defaultValue:32}},ln=ue("SettingsManager"),_i=(s,e)=>{const t={};return Object.entries(s).forEach(([n,i])=>{var r;const o=e&&n in e?e[n]:void 0;"options"in i?t[n]=_i(i.options,o):t[n]=(r=o!=null?o:i.defaultValue)!=null?r:i.value}),t},an=(s,e)=>{const t=e.shift();if(t&&t in s)return e.length?an(s[t],e):s[t]},bi=s=>s.includes(".")?s.split("."):[s];class Bc extends ye{constructor(){super();this.settings={},this.store=me(this.settings),this._save=hs(()=>{ke.setItem("pt_settings",this.settings)},500,!1)}save(){var e,t,n;this.emit("settings",this.settings),ue.setLevel((n=(t=(e=this.settings)==null?void 0:e.debug)==null?void 0:t.logLevel)!=null?n:2),this.store.set(this.settings),ln("save settings",this.settings),this._save()}async loadFromLocal(){var t,n,i;const e=await ke.getItem("pt_settings")||{};this.settings=_i(rn,e),ue.setLevel((i=(n=(t=this.settings)==null?void 0:t.debug)==null?void 0:n.logLevel)!=null?i:2),this.store.set(this.settings),ln("loaded settings from local",this.settings),this.emit("settings",this.settings)}set(e,t){const n=bi(e);if(n.length>1){const i=n.pop(),o=an(this.settings,n);o&&(o[i]=t)}else this.settings[n[0]]=t;ln(`Set ${n}`,t),this.emit(n+".update",t),this.save()}get(e){return an(this.settings,bi(e))}getSettings(){return JSON.parse(JSON.stringify(this.settings))}}let Wc=0;const cn=we.get("sections")||[];var Gc=()=>{const s=Wc++;return{get(){return cn[s]||!1},set(e){cn[s]=e,we.set("sections",cn)}}};function ki(s,e,t){const n=s.slice();return n[9]=e[t][0],n[10]=e[t][1],n}function Hc(s){let e,t,n,i,o,r;const a=[{value:s[1]},s[6](s[4])];var l=zt(s[4],s[1]);function c(u){let f={};for(let h=0;h<a.length;h+=1)f=Hn(f,a[h]);return{props:f}}return l&&(i=new l(c()),i.$on("change",s[8])),{c(){e=b("p"),t=Y(s[2]),n=j(),i&&V(i.$$.fragment),o=le()},m(u,f){$(u,e,f),y(e,t),$(u,n,f),i&&D(i,u,f),$(u,o,f),r=!0},p(u,f){(!r||f&4)&&ne(t,u[2]);const h=f&82?Wn(a,[f&2&&{value:u[1]},f&80&&Gn(u[6](u[4]))]):{};if(l!==(l=zt(u[4],u[1]))){if(i){H();const d=i;P(d.$$.fragment,1,0,()=>{R(d,1)}),U()}l?(i=new l(c()),i.$on("change",u[8]),V(i.$$.fragment),S(i.$$.fragment,1),D(i,o.parentNode,o)):i=null}else l&&i.$set(h)},i(u){r||(i&&S(i.$$.fragment,u),r=!0)},o(u){i&&P(i.$$.fragment,u),r=!1},d(u){u&&M(e),u&&M(n),u&&M(o),i&&R(i,u)}}}function Uc(s){let e,t;return e=new Ft({props:{name:s[2],open:s[5].get(),$$slots:{default:[Xc]},$$scope:{ctx:s}}}),e.$on("toggle",s[7]),{c(){V(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p(n,i){const o={};i&4&&(o.name=n[2]),i&8203&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){R(e,n)}}}function Yc(s){let e;return{c(){e=b("p"),e.textContent="error"},m(t,n){$(t,e,n)},p:T,i:T,o:T,d(t){t&&M(e)}}}function qc(s){let e,t;return e=new xi({props:{path:s[0],value:s[10],key:s[9],template:s[3].options[s[9]]}}),{c(){V(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.path=n[0]),i&2&&(o.value=n[10]),i&2&&(o.key=n[9]),i&10&&(o.template=n[3].options[n[9]]),e.$set(o)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){R(e,n)}}}function Si(s){let e,t,n,i;const o=[qc,Yc],r=[];function a(l,c){return l[9]in l[3].options?0:1}return e=a(s),t=r[e]=o[e](s),{c(){t.c(),n=le()},m(l,c){r[e].m(l,c),$(l,n,c),i=!0},p(l,c){let u=e;e=a(l),e===u?r[e].p(l,c):(H(),P(r[u],1,1,()=>{r[u]=null}),U(),t=r[e],t?t.p(l,c):(t=r[e]=o[e](l),t.c()),S(t,1),t.m(n.parentNode,n))},i(l){i||(S(t),i=!0)},o(l){P(t),i=!1},d(l){r[e].d(l),l&&M(n)}}}function Xc(s){let e,t,n=Object.entries(s[1]),i=[];for(let r=0;r<n.length;r+=1)i[r]=Si(ki(s,n,r));const o=r=>P(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=le()},m(r,a){for(let l=0;l<i.length;l+=1)i[l].m(r,a);$(r,e,a),t=!0},p(r,a){if(a&11){n=Object.entries(r[1]);let l;for(l=0;l<n.length;l+=1){const c=ki(r,n,l);i[l]?(i[l].p(c,a),S(i[l],1)):(i[l]=Si(c),i[l].c(),S(i[l],1),i[l].m(e.parentNode,e))}for(H(),l=n.length;l<i.length;l+=1)o(l);U()}},i(r){if(!t){for(let a=0;a<n.length;a+=1)S(i[a]);t=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)P(i[a]);t=!1},d(r){ve(i,r),r&&M(e)}}}function Jc(s){let e,t,n,i;const o=[Uc,Hc],r=[];function a(l,c){return l[3].options?0:1}return t=a(s),n=r[t]=o[t](s),{c(){e=b("div"),n.c(),v(e,"class","wrapper svelte-td5kv9")},m(l,c){$(l,e,c),r[t].m(e,null),i=!0},p(l,[c]){let u=t;t=a(l),t===u?r[t].p(l,c):(H(),P(r[u],1,1,()=>{r[u]=null}),U(),n=r[t],n?n.p(l,c):(n=r[t]=o[t](l),n.c()),S(n,1),n.m(e,null))},i(l){i||(S(n),i=!0)},o(l){P(n),i=!1},d(l){l&&M(e),r[t].d()}}}function Zc(s,e,t){let{value:n}=e,{key:i}=e,{path:o=""}=e;o=o+(o.length?".":"")+i;let{template:r}=e,a=r;const l=Gc(),c=h=>{const d=Q({},h);return delete d.defaultValue,delete d.type,d},u=({detail:h})=>l.set(h),f=h=>pe.set(o,h.detail);return s.$$set=h=>{"value"in h&&t(1,n=h.value),"key"in h&&t(2,i=h.key),"path"in h&&t(0,o=h.path),"template"in h&&t(3,r=h.template)},[o,n,i,r,a,l,c,u,f]}class xi extends X{constructor(e){super();J(this,e,Zc,Jc,Z,{value:1,key:2,path:0,template:3})}}function Mi(s,e,t){const n=s.slice();return n[2]=e[t][0],n[3]=e[t][1],n}function $i(s){let e,t;return e=new xi({props:{key:s[2],value:s[3],template:rn[s[2]]}}),{c(){V(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.key=n[2]),i&1&&(o.value=n[3]),i&1&&(o.template=rn[n[2]]),e.$set(o)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){R(e,n)}}}function Kc(s){let e,t,n=Object.entries(s[0]),i=[];for(let r=0;r<n.length;r+=1)i[r]=$i(Mi(s,n,r));const o=r=>P(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=le()},m(r,a){for(let l=0;l<i.length;l+=1)i[l].m(r,a);$(r,e,a),t=!0},p(r,[a]){if(a&1){n=Object.entries(r[0]);let l;for(l=0;l<n.length;l+=1){const c=Mi(r,n,l);i[l]?(i[l].p(c,a),S(i[l],1)):(i[l]=$i(c),i[l].c(),S(i[l],1),i[l].m(e.parentNode,e))}for(H(),l=n.length;l<i.length;l+=1)o(l);U()}},i(r){if(!t){for(let a=0;a<n.length;a+=1)S(i[a]);t=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)P(i[a]);t=!1},d(r){ve(i,r),r&&M(e)}}}function Qc(s,e,t){let n;const i=pe.store;return Pe(s,i,o=>t(0,n=o)),[n,i]}class eu extends X{constructor(e){super();J(this,e,Qc,Kc,Z,{})}}function tu(s){let e;return{c(){e=b("p"),e.textContent=`\u{1F389} Now you have all the knowledge to use the Plantarium. Have some fun with
  it.`,v(e,"class","svelte-1h3eb6p")},m(t,n){$(t,e,n)},p:T,i:T,o:T,d(t){t&&M(e)}}}class nu extends X{constructor(e){super();J(this,e,null,tu,Z,{})}}function su(s){let e,t,n,i,o,r,a,l;return i=new He({props:{name:"hand"}}),{c(){e=b("p"),t=Y("Hey there "),n=b("span"),o=b("div"),V(i.$$.fragment),r=j(),a=b("p"),a.innerHTML=`Welcome to <b>Plantarium</b>, a tool for creating parametrized, procedural 3D
  plants.`,O(o,"display","contents"),O(o,"--stroke","#1a1a1a"),v(n,"class","svelte-1tutruj"),v(e,"class","svelte-1tutruj"),v(a,"class","svelte-1tutruj")},m(c,u){$(c,e,u),y(e,t),y(e,n),y(n,o),D(i,o,null),$(c,r,u),$(c,a,u),l=!0},p:T,i(c){l||(S(i.$$.fragment,c),l=!0)},o(c){P(i.$$.fragment,c),l=!1},d(c){c&&M(e),R(i),c&&M(r),c&&M(a)}}}class iu extends X{constructor(e){super();J(this,e,null,su,Z,{})}}const un=[{title:"Tutorial",description:iu,options:{"lets go":()=>{}},type:"alert"},{description:`This is the <b>Plant View</b>, here you can explore the generated 3D model of your plant. 
      Try to change the view by:`,selector:".scene-wrapper",checks:[{description:"Clicking and dragging",setup:function(s,{c:e}){const t=document.querySelector(e.selector);t.getAttribute("setup")!=="true"&&(t.setAttribute("setup","true"),t.addEventListener("click",s,{once:!0}))}},{description:"Scrolling / Zooming",setup:(s,{c:e})=>{const t=document.querySelector(e.selector+"> canvas");t.getAttribute("setup")!=="true"&&(t.setAttribute("setup","true"),t.addEventListener("wheel",s,{once:!0,passive:!0}))}}]},{selector:"#nodesystem-view",description:"This is the <b>Node View</b>, here you define the way your plant looks. Try playing with some of the settings. If you are not so sure how this works, maybe visit the NodeTutorial"},{description:"This Button opens the project view",clickSelector:"header > div.left > div > div"},{description:"This is the ProjectView, here you can create/rename/delete projects.",selector:".project-manager-wrapper",checks:[{description:"create a new project",setup:(s,{pm:e})=>{e.once("new",s)}},{description:"rename the project",setup:(s,{pm:e})=>{e.once("update",s)}},{description:"delete the project",setup:(s,{pm:e})=>{e.once("delete",s)}}]},{description:"This Button opens the <b>Settings View</b>",clickSelector:"header > div.right > div:nth-child(2) .icon-wrapper"},{description:"This is the <b>SettingView</b>, here you can change some general settings.",selector:"header > div.right > div:nth-child(2) > div > div > div.wrapper.right.visible"},{description:"When you encounter something which doesnt work or you have an Idea for a new feature, use this button to report it.",clickSelector:"header > div.right > div:nth-child(1) > div"},{title:"Tutorial",description:nu,options:{"lets go":()=>{}},type:"alert"}];var Ze=me(void 0);function Pi(s,e,t){const n=s.slice();return n[14]=e[t],n[15]=e,n[16]=t,n}function Ni(s){let e,t,n,i,o,r,a,l,c=s[6].description+"",u,f,h,d,p,m=s[3]&&Li(s);o=new de({props:{icon:"cross"}}),o.$on("click",s[11]);let g=s[1]&&ji(s),w=!s[4]&&Ci(s),x=s[0]&&s[5]&&Ti(s);return{c(){e=b("span"),m&&m.c(),t=j(),n=b("div"),i=b("div"),r=b("div"),V(o.$$.fragment),a=j(),l=b("p"),u=j(),g&&g.c(),f=j(),w&&w.c(),d=j(),x&&x.c(),O(r,"display","contents"),O(r,"--bg","transparent"),v(i,"class","close-wrapper svelte-zb5b7g"),v(l,"class","svelte-zb5b7g"),v(n,"class","wrapper svelte-zb5b7g"),v(n,"style",h=`left: ${s[8]}px; top: ${s[0].top+20}px;`),v(e,"class","svelte-zb5b7g"),F(e,"isLeft",s[2]),F(e,"hasElement",!!s[5]),F(e,"hasClick",!!s[3])},m(_,k){$(_,e,k),m&&m.m(e,null),y(e,t),y(e,n),y(n,i),y(i,r),D(o,r,null),y(n,a),y(n,l),l.innerHTML=c,y(n,u),g&&g.m(n,null),y(n,f),w&&w.m(n,null),y(e,d),x&&x.m(e,null),p=!0},p(_,k){_[3]?m?(m.p(_,k),k&8&&S(m,1)):(m=Li(_),m.c(),S(m,1),m.m(e,t)):m&&(H(),P(m,1,1,()=>{m=null}),U()),(!p||k&64)&&c!==(c=_[6].description+"")&&(l.innerHTML=c),_[1]?g?(g.p(_,k),k&2&&S(g,1)):(g=ji(_),g.c(),S(g,1),g.m(n,f)):g&&(H(),P(g,1,1,()=>{g=null}),U()),_[4]?w&&(H(),P(w,1,1,()=>{w=null}),U()):w?(w.p(_,k),k&16&&S(w,1)):(w=Ci(_),w.c(),S(w,1),w.m(n,null)),(!p||k&257&&h!==(h=`left: ${_[8]}px; top: ${_[0].top+20}px;`))&&v(n,"style",h),_[0]&&_[5]?x?x.p(_,k):(x=Ti(_),x.c(),x.m(e,null)):x&&(x.d(1),x=null),k&4&&F(e,"isLeft",_[2]),k&32&&F(e,"hasElement",!!_[5]),k&8&&F(e,"hasClick",!!_[3])},i(_){p||(S(m),S(o.$$.fragment,_),S(g),S(w),p=!0)},o(_){P(m),P(o.$$.fragment,_),P(g),P(w),p=!1},d(_){_&&M(e),m&&m.d(),R(o),g&&g.d(),w&&w.d(),x&&x.d()}}}function Li(s){let e,t,n,i,o;return t=new He({props:{name:"pointing"}}),{c(){e=b("div"),n=b("div"),V(t.$$.fragment),O(n,"display","contents"),O(n,"--fill","#303030"),v(e,"class","click-wrapper svelte-zb5b7g"),v(e,"style",i=`top: ${s[0].top+20}px; left: ${s[8]-(s[2]?20:-0)}px;`)},m(r,a){$(r,e,a),y(e,n),D(t,n,null),o=!0},p(r,a){(!o||a&261&&i!==(i=`top: ${r[0].top+20}px; left: ${r[8]-(r[2]?20:-0)}px;`))&&v(e,"style",i)},i(r){o||(S(t.$$.fragment,r),o=!0)},o(r){P(t.$$.fragment,r),o=!1},d(r){r&&M(e),R(t)}}}function ji(s){let e,t,n=s[1],i=[];for(let r=0;r<n.length;r+=1)i[r]=Ei(Pi(s,n,r));const o=r=>P(i[r],1,1,()=>{i[r]=null});return{c(){e=b("div");for(let r=0;r<i.length;r+=1)i[r].c();v(e,"class","checks-wrapper svelte-zb5b7g")},m(r,a){$(r,e,a);for(let l=0;l<i.length;l+=1)i[l].m(e,null);t=!0},p(r,a){if(a&2){n=r[1];let l;for(l=0;l<n.length;l+=1){const c=Pi(r,n,l);i[l]?(i[l].p(c,a),S(i[l],1)):(i[l]=Ei(c),i[l].c(),S(i[l],1),i[l].m(e,null))}for(H(),l=n.length;l<i.length;l+=1)o(l);U()}},i(r){if(!t){for(let a=0;a<n.length;a+=1)S(i[a]);t=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)P(i[a]);t=!1},d(r){r&&M(e),ve(i,r)}}}function Ei(s){let e,t,n,i,o,r=s[14].description+"",a,l,c;function u(h){s[12](h,s[14])}let f={};return s[14]._isCompleted!==void 0&&(f.value=s[14]._isCompleted),t=new vt({props:f}),ae.push(()=>ht(t,"value",u)),{c(){e=b("div"),V(t.$$.fragment),i=j(),o=b("p"),a=Y(r),l=j(),v(o,"class","svelte-zb5b7g"),v(e,"class","check-wrapper svelte-zb5b7g"),F(e,"is-completed",s[14]._isCompleted)},m(h,d){$(h,e,d),D(t,e,null),y(e,i),y(e,o),y(o,a),y(e,l),c=!0},p(h,d){s=h;const p={};!n&&d&2&&(n=!0,p.value=s[14]._isCompleted,ft(()=>n=!1)),t.$set(p),(!c||d&2)&&r!==(r=s[14].description+"")&&ne(a,r),d&2&&F(e,"is-completed",s[14]._isCompleted)},i(h){c||(S(t.$$.fragment,h),c=!0)},o(h){P(t.$$.fragment,h),c=!1},d(h){h&&M(e),R(t)}}}function Ci(s){let e,t,n,i;return t=new de({props:{name:"next"}}),t.$on("click",s[13]),{c(){e=b("div"),n=b("div"),V(t.$$.fragment),O(n,"display","contents"),O(n,"--text","white"),O(n,"--bg","#303030"),v(e,"class","next-wrapper svelte-zb5b7g")},m(o,r){$(o,e,r),y(e,n),D(t,n,null),i=!0},p:T,i(o){i||(S(t.$$.fragment,o),i=!0)},o(o){P(t.$$.fragment,o),i=!1},d(o){o&&M(e),R(t)}}}function Ti(s){let e,t;return{c(){e=b("span"),v(e,"class","highlighter  svelte-zb5b7g"),v(e,"style",t=`width: ${s[0].width}px; height: ${s[0].height}px; left: ${s[0].left}px; top: ${s[0].top}px;`)},m(n,i){$(n,e,i)},p(n,i){i&1&&t!==(t=`width: ${n[0].width}px; height: ${n[0].height}px; left: ${n[0].left}px; top: ${n[0].top}px;`)&&v(e,"style",t)},d(n){n&&M(e)}}}function ou(s){let e,t,n=s[7]&&Ni(s);return{c(){n&&n.c(),e=le()},m(i,o){n&&n.m(i,o),$(i,e,o),t=!0},p(i,[o]){i[7]?n?(n.p(i,o),o&128&&S(n,1)):(n=Ni(i),n.c(),S(n,1),n.m(e.parentNode,e)):n&&(H(),P(n,1,1,()=>{n=null}),U())},i(i){t||(S(n),t=!0)},o(i){P(n),t=!1},d(i){n&&n.d(i),i&&M(e)}}}function ru(s,e,t){let n,i,o,r,a,l,c,u,f,h,d;Pe(s,Ze,w=>t(6,d=w));const p=()=>{t(7,h=!1)};function m(w,x){s.$$.not_equal(x._isCompleted,w)&&(x._isCompleted=w,t(1,f),t(6,d))}const g=()=>Zn(Ze,d._isCompleted=!0,d);return s.$$.update=()=>{if(s.$$.dirty&64&&d&&d.clickSelector){const w=document.querySelector(d.clickSelector);w&&w.getAttribute("setup")!=="true"&&(w.setAttribute("setup","true"),w.addEventListener("click",()=>{setTimeout(()=>{Zn(Ze,d._isCompleted=!0,d)},20)},{once:!0}))}s.$$.dirty&64&&t(10,n=d&&d.selector),s.$$.dirty&1024&&t(5,i=n&&document.querySelector(n)),s.$$.dirty&32&&t(9,o=i&&i.getBoundingClientRect()),s.$$.dirty&64&&t(4,r=d&&d.clickSelector&&document.querySelector(d.clickSelector)),s.$$.dirty&16&&t(3,a=r&&r.getBoundingClientRect()),s.$$.dirty&520&&t(0,l=o||a),s.$$.dirty&1&&t(2,c=l&&l.left+l.width>window.innerWidth-100),s.$$.dirty&5&&t(8,u=l&&(c?l.left-10:l.left+l.width+10)),s.$$.dirty&64&&t(1,f=d&&d.checks),s.$$.dirty&66&&f&&f.forEach((w,x)=>(w._isSetup||(w._isSetup=!0,w.setup(()=>{t(1,f[x]._isCompleted=!0,f),t(1,f),t(6,d)},{pm:re,c:d})),w)),s.$$.dirty&1&&t(7,h=!!l)},[l,f,c,a,r,i,d,h,u,o,n,p,m,g]}class lu extends X{constructor(e){super();J(this,e,ru,ou,Z,{})}}const Oi=["yes","next","lets go","okay"];let Ii;const Ai={handleReject:()=>{we.set("hasViewedTutorial",!0),Ye("The tutorial is accessable under...")},currentIndex:0,previous:async function(){},next:async function(){var t;const s=un[this.currentIndex];if(this.currentIndex===un.length)return;if(s.setup&&await s.setup({pm:Ii}),Ze.set(s),this.currentIndex++,this.currentIndex>2&&we.set("hasViewedTutorial",!0),s.title=(t=s.title)!=null?t:`Tutorial (${this.currentIndex}/${un.length})`,s.type==="alert"){const n=await Ue(s.description,{title:s.title,type:"success",values:s.options?Object.keys(s.options):void 0,timeout:0});if(Oi.includes(n.toString()))return this.next()}if(s.type==="toast"){const n=await Ye(s.description,{values:s.options?Object.keys(s.options):void 0,timeout:0});if(Oi.includes(n.toString()))return this.next()}const e=Ze.subscribe(n=>{n._isCompleted&&(e(),this.next())})},init:function({projectManager:s}){if(we.get("hasViewedTutorial"))return;Ii=s;const e=`It looks like this is your first time here...
    Want to take a little tour? `;setTimeout(async()=>{await Ye(e,{title:"",timeout:8e3,values:["nah","yes"]})==="yes"?this.next():this.handleReject()},1e4)},restart:function(){we.set("hasViewedTutorial",!1),this.currentIndex=0,this.next()}},au=me([]),cu=me([]),Vi={},fn={render:!1,generate:!1},hn={render:au,generate:cu};function uu(s){Vi[s]=performance.now()}function Di(s){var e,t;fn.render=!!((e=s==null?void 0:s.debug)==null?void 0:e.renderPerf),fn.generate=!!((t=s==null?void 0:s.debug)==null?void 0:t.generatePerf)}function Ri(s,e){(s in hn?hn[s]:me([])).update(n=>(n.push(e),n.length>200&&n.shift(),n)),s in dn&&dn[s]()}function fu(s){var t;if(!fn[s])return;const e=performance.now()-((t=Vi[s])!=null?t:0);Ri(s,e)}const Fi={},dn={};function zi(s,e){e=e||Fi[s]||document.createElement("canvas"),Fi[s]=e;const t=200,n=100;e.width=t,e.height=n;const i=e.getContext("2d");dn[s]=()=>{const o=[...Io(hn[s])],r=Math.max(...o);let a=0;const l=t/200;i.clearRect(0,0,t,n),i.fillStyle="rgba(255, 255, 255, 0.5)",i.fillRect(0,0,t,n);for(let c=0;c<o.length;c++){a+=o[c];const u=o[c]*(n/r);i.fillStyle="rgba(0, 0, 0, 0.5)",i.fillRect(c*l,n-u,l,u)}i.fillStyle="black",i.textAlign="left",i.fillText(s+"",10,10),i.textAlign="right",i.fillText(`avg: ${Math.floor(a/o.length*10)/10}ms max: ${Math.floor(r*10)/10}ms`,180,10)}}const pe=new Bc,re=new Tc;es(pe.get("theme"));Di({debug:pe.get("debug")});pe.on("enableSync.update",s=>{Ye(`${s?"Enabled":"Disabled"} sync`,{type:"success"})});pe.on("theme.update",s=>{es(s)});const Ke=new sn({view:!0,defaultNodes:!1,registerNodes:Xt});re.on("load",s=>Ke.load(s));Ke.on("result",s=>re.setProject(s),50);Ke.on("save",s=>re.saveProject(s));pe.on("settings",s=>{re.setSettings(s),Di(s)},50);Ai.init({projectManager:re});const hu=(s,e)=>{const{ground:{scale:t=1,resX:n=16,resY:i=16}={}}=e||{},o=t!=null?t:0,r=n!=null?n:8,a=i!=null?i:8,l=Ol(o,r,a);return Ut(s,l)};class du{constructor(e,t){this.scene=e,this.gl=e.renderer.gl,this.initMeshes(),t.on("settings",this.setSettings.bind(this)),this.setSettings(pe.getSettings())}initMeshes(){const e=new Ao(this.gl),t=Ir.texture(this.gl,"assets/rocky_dirt1-albedo.jpg",{wrapS:this.gl.REPEAT,wrapT:this.gl.REPEAT}),n=new ut(this.gl,{vertex:ti.vertex,fragment:ti.fragment,uniforms:{uTime:{value:0},tMap:{value:t},uFogColor:{value:new Vo("#ffffff")},uFogNear:{value:10},uFogFar:{value:30},texScale:{value:1}}});this.ground=this.scene.addMesh({geometry:e,program:n});const i=(o=0)=>{requestAnimationFrame(i),n.uniforms.uTime.value=o};i()}setSettings(e){var t,n;this.settings=e,((t=e==null?void 0:e.ground)==null?void 0:t.enabled)&&(this.ground.geometry=hu(this.gl,e)),this.ground.visible=!!((n=e==null?void 0:e.ground)==null?void 0:n.enabled)}}function pu(s){let e,t,n=(s[1]?"<b>[NEW]</b>":"")+"",i,o=s[0].subject+"",r;return{c(){e=b("p"),t=new Do,i=j(),r=Y(o),t.a=i},m(a,l){$(a,e,l),t.m(n,e),y(e,i),y(e,r)},p(a,[l]){l&2&&n!==(n=(a[1]?"<b>[NEW]</b>":"")+"")&&t.p(n),l&1&&o!==(o=a[0].subject+"")&&ne(r,o)},i:T,o:T,d(a){a&&M(e)}}}function mu(s,e,t){let{commit:n}=e,{isNew:i=!1}=e;return s.$$set=o=>{"commit"in o&&t(0,n=o.commit),"isNew"in o&&t(1,i=o.isNew)},[n,i]}class vu extends X{constructor(e){super();J(this,e,mu,pu,Z,{commit:0,isNew:1})}}const Bi=me([]);let pn=we.get("lastUpdated",Date.now());function gu(s){const e=Date.parse(s.date);return _e(Q({},s),{date:e,new:pn<e})}let bt;async function wu(){const e=await(await fetch("commits.json")).json();return pn=Date.now(),we.set("lastUpdated",pn),e.map(t=>gu(t))}const yu=async()=>{if(bt)return bt;bt=wu();const s=await bt;Bi.set(s)};function Wi(s,e,t){const n=s.slice();return n[4]=e[t],n}function Gi(s){let e,t=s[2](s[4].date)+"",n;return{c(){e=b("h3"),n=Y(t),v(e,"class","svelte-13vbnbr")},m(i,o){$(i,e,o),y(e,n)},p(i,o){o&1&&t!==(t=i[2](i[4].date)+"")&&ne(n,t)},d(i){i&&M(e)}}}function Hi(s){let e=s[1](s[4]),t,n,i,o=e&&Gi(s);return n=new vu({props:{commit:s[4]}}),{c(){o&&o.c(),t=j(),V(n.$$.fragment)},m(r,a){o&&o.m(r,a),$(r,t,a),D(n,r,a),i=!0},p(r,a){a&1&&(e=r[1](r[4])),e?o?o.p(r,a):(o=Gi(r),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null);const l={};a&1&&(l.commit=r[4]),n.$set(l)},i(r){i||(S(n.$$.fragment,r),i=!0)},o(r){P(n.$$.fragment,r),i=!1},d(r){o&&o.d(r),r&&M(t),R(n,r)}}}function _u(s){let e,t,n,i,o=s[0],r=[];for(let l=0;l<o.length;l+=1)r[l]=Hi(Wi(s,o,l));const a=l=>P(r[l],1,1,()=>{r[l]=null});return{c(){e=b("h1"),e.textContent="Changelog",t=j(),n=b("div");for(let l=0;l<r.length;l+=1)r[l].c();v(n,"class","svelte-13vbnbr")},m(l,c){$(l,e,c),$(l,t,c),$(l,n,c);for(let u=0;u<r.length;u+=1)r[u].m(n,null);i=!0},p(l,[c]){if(c&7){o=l[0];let u;for(u=0;u<o.length;u+=1){const f=Wi(l,o,u);r[u]?(r[u].p(f,c),S(r[u],1)):(r[u]=Hi(f),r[u].c(),S(r[u],1),r[u].m(n,null))}for(H(),u=o.length;u<r.length;u+=1)a(u);U()}},i(l){if(!i){for(let c=0;c<o.length;c+=1)S(r[c]);i=!0}},o(l){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)P(r[c]);i=!1},d(l){l&&M(e),l&&M(t),l&&M(n),ve(r,l)}}}function bu(s,e,t){let n;Pe(s,Bi,a=>t(0,n=a)),yu();let i=n.length&&new Date(n[0].date).getDay();return[n,a=>{const l=new Date(a.date);return l.getDay()!=i?(i=l.getDay(),!0):!1},a=>new Date(a).toLocaleDateString()]}class ku extends X{constructor(e){super();J(this,e,bu,_u,Z,{})}}function Su(s){let e,t,n,i,o,r,a,l,c;function u(p){s[6](p)}let f={useActive:!0,icon:s[3],name:s[1]};s[0]!==void 0&&(f.active=s[0]),t=new de({props:f}),ae.push(()=>ht(t,"active",u));var h=s[4];function d(p){return{props:{visible:p[0]}}}return h&&(l=new h(d(s))),{c(){e=b("div"),n=b("div"),V(t.$$.fragment),r=j(),a=b("div"),l&&V(l.$$.fragment),O(n,"display","contents"),O(n,"--bg","transparent"),O(n,"--text",o=s[5]["text-color"]),v(a,"class","wrapper svelte-1e2gb7"),F(a,"visible",s[0]),F(a,"right",s[2]),v(e,"class","icon-wrapper svelte-1e2gb7"),F(e,"active",s[0])},m(p,m){$(p,e,m),y(e,n),D(t,n,null),y(e,r),y(e,a),l&&D(l,a,null),c=!0},p(p,m){m&32&&o!==(o=p[5]["text-color"])&&O(n,"--text",o);const g={};m&8&&(g.icon=p[3]),m&2&&(g.name=p[1]),!i&&m&1&&(i=!0,g.active=p[0],ft(()=>i=!1)),t.$set(g);const w={};if(m&1&&(w.visible=p[0]),h!==(h=p[4])){if(l){H();const x=l;P(x.$$.fragment,1,0,()=>{R(x,1)}),U()}h?(l=new h(d(p)),V(l.$$.fragment),S(l.$$.fragment,1),D(l,a,null)):l=null}else h&&l.$set(w);m&1&&F(a,"visible",p[0]),m&4&&F(a,"right",p[2]),m&1&&F(e,"active",p[0])},i(p){c||(S(t.$$.fragment,p),l&&S(l.$$.fragment,p),c=!0)},o(p){P(t.$$.fragment,p),l&&P(l.$$.fragment,p),c=!1},d(p){p&&M(e),R(t),l&&R(l)}}}function xu(s){let e,t;return e=new Ro({props:{$$slots:{default:[Su]},$$scope:{ctx:s}}}),e.$on("clickoutside",s[7]),{c(){V(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p(n,[i]){const o={};i&319&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){R(e,n)}}}function Mu(s,e,t){let n;Pe(s,Ot,f=>t(5,n=f));let{name:i}=e,{right:o=!1}=e,{icon:r}=e,{component:a}=e,{visible:l=!1}=e;function c(f){l=f,t(0,l)}const u=()=>t(0,l=!1);return s.$$set=f=>{"name"in f&&t(1,i=f.name),"right"in f&&t(2,o=f.right),"icon"in f&&t(3,r=f.icon),"component"in f&&t(4,a=f.component),"visible"in f&&t(0,l=f.visible)},[l,i,o,r,a,n,c,u]}class mn extends X{constructor(e){super();J(this,e,Mu,xu,Z,{name:1,right:2,icon:3,component:4,visible:0})}}function $u(s){let e,t,n,i,o,r,a,l,c,u,f,h,d,p,m,g,w,x=s[0]==="bug"&&Ui(s);return d=new de({props:{name:"Submit"}}),d.$on("click",s[9]),{c(){e=b("section"),t=b("label"),t.textContent="Title",n=j(),i=b("input"),o=j(),r=b("section"),a=b("label"),a.textContent="Description",l=j(),c=b("textarea"),f=j(),x&&x.c(),h=j(),p=b("div"),V(d.$$.fragment),v(t,"for","title"),v(t,"class","svelte-1725buf"),v(i,"type","text"),v(i,"id","title"),v(i,"placeholder","Simple Title"),v(i,"class","svelte-1725buf"),v(e,"class","svelte-1725buf"),v(a,"for","description"),v(a,"class","svelte-1725buf"),v(c,"type","text"),v(c,"id","description"),v(c,"rowspan","5"),v(c,"placeholder",u=s[0]==="bug"?"Please provide a detailed description of what happened.":"Please describe the feature."),v(c,"class","svelte-1725buf"),v(r,"class","svelte-1725buf"),O(p,"display","contents"),O(p,"--bg","white"),O(p,"--text-color","#303030")},m(_,k){$(_,e,k),y(e,t),y(e,n),y(e,i),be(i,s[2]),$(_,o,k),$(_,r,k),y(r,a),y(r,l),y(r,c),be(c,s[3]),$(_,f,k),x&&x.m(_,k),$(_,h,k),$(_,p,k),D(d,p,null),m=!0,g||(w=[G(i,"keydown",jt(s[11])),G(i,"input",s[12]),G(c,"keydown",jt(s[10])),G(c,"input",s[13])],g=!0)},p(_,k){k&4&&i.value!==_[2]&&be(i,_[2]),(!m||k&1&&u!==(u=_[0]==="bug"?"Please provide a detailed description of what happened.":"Please describe the feature."))&&v(c,"placeholder",u),k&8&&be(c,_[3]),_[0]==="bug"?x?(x.p(_,k),k&1&&S(x,1)):(x=Ui(_),x.c(),S(x,1),x.m(h.parentNode,h)):x&&(H(),P(x,1,1,()=>{x=null}),U())},i(_){m||(S(x),S(d.$$.fragment,_),m=!0)},o(_){P(x),P(d.$$.fragment,_),m=!1},d(_){_&&M(e),_&&M(o),_&&M(r),_&&M(f),x&&x.d(_),_&&M(h),_&&M(p),R(d,_),g=!1,Re(w)}}}function Pu(s){let e,t,n,i={ctx:s,current:null,token:null,hasCatch:!0,pending:Cu,then:Eu,catch:ju,value:16,error:17,blocks:[,,,]};return Et(t=s[6],i),{c(){e=le(),i.block.c()},m(o,r){$(o,e,r),i.block.m(o,i.anchor=r),i.mount=()=>e.parentNode,i.anchor=e,n=!0},p(o,r){s=o,i.ctx=s,r&64&&t!==(t=s[6])&&Et(t,i)||Fo(i,s,r)},i(o){n||(S(i.block),n=!0)},o(o){for(let r=0;r<3;r+=1){const a=i.blocks[r];P(a)}n=!1},d(o){o&&M(e),i.block.d(o),i.token=null,i=null}}}function Ui(s){let e,t,n,i,o,r,a,l,c,u,f,h=s[7]&&Yi(s);function d(m){s[15](m)}let p={};return s[4]!==void 0&&(p.value=s[4]),i=new vt({props:p}),ae.push(()=>ht(i,"value",d)),u=new Ft({props:{name:"What is that?",$$slots:{default:[Lu]},$$scope:{ctx:s}}}),{c(){h&&h.c(),e=j(),t=b("section"),n=b("div"),V(i.$$.fragment),r=j(),a=b("p"),a.textContent="Include Browser Info",l=j(),c=b("div"),V(u.$$.fragment),O(a,"margin-left","5px"),O(n,"display","flex"),O(n,"align-items","center"),v(c,"class","info svelte-1725buf"),v(t,"class","svelte-1725buf")},m(m,g){h&&h.m(m,g),$(m,e,g),$(m,t,g),y(t,n),D(i,n,null),y(n,r),y(n,a),y(t,l),y(t,c),D(u,c,null),f=!0},p(m,g){m[7]?h?(h.p(m,g),g&128&&S(h,1)):(h=Yi(m),h.c(),S(h,1),h.m(e.parentNode,e)):h&&(H(),P(h,1,1,()=>{h=null}),U());const w={};!o&&g&16&&(o=!0,w.value=m[4],ft(()=>o=!1)),i.$set(w);const x={};g&262144&&(x.$$scope={dirty:g,ctx:m}),u.$set(x)},i(m){f||(S(h),S(i.$$.fragment,m),S(u.$$.fragment,m),f=!0)},o(m){P(h),P(i.$$.fragment,m),P(u.$$.fragment,m),f=!1},d(m){h&&h.d(m),m&&M(e),m&&M(t),R(i),R(u)}}}function Yi(s){let e,t,n,i,o,r,a,l,c,u;function f(d){s[14](d)}let h={};return s[5]!==void 0&&(h.value=s[5]),n=new vt({props:h}),ae.push(()=>ht(n,"value",f)),c=new Ft({props:{name:"What is that?",$$slots:{default:[Nu]},$$scope:{ctx:s}}}),{c(){e=b("section"),t=b("div"),V(n.$$.fragment),o=j(),r=b("p"),r.textContent="Include StackTrace",a=j(),l=b("div"),V(c.$$.fragment),O(r,"margin-left","5px"),O(t,"display","flex"),O(t,"align-items","center"),v(l,"class","info svelte-1725buf"),v(e,"class","svelte-1725buf")},m(d,p){$(d,e,p),y(e,t),D(n,t,null),y(t,o),y(t,r),y(e,a),y(e,l),D(c,l,null),u=!0},p(d,p){const m={};!i&&p&32&&(i=!0,m.value=d[5],ft(()=>i=!1)),n.$set(m);const g={};p&262146&&(g.$$scope={dirty:p,ctx:d}),c.$set(g)},i(d){u||(S(n.$$.fragment,d),S(c.$$.fragment,d),u=!0)},o(d){P(n.$$.fragment,d),P(c.$$.fragment,d),u=!1},d(d){d&&M(e),R(n),R(c)}}}function Nu(s){let e,t,n=s[1].stack+"",i;return{c(){e=b("pre"),t=b("code"),i=Y(n)},m(o,r){$(o,e,r),y(e,t),y(t,i)},p(o,r){r&2&&n!==(n=o[1].stack+"")&&ne(i,n)},d(o){o&&M(e)}}}function Lu(s){let e,t,n,i,o,r,a,l,c,u,f,h,d,p,m,g,w,x;return{c(){e=b("p"),e.textContent=`This information makes it easier for a developer to track down what
            might have caused the bug.`,t=j(),n=b("ul"),i=b("li"),o=Y("OS "),r=b("i"),r.textContent=`(${s[8].os})`,a=j(),l=b("li"),c=Y("Browser "),u=b("i"),u.textContent=`(${s[8].name} / ${s[8].version})`,f=j(),h=b("li"),d=Y("Screen Resolution "),p=b("i"),p.textContent=`(${window.innerWidth}x${window.innerHeight})`,m=j(),g=b("li"),w=Y("Screen DPI "),x=b("i"),x.textContent=`(${window.devicePixelRatio})`},m(_,k){$(_,e,k),$(_,t,k),$(_,n,k),y(n,i),y(i,o),y(i,r),y(n,a),y(n,l),y(l,c),y(l,u),y(n,f),y(n,h),y(h,d),y(h,p),y(n,m),y(n,g),y(g,w),y(g,x)},p:T,d(_){_&&M(e),_&&M(t),_&&M(n)}}}function ju(s){let e,t,n,i=JSON.stringify(s[17],null,2)+"",o;return{c(){e=b("p"),e.textContent="Errror",t=j(),n=b("code"),o=Y(i)},m(r,a){$(r,e,a),$(r,t,a),$(r,n,a),y(n,o)},p(r,a){a&64&&i!==(i=JSON.stringify(r[17],null,2)+"")&&ne(o,i)},i:T,o:T,d(r){r&&M(e),r&&M(t),r&&M(n)}}}function Eu(s){let e,t,n,i=JSON.stringify(s[16],null,2)+"",o,r;return e=new de({props:{name:"Done",icon:"checkmark"}}),{c(){V(e.$$.fragment),t=j(),n=b("code"),o=Y(i)},m(a,l){D(e,a,l),$(a,t,l),$(a,n,l),y(n,o),r=!0},p(a,l){(!r||l&64)&&i!==(i=JSON.stringify(a[16],null,2)+"")&&ne(o,i)},i(a){r||(S(e.$$.fragment,a),r=!0)},o(a){P(e.$$.fragment,a),r=!1},d(a){R(e,a),a&&M(t),a&&M(n)}}}function Cu(s){let e;return{c(){e=Y("Submitting Reprot")},m(t,n){$(t,e,n)},p:T,i:T,o:T,d(t){t&&M(e)}}}function Tu(s){let e,t,n,i;const o=[Pu,$u],r=[];function a(l,c){return l[6]?0:1}return e=a(s),t=r[e]=o[e](s),{c(){t.c(),n=le()},m(l,c){r[e].m(l,c),$(l,n,c),i=!0},p(l,[c]){let u=e;e=a(l),e===u?r[e].p(l,c):(H(),P(r[u],1,1,()=>{r[u]=null}),U(),t=r[e],t?t.p(l,c):(t=r[e]=o[e](l),t.c()),S(t,1),t.m(n.parentNode,n))},i(l){i||(S(t),i=!0)},o(l){P(t),i=!1},d(l){r[e].d(l),l&&M(n)}}}function Ou(s,e,t){let n,{mode:i="bug"}=e,o=ai(),r,a,l=!1,{error:c}=e,u=!0,f;function h(){const _={type:i,title:r,description:a};u&&(_.stacktrace=n),l&&(_.browser=ai(),_.browser.screen={width:window.innerWidth,height:window.innerHeight,dpi:window.devicePixelRatio}),t(6,f=pi(_))}De(async()=>{n&&t(2,r=n.type+": "+n.title)});function d(_){Kn.call(this,s,_)}function p(_){Kn.call(this,s,_)}function m(){r=this.value,t(2,r)}function g(){a=this.value,t(3,a)}function w(_){u=_,t(5,u)}function x(_){l=_,t(4,l)}return s.$$set=_=>{"mode"in _&&t(0,i=_.mode),"error"in _&&t(1,c=_.error)},s.$$.update=()=>{s.$$.dirty&2&&t(7,n=c&&Rt(c.stack))},[i,c,r,a,l,u,f,n,o,h,d,p,m,g,w,x]}class vn extends X{constructor(e){super();J(this,e,Ou,Tu,Z,{mode:0,error:1})}}class Iu{constructor(e,t){this.scene=e,this.pm=t,this.m={},this.gl=e.renderer.gl,this.initGeometry(),this.setSettings(pe.getSettings()),t.on("settings",this.setSettings.bind(this))}initGeometry(){this.m.skeleton=this.scene.addMesh({geometry:new Ge(this.gl,{position:{size:3,data:new Float32Array([0,0,0])},uv:{size:2,data:new Float32Array([0,0])},index:{size:1,data:new Uint16Array([0])}}),program:new ut(this.gl,{vertex:ni.vertex,fragment:ni.fragment,depthTest:!1}),mode:this.gl.LINES}),this.m.vertices=this.scene.addMesh({mode:this.gl.POINTS,geometry:new Ge(this.gl,{position:{size:3,data:new Float32Array(3)}}),program:new ut(this.gl,{vertex:si.vertex,fragment:si.fragment,depthTest:!1,transparent:!0})})}setSettings(e){var t,n;this.settings=JSON.parse(JSON.stringify(e)),this.m.skeleton.visible=!!((t=this.settings.debug)==null?void 0:t.skeleton),this.m.vertices.visible=!!((n=this.settings.debug)==null?void 0:n.skeleton),this.update()}setPlant(e){this.plant=e,this.update()}update(e=this.plant,t=this.settings){var n,i;if(!(!e||!t)&&(e.allSkeletons||e.skeletons)&&((n=t.debug)==null?void 0:n.skeleton)){const o=(i=e.allSkeletons)!=null?i:e.skeletons;let r=0;for(const u of o)r+=u.length/4*3;const a=new Float32Array(r),l=new Uint32Array((r/3-1)*2);let c=0;o.forEach(u=>{const f=u.length/4;for(let h=0;h<f;h++)a[c*3+h*3+0]=u[h*4+0],a[c*3+h*3+1]=u[h*4+1],a[c*3+h*3+2]=u[h*4+2];for(let h=0;h<f-1;h++)l[c*2+h*2]=c+h,l[c*2+h*2+1]=c+h+1;c+=f}),this.m.skeleton.geometry=new Ge(this.gl,{position:{size:3,data:a},index:{size:1,data:l}}),this.m.vertices.geometry=new Ge(this.gl,{position:{size:3,data:a}})}}}const Au=pt(s=>{re.renderThumbnail({geo:s})},5e3),Vu=ue("scene.foreground");class Du{constructor(e,t){this.scene=e,this.pm=t,this.worker=Ks(),this.gl=e.renderer.gl,this.initGeometry(),this.dbg=new Iu(e,t),this.setSettings(pe.getSettings()),this.setPlant(t.getActiveProject()),this.pm.on("settings",this.setSettings.bind(this)),this.pm.on("plant",this.setPlant.bind(this))}initGeometry(){const e=new Jn(this.scene.gl,{width:0,height:0,depth:0});this.mesh=this.scene.addMesh({geometry:e,program:ii(this.gl)})}setSettings(e){this.settings=JSON.parse(JSON.stringify(e)),this.update()}setPlant(e){!e||(this.plant=JSON.parse(JSON.stringify(e)),this.update())}async update(e=this.plant,t=this.settings){var n;if(!(!e||!t)){this.scene.isLoading.set(!0);try{uu("generate");const i=await this.worker.plant(e,t);if(fu("generate"),!i)return;Au(i.geometry),this.scene.isLoading.set(!1),this.mesh.mode=((n=t==null?void 0:t.debug)==null?void 0:n.wireframe)?this.gl.LINES:this.gl.TRIANGLES,this.dbg.setPlant(i),this.mesh.geometry=Ut(this.gl,i.geometry),this.mesh.geometry.computeBoundingBox(),this.scene.renderer.setControlTarget(this.mesh.geometry.bounds.center)}catch(i){Vu.error(i),await Ye(i,{title:"Error [Generator]",values:["report"]})==="report"&&Ue(vn,{timeout:0,title:"Report Bug",type:"error",props:{mode:"bug",error:i}})}}}}class Ru{constructor(e,t){this.isLoading=me(!1),this.renderer=new ei({canvas:t,camPos:we.get("camPos")}),this.renderer.on("camPos",n=>we.set("camPos",n)),this.renderer.on("perf",n=>Ri("render",n),40),this.renderer.handleResize(),this.scene=this.renderer.scene,this.gl=this.renderer.gl,this.wrapper=t.parentElement,this.bg=new du(this,e),this.fg=new Du(this,e)}addMesh(e){const t=new Xn(this.gl,e);return t.setParent(this.scene),t}}function qi(s){let e,t,n=JSON.stringify(s[1],null,2)+"",i;return{c(){e=b("pre"),t=b("code"),i=Y(n),v(t,"class","svelte-jamjfg"),v(e,"class","svelte-jamjfg")},m(o,r){$(o,e,r),y(e,t),y(t,i)},p(o,r){r&2&&n!==(n=JSON.stringify(o[1],null,2)+"")&&ne(i,n)},d(o){o&&M(e)}}}function Xi(s){let e;return{c(){e=b("div"),e.innerHTML='<p class="svelte-jamjfg">Is Loading</p>',v(e,"class","is-loading svelte-jamjfg")},m(t,n){$(t,e,n)},d(t){t&&M(e)}}}function Fu(s){var p,m;let e,t,n,i,o,r,a,l,c,u,f,h=((m=(p=s[6])==null?void 0:p.debug)==null?void 0:m.pd)&&s[1]&&qi(s),d=s[7]&&Xi();return{c(){var g,w,x,_;e=b("div"),h&&h.c(),t=j(),n=b("div"),i=b("canvas"),r=j(),a=b("canvas"),c=j(),u=b("canvas"),f=j(),d&&d.c(),v(i,"style",o=`display: ${((w=(g=s[6])==null?void 0:g.debug)==null?void 0:w.generatePerf)?"visible":"none"}`),v(i,"class","svelte-jamjfg"),v(a,"style",l=`display: ${((_=(x=s[6])==null?void 0:x.debug)==null?void 0:_.renderPerf)?"visible":"none"}`),v(a,"class","svelte-jamjfg"),v(n,"class","performance-wrapper svelte-jamjfg"),v(u,"class","svelte-jamjfg"),v(e,"class","scene-wrapper svelte-jamjfg")},m(g,w){$(g,e,w),h&&h.m(e,null),y(e,t),y(e,n),y(n,i),s[10](i),y(n,r),y(n,a),s[11](a),y(e,c),y(e,u),s[12](u),y(e,f),d&&d.m(e,null)},p(g,[w]){var x,_,k,C,N,A;((_=(x=g[6])==null?void 0:x.debug)==null?void 0:_.pd)&&g[1]?h?h.p(g,w):(h=qi(g),h.c(),h.m(e,t)):h&&(h.d(1),h=null),w&64&&o!==(o=`display: ${((C=(k=g[6])==null?void 0:k.debug)==null?void 0:C.generatePerf)?"visible":"none"}`)&&v(i,"style",o),w&64&&l!==(l=`display: ${((A=(N=g[6])==null?void 0:N.debug)==null?void 0:A.renderPerf)?"visible":"none"}`)&&v(a,"style",l),g[7]?d||(d=Xi(),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},i:T,o:T,d(g){g&&M(e),h&&h.d(),s[10](null),s[11](null),s[12](null),d&&d.d()}}}function zu(s,e,t){let n,i,o=T,r=()=>(o(),o=Qn(p,k=>t(6,i=k)),p),a,l=T,c=()=>(l(),l=Qn(n,k=>t(7,a=k)),n);s.$$.on_destroy.push(()=>o()),s.$$.on_destroy.push(()=>l());let u,f,h,d,p,m,g;De(()=>{zi("render",g),zi("generate",m)});function w(k){ae[k?"unshift":"push"](()=>{m=k,t(3,m)})}function x(k){ae[k?"unshift":"push"](()=>{g=k,t(4,g)})}function _(k){ae[k?"unshift":"push"](()=>{u=k,t(0,u)})}return s.$$.update=()=>{s.$$.dirty&257&&u&&re&&!f&&t(8,f=new Ru(re,u)),s.$$.dirty&256&&c(t(5,n=f&&f.isLoading)),s.$$.dirty&512&&re&&(d&&d(),t(9,d=re.on("save",k=>t(1,h=k))))},pe&&r(t(2,p=pe.store)),[u,h,p,m,g,n,i,a,f,d,w,x,_]}class Bu extends X{constructor(e){super();J(this,e,zu,Fu,Z,{})}}function Wu(s){let e,t,n,i,o,r,a,l,c,u,f,h,d;return t=new de({props:{name:"Tutorial",icon:"hand"}}),t.$on("click",s[0]),o=new de({props:{name:"Report Bug",icon:"exclamation"}}),o.$on("click",s[1]),l=new de({props:{name:"Request Feature"}}),l.$on("click",s[2]),f=new de({props:{name:"Changelog"}}),f.$on("click",s[3]),{c(){e=b("div"),n=b("div"),V(t.$$.fragment),i=j(),r=b("div"),V(o.$$.fragment),a=j(),c=b("div"),V(l.$$.fragment),u=j(),h=b("div"),V(f.$$.fragment),O(n,"display","contents"),O(n,"--bg","#303030"),O(n,"--text","white"),O(r,"display","contents"),O(r,"--bg","#303030"),O(r,"--text","white"),O(c,"display","contents"),O(c,"--bg","#303030"),O(c,"--text","white"),O(h,"display","contents"),O(h,"--bg","#303030"),O(h,"--text","white"),v(e,"class","svelte-4ypi13")},m(p,m){$(p,e,m),y(e,n),D(t,n,null),y(e,i),y(e,r),D(o,r,null),y(e,a),y(e,c),D(l,c,null),y(e,u),y(e,h),D(f,h,null),d=!0},p:T,i(p){d||(S(t.$$.fragment,p),S(o.$$.fragment,p),S(l.$$.fragment,p),S(f.$$.fragment,p),d=!0)},o(p){P(t.$$.fragment,p),P(o.$$.fragment,p),P(l.$$.fragment,p),P(f.$$.fragment,p),d=!1},d(p){p&&M(e),R(t),R(o),R(l),R(f)}}}function Gu(s){return[()=>Ai.restart(),()=>Ue(vn,{timeout:0,title:"Report Bug",type:"error",props:{mode:"bug"}}),()=>Ue(vn,{timeout:0,title:"Request Feature",props:{mode:"feat"}}),()=>Ue(ku,{timeout:0})]}class Hu extends X{constructor(e){super();J(this,e,Gu,Wu,Z,{})}}function Uu(s){var m,g;let e,t,n,i,o,r=((g=(m=s[0])==null?void 0:m.meta.name)!=null?g:"")+"",a,l,c,u,f,h,d,p;return n=new mn({props:{icon:"folder",name:"Projects",component:zc}}),u=new mn({props:{icon:"question",component:Hu,right:!0}}),h=new mn({props:{icon:"cog",component:eu,right:!0}}),{c(){e=b("header"),t=b("div"),V(n.$$.fragment),i=j(),o=b("h3"),a=Y(r),l=j(),c=b("div"),V(u.$$.fragment),f=j(),d=b("div"),V(h.$$.fragment),v(t,"class","left svelte-1dyrwb1"),v(o,"class","svelte-1dyrwb1"),O(d,"display","contents"),O(d,"--min-width","250px"),v(c,"class","right svelte-1dyrwb1"),v(e,"class","svelte-1dyrwb1")},m(w,x){$(w,e,x),y(e,t),D(n,t,null),y(e,i),y(e,o),y(o,a),y(e,l),y(e,c),D(u,c,null),y(c,f),y(c,d),D(h,d,null),p=!0},p(w,[x]){var _,k;(!p||x&1)&&r!==(r=((k=(_=w[0])==null?void 0:_.meta.name)!=null?k:"")+"")&&ne(a,r)},i(w){p||(S(n.$$.fragment,w),S(u.$$.fragment,w),S(h.$$.fragment,w),p=!0)},o(w){P(n.$$.fragment,w),P(u.$$.fragment,w),P(h.$$.fragment,w),p=!1},d(w){w&&M(e),R(n),R(u),R(h)}}}function Yu(s,e,t){let n;const i=re.activeProject;return Pe(s,i,o=>t(0,n=o)),[n,i]}class qu extends X{constructor(e){super();J(this,e,Yu,Uu,Z,{})}}function Xu(s){let e,t,n,i,o,r,a,l,c,u,f,h,d,p,m;return e=new qo({}),n=new Sr({}),o=new tl({}),a=new lu({}),c=new qu({}),h=new Bu({}),{c(){V(e.$$.fragment),t=j(),V(n.$$.fragment),i=j(),V(o.$$.fragment),r=j(),V(a.$$.fragment),l=j(),V(c.$$.fragment),u=j(),f=b("main"),V(h.$$.fragment),d=j(),p=b("div"),v(p,"id","nodesystem-view"),v(p,"class","svelte-1hr3zx4"),v(f,"class","svelte-1hr3zx4")},m(g,w){D(e,g,w),$(g,t,w),D(n,g,w),$(g,i,w),D(o,g,w),$(g,r,w),D(a,g,w),$(g,l,w),D(c,g,w),$(g,u,w),$(g,f,w),D(h,f,null),y(f,d),y(f,p),s[1](p),m=!0},p:T,i(g){m||(S(e.$$.fragment,g),S(n.$$.fragment,g),S(o.$$.fragment,g),S(a.$$.fragment,g),S(c.$$.fragment,g),S(h.$$.fragment,g),m=!0)},o(g){P(e.$$.fragment,g),P(n.$$.fragment,g),P(o.$$.fragment,g),P(a.$$.fragment,g),P(c.$$.fragment,g),P(h.$$.fragment,g),m=!1},d(g){R(e,g),g&&M(t),R(n,g),g&&M(i),R(o,g),g&&M(r),R(a,g),g&&M(l),R(c,g),g&&M(u),g&&M(f),R(h),s[1](null)}}}function Ju(s,e,t){let n;De(async()=>{n.append(Ke.view.wrapper),Ke.view.handleResize()});function i(o){ae[o?"unshift":"push"](()=>{n=o,t(0,n)})}return[n,i]}class Zu extends X{constructor(e){super();J(this,e,Ju,Xu,Z,{})}}function Ku(s){return{c:T,m:T,i:T,o:T,d:T}}function Qu(s){let e,t;return e=new Zu({}),{c(){V(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){R(e,n)}}}function ef(s){let e;return{c(){e=b("p"),e.textContent="Loading"},m(t,n){$(t,e,n)},i:T,o:T,d(t){t&&M(e)}}}function tf(s){let e,t,n={ctx:s,current:null,token:null,hasCatch:!1,pending:ef,then:Qu,catch:Ku,value:0,blocks:[,,,]};return Et(pe.loadFromLocal(),n),{c(){e=le(),n.block.c()},m(i,o){$(i,e,o),n.block.m(i,n.anchor=o),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(i,[o]){s=i},i(i){t||(S(n.block),t=!0)},o(i){for(let o=0;o<3;o+=1){const r=n.blocks[o];P(r)}t=!1},d(i){i&&M(e),n.block.d(i),n.token=null,n=null}}}class nf extends X{constructor(e){super();J(this,e,null,tf,Z,{})}}let sf;try{sf=new nf({target:document.body})}catch(s){console.log(s)}
//# sourceMappingURL=index.d23121f1.js.map
