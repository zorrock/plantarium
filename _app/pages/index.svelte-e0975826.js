var Dl=Object.defineProperty,$l=Object.defineProperties;var Ol=Object.getOwnPropertyDescriptors;var $i=Object.getOwnPropertySymbols;var Cl=Object.prototype.hasOwnProperty,Vl=Object.prototype.propertyIsEnumerable;var Oi=(t,e,s)=>e in t?Dl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,Se=(t,e)=>{for(var s in e||(e={}))Cl.call(e,s)&&Oi(t,s,e[s]);if($i)for(var s of $i(e))Vl.call(e,s)&&Oi(t,s,e[s]);return t},Je=(t,e)=>$l(t,Ol(e));import{S as ve,i as ge,s as ye,e as T,K as zl,c as A,a as S,d as _,b as E,J as M,E as H,L as ht,v as Ct,M as Ae,N as jl,O as ne,g as I,l as he,o as V,p as de,q as L,t as W,h as X,j as Ee,F as si,k as R,m as F,P as Z,G as ni,H as ii,I as ri,Q as He,n as pe,R as mt,w as re,x as le,f as K,y as ae,B as oe,T as Fe,U as ls,V as lt,z as yo,A as _o,C as wo,W as Rl,X as Fl,Y as Bl,Z as Ue,_ as Ne,$ as Le,a0 as Qe,a1 as qe,a2 as ps,a3 as Ul,a4 as Yt,a5 as Ht,a6 as Rs,a7 as Ci,a8 as ql,a9 as Wl,aa as Xl,ab as Vi,ac as zi,ad as Yl,ae as ji}from"../chunks/index-b146c33d.js";import{w as Ye}from"../chunks/index-b524ff90.js";const Hl="0px 0px 2px rgba(0, 0, 0, 0.7)",Gl="0px 0px 5px rgba(0, 0, 0, 0.144)",Zl="0px 0px 5px rgba(0, 0, 0, 0.144)";var Jl={"dark_background-color":"#1a1a1a","dark_midground-color":"#303030","dark_foreground-color":"#444","dark_outline-color":"#212121","dark_text-color":"#ffffff",dark_shadow:Hl,"light_background-color":"#d0d0d0","light_midground-color":"white","light_foreground-color":"#e8e8e8","light_outline-color":"#b9b9b9","light_text-color":"#484848",light_shadow:Gl,"pinky_background-color":"#d0d0d0","pinky_foreground-color":"pink","pinky_outline-color":"#b9b9b9","pinky_text-color":"#484848",pinky_shadow:Zl};function Kl(t){const e={};return Object.entries(t).forEach(([s,n])=>{const[i,r]=s.split("_");i in e?e[i][r]=n:e[i]={[r]:n}}),e}const ai=Kl(Jl),Fs=Object.keys(ai);let cs="dark";"localStorage"in globalThis&&(cs="theme"in localStorage?localStorage.getItem("theme"):Fs[0]);Fs.includes(cs)||(cs=Fs[0]);const ms=Ye(ai[cs]),Ql=Ye(cs),bo=t=>{Fs.includes(t)?(ms.set(ai[t]),Ql.set(t),localStorage.setItem("theme",t)):console.warn("cannot set theme",t)};function ec(t){return xo("",typeof t=="string"?JSON.parse(t):t)}function xo(t,e){var s="";return Object.entries(e).forEach(function(n){var i=n[0],r=n[1];s+=typeof r=="object"?xo(""+Ri(t,i),r):"--"+Ri(t,i)+": "+r+";"}),s}function Ri(t,e){return t?e==="__default"?t:t+"-"+e:e}function tc(t){let e;return{c(){e=T("style"),this.h()},l(s){const n=zl('[data-svelte="svelte-14spz5y"]',document.head);e=A(n,"STYLE",{type:!0,id:!0});var i=S(e);i.forEach(_),n.forEach(_),this.h()},h(){E(e,"type","text/css"),E(e,"id","theme-css")},m(s,n){M(document.head,e),t[3](e)},p:H,i:H,o:H,d(s){_(e),t[3](null)}}}function sc(t,e,s){let n,i;ht(t,ms,c=>s(2,i=c));let r,a=!1;function o(){a||!r||(a=!0,s(0,r.innerHTML="* {transition: color 0.2s ease, background-color 0.2s ease, outline 0.2s ease !important;}",r),setTimeout(()=>{s(0,r.innerHTML=`* {transition: color 0.2s ease, background-color 0.2s ease, outline 0.2s ease !important;} :root{${n}}`,r),setTimeout(()=>{s(0,r.innerHTML=`:root{${n}}`,r),a=!1},200)},1))}Ct(()=>{s(0,r.innerHTML=`:root{${n}}`,r)});function l(c){Ae[c?"unshift":"push"](()=>{r=c,s(0,r)})}return t.$$.update=()=>{t.$$.dirty&4&&s(1,n=ec(i)),t.$$.dirty&2&&n&&o()},[r,n,i,l]}class nc extends ve{constructor(e){super(),ge(this,e,sc,tc,ye,{})}}function ic(){return"window"in globalThis}const Fi=ic();function Bi(t){const e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}function Mo(t){const e=t-1;return e*e*e+1}function Ui(t,{delay:e=0,duration:s=400,easing:n=jl}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:s,easing:n,css:r=>`opacity: ${r*i}`}}function Gt(t,{delay:e=0,duration:s=400,easing:n=Mo}={}){const i=getComputedStyle(t),r=+i.opacity,a=parseFloat(i.height),o=parseFloat(i.paddingTop),l=parseFloat(i.paddingBottom),c=parseFloat(i.marginTop),h=parseFloat(i.marginBottom),u=parseFloat(i.borderTopWidth),f=parseFloat(i.borderBottomWidth);return{delay:e,duration:s,easing:n,css:d=>`overflow: hidden;opacity: ${Math.min(d*20,1)*r};height: ${d*a}px;padding-top: ${d*o}px;padding-bottom: ${d*l}px;margin-top: ${d*c}px;margin-bottom: ${d*h}px;border-top-width: ${d*u}px;border-bottom-width: ${d*f}px;`}}function qi(t,{delay:e=0,duration:s=400,easing:n=Mo,start:i=0,opacity:r=0}={}){const a=getComputedStyle(t),o=+a.opacity,l=a.transform==="none"?"":a.transform,c=1-i,h=o*(1-r);return{delay:e,duration:s,easing:n,css:(u,f)=>`
			transform: ${l} scale(${1-c*f});
			opacity: ${o-h*f}
		`}}var rc=`<svg version="1.2" baseProfile="tiny" id="Ebene_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
	 x="0px" y="0px" width="100px" height="100px" viewBox="0 0 100 100" xml:space="preserve">
</svg>
`,ac=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  <title>branch</title>
  <path class="cls-1" d="M49.59,57.35,72.15,38.69"/>
  <path class="cls-1" d="M51.58,29.45,38,11.21"/>
  <path class="cls-1" d="M53.14,82.61,21.78,55.74"/>
  <path class="cls-1" d="M33.46,47.91l4,21"/>
  <polyline class="cls-1" points="56 97 50 58 51 28 56 16"/>
</svg>
`,oc='<svg id="e7691b6e-31fa-49a4-aaec-be19b623d191" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><style>.b50603dd-20d5-40a2-a0ce-2fdf3b92ec21{fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:5px;}</style></defs><title>checkmark</title><path class="b50603dd-20d5-40a2-a0ce-2fdf3b92ec21" d="M75.5,30,40.43,72.47a2,2,0,0,1-3.08,0L24.5,57"/></svg>',lc=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
<defs>
</defs>
	<circle  cx="50.37" cy="50.5" r="17.23"/>
  <path  d="M38.07,20.49,32.17,8.05,50.83,4.41l.61,13.8,12.13,2.28L68.73,8.05l14,10.16-9,10L81.17,38.7l12-5.47,3.34,17.3H81.93L80.57,63l12.59,6.37L82.7,83.62l-9-9.86L63.58,81.19l5.15,11.23-17.9,3.64V82.71L38.08,81.19,32.77,92.42,17.44,82.71l10.17-8.35L19.11,63,8.19,69.36,4.4,50.56H17.45l1.67-13.81L8.2,30.84l9.25-13.2,11.08,8.81Z"/>
</svg>
`,cc=`<svg
  xmlns="http://www.w3.org/2000/svg"
	viewBox="0 0 100 100">
  <line fill="none" stroke="#FFFFFF" stroke-width="5" stroke-miterlimit="10" x1="27.836" y1="72.164" x2="72.164" y2="27.836"/>
  <line fill="none" stroke="#FFFFFF" stroke-width="5" stroke-miterlimit="10" x1="27.836" y1="27.988" x2="72.164" y2="72.012"/>
</svg>
`,hc=`<svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M50.552 59.3295L39.0695 13.7056H60.2078L50.552 59.3295Z" stroke-linejoin="round"/>
<path d="M58.4305 77.2411C58.4305 80.8276 55.4725 83.7944 51.7497 83.7944C48.0269 83.7944 45.0688 80.8276 45.0688 77.2411C45.0688 73.6546 48.0269 70.6878 51.7497 70.6878C55.4725 70.6878 58.4305 73.6546 58.4305 77.2411Z"/>
</svg>
`,uc=`<svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">

<defs>
	<style>
		path{
			stroke: white;
			stroke-width: 5px;
		}
	</style>
</defs>

<path d="M23.5167 72.9513V32.1483H82.1056L87.6855 37.0307V76.09L82.1056 78.5312H29.4453L23.5167 72.9513Z" />
<path d="M23.2747 73.6489L12.3145 30.0463L15.8885 21.4688H71.8808L75.693 32.9055" />
<path d="M25.488 43.9781H86.7394" />
</svg>
`,fc=`<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
<path d="M70.5 26.5L77.5 23.5L82 32V69L77.5 82L64.5 92.5H47L32 82L18 46L21 40H27L35 57.5V15.5L39.5 11L45.5 13.5M70.5 26.5L69 15.5L58.5 14M70.5 26.5V57.5M58.5 14L55 8L45.5 13.5M58.5 14V49M45.5 13.5V49" stroke-width="5"/>
</svg>
`,dc=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  <defs>
    <style>.cls-1{fill:none;stroke:#fff;stroke-width:5px;}</style>
  </defs>
  <title>leaf</title>
  <path class="cls-1" d="M50.69,96.21,72.86,72.33,77,47,65.91,21.7,50.66,4.5"/>
  <path class="cls-1" d="M53.37,96.21,31.2,72.33,27.07,47,38.15,21.7,53.4,4.5"/>
</svg>`,pc=`<svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M30.2312 46.4809V15.6962L33.3006 8H40.8035L44.3844 11.0785V29.7203H52.9104L55.9798 33.8249H65.0173L68.0867 38.9557L76.2717 40.1529L79 56.0583L73.7139 72.9899L66.8931 93H36.5405L30.2312 75.5553L20 60.334L21.7052 50.2435L30.2312 46.4809ZM30.2312 46.4809V58.1107M44.3844 29.3783V46.3099M56.4913 34.5091V46.3099M68.7688 39.2978V50.4145" stroke="white" stroke-width="5"/>
</svg>
`,mc=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  <defs>
    <style>.cls-1{fill:none;stroke:#fff;stroke-width:5px;}</style>
  </defs>
  <title>stem</title>
  <path class="cls-1" d="M49,95.5l8.66-23.19L43.24,46.07l10.59-21L43.24,4.5"/>
</svg>`,vc=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" xml:space="preserve">
  <polygon fill="none" stroke="#FFFFFF" stroke-width="5" stroke-miterlimit="10" points="33.5,73.759 33.5,26.241 67.441,50 "/>
</svg>
`,gc=`<svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M54.7631 15.1799L91.7944 79.3201C93.9114 82.9867 91.2652 87.5701 87.0313 87.5701H12.9687C8.73476 87.5701 6.08857 82.9867 8.20552 79.3201L45.2368 15.1799C47.3538 11.5133 52.6462 11.5133 54.7631 15.1799Z" stroke="white" stroke-width="5" stroke-linejoin="round"/>
<ellipse cx="50.0578" cy="73.7787" rx="5.98166" ry="5.89858" fill="white"/>
<path d="M52.9755 60.2707C52.5275 63.7615 47.4723 63.7615 47.0243 60.2707L43.5981 33.5748C43.3678 31.781 44.7652 30.1929 46.5736 30.1929L53.4261 30.1929C55.2346 30.1929 56.6319 31.781 56.4017 33.5748L52.9755 60.2707Z" fill="white"/>
</svg>
`,yc=`<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
<path d="M32.7792 25.4477L45.6598 15.6472L61.6205 20.4075L67.2208 32.728L54.3402 46.4486L50.9801 59.3291V63.9218" stroke-width="8"/>
<path d="M47.3642 83.3434L44.983 79.0169L46.821 74.3331L51.3861 73.0881L55.5363 75.0446L56.307 80.8548L52.3347 84.3528L47.3642 83.3434Z" />
</svg>

`,_c=`<svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_725_292)">
<path d="M42 88.5V80V63.5L32 55L26 39.5L32 24.5L46 15L67.5 19L78 30.5V51.5L65 66.5V76V88.5L59.5 94.5H46L42 88.5Z" stroke="#303030" stroke-width="5"/>
<path d="M42 74L64.5 83" stroke="#303030" stroke-width="5"/>
<path d="M42.5 82.5L63 91" stroke="#303030" stroke-width="5"/>
<path d="M42 70L67 71" stroke="#303030" stroke-width="5"/>
<path d="M51.5 69.5L49.5 58.5L43.5 51.5L60.5 50.5L59 57.5L58 71.5" stroke="#303030" stroke-width="5"/>
<path d="M55 25.5L64.5 28.5L69 38V44" stroke="#303030" stroke-width="5"/>
<path d="M19 28.5L11.5 23.5M35 14L29 4.5M61 10L63 -0.5M78 19.5L90.5 10M85 39.5L92 39" stroke="#303030" stroke-width="5"/>
<path d="M22.5 50L14.5 52.5" stroke="#303030" stroke-width="5"/>
</g>
<defs>
<clipPath id="clip0_725_292">
<rect width="100" height="100" fill="white"/>
</clipPath>
</defs>
</svg>
`,wc=`<svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M42 86.5V78V61.5L32 53L26 37.5L32 22.5L46 13L67.5 17L78 28.5V49.5L65 64.5V74V86.5L59.5 92.5H46L42 86.5Z" stroke="#303030" stroke-width="5"/>
<path d="M42 72L64.5 81" stroke="#303030" stroke-width="5"/>
<path d="M42.5 80.5L63 89" stroke="#303030" stroke-width="5"/>
<path d="M42 68L67 69" stroke="#303030" stroke-width="5"/>
<path d="M51.5 67.5L49.5 56.5L43.5 49.5L60.5 48.5L59 55.5L58 69.5" stroke="#303030" stroke-width="5"/>
<path d="M55 23.5L64.5 26.5L69 36V42" stroke="#303030" stroke-width="5"/>
</svg>
`,Wi=Object.freeze(Object.defineProperty({__proto__:null,arrow:rc,branch:ac,checkmark:oc,cog:lc,cross:cc,exclamation:hc,folder:uc,hand:fc,leaf:dc,pointing:pc,stem:mc,triangle:vc,warning:gc,question:yc,bulb:_c,bulb_dark:wc},Symbol.toStringTag,{value:"Module"}));function bc(t){let e;return{c(){e=T("div"),this.h()},l(s){e=A(s,"DIV",{class:!0});var n=S(e);n.forEach(_),this.h()},h(){E(e,"class","icon-wrapper svelte-dl7u2q"),ne(e,"active",t[0]),ne(e,"dark",t[1]),ne(e,"circle",t[2])},m(s,n){I(s,e,n),e.innerHTML=t[3]},p(s,[n]){n&8&&(e.innerHTML=s[3]),n&1&&ne(e,"active",s[0]),n&2&&ne(e,"dark",s[1]),n&4&&ne(e,"circle",s[2])},i:H,o:H,d(s){s&&_(e)}}}function xc(t,e,s){let n,{name:i="triangle"}=e,{active:r=!1}=e,{dark:a=!1}=e,{circle:o=!1}=e;return t.$$set=l=>{"name"in l&&s(4,i=l.name),"active"in l&&s(0,r=l.active),"dark"in l&&s(1,a=l.dark),"circle"in l&&s(2,o=l.circle)},t.$$.update=()=>{t.$$.dirty&16&&s(3,n=i in Wi?Wi[i]:i.toString()+" icon not found")},[r,a,o,n,i]}class Jt extends ve{constructor(e){super(),ge(this,e,xc,bc,ye,{name:4,active:0,dark:1,circle:2})}}function Xi(t){let e,s,n,i;const r=[Ec,Mc],a=[];function o(l,c){return l[7]?0:1}return e=o(t),s=a[e]=r[e](t),{c(){s.c(),n=he()},l(l){s.l(l),n=he()},m(l,c){a[e].m(l,c),I(l,n,c),i=!0},p(l,c){let h=e;e=o(l),e===h?a[e].p(l,c):(pe(),V(a[h],1,1,()=>{a[h]=null}),de(),s=a[e],s?s.p(l,c):(s=a[e]=r[e](l),s.c()),L(s,1),s.m(n.parentNode,n))},i(l){i||(L(s),i=!0)},o(l){V(s),i=!1},d(l){a[e].d(l),l&&_(n)}}}function Mc(t){let e;return{c(){e=T("plant-icon"),this.h()},l(s){e=A(s,"PLANT-ICON",{name:!0,active:!0,class:!0}),S(e).forEach(_),this.h()},h(){mt(e,"name",t[1]),mt(e,"active",t[0]),mt(e,"class","svelte-1tlo55z")},m(s,n){I(s,e,n)},p(s,n){n&2&&mt(e,"name",s[1]),n&1&&mt(e,"active",s[0])},i:H,o:H,d(s){s&&_(e)}}}function Ec(t){let e,s,n;return e=new Jt({props:{name:t[1],active:t[0]}}),{c(){s=T("div"),re(e.$$.fragment),this.h()},l(i){s=A(i,"DIV",{style:!0});var r=S(s);le(e.$$.fragment,r),this.h()},h(){K(s,"display","contents"),K(s,"--width","25px")},m(i,r){I(i,s,r),ae(e,s,null),n=!0},p(i,r){const a={};r&2&&(a.name=i[1]),r&1&&(a.active=i[0]),e.$set(a)},i(i){n||(L(e.$$.fragment,i),n=!0)},o(i){V(e.$$.fragment,i),n=!1},d(i){i&&_(s),oe(e,i)}}}function Yi(t){let e,s;return{c(){e=T("p"),s=W(t[2]),this.h()},l(n){e=A(n,"P",{class:!0});var i=S(e);s=X(i,t[2]),i.forEach(_),this.h()},h(){E(e,"class","svelte-1tlo55z")},m(n,i){I(n,e,i),M(e,s)},p(n,i){i&4&&Ee(s,n[2])},d(n){n&&_(e)}}}function kc(t){let e,s,n,i,r,a,o,l,c=t[1]&&Xi(t),h=t[2]&&Yi(t);const u=t[10].default,f=si(u,t,t[9],null);return{c(){e=T("div"),s=T("button"),c&&c.c(),n=R(),h&&h.c(),i=R(),r=T("div"),f&&f.c(),this.h()},l(d){e=A(d,"DIV",{class:!0});var p=S(e);s=A(p,"BUTTON",{class:!0});var m=S(s);c&&c.l(m),n=F(m),h&&h.l(m),i=F(m),r=A(m,"DIV",{class:!0});var v=S(r);f&&f.l(v),v.forEach(_),m.forEach(_),p.forEach(_),this.h()},h(){E(r,"class","content svelte-1tlo55z"),s.disabled=t[5],E(s,"class","svelte-1tlo55z"),ne(s,"active",t[0]),ne(s,"invert",t[4]),ne(s,"useActive",t[3]),ne(s,"only-icon",!t[2]),ne(s,"has-icon",!!t[1]),E(e,"class","component-wrapper svelte-1tlo55z")},m(d,p){I(d,e,p),M(e,s),c&&c.m(s,null),M(s,n),h&&h.m(s,null),M(s,i),M(s,r),f&&f.m(r,null),t[11](s),a=!0,o||(l=Z(s,"click",t[8]),o=!0)},p(d,[p]){d[1]?c?(c.p(d,p),p&2&&L(c,1)):(c=Xi(d),c.c(),L(c,1),c.m(s,n)):c&&(pe(),V(c,1,1,()=>{c=null}),de()),d[2]?h?h.p(d,p):(h=Yi(d),h.c(),h.m(s,i)):h&&(h.d(1),h=null),f&&f.p&&(!a||p&512)&&ni(f,u,d,d[9],a?ri(u,d[9],p,null):ii(d[9]),null),(!a||p&32)&&(s.disabled=d[5]),p&1&&ne(s,"active",d[0]),p&16&&ne(s,"invert",d[4]),p&8&&ne(s,"useActive",d[3]),p&4&&ne(s,"only-icon",!d[2]),p&2&&ne(s,"has-icon",!!d[1])},i(d){a||(L(c),L(f,d),a=!0)},o(d){V(c),V(f,d),a=!1},d(d){d&&_(e),c&&c.d(),h&&h.d(),f&&f.d(d),t[11](null),o=!1,l()}}}function Sc(t,e,s){let n,{$$slots:i={},$$scope:r}=e,{icon:a=void 0}=e,{name:o=""}=e,{active:l=!1}=e,{useActive:c=!1}=e,{invert:h=!1}=e,{disabled:u=!1}=e,f;const d=He(),p=()=>{s(0,l=!l),d("click")};function m(v){Ae[v?"unshift":"push"](()=>{f=v,s(6,f)})}return t.$$set=v=>{"icon"in v&&s(1,a=v.icon),"name"in v&&s(2,o=v.name),"active"in v&&s(0,l=v.active),"useActive"in v&&s(3,c=v.useActive),"invert"in v&&s(4,h=v.invert),"disabled"in v&&s(5,u=v.disabled),"$$scope"in v&&s(9,r=v.$$scope)},t.$$.update=()=>{t.$$.dirty&64&&s(7,n=f&&!!f.parentElement)},[l,a,o,c,h,u,f,n,p,r,i,m]}class Xe extends ve{constructor(e){super(),ge(this,e,Sc,kc,ye,{icon:1,name:2,active:0,useActive:3,invert:4,disabled:5})}}var Kt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Eo={exports:{}},Cs=1;function Tc(){return Cs=(Cs*9301+49297)%233280,Cs/233280}function Ac(t){Cs=t}var Pc={nextValue:Tc,seed:Ac},Ln=Pc,At="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-",Mt,Hi,es;function Dn(){es=!1}function ko(t){if(!t){Mt!==At&&(Mt=At,Dn());return}if(t!==Mt){if(t.length!==At.length)throw new Error("Custom alphabet for shortid must be "+At.length+" unique characters. You submitted "+t.length+" characters: "+t);var e=t.split("").filter(function(s,n,i){return n!==i.lastIndexOf(s)});if(e.length)throw new Error("Custom alphabet for shortid must be "+At.length+" unique characters. These characters were not unique: "+e.join(", "));Mt=t,Dn()}}function Ic(t){return ko(t),Mt}function Nc(t){Ln.seed(t),Hi!==t&&(Dn(),Hi=t)}function Lc(){Mt||ko(At);for(var t=Mt.split(""),e=[],s=Ln.nextValue(),n;t.length>0;)s=Ln.nextValue(),n=Math.floor(s*t.length),e.push(t.splice(n,1)[0]);return e.join("")}function So(){return es||(es=Lc(),es)}function Dc(t){var e=So();return e[t]}function $c(){return Mt||At}var oi={get:$c,characters:Ic,seed:Nc,lookup:Dc,shuffled:So},sn=typeof window=="object"&&(window.crypto||window.msCrypto),$n;!sn||!sn.getRandomValues?$n=function(t){for(var e=[],s=0;s<t;s++)e.push(Math.floor(Math.random()*256));return e}:$n=function(t){return sn.getRandomValues(new Uint8Array(t))};var Oc=$n,Cc=function(t,e,s){for(var n=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*n*s/e.length),r="";;)for(var a=t(i),o=i;o--;)if(r+=e[a[o]&n]||"",r.length===+s)return r},Vc=oi,zc=Oc,jc=Cc;function Rc(t){for(var e=0,s,n="";!s;)n=n+jc(zc,Vc.get(),1),s=t<Math.pow(16,e+1),e++;return n}var Fc=Rc,Es=Fc,Bc=1567752802062,Uc=7,ks,Gi;function qc(t){var e="",s=Math.floor((Date.now()-Bc)*.001);return s===Gi?ks++:(ks=0,Gi=s),e=e+Es(Uc),e=e+Es(t),ks>0&&(e=e+Es(ks)),e=e+Es(s),e}var Wc=qc,Xc=oi;function Yc(t){if(!t||typeof t!="string"||t.length<6)return!1;var e=new RegExp("[^"+Xc.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]");return!e.test(t)}var Hc=Yc;(function(t){var e=oi,s=Wc,n=Hc,i=0;function r(c){return e.seed(c),t.exports}function a(c){return i=c,t.exports}function o(c){return c!==void 0&&e.characters(c),e.shuffled()}function l(){return s(i)}t.exports=l,t.exports.generate=l,t.exports.seed=r,t.exports.worker=a,t.exports.characters=o,t.exports.isValid=n})(Eo);var li=Eo.exports,st=(t=>(t.INFO="info",t.WARNING="warning",t.ERROR="error",t.SUCCESS="success",t))(st||{});const Gc=t=>(e,s={})=>{var a;if(!e&&!s)return;const n=Array.isArray(s==null?void 0:s.values),i={id:li(),type:st.INFO,content:e,props:s.props,title:(a=s==null?void 0:s.title)!=null?a:s==null?void 0:s.type,values:s==null?void 0:s.values,timeout:s==null?void 0:s.timeout},r=new Promise((o,l)=>{i.resolve=o,i.reject=()=>o(void 0)});if(r.finally(()=>t.update(o=>o.filter(l=>l.id!==i.id))),s&&"type"in s){const o=s.type.toLowerCase();Object.values(st).forEach(l=>{o===l&&(i.type=l)})}if(e instanceof Error&&(i.type=st.ERROR),typeof i.timeout=="undefined"){let o;i.type===st.SUCCESS&&(o=3e3),i.type===st.INFO&&(o=2e3),i.type===st.WARNING&&(o=7e3),o&&!n&&(i.timeout=o)}return"title"in i||(i.title=i.type.toUpperCase().slice(0,1)+i.type.slice(1)),t.update(o=>[...o,i]),i.timeout&&setTimeout(i.resolve,i.timeout),r};var To=()=>{const t=Ye([]);t.subscribe(console.log);const e=Gc(t);return{store:t,createMessage:e,MessageType:st}};const{store:Zc,createMessage:Jc,MessageType:sg}=To(),Kc=Zc,vt=Jc;function Zi(t,e,s){const n=t.slice();return n[7]=e[s],n}function Ji(t){let e,s,n,i,r,a,o,l,c,h,u,f,d,p;i=new Xe({props:{icon:"cross"}}),i.$on("click",t[4]);let m=t[0].title&&Ki(t);const v=[eh,Qc],g=[];function x(y,k){return typeof y[0].content=="string"?0:1}l=x(t),c=g[l]=v[l](t);let w=t[0].values&&Qi(t);return{c(){e=T("div"),s=T("div"),n=T("div"),r=T("div"),re(i.$$.fragment),a=R(),m&&m.c(),o=R(),c.c(),h=R(),w&&w.c(),this.h()},l(y){e=A(y,"DIV",{class:!0});var k=S(e);s=A(k,"DIV",{class:!0});var b=S(s);n=A(b,"DIV",{class:!0});var $=S(n);r=A($,"DIV",{style:!0});var P=S(r);le(i.$$.fragment,P),$.forEach(_),a=F(b),m&&m.l(b),o=F(b),c.l(b),h=F(b),w&&w.l(b),b.forEach(_),k.forEach(_),this.h()},h(){K(r,"display","contents"),K(r,"--foreground-color","transparent"),E(n,"class","close-wrapper svelte-3vp4n3"),E(s,"class",u="alert-wrapper alert-"+t[0].type+" svelte-3vp4n3"),ne(s,"isInverted",t[1]),E(e,"class","alert-container svelte-3vp4n3")},m(y,k){I(y,e,k),M(e,s),M(s,n),M(n,r),ae(i,r,null),M(s,a),m&&m.m(s,null),M(s,o),g[l].m(s,null),M(s,h),w&&w.m(s,null),p=!0},p(y,k){y[0].title?m?m.p(y,k):(m=Ki(y),m.c(),m.m(s,o)):m&&(m.d(1),m=null);let b=l;l=x(y),l===b?g[l].p(y,k):(pe(),V(g[b],1,1,()=>{g[b]=null}),de(),c=g[l],c?c.p(y,k):(c=g[l]=v[l](y),c.c()),L(c,1),c.m(s,h)),y[0].values?w?(w.p(y,k),k&1&&L(w,1)):(w=Qi(y),w.c(),L(w,1),w.m(s,null)):w&&(pe(),V(w,1,1,()=>{w=null}),de()),(!p||k&1&&u!==(u="alert-wrapper alert-"+y[0].type+" svelte-3vp4n3"))&&E(s,"class",u),k&3&&ne(s,"isInverted",y[1])},i(y){p||(L(i.$$.fragment,y),L(c),L(w),ls(()=>{f||(f=lt(s,qi,{},!0)),f.run(1)}),ls(()=>{d||(d=lt(e,Ui,{},!0)),d.run(1)}),p=!0)},o(y){V(i.$$.fragment,y),V(c),V(w),f||(f=lt(s,qi,{},!1)),f.run(0),d||(d=lt(e,Ui,{},!1)),d.run(0),p=!1},d(y){y&&_(e),oe(i),m&&m.d(),g[l].d(),w&&w.d(),y&&f&&f.end(),y&&d&&d.end()}}}function Ki(t){let e,s=t[0].title+"",n;return{c(){e=T("h2"),n=W(s),this.h()},l(i){e=A(i,"H2",{class:!0});var r=S(e);n=X(r,s),r.forEach(_),this.h()},h(){E(e,"class","svelte-3vp4n3")},m(i,r){I(i,e,r),M(e,n)},p(i,r){r&1&&s!==(s=i[0].title+"")&&Ee(n,s)},d(i){i&&_(e)}}}function Qc(t){let e,s,n;const i=[t[0].props];var r=t[0].content;function a(o){let l={};for(let c=0;c<i.length;c+=1)l=wo(l,i[c]);return{props:l}}return r&&(e=new r(a()),e.$on("close",t[5])),{c(){e&&re(e.$$.fragment),s=he()},l(o){e&&le(e.$$.fragment,o),s=he()},m(o,l){e&&ae(e,o,l),I(o,s,l),n=!0},p(o,l){const c=l&1?yo(i,[_o(o[0].props)]):{};if(r!==(r=o[0].content)){if(e){pe();const h=e;V(h.$$.fragment,1,0,()=>{oe(h,1)}),de()}r?(e=new r(a()),e.$on("close",o[5]),re(e.$$.fragment),L(e.$$.fragment,1),ae(e,s.parentNode,s)):e=null}else r&&e.$set(c)},i(o){n||(e&&L(e.$$.fragment,o),n=!0)},o(o){e&&V(e.$$.fragment,o),n=!1},d(o){o&&_(s),e&&oe(e,o)}}}function eh(t){let e,s=t[0].content+"";return{c(){e=T("p")},l(n){e=A(n,"P",{});var i=S(e);i.forEach(_)},m(n,i){I(n,e,i),e.innerHTML=s},p(n,i){i&1&&s!==(s=n[0].content+"")&&(e.innerHTML=s)},i:H,o:H,d(n){n&&_(e)}}}function Qi(t){let e,s,n=t[0].values,i=[];for(let a=0;a<n.length;a+=1)i[a]=er(Zi(t,n,a));const r=a=>V(i[a],1,1,()=>{i[a]=null});return{c(){e=T("div");for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=A(a,"DIV",{class:!0});var o=S(e);for(let l=0;l<i.length;l+=1)i[l].l(o);o.forEach(_),this.h()},h(){E(e,"class","options-wrapper svelte-3vp4n3")},m(a,o){I(a,e,o);for(let l=0;l<i.length;l+=1)i[l].m(e,null);s=!0},p(a,o){if(o&1){n=a[0].values;let l;for(l=0;l<n.length;l+=1){const c=Zi(a,n,l);i[l]?(i[l].p(c,o),L(i[l],1)):(i[l]=er(c),i[l].c(),L(i[l],1),i[l].m(e,null))}for(pe(),l=n.length;l<i.length;l+=1)r(l);de()}},i(a){if(!s){for(let o=0;o<n.length;o+=1)L(i[o]);s=!0}},o(a){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)V(i[o]);s=!1},d(a){a&&_(e),Fe(i,a)}}}function er(t){let e,s,n;function i(){return t[6](t[7])}return e=new Xe({props:{name:t[7]}}),e.$on("click",i),{c(){s=T("div"),re(e.$$.fragment),this.h()},l(r){s=A(r,"DIV",{style:!0});var a=S(s);le(e.$$.fragment,a),this.h()},h(){K(s,"display","contents"),K(s,"--bg","#303030"),K(s,"--text","white"),K(s,"--margin","0 10px 0 0")},m(r,a){I(r,s,a),ae(e,s,null),n=!0},p(r,a){t=r;const o={};a&1&&(o.name=t[7]),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){V(e.$$.fragment,r),n=!1},d(r){r&&_(s),oe(e,r)}}}function th(t){let e,s,n,i,r=t[0]&&Ji(t);return{c(){r&&r.c(),e=he()},l(a){r&&r.l(a),e=he()},m(a,o){r&&r.m(a,o),I(a,e,o),s=!0,n||(i=Z(window,"keydown",t[2]),n=!0)},p(a,[o]){a[0]?r?(r.p(a,o),o&1&&L(r,1)):(r=Ji(a),r.c(),L(r,1),r.m(e.parentNode,e)):r&&(pe(),V(r,1,1,()=>{r=null}),de())},i(a){s||(L(r),s=!0)},o(a){V(r),s=!1},d(a){r&&r.d(a),a&&_(e),n=!1,i()}}}function sh(t,e,s){let n,i,r;ht(t,Kc,h=>s(3,r=h));function a(h){h.key==="Escape"&&n&&n.reject()}const o=()=>{n.reject()},l=()=>n.resolve(!1),c=h=>n.resolve(h);return t.$$.update=()=>{t.$$.dirty&8&&s(0,n=r[0]),t.$$.dirty&1&&(n?Fi&&document.body.classList.add("overlay-visible"):Fi&&document.body.classList.remove("overlay-visible")),t.$$.dirty&1&&s(1,i=n&&(n.type==="success"||n.type==="warning"))},[n,i,a,r,o,l,c]}class Ao extends ve{constructor(e){super(),ge(this,e,sh,th,ye,{})}}const{store:nh,createMessage:ih}=To(),rh=nh,Dt=ih;var ah=(t,...e)=>{const s=(i,r)=>{Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r).map(a=>a.toString())).forEach(a=>{a.match(/^(?:constructor|prototype|arguments|caller|name|bind|call|apply|toString|length)$/)||Object.defineProperty(i,a,Object.getOwnPropertyDescriptor(r,a))})},n=class extends t{constructor(...r){super(...r),e.forEach(a=>s(this,new a))}};return e.forEach(i=>{s(n.prototype,i.prototype),s(n,i)}),n};const On=class extends Error{constructor(t,e={}){super(t),this.detail=t,this.meta=e}static fromParent(t,e,s,n){return new On(s,Object.assign({cause:t},n))}getCause(){return this.meta.cause||void 0}unwrapChain(t=this){return On.unwrapChain(t)}};let oh=On;oh.unwrapChain=t=>{const e=[t];let s=t.getCause();for(;s;)e.push(s),s=s.getCause();return e};var tr=t=>{t[0]==="#"&&(t=t.replace("#","")),t.length===3&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);const e=t.match(/.{1,2}/g);return[parseInt(e[0],16)/255,parseInt(e[1],16)/255,parseInt(e[2],16)/255]};const rt=.4;function lh(t,e,s,n,i,r,a,o,l,c){const h=i-s,u=a-i,f=l-a,d=r-n,p=o-r,m=c-o;let v,g,x,w,y=-1e4,k=-1e4;const b=[{x:s,y:n}];for(let $=1;$<t;$++){const P=$/t;v=s+h*P,x=i+u*P;const D=a+f*P;v+=(x-v)*P,x+=(D-x)*P,g=n+d*P,w=r+p*P;const j=o+m*P;g+=(w-g)*P,w+=(j-w)*P;const B=v+(x-v)*P,z=g+(w-g)*P,C=B-y,N=z-k;C*C+N*N>e&&(b.push({x:B,y:z}),y=B,k=z)}return b.push({x:l,y:c}),b}function ch(t){const e=t.length-1;return t.map((s,n,i)=>{if(n===0)return{rx:i[n+1].x*rt*0,ry:s.y+(i[n+1].y-s.y)*rt*0};if(n===e)return{lx:i[n-1].x+(s.x-i[n-1].x)*rt*2,ly:i[n-1].y+(s.y-i[n-1].y)*rt*2};if(s.y>i[n+1].y&&s.y>i[n-1].y||s.y<i[n+1].y&&s.y<i[n-1].y)return{lx:i[n-1].x+(s.x-i[n-1].x)*rt,ly:s.y,rx:s.x+(i[n+1].x-s.x)*rt,ry:s.y};{const a={x:i[n-1].x-i[n+1].x,y:i[n-1].y-i[n+1].y},o=Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2));a.x/=o,a.y/=o;const l=i[n+1].x-s.x,c=s.x-i[n-1].x;return{lx:s.x+a.x*c*rt,ly:s.y+a.y*c*rt,rx:s.x-a.x*l*rt,ry:s.y-a.y*l*rt}}})}function hh(t){const e=t.length-1,s={},n=ch(t);return t.map((i,r,a)=>{if(r<e)return lh(e*20,0,i.x,i.y,n[r].rx,n[r].ry,n[r+1].lx,n[r+1].ly,a[r+1].x,a[r+1].y)}).flat().filter(i=>!i||i.x in s?!1:(s[i.x]=!0,!0))}function Po(t,e,s){let n;return(...i)=>{const r=()=>{n=null,s||t(...i)},a=s&&!n;clearTimeout(n),n=setTimeout(r,e),a&&t(...i)}}function uh(t,e=!1){return function(s,n,i){let r;const a=i.value;return i.value=function(...o){const l=()=>{r=null,e||a.apply(this,o)},c=e&&!r;clearTimeout(r),r=setTimeout(l,t),c&&a.apply(this,o)},i}}var fh={exports:{}};(function(t,e){(function(s,n){n()})(Kt,function(){function s(c,h){return typeof h=="undefined"?h={autoBom:!1}:typeof h!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function n(c,h,u){var f=new XMLHttpRequest;f.open("GET",c),f.responseType="blob",f.onload=function(){l(f.response,h,u)},f.onerror=function(){console.error("could not download file")},f.send()}function i(c){var h=new XMLHttpRequest;h.open("HEAD",c,!1);try{h.send()}catch{}return 200<=h.status&&299>=h.status}function r(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(h)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Kt=="object"&&Kt.global===Kt?Kt:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(c,h,u){var f=a.URL||a.webkitURL,d=document.createElement("a");h=h||c.name||"download",d.download=h,d.rel="noopener",typeof c=="string"?(d.href=c,d.origin===location.origin?r(d):i(d.href)?n(c,h,u):r(d,d.target="_blank")):(d.href=f.createObjectURL(c),setTimeout(function(){f.revokeObjectURL(d.href)},4e4),setTimeout(function(){r(d)},0))}:"msSaveOrOpenBlob"in navigator?function(c,h,u){if(h=h||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(s(c,u),h);else if(i(c))n(c,h,u);else{var f=document.createElement("a");f.href=c,f.target="_blank",setTimeout(function(){r(f)})}}:function(c,h,u,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof c=="string")return n(c,h,u);var d=c.type==="application/octet-stream",p=/constructor/i.test(a.HTMLElement)||a.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||d&&p||o)&&typeof FileReader!="undefined"){var v=new FileReader;v.onloadend=function(){var w=v.result;w=m?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=w:location=w,f=null},v.readAsDataURL(c)}else{var g=a.URL||a.webkitURL,x=g.createObjectURL(c);f?f.location=x:location.href=x,f=null,setTimeout(function(){g.revokeObjectURL(x)},4e4)}});a.saveAs=l.saveAs=l,t.exports=l})})(fh);function Js(t,e){let s,n,i,r=null,a=0;const o=t,l=()=>{a=0,r=null,i=o.apply(s,n),r||(s=n=null)};return function(){const h=Date.now();a||(a=h);const u=e-(h-a);return s=this,n=arguments,u<=0||u>e?(r&&(clearTimeout(r),r=null),a=h,i=o.apply(s,n),r||(s=n=null)):r||(r=setTimeout(l,u)),i}}const ot={amountEmitters:0,amountCallbacks:0,emitters:[]};typeof self!="undefined"&&"window"in self&&(globalThis.debug=ot);class it{constructor(){this.index=0,this.cbs={},this.cbsOnce={},this.index=ot.amountEmitters,ot.amountEmitters++}emit(e,s){e in this.cbs&&this.cbs[e].forEach(n=>n(s)),e in this.cbsOnce&&(this.cbsOnce[e].forEach(n=>n(s)),delete this.cbsOnce[e])}on(e,s,n=0){n>0&&(s=Js(s,n));const i=Object.assign(this.cbs,{[e]:[...this.cbs[e]||[],s]});return this.cbs=i,ot.emitters[this.index]={name:this.constructor.name,cbs:Object.fromEntries(Object.keys(this.cbs).map(r=>[r,this.cbs[r].length]))},ot.amountCallbacks++,()=>{var r;ot.amountCallbacks--,(r=i[e])==null||r.splice(i[e].indexOf(s),1),ot.emitters[this.index]={name:this.constructor.name,cbs:Object.fromEntries(Object.keys(this.cbs).map(a=>[a,this.cbs[a].length]))}}}once(e,s){return this.cbsOnce[e]=[...this.cbsOnce[e]||[],s],()=>{this.cbsOnce[e].splice(this.cbsOnce[e].indexOf(s),1)}}destroyEventEmitter(){ot.amountEmitters--,Object.keys(this.cbs).forEach(e=>{ot.amountCallbacks-=this.cbs[e].length,delete this.cbs[e]}),Object.keys(this.cbsOnce).forEach(e=>delete this.cbsOnce[e]),this.cbs={},this.cbsOnce={},delete ot.emitters[this.index]}}function dh(t){if(t.length===0)return 0;let e=0;for(let s=0;s<t.length;s++)e=(e<<5)-e+t.charCodeAt(s),e=e&e;return e}var ph=()=>{const t={};let e=0;const s=(n=0,i=0)=>{if(i>500)throw new Error("Infinite loop in id generation algo");return n in t?s(Math.max(n++,e++),i+1):(t[n]=!0,n.toString())};return s.reset=()=>{Object.keys(t).forEach(n=>delete t[+n]),e=0},s};function mh(t,e){const s=[],n=t.length/e;for(let i=0;i<n;i++){const r=[];for(let a=0;a<e;a++)r[a]=t[i*e+a];s.push(r)}return s}const bt=t=>t>1?"s":"",sr=t=>{if(typeof t!="number"||isNaN(t))return"never";if(t<1e3)return"< 1 second";const e=Math.floor(t/1e3);if(e<60)return e+" second"+bt(e);const s=Math.floor(e/60);if(s<60)return s+" minute"+bt(s);const n=Math.floor(s/60);if(n<24)return n+" hour"+bt(n);const i=Math.floor(n/24);if(i<7)return i+" day"+bt(i);const r=Math.floor(i/7);if(r<30)return r+" week"+bt(r);const a=Math.floor(r/30);if(a<12)return a+" month"+bt(a);const o=Math.floor(a/12);if(o<10)return o+" year"+bt(o);const l=Math.floor(a/10);return l+" decade"+bt(l)};function nn(t){let e,s={length:NaN};const n=(i,r)=>i===s[r];return function(...r){return(r.length!==s.length||!r.every(n))&&(s=r,e=t.apply(this,r)),e}}function nr(t){let e=t[0],s=t[1],n=t[2];return Math.sqrt(e*e+s*s+n*n)}function Cn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function vh(t,e,s,n){return t[0]=e,t[1]=s,t[2]=n,t}function ir(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t}function rr(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t[2]=e[2]-s[2],t}function gh(t,e,s){return t[0]=e[0]*s[0],t[1]=e[1]*s[1],t[2]=e[2]*s[2],t}function yh(t,e,s){return t[0]=e[0]/s[0],t[1]=e[1]/s[1],t[2]=e[2]/s[2],t}function rn(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function _h(t,e){let s=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(s*s+n*n+i*i)}function wh(t,e){let s=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return s*s+n*n+i*i}function ar(t){let e=t[0],s=t[1],n=t[2];return e*e+s*s+n*n}function bh(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function xh(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Vn(t,e){let s=e[0],n=e[1],i=e[2],r=s*s+n*n+i*i;return r>0&&(r=1/Math.sqrt(r)),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function Io(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function or(t,e,s){let n=e[0],i=e[1],r=e[2],a=s[0],o=s[1],l=s[2];return t[0]=i*l-r*o,t[1]=r*a-n*l,t[2]=n*o-i*a,t}function Mh(t,e,s,n){let i=e[0],r=e[1],a=e[2];return t[0]=i+n*(s[0]-i),t[1]=r+n*(s[1]-r),t[2]=a+n*(s[2]-a),t}function Eh(t,e,s){let n=e[0],i=e[1],r=e[2],a=s[3]*n+s[7]*i+s[11]*r+s[15];return a=a||1,t[0]=(s[0]*n+s[4]*i+s[8]*r+s[12])/a,t[1]=(s[1]*n+s[5]*i+s[9]*r+s[13])/a,t[2]=(s[2]*n+s[6]*i+s[10]*r+s[14])/a,t}function kh(t,e,s){let n=e[0],i=e[1],r=e[2],a=s[3]*n+s[7]*i+s[11]*r+s[15];return a=a||1,t[0]=(s[0]*n+s[4]*i+s[8]*r)/a,t[1]=(s[1]*n+s[5]*i+s[9]*r)/a,t[2]=(s[2]*n+s[6]*i+s[10]*r)/a,t}function Sh(t,e,s){let n=e[0],i=e[1],r=e[2],a=s[0],o=s[1],l=s[2],c=s[3],h=o*r-l*i,u=l*n-a*r,f=a*i-o*n,d=o*f-l*u,p=l*h-a*f,m=a*u-o*h,v=c*2;return h*=v,u*=v,f*=v,d*=2,p*=2,m*=2,t[0]=n+h+d,t[1]=i+u+p,t[2]=r+f+m,t}const Th=function(){const t=[0,0,0],e=[0,0,0];return function(s,n){Cn(t,s),Cn(e,n),Vn(t,t),Vn(e,e);let i=Io(t,e);return i>1?0:i<-1?Math.PI:Math.acos(i)}}();function Ah(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}const Ph=t=>!!t.length,Ih=t=>!!t.draw;class fe extends Array{constructor(e=0,s=e,n=e){return super(e,s,n),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e}set y(e){this[1]=e}set z(e){this[2]=e}set(e,s=e,n=e){return Ph(e)?this.copy(e):(vh(this,e,s,n),this)}copy(e){return Cn(this,e),this}add(e,s){return s?ir(this,e,s):ir(this,this,e),this}sub(e,s){return s?rr(this,e,s):rr(this,this,e),this}multiply(e){return e.length?gh(this,this,e):rn(this,this,e),this}divide(e){return e.length?yh(this,this,e):rn(this,this,1/e),this}inverse(e=this){return xh(this,e),this}len(){return nr(this)}distance(e){return e?_h(this,e):nr(this)}squaredLen(){return ar(this)}squaredDistance(e){return e?wh(this,e):ar(this)}negate(e=this){return bh(this,e),this}cross(e,s){return s?or(this,e,s):or(this,this,e),this}scale(e){return rn(this,this,e),this}normalize(){return Vn(this,this),this}dot(e){return Io(this,e)}equals(e){return Ah(this,e)}applyMatrix4(e){return Eh(this,this,e),this}scaleRotateMatrix4(e){return kh(this,this,e),this}applyQuaternion(e){return Sh(this,this,e),this}angle(e){return Th(this,e)}lerp(e,s){return Mh(this,this,e,s),this}clone(){return new fe(this[0],this[1],this[2])}fromArray(e,s=0){return this[0]=e[s],this[1]=e[s+1],this[2]=e[s+2],this}toArray(e=[],s=0){return e[s]=this[0],e[s+1]=this[1],e[s+2]=this[2],e}transformDirection(e){const s=this[0],n=this[1],i=this[2];return this[0]=e[0]*s+e[4]*n+e[8]*i,this[1]=e[1]*s+e[5]*n+e[9]*i,this[2]=e[2]*s+e[6]*n+e[10]*i,this.normalize()}}const St=new fe;let Nh=1,Lh=1,lr=!1;class Nt{constructor(e,s={}){this.raycast="box",e.canvas||console.error("gl not passed as fist argument to Geometry"),this.gl=e,this.attributes=s,this.id=Nh++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let n in s)this.addAttribute(n,s[n])}addAttribute(e,s){if(this.attributes[e]=s,s.id=Lh++,s.size=s.size||1,s.type=s.type||(s.data.constructor===Float32Array?this.gl.FLOAT:s.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),s.target=e==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,s.normalized=s.normalized||!1,s.stride=s.stride||0,s.offset=s.offset||0,s.count=s.count||(s.stride?s.data.byteLength/s.stride:s.data.length/s.size),s.divisor=s.instanced||0,s.needsUpdate=!1,s.buffer||(s.buffer=this.gl.createBuffer(),this.updateAttribute(s)),s.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==s.count*s.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,s.count*s.divisor);this.instancedCount=s.count*s.divisor}else e==="index"?this.drawRange.count=s.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,s.count))}updateAttribute(e){this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),this.gl.bufferData(e.target,e.data,this.gl.STATIC_DRAW),e.needsUpdate=!1}setIndex(e){this.addAttribute("index",e)}setDrawRange(e,s){this.drawRange.start=e,this.drawRange.count=s}setInstancedCount(e){this.instancedCount=e}createVAO(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}bindAttributes(e){e.attributeLocations.forEach((s,{name:n,type:i})=>{if(!this.attributes[n]){console.warn(`active attribute ${n} not being supplied`);return}const r=this.attributes[n];this.gl.bindBuffer(r.target,r.buffer),this.glState.boundBuffer=r.buffer;let a=1;i===35674&&(a=2),i===35675&&(a=3),i===35676&&(a=4);const o=r.size/a,l=a===1?0:a*a*a,c=a===1?0:a*a;for(let h=0;h<a;h++)this.gl.vertexAttribPointer(s+h,o,r.type,r.normalized,r.stride+l,r.offset+h*c),this.gl.enableVertexAttribArray(s+h),this.gl.renderer.vertexAttribDivisor(s+h,r.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:e,mode:s=this.gl.TRIANGLES}){this.gl.renderer.currentGeometry!==`${this.id}_${e.attributeOrder}`&&(this.VAOs[e.attributeOrder]||this.createVAO(e),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${e.attributeOrder}`),e.attributeLocations.forEach((n,{name:i})=>{const r=this.attributes[i];r.needsUpdate&&this.updateAttribute(r)}),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(s,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*2,this.instancedCount):this.gl.renderer.drawArraysInstanced(s,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(s,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*2):this.gl.drawArrays(s,this.drawRange.start,this.drawRange.count)}getPosition(){const e=this.attributes.position;if(e.data)return e;if(!lr)return console.warn("No position buffer data found to compute bounds"),lr=!0}computeBoundingBox(e=null){e||(e=this.getPosition());const s=e.data,n=e.offset||0,i=e.stride||e.size;this.bounds||(this.bounds={min:new fe,max:new fe,center:new fe,scale:new fe,radius:1/0});const r=this.bounds.min,a=this.bounds.max,o=this.bounds.center,l=this.bounds.scale;r.set(1/0),a.set(-1/0);for(let c=n,h=s.length;c<h;c+=i){const u=s[c],f=s[c+1],d=s[c+2];r.x=Math.min(u,r.x),r.y=Math.min(f,r.y),r.z=Math.min(d,r.z),a.x=Math.max(u,a.x),a.y=Math.max(f,a.y),a.z=Math.max(d,a.z)}l.sub(a,r),o.add(r,a).divide(2)}computeBoundingSphere(e=null){e||(e=this.getPosition());const s=e.data,n=e.offset||0,i=e.stride||e.size;this.bounds||this.computeBoundingBox(e);let r=0;for(let a=n,o=s.length;a<o;a+=i)St.fromArray(s,a),r=Math.max(r,this.bounds.center.squaredDistance(St));this.bounds.radius=Math.sqrt(r)}computeVertexNormals(){const e=this.attributes.position;if(!e)return;let s=this.attributes.normal;s?s.data.fill(0):(this.addAttribute("normal",{size:3,data:new Float32Array(e.count*3)}),s=this.attributes.normal);const n=new fe,i=new fe,r=new fe,a=new fe,o=new fe,l=new fe,c=new fe,h=new fe,u=this.attributes.index;if(u){let f,d,p;for(let m=0,v=u.count;m<v;m+=3)f=u.data[m],d=u.data[m+1],p=u.data[m+2],n.fromArray(e.data,f*e.size),i.fromArray(e.data,d*e.size),r.fromArray(e.data,p*e.size),c.sub(r,i),h.sub(n,i),c.cross(h),a.fromArray(s.data,f*s.size),o.fromArray(s.data,d*s.size),l.fromArray(s.data,p*s.size),a.add(c),o.add(c),l.add(c),f*=s.size,s.data[f]=a.x,s.data[f+1]=a.y,s.data[f+2]=a.z,d*=s.size,s.data[d]=o.x,s.data[d+1]=o.y,s.data[d+2]=o.z,p*=s.size,s.data[p]=l.x,s.data[p+1]=l.y,s.data[p+2]=l.z}else for(let f=0,d=e.count;f<d;f+=3)n.fromArray(e.data,f*e.size),i.fromArray(e.data,(f+1)*e.size),r.fromArray(e.data,(f+2)*e.size),c.sub(r,i),h.sub(n,i),c.cross(h),s.data[f*s.size]=c.x,s.data[f*s.size+1]=c.y,s.data[f*s.size+2]=c.z,s.data[(f+1)*s.size]=c.x,s.data[(f+1)*s.size+1]=c.y,s.data[(f+1)*s.size+2]=c.z,s.data[(f+2)*s.size]=c.x,s.data[(f+2)*s.size+1]=c.y,s.data[(f+2)*s.size+2]=c.z;this.normalizeNormals(),s.needsUpdate=!0}normalizeNormals(){const e=this.attributes.normal;for(let s=0,n=e.count;s<n;s++)St.fromArray(e.data,s*e.size),St.normalize(),e.data[s*e.size]=St.x,e.data[s*e.size+1]=St.y,e.data[s*e.size+2]=St.z}remove(){for(let e in this.attributes)this.gl.deleteBuffer(this.attributes[e].buffer),delete this.attributes[e]}}let Dh=1;const cr={};class hs{constructor(e,{vertex:s,fragment:n,uniforms:i={},transparent:r=!1,cullFace:a=e.BACK,frontFace:o=e.CCW,depthTest:l=!0,depthWrite:c=!0,depthFunc:h=e.LESS}={}){e.canvas||console.error("gl not passed as fist argument to Program"),this.gl=e,this.uniforms=i,this.id=Dh++,s||console.warn("vertex shader not supplied"),n||console.warn("fragment shader not supplied"),this.transparent=r,this.cullFace=a,this.frontFace=o,this.depthTest=l,this.depthWrite=c,this.depthFunc=h,this.blendFunc={},this.blendEquation={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA));const u=e.createShader(e.VERTEX_SHADER);e.shaderSource(u,s),e.compileShader(u),e.getShaderInfoLog(u)!==""&&console.warn(`${e.getShaderInfoLog(u)}
Vertex Shader
${hr(s)}`);const f=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(f,n),e.compileShader(f),e.getShaderInfoLog(f)!==""&&console.warn(`${e.getShaderInfoLog(f)}
Fragment Shader
${hr(n)}`),this.program=e.createProgram(),e.attachShader(this.program,u),e.attachShader(this.program,f),e.linkProgram(this.program),!e.getProgramParameter(this.program,e.LINK_STATUS)){console.warn(e.getProgramInfoLog(this.program));return}e.deleteShader(u),e.deleteShader(f),this.uniformLocations=new Map;let d=e.getProgramParameter(this.program,e.ACTIVE_UNIFORMS);for(let v=0;v<d;v++){let g=e.getActiveUniform(this.program,v);this.uniformLocations.set(g,e.getUniformLocation(this.program,g.name));const x=g.name.match(/(\w+)/g);g.uniformName=x[0],x.length===3?(g.isStructArray=!0,g.structIndex=Number(x[1]),g.structProperty=x[2]):x.length===2&&isNaN(Number(x[1]))&&(g.isStruct=!0,g.structProperty=x[1])}this.attributeLocations=new Map;const p=[],m=e.getProgramParameter(this.program,e.ACTIVE_ATTRIBUTES);for(let v=0;v<m;v++){const g=e.getActiveAttrib(this.program,v),x=e.getAttribLocation(this.program,g.name);p[x]=g.name,this.attributeLocations.set(g,x)}this.attributeOrder=p.join("")}setBlendFunc(e,s,n,i){this.blendFunc.src=e,this.blendFunc.dst=s,this.blendFunc.srcAlpha=n,this.blendFunc.dstAlpha=i,e&&(this.transparent=!0)}setBlendEquation(e,s){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=s}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha)}use({flipFaces:e=!1}={}){let s=-1;this.gl.renderer.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.currentProgram=this.id),this.uniformLocations.forEach((i,r)=>{let a=r.uniformName,o=this.uniforms[a];if(r.isStruct&&(o=o[r.structProperty],a+=`.${r.structProperty}`),r.isStructArray&&(o=o[r.structIndex][r.structProperty],a+=`[${r.structIndex}].${r.structProperty}`),!o)return ur(`Active uniform ${a} has not been supplied`);if(o&&o.value===void 0)return ur(`${a} uniform is missing a value parameter`);if(o.value.texture)return s=s+1,o.value.update(s),an(this.gl,r.type,i,s);if(o.value.length&&o.value[0].texture){const l=[];return o.value.forEach(c=>{s=s+1,c.update(s),l.push(s)}),an(this.gl,r.type,i,l)}an(this.gl,r.type,i,o.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function an(t,e,s,n){n=n.length?$h(n):n;const i=t.renderer.state.uniformLocations.get(s);if(n.length)if(i===void 0||i.length!==n.length)t.renderer.state.uniformLocations.set(s,n.slice(0));else{if(Oh(i,n))return;i.set?i.set(n):Ch(i,n),t.renderer.state.uniformLocations.set(s,i)}else{if(i===n)return;t.renderer.state.uniformLocations.set(s,n)}switch(e){case 5126:return n.length?t.uniform1fv(s,n):t.uniform1f(s,n);case 35664:return t.uniform2fv(s,n);case 35665:return t.uniform3fv(s,n);case 35666:return t.uniform4fv(s,n);case 35670:case 5124:case 35678:case 35680:return n.length?t.uniform1iv(s,n):t.uniform1i(s,n);case 35671:case 35667:return t.uniform2iv(s,n);case 35672:case 35668:return t.uniform3iv(s,n);case 35673:case 35669:return t.uniform4iv(s,n);case 35674:return t.uniformMatrix2fv(s,!1,n);case 35675:return t.uniformMatrix3fv(s,!1,n);case 35676:return t.uniformMatrix4fv(s,!1,n)}}function hr(t){let e=t.split(`
`);for(let s=0;s<e.length;s++)e[s]=s+1+": "+e[s];return e.join(`
`)}function $h(t){const e=t.length,s=t[0].length;if(s===void 0)return t;const n=e*s;let i=cr[n];i||(cr[n]=i=new Float32Array(n));for(let r=0;r<e;r++)i.set(t[r],r*s);return i}function Oh(t,e){if(t.length!==e.length)return!1;for(let s=0,n=t.length;s<n;s++)if(t[s]!==e[s])return!1;return!0}function Ch(t,e){for(let s=0,n=t.length;s<n;s++)t[s]=e[s]}let on=0;function ur(t){on>100||(console.warn(t),on++,on>100&&console.warn("More than 100 program warnings - stopping logs."))}const ln=new fe;let Vh=1;class zh{constructor({canvas:e=document.createElement("canvas"),width:s=300,height:n=150,dpr:i=1,alpha:r=!1,depth:a=!0,stencil:o=!1,antialias:l=!1,premultipliedAlpha:c=!1,preserveDrawingBuffer:h=!1,powerPreference:u="default",autoClear:f=!0,webgl:d=2}={}){const p={alpha:r,depth:a,stencil:o,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:h,powerPreference:u};this.dpr=i,this.alpha=r,this.color=!0,this.depth=a,this.stencil=o,this.premultipliedAlpha=c,this.autoClear=f,this._id=Vh++,d===2&&(this.gl=e.getContext("webgl2",p)),this.isWebgl2=!!this.gl,this.gl||(this.gl=e.getContext("webgl",p)||e.getContext("experimental-webgl",p)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(s,n),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=null,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LESS,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}get id(){return this._id}setSize(e,s){this.width=e,this.height=s,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=s*this.dpr,Object.assign(this.gl.canvas.style,{width:e+"px",height:s+"px"})}setViewport(e,s){this.state.viewport.width===e&&this.state.viewport.height===s||(this.state.viewport.width=e,this.state.viewport.height=s,this.gl.viewport(0,0,e,s))}enable(e){this.state[e]!==!0&&(this.gl.enable(e),this.state[e]=!0)}disable(e){this.state[e]!==!1&&(this.gl.disable(e),this.state[e]=!1)}setBlendFunc(e,s,n,i){this.state.blendFunc.src===e&&this.state.blendFunc.dst===s&&this.state.blendFunc.srcAlpha===n&&this.state.blendFunc.dstAlpha===i||(this.state.blendFunc.src=e,this.state.blendFunc.dst=s,this.state.blendFunc.srcAlpha=n,this.state.blendFunc.dstAlpha=i,n!==void 0?this.gl.blendFuncSeparate(e,s,n,i):this.gl.blendFunc(e,s))}setBlendEquation(e,s){e=e||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===s)&&(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=s,s!==void 0?this.gl.blendEquationSeparate(e,s):this.gl.blendEquation(e))}setCullFace(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}setFrontFace(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}setDepthMask(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}setDepthFunc(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}activeTexture(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}bindFramebuffer({target:e=this.gl.FRAMEBUFFER,buffer:s=null}={}){this.state.framebuffer!==s&&(this.state.framebuffer=s,this.gl.bindFramebuffer(e,s))}getExtension(e,s,n){return s&&this.gl[s]?this.gl[s].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),s?this.extensions[e]?this.extensions[e][n].bind(this.extensions[e]):null:this.extensions[e])}sortOpaque(e,s){return e.renderOrder!==s.renderOrder?e.renderOrder-s.renderOrder:e.program.id!==s.program.id?e.program.id-s.program.id:e.zDepth!==s.zDepth?e.zDepth-s.zDepth:s.id-e.id}sortTransparent(e,s){return e.renderOrder!==s.renderOrder?e.renderOrder-s.renderOrder:e.zDepth!==s.zDepth?s.zDepth-e.zDepth:s.id-e.id}sortUI(e,s){return e.renderOrder!==s.renderOrder?e.renderOrder-s.renderOrder:e.program.id!==s.program.id?e.program.id-s.program.id:s.id-e.id}getRenderList({scene:e,camera:s,frustumCull:n,sort:i}){let r=[];if(s&&n&&s.updateFrustum(),e.traverse(a=>{if(!a.visible)return!0;!Ih(a)||n&&a.frustumCulled&&s&&!s.frustumIntersectsMesh(a)||r.push(a)}),i){const a=[],o=[],l=[];r.forEach(c=>{c.program.transparent?c.program.depthTest?o.push(c):l.push(c):a.push(c),c.zDepth=0,!(c.renderOrder!==0||!c.program.depthTest||!s)&&(c.worldMatrix.getTranslation(ln),ln.applyMatrix4(s.projectionViewMatrix),c.zDepth=ln.z)}),a.sort(this.sortOpaque),o.sort(this.sortTransparent),l.sort(this.sortUI),r=a.concat(o,l)}return r}render({scene:e,camera:s,target:n=null,update:i=!0,sort:r=!0,frustumCull:a=!0,clear:o}){n===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(n),this.setViewport(n.width,n.height)),(o||this.autoClear&&o!==!1)&&(this.depth&&(!n||n.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),i&&e.updateMatrixWorld(),s&&s.updateMatrixWorld(),this.getRenderList({scene:e,camera:s,frustumCull:a,sort:r}).forEach(c=>{c.draw({camera:s})})}}const jh=1e-6;function Rh(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Fh(t,e,s,n,i,r,a,o,l,c,h,u,f,d,p,m,v){return t[0]=e,t[1]=s,t[2]=n,t[3]=i,t[4]=r,t[5]=a,t[6]=o,t[7]=l,t[8]=c,t[9]=h,t[10]=u,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=v,t}function Bh(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Uh(t,e){let s=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8],u=e[9],f=e[10],d=e[11],p=e[12],m=e[13],v=e[14],g=e[15],x=s*o-n*a,w=s*l-i*a,y=s*c-r*a,k=n*l-i*o,b=n*c-r*o,$=i*c-r*l,P=h*m-u*p,D=h*v-f*p,j=h*g-d*p,B=u*v-f*m,z=u*g-d*m,C=f*g-d*v,N=x*C-w*z+y*B+k*j-b*D+$*P;return N?(N=1/N,t[0]=(o*C-l*z+c*B)*N,t[1]=(i*z-n*C-r*B)*N,t[2]=(m*$-v*b+g*k)*N,t[3]=(f*b-u*$-d*k)*N,t[4]=(l*j-a*C-c*D)*N,t[5]=(s*C-i*j+r*D)*N,t[6]=(v*y-p*$-g*w)*N,t[7]=(h*$-f*y+d*w)*N,t[8]=(a*z-o*j+c*P)*N,t[9]=(n*j-s*z-r*P)*N,t[10]=(p*b-m*y+g*x)*N,t[11]=(u*y-h*b-d*x)*N,t[12]=(o*D-a*B-l*P)*N,t[13]=(s*B-n*D+i*P)*N,t[14]=(m*w-p*k-v*x)*N,t[15]=(h*k-u*w+f*x)*N,t):null}function qh(t){let e=t[0],s=t[1],n=t[2],i=t[3],r=t[4],a=t[5],o=t[6],l=t[7],c=t[8],h=t[9],u=t[10],f=t[11],d=t[12],p=t[13],m=t[14],v=t[15],g=e*a-s*r,x=e*o-n*r,w=e*l-i*r,y=s*o-n*a,k=s*l-i*a,b=n*l-i*o,$=c*p-h*d,P=c*m-u*d,D=c*v-f*d,j=h*m-u*p,B=h*v-f*p,z=u*v-f*m;return g*z-x*B+w*j+y*D-k*P+b*$}function fr(t,e,s){let n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],u=e[8],f=e[9],d=e[10],p=e[11],m=e[12],v=e[13],g=e[14],x=e[15],w=s[0],y=s[1],k=s[2],b=s[3];return t[0]=w*n+y*o+k*u+b*m,t[1]=w*i+y*l+k*f+b*v,t[2]=w*r+y*c+k*d+b*g,t[3]=w*a+y*h+k*p+b*x,w=s[4],y=s[5],k=s[6],b=s[7],t[4]=w*n+y*o+k*u+b*m,t[5]=w*i+y*l+k*f+b*v,t[6]=w*r+y*c+k*d+b*g,t[7]=w*a+y*h+k*p+b*x,w=s[8],y=s[9],k=s[10],b=s[11],t[8]=w*n+y*o+k*u+b*m,t[9]=w*i+y*l+k*f+b*v,t[10]=w*r+y*c+k*d+b*g,t[11]=w*a+y*h+k*p+b*x,w=s[12],y=s[13],k=s[14],b=s[15],t[12]=w*n+y*o+k*u+b*m,t[13]=w*i+y*l+k*f+b*v,t[14]=w*r+y*c+k*d+b*g,t[15]=w*a+y*h+k*p+b*x,t}function Wh(t,e,s){let n=s[0],i=s[1],r=s[2],a,o,l,c,h,u,f,d,p,m,v,g;return e===t?(t[12]=e[0]*n+e[4]*i+e[8]*r+e[12],t[13]=e[1]*n+e[5]*i+e[9]*r+e[13],t[14]=e[2]*n+e[6]*i+e[10]*r+e[14],t[15]=e[3]*n+e[7]*i+e[11]*r+e[15]):(a=e[0],o=e[1],l=e[2],c=e[3],h=e[4],u=e[5],f=e[6],d=e[7],p=e[8],m=e[9],v=e[10],g=e[11],t[0]=a,t[1]=o,t[2]=l,t[3]=c,t[4]=h,t[5]=u,t[6]=f,t[7]=d,t[8]=p,t[9]=m,t[10]=v,t[11]=g,t[12]=a*n+h*i+p*r+e[12],t[13]=o*n+u*i+m*r+e[13],t[14]=l*n+f*i+v*r+e[14],t[15]=c*n+d*i+g*r+e[15]),t}function Xh(t,e,s){let n=s[0],i=s[1],r=s[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Yh(t,e,s,n){let i=n[0],r=n[1],a=n[2],o=Math.hypot(i,r,a),l,c,h,u,f,d,p,m,v,g,x,w,y,k,b,$,P,D,j,B,z,C,N,q;return Math.abs(o)<jh?null:(o=1/o,i*=o,r*=o,a*=o,l=Math.sin(s),c=Math.cos(s),h=1-c,u=e[0],f=e[1],d=e[2],p=e[3],m=e[4],v=e[5],g=e[6],x=e[7],w=e[8],y=e[9],k=e[10],b=e[11],$=i*i*h+c,P=r*i*h+a*l,D=a*i*h-r*l,j=i*r*h-a*l,B=r*r*h+c,z=a*r*h+i*l,C=i*a*h+r*l,N=r*a*h-i*l,q=a*a*h+c,t[0]=u*$+m*P+w*D,t[1]=f*$+v*P+y*D,t[2]=d*$+g*P+k*D,t[3]=p*$+x*P+b*D,t[4]=u*j+m*B+w*z,t[5]=f*j+v*B+y*z,t[6]=d*j+g*B+k*z,t[7]=p*j+x*B+b*z,t[8]=u*C+m*N+w*q,t[9]=f*C+v*N+y*q,t[10]=d*C+g*N+k*q,t[11]=p*C+x*N+b*q,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function Hh(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function No(t,e){let s=e[0],n=e[1],i=e[2],r=e[4],a=e[5],o=e[6],l=e[8],c=e[9],h=e[10];return t[0]=Math.hypot(s,n,i),t[1]=Math.hypot(r,a,o),t[2]=Math.hypot(l,c,h),t}function Gh(t){let e=t[0],s=t[1],n=t[2],i=t[4],r=t[5],a=t[6],o=t[8],l=t[9],c=t[10];const h=e*e+s*s+n*n,u=i*i+r*r+a*a,f=o*o+l*l+c*c;return Math.sqrt(Math.max(h,u,f))}const Zh=function(){const t=[0,0,0];return function(e,s){let n=t;No(n,s);let i=1/n[0],r=1/n[1],a=1/n[2],o=s[0]*i,l=s[1]*r,c=s[2]*a,h=s[4]*i,u=s[5]*r,f=s[6]*a,d=s[8]*i,p=s[9]*r,m=s[10]*a,v=o+u+m,g=0;return v>0?(g=Math.sqrt(v+1)*2,e[3]=.25*g,e[0]=(f-p)/g,e[1]=(d-c)/g,e[2]=(l-h)/g):o>u&&o>m?(g=Math.sqrt(1+o-u-m)*2,e[3]=(f-p)/g,e[0]=.25*g,e[1]=(l+h)/g,e[2]=(d+c)/g):u>m?(g=Math.sqrt(1+u-o-m)*2,e[3]=(d-c)/g,e[0]=(l+h)/g,e[1]=.25*g,e[2]=(f+p)/g):(g=Math.sqrt(1+m-o-u)*2,e[3]=(l-h)/g,e[0]=(d+c)/g,e[1]=(f+p)/g,e[2]=.25*g),e}}();function Jh(t,e,s,n){let i=e[0],r=e[1],a=e[2],o=e[3],l=i+i,c=r+r,h=a+a,u=i*l,f=i*c,d=i*h,p=r*c,m=r*h,v=a*h,g=o*l,x=o*c,w=o*h,y=n[0],k=n[1],b=n[2];return t[0]=(1-(p+v))*y,t[1]=(f+w)*y,t[2]=(d-x)*y,t[3]=0,t[4]=(f-w)*k,t[5]=(1-(u+v))*k,t[6]=(m+g)*k,t[7]=0,t[8]=(d+x)*b,t[9]=(m-g)*b,t[10]=(1-(u+p))*b,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t}function Kh(t,e){let s=e[0],n=e[1],i=e[2],r=e[3],a=s+s,o=n+n,l=i+i,c=s*a,h=n*a,u=n*o,f=i*a,d=i*o,p=i*l,m=r*a,v=r*o,g=r*l;return t[0]=1-u-p,t[1]=h+g,t[2]=f-v,t[3]=0,t[4]=h-g,t[5]=1-c-p,t[6]=d+m,t[7]=0,t[8]=f+v,t[9]=d-m,t[10]=1-c-u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Qh(t,e,s,n,i){let r=1/Math.tan(e/2),a=1/(n-i);return t[0]=r/s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*a,t[15]=0,t}function e1(t,e,s,n,i,r,a){let o=1/(e-s),l=1/(n-i),c=1/(r-a);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+s)*o,t[13]=(i+n)*l,t[14]=(a+r)*c,t[15]=1,t}function t1(t,e,s,n){let i=e[0],r=e[1],a=e[2],o=n[0],l=n[1],c=n[2],h=i-s[0],u=r-s[1],f=a-s[2],d=h*h+u*u+f*f;d===0?f=1:(d=1/Math.sqrt(d),h*=d,u*=d,f*=d);let p=l*f-c*u,m=c*h-o*f,v=o*u-l*h;return d=p*p+m*m+v*v,d===0&&(c?o+=1e-6:l?c+=1e-6:l+=1e-6,p=l*f-c*u,m=c*h-o*f,v=o*u-l*h,d=p*p+m*m+v*v),d=1/Math.sqrt(d),p*=d,m*=d,v*=d,t[0]=p,t[1]=m,t[2]=v,t[3]=0,t[4]=u*v-f*m,t[5]=f*p-h*v,t[6]=h*m-u*p,t[7]=0,t[8]=h,t[9]=u,t[10]=f,t[11]=0,t[12]=i,t[13]=r,t[14]=a,t[15]=1,t}class Et extends Array{constructor(e=1,s=0,n=0,i=0,r=0,a=1,o=0,l=0,c=0,h=0,u=1,f=0,d=0,p=0,m=0,v=1){return super(e,s,n,i,r,a,o,l,c,h,u,f,d,p,m,v),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(e){this[12]=e}set y(e){this[13]=e}set z(e){this[14]=e}set w(e){this[15]=e}set(e,s,n,i,r,a,o,l,c,h,u,f,d,p,m,v){return e.length?this.copy(e):(Fh(this,e,s,n,i,r,a,o,l,c,h,u,f,d,p,m,v),this)}translate(e,s=this){return Wh(this,s,e),this}rotate(e,s,n=this){return Yh(this,n,e,s),this}scale(e,s=this){return Xh(this,s,typeof e=="number"?[e,e,e]:e),this}multiply(e,s){return s?fr(this,e,s):fr(this,this,e),this}identity(){return Bh(this),this}copy(e){return Rh(this,e),this}fromPerspective({fov:e,aspect:s,near:n,far:i}={}){return Qh(this,e,s,n,i),this}fromOrthogonal({left:e,right:s,bottom:n,top:i,near:r,far:a}){return e1(this,e,s,n,i,r,a),this}fromQuaternion(e){return Kh(this,e),this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}inverse(e=this){return Uh(this,e),this}compose(e,s,n){return Jh(this,e,s,n),this}getRotation(e){return Zh(e,this),this}getTranslation(e){return Hh(e,this),this}getScaling(e){return No(e,this),this}getMaxScaleOnAxis(){return Gh(this)}lookAt(e,s,n){return t1(this,e,s,n),this}determinant(){return qh(this)}fromArray(e,s=0){return this[0]=e[s],this[1]=e[s+1],this[2]=e[s+2],this[3]=e[s+3],this[4]=e[s+4],this[5]=e[s+5],this[6]=e[s+6],this[7]=e[s+7],this[8]=e[s+8],this[9]=e[s+9],this[10]=e[s+10],this[11]=e[s+11],this[12]=e[s+12],this[13]=e[s+13],this[14]=e[s+14],this[15]=e[s+15],this}toArray(e=[],s=0){return e[s]=this[0],e[s+1]=this[1],e[s+2]=this[2],e[s+3]=this[3],e[s+4]=this[4],e[s+5]=this[5],e[s+6]=this[6],e[s+7]=this[7],e[s+8]=this[8],e[s+9]=this[9],e[s+10]=this[10],e[s+11]=this[11],e[s+12]=this[12],e[s+13]=this[13],e[s+14]=this[14],e[s+15]=this[15],e}}function s1(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function n1(t,e,s,n,i){return t[0]=e,t[1]=s,t[2]=n,t[3]=i,t}function i1(t,e){let s=e[0],n=e[1],i=e[2],r=e[3],a=s*s+n*n+i*i+r*r;return a>0&&(a=1/Math.sqrt(a)),t[0]=s*a,t[1]=n*a,t[2]=i*a,t[3]=r*a,t}function r1(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function a1(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function o1(t,e,s){s=s*.5;let n=Math.sin(s);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(s),t}function dr(t,e,s){let n=e[0],i=e[1],r=e[2],a=e[3],o=s[0],l=s[1],c=s[2],h=s[3];return t[0]=n*h+a*o+i*c-r*l,t[1]=i*h+a*l+r*o-n*c,t[2]=r*h+a*c+n*l-i*o,t[3]=a*h-n*o-i*l-r*c,t}function l1(t,e,s){s*=.5;let n=e[0],i=e[1],r=e[2],a=e[3],o=Math.sin(s),l=Math.cos(s);return t[0]=n*l+a*o,t[1]=i*l+r*o,t[2]=r*l-i*o,t[3]=a*l-n*o,t}function c1(t,e,s){s*=.5;let n=e[0],i=e[1],r=e[2],a=e[3],o=Math.sin(s),l=Math.cos(s);return t[0]=n*l-r*o,t[1]=i*l+a*o,t[2]=r*l+n*o,t[3]=a*l-i*o,t}function h1(t,e,s){s*=.5;let n=e[0],i=e[1],r=e[2],a=e[3],o=Math.sin(s),l=Math.cos(s);return t[0]=n*l+i*o,t[1]=i*l-n*o,t[2]=r*l+a*o,t[3]=a*l-r*o,t}function u1(t,e,s,n){let i=e[0],r=e[1],a=e[2],o=e[3],l=s[0],c=s[1],h=s[2],u=s[3],f,d,p,m,v;return d=i*l+r*c+a*h+o*u,d<0&&(d=-d,l=-l,c=-c,h=-h,u=-u),1-d>1e-6?(f=Math.acos(d),p=Math.sin(f),m=Math.sin((1-n)*f)/p,v=Math.sin(n*f)/p):(m=1-n,v=n),t[0]=m*i+v*l,t[1]=m*r+v*c,t[2]=m*a+v*h,t[3]=m*o+v*u,t}function f1(t,e){let s=e[0],n=e[1],i=e[2],r=e[3],a=s*s+n*n+i*i+r*r,o=a?1/a:0;return t[0]=-s*o,t[1]=-n*o,t[2]=-i*o,t[3]=r*o,t}function d1(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function p1(t,e){let s=e[0]+e[4]+e[8],n;if(s>0)n=Math.sqrt(s+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{let i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);let r=(i+1)%3,a=(i+2)%3;n=Math.sqrt(e[i*3+i]-e[r*3+r]-e[a*3+a]+1),t[i]=.5*n,n=.5/n,t[3]=(e[r*3+a]-e[a*3+r])*n,t[r]=(e[r*3+i]+e[i*3+r])*n,t[a]=(e[a*3+i]+e[i*3+a])*n}return t}function m1(t,e,s="YXZ"){let n=Math.sin(e[0]*.5),i=Math.cos(e[0]*.5),r=Math.sin(e[1]*.5),a=Math.cos(e[1]*.5),o=Math.sin(e[2]*.5),l=Math.cos(e[2]*.5);return s==="XYZ"?(t[0]=n*a*l+i*r*o,t[1]=i*r*l-n*a*o,t[2]=i*a*o+n*r*l,t[3]=i*a*l-n*r*o):s==="YXZ"?(t[0]=n*a*l+i*r*o,t[1]=i*r*l-n*a*o,t[2]=i*a*o-n*r*l,t[3]=i*a*l+n*r*o):s==="ZXY"?(t[0]=n*a*l-i*r*o,t[1]=i*r*l+n*a*o,t[2]=i*a*o+n*r*l,t[3]=i*a*l-n*r*o):s==="ZYX"?(t[0]=n*a*l-i*r*o,t[1]=i*r*l+n*a*o,t[2]=i*a*o-n*r*l,t[3]=i*a*l+n*r*o):s==="YZX"?(t[0]=n*a*l+i*r*o,t[1]=i*r*l+n*a*o,t[2]=i*a*o-n*r*l,t[3]=i*a*l-n*r*o):s==="XZY"&&(t[0]=n*a*l-i*r*o,t[1]=i*r*l-n*a*o,t[2]=i*a*o+n*r*l,t[3]=i*a*l+n*r*o),t}const v1=s1,g1=n1,y1=r1,_1=i1;class w1 extends Array{constructor(e=0,s=0,n=0,i=1){return super(e,s,n,i),this.onChange=()=>{},this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(e){this[0]=e,this.onChange()}set y(e){this[1]=e,this.onChange()}set z(e){this[2]=e,this.onChange()}set w(e){this[3]=e,this.onChange()}identity(){return a1(this),this.onChange(),this}set(e,s,n,i){return e.length?this.copy(e):(g1(this,e,s,n,i),this.onChange(),this)}rotateX(e){return l1(this,this,e),this.onChange(),this}rotateY(e){return c1(this,this,e),this.onChange(),this}rotateZ(e){return h1(this,this,e),this.onChange(),this}inverse(e=this){return f1(this,e),this.onChange(),this}conjugate(e=this){return d1(this,e),this.onChange(),this}copy(e){return v1(this,e),this.onChange(),this}normalize(e=this){return _1(this,e),this.onChange(),this}multiply(e,s){return s?dr(this,e,s):dr(this,this,e),this.onChange(),this}dot(e){return y1(this,e)}fromMatrix3(e){return p1(this,e),this.onChange(),this}fromEuler(e){return m1(this,e,e.order),this}fromAxisAngle(e,s){return o1(this,e,s),this}slerp(e,s){return u1(this,this,e,s),this}fromArray(e,s=0){return this[0]=e[s],this[1]=e[s+1],this[2]=e[s+2],this[3]=e[s+3],this}toArray(e=[],s=0){return e[s]=this[0],e[s+1]=this[1],e[s+2]=this[2],e[s+3]=this[3],e}}function b1(t,e,s="YXZ"){return s==="XYZ"?(t[1]=Math.asin(Math.min(Math.max(e[8],-1),1)),Math.abs(e[8])<.99999?(t[0]=Math.atan2(-e[9],e[10]),t[2]=Math.atan2(-e[4],e[0])):(t[0]=Math.atan2(e[6],e[5]),t[2]=0)):s==="YXZ"?(t[0]=Math.asin(-Math.min(Math.max(e[9],-1),1)),Math.abs(e[9])<.99999?(t[1]=Math.atan2(e[8],e[10]),t[2]=Math.atan2(e[1],e[5])):(t[1]=Math.atan2(-e[2],e[0]),t[2]=0)):s==="ZXY"?(t[0]=Math.asin(Math.min(Math.max(e[6],-1),1)),Math.abs(e[6])<.99999?(t[1]=Math.atan2(-e[2],e[10]),t[2]=Math.atan2(-e[4],e[5])):(t[1]=0,t[2]=Math.atan2(e[1],e[0]))):s==="ZYX"?(t[1]=Math.asin(-Math.min(Math.max(e[2],-1),1)),Math.abs(e[2])<.99999?(t[0]=Math.atan2(e[6],e[10]),t[2]=Math.atan2(e[1],e[0])):(t[0]=0,t[2]=Math.atan2(-e[4],e[5]))):s==="YZX"?(t[2]=Math.asin(Math.min(Math.max(e[1],-1),1)),Math.abs(e[1])<.99999?(t[0]=Math.atan2(-e[9],e[5]),t[1]=Math.atan2(-e[2],e[0])):(t[0]=0,t[1]=Math.atan2(e[8],e[10]))):s==="XZY"&&(t[2]=Math.asin(-Math.min(Math.max(e[4],-1),1)),Math.abs(e[4])<.99999?(t[0]=Math.atan2(e[6],e[5]),t[1]=Math.atan2(e[8],e[0])):(t[0]=Math.atan2(-e[9],e[10]),t[1]=0)),t}const pr=new Et;class x1 extends Array{constructor(e=0,s=e,n=e,i="YXZ"){return super(e,s,n),this.order=i,this.onChange=()=>{},this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e,this.onChange()}set y(e){this[1]=e,this.onChange()}set z(e){this[2]=e,this.onChange()}set(e,s=e,n=e){return e.length?this.copy(e):(this[0]=e,this[1]=s,this[2]=n,this.onChange(),this)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.onChange(),this}reorder(e){return this.order=e,this.onChange(),this}fromRotationMatrix(e,s=this.order){return b1(this,e,s),this}fromQuaternion(e,s=this.order){return pr.fromQuaternion(e),this.fromRotationMatrix(pr,s)}toArray(e=[],s=0){return e[s]=this[0],e[s+1]=this[1],e[s+2]=this[2],e}}class ci{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new Et,this.worldMatrix=new Et,this.matrixAutoUpdate=!0,this.up=new fe(0,1,0),this.position=new fe,this.scale=new fe(1),this.quaternion=new w1,this.rotation=new x1,this.rotation.onChange=()=>this.quaternion.fromEuler(this.rotation),this.quaternion.onChange=()=>this.rotation.fromQuaternion(this.quaternion)}setParent(e,s=!0){this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,s&&e&&e.addChild(this,!1)}addChild(e,s=!0){~this.children.indexOf(e)||this.children.push(e),s&&e.setParent(this,!1)}removeChild(e,s=!0){~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),s&&e.setParent(null,!1)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(let s=0,n=this.children.length;s<n;s++)this.children[s].updateMatrixWorld(e)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(e){if(!e(this))for(let s=0,n=this.children.length;s<n;s++)this.children[s].traverse(e)}decompose(){this.matrix.getTranslation(this.position),this.matrix.getRotation(this.quaternion),this.matrix.getScaling(this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(e,s=!1){s?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion),this.rotation.fromQuaternion(this.quaternion)}}const M1=new Et,E1=new fe,k1=new fe;class S1 extends ci{constructor(e,{near:s=.1,far:n=100,fov:i=45,aspect:r=1,left:a,right:o,bottom:l,top:c,zoom:h=1}={}){super(),Object.assign(this,{near:s,far:n,fov:i,aspect:r,left:a,right:o,bottom:l,top:c,zoom:h}),this.projectionMatrix=new Et,this.viewMatrix=new Et,this.projectionViewMatrix=new Et,this.worldPosition=new fe,this.type=a||o?"orthographic":"perspective",this.type==="orthographic"?this.orthographic():this.perspective()}perspective({near:e=this.near,far:s=this.far,fov:n=this.fov,aspect:i=this.aspect}={}){return Object.assign(this,{near:e,far:s,fov:n,aspect:i}),this.projectionMatrix.fromPerspective({fov:n*(Math.PI/180),aspect:i,near:e,far:s}),this.type="perspective",this}orthographic({near:e=this.near,far:s=this.far,left:n=this.left,right:i=this.right,bottom:r=this.bottom,top:a=this.top,zoom:o=this.zoom}={}){return Object.assign(this,{near:e,far:s,left:n,right:i,bottom:r,top:a,zoom:o}),n/=o,i/=o,r/=o,a/=o,this.projectionMatrix.fromOrthogonal({left:n,right:i,bottom:r,top:a,near:e,far:s}),this.type="orthographic",this}updateMatrixWorld(){return super.updateMatrixWorld(),this.viewMatrix.inverse(this.worldMatrix),this.worldMatrix.getTranslation(this.worldPosition),this.projectionViewMatrix.multiply(this.projectionMatrix,this.viewMatrix),this}lookAt(e){return super.lookAt(e,!0),this}project(e){return e.applyMatrix4(this.viewMatrix),e.applyMatrix4(this.projectionMatrix),this}unproject(e){return e.applyMatrix4(M1.inverse(this.projectionMatrix)),e.applyMatrix4(this.worldMatrix),this}updateFrustum(){this.frustum||(this.frustum=[new fe,new fe,new fe,new fe,new fe,new fe]);const e=this.projectionViewMatrix;this.frustum[0].set(e[3]-e[0],e[7]-e[4],e[11]-e[8]).constant=e[15]-e[12],this.frustum[1].set(e[3]+e[0],e[7]+e[4],e[11]+e[8]).constant=e[15]+e[12],this.frustum[2].set(e[3]+e[1],e[7]+e[5],e[11]+e[9]).constant=e[15]+e[13],this.frustum[3].set(e[3]-e[1],e[7]-e[5],e[11]-e[9]).constant=e[15]-e[13],this.frustum[4].set(e[3]-e[2],e[7]-e[6],e[11]-e[10]).constant=e[15]-e[14],this.frustum[5].set(e[3]+e[2],e[7]+e[6],e[11]+e[10]).constant=e[15]+e[14];for(let s=0;s<6;s++){const n=1/this.frustum[s].distance();this.frustum[s].multiply(n),this.frustum[s].constant*=n}}frustumIntersectsMesh(e){if(!e.geometry.attributes.position||((!e.geometry.bounds||e.geometry.bounds.radius===1/0)&&e.geometry.computeBoundingSphere(),!e.geometry.bounds))return!0;const s=E1;s.copy(e.geometry.bounds.center),s.applyMatrix4(e.worldMatrix);const n=e.geometry.bounds.radius*e.worldMatrix.getMaxScaleOnAxis();return this.frustumIntersectsSphere(s,n)}frustumIntersectsSphere(e,s){const n=k1;for(let i=0;i<6;i++){const r=this.frustum[i];if(n.copy(r).dot(e)+r.constant<-s)return!1}return!0}}function T1(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function A1(t,e){let s=e[0],n=e[1],i=e[2],r=e[3],a=s+s,o=n+n,l=i+i,c=s*a,h=n*a,u=n*o,f=i*a,d=i*o,p=i*l,m=r*a,v=r*o,g=r*l;return t[0]=1-u-p,t[3]=h-g,t[6]=f+v,t[1]=h+g,t[4]=1-c-p,t[7]=d-m,t[2]=f-v,t[5]=d+m,t[8]=1-c-u,t}function P1(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function I1(t,e,s,n,i,r,a,o,l,c){return t[0]=e,t[1]=s,t[2]=n,t[3]=i,t[4]=r,t[5]=a,t[6]=o,t[7]=l,t[8]=c,t}function N1(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function L1(t,e){let s=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8],u=h*a-o*c,f=-h*r+o*l,d=c*r-a*l,p=s*u+n*f+i*d;return p?(p=1/p,t[0]=u*p,t[1]=(-h*n+i*c)*p,t[2]=(o*n-i*a)*p,t[3]=f*p,t[4]=(h*s-i*l)*p,t[5]=(-o*s+i*r)*p,t[6]=d*p,t[7]=(-c*s+n*l)*p,t[8]=(a*s-n*r)*p,t):null}function mr(t,e,s){let n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],u=e[8],f=s[0],d=s[1],p=s[2],m=s[3],v=s[4],g=s[5],x=s[6],w=s[7],y=s[8];return t[0]=f*n+d*a+p*c,t[1]=f*i+d*o+p*h,t[2]=f*r+d*l+p*u,t[3]=m*n+v*a+g*c,t[4]=m*i+v*o+g*h,t[5]=m*r+v*l+g*u,t[6]=x*n+w*a+y*c,t[7]=x*i+w*o+y*h,t[8]=x*r+w*l+y*u,t}function D1(t,e,s){let n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],u=e[8],f=s[0],d=s[1];return t[0]=n,t[1]=i,t[2]=r,t[3]=a,t[4]=o,t[5]=l,t[6]=f*n+d*a+c,t[7]=f*i+d*o+h,t[8]=f*r+d*l+u,t}function $1(t,e,s){let n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],u=e[8],f=Math.sin(s),d=Math.cos(s);return t[0]=d*n+f*a,t[1]=d*i+f*o,t[2]=d*r+f*l,t[3]=d*a-f*n,t[4]=d*o-f*i,t[5]=d*l-f*r,t[6]=c,t[7]=h,t[8]=u,t}function O1(t,e,s){let n=s[0],i=s[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function C1(t,e){let s=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8],u=e[9],f=e[10],d=e[11],p=e[12],m=e[13],v=e[14],g=e[15],x=s*o-n*a,w=s*l-i*a,y=s*c-r*a,k=n*l-i*o,b=n*c-r*o,$=i*c-r*l,P=h*m-u*p,D=h*v-f*p,j=h*g-d*p,B=u*v-f*m,z=u*g-d*m,C=f*g-d*v,N=x*C-w*z+y*B+k*j-b*D+$*P;return N?(N=1/N,t[0]=(o*C-l*z+c*B)*N,t[1]=(l*j-a*C-c*D)*N,t[2]=(a*z-o*j+c*P)*N,t[3]=(i*z-n*C-r*B)*N,t[4]=(s*C-i*j+r*D)*N,t[5]=(n*j-s*z-r*P)*N,t[6]=(m*$-v*b+g*k)*N,t[7]=(v*y-p*$-g*w)*N,t[8]=(p*b-m*y+g*x)*N,t):null}class V1 extends Array{constructor(e=1,s=0,n=0,i=0,r=1,a=0,o=0,l=0,c=1){return super(e,s,n,i,r,a,o,l,c),this}set(e,s,n,i,r,a,o,l,c){return e.length?this.copy(e):(I1(this,e,s,n,i,r,a,o,l,c),this)}translate(e,s=this){return D1(this,s,e),this}rotate(e,s=this){return $1(this,s,e),this}scale(e,s=this){return O1(this,s,e),this}multiply(e,s){return s?mr(this,e,s):mr(this,this,e),this}identity(){return N1(this),this}copy(e){return P1(this,e),this}fromMatrix4(e){return T1(this,e),this}fromQuaternion(e){return A1(this,e),this}fromBasis(e,s,n){return this.set(e[0],e[1],e[2],s[0],s[1],s[2],n[0],n[1],n[2]),this}inverse(e=this){return L1(this,e),this}getNormalMatrix(e){return C1(this,e),this}}let z1=0;class Lo extends ci{constructor(e,{geometry:s,program:n,mode:i=e.TRIANGLES,frustumCulled:r=!0,renderOrder:a=0}={}){super(),this.hit=null,e.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=e,this.id=z1++,this.geometry=s,this.program=n,this.mode=i,this.frustumCulled=r,this.renderOrder=a,this.modelViewMatrix=new Et,this.normalMatrix=new V1,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(e){return this.beforeRenderCallbacks.push(e),this}onAfterRender(e){return this.afterRenderCallbacks.push(e),this}draw({camera:e}={}){this.beforeRenderCallbacks.forEach(n=>n&&n({mesh:this,camera:e})),e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix);let s=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:s}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(n=>n&&n({mesh:this,camera:e}))}}const vr=new Uint8Array(4);function gr(t){return(t&t-1)===0}let j1=1;const R1=t=>t.isCompressedTexture===!0;class hi{constructor(e,{image:s,target:n=e.TEXTURE_2D,type:i=e.UNSIGNED_BYTE,format:r=e.RGBA,internalFormat:a=r,wrapS:o=e.CLAMP_TO_EDGE,wrapT:l=e.CLAMP_TO_EDGE,generateMipmaps:c=!0,minFilter:h=c?e.NEAREST_MIPMAP_LINEAR:e.LINEAR,magFilter:u=e.LINEAR,premultiplyAlpha:f=!1,unpackAlignment:d=4,flipY:p=n==e.TEXTURE_2D,anisotropy:m=0,level:v=0,width:g,height:x=g}={}){this.gl=e,this.id=j1++,this.image=s,this.target=n,this.type=i,this.format=r,this.internalFormat=a,this.minFilter=h,this.magFilter=u,this.wrapS=o,this.wrapT=l,this.generateMipmaps=c,this.premultiplyAlpha=f,this.unpackAlignment=d,this.flipY=p,this.anisotropy=Math.min(m,this.gl.renderer.parameters.maxAnisotropy),this.level=v,this.width=g,this.height=x,this.texture=this.gl.createTexture(),this.store={image:null},this.glState=this.gl.renderer.state,this.state={minFilter:this.gl.NEAREST_MIPMAP_LINEAR,magFilter:this.gl.LINEAR,wrapS:this.gl.REPEAT,wrapT:this.gl.REPEAT,anisotropy:0}}bind(){this.glState.textureUnits[this.glState.activeTextureUnit]!==this.id&&(this.gl.bindTexture(this.target,this.texture),this.glState.textureUnits[this.glState.activeTextureUnit]=this.id)}update(e=0){const s=!(this.image===this.store.image&&!this.needsUpdate);if((s||this.glState.textureUnits[e]!==this.id)&&(this.gl.renderer.activeTexture(e),this.bind()),!!s){if(this.needsUpdate=!1,this.flipY!==this.glState.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this.flipY),this.glState.flipY=this.flipY),this.premultiplyAlpha!==this.glState.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),this.glState.premultiplyAlpha=this.premultiplyAlpha),this.unpackAlignment!==this.glState.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this.unpackAlignment),this.glState.unpackAlignment=this.unpackAlignment),this.minFilter!==this.state.minFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.minFilter),this.state.minFilter=this.minFilter),this.magFilter!==this.state.magFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.magFilter),this.state.magFilter=this.magFilter),this.wrapS!==this.state.wrapS&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.wrapS),this.state.wrapS=this.wrapS),this.wrapT!==this.state.wrapT&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.wrapT),this.state.wrapT=this.wrapT),this.anisotropy&&this.anisotropy!==this.state.anisotropy&&(this.gl.texParameterf(this.target,this.gl.renderer.getExtension("EXT_texture_filter_anisotropic").TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropy),this.state.anisotropy=this.anisotropy),this.image){if(this.image.width&&(this.width=this.image.width,this.height=this.image.height),this.target===this.gl.TEXTURE_CUBE_MAP)for(let n=0;n<6;n++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+n,this.level,this.internalFormat,this.format,this.type,this.image[n]);else if(ArrayBuffer.isView(this.image))this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,this.image);else if(R1(this.image)){let n;for(let i=0;i<this.image.length;i++)n=this.image[i],this.gl.compressedTexImage2D(this.target,i,this.internalFormat,n.width,n.height,0,n.data)}else this.gl.texImage2D(this.target,this.level,this.internalFormat,this.format,this.type,this.image);this.generateMipmaps&&(!this.gl.renderer.isWebgl2&&(!gr(this.image.width)||!gr(this.image.height))?(this.generateMipmaps=!1,this.wrapS=this.wrapT=this.gl.CLAMP_TO_EDGE,this.minFilter=this.gl.LINEAR):this.gl.generateMipmap(this.target)),this.onUpdate&&this.onUpdate()}else if(this.target===this.gl.TEXTURE_CUBE_MAP)for(let n=0;n<6;n++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,vr);else this.width?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,null):this.gl.texImage2D(this.target,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,vr);this.store.image=this.image}}}const yr={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#00ff00",blue:"#0000ff",fuchsia:"#ff00ff",cyan:"#00ffff",yellow:"#ffff00",orange:"#ff8000"};function _r(t){t.length===4&&(t=t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e||console.warn(`Unable to convert hex string ${t} to rgb values`),[parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255]}function F1(t){return t=parseInt(t),[(t>>16&255)/255,(t>>8&255)/255,(t&255)/255]}function wr(t=null){return t?arguments.length===3?arguments:isNaN(t)?t[0]==="#"?_r(t):yr[t.toLowerCase()]?_r(yr[t.toLowerCase()]):(console.warn("Color format not recognised"),[0,0,0]):F1(t):[0,0,0]}class br extends Array{constructor(e=null){Array.isArray(e)?super(...e):super(...wr(...arguments))}get r(){return this[0]}get g(){return this[1]}get b(){return this[2]}set r(e){this[0]=e}set g(e){this[1]=e}set b(e){this[2]=e}set(e){return Array.isArray(e)?this.copy(e):this.copy(wr(...arguments))}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this}}function B1(t,e){return t[0]=e[0],t[1]=e[1],t}function U1(t,e,s){return t[0]=e,t[1]=s,t}function xr(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t}function Mr(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t}function q1(t,e,s){return t[0]=e[0]*s[0],t[1]=e[1]*s[1],t}function W1(t,e,s){return t[0]=e[0]/s[0],t[1]=e[1]/s[1],t}function cn(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t}function X1(t,e){var s=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(s*s+n*n)}function Y1(t,e){var s=e[0]-t[0],n=e[1]-t[1];return s*s+n*n}function Er(t){var e=t[0],s=t[1];return Math.sqrt(e*e+s*s)}function H1(t){var e=t[0],s=t[1];return e*e+s*s}function G1(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Z1(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function J1(t,e){var s=e[0],n=e[1],i=s*s+n*n;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function K1(t,e){return t[0]*e[0]+t[1]*e[1]}function kr(t,e){return t[0]*e[1]-t[1]*e[0]}function Q1(t,e,s,n){var i=e[0],r=e[1];return t[0]=i+n*(s[0]-i),t[1]=r+n*(s[1]-r),t}function eu(t,e,s){var n=e[0],i=e[1];return t[0]=s[0]*n+s[3]*i+s[6],t[1]=s[1]*n+s[4]*i+s[7],t}function tu(t,e,s){let n=e[0],i=e[1];return t[0]=s[0]*n+s[4]*i+s[12],t[1]=s[1]*n+s[5]*i+s[13],t}function su(t,e){return t[0]===e[0]&&t[1]===e[1]}class $t extends Array{constructor(e=0,s=e){return super(e,s),this}get x(){return this[0]}get y(){return this[1]}set x(e){this[0]=e}set y(e){this[1]=e}set(e,s=e){return e.length?this.copy(e):(U1(this,e,s),this)}copy(e){return B1(this,e),this}add(e,s){return s?xr(this,e,s):xr(this,this,e),this}sub(e,s){return s?Mr(this,e,s):Mr(this,this,e),this}multiply(e){return e.length?q1(this,this,e):cn(this,this,e),this}divide(e){return e.length?W1(this,this,e):cn(this,this,1/e),this}inverse(e=this){return Z1(this,e),this}len(){return Er(this)}distance(e){return e?X1(this,e):Er(this)}squaredLen(){return this.squaredDistance()}squaredDistance(e){return e?Y1(this,e):H1(this)}negate(e=this){return G1(this,e),this}cross(e,s){return s?kr(e,s):kr(this,e)}scale(e){return cn(this,this,e),this}normalize(){return J1(this,this),this}dot(e){return K1(this,e)}equals(e){return su(this,e)}applyMatrix3(e){return eu(this,this,e),this}applyMatrix4(e){return tu(this,this,e),this}lerp(e,s){Q1(this,this,e,s)}clone(){return new $t(this[0],this[1])}fromArray(e,s=0){return this[0]=e[s],this[1]=e[s+1],this}toArray(e=[],s=0){return e[s]=this[0],e[s+1]=this[1],e}}class pt extends Nt{constructor(e,{width:s=1,height:n=1,widthSegments:i=1,heightSegments:r=1,attributes:a={}}={}){const o=i,l=r,c=(o+1)*(l+1),h=o*l*6,u=new Float32Array(c*3),f=new Float32Array(c*3),d=new Float32Array(c*2),p=c>65536?new Uint32Array(h):new Uint16Array(h);pt.buildPlane(u,f,d,p,s,n,0,o,l),Object.assign(a,{position:{size:3,data:u},normal:{size:3,data:f},uv:{size:2,data:d},index:{data:p}}),super(e,a)}static buildPlane(e,s,n,i,r,a,o,l,c,h=0,u=1,f=2,d=1,p=-1,m=0,v=0){const g=m,x=r/l,w=a/c;for(let y=0;y<=c;y++){let k=y*w-a/2;for(let b=0;b<=l;b++,m++){let $=b*x-r/2;if(e[m*3+h]=$*d,e[m*3+u]=k*p,e[m*3+f]=o/2,s[m*3+h]=0,s[m*3+u]=0,s[m*3+f]=o>=0?1:-1,n[m*2]=b/l,n[m*2+1]=1-y/c,y===c||b===l)continue;let P=g+b+y*(l+1),D=g+b+(y+1)*(l+1),j=g+b+(y+1)*(l+1)+1,B=g+b+y*(l+1)+1;i[v*6]=P,i[v*6+1]=D,i[v*6+2]=B,i[v*6+3]=D,i[v*6+4]=j,i[v*6+5]=B,v++}}}}class Do extends Nt{constructor(e,{width:s=1,height:n=1,depth:i=1,widthSegments:r=1,heightSegments:a=1,depthSegments:o=1,attributes:l={}}={}){const c=r,h=a,u=o,f=(c+1)*(h+1)*2+(c+1)*(u+1)*2+(h+1)*(u+1)*2,d=(c*h*2+c*u*2+h*u*2)*6,p=new Float32Array(f*3),m=new Float32Array(f*3),v=new Float32Array(f*2),g=f>65536?new Uint32Array(d):new Uint16Array(d);let x=0,w=0;pt.buildPlane(p,m,v,g,i,n,s,u,h,2,1,0,-1,-1,x,w),x+=(u+1)*(h+1),w+=u*h,pt.buildPlane(p,m,v,g,i,n,-s,u,h,2,1,0,1,-1,x,w),x+=(u+1)*(h+1),w+=u*h,pt.buildPlane(p,m,v,g,s,i,n,u,c,0,2,1,1,1,x,w),x+=(c+1)*(u+1),w+=c*u,pt.buildPlane(p,m,v,g,s,i,-n,u,c,0,2,1,1,-1,x,w),x+=(c+1)*(u+1),w+=c*u,pt.buildPlane(p,m,v,g,s,n,-i,c,h,0,1,2,-1,-1,x,w),x+=(c+1)*(h+1),w+=c*h,pt.buildPlane(p,m,v,g,s,n,i,c,h,0,1,2,1,-1,x,w),Object.assign(l,{position:{size:3,data:p},normal:{size:3,data:m},uv:{size:2,data:v},index:{data:g}}),super(e,l)}}const Be={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,DOLLY_PAN:3},xt=new fe,Ke=new $t,et=new $t;function nu(t,{element:e=document.body,enabled:s=!0,target:n=new fe,ease:i=.25,inertia:r=.85,enableRotate:a=!0,rotateSpeed:o=.1,autoRotate:l=!1,autoRotateSpeed:c=1,enableZoom:h=!0,zoomSpeed:u=1,enablePan:f=!0,panSpeed:d=.1,minPolarAngle:p=0,maxPolarAngle:m=Math.PI,minAzimuthAngle:v=-1/0,maxAzimuthAngle:g=1/0,minDistance:x=0,maxDistance:w=1/0}={}){this.enabled=s,this.target=n,i=i||1,r=r||0,this.minDistance=x,this.maxDistance=w;const y={radius:1,phi:0,theta:0},k={radius:1,phi:0,theta:0},b={radius:1,phi:0,theta:0},$=new fe,P=new fe;P.copy(t.position).sub(this.target),b.radius=k.radius=P.distance(),b.theta=k.theta=Math.atan2(P.x,P.z),b.phi=k.phi=Math.acos(Math.min(Math.max(P.y/k.radius,-1),1)),this.offset=P,this.update=()=>{l&&ce(),k.radius*=y.radius,k.theta+=y.theta,k.phi+=y.phi,k.theta=Math.max(v,Math.min(g,k.theta)),k.phi=Math.max(p,Math.min(m,k.phi)),k.radius=Math.max(this.minDistance,Math.min(this.maxDistance,k.radius)),b.phi+=(k.phi-b.phi)*i,b.theta+=(k.theta-b.theta)*i,b.radius+=(k.radius-b.radius)*i,this.target.add($);let O=b.radius*Math.sin(Math.max(1e-6,b.phi));P.x=O*Math.sin(b.theta),P.y=b.radius*Math.cos(b.phi),P.z=O*Math.cos(b.theta),t.position.copy(this.target).add(P),t.lookAt(this.target),y.theta*=r,y.phi*=r,$.multiply(r),y.radius=1},this.forcePosition=()=>{P.copy(t.position).sub(this.target),b.radius=k.radius=P.distance(),b.theta=k.theta=Math.atan2(P.x,P.z),b.phi=k.phi=Math.acos(Math.min(Math.max(P.y/k.radius,-1),1)),t.lookAt(this.target)};const D=new $t,j=new $t,B=new $t;let z=Be.NONE;this.mouseButtons={ORBIT:0,ZOOM:1,PAN:2};function C(){return Math.pow(.95,u)}function N(O,J){xt.set(J[0],J[1],J[2]),xt.multiply(-O),$.add(xt)}function q(O,J){xt.set(J[4],J[5],J[6]),xt.multiply(O),$.add(xt)}const Q=(O,J)=>{xt.copy(t.position).sub(this.target);let Me=xt.distance();Me*=Math.tan((t.fov||45)/2*Math.PI/180),N(2*O*Me/e.clientHeight,t.matrix),q(2*J*Me/e.clientHeight,t.matrix)};function te(O){y.radius/=O}function ce(){const O=2*Math.PI/60/60*c;y.theta-=O}function ie(O,J){Ke.set(O,J),et.sub(Ke,D).multiply(o),y.theta-=2*Math.PI*et.x/e.clientHeight,y.phi-=2*Math.PI*et.y/e.clientHeight,D.copy(Ke)}function be(O){Ke.set(O.clientX,O.clientY),et.sub(Ke,B),et.y>0?te(C()):et.y<0&&te(1/C()),B.copy(Ke)}function we(O,J){Ke.set(O,J),et.sub(Ke,j).multiply(d),Q(et.x,et.y),j.copy(Ke)}function ke(O){if(h){let J=O.touches[0].pageX-O.touches[1].pageX,Me=O.touches[0].pageY-O.touches[1].pageY,Ve=Math.sqrt(J*J+Me*Me);B.set(0,Ve)}if(f){let J=.5*(O.touches[0].pageX+O.touches[1].pageX),Me=.5*(O.touches[0].pageY+O.touches[1].pageY);j.set(J,Me)}}function Oe(O){if(h){let J=O.touches[0].pageX-O.touches[1].pageX,Me=O.touches[0].pageY-O.touches[1].pageY,Ve=Math.sqrt(J*J+Me*Me);Ke.set(0,Ve),et.set(0,Math.pow(Ke.y/B.y,u)),te(et.y),B.copy(Ke)}if(f){let J=.5*(O.touches[0].pageX+O.touches[1].pageX),Me=.5*(O.touches[0].pageY+O.touches[1].pageY);we(J,Me)}}const Ce=O=>{if(!!this.enabled){switch(O.button){case this.mouseButtons.ORBIT:if(a===!1)return;D.set(O.clientX,O.clientY),z=Be.ROTATE;break;case this.mouseButtons.ZOOM:if(h===!1)return;B.set(O.clientX,O.clientY),z=Be.DOLLY;break;case this.mouseButtons.PAN:if(f===!1)return;j.set(O.clientX,O.clientY),z=Be.PAN;break}z!==Be.NONE&&(window.addEventListener("mousemove",$e,!1),window.addEventListener("mouseup",xe,!1))}},$e=O=>{if(!!this.enabled)switch(z){case Be.ROTATE:if(a===!1)return;ie(O.clientX,O.clientY);break;case Be.DOLLY:if(h===!1)return;be(O);break;case Be.PAN:if(f===!1)return;we(O.clientX,O.clientY);break}},xe=()=>{window.removeEventListener("mousemove",$e,!1),window.removeEventListener("mouseup",xe,!1),z=Be.NONE},Te=O=>{!this.enabled||!h||z!==Be.NONE&&z!==Be.ROTATE||(O.stopPropagation(),O.preventDefault(),O.deltaY<0?te(1/C()):O.deltaY>0&&te(C()))},Ie=O=>{if(!!this.enabled)switch(O.preventDefault(),O.touches.length){case 1:if(a===!1)return;D.set(O.touches[0].pageX,O.touches[0].pageY),z=Be.ROTATE;break;case 2:if(h===!1&&f===!1)return;ke(O),z=Be.DOLLY_PAN;break;default:z=Be.NONE}},Y=O=>{if(!!this.enabled)switch(O.preventDefault(),O.stopPropagation(),O.touches.length){case 1:if(a===!1)return;ie(O.touches[0].pageX,O.touches[0].pageY);break;case 2:if(h===!1&&f===!1)return;Oe(O);break;default:z=Be.NONE}},se=()=>{!this.enabled||(z=Be.NONE)},_e=O=>{!this.enabled||O.preventDefault()};function me(){e.addEventListener("contextmenu",_e,!1),e.addEventListener("mousedown",Ce,!1),e.addEventListener("wheel",Te,{passive:!1}),e.addEventListener("touchstart",Ie,{passive:!1}),e.addEventListener("touchend",se,!1),e.addEventListener("touchmove",Y,{passive:!1})}this.remove=function(){e.removeEventListener("contextmenu",_e),e.removeEventListener("mousedown",Ce),e.removeEventListener("wheel",Te),e.removeEventListener("touchstart",Ie),e.removeEventListener("touchend",se),e.removeEventListener("touchmove",Y),window.removeEventListener("mousemove",$e),window.removeEventListener("mouseup",xe)},me()}const hn={},iu=(t,e,s={})=>{if(hn[e])return hn[e];const n=new hi(t,s),i=new Image;return hn[e]=n,i.onload=()=>{n.image=i},i.src=e,n};var ru={texture:iu};const au=typeof globalThis.WorkerGlobalScope!="undefined"&&self instanceof globalThis.WorkerGlobalScope;let Bs=[],Us=2,zt=0,Sr=0;const zn="plant.log.history",ui="localStorage"in globalThis,Bt=ui?zn in localStorage?JSON.parse(localStorage.getItem(zn)):[]:[];ui&&(Us=parseInt(localStorage.getItem("pt-log-level"))||2);function ou(){ui&&localStorage.setItem(zn,JSON.stringify(Bt))}let Ut;function je(t){zt=Math.max(zt,t.length);const e=Sr;Sr++;const s=(i,r)=>{if(!au&&(Bt.push({scope:t,args:i,level:Us,date:Date.now()}),Bt.length=Math.min(100,Bt.length),Ut&&Ut.set(Bt),ou(),(!Bs.length||Bs.includes(t))&&r<=Us)){if(i instanceof Error){console.error(`[${t.padEnd(zt," ")}]`,i);return}if(Array.isArray(i)&&typeof i[0]=="string"&&typeof i[1]=="object"){console.groupCollapsed(`%c[${t.padEnd(zt," ")}]`,`color: hsl(${e*30}deg 68% 64%); font-weight: bold;`,i[0]),console.log(...i.slice(1)),console.groupEnd();return}r===0&&console.log(`%c[${t.padEnd(zt," ")}]`,`color: hsl(${e*30}deg 68% 64%); font-weight: bold;`,...i),r===1&&console.warn(`[${t.padEnd(zt," ")}]`,...i)}},n=(...i)=>s(i,2);return n.warn=(...i)=>s(i,1),n.error=i=>s(i,0),n}je.getStore=function(){return Ut||(Ut=Ye([]),Ut)};je.getHistory=function(){return[...Bt]};je.setFilter=(...t)=>{Bs=t,console.log("[log] set filter",{filters:Bs})};je.setLevel=(t=0)=>{Us=t,localStorage.setItem("pt-log-level",""+t)};function lu(t){const e={};return(...s)=>{const n=dh(JSON.stringify(s));return n in e?e[n]:e[n]=t(...s)}}var vs="<unknown>";function cu(t){var e=t.split(`
`);return e.reduce(function(s,n){var i=fu(n)||pu(n)||gu(n)||bu(n)||_u(n);return i&&s.push(i),s},[])}var hu=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/|[a-z]:\\|\\\\).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,uu=/\((\S*)(?::(\d+))(?::(\d+))\)/;function fu(t){var e=hu.exec(t);if(!e)return null;var s=e[2]&&e[2].indexOf("native")===0,n=e[2]&&e[2].indexOf("eval")===0,i=uu.exec(e[2]);return n&&i!=null&&(e[2]=i[1],e[3]=i[2],e[4]=i[3]),{file:s?null:e[2],methodName:e[1]||vs,arguments:s?[e[2]]:[],lineNumber:e[3]?+e[3]:null,column:e[4]?+e[4]:null}}var du=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function pu(t){var e=du.exec(t);return e?{file:e[2],methodName:e[1]||vs,arguments:[],lineNumber:+e[3],column:e[4]?+e[4]:null}:null}var mu=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,vu=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function gu(t){var e=mu.exec(t);if(!e)return null;var s=e[3]&&e[3].indexOf(" > eval")>-1,n=vu.exec(e[3]);return s&&n!=null&&(e[3]=n[1],e[4]=n[2],e[5]=null),{file:e[3],methodName:e[1]||vs,arguments:e[2]?e[2].split(","):[],lineNumber:e[4]?+e[4]:null,column:e[5]?+e[5]:null}}var yu=/^\s*(?:([^@]*)(?:\((.*?)\))?@)?(\S.*?):(\d+)(?::(\d+))?\s*$/i;function _u(t){var e=yu.exec(t);return e?{file:e[3],methodName:e[1]||vs,arguments:[],lineNumber:+e[4],column:e[5]?+e[5]:null}:null}var wu=/^\s*at (?:((?:\[object object\])?[^\\/]+(?: \[as \S+\])?) )?\(?(.*?):(\d+)(?::(\d+))?\)?\s*$/i;function bu(t){var e=wu.exec(t);return e?{file:e[2],methodName:e[1]||vs,arguments:[],lineNumber:+e[3],column:e[4]?+e[4]:null}:null}const xu=t=>t.replace(window.location.href,"").replace(/^node_modules/,"").replace(/.+?(?=plantarium)plantarium\//,"");var jn=t=>{const e=cu(t.stack).map(s=>(s.file=xu(s.file),s));return{title:t.message,type:t.name,lines:e}};function Tr(t,e,s){const n=t.slice();return n[1]=e[s],n}function Ar(t){let e,s,n,i=t[0].type+"",r,a,o,l=t[0].title+"",c,h,u,f,d,p,m,v,g=t[0].lines,x=[];for(let w=0;w<g.length;w+=1)x[w]=Pr(Tr(t,g,w));return{c(){e=T("div"),s=T("p"),n=T("b"),r=W(i),a=W(":"),o=R(),c=W(l),h=R(),u=T("pre"),f=W("    "),d=T("code"),p=W(`
      `);for(let w=0;w<x.length;w+=1)x[w].c();m=W(`
    `),v=W(`
  `),this.h()},l(w){e=A(w,"DIV",{class:!0});var y=S(e);s=A(y,"P",{});var k=S(s);n=A(k,"B",{});var b=S(n);r=X(b,i),a=X(b,":"),b.forEach(_),o=F(k),c=X(k,l),k.forEach(_),h=F(y),u=A(y,"PRE",{class:!0});var $=S(u);f=X($,"    "),d=A($,"CODE",{});var P=S(d);p=X(P,`
      `);for(let D=0;D<x.length;D+=1)x[D].l(P);m=X(P,`
    `),P.forEach(_),v=X($,`
  `),$.forEach(_),y.forEach(_),this.h()},h(){E(u,"class","svelte-1e5rtbs"),E(e,"class","wrapper svelte-1e5rtbs")},m(w,y){I(w,e,y),M(e,s),M(s,n),M(n,r),M(n,a),M(s,o),M(s,c),M(e,h),M(e,u),M(u,f),M(u,d),M(d,p);for(let k=0;k<x.length;k+=1)x[k].m(d,null);M(d,m),M(u,v)},p(w,y){if(y&1&&i!==(i=w[0].type+"")&&Ee(r,i),y&1&&l!==(l=w[0].title+"")&&Ee(c,l),y&1){g=w[0].lines;let k;for(k=0;k<g.length;k+=1){const b=Tr(w,g,k);x[k]?x[k].p(b,y):(x[k]=Pr(b),x[k].c(),x[k].m(d,m))}for(;k<x.length;k+=1)x[k].d(1);x.length=g.length}},d(w){w&&_(e),Fe(x,w)}}}function Pr(t){let e,s,n=t[1].methodName+"",i,r,a,o=t[1].file+"",l,c;return{c(){e=W("at "),s=T("strong"),i=W(n),r=W(" "),a=T("i"),l=W(o),c=T("br")},l(h){e=X(h,"at "),s=A(h,"STRONG",{});var u=S(s);i=X(u,n),u.forEach(_),r=X(h," "),a=A(h,"I",{});var f=S(a);l=X(f,o),f.forEach(_),c=A(h,"BR",{})},m(h,u){I(h,e,u),I(h,s,u),M(s,i),I(h,r,u),I(h,a,u),M(a,l),I(h,c,u)},p(h,u){u&1&&n!==(n=h[1].methodName+"")&&Ee(i,n),u&1&&o!==(o=h[1].file+"")&&Ee(l,o)},d(h){h&&_(e),h&&_(s),h&&_(r),h&&_(a),h&&_(c)}}}function Mu(t){let e,s=t[0]&&Ar(t);return{c(){s&&s.c(),e=he()},l(n){s&&s.l(n),e=he()},m(n,i){s&&s.m(n,i),I(n,e,i)},p(n,[i]){n[0]?s?s.p(n,i):(s=Ar(n),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:H,o:H,d(n){s&&s.d(n),n&&_(e)}}}function Eu(t,e,s){let{stacktrace:n}=e;return t.$$set=i=>{"stacktrace"in i&&s(0,n=i.stacktrace)},[n]}class fi extends ve{constructor(e){super(),ge(this,e,Eu,Mu,ye,{stacktrace:0})}}function Ir(t,e,s){const n=t.slice();return n[13]=e[s],n}function Nr(t){let e,s,n,i,r,a,o,l,c,h,u,f,d,p,m,v,g,x,w,y,k,b,$,P=t[6]&&Lr(t),D=t[0].title&&Dr(t);const j=[Tu,Su,ku],B=[];function z(q,Q){return typeof q[0].content=="string"?0:q[0].content instanceof Error?1:q[0].content instanceof Rl?2:-1}~(o=z(t))&&(l=B[o]=j[o](t));let C=t[0].content instanceof Error&&Or(t),N=t[0].values&&Cr(t);return p=new Jt({props:{name:"cross"}}),{c(){e=T("div"),s=T("div"),n=T("div"),P&&P.c(),i=R(),r=T("div"),D&&D.c(),a=R(),l&&l.c(),c=R(),h=T("div"),C&&C.c(),u=R(),N&&N.c(),f=R(),d=T("div"),m=T("div"),re(p.$$.fragment),g=R(),x=T("div"),this.h()},l(q){e=A(q,"DIV",{class:!0});var Q=S(e);s=A(Q,"DIV",{class:!0});var te=S(s);n=A(te,"DIV",{class:!0});var ce=S(n);P&&P.l(ce),i=F(ce),r=A(ce,"DIV",{class:!0});var ie=S(r);D&&D.l(ie),a=F(ie),l&&l.l(ie),c=F(ie),h=A(ie,"DIV",{class:!0});var be=S(h);C&&C.l(be),u=F(be),N&&N.l(be),be.forEach(_),ie.forEach(_),f=F(ce),d=A(ce,"DIV",{class:!0});var we=S(d);m=A(we,"DIV",{style:!0});var ke=S(m);le(p.$$.fragment,ke),we.forEach(_),ce.forEach(_),g=F(te),x=A(te,"DIV",{style:!0,class:!0}),S(x).forEach(_),te.forEach(_),Q.forEach(_),this.h()},h(){E(h,"class","button-wrapper svelte-pmp1k"),E(r,"class","toast-text svelte-pmp1k"),K(m,"display","contents"),K(m,"--text-color",v="var(--text-color-invert)"),K(m,"--height","fit-content"),E(d,"class","toast-close svelte-pmp1k"),E(n,"class","toast-content svelte-pmp1k"),ne(n,"hasIcon",!!t[6]),E(x,"style",w=`transition: width ${t[0].timeout}ms linear;`),E(x,"class","toast-progress svelte-pmp1k"),ne(x,"animateProgress",t[2]),E(s,"class",y="toast toast-"+t[0].type+" svelte-pmp1k"),ne(s,"isInverted",t[5]),E(e,"class","wrapper svelte-pmp1k")},m(q,Q){I(q,e,Q),M(e,s),M(s,n),P&&P.m(n,null),M(n,i),M(n,r),D&&D.m(r,null),M(r,a),~o&&B[o].m(r,null),M(r,c),M(r,h),C&&C.m(h,null),M(h,u),N&&N.m(h,null),M(n,f),M(n,d),M(d,m),ae(p,m,null),M(s,g),M(s,x),t[11](e),k=!0,b||($=Z(d,"click",t[10]),b=!0)},p(q,Q){q[6]?P?(P.p(q,Q),Q&64&&L(P,1)):(P=Lr(q),P.c(),L(P,1),P.m(n,i)):P&&(pe(),V(P,1,1,()=>{P=null}),de()),q[0].title?D?D.p(q,Q):(D=Dr(q),D.c(),D.m(r,a)):D&&(D.d(1),D=null);let te=o;o=z(q),o===te?~o&&B[o].p(q,Q):(l&&(pe(),V(B[te],1,1,()=>{B[te]=null}),de()),~o?(l=B[o],l?l.p(q,Q):(l=B[o]=j[o](q),l.c()),L(l,1),l.m(r,c)):l=null),q[0].content instanceof Error?C?(C.p(q,Q),Q&1&&L(C,1)):(C=Or(q),C.c(),L(C,1),C.m(h,u)):C&&(pe(),V(C,1,1,()=>{C=null}),de()),q[0].values?N?(N.p(q,Q),Q&1&&L(N,1)):(N=Cr(q),N.c(),L(N,1),N.m(h,null)):N&&(pe(),V(N,1,1,()=>{N=null}),de()),Q&64&&ne(n,"hasIcon",!!q[6]),(!k||Q&1&&w!==(w=`transition: width ${q[0].timeout}ms linear;`))&&E(x,"style",w),Q&4&&ne(x,"animateProgress",q[2]),(!k||Q&1&&y!==(y="toast toast-"+q[0].type+" svelte-pmp1k"))&&E(s,"class",y),Q&33&&ne(s,"isInverted",q[5])},i(q){k||(L(P),L(l),L(C),L(N),L(p.$$.fragment,q),k=!0)},o(q){V(P),V(l),V(C),V(N),V(p.$$.fragment,q),k=!1},d(q){q&&_(e),P&&P.d(),D&&D.d(),~o&&B[o].d(),C&&C.d(),N&&N.d(),oe(p),t[11](null),b=!1,$()}}}function Lr(t){let e,s,n,i;return s=new Jt({props:{name:t[6],circle:!0}}),{c(){e=T("div"),n=T("div"),re(s.$$.fragment),this.h()},l(r){e=A(r,"DIV",{class:!0});var a=S(e);n=A(a,"DIV",{style:!0});var o=S(n);le(s.$$.fragment,o),a.forEach(_),this.h()},h(){K(n,"display","contents"),K(n,"--text-color","var(--text-color-invert)"),K(n,"--width","40px"),K(n,"--height","40px"),E(e,"class","toast-icon svelte-pmp1k")},m(r,a){I(r,e,a),M(e,n),ae(s,n,null),i=!0},p(r,a){const o={};a&64&&(o.name=r[6]),s.$set(o)},i(r){i||(L(s.$$.fragment,r),i=!0)},o(r){V(s.$$.fragment,r),i=!1},d(r){r&&_(e),oe(s)}}}function Dr(t){let e,s=t[0].title+"",n;return{c(){e=T("h3"),n=W(s),this.h()},l(i){e=A(i,"H3",{class:!0});var r=S(e);n=X(r,s),r.forEach(_),this.h()},h(){E(e,"class","svelte-pmp1k")},m(i,r){I(i,e,r),M(e,n)},p(i,r){r&1&&s!==(s=i[0].title+"")&&Ee(n,s)},d(i){i&&_(e)}}}function ku(t){let e,s,n;var i=t[0].content;function r(a){return{}}return i&&(e=new i(r())),{c(){e&&re(e.$$.fragment),s=he()},l(a){e&&le(e.$$.fragment,a),s=he()},m(a,o){e&&ae(e,a,o),I(a,s,o),n=!0},p(a,o){if(i!==(i=a[0].content)){if(e){pe();const l=e;V(l.$$.fragment,1,0,()=>{oe(l,1)}),de()}i?(e=new i(r()),re(e.$$.fragment),L(e.$$.fragment,1),ae(e,s.parentNode,s)):e=null}},i(a){n||(e&&L(e.$$.fragment,a),n=!0)},o(a){e&&V(e.$$.fragment,a),n=!1},d(a){a&&_(s),e&&oe(e,a)}}}function Su(t){let e,s=t[0].content.message+"",n,i,r,a,o=t[3]&&$r(t);return{c(){e=T("p"),n=W(s),i=R(),o&&o.c(),r=he(),this.h()},l(l){e=A(l,"P",{class:!0});var c=S(e);n=X(c,s),c.forEach(_),i=F(l),o&&o.l(l),r=he(),this.h()},h(){E(e,"class","svelte-pmp1k")},m(l,c){I(l,e,c),M(e,n),I(l,i,c),o&&o.m(l,c),I(l,r,c),a=!0},p(l,c){(!a||c&1)&&s!==(s=l[0].content.message+"")&&Ee(n,s),l[3]?o?(o.p(l,c),c&8&&L(o,1)):(o=$r(l),o.c(),L(o,1),o.m(r.parentNode,r)):o&&(pe(),V(o,1,1,()=>{o=null}),de())},i(l){a||(L(o),a=!0)},o(l){V(o),a=!1},d(l){l&&_(e),l&&_(i),o&&o.d(l),l&&_(r)}}}function Tu(t){let e,s=t[0].content+"";return{c(){e=T("p"),this.h()},l(n){e=A(n,"P",{class:!0});var i=S(e);i.forEach(_),this.h()},h(){E(e,"class","svelte-pmp1k")},m(n,i){I(n,e,i),e.innerHTML=s},p(n,i){i&1&&s!==(s=n[0].content+"")&&(e.innerHTML=s)},i:H,o:H,d(n){n&&_(e)}}}function $r(t){let e,s,n,i;return s=new fi({props:{stacktrace:jn(t[0].content)}}),{c(){e=T("div"),re(s.$$.fragment),this.h()},l(r){e=A(r,"DIV",{class:!0});var a=S(e);le(s.$$.fragment,a),a.forEach(_),this.h()},h(){E(e,"class","stack-trace svelte-pmp1k")},m(r,a){I(r,e,a),ae(s,e,null),i=!0},p(r,a){const o={};a&1&&(o.stacktrace=jn(r[0].content)),s.$set(o)},i(r){i||(L(s.$$.fragment,r),ls(()=>{n||(n=lt(e,Gt,{},!0)),n.run(1)}),i=!0)},o(r){V(s.$$.fragment,r),n||(n=lt(e,Gt,{},!1)),n.run(0),i=!1},d(r){r&&_(e),oe(s),r&&n&&n.end()}}}function Or(t){let e,s,n;return e=new Xe({props:{invert:t[5],name:"> StackTrace"}}),e.$on("click",t[7]),{c(){s=T("div"),re(e.$$.fragment),this.h()},l(i){s=A(i,"DIV",{style:!0});var r=S(s);le(e.$$.fragment,r),this.h()},h(){K(s,"display","contents"),K(s,"--margin","5px 10px 5px -10px"),K(s,"--bg","transparent")},m(i,r){I(i,s,r),ae(e,s,null),n=!0},p(i,r){const a={};r&32&&(a.invert=i[5]),e.$set(a)},i(i){n||(L(e.$$.fragment,i),n=!0)},o(i){V(e.$$.fragment,i),n=!1},d(i){i&&_(s),oe(e,i)}}}function Cr(t){let e,s,n=t[0].values,i=[];for(let a=0;a<n.length;a+=1)i[a]=Vr(Ir(t,n,a));const r=a=>V(i[a],1,1,()=>{i[a]=null});return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=he()},l(a){for(let o=0;o<i.length;o+=1)i[o].l(a);e=he()},m(a,o){for(let l=0;l<i.length;l+=1)i[l].m(a,o);I(a,e,o),s=!0},p(a,o){if(o&17){n=a[0].values;let l;for(l=0;l<n.length;l+=1){const c=Ir(a,n,l);i[l]?(i[l].p(c,o),L(i[l],1)):(i[l]=Vr(c),i[l].c(),L(i[l],1),i[l].m(e.parentNode,e))}for(pe(),l=n.length;l<i.length;l+=1)r(l);de()}},i(a){if(!s){for(let o=0;o<n.length;o+=1)L(i[o]);s=!0}},o(a){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)V(i[o]);s=!1},d(a){Fe(i,a),a&&_(e)}}}function Au(t){let e,s,n;function i(){return t[9](t[13])}return e=new Xe({props:{invert:!0,name:t[13]}}),e.$on("click",i),{c(){s=T("div"),re(e.$$.fragment),this.h()},l(r){s=A(r,"DIV",{style:!0});var a=S(s);le(e.$$.fragment,a),this.h()},h(){K(s,"display","contents"),K(s,"--height","fit-content"),K(s,"--white-space","break-spaces"),K(s,"--margin","5px 10px 5px 0")},m(r,a){I(r,s,a),ae(e,s,null),n=!0},p(r,a){t=r;const o={};a&1&&(o.name=t[13]),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){V(e.$$.fragment,r),n=!1},d(r){r&&_(s),oe(e,r)}}}function Pu(t){let e,s,n,i;function r(){return t[8](t[13])}return{c(){e=T("plant-button"),this.h()},l(a){e=A(a,"PLANT-BUTTON",{name:!0}),S(e).forEach(_),this.h()},h(){mt(e,"name",s=t[13])},m(a,o){I(a,e,o),n||(i=Z(e,"click",r),n=!0)},p(a,o){t=a,o&1&&s!==(s=t[13])&&mt(e,"name",s)},i:H,o:H,d(a){a&&_(e),n=!1,i()}}}function Vr(t){let e,s,n,i,r;const a=[Pu,Au],o=[];function l(c,h){return c[4]?0:1}return s=l(t),n=o[s]=a[s](t),{c(){e=T("div"),n.c(),i=R(),this.h()},l(c){e=A(c,"DIV",{class:!0});var h=S(e);n.l(h),i=F(h),h.forEach(_),this.h()},h(){E(e,"class","button-spacer svelte-pmp1k")},m(c,h){I(c,e,h),o[s].m(e,null),M(e,i),r=!0},p(c,h){let u=s;s=l(c),s===u?o[s].p(c,h):(pe(),V(o[u],1,1,()=>{o[u]=null}),de(),n=o[s],n?n.p(c,h):(n=o[s]=a[s](c),n.c()),L(n,1),n.m(e,i))},i(c){r||(L(n),r=!0)},o(c){V(n),r=!1},d(c){c&&_(e),o[s].d()}}}function Iu(t){let e,s,n=t[0]&&Nr(t);return{c(){n&&n.c(),e=he()},l(i){n&&n.l(i),e=he()},m(i,r){n&&n.m(i,r),I(i,e,r),s=!0},p(i,[r]){i[0]?n?(n.p(i,r),r&1&&L(n,1)):(n=Nr(i),n.c(),L(n,1),n.m(e.parentNode,e)):n&&(pe(),V(n,1,1,()=>{n=null}),de())},i(i){s||(L(n),s=!0)},o(i){V(n),s=!1},d(i){n&&n.d(i),i&&_(e)}}}function Nu(t,e,s){let n,i,{toast:r}=e,a=!1,o=!1;function l(){if(r.type===st.ERROR)return"warning";if(r.type===st.SUCCESS)return"checkmark";if(r.type===st.WARNING)return"exclamation"}let c=!1,h;Ct(()=>{setTimeout(()=>{s(2,a=!0)},10)});const u=()=>{s(3,o=!o)},f=v=>r.resolve(v),d=v=>r.resolve(v),p=()=>r.reject();function m(v){Ae[v?"unshift":"push"](()=>{h=v,s(1,h)})}return t.$$set=v=>{"toast"in v&&s(0,r=v.toast)},t.$$.update=()=>{t.$$.dirty&1&&s(6,n=r&&l()),t.$$.dirty&1&&s(5,i=r&&(r.type==="success"||r.type==="warning")),t.$$.dirty&2&&s(4,c=h&&!h.parentElement)},[r,h,a,o,c,i,n,u,f,d,p,m]}class Lu extends ve{constructor(e){super(),ge(this,e,Nu,Iu,ye,{toast:0})}}function zr(t,e,s){const n=t.slice();return n[4]=e[s],n}function Du(t){let e,s;return e=new Lu({props:{toast:t[4]}}),{c(){re(e.$$.fragment)},l(n){le(e.$$.fragment,n)},m(n,i){ae(e,n,i),s=!0},p(n,i){const r={};i&4&&(r.toast=n[4]),e.$set(r)},i(n){s||(L(e.$$.fragment,n),s=!0)},o(n){V(e.$$.fragment,n),s=!1},d(n){oe(e,n)}}}function $u(t){let e,s;return{c(){e=T("plant-toast"),this.h()},l(n){e=A(n,"PLANT-TOAST",{toast:!0}),S(e).forEach(_),this.h()},h(){mt(e,"toast",s=t[4])},m(n,i){I(n,e,i)},p(n,i){i&4&&s!==(s=n[4])&&mt(e,"toast",s)},i:H,o:H,d(n){n&&_(e)}}}function jr(t,e){let s,n,i,r,a,o;const l=[$u,Du],c=[];function h(u,f){return u[0]?0:1}return n=h(e),i=c[n]=l[n](e),{key:t,first:null,c(){s=T("div"),i.c(),r=R(),this.h()},l(u){s=A(u,"DIV",{});var f=S(s);i.l(f),r=F(f),f.forEach(_),this.h()},h(){this.first=s},m(u,f){I(u,s,f),c[n].m(s,null),M(s,r),o=!0},p(u,f){e=u;let d=n;n=h(e),n===d?c[n].p(e,f):(pe(),V(c[d],1,1,()=>{c[d]=null}),de(),i=c[n],i?i.p(e,f):(i=c[n]=l[n](e),i.c()),L(i,1),i.m(s,r))},i(u){o||(L(i),ls(()=>{a||(a=lt(s,Gt,{easing:Bi},!0)),a.run(1)}),o=!0)},o(u){V(i),a||(a=lt(s,Gt,{easing:Bi},!1)),a.run(0),o=!1},d(u){u&&_(s),c[n].d(),u&&a&&a.end()}}}function Ou(t){let e,s=[],n=new Map,i,r=t[2];const a=o=>o[4].id;for(let o=0;o<r.length;o+=1){let l=zr(t,r,o),c=a(l);n.set(c,s[o]=jr(c,l))}return{c(){e=T("div");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){e=A(o,"DIV",{id:!0,class:!0});var l=S(e);for(let c=0;c<s.length;c+=1)s[c].l(l);l.forEach(_),this.h()},h(){E(e,"id","toast-wrapper"),E(e,"class","svelte-1ujlok7")},m(o,l){I(o,e,l);for(let c=0;c<s.length;c+=1)s[c].m(e,null);t[3](e),i=!0},p(o,[l]){l&5&&(r=o[2],pe(),s=Fl(s,l,a,1,o,r,n,e,Bl,jr,null,zr),de())},i(o){if(!i){for(let l=0;l<r.length;l+=1)L(s[l]);i=!0}},o(o){for(let l=0;l<s.length;l+=1)V(s[l]);i=!1},d(o){o&&_(e);for(let l=0;l<s.length;l+=1)s[l].d();t[3](null)}}}function Cu(t,e,s){let n;ht(t,rh,o=>s(2,n=o));let i=!1,r;Ct(function(){s(0,i=!r.parentElement)});function a(o){Ae[o?"unshift":"push"](()=>{r=o,s(1,r)})}return[i,r,n,a]}class $o extends ve{constructor(e){super(),ge(this,e,Cu,Ou,ye,{})}}function Vu(t){let e,s,n,i,r,a,o,l,c,h,u;return{c(){e=T("div"),s=T("input"),n=R(),i=T("label"),r=Ne("svg"),a=Ne("title"),o=W("cross"),l=Ne("line"),c=Ne("line"),this.h()},l(f){e=A(f,"DIV",{class:!0});var d=S(e);s=A(d,"INPUT",{type:!0,id:!0,class:!0}),n=F(d),i=A(d,"LABEL",{class:!0,for:!0});var p=S(i);r=Le(p,"svg",{xmlns:!0,viewBox:!0,class:!0});var m=S(r);a=Le(m,"title",{class:!0});var v=S(a);o=X(v,"cross"),v.forEach(_),l=Le(m,"line",{"vector-effect":!0,x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),S(l).forEach(_),c=Le(m,"line",{"vector-effect":!0,x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),S(c).forEach(_),m.forEach(_),p.forEach(_),d.forEach(_),this.h()},h(){E(s,"type","checkbox"),E(s,"id",t[1]),E(s,"class","svelte-101noug"),E(a,"class","svelte-101noug"),E(l,"vector-effect","non-scaling-stroke"),E(l,"x1","0"),E(l,"y1","100"),E(l,"x2","100"),E(l,"y2","0"),E(l,"class","svelte-101noug"),E(c,"vector-effect","non-scaling-stroke"),E(c,"x1","0"),E(c,"y1","0"),E(c,"x2","100"),E(c,"y2","100"),E(c,"class","svelte-101noug"),E(r,"xmlns","http://www.w3.org/2000/svg"),E(r,"viewBox","0 0 100 100"),E(r,"class","svelte-101noug"),E(i,"class","checkbox-label svelte-101noug"),E(i,"for",t[1]),E(e,"class","component-wrapper svelte-101noug")},m(f,d){I(f,e,d),M(e,s),s.checked=t[0],M(e,n),M(e,i),M(i,r),M(r,a),M(a,o),M(r,l),M(r,c),h||(u=Z(s,"change",t[2]),h=!0)},p(f,[d]){d&2&&E(s,"id",f[1]),d&1&&(s.checked=f[0]),d&2&&E(i,"for",f[1])},i:H,o:H,d(f){f&&_(e),h=!1,u()}}}function zu(t,e,s){const n=He();let{value:i=!1}=e,{id:r=li()}=e;function a(){i=this.checked,s(0,i)}return t.$$set=o=>{"value"in o&&s(0,i=o.value),"id"in o&&s(1,r=o.id)},t.$$.update=()=>{t.$$.dirty&1&&i!==void 0&&n("change",!!i)},[i,r,a]}class Zt extends ve{constructor(e){super(),ge(this,e,zu,Vu,ye,{value:0,id:1})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),Ue()}get id(){return this.$$.ctx[1]}set id(e){this.$$set({id:e}),Ue()}}function Rr(t){let e,s,n,i,r,a,o,l;return{c(){e=T("div"),s=T("div"),n=R(),i=T("div"),r=R(),a=T("div"),this.h()},l(c){e=A(c,"DIV",{class:!0});var h=S(e);s=A(h,"DIV",{class:!0}),S(s).forEach(_),n=F(h),i=A(h,"DIV",{id:!0,class:!0}),S(i).forEach(_),r=F(h),a=A(h,"DIV",{id:!0,class:!0}),S(a).forEach(_),h.forEach(_),this.h()},h(){E(s,"class","alpha-value svelte-1iet4l8"),E(i,"id","alpha-picker"),E(i,"class","svelte-1iet4l8"),E(a,"id","alpha-event"),E(a,"class","svelte-1iet4l8"),E(e,"class","alpha-selector svelte-1iet4l8")},m(c,h){I(c,e,h),M(e,s),M(e,n),M(e,i),t[21](i),M(e,r),M(e,a),o||(l=[Z(a,"mousedown",t[15]),Z(a,"touchstart",t[16])],o=!0)},p:H,d(c){c&&_(e),t[21](null),o=!1,Qe(l)}}}function Fr(t){let e,s,n,i,r,a,o,l,c,h,u,f,d,p,m,v,g,x,w,y,k,b,$,P,D,j,B,z,C;return{c(){e=T("div"),s=T("div"),n=T("div"),i=R(),r=T("div"),a=T("p"),o=W(t[5]),l=R(),c=T("div"),h=T("div"),u=T("p"),f=W(t[2]),d=R(),p=T("p"),m=W("R"),v=R(),g=T("div"),x=T("p"),w=W(t[3]),y=R(),k=T("p"),b=W("G"),$=R(),P=T("div"),D=T("p"),j=W(t[4]),B=R(),z=T("p"),C=W("B"),this.h()},l(N){e=A(N,"DIV",{class:!0});var q=S(e);s=A(q,"DIV",{class:!0});var Q=S(s);n=A(Q,"DIV",{class:!0}),S(n).forEach(_),Q.forEach(_),i=F(q),r=A(q,"DIV",{class:!0});var te=S(r);a=A(te,"P",{class:!0});var ce=S(a);o=X(ce,t[5]),ce.forEach(_),te.forEach(_),l=F(q),c=A(q,"DIV",{class:!0});var ie=S(c);h=A(ie,"DIV",{class:!0});var be=S(h);u=A(be,"P",{class:!0});var we=S(u);f=X(we,t[2]),we.forEach(_),d=F(be),p=A(be,"P",{class:!0});var ke=S(p);m=X(ke,"R"),ke.forEach(_),be.forEach(_),v=F(ie),g=A(ie,"DIV",{class:!0});var Oe=S(g);x=A(Oe,"P",{class:!0});var Ce=S(x);w=X(Ce,t[3]),Ce.forEach(_),y=F(Oe),k=A(Oe,"P",{class:!0});var $e=S(k);b=X($e,"G"),$e.forEach(_),Oe.forEach(_),$=F(ie),P=A(ie,"DIV",{class:!0});var xe=S(P);D=A(xe,"P",{class:!0});var Te=S(D);j=X(Te,t[4]),Te.forEach(_),B=F(xe),z=A(xe,"P",{class:!0});var Ie=S(z);C=X(Ie,"B"),Ie.forEach(_),xe.forEach(_),ie.forEach(_),q.forEach(_),this.h()},h(){E(n,"class","color-picked svelte-1iet4l8"),E(s,"class","color-picked-bg svelte-1iet4l8"),E(a,"class","text svelte-1iet4l8"),E(r,"class","hex-text-block svelte-1iet4l8"),E(u,"class","text svelte-1iet4l8"),E(p,"class","text-label svelte-1iet4l8"),E(h,"class","rgb-text-block svelte-1iet4l8"),E(x,"class","text svelte-1iet4l8"),E(k,"class","text-label svelte-1iet4l8"),E(g,"class","rgb-text-block svelte-1iet4l8"),E(D,"class","text svelte-1iet4l8"),E(z,"class","text-label svelte-1iet4l8"),E(P,"class","rgb-text-block svelte-1iet4l8"),E(c,"class","rgb-text-div svelte-1iet4l8"),E(e,"class","color-info-box svelte-1iet4l8")},m(N,q){I(N,e,q),M(e,s),M(s,n),t[22](n),M(e,i),M(e,r),M(r,a),M(a,o),M(e,l),M(e,c),M(c,h),M(h,u),M(u,f),M(h,d),M(h,p),M(p,m),M(c,v),M(c,g),M(g,x),M(x,w),M(g,y),M(g,k),M(k,b),M(c,$),M(c,P),M(P,D),M(D,j),M(P,B),M(P,z),M(z,C)},p(N,q){q[0]&32&&Ee(o,N[5]),q[0]&4&&Ee(f,N[2]),q[0]&8&&Ee(w,N[3]),q[0]&16&&Ee(j,N[4])},d(N){N&&_(e),t[22](null)}}}function ju(t){let e,s,n,i,r,a,o,l,c,h,u,f,d,p,m,v,g,x=t[0]&&Rr(t),w=t[1]&&Fr(t);return{c(){e=T("div"),s=T("div"),n=T("div"),i=T("div"),r=T("div"),a=T("div"),o=R(),l=T("div"),c=R(),h=T("div"),u=T("div"),f=R(),d=T("div"),p=R(),x&&x.c(),m=R(),w&&w.c(),this.h()},l(y){e=A(y,"DIV",{class:!0});var k=S(e);s=A(k,"DIV",{class:!0});var b=S(s);n=A(b,"DIV",{class:!0});var $=S(n);i=A($,"DIV",{class:!0});var P=S(i);r=A(P,"DIV",{class:!0});var D=S(r);a=A(D,"DIV",{id:!0,class:!0}),S(a).forEach(_),o=F(D),l=A(D,"DIV",{id:!0,class:!0}),S(l).forEach(_),D.forEach(_),P.forEach(_),$.forEach(_),c=F(b),h=A(b,"DIV",{class:!0});var j=S(h);u=A(j,"DIV",{id:!0,class:!0}),S(u).forEach(_),f=F(j),d=A(j,"DIV",{id:!0,class:!0}),S(d).forEach(_),j.forEach(_),p=F(b),x&&x.l(b),m=F(b),w&&w.l(b),b.forEach(_),k.forEach(_),this.h()},h(){E(a,"id","colorsquare-picker"),E(a,"class","svelte-1iet4l8"),E(l,"id","colorsquare-event"),E(l,"class","svelte-1iet4l8"),E(r,"class","value-gradient svelte-1iet4l8"),E(i,"class","saturation-gradient svelte-1iet4l8"),E(n,"class","colorsquare size svelte-1iet4l8"),E(u,"id","hue-picker"),E(u,"class","svelte-1iet4l8"),E(d,"id","hue-event"),E(d,"class","svelte-1iet4l8"),E(h,"class","hue-selector svelte-1iet4l8"),E(s,"class","main-container svelte-1iet4l8"),E(e,"class","component-wrapper svelte-1iet4l8")},m(y,k){I(y,e,k),M(e,s),M(s,n),M(n,i),M(i,r),M(r,a),t[18](a),M(r,o),M(r,l),t[19](n),M(s,c),M(s,h),M(h,u),t[20](u),M(h,f),M(h,d),M(s,p),x&&x.m(s,null),M(s,m),w&&w.m(s,null),v||(g=[Z(l,"mousedown",t[11]),Z(l,"touchstart",t[12]),Z(d,"mousedown",t[13]),Z(d,"touchstart",t[14])],v=!0)},p(y,k){y[0]?x?x.p(y,k):(x=Rr(y),x.c(),x.m(s,m)):x&&(x.d(1),x=null),y[1]?w?w.p(y,k):(w=Fr(y),w.c(),w.m(s,null)):w&&(w.d(1),w=null)},i:H,o:H,d(y){y&&_(e),t[18](null),t[19](null),t[20](null),x&&x.d(),w&&w.d(),v=!1,Qe(g)}}}function jt(t,e,s){let n=document.querySelector(t);n&&n.removeEventListener(e,s)}function Br(t,e,s){var n,i,r,a=Math.floor(t*6),o=t*6-a,l=s*(1-e),c=s*(1-o*e),h=s*(1-(1-o)*e);switch(a%6){case 0:n=s,i=h,r=l;break;case 1:n=c,i=s,r=l;break;case 2:n=l,i=s,r=h;break;case 3:n=l,i=c,r=s;break;case 4:n=h,i=l,r=s;break;case 5:n=s,i=l,r=c;break}return[Math.round(n*255),Math.round(i*255),Math.round(r*255)]}function Ru(t,e,s){let{startColor:n="#FF0000"}=e;Ct(()=>{document.addEventListener("mouseup",q),document.addEventListener("touchend",q),document.addEventListener("mousemove",B),document.addEventListener("touchmove",z),document.addEventListener("touchstart",b),document.addEventListener("mousedown",$),k()});let{showAlpha:i=!1}=e,{showOutput:r=!1}=e;const a=He();let o,l=1,c=1,h=1,u=1,f=255,d=0,p=0,m="#FF0000",v,g,x,w,y;function k(){let Y=n.replace("#","");if(Y.length!==6&&Y.length!==3&&!Y.match(/([^A-F0-9])/gi)){alert("Invalid property value (startColor)");return}let se="";Y.length===3?Y.split("").forEach(_e=>{se+=_e+_e}):se=Y,s(5,m=se),s(2,f=parseInt(se.substring(0,2),16)),s(3,d=parseInt(se.substring(2,4),16)),s(4,p=parseInt(se.substring(4,6),16)),Oe(f,d,p,!0),P(),D()}function b(){jt("#alpha-event","mousedown",be),jt("#colorsquare-event","mousedown",C),jt("#hue-event","mousedown",Q),document.removeEventListener("mouseup",q),document.removeEventListener("mousemove",B),document.removeEventListener("touchstart",b),document.removeEventListener("mousedown",$)}function $(){jt("#alpha-event","touchstart",we),jt("#colorsquare-event","touchstart",N),jt("#hue-event","touchstart",te),document.removeEventListener("touchend",q),document.removeEventListener("touchmove",z),document.removeEventListener("touchstart",b),document.removeEventListener("mousedown",$)}function P(){let Y=c*100,se=(1-h)*100;s(7,g.style.top=se+"%",g),s(7,g.style.left=Y+"%",g)}function D(){let Y=l*100;s(9,w.style.left=Y+"%",w)}function j(){a("colorChange",{r:f,g:d,b:p,a:u})}function B(Y){if(o){let se=Y.clientX,_e=Y.clientY,me=o.getBoundingClientRect(),O,J;switch(o.id){case"colorsquare-event":O=(se-me.x)/240*100,J=(_e-me.y)/160*100,O>100?O=100:O<0&&(O=0),J>100?J=100:J<0&&(J=0),J=J.toFixed(2),O=O.toFixed(2),s(7,g.style.top=J+"%",g),s(7,g.style.left=O+"%",g),c=O/100,h=1-J/100,ie();break;case"hue-event":O=(se-10-me.x)/220*100,O>100?O=100:O<0&&(O=0),O=O.toFixed(2),s(9,w.style.left=O+"%",w),l=O/100,ce();break;case"alpha-event":O=(se-10-me.x)/220*100,O>100?O=100:O<0&&(O=0),O=O.toFixed(2),s(10,y.style.left=O+"%",y),u=O/100,ie();break}}}function z(Y){if(o){let se=Y.touches[0].clientX,_e=Y.touches[0].clientY,me=o.getBoundingClientRect(),O,J;switch(o.id){case"colorsquare-event":O=(se-me.x)/240*100,J=(_e-me.y)/160*100,O>100?O=100:O<0&&(O=0),J>100?J=100:J<0&&(J=0),J=J.toFixed(2),O=O.toFixed(2),s(7,g.style.top=J+"%",g),s(7,g.style.left=O+"%",g),c=O/100,h=1-J/100,ie();break;case"hue-event":O=(se-10-me.x)/220*100,O>100?O=100:O<0&&(O=0),O=O.toFixed(2),s(9,w.style.left=O+"%",w),l=O/100,ce();break;case"alpha-event":O=(se-10-me.x)/220*100,O>100?O=100:O<0&&(O=0),O=O.toFixed(2),s(10,y.style.left=O+"%",y),u=O/100,ie();break}}}function C(Y){o=Y.currentTarget;let se=(Y.offsetX+1)/240*100,_e=(Y.offsetY+1)/160*100;_e=+_e.toFixed(2),se=+se.toFixed(2),s(7,g.style.top=_e+"%",g),s(7,g.style.left=se+"%",g),c=se/100,h=1-_e/100,ie()}function N(Y){o=Y.currentTarget;let se=Y.target.getBoundingClientRect(),_e=Y.targetTouches[0].clientX-se.left,me=Y.targetTouches[0].clientY-se.top,O=(_e+1)/240*100,J=(me+1)/160*100;J=+J.toFixed(2),O=+O.toFixed(2),s(7,g.style.top=J+"%",g),s(7,g.style.left=O+"%",g),c=O/100,h=1-J/100,ie()}function q(){o=null}function Q(Y){o=Y.currentTarget;let se=(Y.offsetX-9)/220*100;se=+se.toFixed(2),s(9,w.style.left=se+"%",w),l=se/100,ce()}function te(Y){o=Y.currentTarget;let se=Y.target.getBoundingClientRect(),me=(Y.targetTouches[0].clientX-se.left-9)/220*100;me=+me.toFixed(2),s(9,w.style.left=me+"%",w),l=me/100,ce()}function ce(){let Y=Br(l,1,1);s(6,v.style.background=`rgba(${Y[0]},${Y[1]},${Y[2]},1)`,v),ie()}function ie(){let Y=Br(l,c,h);s(2,f=Y[0]),s(3,d=Y[1]),s(4,p=Y[2]),s(5,m=ke()),j()}function be(Y){o=Y.currentTarget;let se=(Y.offsetX-9)/220*100;se=+se.toFixed(2),s(10,y.style.left=se+"%",y),u=se/100,ie()}function we(Y){o=Y.currentTarget;let se=Y.target.getBoundingClientRect(),me=(Y.targetTouches[0].clientX-se.left-9)/220*100;me=+me.toFixed(2),s(10,y.style.left=me+"%",y),u=me/100,ie()}function ke(){let Y=f.toString(16),se=d.toString(16),_e=p.toString(16);return Y.length==1&&(Y="0"+Y),se.length==1&&(se="0"+se),_e.length==1&&(_e="0"+_e),("#"+Y+se+_e).toUpperCase()}function Oe(Y,se,_e,me){let O,J,Me,Ve,ys,ut,_s,Ge,yt,_t;O=Y/255,J=se/255,Me=_e/255,Ve=Math.max(O,J,Me),ys=Math.min(O,J,Me),ut=Ve-ys,_t=Ve,_t==0?yt=0:yt=ut/Ve;for(let Vt=0;Vt<3;Vt++)if([O,J,Me][Vt]===Ve){_s=Vt;break}if(ut==0)if(Ge=0,me){l=Ge,c=yt,h=_t,ce();return}else return{h:Ge,s:yt,v:_t};else{switch(_s){case 0:Ge=60*((J-Me)/ut%6)/360;break;case 1:Ge=60*((Me-O)/ut+2)/360;break;case 2:Ge=60*((O-J)/ut+4)/360;break}Ge<0&&(Ge+=6)}if(me)l=Ge,c=yt,h=_t,ce();else return{h:Ge,s:yt,v:_t}}function Ce(Y){Ae[Y?"unshift":"push"](()=>{g=Y,s(7,g)})}function $e(Y){Ae[Y?"unshift":"push"](()=>{v=Y,s(6,v)})}function xe(Y){Ae[Y?"unshift":"push"](()=>{w=Y,s(9,w)})}function Te(Y){Ae[Y?"unshift":"push"](()=>{y=Y,s(10,y)})}function Ie(Y){Ae[Y?"unshift":"push"](()=>{x=Y,s(8,x)})}return t.$$set=Y=>{"startColor"in Y&&s(17,n=Y.startColor),"showAlpha"in Y&&s(0,i=Y.showAlpha),"showOutput"in Y&&s(1,r=Y.showOutput)},[i,r,f,d,p,m,v,g,x,w,y,C,N,Q,te,be,we,n,Ce,$e,xe,Te,Ie]}class Fu extends ve{constructor(e){super(),ge(this,e,Ru,ju,ye,{startColor:17,showAlpha:0,showOutput:1},null,[-1,-1])}}/**
 * Convert a series of points to a monotone cubic spline
 * Algorithm based on https://github.com/mbostock/d3
 * https://github.com/yr/monotone-cubic-spline
 * @copyright Yr
 * @license MIT
 */var Bu=1e-6,Ur={points:function(e){var s=Uu(e),n=e[1],i=e[0],r=[],a=s[1],o=s[0];r.push(i,[i[0]+o[0],i[1]+o[1],n[0]-a[0],n[1]-a[1],n[0],n[1]]);for(var l=2,c=s.length;l<c;l++){var h=e[l],u=s[l];r.push([h[0]-u[0],h[1]-u[1],h[0],h[1]])}return r},slice:function(e,s,n){var i=e.slice(s,n);if(s){if(i[1].length<6){var r=i[0].length;i[1]=[i[0][r-2]*2-i[0][r-4],i[0][r-1]*2-i[0][r-3]].concat(i[1])}i[0]=i[0].slice(-2)}return i},svgPath:function(e){for(var s="",n=0;n<e.length;n++){var i=e[n],r=i.length;n?r>4?(s+="C"+i[0]+", "+i[1],s+=", "+i[2]+", "+i[3],s+=", "+i[4]+", "+i[5]):(s+="S"+i[0]+", "+i[1],s+=", "+i[2]+", "+i[3]):s+="M"+i[r-2]+" "+i[r-1]}return s}};function Uu(t){for(var e=qu(t),s=t.length-1,n=[],i=void 0,r=void 0,a=void 0,o=void 0,l=0;l<s;l++)a=Rn(t[l],t[l+1]),Math.abs(a)<Bu?e[l]=e[l+1]=0:(i=e[l]/a,r=e[l+1]/a,o=i*i+r*r,o>9&&(o=a*3/Math.sqrt(o),e[l]=o*i,e[l+1]=o*r));for(var c=0;c<=s;c++)o=(t[Math.min(s,c+1)][0]-t[Math.max(0,c-1)][0])/(6*(1+e[c]*e[c])),n.push([o||0,e[c]*o||0]);return n}function Rn(t,e){return(e[1]-t[1])/(e[0]-t[0])}function qu(t){for(var e=[],s=t[0],n=t[1],i=e[0]=Rn(s,n),r=1,a=t.length-1;r<a;r++)s=n,n=t[r+1],e[r]=(i+(i=Rn(s,n)))*.5;return e[r]=i,e}function qr(t,e,s){const n=t.slice();return n[19]=e[s],n[21]=s,n}function Wr(t,e,s){const n=t.slice();return n[19]=e[s],n}function Xr(t){let e,s,n,i,r;function a(){return t[10](t[19])}return{c(){e=Ne("circle"),this.h()},l(o){e=Le(o,"circle",{cx:!0,cy:!0,r:!0,class:!0}),S(e).forEach(_),this.h()},h(){E(e,"cx",s=t[19].x*100),E(e,"cy",n=t[19].y*100),E(e,"r","2"),E(e,"class","svelte-ezyf1j"),ne(e,"pinned",t[19].pinned)},m(o,l){I(o,e,l),i||(r=Z(e,"mousedown",a),i=!0)},p(o,l){t=o,l&1&&s!==(s=t[19].x*100)&&E(e,"cx",s),l&1&&n!==(n=t[19].y*100)&&E(e,"cy",n),l&1&&ne(e,"pinned",t[19].pinned)},d(o){o&&_(e),i=!1,r()}}}function Wu(t){let e,s,n,i,r;return{c(){e=Ne("line"),this.h()},l(a){e=Le(a,"line",{x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),S(e).forEach(_),this.h()},h(){E(e,"x1",s=t[3][t[21]-1].x*100),E(e,"y1",n=t[3][t[21]-1].y*100),E(e,"x2",i=t[19].x*100),E(e,"y2",r=t[19].y*100),E(e,"class","svelte-ezyf1j")},m(a,o){I(a,e,o)},p:H,d(a){a&&_(e)}}}function Yr(t){let e,s,n,i=t[21]>0&&t[21]%2===0&&Wu(t);return{c(){i&&i.c(),e=Ne("circle"),this.h()},l(r){i&&i.l(r),e=Le(r,"circle",{cx:!0,cy:!0,r:!0,class:!0}),S(e).forEach(_),this.h()},h(){E(e,"cx",s=t[19].x*100),E(e,"cy",n=t[19].y*100),E(e,"r","1"),E(e,"class","svelte-ezyf1j"),ne(e,"pinned",t[19].pinned)},m(r,a){i&&i.m(r,a),I(r,e,a)},p(r,a){r[21]>0&&r[21]%2===0&&i.p(r,a)},d(r){i&&i.d(r),r&&_(e)}}}function Xu(t){let e,s,n,i,r,a,o=t[0],l=[];for(let u=0;u<o.length;u+=1)l[u]=Xr(Wr(t,o,u));let c=t[3],h=[];for(let u=0;u<c.length;u+=1)h[u]=Yr(qr(t,c,u));return{c(){e=T("div"),s=Ne("svg"),n=Ne("path");for(let u=0;u<l.length;u+=1)l[u].c();i=Ne("g");for(let u=0;u<h.length;u+=1)h[u].c();this.h()},l(u){e=A(u,"DIV",{class:!0});var f=S(e);s=Le(f,"svg",{viewBox:!0,width:!0,height:!0,class:!0});var d=S(s);n=Le(d,"path",{d:!0,fill:!0,stroke:!0,class:!0}),S(n).forEach(_);for(let m=0;m<l.length;m+=1)l[m].l(d);i=Le(d,"g",{id:!0,class:!0});var p=S(i);for(let m=0;m<h.length;m+=1)h[m].l(p);p.forEach(_),d.forEach(_),f.forEach(_),this.h()},h(){E(n,"d",t[2]),E(n,"fill","none"),E(n,"stroke","grey"),E(n,"class","svelte-ezyf1j"),E(i,"id","debug"),E(i,"class","svelte-ezyf1j"),E(s,"viewBox","0 0 100 100"),E(s,"width","100"),E(s,"height","100"),E(s,"class","svelte-ezyf1j"),E(e,"class","component-wrapper svelte-ezyf1j")},m(u,f){I(u,e,f),M(e,s),M(s,n);for(let d=0;d<l.length;d+=1)l[d].m(s,null);M(s,i);for(let d=0;d<h.length;d+=1)h[d].m(i,null);r||(a=[Z(s,"mousedown",t[5]),Z(s,"mousemove",t[4]),Z(s,"mouseover",t[7]),Z(s,"mouseout",t[8]),Z(s,"mouseup",t[6]),Z(s,"focus",t[7]),Z(s,"blur",t[8])],r=!0)},p(u,[f]){if(f&4&&E(n,"d",u[2]),f&3){o=u[0];let d;for(d=0;d<o.length;d+=1){const p=Wr(u,o,d);l[d]?l[d].p(p,f):(l[d]=Xr(p),l[d].c(),l[d].m(s,i))}for(;d<l.length;d+=1)l[d].d(1);l.length=o.length}if(f&8){c=u[3];let d;for(d=0;d<c.length;d+=1){const p=qr(u,c,d);h[d]?h[d].p(p,f):(h[d]=Yr(p),h[d].c(),h[d].m(i,null))}for(;d<h.length;d+=1)h[d].d(1);h.length=c.length}},i:H,o:H,d(u){u&&_(e),Fe(l,u),Fe(h,u),r=!1,Qe(a)}}}function Yu(t,e,s){let n,i;const r=He();let{value:a=[{x:0,y:1,pinned:!0},{x:1,y:0,pinned:!0}]}=e,o=!1,l,c,h=0,u=0,f=[];const d=()=>{requestAnimationFrame(()=>{r("change",n),s(0,n=n.sort((b,$)=>b.x>$.x?-1:1))})},p=b=>{b.pinned||(n.splice(n.indexOf(l),1),d())},m=b=>{o&&(h=b.offsetX,u=b.offsetY,l&&(c=l,s(1,l=void 0)),c&&(c.x=h/100,c.y=u/100,d()))},v=()=>{if(!l){const b={x:h/100,y:u/100,pinned:!1};s(1,l=b),n.push(l),d()}},g=()=>{l&&(p(l),s(1,l=void 0)),c=void 0},x=()=>{o=!0},w=()=>{o=!1};function y(b){const $=Ur.points(b.map(P=>[P.x*100,P.y*100]));return Ur.svgPath($)}const k=b=>{s(1,l=b)};return t.$$set=b=>{"value"in b&&s(9,a=b.value)},t.$$.update=()=>{t.$$.dirty&512&&s(0,n=a),t.$$.dirty&1&&s(2,i=y(n))},[n,l,i,f,m,v,g,x,w,a,k]}class Oo extends ve{constructor(e){super(),ge(this,e,Yu,Xu,ye,{value:9})}get value(){return this.$$.ctx[9]}set value(e){this.$$set({value:e}),Ue()}}function Hr(t){let e,s;return{c(){e=T("span"),this.h()},l(n){e=A(n,"SPAN",{class:!0,style:!0}),S(e).forEach(_),this.h()},h(){E(e,"class","overlay svelte-1xh0abi"),E(e,"style",s=`width: ${(t[0]-t[1])/(t[2]-t[1])*100}%`)},m(n,i){I(n,e,i)},p(n,i){i&7&&s!==(s=`width: ${(n[0]-n[1])/(n[2]-n[1])*100}%`)&&E(e,"style",s)},d(n){n&&_(e)}}}function Hu(t){let e,s,n,i,r,a,o,l,c,h,u,f,d=typeof t[1]!="undefined"&&typeof t[2]!="undefined"&&Hr(t);return{c(){e=T("div"),d&&d.c(),s=R(),n=T("button"),i=W("-"),r=R(),a=T("input"),l=R(),c=T("button"),h=W("+"),this.h()},l(p){e=A(p,"DIV",{class:!0});var m=S(e);d&&d.l(m),s=F(m),n=A(m,"BUTTON",{class:!0});var v=S(n);i=X(v,"-"),v.forEach(_),r=F(m),a=A(m,"INPUT",{step:!0,max:!0,min:!0,type:!0,style:!0,class:!0}),l=F(m),c=A(m,"BUTTON",{class:!0});var g=S(c);h=X(g,"+"),g.forEach(_),m.forEach(_),this.h()},h(){E(n,"class","svelte-1xh0abi"),E(a,"step",t[3]),E(a,"max",t[2]),E(a,"min",t[1]),E(a,"type","number"),E(a,"style",o=`width:${t[5]};`),E(a,"class","svelte-1xh0abi"),E(c,"class","svelte-1xh0abi"),E(e,"class","component-wrapper svelte-1xh0abi")},m(p,m){I(p,e,m),d&&d.m(e,null),M(e,s),M(e,n),M(n,i),M(e,r),M(e,a),qe(a,t[0]),t[11](a),M(e,l),M(e,c),M(c,h),u||(f=[Z(n,"click",t[9]),Z(a,"input",t[10]),Z(a,"mousedown",t[7]),Z(a,"mouseup",t[8]),Z(c,"click",t[12])],u=!0)},p(p,[m]){typeof p[1]!="undefined"&&typeof p[2]!="undefined"?d?d.p(p,m):(d=Hr(p),d.c(),d.m(e,s)):d&&(d.d(1),d=null),m&8&&E(a,"step",p[3]),m&4&&E(a,"max",p[2]),m&2&&E(a,"min",p[1]),m&32&&o!==(o=`width:${p[5]};`)&&E(a,"style",o),m&1&&ps(a.value)!==p[0]&&qe(a,p[0])},i:H,o:H,d(p){p&&_(e),d&&d.d(),t[11](null),u=!1,Qe(f)}}}function Gu(t,e,s){let n,i;const r=He();let{min:a=-1/0}=e,{max:o=1/0}=e,{step:l=1}=e,{value:c=0}=e;c||(c=0);let h;function u(b){s(0,c=Math.max(a,Math.min(+c+b,o)))}let f=0,d=0,p;function m(b){b.preventDefault(),d=c,f=b.clientX,p=h.getBoundingClientRect(),window.removeEventListener("mousemove",g),window.addEventListener("mousemove",g),window.addEventListener("mouseup",v),document.body.style.cursor="ew-resize"}function v(){d===c?h.focus():h.blur(),document.body.style.cursor="unset",window.removeEventListener("mouseup",v),window.removeEventListener("mousemove",g)}function g(b){if(n){const $=(b.clientX-p.left)/p.width;s(0,c=Math.max(Math.min(Math.floor(a+(o-a)*$),o),a))}else{const $=b.clientX-f;s(0,c=d+Math.floor($/10))}}const x=()=>u(-l);function w(){c=ps(this.value),s(0,c)}function y(b){Ae[b?"unshift":"push"](()=>{h=b,s(4,h)})}const k=()=>u(+l);return t.$$set=b=>{"min"in b&&s(1,a=b.min),"max"in b&&s(2,o=b.max),"step"in b&&s(3,l=b.step),"value"in b&&s(0,c=b.value)},t.$$.update=()=>{var b;t.$$.dirty&6&&(n=typeof a!="undefined"&&typeof o!="undefined"&&Number.isFinite(a)&&Number.isFinite(o)),t.$$.dirty&1&&c!==void 0&&r("change",parseFloat(c+"")),t.$$.dirty&1&&s(5,i=Number.isFinite(c)?Math.max(((b=c==null?void 0:c.toString().length)!=null?b:1)*8,30)+"px":"20px")},[c,a,o,l,h,i,u,m,v,x,w,y,k]}class Fn extends ve{constructor(e){super(),ge(this,e,Gu,Hu,ye,{min:1,max:2,step:3,value:0})}get min(){return this.$$.ctx[1]}set min(e){this.$$set({min:e}),Ue()}get max(){return this.$$.ctx[2]}set max(e){this.$$set({max:e}),Ue()}get step(){return this.$$.ctx[3]}set step(e){this.$$set({step:e}),Ue()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),Ue()}}function Zu(t){let e,s,n,i,r,a,o,l;return{c(){e=T("div"),s=T("span"),i=R(),r=T("input"),this.h()},l(c){e=A(c,"DIV",{class:!0});var h=S(e);s=A(h,"SPAN",{class:!0,style:!0}),S(s).forEach(_),i=F(h),r=A(h,"INPUT",{step:!0,max:!0,min:!0,type:!0,style:!0,class:!0}),h.forEach(_),this.h()},h(){E(s,"class","overlay svelte-q8ki5o"),E(s,"style",n=`width: ${(t[0]-t[1])/(t[2]-t[1])*100}%`),E(r,"step",t[3]),E(r,"max",t[2]),E(r,"min",t[1]),E(r,"type","number"),E(r,"style",a=`width:${t[6]};`),E(r,"class","svelte-q8ki5o"),E(e,"class","component-wrapper svelte-q8ki5o"),ne(e,"is-down",t[5])},m(c,h){I(c,e,h),M(e,s),M(e,i),M(e,r),qe(r,t[0]),t[10](r),o||(l=[Z(r,"input",t[9]),Z(r,"mousedown",t[7]),Z(r,"mouseup",t[8])],o=!0)},p(c,[h]){h&7&&n!==(n=`width: ${(c[0]-c[1])/(c[2]-c[1])*100}%`)&&E(s,"style",n),h&8&&E(r,"step",c[3]),h&4&&E(r,"max",c[2]),h&2&&E(r,"min",c[1]),h&64&&a!==(a=`width:${c[6]};`)&&E(r,"style",a),h&1&&ps(r.value)!==c[0]&&qe(r,c[0]),h&32&&ne(e,"is-down",c[5])},i:H,o:H,d(c){c&&_(e),t[10](null),o=!1,Qe(l)}}}function Ju(t){return parseFloat(t).toPrecision(2)}function Ku(t,e,s){let n,{value:i=.5}=e,{step:r=.01}=e,{min:a=0}=e,{max:o=1}=e;const l=He();let c,h=!1,u=0,f=0,d=0,p;function m(y){y.preventDefault(),s(5,h=!0),f=i,u=y.clientY,p=c.getBoundingClientRect(),window.removeEventListener("mousemove",g),window.addEventListener("mousemove",g),window.addEventListener("mouseup",v),document.body.style.cursor="ew-resize"}function v(){s(5,h=!1),f===i&&c.focus(),i<a&&s(1,a=i),i>o&&s(2,o=i),document.body.style.cursor="unset",window.removeEventListener("mouseup",v),window.removeEventListener("mousemove",g)}function g(y){if(d=(y.clientX-p.left)/p.width,y.clientY-u,y.ctrlKey){let k=a+(o-a)*d;s(0,i=k)}else s(0,i=Math.max(Math.min(a+(o-a)*d,o),a))}function x(){i=ps(this.value),s(0,i)}function w(y){Ae[y?"unshift":"push"](()=>{c=y,s(4,c)})}return t.$$set=y=>{"value"in y&&s(0,i=y.value),"step"in y&&s(3,r=y.step),"min"in y&&s(1,a=y.min),"max"in y&&s(2,o=y.max)},t.$$.update=()=>{var y;t.$$.dirty&1&&(i||0).toString().length>5&&s(0,i=Ju(i||0)),t.$$.dirty&1&&i!==void 0&&l("change",parseFloat(i+"")),t.$$.dirty&1&&s(6,n=Number.isFinite(i)?Math.max(((y=i==null?void 0:i.toString().length)!=null?y:1)*8,50)+"px":"20px")},[i,a,o,r,c,h,n,m,v,x,w]}class Bn extends ve{constructor(e){super(),ge(this,e,Ku,Zu,ye,{value:0,step:3,min:1,max:2})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),Ue()}get step(){return this.$$.ctx[3]}set step(e){this.$$set({step:e}),Ue()}get min(){return this.$$.ctx[1]}set min(e){this.$$set({min:e}),Ue()}get max(){return this.$$.ctx[2]}set max(e){this.$$set({max:e}),Ue()}}function Gr(t,e,s){const n=t.slice();return n[7]=e[s],n}function Zr(t){let e,s=t[7]+"",n,i,r,a,o;function l(){return t[5](t[7])}return{c(){e=T("p"),n=W(s),i=R(),this.h()},l(c){e=A(c,"P",{style:!0,class:!0});var h=S(e);n=X(h,s),i=F(h),h.forEach(_),this.h()},h(){E(e,"style",r=`opacity: ${t[7]===t[0]?.5:1}`),E(e,"class","item svelte-1w2s4bn"),ne(e,"selected",t[0]===t[7])},m(c,h){I(c,e,h),M(e,n),M(e,i),a||(o=Z(e,"click",l),a=!0)},p(c,h){t=c,h&2&&s!==(s=t[7]+"")&&Ee(n,s),h&3&&r!==(r=`opacity: ${t[7]===t[0]?.5:1}`)&&E(e,"style",r),h&3&&ne(e,"selected",t[0]===t[7])},d(c){c&&_(e),a=!1,o()}}}function Qu(t){let e,s,n=t[1],i=[];for(let r=0;r<n.length;r+=1)i[r]=Zr(Gr(t,n,r));return{c(){e=T("div"),s=T("div");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=A(r,"DIV",{class:!0});var a=S(e);s=A(a,"DIV",{id:!0,class:!0});var o=S(s);for(let l=0;l<i.length;l+=1)i[l].l(o);o.forEach(_),a.forEach(_),this.h()},h(){E(s,"id","main"),E(s,"class","svelte-1w2s4bn"),E(e,"class","component-wrapper svelte-1w2s4bn")},m(r,a){I(r,e,a),M(e,s);for(let o=0;o<i.length;o+=1)i[o].m(s,null)},p(r,[a]){if(a&7){n=r[1];let o;for(o=0;o<n.length;o+=1){const l=Gr(r,n,o);i[o]?i[o].p(l,a):(i[o]=Zr(l),i[o].c(),i[o].m(s,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},i:H,o:H,d(r){r&&_(e),Fe(i,r)}}}function ef(t,e,s){const n=He();let{value:i=void 0}=e;function r(h){s(0,i=h),open=!1}let{values:a=[]}=e;function o(h){s(1,a=h)}function l(h){s(0,i=h)}const c=h=>r(h);return t.$$set=h=>{"value"in h&&s(0,i=h.value),"values"in h&&s(1,a=h.values)},t.$$.update=()=>{t.$$.dirty&1&&i&&n("change",i)},[i,a,r,o,l,c]}class di extends ve{constructor(e){super(),ge(this,e,ef,Qu,ye,{value:0,values:1,setItems:3,setValue:4})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),Ue()}get values(){return this.$$.ctx[1]}set values(e){this.$$set({values:e}),Ue()}get setItems(){return this.$$.ctx[3]}get setValue(){return this.$$.ctx[4]}}function Jr(t,e,s){const n=t.slice();return n[11]=e[s],n}function tf(t){let e,s,n,i;return{c(){e=T("div"),s=W("none"),this.h()},l(r){e=A(r,"DIV",{id:!0,class:!0});var a=S(e);s=X(a,"none"),a.forEach(_),this.h()},h(){E(e,"id","selected-value"),E(e,"class","svelte-1dqv2zj")},m(r,a){I(r,e,a),M(e,s),n||(i=Z(e,"click",t[4]),n=!0)},p:H,d(r){r&&_(e),n=!1,i()}}}function sf(t){let e,s,n,i;return{c(){e=T("div"),s=W(t[0]),this.h()},l(r){e=A(r,"DIV",{id:!0,class:!0});var a=S(e);s=X(a,t[0]),a.forEach(_),this.h()},h(){E(e,"id","selected-value"),E(e,"class","svelte-1dqv2zj")},m(r,a){I(r,e,a),M(e,s),n||(i=Z(e,"click",t[4]),n=!0)},p(r,a){a&1&&Ee(s,r[0])},d(r){r&&_(e),n=!1,i()}}}function Kr(t){let e,s=t[11]+"",n,i,r,a,o;function l(){return t[8](t[11])}return{c(){e=T("p"),n=W(s),i=R(),this.h()},l(c){e=A(c,"P",{style:!0,class:!0});var h=S(e);n=X(h,s),i=F(h),h.forEach(_),this.h()},h(){E(e,"style",r=`opacity: ${t[11]===t[0]?.5:1}`),E(e,"class","item svelte-1dqv2zj")},m(c,h){I(c,e,h),M(e,n),M(e,i),a||(o=Z(e,"click",l),a=!0)},p(c,h){t=c,h&2&&s!==(s=t[11]+"")&&Ee(n,s),h&3&&r!==(r=`opacity: ${t[11]===t[0]?.5:1}`)&&E(e,"style",r)},d(c){c&&_(e),a=!1,o()}}}function Qr(t){let e,s=t[11]!==t[0]&&Kr(t);return{c(){s&&s.c(),e=he()},l(n){s&&s.l(n),e=he()},m(n,i){s&&s.m(n,i),I(n,e,i)},p(n,i){n[11]!==n[0]?s?s.p(n,i):(s=Kr(n),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},d(n){s&&s.d(n),n&&_(e)}}}function nf(t){let e,s,n,i;function r(h,u){return h[0]!==void 0?sf:tf}let a=r(t),o=a(t),l=t[1],c=[];for(let h=0;h<l.length;h+=1)c[h]=Qr(Jr(t,l,h));return{c(){e=T("div"),s=T("div"),o.c(),n=R(),i=T("div");for(let h=0;h<c.length;h+=1)c[h].c();this.h()},l(h){e=A(h,"DIV",{class:!0});var u=S(e);s=A(u,"DIV",{id:!0,class:!0});var f=S(s);o.l(f),n=F(f),i=A(f,"DIV",{id:!0,class:!0});var d=S(i);for(let p=0;p<c.length;p+=1)c[p].l(d);d.forEach(_),f.forEach(_),u.forEach(_),this.h()},h(){E(i,"id","item-wrapper"),E(i,"class","svelte-1dqv2zj"),E(s,"id","main"),E(s,"class","svelte-1dqv2zj"),E(e,"class","component-wrapper svelte-1dqv2zj"),ne(e,"open",t[2])},m(h,u){I(h,e,u),M(e,s),o.m(s,null),M(s,n),M(s,i);for(let f=0;f<c.length;f+=1)c[f].m(i,null);t[9](s)},p(h,[u]){if(a===(a=r(h))&&o?o.p(h,u):(o.d(1),o=a(h),o&&(o.c(),o.m(s,n))),u&35){l=h[1];let f;for(f=0;f<l.length;f+=1){const d=Jr(h,l,f);c[f]?c[f].p(d,u):(c[f]=Qr(d),c[f].c(),c[f].m(i,null))}for(;f<c.length;f+=1)c[f].d(1);c.length=l.length}u&4&&ne(e,"open",h[2])},i:H,o:H,d(h){h&&_(e),o.d(),Fe(c,h),t[9](null)}}}function rf(t,e,s){const n=He();let{value:i=void 0}=e,r=!1,a;function o(){s(2,r=!0),setTimeout(()=>{document.addEventListener("click",()=>{s(2,r=!1)},{once:!0})},50)}function l(p){s(0,i=p),s(2,r=!1)}let{values:c=[]}=e;function h(p){s(1,c=p)}function u(p){s(0,i=p)}const f=p=>l(p);function d(p){Ae[p?"unshift":"push"](()=>{a=p,s(3,a)})}return t.$$set=p=>{"value"in p&&s(0,i=p.value),"values"in p&&s(1,c=p.values)},t.$$.update=()=>{t.$$.dirty&1&&i&&n("change",i)},[i,c,r,a,o,l,h,u,f,d]}class Co extends ve{constructor(e){super(),ge(this,e,rf,nf,ye,{value:0,values:1,setItems:6,setValue:7})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),Ue()}get values(){return this.$$.ctx[1]}set values(e){this.$$set({values:e}),Ue()}get setItems(){return this.$$.ctx[6]}get setValue(){return this.$$.ctx[7]}}function ea(t,e,s){const n=t.slice();return n[19]=e[s],n}function ta(t){let e,s,n,i,r;function a(){return t[9](t[19])}return{c(){e=Ne("circle"),this.h()},l(o){e=Le(o,"circle",{cx:!0,cy:!0,r:!0,class:!0}),S(e).forEach(_),this.h()},h(){E(e,"cx",s=t[19].x*100),E(e,"cy",n=t[19].y*200-50),E(e,"r","4"),E(e,"class","svelte-mm29yb"),ne(e,"pinned",t[19].pinned)},m(o,l){I(o,e,l),i||(r=Z(e,"mousedown",a),i=!0)},p(o,l){t=o,l&1&&s!==(s=t[19].x*100)&&E(e,"cx",s),l&1&&n!==(n=t[19].y*200-50)&&E(e,"cy",n),l&1&&ne(e,"pinned",t[19].pinned)},d(o){o&&_(e),i=!1,r()}}}function af(t){let e,s,n,i,r,a,o,l,c,h,u,f,d=t[0],p=[];for(let m=0;m<d.length;m+=1)p[m]=ta(ea(t,d,m));return{c(){e=T("div"),s=Ne("svg"),n=Ne("path");for(let m=0;m<p.length;m+=1)p[m].c();i=R(),r=Ne("svg"),a=Ne("defs"),o=Ne("linearGradient"),l=Ne("stop"),c=Ne("stop"),h=Ne("path"),this.h()},l(m){e=A(m,"DIV",{class:!0});var v=S(e);s=Le(v,"svg",{viewBox:!0,width:!0,height:!0,class:!0});var g=S(s);n=Le(g,"path",{d:!0,fill:!0,class:!0}),S(n).forEach(_);for(let k=0;k<p.length;k+=1)p[k].l(g);g.forEach(_),i=F(v),r=Le(v,"svg",{id:!0,viewBox:!0,width:!0,height:!0,class:!0});var x=S(r);a=Le(x,"defs",{class:!0});var w=S(a);o=Le(w,"linearGradient",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0,class:!0});var y=S(o);l=Le(y,"stop",{offset:!0,style:!0,class:!0}),S(l).forEach(_),c=Le(y,"stop",{offset:!0,style:!0,class:!0}),S(c).forEach(_),y.forEach(_),w.forEach(_),h=Le(x,"path",{d:!0,fill:!0,stroke:!0,class:!0}),S(h).forEach(_),x.forEach(_),v.forEach(_),this.h()},h(){E(n,"d",t[2]),E(n,"fill","none"),E(n,"class","left-path svelte-mm29yb"),E(s,"viewBox","0 0 100 100"),E(s,"width","50"),E(s,"height","100"),E(s,"class","svelte-mm29yb"),E(l,"offset","0%"),K(l,"stop-color","#65E2A0"),K(l,"stop-opacity","1"),E(l,"class","svelte-mm29yb"),E(c,"offset","100%"),K(c,"stop-color","#469C6E"),K(c,"stop-opacity","1"),E(c,"class","svelte-mm29yb"),E(o,"id","grad1"),E(o,"x1","0%"),E(o,"y1","0%"),E(o,"x2","100%"),E(o,"y2","0%"),E(o,"class","svelte-mm29yb"),E(a,"class","svelte-mm29yb"),E(h,"d",t[2]),E(h,"fill","url(#grad1)"),E(h,"stroke","grey"),E(h,"class","svelte-mm29yb"),E(r,"id","right"),E(r,"viewBox","0 0 100 100"),E(r,"width","50"),E(r,"height","100"),E(r,"class","svelte-mm29yb"),E(e,"class","component-wrapper svelte-mm29yb")},m(m,v){I(m,e,v),M(e,s),M(s,n);for(let g=0;g<p.length;g+=1)p[g].m(s,null);M(e,i),M(e,r),M(r,a),M(a,o),M(o,l),M(o,c),M(r,h),u||(f=[Z(s,"mousedown",t[4]),Z(s,"mousemove",t[3]),Z(s,"mouseover",t[6]),Z(s,"mouseout",t[7]),Z(s,"mouseup",t[5]),Z(s,"focus",t[6]),Z(s,"blur",t[7])],u=!0)},p(m,[v]){if(v&4&&E(n,"d",m[2]),v&3){d=m[0];let g;for(g=0;g<d.length;g+=1){const x=ea(m,d,g);p[g]?p[g].p(x,v):(p[g]=ta(x),p[g].c(),p[g].m(s,null))}for(;g<p.length;g+=1)p[g].d(1);p.length=d.length}v&4&&E(h,"d",m[2])},i:H,o:H,d(m){m&&_(e),Fe(p,m),u=!1,Qe(f)}}}function of(t,e,s){let n,i;const r=He();let{value:a=[{x:1,y:0,pinned:!0},{x:.5,y:.5,pinned:!0},{x:1,y:1,pinned:!0}]}=e,o=!1,l,c,h=0,u=0;const f=()=>{requestAnimationFrame(()=>{r("change",n),s(0,n=n.sort((b,$)=>b.y>$.y?-1:1))})},d=b=>{b.pinned||(n.splice(n.indexOf(l),1),f())},p=b=>{o&&(h=b.offsetX,u=b.offsetY,l&&(c=l,s(1,l=void 0)),c&&(c.x=h/50,c.y=u/100,f()))},m=()=>{if(!l){const b={x:h/50,y:u/100,pinned:!1};s(1,l=b),n.push(l),f()}},v=()=>{l&&(d(l),s(1,l=void 0)),c=void 0},g=()=>{o=!0},x=()=>{o=!1},w=b=>`L ${b.x*100} ${b.y*200-50}`;function y(b){return b.reduce(($,P,D)=>D===0?`M ${P.x*100},${P.y*200-50}`:`${$} ${w(P)}`,"")}const k=b=>{s(1,l=b)};return t.$$set=b=>{"value"in b&&s(8,a=b.value)},t.$$.update=()=>{t.$$.dirty&256&&s(0,n=a),t.$$.dirty&1&&s(2,i=y(n))},[n,l,i,p,m,v,g,x,a,k]}class Vo extends ve{constructor(e){super(),ge(this,e,of,af,ye,{value:8})}get value(){return this.$$.ctx[8]}set value(e){this.$$set({value:e}),Ue()}}function lf(t){let e,s,n,i,r,a,o,l;return{c(){e=T("div"),s=T("output"),n=W(t[0]),r=R(),a=T("input"),this.h()},l(c){e=A(c,"DIV",{class:!0});var h=S(e);s=A(h,"OUTPUT",{style:!0,class:!0});var u=S(s);n=X(u,t[0]),u.forEach(_),r=F(h),a=A(h,"INPUT",{type:!0,min:!0,step:!0,max:!0,class:!0}),h.forEach(_),this.h()},h(){E(s,"style",i=`left: ${t[5]*100}%; transform: translateX(-${t[5]*66.66}%)`),E(s,"class","svelte-177pwzc"),ne(s,"isActive",t[4]),E(a,"type","range"),E(a,"min",t[1]),E(a,"step",t[3]),E(a,"max",t[2]),E(a,"class","svelte-177pwzc"),E(e,"class","svelte-177pwzc")},m(c,h){I(c,e,h),M(e,s),M(s,n),M(e,r),M(e,a),qe(a,t[0]),o||(l=[Z(a,"focus",t[7]),Z(a,"blur",t[8]),Z(a,"input",function(){Ul(t[6]("change",t[0]))&&t[6]("change",t[0]).apply(this,arguments)}),Z(a,"change",t[9]),Z(a,"input",t[9])],o=!0)},p(c,[h]){t=c,h&1&&Ee(n,t[0]),h&32&&i!==(i=`left: ${t[5]*100}%; transform: translateX(-${t[5]*66.66}%)`)&&E(s,"style",i),h&16&&ne(s,"isActive",t[4]),h&2&&E(a,"min",t[1]),h&8&&E(a,"step",t[3]),h&4&&E(a,"max",t[2]),h&1&&qe(a,t[0])},i:H,o:H,d(c){c&&_(e),o=!1,Qe(l)}}}function cf(t,e,s){let n;const i=He();let{min:r=0}=e,{max:a=100}=e,{step:o=1}=e,{value:l=50}=e,c=!1;const h=()=>s(4,c=!0),u=()=>s(4,c=!1);function f(){l=ps(this.value),s(0,l)}return t.$$set=d=>{"min"in d&&s(1,r=d.min),"max"in d&&s(2,a=d.max),"step"in d&&s(3,o=d.step),"value"in d&&s(0,l=d.value)},t.$$.update=()=>{t.$$.dirty&7&&s(5,n=(l-r)/Math.abs(r-a))},[l,r,a,o,c,n,i,h,u,f]}class hf extends ve{constructor(e){super(),ge(this,e,cf,lf,ye,{min:1,max:2,step:3,value:0})}}function sa(t,e,s){const n=t.slice();return n[21]=e[s],n[23]=s,n}function na(t){let e,s=(t[21].title||t[21].value)+"",n,i,r,a;function o(){return t[14](t[21])}function l(){return t[15](t[21])}function c(){return t[16](t[21])}return{c(){e=T("div"),n=W(s),i=R(),this.h()},l(h){e=A(h,"DIV",{class:!0});var u=S(e);n=X(u,s),i=F(u),u.forEach(_),this.h()},h(){E(e,"class","search-entry svelte-1p57qx1"),ne(e,"focused",t[21].value===t[3])},m(h,u){I(h,e,u),M(e,n),M(e,i),r||(a=[Z(e,"focus",o),Z(e,"mouseover",l),Z(e,"click",c)],r=!0)},p(h,u){t=h,u&16&&s!==(s=(t[21].title||t[21].value)+"")&&Ee(n,s),u&24&&ne(e,"focused",t[21].value===t[3])},d(h){h&&_(e),r=!1,Qe(a)}}}function ia(t){let e,s=t[23]<t[0]&&na(t);return{c(){s&&s.c(),e=he()},l(n){s&&s.l(n),e=he()},m(n,i){s&&s.m(n,i),I(n,e,i)},p(n,i){n[23]<n[0]?s?s.p(n,i):(s=na(n),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},d(n){s&&s.d(n),n&&_(e)}}}function uf(t){let e,s,n,i,r,a=t[4],o=[];for(let l=0;l<a.length;l+=1)o[l]=ia(sa(t,a,l));return{c(){e=T("div"),s=T("input"),n=R();for(let l=0;l<o.length;l+=1)o[l].c();this.h()},l(l){e=A(l,"DIV",{class:!0});var c=S(e);s=A(c,"INPUT",{type:!0,placeholder:!0,class:!0}),n=F(c);for(let h=0;h<o.length;h+=1)o[h].l(c);c.forEach(_),this.h()},h(){E(s,"type","text"),E(s,"placeholder","Search"),E(s,"class","svelte-1p57qx1"),E(e,"class","search-wrapper svelte-1p57qx1")},m(l,c){I(l,e,c),M(e,s),t[12](s),qe(s,t[1]),M(e,n);for(let h=0;h<o.length;h+=1)o[h].m(e,null);i||(r=[Z(window,"keydown",t[6]),Z(s,"input",t[13])],i=!0)},p(l,[c]){if(c&2&&s.value!==l[1]&&qe(s,l[1]),c&185){a=l[4];let h;for(h=0;h<a.length;h+=1){const u=sa(l,a,h);o[h]?o[h].p(u,c):(o[h]=ia(u),o[h].c(),o[h].m(e,null))}for(;h<o.length;h+=1)o[h].d(1);o.length=a.length}},i:H,o:H,d(l){l&&_(e),t[12](null),Fe(o,l),i=!1,Qe(r)}}}function ff(t,e,s){let n,i;const r=He(),a={};let{limitAmount:o=10}=e,{values:l=[]}=e,c,h="";function u(P,D){if(!(D!=null&&D.length))return P;const j=P.filter(z=>!!(z.value.includes(D)||z.title&&z.title.toLowerCase().includes(D)));return j.length?(j.find(z=>z.value===i)||s(3,i=j[0].value),j):[{value:"Nothing Found"}]}function f(){c.focus()}function d(){s(1,h="")}function p({value:P=i}={value:i}){a[P]=a[P]+1||1,r("input",P)}function m(P){if(!i.length){s(3,i=n[0].value);return}const D=n.slice(0,o).find(C=>C.value===i);if(!D)return;const j=n.indexOf(D),B=Math.min(n.length,o),z=((j+P)%B+B)%B;s(3,i=n[z].value)}function v({key:P}){P==="Enter"&&i.length&&p(),P==="ArrowDown"&&m(1),P==="ArrowUp"&&m(-1)}function g(P){s(3,i=P.value)}const x=P=>{s(8,l=P)};function w(P){Ae[P?"unshift":"push"](()=>{c=P,s(2,c)})}function y(){h=this.value,s(1,h)}const k=P=>g(P),b=P=>g(P),$=P=>p(P);return t.$$set=P=>{"limitAmount"in P&&s(0,o=P.limitAmount),"values"in P&&s(8,l=P.values)},t.$$.update=()=>{t.$$.dirty&258&&s(4,n=u(l,h.toLowerCase()))},s(3,i=""),[o,h,c,i,n,p,v,g,l,f,d,x,w,y,k,b,$]}class zo extends ve{constructor(e){super(),ge(this,e,ff,uf,ye,{limitAmount:0,values:8,focus:9,clear:10,setItems:11})}get focus(){return this.$$.ctx[9]}get clear(){return this.$$.ctx[10]}get setItems(){return this.$$.ctx[11]}}function ra(t){let e,s,n;return{c(){e=T("div"),s=T("p"),n=W(t[1]),this.h()},l(i){e=A(i,"DIV",{class:!0});var r=S(e);s=A(r,"P",{class:!0});var a=S(s);n=X(a,t[1]),a.forEach(_),r.forEach(_),this.h()},h(){E(s,"class","svelte-1aw08v2"),E(e,"class","border svelte-1aw08v2")},m(i,r){I(i,e,r),M(e,s),M(s,n)},p(i,r){r&2&&Ee(n,i[1])},d(i){i&&_(e)}}}function df(t){let e,s,n,i,r,a,o,l,c,h,u=t[1]&&ra(t);const f=t[4].default,d=si(f,t,t[3],null);return{c(){e=T("div"),s=T("div"),n=Ne("svg"),i=Ne("path"),r=R(),u&&u.c(),a=R(),o=T("div"),d&&d.c(),this.h()},l(p){e=A(p,"DIV",{class:!0});var m=S(e);s=A(m,"DIV",{class:!0});var v=S(s);n=Le(v,"svg",{xmlns:!0,viewBox:!0,width:!0,height:!0,class:!0});var g=S(n);i=Le(g,"path",{d:!0,class:!0}),S(i).forEach(_),g.forEach(_),r=F(v),u&&u.l(v),v.forEach(_),a=F(m),o=A(m,"DIV",{class:!0});var x=S(o);d&&d.l(x),x.forEach(_),m.forEach(_),this.h()},h(){E(i,"d","M13.172 12l-4.95-4.95 1.414-1.414L16 12l-6.364 6.364-1.414-1.414z"),E(i,"class","svelte-1aw08v2"),E(n,"xmlns","http://www.w3.org/2000/svg"),E(n,"viewBox","0 0 24 24"),E(n,"width","24"),E(n,"height","24"),E(n,"class","svelte-1aw08v2"),E(s,"class","header svelte-1aw08v2"),E(o,"class","content svelte-1aw08v2"),E(e,"class","wrapper svelte-1aw08v2"),ne(e,"open",t[0])},m(p,m){I(p,e,m),M(e,s),M(s,n),M(n,i),M(s,r),u&&u.m(s,null),M(e,a),M(e,o),d&&d.m(o,null),l=!0,c||(h=Z(s,"click",t[2]),c=!0)},p(p,[m]){p[1]?u?u.p(p,m):(u=ra(p),u.c(),u.m(s,null)):u&&(u.d(1),u=null),d&&d.p&&(!l||m&8)&&ni(d,f,p,p[3],l?ri(f,p[3],m,null):ii(p[3]),null),m&1&&ne(e,"open",p[0])},i(p){l||(L(d,p),l=!0)},o(p){V(d,p),l=!1},d(p){p&&_(e),u&&u.d(),d&&d.d(p),c=!1,h()}}}function pf(t,e,s){let{$$slots:n={},$$scope:i}=e;const r=He();let{open:a=!1}=e,{name:o=""}=e;const l=()=>{s(0,a=!a),r("toggle",a)};return t.$$set=c=>{"open"in c&&s(0,a=c.open),"name"in c&&s(1,o=c.name),"$$scope"in c&&s(3,i=c.$$scope)},[a,o,l,i,n]}class us extends ve{constructor(e){super(),ge(this,e,pf,df,ye,{open:0,name:1})}}function aa(t,e,s){const n=t.slice();return n[1]=e[s],n}function oa(t){let e,s,n,i,r,a,o,l,c=JSON.stringify(t[1].args[1],null,2)+"",h,u,f;return{c(){e=T("tr"),s=T("td"),n=T("details"),i=T("summary"),r=W("args"),a=R(),o=T("pre"),l=T("code"),h=W(c),u=T("pre"),f=R(),this.h()},l(d){e=A(d,"TR",{colspan:!0});var p=S(e);s=A(p,"TD",{colspan:!0});var m=S(s);n=A(m,"DETAILS",{});var v=S(n);i=A(v,"SUMMARY",{});var g=S(i);r=X(g,"args"),g.forEach(_),a=F(v),o=A(v,"PRE",{});var x=S(o);l=A(x,"CODE",{});var w=S(l);h=X(w,c),w.forEach(_),u=A(x,"PRE",{}),S(u).forEach(_),x.forEach(_),v.forEach(_),m.forEach(_),f=F(p),p.forEach(_),this.h()},h(){E(s,"colspan","3"),E(e,"colspan","3")},m(d,p){I(d,e,p),M(e,s),M(s,n),M(n,i),M(i,r),M(n,a),M(n,o),M(o,l),M(l,h),M(o,u),M(e,f)},p(d,p){p&1&&c!==(c=JSON.stringify(d[1].args[1],null,2)+"")&&Ee(h,c)},d(d){d&&_(e)}}}function la(t){let e,s,n=ca(t[1].date)+"",i,r,a,o,l,c=t[1].scope+"",h,u,f,d,p=t[1].args[0]+"",m,v,g,x=t[1].args[1]&&oa(t);return{c(){e=T("tr"),s=T("td"),i=W(n),r=R(),a=T("td"),o=T("b"),l=W("["),h=W(c),u=W("]"),f=R(),d=T("td"),m=W(p),v=R(),x&&x.c(),g=he()},l(w){e=A(w,"TR",{});var y=S(e);s=A(y,"TD",{});var k=S(s);i=X(k,n),k.forEach(_),r=F(y),a=A(y,"TD",{});var b=S(a);o=A(b,"B",{});var $=S(o);l=X($,"["),h=X($,c),u=X($,"]"),$.forEach(_),b.forEach(_),f=F(y),d=A(y,"TD",{});var P=S(d);m=X(P,p),P.forEach(_),y.forEach(_),v=F(w),x&&x.l(w),g=he()},m(w,y){I(w,e,y),M(e,s),M(s,i),M(e,r),M(e,a),M(a,o),M(o,l),M(o,h),M(o,u),M(e,f),M(e,d),M(d,m),I(w,v,y),x&&x.m(w,y),I(w,g,y)},p(w,y){y&1&&n!==(n=ca(w[1].date)+"")&&Ee(i,n),y&1&&c!==(c=w[1].scope+"")&&Ee(h,c),y&1&&p!==(p=w[1].args[0]+"")&&Ee(m,p),w[1].args[1]?x?x.p(w,y):(x=oa(w),x.c(),x.m(g.parentNode,g)):x&&(x.d(1),x=null)},d(w){w&&_(e),w&&_(v),x&&x.d(w),w&&_(g)}}}function mf(t){let e,s,n=t[0],i=[];for(let r=0;r<n.length;r+=1)i[r]=la(aa(t,n,r));return{c(){e=T("div"),s=T("table");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=A(r,"DIV",{id:!0,class:!0});var a=S(e);s=A(a,"TABLE",{});var o=S(s);for(let l=0;l<i.length;l+=1)i[l].l(o);o.forEach(_),a.forEach(_),this.h()},h(){E(e,"id","wrapper"),E(e,"class","svelte-1xdbmis")},m(r,a){I(r,e,a),M(e,s);for(let o=0;o<i.length;o+=1)i[o].m(s,null)},p(r,[a]){if(a&1){n=r[0];let o;for(o=0;o<n.length;o+=1){const l=aa(r,n,o);i[o]?i[o].p(l,a):(i[o]=la(l),i[o].c(),i[o].m(s,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},i:H,o:H,d(r){r&&_(e),Fe(i,r)}}}function ca(t){const e=new Date(t);return`${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}`}function vf(t,e,s){let{logs:n}=e;return t.$$set=i=>{"logs"in i&&s(0,n=i.logs)},[n]}class jo extends ve{constructor(e){super(),ge(this,e,vf,mf,ye,{logs:0})}}function Ro({target:t,template:e,value:s}){const n=qs(e),i=Je(Se({},e),{value:s});return delete i.type,delete i.internal,delete i.label,delete i.inputType,new n({target:t,props:i})}function qs(t){if(t.type==="select")return t.inputType==="tab"?di:Co;if(t.type==="curve")return Oo;if(t.type==="shape")return Vo;if(t.type==="number"){if(t.inputType){if(t.inputType==="float")return Bn;if(t.inputType==="integer")return Fn}return(t==null?void 0:t.step)&&t.step%1!==0?Bn:Fn}return Zt}var gf=Object.freeze(Object.defineProperty({__proto__:null,InputFloat:Bn,InputInteger:Fn,InputSlider:hf,InputSelect:Co,InputCheckbox:Zt,InputCurve:Oo,InputShape:Vo,InputSearch:zo,InputTab:di,InputColor:Fu,Button:Xe,Icon:Jt,Section:us,AlertWrapper:Ao,createAlert:vt,ToastWrapper:$o,createToast:Dt,StackTrace:fi,stateToElement:Ro,stateToComponent:qs,LogViewer:jo},Symbol.toStringTag,{value:"Module"}));let ha;function yf(t){const e=t.position,s=t.index,n=t.normal;for(let i=0;i<s.length/3;i++){const r=new fe(e[s[i*3+0]*3+0],e[s[i*3+0]*3+1],e[s[i*3+0]*3+2]),a=new fe(e[s[i*3+1]*3+0]-r.x,e[s[i*3+1]*3+1]-r.y,e[s[i*3+1]*3+2]-r.z),o=new fe(e[s[i*3+2]*3+0]-r.x,e[s[i*3+2]*3+1]-r.y,e[s[i*3+2]*3+2]-r.z);let l=new fe().cross(a,o).normalize();l[0]===0&&l[1]===0&&l[3]===0&&(l=ha);for(let c=0;c<3;c++)n[s[i*3+c]*3+0]=l.x,n[s[i*3+c]*3+1]=l.y,n[s[i*3+c]*3+2]=l.z;ha=l}return t}function _f(t,e=[0,0,0],s=[0,0,0],n=[1,1,1]){const i=new Float32Array(t.position.length),r=t.position.length,a=t.position;for(let o=0;o<r;o+=3){const l=a[o+0]*n[0],c=a[o+1]*n[1],h=a[o+2]*n[2],u=l,f=Math.cos(s[0])*c-Math.sin(s[0])*h,d=Math.sin(s[0])*c+Math.cos(s[0])*h,p=Math.cos(s[1])*u-Math.sin(s[1])*d,m=f,v=Math.sin(s[1])*u+Math.cos(s[1])*d;i[o+0]=p+e[0],i[o+1]=m+e[1],i[o+2]=v+e[2]}return{position:i,uv:t.uv,normal:t.normal,index:t.index}}function wf(t){const e=[],s={position:t.position,normal:t.position,uv:t.uv,index:t.index},n=t.offset,i=t.rotation,r=t.scale,a=t.offset.length;for(let o=0;o<a;o+=3)e.push(_f(s,[n[o+0],n[o+1],n[o+2]],[i[o+0],i[o+1],i[o+2]],[r[o+0],r[o+1],r[o+2]]));return e}var Pe=1e-6,ct=typeof Float32Array!="undefined"?Float32Array:Array,ua=Math.random;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function bf(){var t=new ct(16);return ct!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function xf(t){var e=new ct(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Mf(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ef(t,e,s,n,i,r,a,o,l,c,h,u,f,d,p,m){var v=new ct(16);return v[0]=t,v[1]=e,v[2]=s,v[3]=n,v[4]=i,v[5]=r,v[6]=a,v[7]=o,v[8]=l,v[9]=c,v[10]=h,v[11]=u,v[12]=f,v[13]=d,v[14]=p,v[15]=m,v}function kf(t,e,s,n,i,r,a,o,l,c,h,u,f,d,p,m,v){return t[0]=e,t[1]=s,t[2]=n,t[3]=i,t[4]=r,t[5]=a,t[6]=o,t[7]=l,t[8]=c,t[9]=h,t[10]=u,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=v,t}function Fo(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Sf(t,e){if(t===e){var s=e[1],n=e[2],i=e[3],r=e[6],a=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=s,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=r,t[11]=e[14],t[12]=i,t[13]=a,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Tf(t,e){var s=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8],u=e[9],f=e[10],d=e[11],p=e[12],m=e[13],v=e[14],g=e[15],x=s*o-n*a,w=s*l-i*a,y=s*c-r*a,k=n*l-i*o,b=n*c-r*o,$=i*c-r*l,P=h*m-u*p,D=h*v-f*p,j=h*g-d*p,B=u*v-f*m,z=u*g-d*m,C=f*g-d*v,N=x*C-w*z+y*B+k*j-b*D+$*P;return N?(N=1/N,t[0]=(o*C-l*z+c*B)*N,t[1]=(i*z-n*C-r*B)*N,t[2]=(m*$-v*b+g*k)*N,t[3]=(f*b-u*$-d*k)*N,t[4]=(l*j-a*C-c*D)*N,t[5]=(s*C-i*j+r*D)*N,t[6]=(v*y-p*$-g*w)*N,t[7]=(h*$-f*y+d*w)*N,t[8]=(a*z-o*j+c*P)*N,t[9]=(n*j-s*z-r*P)*N,t[10]=(p*b-m*y+g*x)*N,t[11]=(u*y-h*b-d*x)*N,t[12]=(o*D-a*B-l*P)*N,t[13]=(s*B-n*D+i*P)*N,t[14]=(m*w-p*k-v*x)*N,t[15]=(h*k-u*w+f*x)*N,t):null}function Af(t,e){var s=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8],u=e[9],f=e[10],d=e[11],p=e[12],m=e[13],v=e[14],g=e[15];return t[0]=o*(f*g-d*v)-u*(l*g-c*v)+m*(l*d-c*f),t[1]=-(n*(f*g-d*v)-u*(i*g-r*v)+m*(i*d-r*f)),t[2]=n*(l*g-c*v)-o*(i*g-r*v)+m*(i*c-r*l),t[3]=-(n*(l*d-c*f)-o*(i*d-r*f)+u*(i*c-r*l)),t[4]=-(a*(f*g-d*v)-h*(l*g-c*v)+p*(l*d-c*f)),t[5]=s*(f*g-d*v)-h*(i*g-r*v)+p*(i*d-r*f),t[6]=-(s*(l*g-c*v)-a*(i*g-r*v)+p*(i*c-r*l)),t[7]=s*(l*d-c*f)-a*(i*d-r*f)+h*(i*c-r*l),t[8]=a*(u*g-d*m)-h*(o*g-c*m)+p*(o*d-c*u),t[9]=-(s*(u*g-d*m)-h*(n*g-r*m)+p*(n*d-r*u)),t[10]=s*(o*g-c*m)-a*(n*g-r*m)+p*(n*c-r*o),t[11]=-(s*(o*d-c*u)-a*(n*d-r*u)+h*(n*c-r*o)),t[12]=-(a*(u*v-f*m)-h*(o*v-l*m)+p*(o*f-l*u)),t[13]=s*(u*v-f*m)-h*(n*v-i*m)+p*(n*f-i*u),t[14]=-(s*(o*v-l*m)-a*(n*v-i*m)+p*(n*l-i*o)),t[15]=s*(o*f-l*u)-a*(n*f-i*u)+h*(n*l-i*o),t}function Pf(t){var e=t[0],s=t[1],n=t[2],i=t[3],r=t[4],a=t[5],o=t[6],l=t[7],c=t[8],h=t[9],u=t[10],f=t[11],d=t[12],p=t[13],m=t[14],v=t[15],g=e*a-s*r,x=e*o-n*r,w=e*l-i*r,y=s*o-n*a,k=s*l-i*a,b=n*l-i*o,$=c*p-h*d,P=c*m-u*d,D=c*v-f*d,j=h*m-u*p,B=h*v-f*p,z=u*v-f*m;return g*z-x*B+w*j+y*D-k*P+b*$}function Bo(t,e,s){var n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],u=e[8],f=e[9],d=e[10],p=e[11],m=e[12],v=e[13],g=e[14],x=e[15],w=s[0],y=s[1],k=s[2],b=s[3];return t[0]=w*n+y*o+k*u+b*m,t[1]=w*i+y*l+k*f+b*v,t[2]=w*r+y*c+k*d+b*g,t[3]=w*a+y*h+k*p+b*x,w=s[4],y=s[5],k=s[6],b=s[7],t[4]=w*n+y*o+k*u+b*m,t[5]=w*i+y*l+k*f+b*v,t[6]=w*r+y*c+k*d+b*g,t[7]=w*a+y*h+k*p+b*x,w=s[8],y=s[9],k=s[10],b=s[11],t[8]=w*n+y*o+k*u+b*m,t[9]=w*i+y*l+k*f+b*v,t[10]=w*r+y*c+k*d+b*g,t[11]=w*a+y*h+k*p+b*x,w=s[12],y=s[13],k=s[14],b=s[15],t[12]=w*n+y*o+k*u+b*m,t[13]=w*i+y*l+k*f+b*v,t[14]=w*r+y*c+k*d+b*g,t[15]=w*a+y*h+k*p+b*x,t}function If(t,e,s){var n=s[0],i=s[1],r=s[2],a,o,l,c,h,u,f,d,p,m,v,g;return e===t?(t[12]=e[0]*n+e[4]*i+e[8]*r+e[12],t[13]=e[1]*n+e[5]*i+e[9]*r+e[13],t[14]=e[2]*n+e[6]*i+e[10]*r+e[14],t[15]=e[3]*n+e[7]*i+e[11]*r+e[15]):(a=e[0],o=e[1],l=e[2],c=e[3],h=e[4],u=e[5],f=e[6],d=e[7],p=e[8],m=e[9],v=e[10],g=e[11],t[0]=a,t[1]=o,t[2]=l,t[3]=c,t[4]=h,t[5]=u,t[6]=f,t[7]=d,t[8]=p,t[9]=m,t[10]=v,t[11]=g,t[12]=a*n+h*i+p*r+e[12],t[13]=o*n+u*i+m*r+e[13],t[14]=l*n+f*i+v*r+e[14],t[15]=c*n+d*i+g*r+e[15]),t}function Nf(t,e,s){var n=s[0],i=s[1],r=s[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Lf(t,e,s,n){var i=n[0],r=n[1],a=n[2],o=Math.hypot(i,r,a),l,c,h,u,f,d,p,m,v,g,x,w,y,k,b,$,P,D,j,B,z,C,N,q;return o<Pe?null:(o=1/o,i*=o,r*=o,a*=o,l=Math.sin(s),c=Math.cos(s),h=1-c,u=e[0],f=e[1],d=e[2],p=e[3],m=e[4],v=e[5],g=e[6],x=e[7],w=e[8],y=e[9],k=e[10],b=e[11],$=i*i*h+c,P=r*i*h+a*l,D=a*i*h-r*l,j=i*r*h-a*l,B=r*r*h+c,z=a*r*h+i*l,C=i*a*h+r*l,N=r*a*h-i*l,q=a*a*h+c,t[0]=u*$+m*P+w*D,t[1]=f*$+v*P+y*D,t[2]=d*$+g*P+k*D,t[3]=p*$+x*P+b*D,t[4]=u*j+m*B+w*z,t[5]=f*j+v*B+y*z,t[6]=d*j+g*B+k*z,t[7]=p*j+x*B+b*z,t[8]=u*C+m*N+w*q,t[9]=f*C+v*N+y*q,t[10]=d*C+g*N+k*q,t[11]=p*C+x*N+b*q,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function Df(t,e,s){var n=Math.sin(s),i=Math.cos(s),r=e[4],a=e[5],o=e[6],l=e[7],c=e[8],h=e[9],u=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=r*i+c*n,t[5]=a*i+h*n,t[6]=o*i+u*n,t[7]=l*i+f*n,t[8]=c*i-r*n,t[9]=h*i-a*n,t[10]=u*i-o*n,t[11]=f*i-l*n,t}function $f(t,e,s){var n=Math.sin(s),i=Math.cos(s),r=e[0],a=e[1],o=e[2],l=e[3],c=e[8],h=e[9],u=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*i-c*n,t[1]=a*i-h*n,t[2]=o*i-u*n,t[3]=l*i-f*n,t[8]=r*n+c*i,t[9]=a*n+h*i,t[10]=o*n+u*i,t[11]=l*n+f*i,t}function Of(t,e,s){var n=Math.sin(s),i=Math.cos(s),r=e[0],a=e[1],o=e[2],l=e[3],c=e[4],h=e[5],u=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*i+c*n,t[1]=a*i+h*n,t[2]=o*i+u*n,t[3]=l*i+f*n,t[4]=c*i-r*n,t[5]=h*i-a*n,t[6]=u*i-o*n,t[7]=f*i-l*n,t}function Cf(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Vf(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function zf(t,e,s){var n=s[0],i=s[1],r=s[2],a=Math.hypot(n,i,r),o,l,c;return a<Pe?null:(a=1/a,n*=a,i*=a,r*=a,o=Math.sin(e),l=Math.cos(e),c=1-l,t[0]=n*n*c+l,t[1]=i*n*c+r*o,t[2]=r*n*c-i*o,t[3]=0,t[4]=n*i*c-r*o,t[5]=i*i*c+l,t[6]=r*i*c+n*o,t[7]=0,t[8]=n*r*c+i*o,t[9]=i*r*c-n*o,t[10]=r*r*c+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function jf(t,e){var s=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=s,t[7]=0,t[8]=0,t[9]=-s,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Rf(t,e){var s=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-s,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=s,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ff(t,e){var s=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=s,t[2]=0,t[3]=0,t[4]=-s,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Uo(t,e,s){var n=e[0],i=e[1],r=e[2],a=e[3],o=n+n,l=i+i,c=r+r,h=n*o,u=n*l,f=n*c,d=i*l,p=i*c,m=r*c,v=a*o,g=a*l,x=a*c;return t[0]=1-(d+m),t[1]=u+x,t[2]=f-g,t[3]=0,t[4]=u-x,t[5]=1-(h+m),t[6]=p+v,t[7]=0,t[8]=f+g,t[9]=p-v,t[10]=1-(h+d),t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t}function Bf(t,e){var s=new ct(3),n=-e[0],i=-e[1],r=-e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],u=n*n+i*i+r*r+a*a;return u>0?(s[0]=(o*a+h*n+l*r-c*i)*2/u,s[1]=(l*a+h*i+c*n-o*r)*2/u,s[2]=(c*a+h*r+o*i-l*n)*2/u):(s[0]=(o*a+h*n+l*r-c*i)*2,s[1]=(l*a+h*i+c*n-o*r)*2,s[2]=(c*a+h*r+o*i-l*n)*2),Uo(t,e,s),t}function Uf(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function qo(t,e){var s=e[0],n=e[1],i=e[2],r=e[4],a=e[5],o=e[6],l=e[8],c=e[9],h=e[10];return t[0]=Math.hypot(s,n,i),t[1]=Math.hypot(r,a,o),t[2]=Math.hypot(l,c,h),t}function qf(t,e){var s=new ct(3);qo(s,e);var n=1/s[0],i=1/s[1],r=1/s[2],a=e[0]*n,o=e[1]*i,l=e[2]*r,c=e[4]*n,h=e[5]*i,u=e[6]*r,f=e[8]*n,d=e[9]*i,p=e[10]*r,m=a+h+p,v=0;return m>0?(v=Math.sqrt(m+1)*2,t[3]=.25*v,t[0]=(u-d)/v,t[1]=(f-l)/v,t[2]=(o-c)/v):a>h&&a>p?(v=Math.sqrt(1+a-h-p)*2,t[3]=(u-d)/v,t[0]=.25*v,t[1]=(o+c)/v,t[2]=(f+l)/v):h>p?(v=Math.sqrt(1+h-a-p)*2,t[3]=(f-l)/v,t[0]=(o+c)/v,t[1]=.25*v,t[2]=(u+d)/v):(v=Math.sqrt(1+p-a-h)*2,t[3]=(o-c)/v,t[0]=(f+l)/v,t[1]=(u+d)/v,t[2]=.25*v),t}function Wf(t,e,s,n){var i=e[0],r=e[1],a=e[2],o=e[3],l=i+i,c=r+r,h=a+a,u=i*l,f=i*c,d=i*h,p=r*c,m=r*h,v=a*h,g=o*l,x=o*c,w=o*h,y=n[0],k=n[1],b=n[2];return t[0]=(1-(p+v))*y,t[1]=(f+w)*y,t[2]=(d-x)*y,t[3]=0,t[4]=(f-w)*k,t[5]=(1-(u+v))*k,t[6]=(m+g)*k,t[7]=0,t[8]=(d+x)*b,t[9]=(m-g)*b,t[10]=(1-(u+p))*b,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t}function Xf(t,e,s,n,i){var r=e[0],a=e[1],o=e[2],l=e[3],c=r+r,h=a+a,u=o+o,f=r*c,d=r*h,p=r*u,m=a*h,v=a*u,g=o*u,x=l*c,w=l*h,y=l*u,k=n[0],b=n[1],$=n[2],P=i[0],D=i[1],j=i[2],B=(1-(m+g))*k,z=(d+y)*k,C=(p-w)*k,N=(d-y)*b,q=(1-(f+g))*b,Q=(v+x)*b,te=(p+w)*$,ce=(v-x)*$,ie=(1-(f+m))*$;return t[0]=B,t[1]=z,t[2]=C,t[3]=0,t[4]=N,t[5]=q,t[6]=Q,t[7]=0,t[8]=te,t[9]=ce,t[10]=ie,t[11]=0,t[12]=s[0]+P-(B*P+N*D+te*j),t[13]=s[1]+D-(z*P+q*D+ce*j),t[14]=s[2]+j-(C*P+Q*D+ie*j),t[15]=1,t}function Yf(t,e){var s=e[0],n=e[1],i=e[2],r=e[3],a=s+s,o=n+n,l=i+i,c=s*a,h=n*a,u=n*o,f=i*a,d=i*o,p=i*l,m=r*a,v=r*o,g=r*l;return t[0]=1-u-p,t[1]=h+g,t[2]=f-v,t[3]=0,t[4]=h-g,t[5]=1-c-p,t[6]=d+m,t[7]=0,t[8]=f+v,t[9]=d-m,t[10]=1-c-u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Hf(t,e,s,n,i,r,a){var o=1/(s-e),l=1/(i-n),c=1/(r-a);return t[0]=r*2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r*2*l,t[6]=0,t[7]=0,t[8]=(s+e)*o,t[9]=(i+n)*l,t[10]=(a+r)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*r*2*c,t[15]=0,t}function Wo(t,e,s,n,i){var r=1/Math.tan(e/2),a;return t[0]=r/s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(a=1/(n-i),t[10]=(i+n)*a,t[14]=2*i*n*a):(t[10]=-1,t[14]=-2*n),t}var Gf=Wo;function Zf(t,e,s,n,i){var r=1/Math.tan(e/2),a;return t[0]=r/s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(a=1/(n-i),t[10]=i*a,t[14]=i*n*a):(t[10]=-1,t[14]=-n),t}function Jf(t,e,s,n){var i=Math.tan(e.upDegrees*Math.PI/180),r=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),l=2/(a+o),c=2/(i+r);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-((a-o)*l*.5),t[9]=(i-r)*c*.5,t[10]=n/(s-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*s/(s-n),t[15]=0,t}function Xo(t,e,s,n,i,r,a){var o=1/(e-s),l=1/(n-i),c=1/(r-a);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+s)*o,t[13]=(i+n)*l,t[14]=(a+r)*c,t[15]=1,t}var Kf=Xo;function Qf(t,e,s,n,i,r,a){var o=1/(e-s),l=1/(n-i),c=1/(r-a);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=c,t[11]=0,t[12]=(e+s)*o,t[13]=(i+n)*l,t[14]=r*c,t[15]=1,t}function e0(t,e,s,n){var i,r,a,o,l,c,h,u,f,d,p=e[0],m=e[1],v=e[2],g=n[0],x=n[1],w=n[2],y=s[0],k=s[1],b=s[2];return Math.abs(p-y)<Pe&&Math.abs(m-k)<Pe&&Math.abs(v-b)<Pe?Fo(t):(h=p-y,u=m-k,f=v-b,d=1/Math.hypot(h,u,f),h*=d,u*=d,f*=d,i=x*f-w*u,r=w*h-g*f,a=g*u-x*h,d=Math.hypot(i,r,a),d?(d=1/d,i*=d,r*=d,a*=d):(i=0,r=0,a=0),o=u*a-f*r,l=f*i-h*a,c=h*r-u*i,d=Math.hypot(o,l,c),d?(d=1/d,o*=d,l*=d,c*=d):(o=0,l=0,c=0),t[0]=i,t[1]=o,t[2]=h,t[3]=0,t[4]=r,t[5]=l,t[6]=u,t[7]=0,t[8]=a,t[9]=c,t[10]=f,t[11]=0,t[12]=-(i*p+r*m+a*v),t[13]=-(o*p+l*m+c*v),t[14]=-(h*p+u*m+f*v),t[15]=1,t)}function t0(t,e,s,n){var i=e[0],r=e[1],a=e[2],o=n[0],l=n[1],c=n[2],h=i-s[0],u=r-s[1],f=a-s[2],d=h*h+u*u+f*f;d>0&&(d=1/Math.sqrt(d),h*=d,u*=d,f*=d);var p=l*f-c*u,m=c*h-o*f,v=o*u-l*h;return d=p*p+m*m+v*v,d>0&&(d=1/Math.sqrt(d),p*=d,m*=d,v*=d),t[0]=p,t[1]=m,t[2]=v,t[3]=0,t[4]=u*v-f*m,t[5]=f*p-h*v,t[6]=h*m-u*p,t[7]=0,t[8]=h,t[9]=u,t[10]=f,t[11]=0,t[12]=i,t[13]=r,t[14]=a,t[15]=1,t}function s0(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function n0(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function i0(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t[3]=e[3]+s[3],t[4]=e[4]+s[4],t[5]=e[5]+s[5],t[6]=e[6]+s[6],t[7]=e[7]+s[7],t[8]=e[8]+s[8],t[9]=e[9]+s[9],t[10]=e[10]+s[10],t[11]=e[11]+s[11],t[12]=e[12]+s[12],t[13]=e[13]+s[13],t[14]=e[14]+s[14],t[15]=e[15]+s[15],t}function Yo(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t[2]=e[2]-s[2],t[3]=e[3]-s[3],t[4]=e[4]-s[4],t[5]=e[5]-s[5],t[6]=e[6]-s[6],t[7]=e[7]-s[7],t[8]=e[8]-s[8],t[9]=e[9]-s[9],t[10]=e[10]-s[10],t[11]=e[11]-s[11],t[12]=e[12]-s[12],t[13]=e[13]-s[13],t[14]=e[14]-s[14],t[15]=e[15]-s[15],t}function r0(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12]*s,t[13]=e[13]*s,t[14]=e[14]*s,t[15]=e[15]*s,t}function a0(t,e,s,n){return t[0]=e[0]+s[0]*n,t[1]=e[1]+s[1]*n,t[2]=e[2]+s[2]*n,t[3]=e[3]+s[3]*n,t[4]=e[4]+s[4]*n,t[5]=e[5]+s[5]*n,t[6]=e[6]+s[6]*n,t[7]=e[7]+s[7]*n,t[8]=e[8]+s[8]*n,t[9]=e[9]+s[9]*n,t[10]=e[10]+s[10]*n,t[11]=e[11]+s[11]*n,t[12]=e[12]+s[12]*n,t[13]=e[13]+s[13]*n,t[14]=e[14]+s[14]*n,t[15]=e[15]+s[15]*n,t}function o0(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function l0(t,e){var s=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],l=t[6],c=t[7],h=t[8],u=t[9],f=t[10],d=t[11],p=t[12],m=t[13],v=t[14],g=t[15],x=e[0],w=e[1],y=e[2],k=e[3],b=e[4],$=e[5],P=e[6],D=e[7],j=e[8],B=e[9],z=e[10],C=e[11],N=e[12],q=e[13],Q=e[14],te=e[15];return Math.abs(s-x)<=Pe*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(n-w)<=Pe*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(i-y)<=Pe*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(r-k)<=Pe*Math.max(1,Math.abs(r),Math.abs(k))&&Math.abs(a-b)<=Pe*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(o-$)<=Pe*Math.max(1,Math.abs(o),Math.abs($))&&Math.abs(l-P)<=Pe*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(c-D)<=Pe*Math.max(1,Math.abs(c),Math.abs(D))&&Math.abs(h-j)<=Pe*Math.max(1,Math.abs(h),Math.abs(j))&&Math.abs(u-B)<=Pe*Math.max(1,Math.abs(u),Math.abs(B))&&Math.abs(f-z)<=Pe*Math.max(1,Math.abs(f),Math.abs(z))&&Math.abs(d-C)<=Pe*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(p-N)<=Pe*Math.max(1,Math.abs(p),Math.abs(N))&&Math.abs(m-q)<=Pe*Math.max(1,Math.abs(m),Math.abs(q))&&Math.abs(v-Q)<=Pe*Math.max(1,Math.abs(v),Math.abs(Q))&&Math.abs(g-te)<=Pe*Math.max(1,Math.abs(g),Math.abs(te))}var c0=Bo,h0=Yo,u0=Object.freeze(Object.defineProperty({__proto__:null,create:bf,clone:xf,copy:Mf,fromValues:Ef,set:kf,identity:Fo,transpose:Sf,invert:Tf,adjoint:Af,determinant:Pf,multiply:Bo,translate:If,scale:Nf,rotate:Lf,rotateX:Df,rotateY:$f,rotateZ:Of,fromTranslation:Cf,fromScaling:Vf,fromRotation:zf,fromXRotation:jf,fromYRotation:Rf,fromZRotation:Ff,fromRotationTranslation:Uo,fromQuat2:Bf,getTranslation:Uf,getScaling:qo,getRotation:qf,fromRotationTranslationScale:Wf,fromRotationTranslationScaleOrigin:Xf,fromQuat:Yf,frustum:Hf,perspectiveNO:Wo,perspective:Gf,perspectiveZO:Zf,perspectiveFromFieldOfView:Jf,orthoNO:Xo,ortho:Kf,orthoZO:Qf,lookAt:e0,targetTo:t0,str:s0,frob:n0,add:i0,subtract:Yo,multiplyScalar:r0,multiplyScalarAndAdd:a0,exactEquals:o0,equals:l0,mul:c0,sub:h0},Symbol.toStringTag,{value:"Module"}));function Ho(){var t=new ct(3);return ct!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function f0(t){var e=new ct(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Go(t){var e=t[0],s=t[1],n=t[2];return Math.hypot(e,s,n)}function d0(t,e,s){var n=new ct(3);return n[0]=t,n[1]=e,n[2]=s,n}function p0(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function m0(t,e,s,n){return t[0]=e,t[1]=s,t[2]=n,t}function v0(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t}function Zo(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t[2]=e[2]-s[2],t}function Jo(t,e,s){return t[0]=e[0]*s[0],t[1]=e[1]*s[1],t[2]=e[2]*s[2],t}function Ko(t,e,s){return t[0]=e[0]/s[0],t[1]=e[1]/s[1],t[2]=e[2]/s[2],t}function g0(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function y0(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function _0(t,e,s){return t[0]=Math.min(e[0],s[0]),t[1]=Math.min(e[1],s[1]),t[2]=Math.min(e[2],s[2]),t}function w0(t,e,s){return t[0]=Math.max(e[0],s[0]),t[1]=Math.max(e[1],s[1]),t[2]=Math.max(e[2],s[2]),t}function b0(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function x0(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function M0(t,e,s,n){return t[0]=e[0]+s[0]*n,t[1]=e[1]+s[1]*n,t[2]=e[2]+s[2]*n,t}function Qo(t,e){var s=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.hypot(s,n,i)}function el(t,e){var s=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return s*s+n*n+i*i}function tl(t){var e=t[0],s=t[1],n=t[2];return e*e+s*s+n*n}function E0(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function k0(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function S0(t,e){var s=e[0],n=e[1],i=e[2],r=s*s+n*n+i*i;return r>0&&(r=1/Math.sqrt(r)),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function sl(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function T0(t,e,s){var n=e[0],i=e[1],r=e[2],a=s[0],o=s[1],l=s[2];return t[0]=i*l-r*o,t[1]=r*a-n*l,t[2]=n*o-i*a,t}function A0(t,e,s,n){var i=e[0],r=e[1],a=e[2];return t[0]=i+n*(s[0]-i),t[1]=r+n*(s[1]-r),t[2]=a+n*(s[2]-a),t}function P0(t,e,s,n,i,r){var a=r*r,o=a*(2*r-3)+1,l=a*(r-2)+r,c=a*(r-1),h=a*(3-2*r);return t[0]=e[0]*o+s[0]*l+n[0]*c+i[0]*h,t[1]=e[1]*o+s[1]*l+n[1]*c+i[1]*h,t[2]=e[2]*o+s[2]*l+n[2]*c+i[2]*h,t}function I0(t,e,s,n,i,r){var a=1-r,o=a*a,l=r*r,c=o*a,h=3*r*o,u=3*l*a,f=l*r;return t[0]=e[0]*c+s[0]*h+n[0]*u+i[0]*f,t[1]=e[1]*c+s[1]*h+n[1]*u+i[1]*f,t[2]=e[2]*c+s[2]*h+n[2]*u+i[2]*f,t}function N0(t,e){e=e||1;var s=ua()*2*Math.PI,n=ua()*2-1,i=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(s)*i,t[1]=Math.sin(s)*i,t[2]=n*e,t}function L0(t,e,s){var n=e[0],i=e[1],r=e[2],a=s[3]*n+s[7]*i+s[11]*r+s[15];return a=a||1,t[0]=(s[0]*n+s[4]*i+s[8]*r+s[12])/a,t[1]=(s[1]*n+s[5]*i+s[9]*r+s[13])/a,t[2]=(s[2]*n+s[6]*i+s[10]*r+s[14])/a,t}function D0(t,e,s){var n=e[0],i=e[1],r=e[2];return t[0]=n*s[0]+i*s[3]+r*s[6],t[1]=n*s[1]+i*s[4]+r*s[7],t[2]=n*s[2]+i*s[5]+r*s[8],t}function $0(t,e,s){var n=s[0],i=s[1],r=s[2],a=s[3],o=e[0],l=e[1],c=e[2],h=i*c-r*l,u=r*o-n*c,f=n*l-i*o,d=i*f-r*u,p=r*h-n*f,m=n*u-i*h,v=a*2;return h*=v,u*=v,f*=v,d*=2,p*=2,m*=2,t[0]=o+h+d,t[1]=l+u+p,t[2]=c+f+m,t}function O0(t,e,s,n){var i=[],r=[];return i[0]=e[0]-s[0],i[1]=e[1]-s[1],i[2]=e[2]-s[2],r[0]=i[0],r[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),r[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=r[0]+s[0],t[1]=r[1]+s[1],t[2]=r[2]+s[2],t}function C0(t,e,s,n){var i=[],r=[];return i[0]=e[0]-s[0],i[1]=e[1]-s[1],i[2]=e[2]-s[2],r[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),r[1]=i[1],r[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=r[0]+s[0],t[1]=r[1]+s[1],t[2]=r[2]+s[2],t}function V0(t,e,s,n){var i=[],r=[];return i[0]=e[0]-s[0],i[1]=e[1]-s[1],i[2]=e[2]-s[2],r[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),r[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),r[2]=i[2],t[0]=r[0]+s[0],t[1]=r[1]+s[1],t[2]=r[2]+s[2],t}function z0(t,e){var s=t[0],n=t[1],i=t[2],r=e[0],a=e[1],o=e[2],l=Math.sqrt(s*s+n*n+i*i),c=Math.sqrt(r*r+a*a+o*o),h=l*c,u=h&&sl(t,e)/h;return Math.acos(Math.min(Math.max(u,-1),1))}function j0(t){return t[0]=0,t[1]=0,t[2]=0,t}function R0(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function F0(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function B0(t,e){var s=t[0],n=t[1],i=t[2],r=e[0],a=e[1],o=e[2];return Math.abs(s-r)<=Pe*Math.max(1,Math.abs(s),Math.abs(r))&&Math.abs(n-a)<=Pe*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-o)<=Pe*Math.max(1,Math.abs(i),Math.abs(o))}var U0=Zo,q0=Jo,W0=Ko,X0=Qo,Y0=el,H0=Go,G0=tl,Z0=function(){var t=Ho();return function(e,s,n,i,r,a){var o,l;for(s||(s=3),n||(n=0),i?l=Math.min(i*s+n,e.length):l=e.length,o=n;o<l;o+=s)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],r(t,t,a),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2];return e}}(),J0=Object.freeze(Object.defineProperty({__proto__:null,create:Ho,clone:f0,length:Go,fromValues:d0,copy:p0,set:m0,add:v0,subtract:Zo,multiply:Jo,divide:Ko,ceil:g0,floor:y0,min:_0,max:w0,round:b0,scale:x0,scaleAndAdd:M0,distance:Qo,squaredDistance:el,squaredLength:tl,negate:E0,inverse:k0,normalize:S0,dot:sl,cross:T0,lerp:A0,hermite:P0,bezier:I0,random:N0,transformMat4:L0,transformMat3:D0,transformQuat:$0,rotateX:O0,rotateY:C0,rotateZ:V0,angle:z0,zero:j0,str:R0,exactEquals:F0,equals:B0,sub:U0,mul:q0,div:W0,dist:X0,sqrDist:Y0,len:H0,sqrLen:G0,forEach:Z0},Symbol.toStringTag,{value:"Module"}));const{identity:K0,rotate:Q0}=u0,{add:ed,cross:td,dot:sd,mul:nd,normalize:fa,subtract:un,scale:ig,transformMat4:id}=J0;function rd(t){const e=2*Math.PI/t;return new Array(t).fill(null).map((s,n)=>[Math.cos(e*n),Math.sin(e*n)])}function ad(t,e=1){const s=new Uint16Array(t*(Math.max(e,1)-1)*6);for(let n=0;n<e;n++){const i=n*t*6,r=n*t;for(let a=0;a<t;a++){const o=i+a*6,l=r+a;s[o+0]=l,s[o+1]=l-t+1,s[o+2]=l+1,s[o+3]=l+1,s[o+4]=l+t,s[o+5]=l,a===t-1?(s[o+0]=l,s[o+1]=l-t+1,s[o+2]=l+1,s[o+3]=l+1,s[o+4]=l+t,s[o+5]=l):(s[o+0]=l,s[o+1]=l+1,s[o+2]=l+t+1,s[o+3]=l+t+1,s[o+4]=l+t,s[o+5]=l)}}return s}function od(t,e=3){const s=t,n=[],i=[],r=[],a={position:[],normals:[],index:ad(e,s.length)},o=rd(e),l=o.length,c=s.length;for(let h=0;h<c;h++){const u=[0,0,1];h===0?un(i,s[h],s[h+1]):h===c-1?un(i,s[h-1],s[h]):un(i,s[h-1],s[h+1]),fa(i,i),td(r,u,i);const f=Math.acos(sd(u,i));K0(n),Q0(n,n,f,r);for(let d=0;d<l;d++){const p=o[d],m=[p[0],p[1],0],v=s[h][3];nd(m,m,[v,v,1]),id(m,m,n);const g=[];fa(g,m),a.normals.push(g),ed(m,m,s[h]),a.position.push(m)}}return a}function ts(t,e,s){return t*(1-s)+e*s}function ld(t,e=0){const s=(t.length-1)*e,n=Math.floor(s),i=Math.ceil(s);return ts(t[i],t[n],i-s)}function nl(t,e){const s=(t.length/4-1)*e,n=Math.floor(s),i=Math.ceil(s),r=i-s;return[ts(t[i*4+0],t[n*4+0],r),ts(t[i*4+1],t[n*4+1],r),ts(t[i*4+2],t[n*4+2],r),ts(t[i*4+3],t[n*4+3],r)]}function pi(t,e){const s=(t.length/4-1)*e,n=Math.floor(s),i=Math.ceil(s);return[t[i*4+0]-t[n*4+0],t[i*4+1]-t[n*4+1],t[i*4+2]-t[n*4+2],t[i*4+3]+t[n*4+3]/2]}function Ws(...t){const e=t.filter(u=>!!u);if(e.length===1)return e[0];const s=new Float32Array(e.reduce((u,f)=>u+f.position.length,0)),n=new Float32Array(e.reduce((u,f)=>u+f.normal.length,0)),i=new Float32Array(e.reduce((u,f)=>u+f.uv.length,0)),r=e.reduce((u,f)=>u+f.index.length,0),a=r>65536?new Uint32Array(r):new Uint16Array(r);let o=0,l=0,c=0,h=0;for(let u=0;u<e.length;u++){const f=e[u].normal,d=f.length;for(let y=0;y<d;y++)n[l+y]=f[y];l+=d;const p=e[u].uv,m=p.length;for(let y=0;y<m;y++)i[c+y]=p[y];c+=m;const v=e[u].index,g=v.length;for(let y=0;y<g;y++)a[y+h]=v[y]+o/3;h+=g;const x=e[u].position,w=x.length;for(let y=0;y<w;y++)s[o+y]=x[y];o+=w}return{position:s,normal:n,uv:i,index:a}}var cd=(t,e)=>Math.sqrt(t*t+e*e),hd=(t,e,s)=>Math.sqrt(t*t+e*e+s*s),fs={},Ks={},gs={};Object.defineProperty(gs,"__esModule",{value:!0});function ud(t){var e=new Uint32Array(1);return e[0]=t[0]*1664525+1013904223,e}gs.default=ud;Object.defineProperty(Ks,"__esModule",{value:!0});Ks.makeNoise2D=void 0;var Ss=gs,fd=1/47,Un=(Math.sqrt(2+1)-1)/2,dd=(1/Math.sqrt(2+1)-1)/2;function da(t,e,s){return{dx:-e-t*Un,dy:-s-t*Un,xsb:e,ysb:s}}function pd(t){for(var e=[],s=0;s<Qt.length;s+=4){for(var n=md[Qt[s]],i=null,r=null,a=0;a<n.length;a+=3)r=da(n[a],n[a+1],n[a+2]),i===null?e[s/4]=r:i.next=r,i=r;r.next=da(Qt[s+1],Qt[s+2],Qt[s+3])}for(var o=[],s=0;s<fn.length;s+=2)o[fn[s]]=e[fn[s+1]];for(var l=new Uint8Array(256),c=new Uint8Array(256),h=new Uint8Array(256),s=0;s<256;s++)h[s]=s;var u=new Uint32Array(1);u[0]=t,u=Ss.default(Ss.default(Ss.default(u)));for(var s=255;s>=0;s--){u=Ss.default(u);var f=new Uint32Array(1);f[0]=(u[0]+31)%(s+1),f[0]<0&&(f[0]+=s+1),l[s]=h[f[0]],c[s]=l[s]&14,h[f[0]]=h[s]}return function(d,p){for(var m=(d+p)*dd,v=d+m,g=p+m,x=Math.floor(v),w=Math.floor(g),y=(x+w)*Un,k=d-(x+y),b=p-(w+y),$=v-x,P=g-w,D=$+P,j=$-P+1|D<<1|D+P<<2|D+$<<4,B=0,z=o[j];z!==void 0;z=z.next){var C=k+z.dx,N=b+z.dy,q=2-C*C-N*N;if(q>0){var Q=x+z.xsb,te=w+z.ysb,ce=l[Q&255],ie=c[ce+te&255],be=pa[ie]*C+pa[ie+1]*N;B+=q*q*q*q*be}}return B*fd}}Ks.makeNoise2D=pd;var md=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],pa=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],fn=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],Qt=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0],Qs={};Object.defineProperty(Qs,"__esModule",{value:!0});Qs.makeNoise3D=void 0;var Ts=gs,vd=1/103,Vs=(Math.sqrt(3+1)-1)/3,gd=(1/Math.sqrt(3+1)-1)/3;function dn(t,e,s,n){return{dx:-e-t*Vs,dy:-s-t*Vs,dz:-n-t*Vs,xsb:e,ysb:s,zsb:n}}function yd(t){for(var e=[],s=0;s<at.length;s+=9){for(var n=_d[at[s]],i=null,r=null,a=0;a<n.length;a+=4)r=dn(n[a],n[a+1],n[a+2],n[a+3]),i===null?e[s/9]=r:i.next=r,i=r;r.next=dn(at[s+1],at[s+2],at[s+3],at[s+4]),r.next.next=dn(at[s+5],at[s+6],at[s+7],at[s+8])}for(var o=[],s=0;s<mn.length;s+=2)o[mn[s]]=e[mn[s+1]];for(var l=new Uint8Array(256),c=new Uint8Array(256),h=new Uint8Array(256),s=0;s<256;s++)h[s]=s;var u=new Uint32Array(1);u[0]=t,u=Ts.default(Ts.default(Ts.default(u)));for(var s=255;s>=0;s--){u=Ts.default(u);var f=new Uint32Array(1);f[0]=(u[0]+31)%(s+1),f[0]<0&&(f[0]+=s+1),l[s]=h[f[0]],c[s]=l[s]%24*3,h[f[0]]=h[s]}return function(d,p,m){for(var v=(d+p+m)*gd,g=d+v,x=p+v,w=m+v,y=Math.floor(g),k=Math.floor(x),b=Math.floor(w),$=(y+k+b)*Vs,P=d-(y+$),D=p-(k+$),j=m-(b+$),B=g-y,z=x-k,C=w-b,N=B+z+C,q=z-C+1|B-z+1<<1|B-C+1<<2|N<<3|N+C<<5|N+z<<7|N+B<<9,Q=0,te=o[q];te!==void 0;te=te.next){var ce=P+te.dx,ie=D+te.dy,be=j+te.dz,we=2-ce*ce-ie*ie-be*be;if(we>0){var ke=y+te.xsb,Oe=k+te.ysb,Ce=b+te.zsb,$e=l[ke&255],xe=l[$e+Oe&255],Te=c[xe+Ce&255],Ie=pn[Te]*ce+pn[Te+1]*ie+pn[Te+2]*be;Q+=we*we*we*we*Ie}}return Q*vd}}Qs.makeNoise3D=yd;var _d=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],pn=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],mn=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],at=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0],en={};Object.defineProperty(en,"__esModule",{value:!0});en.makeNoise4D=void 0;var As=gs,wd=1/30,ss=(Math.sqrt(4+1)-1)/4,bd=(1/Math.sqrt(4+1)-1)/4;function Ps(t,e,s,n,i){return{dx:-e-t*ss,dy:-s-t*ss,dz:-n-t*ss,dw:-i-t*ss,xsb:e,ysb:s,zsb:n,wsb:i}}function xd(t){for(var e=[],s=0;s<Re.length;s+=16){for(var n=Md[Re[s]],i=null,r=null,a=0;a<n.length;a+=5)r=Ps(n[a],n[a+1],n[a+2],n[a+3],n[a+4]),i===null?e[s/16]=r:i.next=r,i=r;r.next=Ps(Re[s+1],Re[s+2],Re[s+3],Re[s+4],Re[s+5]),r.next.next=Ps(Re[s+6],Re[s+7],Re[s+8],Re[s+9],Re[s+10]),r.next.next.next=Ps(Re[s+11],Re[s+12],Re[s+13],Re[s+14],Re[s+15])}for(var o=[],s=0;s<vn.length;s+=2)o[vn[s]]=e[vn[s+1]];for(var l=new Uint8Array(256),c=new Uint8Array(256),h=new Uint8Array(256),s=0;s<256;s++)h[s]=s;var u=new Uint32Array(1);u[0]=t,u=As.default(As.default(As.default(u)));for(var s=255;s>=0;s--){u=As.default(u);var f=new Uint32Array(1);f[0]=(u[0]+31)%(s+1),f[0]<0&&(f[0]+=s+1),l[s]=h[f[0]],c[s]=l[s]&252,h[f[0]]=h[s]}return function(d,p,m,v){for(var g=(d+p+m+v)*bd,x=d+g,w=p+g,y=m+g,k=v+g,b=Math.floor(x),$=Math.floor(w),P=Math.floor(y),D=Math.floor(k),j=(b+$+P+D)*ss,B=d-(b+j),z=p-($+j),C=m-(P+j),N=v-(D+j),q=x-b,Q=w-$,te=y-P,ce=k-D,ie=q+Q+te+ce,be=te-ce+1|Q-te+1<<1|Q-ce+1<<2|q-Q+1<<3|q-te+1<<4|q-ce+1<<5|ie<<6|ie+ce<<8|ie+te<<11|ie+Q<<14|ie+q<<17,we=0,ke=o[be];ke!==void 0;ke=ke.next){var Oe=B+ke.dx,Ce=z+ke.dy,$e=C+ke.dz,xe=N+ke.dw,Te=2-Oe*Oe-Ce*Ce-$e*$e-xe*xe;if(Te>0){var Ie=b+ke.xsb,Y=$+ke.ysb,se=P+ke.zsb,_e=D+ke.wsb,me=l[Ie&255],O=l[me+Y&255],J=l[O+se&255],Me=c[J+_e&255],Ve=Is[Me]*Oe+Is[Me+1]*Ce+Is[Me+2]*$e+Is[Me+3]*xe;we+=Te*Te*Te*Te*Ve}}return we*wd}}en.makeNoise4D=xd;var Md=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],Is=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],vn=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],Re=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1];(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.makeNoise4D=t.makeNoise3D=t.makeNoise2D=void 0;var e=Ks;Object.defineProperty(t,"makeNoise2D",{enumerable:!0,get:function(){return e.makeNoise2D}});var s=Qs;Object.defineProperty(t,"makeNoise3D",{enumerable:!0,get:function(){return s.makeNoise3D}});var n=en;Object.defineProperty(t,"makeNoise4D",{enumerable:!0,get:function(){return n.makeNoise4D}})})(fs);let Pt=0,gn=fs.makeNoise2D(Pt),ma=fs.makeNoise3D(Pt);var Lt={n1d:t=>gn(t,0),n2d:(t,e)=>gn(t,e),n3d:(t,e,s)=>ma(t,e,s),get seed(){return Pt},set seed(t){t!==Pt&&(Pt=t,gn=fs.makeNoise2D(Pt),ma=fs.makeNoise3D(Pt))}},il=([t,e])=>{const s=cd(t,e);return s===0?[1,0]:[t/s,e/s]},qn=([t,e,s])=>{const n=hd(t,e,s);return[t/n,e/n,s/n]},rl=(t,e,s)=>[t*Math.cos(s)-e*Math.sin(s),t*Math.sin(s)+e*Math.cos(s)];function Xs(t,e,s){const[n,i,r]=t,[a,o,l]=qn(e),c=Math.cos(s),h=Math.sin(s);return new fe((c+(1-c)*a*a)*n+((1-c)*a*o-l*h)*i+((1-c)*a*l+o*h)*r,((1-c)*a*o+l*h)*n+(c+(1-c)*o*o)*i+((1-c)*o*l-a*h)*r,((1-c)*a*l-o*h)*n+((1-c)*o*l+a*h)*i+(c+(1-c)*l*l)*r)}function mi(t,e){return new Nt(t,{position:{size:3,data:e.position},normal:{size:3,data:e.normal},uv:{size:2,data:e.uv},index:{data:e.index}})}function Ed([t,e,s]){return t===0&&s===0?[1,0,0]:[1,1,-((t+e)/s)]}const kd=100,yn=2,va=1;function Sd(t=1,e=12,s=12){const n=360*(Math.PI/180)/s,i=e*s+1,r=(e-1)*s*2+s,a=new Float32Array(i*3),o=new Float32Array(i*3),l=new Float32Array(i*2),c=new Uint16Array(r*3);a[0]=0,a[1]=1-va,a[2]=0,o[0]=0,o[1]=1,o[2]=0,l[0]=.5,l[1]=.5;const h=new Array(e-1).fill(null).map((f,d,p)=>t+d/(p.length-1)*yn);h.push(kd);const u=h.map(f=>{const d=(Math.max(Math.min(f,t+yn),t)-t)/yn;return Math.sin((d+.5)*Math.PI)/2+.5-va});for(let f=0;f<e;f++){const d=h[f],p=u[f];for(let m=0;m<s;m++){const v=n*m,g=Math.cos(v)*d,x=p,w=Math.sin(v)*d,k=f*s+m+1;if(a[k*3+0]=g,a[k*3+1]=x,a[k*3+2]=w,o[k*3+0]=0,o[k*3+1]=1,o[k*3+2]=0,l[k*2+0]=g,l[k*2+1]=w,f===0){const b=(k-1)*3;c[b+0]=0,c[b+1]=(m+1)%s+1,c[b+2]=m+1}else if(m===s-1){const b=f*s*6+m*6-s*3;c[b+0]=k,c[b+1]=k+1-s-s,c[b+2]=k+1-s,c[b+3]=k,c[b+4]=k-s,c[b+5]=k+1-s*2}else{const b=f*s*6+m*6-s*3;c[b+0]=k,c[b+1]=k+1-s,c[b+2]=k+1,c[b+3]=k,c[b+4]=k-s,c[b+5]=k+1-s}}}return{position:a,normal:o,uv:l,index:c}}function Td(t,{res:e=1,xCurvature:s=.5,yCurvature:n=.2}={}){const i=t.length,r=3+e*2,a=r*i,o=(r-1)*(i-1)*2,l=new Float32Array(a*3),c=new Float32Array(a*2),h=new Float32Array(a*2),u=new Uint16Array(o*3);return t.forEach((f,d)=>{const p=d*r;for(let m=0;m<r;m++){const v=2-m/(r-1)*2-1;l[p*3+m*3+0]=(f.x-1)*v*.5;const g=-(1-f.y)*(1-f.y)*.5,x=Math.sin(Math.abs(v)*Math.PI)*.01;if(l[p*3+m*3+1]=x*s+g*n,l[p*3+m*3+2]=f.y-1,h[p*2+m*2+0]=l[p*3+m*3+0]+1/2,h[p*2+m*2+1]=l[p*3+m*3+2],d<t.length-1){const w=d*(r-1);u[w*6+m*6+0]=p+m+0,u[w*6+m*6+1]=p+m+1,u[w*6+m*6+2]=p+m+r,u[w*6+m*6+3]=p+m+1,u[w*6+m*6+4]=p+m+r,u[w*6+m*6+5]=p+m+r+1}}}),{position:l,normal:c,index:u,uv:h}}function al(t,e=8){const s=mh(t,4),n=od(s,e),i=Float32Array.from(n.position.flat()),r=Float32Array.from(n.normals.flat());return{position:i,index:n.index,normal:r,uv:new Float32Array}}function Ad(t,e=1,s=1,n=0,i=!0){var v,g,x,w,y,k;const r=Array.isArray(s)?1:s,a=((v=s[0])!=null?v:r)*10,o=((g=s[1])!=null?g:r)*10,l=((x=s[2])!=null?x:r)*10,c=Array.isArray(n)?0:n,h=(w=n[0])!=null?w:c,u=(y=n[1])!=null?y:c,f=(k=n[2])!=null?k:c,d=t.length/4,p=[t[0],t[1],t[2]];let m=0;for(let b=0;b<d;b++){const $=b/d;m+=(Math.abs(p[0]-t[b*4+0])+Math.abs(p[1]-t[b*4+1])+Math.abs(p[2]-t[b*4+2]))/3,p[0]=t[b*4+0],p[1]=t[b*4+1],p[2]=t[b*4+2];const P=i?e*$:e,[D,j,B]=t.slice(b*4,b*4+3);t[b*4+0]=D+Lt.n1d(1e3+h+m*a)*P,t[b*4+1]=j+Lt.n1d(2e3+u+m*o)*P,t[b*4+2]=B+Lt.n1d(3e3+f+m*l)*P}return t}function ga(t,[e,s,n]){let i=t.length/4,r=-1;for(;r++<i-1;)t[r*4+0]=t[r*4+0]+e,t[r*4+1]=t[r*4+1]+s,t[r*4+2]=t[r*4+2]+n;return t}function ya(t,e,s=1,n,i=!1){const[r=0,a=0,o=0]=n||t;r&&a&&o&&ga(t,[-r,-a,-o]);const l=t.length/4;let c=-1;for(;c++<l-1;){const h=t.slice(c*4,c*4+3),u=c/l,f=Xs([...h],e,i?s*u:s);t[c*4+0]=f[0],t[c*4+1]=f[1],t[c*4+2]=f[2]}return r&&a&&o&&ga(t,[r,a,o]),t}function Pd(t,e=.5,s=2,n=1){const i=Math.max(Math.min(e,1),0),r=Math.floor(Math.max(0,s));if(r<2)return[t];const a=t.length/4,o=Math.floor(a*i),l=qn(pi(t,i)),c=qn(Ed(l));return[...o<0?[]:[t.slice(0,o*4)],...new Array(r).fill(null).map((h,u)=>{const f=t.slice((o-2)*4),d=u/s;return ya(f,c,n,void 0,!0),ya(f,l,d*6),f})].filter(h=>h.length>4)}var Id={title:"Branches",type:"branches",outputs:["plant"],parameters:{input:{type:"plant",label:"plant",external:!0},length:{type:"number",min:0,max:3,step:.05,value:.8},thiccness:{type:"number",min:0,max:1,step:.01,value:.8},offsetSingle:{type:"number",min:0,max:1,step:.01,value:.5},lowestBranch:{type:"number",min:0,max:1,step:.01,value:.2},amount:{type:"number",min:0,max:64,value:10}},computeStem(t,e){if(!t.input)return{stems:[]};const{stems:s}=t.input(),n=e.getSetting("stemResY"),i=Math.max(...s.map(a=>a.depth)),r=s.map(a=>{const o=[];if(i!==a.depth)return[];const l=t.amount(),c=t.lowestBranch();for(let h=0;h<l;h++){const u=h/l,f=t.length(u)*(1-u),d=t.thiccness(u),p=t.offsetSingle(u),m=h%2===0;let v=c+(1-c)*u;v-=1/l*p*(m?-1:1);const[g,,x]=pi(a.skeleton,v),w=il([g,x]),[y,k]=rl(w[0],w[1],m?-Math.PI/2:Math.PI/2),[b,$,P,D]=nl(a.skeleton,v),j=Math.max(Math.floor(n*f*10),4),B=new Float32Array(j*4);for(let z=0;z<j*4;z++){const C=z/j;B[z*4+0]=b+y*C*f,B[z*4+1]=$,B[z*4+2]=P+k*C*f,B[z*4+3]=D*d*(1-C)}o.push(B)}return o.map(h=>({skeleton:h,id:a.id,depth:a.depth+1}))}).flat();return{stems:[...s,...r]}}},Nd={title:"Random",type:"random",outputs:["number"],parameters:{min:{type:"number",value:0,min:0,max:1,step:.05},max:{type:"number",value:1,min:0,max:1,step:.05}},computeValue(t,e,s){const n=t.max(),i=t.min();return n?i+e.n1dn(200+s*1e3)*Math.abs(n-i):0}},Ld={title:"Curve",type:"curve",outputs:["number"],parameters:{value:{type:"curve",internal:!0,label:!1,value:[{x:0,y:1,pinned:!0},{x:1,y:0,pinned:!0}]}},computeValue(t,e,s){const n=hh(t.value).map(i=>i.y);return ld(n,1-s)}},Dd={title:"Gravity",type:"gravity",outputs:["plant"],parameters:{input:{type:"plant",external:!0},type:{internal:!0,type:"select",values:["simple","verlet","test"],value:"simple"},strength:{type:"number",min:0,max:2,step:.05,value:1}},computeStem(t){const{input:e,type:s,strength:n}=t,{stems:i}=e(),r=Math.max(...i.map(a=>a.depth));return s==="simple"&&i.forEach(({skeleton:a,depth:o})=>{if(o!==r)return;const l=a.length/4;for(let c=1;c<l;c++){const h=c/l,u=a[c*4+1],f=n(h);a[c*4+1]=u-u*h*h*h*f}return a}),s==="test"&&i.forEach(({skeleton:a})=>{const o=a.length/4;for(let l=1;l<o;l++){const c=l/o,h=n(c),u=a[l*4+0],f=a[l*4+1],d=a[l*4+2],p=a[(l-1)*4+0],m=a[(l-1)*4+1],v=a[(l-1)*4+2],g=p-u,x=m-f,w=m-d,[y,k]=rl(g,w,90);for(let b=l;b<o;b++){const $=a[b*4+0],P=a[b*4+1],D=a[b*4+2],j=$-p,B=P-m,z=D-v;let[C,N,q]=Xs([j,B,z],[y,x,k],h*c);const Q=C+p,te=N+m,ce=q+v;a[b*4+0]=Q,a[b*4+1]=te,a[b*4+2]=ce}}return a}),s==="verlet"&&i.forEach(({skeleton:a})=>{const o=a.length/4;for(let l=1;l<o;l++){const c=a[l*4+0],h=a[l*4+1],u=a[l*4+2],f=new fe(5,0,0).cross(new fe(c,h,u),new fe(0,1,0)),d=l/o,p=n(d);for(let m=l;m<o;m++){const v=Xs([c,h,u],f,d*p);a[m*4+0]=v[0],a[m*4+1]=v[1],a[m*4+2]=v[2]}}return a}),{stems:i}},computeGeometry(t){return t.input()}};const _n=je("nodes.join");var $d={title:"Join",type:"join",outputs:["plant"],parameters:{inputA:{type:"plant",label:"plant",external:!0},inputB:{type:"plant",label:"plant",external:!0}},computeStem(t,e){_n("compute skeleton",t,e);const{inputA:s,inputB:n}=t;if(!s||!n)return s?s():n();const{stems:i}=s(),{stems:r}=n();return _n(i,r),{stems:[...i,...r]}},computeGeometry(t){const{inputA:e,inputB:s}=t;if(!e||!s)return e?e():s();const{geometry:n,instances:i}=e(),{geometry:r,instances:a}=s(),o=Ws(n,r),l=[];return i&&l.push(i),a&&l.push(a),_n("compute geometry",{geometryA:n,geometryB:r,result:o}),{geometry:o,instances:l}}};const Od=[{x:1,y:1,pinned:!0},{x:.62,y:.84,pinned:!1},{x:.54,y:.63,pinned:!1},{x:.38,y:.41,pinned:!0},{x:.44,y:.23,pinned:!1},{x:.64,y:.12,pinned:!1},{x:.98,y:.02,pinned:!0}];var Cd={title:"Leaf",type:"leaf",outputs:["plant"],parameters:{input:{type:"plant",external:!0},size:{type:"number",min:0,max:3,step:.05,value:.2},shape:{type:"shape",external:!0,value:Od},lowestLeaf:{type:"number",min:0,max:1,step:.01,value:.5},curvature:{external:!0,type:"vec2",value:{x:.5,y:.2}},amount:{type:"number",min:0,max:20,value:10}},computeStem(t){const{stems:e}=t.input(),s=Math.max(...e.map(i=>i.depth)),n=e.map((i,r)=>{const a=r/e.length;if(i.depth!==s)return;const o=t.amount(a),l=new Float32Array(o*3),c=new Float32Array(o*3),h=new Float32Array(o*3);for(let u=0;u<o;u++){const f=u/(o-1),d=t.size(1-f),p=t.lowestLeaf(f),m=p+(1-p)*f-.001,[v,g,x]=nl(i.skeleton,m),[w,,y]=pi(i.skeleton,m),k=il([w,y]),b=Math.atan2(-k[0],k[1]);l[u*3+0]=v,l[u*3+1]=g,l[u*3+2]=x,c[u*3+0]=d,c[u*3+1]=1,c[u*3+2]=d,h[u*3+0]=0,h[u*3+1]=b-Math.PI/2*(u%2===0?-1:1),h[u*3+2]=0}return{offset:l,scale:c,rotation:h}}).filter(i=>!!i);return{stems:e,instances:n}},computeGeometry(t,e,s){const{shape:n,input:i,curvature:r}=t,{instances:a}=e,o=r(),l=Td(n(),{res:s.getSetting("leafRes",2),xCurvature:o.x,yCurvature:o.y});return{geometry:i().geometry,instances:a.map(c=>Se(Se({},c),l))}}},Vd={title:"Math",type:"math",outputs:["number"],parameters:{mode:{type:"select",internal:!0,label:!1,value:"add",values:["add","multiply","subtract"]},a:{type:"number",value:0,label:!1},b:{type:"number",value:0,label:!1}},computeValue(t,e,s){const{mode:n}=t,i=t.a(s),r=t.b(s);switch(n){case"multiply":return i*r;case"subtract":return i-r;default:return i+r}}};const zd=je("nodes.noise");var jd={title:"Noise",type:"noise",outputs:["plant"],parameters:{input:{type:"plant",label:"plant",external:!0},size:{type:"number",min:0,max:2,step:.05,value:1},strength:{type:"number",min:0,max:2,step:.01,value:.5}},computeStem(t){zd("computeSkeleton",t);const{stems:e}=t.input(),s=t.size(),n=t.strength(),i=Math.max(...e.map(r=>r.depth));return e.forEach((r,a)=>{r.depth===i&&Ad(r.skeleton,n,s,a*200)}),{stems:e}},computeGeometry(t,e,s){var a;const n=s.getSetting("stemResX"),i=(a=t==null?void 0:t.input)==null?void 0:a.call(t),{stems:r}=e;return{geometry:Ws(i?i.geometry:null,...r.map(({skeleton:o})=>al(o,n)))}}},Rd={title:"Output",type:"output",outputs:[],parameters:{input:{type:"plant",label:"plant",external:!0}}},Fd={title:"Parameter",type:"parameter",outputs:["number"],parameters:{value:{type:"number",inputType:"float",value:0},variation:{type:"number",value:0,min:0,max:1,step:.05}},computeValue(t,e,s=1){const n=t.value(),i=t.variation();return i?n+e.n1d(200*s)*i*Math.max(n,1):n}};const Bd=t=>t==="X"?[1,0,0]:t==="Z"?[0,0,1]:[0,1,0];var Ud={title:"Rotate",type:"rotate",outputs:["plant"],parameters:{input:{type:"plant",external:!0},axis:{type:"select",internal:!0,label:!1,inputType:"tab",values:["Y","X","Z"],value:"X"},spread:{internal:!0,type:"boolean",value:!0},angle:{type:"number",min:0,max:Math.PI*2,step:.05,value:0}},computeStem(t,e){const{input:s,axis:n,spread:i}=t,{stems:r}=s(),a=Bd(n),{depth:o}=r[r.length-1];return r.forEach((l,c)=>{if(l.depth!==o)return;const h=l.skeleton,u=l.skeleton.length/4,f=h[0],d=h[1],p=h[2],m=c/r.length,v=t.angle(m)*(i?m:1);for(let g=1;g<u;g++){let x=h[g*4+0],w=h[g*4+1],y=h[g*4+2];x-=f,w-=d,y-=p,[x,w,y]=Xs([x,w,y],a,v),x+=f,w+=d,y+=p,h[g*4+0]=x,h[g*4+1]=w,h[g*4+2]=y}}),{stems:r}}},qd={title:"Shape",type:"shape",outputs:["shape"],parameters:{value:{type:"shape",internal:!0,label:!1,value:[{x:1,y:0,pinned:!0},{x:.5,y:.5,pinned:!0},{x:1,y:1,pinned:!0}]}},computeValue(t){return t.value}},Wd={title:"Slider",type:"slider",outputs:["number"],parameters:{value:{type:"number",label:!1,internal:!0,min:0,max:1,step:.01,value:0}},computeValue(t){return t.value}};const Xd=je("nodes.stem");var Yd={title:"Stem",type:"stem",outputs:["plant"],parameters:{origin:{type:"vec3",external:!0,value:{x:0,y:0,z:0}},height:{type:"number",min:0,max:5,step:.05,value:2},thiccness:{type:"number",min:0,max:.2,step:.01,value:.06},amount:{type:"number",min:0,max:20,value:1}},computeStem(t,e){Xd("computeSkeleton",t);const s=t.amount(),n=e.getSetting("stemResY"),i=[];for(let r=0;r<s;r++){const{x:a,y:o,z:l}=t.origin(r),c=t.height(),h=new Float32Array(n*4);for(let u=0;u<n;u++){const f=u/n,d=t.thiccness(f)*(1-f),p=a,m=o+f*c,v=l;h[u*4+0]=p,h[u*4+1]=m,h[u*4+2]=v,h[u*4+3]=d}i.push({depth:0,skeleton:h,id:"stem"+e.getId()})}return{stems:i}}},Hd={title:"Vec2",type:"vec2",outputs:["vec2"],parameters:{x:{label:!1,type:"number",value:0,defaultValue:0},y:{label:!1,type:"number",value:0,defaultValue:0}}},Gd={title:"Vec3",type:"vec3",outputs:["vec3"],parameters:{x:{label:!1,type:"number",value:0,defaultValue:0},y:{label:!1,type:"number",value:0,defaultValue:0},z:{label:!1,type:"number",value:0,defaultValue:0}}},Zd={title:"Vec3Length",type:"vec3length",outputs:["number"],parameters:{vec:{type:"vec3",label:!1,value:{x:0,y:0,z:0}}},computeValue(t){const e=t.vec();return e?Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2)+Math.pow(e.z,2)):0}},Jd={title:"Split",type:"split",outputs:["plant"],parameters:{input:{type:"plant",label:"plant",external:!0},height:{type:"number",min:0,max:1,step:.05,value:.7},angle:{type:"number",min:0,max:2,step:.01,value:.5},amount:{type:"number",min:2,max:20,value:2}},computeStem(t){const e=t.height(),s=t.angle(),n=t.amount(),{stems:i}=t.input(),r=Math.max(...i.map(o=>o.depth));return{stems:i.map(o=>o.depth===r?Pd(o.skeleton,e,n,s).map((c,h)=>({skeleton:c,id:o.id,depth:o.depth+(h===0?0:1)})):o).flat().filter(o=>!!o)}}},Kd={title:"Number",type:"number",outputs:["number"],parameters:{value:{type:"number",internal:!0,label:!1,value:0}},computeValue({value:t=0}){return t}},Qd=Object.freeze(Object.defineProperty({__proto__:null,Branch:Id,Random:Nd,Curve:Ld,Gravity:Dd,Join:$d,Leaf:Cd,Math:Vd,Noise:jd,Output:Rd,Parameter:Fd,Rotate:Ud,Shape:qd,Slider:Wd,Stem:Yd,Vec2:Hd,Vec3:Gd,VecLength:Zd,Split:Jd,Number:Kd},Symbol.toStringTag,{value:"Module"})),ol=Object.values(Qd);const ds=new Map;for(const t of ol)t.computeStem&&(t.computeStem=nn(t.computeStem)),t.computeGeometry&&(t.computeGeometry=nn(t.computeGeometry)),t.computeValue&&(t.computeValue=nn(t.computeValue)),ds.set(t.type,t);let _a="",wn,bn=2;const ep=t=>{let e=0;return Lt.seed=0,{_id:"",getId(){return this._id},n1d(s){return Lt.n1d(bn++*s)},n1dn(s){return 1+Lt.n1d(bn++*s)/2},getSetting(s){return t[s]},get settings(){return t},get seed(){return e},refresh(){bn=2,t!=null&&t.useRandomSeed&&(e=Math.floor(Math.random()*1e5),Lt.seed=e)}}};var tp=t=>{const e=JSON.stringify(t);return e!==_a&&(_a=e,wn=ep(t)),wn.refresh(),wn};function sp({nodes:t},e){const s=tp(e),n=new Map,i=new Map,r=u=>{var f;return(f=i.get(u))!=null?f:[]},a=u=>{var f;return(f=n.get(u))!=null?f:[]},o=t.map(({attributes:u,state:f})=>({attributes:u,state:f,type:u.type.toLowerCase(),id:u.id,level:-1,results:[]}));let l;o.forEach(u=>{n.set(u.id,u),!l&&u.type==="output"&&(l=u,l.level=0),u.attributes.refs.forEach(f=>{i.has(f.id)?i.set(f.id,[...i.get(f.id),{n:u,in:f.in,out:f.out}]):i.set(f.id,[{n:u,in:f.in,out:f.out}])})});function c(u){if(u!=null&&u.buckets)return u.buckets;let f=[u],d=[u];for(;f.length;){const m=f.shift(),v=r(m.id);if(v!=null&&v.length)for(const{n:g}of v)g.level=m.level+1,d.includes(g)||d.push(g),f.push(g)}const p=[];for(const m of d)p[m.level]?p[m.level].push(m):p[m.level]=[m];return u.buckets=p,p}function h(u){var p;if(u.paramaters)return u.paramaters;let f={};const d=ds.get(u.type);for(const[m,v]of Object.entries(u.state))(p=d.parameters[m])!=null&&p.internal?f[m]=v:f[m]=()=>v;for(const m of r(u.id)){const v=ds.get(m.n.type);v.outputs[0]==="plant"?f[m.in]=()=>m.n.results[0]:v!=null&&v.computeValue?f[m.in]=(g=1)=>{const x=h(m.n);return v.computeValue(x,s,g)}:f[m.in]=(g=1)=>{const x={},w=h(m.n);return Object.keys(w).forEach(k=>{x[k]=w[k](g)}),x}}return u.paramaters=f,f}return{nodes:o,outputNode:l,getNodeRef:r,getNode:a,getBucketsForNode:c,constructParametersForNode:h,ctx:s}}async function np(t,e){const s=sp(t,e),n=s.ctx,i=s.getBucketsForNode(s.outputNode);for(const l of i.reverse())for(const c of l){const h=ds.get(c.type);if(h){let u=s.constructParametersForNode(c);if(h!=null&&h.computeStem){n._id=c.id;const f=h.computeStem(u,n);c.results=Array.isArray(f)?f:[f]}if(h!=null&&h.computeGeometry){const f=h.computeGeometry(u,c.results[0],n);c.results[0]=Se(Se({},c.results[0]),f)}}else console.warn("Missing Type",c.type),console.log(ds)}const{stems:r,instances:a}=s.outputNode.paramaters.input();let o=Ws(...r.map(l=>al(l.skeleton,n.getSetting("stemResX"))));if(a){const l=a==null?void 0:a.map(c=>wf(c)).flat();o=Ws(o,...l)}return{stems:r,geometry:yf(o)}}function ip(){return new Worker("/_app/assets/worker.126632ab.js",{type:"module"})}const ll=Symbol("Comlink.proxy"),rp=Symbol("Comlink.endpoint"),ap=Symbol("Comlink.releaseProxy"),Wn=Symbol("Comlink.thrown"),cl=t=>typeof t=="object"&&t!==null||typeof t=="function",op={canHandle:t=>cl(t)&&t[ll],serialize(t){const{port1:e,port2:s}=new MessageChannel;return ul(t,e),[s,[s]]},deserialize(t){return t.start(),dl(t)}},lp={canHandle:t=>cl(t)&&Wn in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},hl=new Map([["proxy",op],["throw",lp]]);function ul(t,e=self){e.addEventListener("message",function s(n){if(!n||!n.data)return;const{id:i,type:r,path:a}=Object.assign({path:[]},n.data),o=(n.data.argumentList||[]).map(It);let l;try{const c=a.slice(0,-1).reduce((u,f)=>u[f],t),h=a.reduce((u,f)=>u[f],t);switch(r){case"GET":l=h;break;case"SET":c[a.slice(-1)[0]]=It(n.data.value),l=!0;break;case"APPLY":l=h.apply(c,o);break;case"CONSTRUCT":{const u=new h(...o);l=fp(u)}break;case"ENDPOINT":{const{port1:u,port2:f}=new MessageChannel;ul(t,f),l=up(u,[u])}break;case"RELEASE":l=void 0;break;default:return}}catch(c){l={value:c,[Wn]:0}}Promise.resolve(l).catch(c=>({value:c,[Wn]:0})).then(c=>{const[h,u]=vi(c);e.postMessage(Object.assign(Object.assign({},h),{id:i}),u),r==="RELEASE"&&(e.removeEventListener("message",s),fl(e))})}),e.start&&e.start()}function cp(t){return t.constructor.name==="MessagePort"}function fl(t){cp(t)&&t.close()}function dl(t,e){return Xn(t,[],e)}function Ns(t){if(t)throw new Error("Proxy has been released and is not useable")}function Xn(t,e=[],s=function(){}){let n=!1;const i=new Proxy(s,{get(r,a){if(Ns(n),a===ap)return()=>Rt(t,{type:"RELEASE",path:e.map(o=>o.toString())}).then(()=>{fl(t),n=!0});if(a==="then"){if(e.length===0)return{then:()=>i};const o=Rt(t,{type:"GET",path:e.map(l=>l.toString())}).then(It);return o.then.bind(o)}return Xn(t,[...e,a])},set(r,a,o){Ns(n);const[l,c]=vi(o);return Rt(t,{type:"SET",path:[...e,a].map(h=>h.toString()),value:l},c).then(It)},apply(r,a,o){Ns(n);const l=e[e.length-1];if(l===rp)return Rt(t,{type:"ENDPOINT"}).then(It);if(l==="bind")return Xn(t,e.slice(0,-1));const[c,h]=wa(o);return Rt(t,{type:"APPLY",path:e.map(u=>u.toString()),argumentList:c},h).then(It)},construct(r,a){Ns(n);const[o,l]=wa(a);return Rt(t,{type:"CONSTRUCT",path:e.map(c=>c.toString()),argumentList:o},l).then(It)}});return i}function hp(t){return Array.prototype.concat.apply([],t)}function wa(t){const e=t.map(vi);return[e.map(s=>s[0]),hp(e.map(s=>s[1]))]}const pl=new WeakMap;function up(t,e){return pl.set(t,e),t}function fp(t){return Object.assign(t,{[ll]:!0})}function vi(t){for(const[e,s]of hl)if(s.canHandle(t)){const[n,i]=s.serialize(t);return[{type:"HANDLER",name:e,value:n},i]}return[{type:"RAW",value:t},pl.get(t)||[]]}function It(t){switch(t.type){case"HANDLER":return hl.get(t.name).deserialize(t.value);case"RAW":return t.value}}function Rt(t,e,s){return new Promise(n=>{const i=dp();t.addEventListener("message",function r(a){!a.data||!a.data.id||a.data.id!==i||(t.removeEventListener("message",r),n(a.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:i},e),s)})}function dp(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const{DEV:pp=!1}={VITE_API_URL:"https://plantarium.fly.dev",VITE_SVELTEKIT_APP_VERSION:"1652748379995",VITE_SVELTEKIT_APP_VERSION_FILE:"_app/version.json",VITE_SVELTEKIT_APP_VERSION_POLL_INTERVAL:"0",VITE_SVELTEKIT_AMP:"",BASE_URL:"/_app/",MODE:"production",DEV:!1,PROD:!0};var ml=()=>{if(!("window"in globalThis))return;const t=dl(new ip);let e;return{async executeNodeSystem(s,n){if(e)return e;e=pp?np(s,n):t.executeNodeSystem(s,n);const i=await e;return e=void 0,i}}};const mp=(t,e)=>s=>Math.min(Math.max(s,t),e),vp=t=>{const e=10**t;return s=>Math.floor(s*e)/e},gp=mp(-1e5,1e5),yp=vp(1),Ls=t=>gp(yp(t));class vl{constructor({x1:e=0,y1:s=0,x2:n=0,y2:i=0},r){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x1=e,this.y1=s,this.x2=n,this.y2=i,this.system=r.node.system,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("viewbox","0 0 100 100"),this.svg.setAttribute("width","100"),this.svg.setAttribute("height","100"),this.svg.style.overflow="visible",this.svg.style.position="absolute",this.svg.style.top="3.5px",this.svg.style.pointerEvents="none",this.svg.style.zIndex="-1",r.view.wrapper.append(this.svg),this.path=document.createElementNS("http://www.w3.org/2000/svg","path"),this.path.classList.add("node-connection-path"),this.path.setAttribute("vector-effect","non-scaling-stroke"),this.path.setAttribute("d",`
      M 0 0
      C 50 0 
        50 100
				100  100
      `),this.svg.appendChild(this.path),this.setPosition()}setPosition({x1:e=this.x1,y1:s=this.y1,x2:n=this.x2,y2:i=this.y2}={}){var o;this.x1=Ls(e),this.y1=Ls(s),this.x2=Ls(n),this.y2=Ls(i);const r=this.x2-this.x1+3.5,a=this.y2-this.y1;(o=this==null?void 0:this.hoverPath)==null||o.setAttribute("d",`
      M 0 0
      C ${r/2} 0 
        ${r/2} ${a}
				${r}  ${a}
      `),this.path.setAttribute("d",`
      M 0 0
      C ${r/2} 0 
        ${r/2} ${a}
				${r}  ${a}
      `)}remove(){var e;this.path.remove(),(e=this==null?void 0:this.hoverPath)==null||e.remove(),this.system.save()}}class _p extends vl{constructor(e){super({},e.output),this.connection=e,this.input=e.input.view,this.output=e.output.view,this.hoverPath=document.createElementNS("http://www.w3.org/2000/svg","path"),this.hoverPath.classList.add("node-connection-hover"),this.hoverPath.setAttribute("vector-effect","non-scaling-stroke"),this.svg.append(this.hoverPath),this.hoverPath.addEventListener("mouseover",()=>{const{activeNode:n}=this.system.view;n&&n.view.active&&n.view.hoveredConnection!==this&&this.handleNodeOver(n)}),this.hoverPath.addEventListener("mouseout",()=>{const{activeNode:n}=this.system.view;this.handleNodeOut(n)}),e.input.node.system.view.colorStore.on(e.output.type,n=>{this.path.style.stroke=n})}handleNodeOver(e){this.connection.isNodeJoinable(e)&&(e.view.hoveredConnection=this,this.path.classList.add("hover-active"))}handleNodeOut(e){e&&e.view.hoveredConnection===this&&delete e.view.hoveredConnection,this.path.classList.remove("hover-active")}remove(){super.remove()}}function wp(t){if(!bp(t))throw new Error("panzoom requires DOM element to be attached to the DOM tree");const s=t.parentElement;return t.scrollTop=0,{getBBox:r,getOwner:i,applyTransform:a};function i(){return s}function r(){return{left:0,top:0,width:t.clientWidth,height:t.clientHeight}}function a(o){t.style.transformOrigin="0 0 0",t.style.transform="matrix("+o.scale+", 0, 0, "+o.scale+", "+o.x+", "+o.y+")"}}function bp(t){return t&&t.parentElement&&t.style}function xp(t,e,s){typeof s!="object"&&(s={});const n=typeof s.minVelocity=="number"?s.minVelocity:5,i=typeof s.amplitude=="number"?s.amplitude:.25,r=typeof s.cancelAnimationFrame=="function"?s.cancelAnimationFrame:Mp(),a=typeof s.requestAnimationFrame=="function"?s.requestAnimationFrame:Ep();let o,l;const c=342;let h,u,f,d,p,m,v,g;return{start:w,stop:k,cancel:x};function x(){r(h),r(g)}function w(){o=t(),d=v=u=p=0,l=new Date,r(h),r(g),h=a(y)}function y(){const $=Date.now(),P=$-l;l=$;const D=t(),j=D.x-o.x,B=D.y-o.y;o=D;const z=1e3/(1+P);u=.8*j*z+.2*u,p=.8*B*z+.2*p,h=a(y)}function k(){r(h),r(g);const $=t();f=$.x,m=$.y,l=Date.now(),(u<-n||u>n)&&(d=i*u,f+=d),(p<-n||p>n)&&(v=i*p,m+=v),g=a(b)}function b(){const $=Date.now()-l;let P=!1,D=0,j=0;d&&(D=-d*Math.exp(-$/c),D>.5||D<-.5?P=!0:D=d=0),v&&(j=-v*Math.exp(-$/c),j>.5||j<-.5?P=!0:j=v=0),P&&(e(f+D,m+j),g=a(b))}}function Mp(){return typeof cancelAnimationFrame=="function"?cancelAnimationFrame:clearTimeout}function Ep(){return typeof requestAnimationFrame=="function"?requestAnimationFrame:function(t){return setTimeout(t,16)}}const kp=.2;function Sp(t,e){const s=wp(t),n=s.getOwner(),i={x:0,y:0};let r=!1;const a={x:0,y:0,scale:1},o=typeof e.pinchSpeed=="number"?e.pinchSpeed:1,l=e.bounds,c=typeof e.maxZoom=="number"?e.maxZoom:Number.POSITIVE_INFINITY,h=typeof e.minZoom=="number"?e.minZoom:0,u=typeof e.boundsPadding=="number"?e.boundsPadding:.05,f=typeof e.zoomSpeed=="number"?e.zoomSpeed:kp;let d=ba(e.transformOrigin);Tp(l);let p,m=!1,v=!1,g,x,w;const y=xp(ie,me,e.smoothScroll);let k,b=!1;J();const $={dispose:O,moveBy:we,moveTo:be,smoothMoveTo:se,centerOn:Y,zoomTo:bs,zoomAbs:Ie,pause:B,resume:z,isPaused:C,getTransform:Q,setTransform:q,getTransformOrigin:te,setTransformOrigin:ce},P=typeof e.initialX=="number"?e.initialX:a.x,D=typeof e.initialY=="number"?e.initialY:a.y,j=typeof e.initialZoom=="number"?e.initialZoom:a.scale;return(P!=a.x||D!=a.y||j!=a.scale)&&Ie(P,D,j),$;function B(){Me(),b=!0}function z(){b&&(J(),b=!1)}function C(){return b}function N(U,G){return i.x=U,i.y=G,i}function q(U,G,ee){a.x=U,a.y=G,a.scale=ee,xe()}function Q(){return a}function te(){return d}function ce(U){d=ba(U)}function ie(){return{x:a.x,y:a.y}}function be(U,G){a.x=U,a.y=G,ke(),xe()}function we(U,G){be(a.x+U,a.y+G)}function ke(){const U=Oe();if(!U)return;let G=!1;const ee=Ce();let ue=U.left-ee.right;return ue>0&&(a.x+=ue,G=!0),ue=U.right-ee.left,ue<0&&(a.x+=ue,G=!0),ue=U.top-ee.bottom,ue>0&&(a.y+=ue,G=!0),ue=U.bottom-ee.top,ue<0&&(a.y+=ue,G=!0),G}function Oe(){if(!!l){if(typeof l=="boolean"){const U=n.getBoundingClientRect(),G=U.width,ee=U.height;return{left:G*u,top:ee*u,right:G*(1-u),bottom:ee*(1-u)}}return l}}function Ce(){const U=s.getBBox(),G=$e(U.left,U.top);return{left:G.x,top:G.y,right:U.width*a.scale+G.x,bottom:U.height*a.scale+G.y}}function $e(U,G){return{x:U*a.scale+a.x,y:G*a.scale+a.y}}function xe(){r=!0,p=window.requestAnimationFrame(Ve)}function Te(U,G,ee){if(xn(U)||xn(G)||xn(ee))throw new Error("zoom requires valid numbers");const ue=a.scale*ee;if(ue<h){if(a.scale===h)return;ee=h/a.scale}if(ue>c){if(a.scale===c)return;ee=c/a.scale}const Ze=N(U,G);a.x=Ze.x-ee*(Ze.x-a.x),a.y=Ze.y-ee*(Ze.y-a.y),l&&u===1&&h===1?(a.scale*=ee,ke()):ke()||(a.scale*=ee),xe()}function Ie(U,G,ee){const ue=ee/a.scale;Te(U,G,ue)}function Y(U){const G=U.ownerSVGElement;if(!G)throw new Error("ui element is required to be within the scene");const ee=U.getBoundingClientRect(),ue=ee.left+ee.width/2,Ze=ee.top+ee.height/2,ft=G.getBoundingClientRect(),xs=ft.width/2-ue,Ms=ft.height/2-Ze;_e(xs,Ms)}function se(U,G){_e(U-a.x,G-a.y)}function _e(U,G){return we(U,G)}function me(U,G){be(U,G)}function O(){Me()}function J(){n.addEventListener("mousedown",Si,{passive:!0}),n.addEventListener("dblclick",ki,{passive:!1}),n.addEventListener("touchstart",Ge,{passive:!0}),n.addEventListener("keydown",ut),n.addEventListener("wheel",Ii,{passive:!0}),xe()}function Me(){n.removeEventListener("wheel",Ii),n.removeEventListener("mousedown",Si),n.removeEventListener("keydown",ut),n.removeEventListener("dblclick",ki),n.removeEventListener("touchstart",Ge),p&&(window.cancelAnimationFrame(p),p=0),y.cancel(),Pi(),Ll(),Di()}function Ve(){r&&ys()}function ys(){r=!1,s.applyTransform(a),p=0,e.onTransform&&e.onTransform(a)}function ut(U){let G=0;if(U.keyCode===38||U.keyCode===40||U.keyCode===37||U.keyCode===39||(U.keyCode===189||U.keyCode===109?G=1:(U.keyCode===187||U.keyCode===107)&&(G=-1)),G){const ee=Ni(G*100),ue=d?tn():_s();bs(ue.x,ue.y,ee)}}function _s(){const U=n.getBoundingClientRect();return{x:U.width/2,y:U.height/2}}function Ge(U){if(yt(U),U.touches.length===1)return Vt(U);U.touches.length===2&&(w=Ei(U.touches[0],U.touches[1]),k=!0,xi())}function yt(U){U.stopPropagation(),U.preventDefault()}function _t(U){U.preventDefault(),U.stopPropagation()}function Vt(U){const G=U.touches[0],ee=wt(G),ue=N(ee.x,ee.y);g=ue.x,x=ue.y,y.cancel(),xi()}function xi(){m||(m=!0,document.addEventListener("touchmove",Mi),document.addEventListener("touchend",ws),document.addEventListener("touchcancel",ws))}function Mi(U){if(U.touches.length===1){U.stopPropagation();const G=U.touches[0],ee=wt(G),ue=N(ee.x,ee.y),Ze=ue.x-g,ft=ue.y-x;Ze!==0&&ft!==0&&Li(),g=ue.x,x=ue.y,_e(Ze,ft)}else if(U.touches.length===2){k=!0;const G=U.touches[0],ee=U.touches[1],ue=Ei(G,ee),Ze=1+(ue/w-1)*o,ft=wt(G),xs=wt(ee);if(g=(ft.x+xs.x)/2,x=(ft.y+xs.y)/2,d){const Ms=tn();g=Ms.x,x=Ms.y}bs(g,x,Ze),w=ue,U.stopPropagation(),U.preventDefault()}}function ws(U){if(U.touches.length>0){const G=wt(U.touches[0]),ee=N(G.x,G.y);g=ee.x,x=ee.y}}function Ei(U,G){const ee=U.clientX-G.clientX,ue=U.clientY-G.clientY;return Math.sqrt(ee*ee+ue*ue)}function ki(U){_t(U)}function Si(U){if(m)return U.stopPropagation(),!1;if(U.target!==n&&U.target!==t||!(U.button===1&&window.event!==null||U.button===0))return;y.cancel();const ee=wt(U),ue=N(ee.x,ee.y);return g=ue.x,x=ue.y,document.addEventListener("mousemove",Ti),document.addEventListener("mouseup",Ai),!1}function Ti(U){if(m||U.ctrlKey)return;Li();const G=wt(U),ee=N(G.x,G.y),ue=ee.x-g,Ze=ee.y-x;g=ee.x,x=ee.y,_e(ue,Ze)}function Ai(){Di(),Pi()}function Pi(){document.removeEventListener("mousemove",Ti),document.removeEventListener("mouseup",Ai),v=!1}function Ll(){document.removeEventListener("touchmove",Mi),document.removeEventListener("touchend",ws),document.removeEventListener("touchcancel",ws),v=!1,k=!1,m=!1}function Ii(U){y.cancel();let G=U.deltaY;U.deltaMode>0&&(G*=100);const ee=Ni(G);if(ee!==1){const ue=d?tn():wt(U);bs(ue.x,ue.y,ee)}}function wt(U){const G=n.getBoundingClientRect(),ee=U.clientX-G.left,ue=U.clientY-G.top;return{x:ee,y:ue}}function tn(){const U=n.getBoundingClientRect();return{x:U.width*d.x,y:U.height*d.y}}function bs(U,G,ee){return y.cancel(),Te(U,G,ee)}function Ni(U){const G=Math.sign(U),ee=Math.min(.25,Math.abs(f*U/128));return 1-G*ee}function Li(){v||(v=!0,y.start())}function Di(){v&&(k||y.stop())}}function ba(t){if(!!t){if(typeof t=="object")return(!qt(t.x)||!qt(t.y))&&xa(),t;xa()}}function xa(t){throw new Error(["Cannot parse transform origin.","Some good examples:",'  "center center" can be achieved with {x: 0.5, y: 0.5}','  "top center" can be achieved with {x: 0.5, y: 0}','  "bottom right" can be achieved with {x: 1, y: 1}'].join(`
`))}function Tp(t){const e=typeof t;if(e==="undefined"||e==="boolean")return;if(!(qt(t.left)&&qt(t.top)&&qt(t.bottom)&&qt(t.right)))throw new Error("Bounds object is not valid. It can be: undefined, boolean (true|false) or an object {left, top, right, bottom}")}function qt(t){return Number.isFinite(t)}function xn(t){return Number.isNaN?Number.isNaN(t):t!==t}function Ap(t,e){const s=t.x2<e.x1,n=t.x1>e.x2,i=t.y1>e.y2,r=t.y2<e.y1;return!(s||n||i||r)}var Pp=(t,e)=>e.type.includes(t.type)||e.type.includes("*");function Ys(t,e){if(t===void 0&&e===void 0)return;const s=Array.isArray(t)?"array":typeof t;if(s==="string"||s==="boolean"||s==="number")return t===e?void 0:e;if(Array.isArray(t)){const a=t.map((o,l)=>typeof e=="object"&&l in e?Ys(o,e[l]):e[l]);return!a.length||a.length===1&&!a[0]?void 0:a}if(!t)return e;const n=Object.keys(t),i={};let r=!1;if(n.forEach(a=>{const o=Ys(t[a],e[a]);o!==void 0&&(r=!0,i[a]=o)}),!!r)return i}function Ip(t,e){return[Ys(t,e),Ys(e,t)]}function Hs(t,e){const s=typeof t;if(s==="string"||s==="boolean"||s==="number")return e;if(Array.isArray(t))return t.map((n,i)=>e[i]?Hs(n,e[i]):n);if(typeof t=="object"){const n=Object.keys(e),i=Se({},t);return n.forEach(r=>{i[r]=Hs(t[r],e[r])}),i}}class Np{constructor(e,{input:s,output:n}){if(!n||!s)return;if(this.system=e,s.node.getChildren().includes(n.node))throw new Error("Circular reference");if(!Pp(n,s))throw new Error("Can't connect type "+s.type+" to "+n.type);this.output=n,this.input=s,e.options.view&&(this.view=new _p(this)),this.output.setConnection(this),this.input.setConnection(this),this.output.node.system.save()}joinNode(e){if(!this.isNodeJoinable(e))return;this.system.isPaused=!0,this.remove(),this.output.node.connectTo(e,0,e.getInputs()[0].key);const s=this.input.node.getInputs(),n=s.indexOf(this.input),i=s[n].key;e.connectTo(this.input.node,0,i),this.system.isPaused=!1,e.update()}isNodeJoinable(e){const s=this.input.type,n=this.output.type;if(this.input.node===e||this.output.node===e)return!1;const i=e.getInputs();if(!i.length||!i.find(a=>a.type.includes(n)))return!1;const r=e.outputs;return!(!r.length||!r.find(a=>s.includes(a.type)||s.includes("*")))}remove(){this.view&&this.view.remove(),this.input.removeConnection(),this.output.removeConnection(this)}deserialize(){return{id:this.input.node.attributes.id,out:this.indexOut,in:this.indexIn}}get indexOut(){return this.output.node.outputs.indexOf(this.output)}get indexIn(){return this.input.key}}class gi extends it{constructor(e,s){super(),this.outputs=[],this._state={},this.states={},this.inputData=[],this.enableUpdates=!0,this.refs=[],this.system=e;const{attributes:n,state:i={}}=s;this._state=i,this.attributes=n,this.id=n.id,this._compute=lu((r=this._state)=>this.compute(r))}get state(){return this._state}bindView(e){this.view=e,this.outputs.forEach(s=>s.bindView()),Object.values(this.states).forEach(s=>s.bindView())}setAttributes(e){this.enableUpdates&&this.system.history.addAction(),this.attributes=Se(Se({},this.attributes),e),this==null||this.view.updateViewPosition(),this.save()}compute(e){return e}getChildren(){return this.outputs.map(n=>n.connections).flat().map(n=>n.input.node)}getSockets(){return[...this.getInputs(),...this.outputs]}getInputs(){return Object.values(this.states).map(e=>e.getInput()).filter(e=>!!e)}setStateValue(e,s){this.states[e].setValue(s)}getStateValue(e){return this.state[e]}update(){!this.enableUpdates||(this.system.options.showUpdates&&this.view&&this.view.showUpdate(),this.computedData=this._compute(this.state),this.emit("computedData",this.computedData),this.refs.forEach(e=>{e.node.enableUpdates=!1,e.keyIn.forEach(s=>{this.system.options.deferCompute?e.node.setStateValue(s,{type:this.attributes.type,parameters:this.computedData}):e.node.setStateValue(s,this.computedData)}),e.node.enableUpdates=!0,e.node.update()}),this.save())}remove(){this.system.removeNode(this),this.destroyEventEmitter()}connectTo(e,s=0,n=e.getInputs()[0].key){var l,c,h;const i=this.outputs[s],r=(l=e.states[n])==null?void 0:l.getInput();if(!r)return;const a=new Np(this.system,{output:i,input:r});(c=i==null?void 0:i.view)==null||c.updatePosition(),(h=r==null?void 0:r.view)==null||h.updatePosition();const o=this.refs.find(u=>u.node.id===e.id&&u.indexOut===s);return o?o.keyIn=[...o.keyIn,n]:this.refs.push({node:e,keyIn:[n],indexOut:s}),this.update(),a}disconnectFrom(e,s,n){this.refs=this.refs.filter(i=>!(i.indexOut!==n||(i.keyIn.splice(i.keyIn.indexOf(s),1),i.keyIn.length===0))),this.update()}deserialize(){const e=Object.assign({},this.attributes);e.refs=this.outputs.map(n=>n.connections).flat().map(n=>n.deserialize());const s={};return Object.values(this.states).forEach(n=>{s[n.key]=n.getValue()}),JSON.parse(JSON.stringify({attributes:e,state:s}))}save(){this.system.save()}}class yi{constructor(e){this.inputs=[],this.outputs=[],this.active=!1,this.x=0,this.y=0,this.downX=0,this.downY=0,this.mDownX=0,this.mDownY=0,this.height=50,this.width=91,this.node=e,this.system=e.system,this.wrapper=document.createElement("div"),this.wrapper.style.minHeight=this.height+"px",this.wrapper.style.minWidth=this.width+"px",this.wrapper.classList.add("node-wrapper","node-type-"+e.attributes.type.toLowerCase()),this.wrapper.setAttribute("id","node-view-"+this.system.id+"-"+this.node.id),this.outputWrapper=document.createElement("div"),this.outputWrapper.classList.add("node-outputs-wrapper"),this.wrapper.append(this.outputWrapper);const s=document.createElement("p");s.innerHTML=e.attributes.name||e.attributes.type,s.classList.add("node-title"),this.wrapper.appendChild(s),this.stateWrapper=document.createElement("div"),this.stateWrapper.classList.add("node-state-wrapper"),this.wrapper.append(this.stateWrapper),e.system.view.nodeContainer.append(this.wrapper);const{pos:{x:n=0,y:i=0}={}}=e.attributes;this.x=n,this.y=i,this.bindEventListeners(),this.wrapper.style.left=n+"px",this.wrapper.style.top=i+"px",setTimeout(()=>{const{width:r,height:a}=this.wrapper.getBoundingClientRect();this.width=r/this.system.view.s,this.height=a/this.system.view.s,this.updateViewPosition(n,i)},10)}bindEventListeners(){this.wrapper.addEventListener("mousedown",e=>this.handleMouseDown(e)),this._unsubscribeMouseMove=this.system.view.on("mousemove",e=>this.handleMouseMove(e)),this._unsubscribeMouseUp=this.system.view.on("mouseup",()=>this.handleMouseUp())}removeEventListeners(){this._unsubscribeMouseMove(),this._unsubscribeMouseUp(),this.wrapper.addEventListener("mousedown",e=>this.handleMouseDown(e))}set state(e){this.wrapper.classList.remove("node-active","node-selected","node-dragging"),this.wrapper.classList.add("node-"+e),this._state=e}get state(){return this._state}handleMouseDown(e){var i,r,a,o;if(this.system.view.keyMap.space||e.button===2||e.target!==e.currentTarget)return;e.stopImmediatePropagation(),e.stopPropagation(),this.node.system.view.setActive(this.node,e);const{rmx:s,rmy:n}=this.system.view;this.mDownX=s,this.mDownY=n,this.downX=((r=(i=this.node.attributes)==null?void 0:i.pos)==null?void 0:r.x)||0,this.downY=((o=(a=this.node.attributes)==null?void 0:a.pos)==null?void 0:o.y)||0,this.active=!0,this.system.view.selectedNodes.length&&this.system.view.selectedNodes.forEach(l=>{l.view.active=!0,l.view.mDownX=s,l.view.mDownY=n,l.view.downX=l.view.x,l.view.downY=l.view.y})}handleMouseUp(){this.active=!1,this.hoveredConnection&&(this.hoveredConnection.connection.joinNode(this.node),delete this.hoveredConnection)}showUpdate(){this.wrapper.classList.add("is-updating"),setTimeout(()=>{this.wrapper.classList.remove("is-updating")},200)}handleMouseMove({mx:e,my:s,keys:n}){if(this.active){this.state="dragging";const i=n.ctrlKey?.02:1;let r=this.mDownX-e,a=this.mDownY-s;n.shiftKey&&(Math.abs(r)>Math.abs(a)?a=0:r=0);const o=Math.round((this.downX-r/this.system.view.s)*i)/i,l=Math.round((this.downY-a/this.system.view.s)*i)/i;this.setPosition(o,l)}}updateViewPosition(e=(r=>(r=(i=>(i=(n=>(n=this.node.attributes)==null?void 0:n.pos)())==null?void 0:i.x)())!=null?r:this.x)(),s=(l=>(l=(o=>(o=(a=>(a=this.node.attributes)==null?void 0:a.pos)())==null?void 0:o.y)())!=null?l:this.y)()){this.wrapper.style.left=e+"px",this.wrapper.style.top=s+"px",Object.values(this.node.states).forEach(c=>{var h;return(h=c==null?void 0:c.view)==null?void 0:h.updatePosition()}),this.node.outputs.forEach(c=>c.view.updatePosition())}setPosition(e,s){this.x=e,this.y=s,this.node.setAttributes({pos:{x:e,y:s}}),this.updateViewPosition()}remove(){this.removeEventListeners(),this.wrapper.remove()}}console.log({p:gf});const Lp=Ro;class Dp{constructor(e){this.nodeState=e,this.wrapper=document.createElement("div"),this.input=document.createElement("div"),this.wrapper.classList.add("node-state-single-wrapper"),this.input.classList.add("node-state-input");const s=e.template,n=s.label||e.key;if(typeof n=="string"){const i=document.createElement("p");i.className="state-label",i.innerHTML=n,this.wrapper.appendChild(i)}(s==null?void 0:s.label)===!1&&this.wrapper.classList.add("hide-label"),!s.external&&s.type!=="*"&&(this.element=Lp({target:this.input,template:s,value:e.getValue()}),this.element&&this.element.$on("change",({detail:i})=>{typeof i!="undefined"&&!Number.isNaN(i)&&this.nodeState.setValue(i)})),e.node.view.stateWrapper.appendChild(this.wrapper),this.wrapper.appendChild(this.input)}updateValue(){setTimeout(()=>{this.element&&(this.element.value=this.nodeState.getValue())},50)}updatePosition(){var e,s;this.rect=this.wrapper.getBoundingClientRect(),(s=(e=this.nodeState.getInput())==null?void 0:e.view)==null||s.updatePosition()}get y(){return this.rect.y-this.nodeState.node.view.y}get height(){return this.rect.height}setActive(e){this.wrapper.classList[e?"remove":"add"]("disabled")}}class $p{constructor(e){if(!e||!e.node)throw new Error("Somethings missing");this.input=e,this.node=e.node,this.wrapper=document.createElement("div"),this.wrapper.classList.add("node-input-wrapper"),e.type.forEach(s=>{this.wrapper.classList.add(`socket-type-${s==="*"?"all":s}`)}),e.state.view.wrapper.appendChild(this.wrapper),this.wrapper.addEventListener("mousedown",s=>{s.stopPropagation(),s.preventDefault();const n=this.input.connection;n?(n.remove(),this.node.system.view.createFloatingConnection(n.output)):this.node.system.view.createFloatingConnection(this.input)},!1),this.node.system.view.colorStore.on(e.type[0],s=>{const n=window.getComputedStyle(this.wrapper,null).getPropertyValue("background-color");this.wrapper.style.backgroundColor=n!=="rgba(0, 0, 0, 0)"?n:s})}updatePosition(){var e;this.rect=this.wrapper.getBoundingClientRect(),(e=this==null?void 0:this.connection)==null||e.setPosition({x2:this.x,y2:this.y})}remove(){this.wrapper.remove(),this.connection&&this.connection.remove()}set state(e){this.wrapper.classList.forEach(s=>{s.includes("socket-state-")&&this.wrapper.classList.remove(s)}),e&&e.length&&this.wrapper.classList.add("socket-state-"+e)}get x(){return this.node.view.x-3}get y(){const e=this.node.system.view;return(this.rect.y+this.rect.height/2-e.y-e.top)/e.s-e.height/2}}class ns{constructor(e,s,n){this.state=e,this.key=n,this.node=e.node,this.type=Array.isArray(s)?s:[s]}bindView(){this.view=new $p(this)}removeConnection(){const e=this.connection;delete this.connection,e&&e.remove(),this.node.setStateValue(this.key,void 0),this.state.setIsExternal(!1)}setConnection(e){this.connection&&this.connection.remove(),this.connection=e,this.view&&(this.view.connection=e.view),this.state.setIsExternal(!0)}remove(){this.view&&this.view.remove(),this.removeConnection()}}class _i extends it{constructor(e,s,n){var i;super(),this.node=e,this.key=s,this.template=n,this.isExternal=!1,this.value=(i=e.state[s])!=null?i:n.value,this.node._state[s]=this.value,this.template.internal||(this.input=new ns(this,n.type,s))}setIsExternal(e=!1){var s;this.isExternal=e,(s=this==null?void 0:this.view)==null||s.setActive(!e)}getValue(){return this.value}setValue(e=this.template.value){this.isExternal||(this.node.enableUpdates&&this.node.system.history.addAction(),this.value=e),this.node._state[this.key]=e,this.node.enableUpdates&&(this==null||this.view.updateValue(),this.node.update())}remove(){}getInput(){return this.input}bindView(){this.view=new Dp(this),this.input&&this.input.bindView()}}var Op={title:"Boolean",type:"boolean",outputs:["boolean"],parameters:{value:{type:"boolean",value:!1}},compute({value:t=!1}){return t}},Cp={title:"Math",type:"math",outputs:["number","number"],parameters:{mode:{type:"select",internal:!0,label:!1,value:"add",values:["add","multiply","subtract"]},a:{type:"number",value:0,label:!1},b:{type:"number",value:0,label:!1}},compute({mode:t,a:e,b:s}){switch(t){case"multiply":return e*s;case"subtract":return e-s;default:return e+s}}},Vp={title:"Number",type:"number",outputs:["number"],parameters:{value:{type:"number",internal:!0,label:!1,value:0}},compute({value:t=0}){return t}};class zp extends gi{constructor(e,s){super(e,s),this.states={input:new _i(this,"input",{type:"*"})},this.outputs=[]}compute({input:e}){return e}}class jp extends yi{constructor(e){super(e);const s=document.createElement("div");e.on("computedData",n=>{s.innerHTML="";const i=document.createElement("p");i.innerHTML=JSON.stringify(n,null," "),s.append(i)}),this.wrapper.appendChild(s)}}var Rp={title:"Debug",type:"debug",meta:{description:"Outputs any inputs for debug purposes"},node:zp,view:jp};class Fp extends gi{constructor(e,s){super(e,s),this.attributes.type="output",this.states={input:new _i(this,"input",{type:"*",external:!0,label:!1})},this.outputs=[]}compute({input:e}){return e}}class Bp extends yi{constructor(e){super(e);const s=document.createElement("p");s.style.margin="0px",s.style.padding="4px",s.style.color="white",s.style.fontWeight="bold",e.on("computedData",n=>{s.innerHTML=JSON.stringify(n,null,2)}),this.wrapper.appendChild(s)}}var Up={title:"Output",type:"output",meta:{description:"Outputs the final value"},node:Fp,view:Bp};const Mn={BooleanNode:Op,MathNode:Cp,NumberNode:Vp,DebugNode:Rp,OutputNode:Up};class qp{constructor(e){this.x=0,this.y=0,this.view=e,this.system=e.system,this.wrapper=document.createElement("div"),this.wrapper.classList.add("context-wrapper"),this.searchEl=new zo({target:this.wrapper}),this.searchEl.$on("input",({detail:s})=>{this.resolve(s)}),this.view.wrapper.append(this.wrapper),this.view.system.store.on("types",s=>this.updateTypes(s),20),this.wrapper.classList.add("cl-"+Math.floor(Math.random()*1e3)),this.view.on("keydown",({key:s})=>s==="Escape"&&this.hide())}updateTypes(e){console.log("SetTypes",{types:e}),this.searchEl.setItems(e.map(s=>({value:s.type||s.title,title:s.title})))}handleWindowClick(e){e.composedPath().includes(this.wrapper)||this.reject()}reject(){this.rej&&this.rej(),this.hide()}resolve(e){const s=this.system.store.getByType(e),{x:n,y:i}=this.view.projectWindowToLocal(this.x,this.y),r=n-this.view.width/2,a=i-this.view.height/2;s?this.res({attributes:{pos:{x:r,y:a},id:"",name:s.title,type:s.type,refs:[]},state:{value:void 0}}):this.reject(),this.hide()}hide(){this.searchEl.clear(),this.wrapper.classList.remove("context-visible"),this.wrapper.blur(),this.res=e=>e,this.reject=()=>{}}show({x:e,y:s,socket:n}){return this.x=e,this.y=s,this.socket=n,this.wrapper.style.left=e/this.system.view.width*100+"%",this.wrapper.style.top=s/this.system.view.height*100+"%",this.wrapper.classList.add("context-visible"),setTimeout(()=>{this.searchEl.focus()},20),new Promise((i,r)=>{this.res=i,this.rej=r})}}class Wp extends it{constructor(e){super(),this.mDownX=0,this.mDownY=0,this.downX=0,this.downY=0,this.isShiftKey=!1,this.view=e,this.wrapper=document.createElement("div"),this.wrapper.classList.add("box-selection-wrapper"),this.view.wrapper.append(this.wrapper),this.view.on("mousedown",({target:s,mx:n,x:i,my:r,y:a,keys:o})=>{var l;o.space||o.shiftKey||o.button===2||!o.ctrlKey||s&&!((l=s==null?void 0:s.className)!=null&&l.includes("nodesystem"))||(this.mDownX=n,this.mDownY=r,this.downX=i,this.downY=a,this.wrapper.style.left=n+"px",this.wrapper.style.top=r+"px",this.wrapper.style.width="0px",this.wrapper.style.height="0px",this.isShiftKey=o.shift,this.show())})}show(){this.wrapper.classList.add("box-selection-visible");const e=this.view.system.nodes.map(i=>{const{width:r,height:a}=i.view,{x:o,y:l}=i.view,c=o+this.view.width/2,h=l+this.view.height/2,u=c+r,f=h+a;return{n:i,state:i.view.state,x1:c,y1:h,x2:u,y2:f}});let s=[];const n=this.view.on("mousemove",({mx:i,my:r,x:a,y:o})=>{const{mDownX:l,mDownY:c,downX:h,downY:u,isShiftKey:f}=this,d={x1:Math.min(i,l),x2:Math.max(i,l),y1:Math.min(r,c),y2:Math.max(r,c)};this.wrapper.style.left=d.x1+"px",this.wrapper.style.top=d.y1+"px",this.wrapper.style.width=Math.abs(l-i)+"px",this.wrapper.style.height=Math.abs(c-r)+"px";const p={x1:Math.min(a,h),x2:Math.max(a,h),y1:Math.min(o,u),y2:Math.max(o,u)};s=e.filter(m=>Ap(p,m)?!0:(f||(m.state="normal",m.n.view.state="normal"),!1)).map(({n:m,state:v})=>(v!=="active"&&(v="selected",m.view.state="selected"),m))},5);this.view.once("mouseup",()=>{n(),this.hide(),this.emit("selection",s)})}projectBox(e){const{x:s,y:n}=this.view.projectWindowToLocal(e.x1,e.y1),{x:i,y:r}=this.view.projectWindowToLocal(e.x2,e.y2);return{x1:s,y1:n,x2:i,y2:r}}hide(){this.wrapper.classList.remove("box-selection-visible")}}class Xp{constructor(e){this.connections=[],this.output=e,this.node=e.node,this.wrapper=document.createElement("div"),this.wrapper.classList.add("node-output-wrapper"),this.wrapper.classList.add(`socket-type-${e.type}`),e.node.view.outputWrapper.appendChild(this.wrapper),this.wrapper.addEventListener("mousedown",s=>{s.stopPropagation(),s.preventDefault(),this.node.system.view.createFloatingConnection(this.output)},!1),this.node.system.view.colorStore.on(e.type,s=>{const n=window.getComputedStyle(this.wrapper,null).getPropertyValue("background-color");this.wrapper.style.backgroundColor=n!=="rgba(0, 0, 0, 0)"&&n!=="rgb(0,0,0)"?n:s})}remove(){this.wrapper.remove(),this.connections.forEach(e=>e.remove())}set state(e){this.wrapper.classList.forEach(s=>{s.includes("socket-state-")&&this.wrapper.classList.remove(s)}),e&&e.length&&this.wrapper.classList.add("socket-state-"+e)}updatePosition(){this.rect=this.wrapper.getBoundingClientRect(),this.output.connections.forEach(e=>e.view.setPosition({x1:this.x,y1:this.y}))}get x(){return this.node.view.x+this.node.view.width+3}get y(){const e=this.node.system.view;return(this.rect.y+this.rect.height/2-e.y-e.top)/e.s-e.height/2}}class zs{constructor(e,s){if(this.connections=[],this.node=e,this.type=s,Array.isArray(s))throw new Error("Output can only output one type, not "+s)}bindView(){this.view=new Xp(this)}connectTo(e){const s=this.node.outputs.indexOf(this);return this.node.connectTo(e.node,s,e.key)}removeConnection(e){const s=this.connections.indexOf(e);this.connections.splice(s,1),this.node.disconnectFrom(e.input.node,e.indexIn,e.indexOut),this.view&&this.view.connections.splice(s,1)}setConnection(e){this.connections.push(e),this.view&&this.view.connections.push(e.view)}remove(){this.connections.forEach(e=>e.remove())}}class Yp extends ah(vl,it){constructor(e,s={}){const{system:n}=e.node;super({},e),this.view=n.view,this.path.style.zIndex="999";const i=Array.isArray(e.type)?e.type[0]:e.type;n.view.colorStore.on(i,u=>{this.path.style.stroke=u}),e.view.updatePosition();const r=e.view.x,a=e.view.y;let o=r,l=a;s&&(o=s.x-n.view.width/2,l=s.y-n.view.height/2),this.setPosition({x1:r,y1:a,x2:o,y2:l}),this.dx2=this.x2,this.dy2=this.y2,this.isInput=e instanceof ns,this.allSockets=e instanceof ns?n.getOutputs(e.type):n.getInputs(e.type),this.allSockets.forEach(u=>u.view.state="potential");let c=this.allSockets.filter(u=>u.node.attributes.id!==e.node.attributes.id);c.forEach(u=>u.view.state="middle");const h="connection"in e?[e.connection]:e.connections;if(h&&!!h.length){const u=h.map(f=>[f.input,f.output]).flat();c=c.filter(f=>!u.includes(f))}this.potentialSockets=c,this.potentialSockets.forEach(u=>u.view.updatePosition()),this.potentialSockets.forEach(u=>u.view.state="highlight"),this._unsubMouseUp=this.view.on("mouseup",this.handleMouseUp.bind(this)),this._unsubMouseMove=this.view.on("mousemove",this.handleMouseMove.bind(this)),this.mdx=this.view.mx,this.mdy=this.view.my,this.socket=e,e.view.updatePosition()}handleMouseUp(e){const{x:s,y:n,keys:i}=e;this._unsubMouseUp(),this._unsubMouseMove(),this.allSockets.forEach(o=>o.view.state="");let r,a=0;this.socket instanceof ns&&this.hoveredSocket instanceof zs?(r=this.socket.key,a=this.hoveredSocket.node.outputs.indexOf(this.hoveredSocket)):this.socket instanceof zs&&this.hoveredSocket instanceof ns&&(r=this.hoveredSocket.key,a=this.socket.node.outputs.indexOf(this.socket)),this.hoveredSocket?(this.emit("connection",{keyIn:r,indexOut:a,inputNode:this.isInput?this.socket.node:this.hoveredSocket.node,outputNode:this.isInput?this.hoveredSocket.node:this.socket.node}),this.remove()):i.ctrlKey?this.view.addMenu.show({x:s,y:n,socket:this.socket}).then(o=>this.view.system.createNode(o)).then(o=>{this.socket instanceof zs?this.socket.node.connectTo(o,a,r):o.connectTo(this.socket.node,a,r)}).catch(()=>{}).finally(()=>{this.remove()}):this.remove()}handleMouseMove(e){const{x:s,y:n}=e;this.mdx||(this.mdx=s,this.mdy=n);const i=this.dx2+(s-this.mdx),r=this.dy2+(n-this.mdy),a=20,o=this.potentialSockets.map(l=>{const{x:c,y:h}=l.view;return{socket:l,distance:Math.abs(i-c)+Math.abs(r-h)}}).filter(l=>l.distance<a).sort((l,c)=>l.distance>c.distance?-1:1).map(l=>l.socket);if(o.length){const{x:l,y:c}=o[0].view;this.hoveredSocket=o[0],this.setPosition({x2:l,y2:c})}else this.hoveredSocket=void 0,this.setPosition({x2:i,y2:r})}remove(){super.remove(),this.system.isPaused=!1}}const Hp=[{color:"#a52a2a",name:"brown"},{color:"#008000",name:"green"},{color:"#4b0082",name:"indigo"},{color:"#f0e68c",name:"khaki"},{color:"#add8e6",name:"lightblue"},{color:"#e0ffff",name:"lightcyan"},{color:"#90ee90",name:"lightgreen"},{color:"#d3d3d3",name:"lightgrey"},{color:"#ffb6c1",name:"lightpink"},{color:"#ffffe0",name:"lightyellow"},{color:"#00ff00",name:"lime"},{color:"#ff00ff",name:"magenta"},{color:"#800000",name:"maroon"},{color:"#000080",name:"navy"},{color:"#808000",name:"olive"},{color:"#ffa500",name:"orange"},{color:"#ffc0cb",name:"pink"},{color:"#800080",name:"purple"},{color:"#800080",name:"violet"},{color:"#ff0000",name:"red"},{color:"#c0c0c0",name:"silver"},{color:"#ffffff",name:"white"}];class Gp extends it{constructor(){super(),this.colors={boolean:"#f00",number:"#fff",plant:"#65e2a0",vec3:"#6363C7"},this.index=0}setColors(e){for(const s in e)this.colors[s]=e[s]}setType(e){e in this.colors||(this.colors[e]=Hp[this.index].color,this.index++),this.emit(e,this.colors[e])}get(e){return this.colors[e]}on(e,s){return this.setType(e),s(this.colors[e]),super.on(e,s)}}let Wt,is;globalThis.document&&(typeof document.hidden!="undefined"?(is="visibilitychange",Wt="visibilityState"):typeof document.mozHidden!="undefined"?(is="mozvisibilitychange",Wt="mozVisibilityState"):typeof document.msHidden!="undefined"?(is="msvisibilitychange",Wt="msVisibilityState"):typeof document.webkitHidden!="undefined"&&(is="webkitvisibilitychange",Wt="webkitVisibilityState"));var Zp=t=>{globalThis.document&&(t(document[Wt]),document.addEventListener(is,function(){t(document[Wt])},!1))};class Jp extends it{constructor(e){var s,n,i,r;super(),this.colorStore=new Gp,this.width=0,this.height=0,this.top=0,this.left=0,this.x=window.innerWidth/2,this.y=window.innerHeight/2,this.s=1,this.mx=0,this.my=0,this.mdx=0,this.mdy=0,this.rmx=0,this.rmy=0,this.mouseDown=!1,this.keyMap={},this.selectedNodes=[],this.selectedNodesDown=[],this.clipboard=[],this.system=e,this.wrapper=(n=(s=e.options)==null?void 0:s.wrapper)!=null?n:document.createElement("div"),this.wrapper.classList.add("nodesystem-wrapper"),e.options.parent&&e.options.parent.appendChild(this.wrapper),this.transformWrapper=document.createElement("div"),this.transformWrapper.classList.add("nodesystem-transform"),this.wrapper.appendChild(this.transformWrapper),this.nodeContainer=document.createElement("div"),this.nodeContainer.classList.add("nodes-container"),this.transformWrapper.append(this.nodeContainer),this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("viewBox","0 0 1 1"),this.svg.setAttribute("height","1"),this.svg.setAttribute("width","1"),this.svg.setAttribute("preserveAspectRatio","none"),this.svg.style.transform=`scale(${(i=window.devicePixelRatio)!=null?i:1})`,this.transformWrapper.appendChild(this.svg),this.addMenu=new qp(this),this.boxSelection=new Wp(this),this.boxSelection.on("selection",a=>{this.selectedNodes=a}),this.dpr=(r=window.devicePixelRatio)!=null?r:1,this.bindEventListeners(),this.handleResize(),Zp(()=>{setTimeout(()=>{this.handleResize(),this.system.nodes.forEach(a=>{a.view.updateViewPosition()})},500)})}createFloatingConnection(e){new Yp(e,{x:this.mx,y:this.my}).once("connection",({inputNode:n,outputNode:i,keyIn:r,indexOut:a})=>{i.connectTo(n,a,r)})}setActive(e,{shiftKey:s=!1,ctrlKey:n=!1}={}){if(!e)this.activeNode&&(this.activeNode.view.state="normal",this.activeNode=void 0),this.selectedNodes.forEach(i=>i.view.state="normal"),this.selectedNodes=[];else if(s&&n){if(this.activeNode&&(this.activeNode.view.state="normal",this.activeNode=void 0),this.activeNode=e,this.activeNode.view.state="active",this.activeNode.outputs.length){const i=this.system.createNode({state:{},attributes:{type:"debug",id:"0",name:"debug",refs:[],pos:{x:this.activeNode.view.x+this.activeNode.view.width+10,y:this.activeNode.view.y}}});i.enableUpdates=!0,this.activeNode.connectTo(i,0,"input")}}else s?this.activeNode?(this.selectedNodes.push(this.activeNode),this.activeNode.view.state="selected",this.activeNode=e,this.activeNode.view.state="active"):(this.activeNode=e,this.activeNode.view.state="active"):this.activeNode?(this.selectedNodes.forEach(i=>i.view.state="normal"),this.selectedNodes=[],this.activeNode!==e&&(this.activeNode.view.state="normal",this.activeNode=e,this.activeNode.view.state="active")):(this.activeNode=e,this.activeNode.view.state="active")}getSelectedNodes(){return this.activeNode&&this.selectedNodes.includes(this.activeNode)?this.selectedNodes:this.activeNode?[...this.selectedNodes,this.activeNode]:[...this.selectedNodes]}projectLocalToWindow(e,s){const n=e+this.x,i=s+this.y,r=n*this.s,a=i*this.s;return{x:r,y:a}}projectWindowToLocal(e,s){const n=e-this.x,i=s-this.y,r=n/this.s,a=i/this.s;return{x:r,y:a}}setTransform({x:e=this.x,y:s=this.y,s:n=this.s}={}){this.x=e,this.y=s,this.s=n,this.panzoom.setTransform(e,s,n)}showAddMenu(){this.addMenu.show({x:this.rmx,y:this.rmy}).then(e=>{const s=this.system.createNode(e);this.setActive(s)}).catch()}bindEventListeners(){window.addEventListener("keydown",e=>this.handleKeyDown(e)),window.addEventListener("keyup",e=>this.handleKeyUp(e)),this.wrapper.addEventListener("mousemove",e=>this.handleMouseMove(e)),this.wrapper.addEventListener("contextmenu",e=>{e.preventDefault(),this.showAddMenu()}),this.wrapper.addEventListener("mousedown",e=>this.handleMouseDown(e)),this.wrapper.addEventListener("touchdown",e=>this.handleMouseDown(e)),this.wrapper.addEventListener("mouseup",e=>this.handleMouseUp(e)),window.addEventListener("resize",Js(()=>this.handleResize(),10)),this.panzoom=Sp(this.transformWrapper,{minZoom:.2,maxZoom:5,onTransform:({x:e,y:s,scale:n})=>{this.x=e,this.y=s,this.s=n;const i=(n-.2)/5/2,r=n*this.height*.02,a=n*this.width*.02;this.wrapper.style.setProperty("--scale",Math.abs(i)+""),this.wrapper.style.setProperty("--scale-x",r+"%"),this.wrapper.style.setProperty("--scale-y",a+"%"),this.wrapper.style.setProperty("--pos-x",`${e}px`),this.wrapper.style.setProperty("--pos-y",`${s}px`),this.system.setMetaData({transform:{x:e,y:s,s:n}})}})}handleResize(){const{width:e,height:s,top:n,left:i}=this.wrapper.getBoundingClientRect();this.width=e,this.height=s,this.top=n,this.left=i,this.emit("resize",{width:e,height:s})}handleMouseMove(e){this.ev=e;const{clientX:s,clientY:n,shiftKey:i,ctrlKey:r}=e;this.rmx=s-this.left,this.rmy=n-this.top;const{x:a,y:o}=this.projectWindowToLocal(this.rmx,this.rmy);this.mx=a,this.my=o,this.emit("mousemove",{x:a,y:o,mx:this.rmx,my:this.rmy,keys:Je(Se({},this.keyMap),{shiftKey:i,ctrlKey:r})})}handleMouseDown(e){const{shiftKey:s,ctrlKey:n,clientX:i,clientY:r,button:a,target:o}=e;s||this.setActive(),e.path&&![...e.path].includes(this.addMenu.wrapper)&&(this.addMenu.hide(),e.preventDefault()),this.mouseDown=!0,this.rmx=i-this.left,this.rmy=r-this.top;const{x:l,y:c}=this.projectWindowToLocal(this.rmx,this.rmy);this.selectedNodesDown=this.selectedNodes.map(h=>[h.view.x,h.view.y]),this.emit("mousedown",{x:l,y:c,mx:this.rmx,my:this.rmy,target:o,keys:Je(Se({},this.keyMap),{shiftKey:s,ctrlKey:n,button:a})})}handleMouseUp({clientX:e,clientY:s,shiftKey:n,ctrlKey:i}){this.mouseDown=!1;const r=e-this.left,a=s-this.top;this.emit("mouseup",{x:r,y:a,keys:Je(Se({},this.keyMap),{shiftKey:n,ctrlKey:i})})}handleKeyUp({key:e}){e===" "&&(e="space"),delete this.keyMap[e&&e.toLowerCase()],this.emit("keyup",{key:e,keys:this.keyMap})}handleKeyDown({key:e,ctrlKey:s,shiftKey:n}){switch(e=e===" "?"space":e.toLowerCase(),this.keyMap[e&&e.toLowerCase()]=!0,e==="space"&&this.ev&&this.handleMouseDown(this.ev),e){case"escape":this.addMenu.hide();break;case"a":n&&this.showAddMenu();break;case"c":if(n&&s)window.confirm("Clear Storage?")&&(localStorage.clear(),window.location.reload());else if(s){const i=this.selectedNodes.splice(0);this.activeNode&&!i.includes(this.activeNode)&&i.push(this.activeNode),this.clipboard=i.map(r=>r.deserialize()).map(r=>(r.attributes.pos.x-=this.mx,r.attributes.pos.y-=this.my,r))}else this.selectedNodes.length&&this.activeNode&&this.selectedNodes[0].connectTo(this.activeNode);break;case"f":this.setTransform({x:0,y:0,s:1});break;case"g":this.keyMap.g||(this.mdx=this.mx,this.mdy=this.my,this.selectedNodesDown=this.selectedNodes.map(i=>[i.view.x,i.view.y]));break;case"x":this.activeNode&&(s?(this.system.spliceNode(this.activeNode),this.selectedNodes.forEach(i=>this.system.spliceNode(i))):(this.system.removeNode(this.activeNode),this.selectedNodes.forEach(i=>i.remove())));break;case"z":this.system.history&&s&&(n?this.system.history.redo():this.system.history.undo());break;case"l":this.activeNode&&(console.log(this.activeNode),console.log(this.activeNode.deserialize()));break;case"v":s&&this.clipboard.map(i=>{const{pos:{x:r=0,y:a=0}={}}=i.attributes;return i.attributes.pos={x:r+this.mx,y:a+this.my},i}).forEach(i=>this.system.createNode(i));break}this.emit("keydown",{key:e,keys:Je(Se({},this.keyMap),{ctrlKey:s})})}}const En=je("NodeFactory");class Kp{constructor(e){this.id=ph(),this.system=e,En("Initialized")}reset(){this.id.reset(),En("Reset id generator")}create(e){const{attributes:s}=e,n=this.system.store.getByType(s.type.toLowerCase());s.id=this.id(+s.id);const i=new n.node(this.system,e);if(this.system.options.view&&n.view){const r=new n.view(i);i.bindView(r)}return n.type==="output"&&this.system.setOutputNode(i),En(`Created node with type ${s.type}`,e),i}}const Ds=je("NodeHistory");class Qp{constructor(e){this.system=e,this.history=[],this.historyIndex=-1,this.isApplyingChanges=!1,Ds("Initialized")}addAction(){!this.system.isLoaded||this.isApplyingChanges||(this._timeout?clearTimeout(this._timeout):this.prevState=this.system.serialize().nodes,this._timeout=setTimeout(()=>{this._addAction(),this._timeout=void 0},200))}_addAction(){if(Ds("Register History Step"),this.isApplyingChanges)return;this.historyIndex!==this.history.length-1&&(this.history.length=this.historyIndex+1);const e=this.system.serialize().nodes,[s,n]=Ip(this.prevState,e);!n||!s||(this.history.push({previous:n,next:s}),this.history.length>60&&(this.history=this.history.reverse().slice(0,60).reverse()),this.historyIndex=this.history.length-1)}serialize(){return{steps:this.history,index:this.historyIndex}}deserialize(e){this.historyIndex=e.index,this.history=e.steps}undo(){if(this.isApplyingChanges)return;if(this.isApplyingChanges=!0,this.historyIndex<0){Ds("Reached beginning of Stack"),this.isApplyingChanges=!1;return}const{previous:e}=this.history[this.historyIndex],s=this.system.serialize(),n=Hs(s.nodes,e);s.nodes=n,this.system.load(s),this.historyIndex--,this.isApplyingChanges=!1}redo(){if(this.isApplyingChanges)return;if(this.isApplyingChanges=!0,this.historyIndex>=this.history.length-1){Ds("Reached end of Stack"),this.isApplyingChanges=!1;return}const{next:e}=this.history[this.historyIndex+1],s=this.system.serialize(),n=Hs(s.nodes,e);s.nodes=n,this.system.load(s),this.historyIndex++,this.isApplyingChanges=!1}}class em{constructor(e){this.system=e}parseSystem(e){const{nodes:s}=e,n=new Map,i=s.map(r=>{const a=this.system.factory.create(r);return a.enableUpdates=!1,n.set(a.id,a),a});return i.forEach(r=>{r.attributes.refs&&r.attributes.refs.forEach(a=>{const o=n.get(a.id);if(!o)throw new Error(`Failed ref: from ${r.attributes.name||r.attributes.id} to ${a.id} `);r.connectTo(o,a.out,a.in)})}),i.forEach(r=>{r.enableUpdates=!0,r.update()}),i}parseType(e){const{compute:s,meta:n,outputs:i,title:r,parameters:a={}}=e,o=class extends gi{constructor(c,h){if(super(c,h),s&&(this.compute=s),i){const u=Array.isArray(i)?i:[i];this.outputs=u.map(f=>new zs(this,f))}Object.entries(a).forEach(([u,f])=>{this.states[u]=new _i(this,u,f)})}},l=Object.values(a).filter(c=>c.internal!==!0).map(c=>c.type);if(this.system.options.view){const c=class extends yi{constructor(u){super(u)}};return Je(Se({},e),{inputs:l,title:r,meta:n,node:o,view:c})}return Je(Se({inputs:l},e),{title:r,meta:n,node:o})}getData(){return{meta:this.system.meta,nodes:this.system.nodes.map(e=>e.deserialize())}}}const tm=je("NodeTypeStore");class sm extends it{constructor(){super(),this.types=[],this.typeMap={}}add(e){tm("register new type "+e.title,e),this.types=[...this.types.filter(s=>s.type.toLowerCase()!==e.type.toLowerCase()),e],this.typeMap[e.type.toLowerCase()]=e,this.emit("types",this.types),this.emit("type",e)}clear(){this.typeMap={},this.types=[],this.emit("types",this.types)}getByType(e){if(e in this.typeMap)return this.typeMap[e];if(e.toLowerCase()in this.typeMap)return this.typeMap[e.toLowerCase()];throw console.log({typeMap:this.typeMap}),new Error("NodeTypeStore: type "+e+" does not exist")}}var nm=Object.defineProperty,im=Object.getOwnPropertyDescriptor,rm=(t,e,s,n)=>{for(var i=n>1?void 0:n?im(e,s):e,r=t.length-1,a;r>=0;r--)(a=t[r])&&(i=(n?a(e,s,i):a(i))||i);return n&&i&&nm(e,s,i),i};let am=0;const Ft=je("NodeSystem");class gl extends it{constructor(e={}){super(),this.parser=new em(this),this.meta={lastSaved:Date.now()},this.isLoaded=!1,this.isPaused=!1,this.nodes=[],this.states=[],this.id=am++;const{view:s=!1,wrapper:n,defaultNodes:i=!1,registerNodes:r=!1,connectionColors:a=!1,showUpdates:o=!1,deferCompute:l=!1}=e;this.options={view:s,wrapper:n,showUpdates:o,deferCompute:l};try{if(Ft(`Instantiated id:${this.id}`),this.store=new sm,this.factory=new Kp(this),this.history=new Qp(this),s&&(this.view=new Jp(this),a&&this.view.colorStore.setColors(a)),i){const c=[];i===!0?c.push(...Object.entries(Mn).map(h=>h[1])):Array.isArray(i)&&i.length&&i.forEach(h=>{typeof h=="string"&&h in Mn&&c.push(Mn[h])}),c.forEach(h=>this.registerNodeType(h))}r&&r.length&&r.forEach(c=>this.registerNodeType(c))}catch(c){console.warn("Error Loading",c),this.emit("error",{type:"init",error:c})}}get result(){return this._result}set result(e){this._result=e,this.isLoaded&&this.emit("result",e)}setMetaData(e){this.meta=Se(Se({},this.meta),e),this.save()}load(e){var s;if(Ft("Loading NodeSystemData",{systemData:e}),!e){this.isLoaded=!0;return}try{this.isLoaded=!1,this.isPaused=!0,this.nodes.forEach(i=>i.enableUpdates=!1),this.nodes.forEach(i=>i.remove()),this.factory.reset();const n=this.parser.parseSystem(e);return this.addNodes(n),this.meta=e.meta||{lastSaved:0},this.meta.lastSaved=Date.now(),(s=this==null?void 0:this.view)==null||s.setTransform(this.meta.transform),Ft(`Loaded NodeSystemData with ${n.length} Nodes`,e),"history"in e&&this.history.deserialize(e.history),this.isPaused=!1,this.isLoaded=!0,this.result=this._result,this}catch(n){console.warn("Error",n),this.emit("error",{type:"loading",error:n})}}serialize(){return Je(Se({},this.parser.getData()),{history:this.history.serialize(),meta:this.meta})}save(){this.isLoaded&&(this.meta.lastSaved=Date.now(),Ft("save system",this.serialize()),this.emit("save",this.serialize()))}setOutputNode(e){this.outputNode&&this.outputNode.remove(),this.outputNode=e,e.on("computedData",s=>{this.options.deferCompute?this.result={type:"output",parameters:s}:this.result=s})}addNodes(e){e.forEach(s=>this.addNode(s))}addNode(e){this.history.addAction(),this.nodes.push(e),this.save()}removeNode(e){this.history.addAction(),e.enableUpdates=!1,e.view.remove(),Object.values(e.states).forEach(s=>s.remove()),e.outputs.forEach(s=>s.remove()),e.getInputs().forEach(s=>s.remove()),this.nodes=this.nodes.filter(s=>s!==e),this.save(),Ft(`Removed Node id:${e.id} type:${e.attributes.type}`,e.deserialize())}spliceNode(e){const s=e.getInputs().map(i=>{var r;return(r=i==null?void 0:i.connection)==null?void 0:r.output}),n=e.outputs.map(i=>i.connections).flat().map(i=>i.input);for(let i=0;i<s.length;i++){const r=s[i],a=n[i];!a||!r||r.connectTo(a)}return this.removeNode(e)}getSockets(e){const s=this.nodes.map(n=>[...n.getSockets()]).flat();return e?s.filter(n=>n.type===e):s}getInputs(e){const s=this.nodes.map(n=>n.getInputs()).flat();return!e||e==="*"?s:s.filter(n=>n.type.includes("*")||n.type.includes(e))}getOutputs(e){const s=this.nodes.map(n=>n.outputs).flat();return!e||e.includes("*")?s:s.filter(n=>n.type==="*"||e.includes(n.type))}createNode(e){const s=this.factory.create(e);return this.addNode(s),this.save(),Ft(`Created new node id:${e.attributes.id} type:${e.attributes.type}`,e),s}getNodes(){return this.nodes}findNodeById(e){return this.nodes.filter(s=>s.id===e)[0]}getNodeTypes(){return this.store.types}registerNodeType(e){if(Array.isArray(e)){e.forEach(s=>this.registerNodeType(s));return}if("node"in e)this.store.add(e);else{const s=this.parser.parseType(e);this.store.add(s)}}}rm([uh(1e3)],gl.prototype,"save",1);const om=!0,lm=(t,e)=>e.some(s=>t instanceof s);let Ma,Ea;function cm(){return Ma||(Ma=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hm(){return Ea||(Ea=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yl=new WeakMap,Yn=new WeakMap,_l=new WeakMap,kn=new WeakMap,wi=new WeakMap;function um(t){const e=new Promise((s,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",a)},r=()=>{s(kt(t.result)),i()},a=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",a)});return e.then(s=>{s instanceof IDBCursor&&yl.set(s,t)}).catch(()=>{}),wi.set(e,t),e}function fm(t){if(Yn.has(t))return;const e=new Promise((s,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",a),t.removeEventListener("abort",a)},r=()=>{s(),i()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",a),t.addEventListener("abort",a)});Yn.set(t,e)}let Hn={get(t,e,s){if(t instanceof IDBTransaction){if(e==="done")return Yn.get(t);if(e==="objectStoreNames")return t.objectStoreNames||_l.get(t);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return kt(t[e])},set(t,e,s){return t[e]=s,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dm(t){Hn=t(Hn)}function pm(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const n=t.call(Sn(this),e,...s);return _l.set(n,e.sort?e.sort():[e]),kt(n)}:hm().includes(t)?function(...e){return t.apply(Sn(this),e),kt(yl.get(this))}:function(...e){return kt(t.apply(Sn(this),e))}}function mm(t){return typeof t=="function"?pm(t):(t instanceof IDBTransaction&&fm(t),lm(t,cm())?new Proxy(t,Hn):t)}function kt(t){if(t instanceof IDBRequest)return um(t);if(kn.has(t))return kn.get(t);const e=mm(t);return e!==t&&(kn.set(t,e),wi.set(e,t)),e}const Sn=t=>wi.get(t);function vm(t,e,{blocked:s,upgrade:n,blocking:i,terminated:r}={}){const a=indexedDB.open(t,e),o=kt(a);return n&&a.addEventListener("upgradeneeded",l=>{n(kt(a.result),l.oldVersion,l.newVersion,kt(a.transaction))}),s&&a.addEventListener("blocked",()=>s()),o.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),o}const gm=["get","getKey","getAll","getAllKeys","count"],ym=["put","add","delete","clear"],Tn=new Map;function ka(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Tn.get(e))return Tn.get(e);const s=e.replace(/FromIndex$/,""),n=e!==s,i=ym.includes(s);if(!(s in(n?IDBIndex:IDBObjectStore).prototype)||!(i||gm.includes(s)))return;const r=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[s](...o),i&&l.done]))[0]};return Tn.set(e,r),r}dm(t=>Je(Se({},t),{get:(e,s,n)=>ka(e,s)||t.get(e,s,n),has:(e,s)=>!!ka(e,s)||t.has(e,s)}));const bi=(()=>vm("keyval-store",1,{upgrade(t){t.createObjectStore("keyval")}}))();async function rs(t,e){return(await bi).put("keyval",e,t)}async function js(t){return(await bi).get("keyval",t)}async function _m(t){return(await bi).delete("keyval",t)}const wm=JSON.parse(localStorage.getItem("pt_local_state")),as=Se({},wm),bm=Po((t,e)=>{as[t]=e,localStorage.setItem("pt_local_state",JSON.stringify(as))},100,!1);var nt={get(t,e){var s;return as[t]=(s=as[t])!=null?s:e,as[t]},set:bm};let Sa=0;class wl extends it{constructor({canvas:e,width:s,height:n,clearColor:i="ffffff",alpha:r=!1,camPos:a=[0,2,4]}={}){if(super(),this.scene=new ci,this.lastCamPos=new fe(0,0,0),this.canvas=e,(!s||!n)&&e){const o=e.getBoundingClientRect();s=o.width,n=o.height}!globalThis.document||(this.renderer=new zh({canvas:e,width:s,height:n,antialias:!0}),this.gl=this.renderer.gl,this.gl.clearColor(...tr(i),0),this.renderer.gl.canvas&&(this.canvas=this.renderer.gl.canvas),this.camera=new S1(this.gl,{fov:70,aspect:s/n}),this.lastCamPos.set(a),this.camera.position.set(a),this.camera.lookAt(new fe(0,0,0)),e&&(this.controls=new nu(this.camera,{element:e,target:new fe(0,.2,0),maxPolarAngle:1.6,minDistance:.2,maxDistance:15,ease:.7,rotateSpeed:.5,inertia:.5})),this.bindEventlisteners(),e&&this.render())}setControlTarget(e){Number.isNaN(e.x)||(this.controlTarget||(this.controls.target=e),this.controlTarget=e)}setClearColor(e){this.gl.clearColor(...tr(e),1)}renderScene(e){this.renderer.render({scene:e,camera:this.camera})}render(){requestAnimationFrame(this.render.bind(this)),this.lastCamPos.equals(this.camera.position)||(this.lastCamPos.set(this.camera.position),this.emit("camPos",this.camera.position.toArray())),this.controlTarget&&(this.controlTarget.squaredDistance(this.controls.target)<5e-5?this.controls.target=this.controlTarget:this.controls.target.lerp(this.controlTarget,.05)),this.controls.update(),this.renderer.render({scene:this.scene,camera:this.camera}),this.emit("perf",performance.now()-Sa),Sa=performance.now()}bindEventlisteners(){const e=Js(()=>this.handleResize(),500);window.addEventListener("resize",()=>{this.canvas.classList.add("resizing"),e()})}handleResize(){let e=this.canvas.parentElement;e||(e=this.canvas);const{width:s,height:n}=e.getBoundingClientRect();this.renderer.setSize(s,n),this.camera.perspective({aspect:this.gl.canvas.width/this.gl.canvas.height}),this.canvas.classList.remove("resizing")}}var xm=`precision highp float;
precision highp int;
#define GLSLIFY 1

uniform float uTime;
uniform sampler2D tMap;
uniform vec3 uFogColor;
uniform float uFogNear;
uniform float uFogFar;
uniform float texScale;

varying vec2 vUv;
varying vec4 vMVPos;
varying vec3 vPos;

void main() {
    vec3 tex = texture2D(tMap, vUv*texScale).rgb;
    
    // add the fog relative to the distance from the camera
    float dist = length(vMVPos);
    float fog = smoothstep(uFogNear, uFogFar, dist);
    tex = mix(tex, uFogColor, fog);
    
    // add some fog along the height of each tree to simulate low-lying fog 
    tex = mix(tex, uFogColor, smoothstep(0.0, -1.0, vPos.y)); 
    
    gl_FragColor.rgb = tex;
}`,Mm=`precision highp float;
precision highp int;
#define GLSLIFY 1

attribute vec2 uv;
attribute vec3 position;

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float uTime;

varying vec2 vUv;
varying vec4 vMVPos;
varying vec3 vPos;

void main() {
    vUv = uv;
    
    // copy position so that we can modify the instances
    vec3 pos = position;
    
    // pass scaled object position to fragment to add low-lying fog
    vPos = pos;
    
    // pass model view position to fragment shader to get distance from camera 
    vMVPos = modelViewMatrix * vec4(pos, 1.0);
    
    gl_Position = projectionMatrix * vMVPos;
}`,Em=`#version 300 es
precision highp float;
#define varying in
#define texture2D texture
#define gl_FragColor FragColor
out vec4 FragColor;
precision highp float;
#define GLSLIFY 1
uniform sampler2D tMap;
varying vec4 vMVPos;
vec3 normals(vec3 pos) {
  vec3 fdx = dFdx(pos);
  vec3 fdy = dFdy(pos);
  return normalize(cross(fdx, fdy));
}
vec2 matcap(vec3 eye, vec3 normal) {
  vec3 reflected = reflect(eye, normal);
  float m = 2.8284271247461903 * sqrt(reflected.z + 1.0);
  return reflected.xy / m + 0.5;
}
void main() {
  vec3 normal = normals(vMVPos.xyz);
  // We're using the matcap to add some shininess to the model
  vec3 mat = texture2D(tMap, matcap(normalize(vMVPos.xyz), normal)).rgb;
  
  gl_FragColor.rgb = mat;
  gl_FragColor.a = 1.0;
}
`,km=`#version 300 es
#define GLSLIFY 1
#define attribute in
#define varying out

attribute vec3 position;

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;

varying vec4 vMVPos;

void main() {
  vMVPos = modelViewMatrix * vec4(position, 1.0);
  gl_Position = projectionMatrix * vMVPos;
}
`,Sm=`precision highp float;
#define GLSLIFY 1
float pointSize = 0.02;
varying float distToCamera;
void main() {
    vec2 uv = gl_PointCoord.xy;

    float dist = 2.0 - distToCamera;
    
    float circle = pointSize*dist> length(uv - 0.5)?0.8:0.0;

    float xMask =min(abs(uv.x-0.5),abs(uv.y-0.5));

    circle = xMask>0.003?0.0:circle;

    gl_FragColor.rgb = vec3(0.0, 0.0, 0.0);
    gl_FragColor.a = circle;
}`,Tm=`#define GLSLIFY 1
attribute vec3 position;
uniform mat4 modelMatrix;
uniform mat4 viewMatrix;
uniform mat4 projectionMatrix;
varying float distToCamera;

void main() {

    // modelMatrix is one of the automatically attached uniforms when using the Mesh class
    vec4 mPos = modelMatrix * vec4(position, 1.0);

    
    // get the model view position so that we can scale the points off into the distance
    vec4 mvPos = viewMatrix * mPos;

    gl_PointSize = 300.0 / length(mvPos.xyz);
    distToCamera = -mvPos.z/10.0+1.0;
    gl_Position = projectionMatrix * mvPos;
}`,Am=`precision highp float;
precision highp int;
#define GLSLIFY 1

void main(){
    gl_FragColor=vec4(1.,.9,.4,.7);
}`,Pm=`precision highp float;
precision highp int;
#define GLSLIFY 1

attribute vec2 uv;
attribute vec3 position;

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat3 normalMatrix;

void main(){
    gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);
}`,Im=`precision highp float;
#define GLSLIFY 1

varying vec3 vNormal;
varying vec4 vMVPos;

uniform sampler2D tMap;

vec2 matcap(vec3 eye, vec3 normal) {
  vec3 reflected = reflect(eye, normal);
  float m = 2.8284271247461903 * sqrt(reflected.z + 1.0);
  return reflected.xy / m + 0.5;
}

void main() {
    vec3 normal = normalize(vNormal*0.1);
    float lighting = dot(normal, normalize(vec3(-0.3, 0.8, 0.6)));

    vec3 mat = texture2D(tMap, matcap(normalize(vMVPos.xyz), normal)).rgb;

    gl_FragColor.rgb = mat;
    gl_FragColor.a = 1.0;
}
`,Nm=`#define GLSLIFY 1
attribute vec3 position;
attribute vec3 normal;

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat3 normalMatrix;

varying vec3 vNormal;
varying vec4 vMVPos;

void main() {
    vNormal = normalize(normalMatrix * normal);
    vMVPos = modelViewMatrix * vec4(position, 1.0);
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`;const Ta={fragment:xm,vertex:Mm},Aa={fragment:Am,vertex:Pm},Pa={fragment:Sm,vertex:Tm},Lm=t=>{const e=new hi(t),s=new Image;return s.onload=()=>e.image=s,s.src="assets/matcap_green.jpg",new hs(t,{vertex:km,fragment:Em,uniforms:{tMap:{value:e}},cullFace:null})},Dm=t=>{const e=new hi(t),s=new Image;return s.onload=()=>e.image=s,s.src="assets/matcap_green.jpg",new hs(t,{vertex:Nm,fragment:Im,uniforms:{tMap:{value:e}},cullFace:null})},$m=ml();let ze,dt,Tt,Xt,Ia=!1;function Om(){Ia||(Ia=!0,ze=new wl({width:100,height:100,alpha:!0,clearColor:"000"}),dt=new Lo(ze.gl,{geometry:new Do(ze.gl,{width:0,height:0,depth:0}),program:Lm(ze.gl)}),Xt=document.createElement("canvas"),Xt.width=Xt.height=100,Tt=Xt.getContext("2d"),dt.setParent(ze.scene))}async function Cm({pd:t,geo:e}){Om();let s;if(e&&(s=e),s||(s=(await $m.executeNodeSystem(t,{stemResX:12,stemResY:12})).geometry),!s)return;dt.geometry=mi(ze.gl,s),dt.geometry.computeBoundingBox(),ze.camera.fov=10,ze.camera.position.x=dt.geometry.bounds.center.x,ze.camera.position.y=dt.geometry.bounds.center.y;const i=(dt.geometry.bounds.max.y-dt.geometry.bounds.min.y)/2/Math.tan(Math.PI*ze.camera.fov/360);if(ze.camera.position.z=i/5,ze.camera.lookAt(dt.geometry.bounds.center),ze.renderScene(ze.scene),!(ze.canvas.width===0||ze.canvas.height===0)){Tt.clearRect(0,0,100,100);for(let r=0;r<1;r++)Tt.drawImage(Xt,0,0),Tt.drawImage(ze.canvas,0,0),Tt.filter="blur(7px) opacity(0.6) brightness(0.95)";return Tt.filter="blur(0px) drop-shadow(0px 0px 10px rgba(0, 0, 0, 0.8))",Tt.drawImage(ze.canvas,0,0),Xt.toDataURL("image/webp",1)}}class Vm{constructor(e,s,n){this.name=e,this.version=s,this.os=n,this.type="browser"}}class zm{constructor(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}}class jm{constructor(e,s,n,i){this.name=e,this.version=s,this.os=n,this.bot=i,this.type="bot-device"}}class Rm{constructor(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}}class Fm{constructor(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}}const Bm=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Um=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Na=3,qm=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Bm]],La=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Da(t){return t?$a(t):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new Fm:typeof navigator!="undefined"?$a(navigator.userAgent):Ym()}function Wm(t){return t!==""&&qm.reduce((e,[s,n])=>{if(e)return e;const i=n.exec(t);return!!i&&[s,i]},!1)}function $a(t){const e=Wm(t);if(!e)return null;const[s,n]=e;if(s==="searchbot")return new Rm;let i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<Na&&(i=[...i,...Hm(Na-i.length)]):i=[];const r=i.join("."),a=Xm(t),o=Um.exec(t);return o&&o[1]?new jm(s,r,a,o[1]):new Vm(s,r,a)}function Xm(t){for(let e=0,s=La.length;e<s;e++){const[n,i]=La[e];if(i.exec(t))return n}return null}function Ym(){return typeof process!="undefined"&&process.version?new zm(process.version.slice(1)):null}function Hm(t){const e=[];for(let s=0;s<t;s++)e.push("0");return e}function Gm(){return"window"in globalThis}let bl={};"sessionStorage"in globalThis||(globalThis.sessionStorage={getItem:t=>{},setItem:(t,e)=>{}});if("user"in sessionStorage)try{bl=JSON.parse(sessionStorage.getItem("user"))}catch{}const xl=Ye(bl);xl.subscribe(t=>{sessionStorage.setItem("user",JSON.stringify(t))});const Gs=xl,{VITE_API_URL:Zm="http://localhost:3000"}={VITE_API_URL:"https://plantarium.fly.dev",VITE_SVELTEKIT_APP_VERSION:"1652748379995",VITE_SVELTEKIT_APP_VERSION_FILE:"_app/version.json",VITE_SVELTEKIT_APP_VERSION_POLL_INTERVAL:"0",VITE_SVELTEKIT_AMP:"",BASE_URL:"/_app/",MODE:"production",DEV:!1,PROD:!0};function Jm(t){const s=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(s).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(n)}const Oa=Gm(),Zs=(()=>{let t=Oa&&localStorage.getItem("token");function e(){if(!t||t.length<10){Gs.set({});return}const s=Jm(t);Gs.set({username:s.username,id:s.sub})}return e(),{set token(s){t=s,Oa&&localStorage.setItem("token",s),e()},get token(){return t}}})();async function gt({method:t,path:e,data:s,isJSON:n=!0}){const i={method:t,headers:{}};s&&(i.headers["Content-Type"]="application/json",i.body=JSON.stringify(s)),Zs.token&&(i.headers["access-token"]=`Bearer ${Zs.token}`);const r=await fetch(`${Zm}/${e}`,i);if(r.ok){if(n)try{return await r.json()}catch(o){console.error("Response from "+e+" failed to parse"),console.error(o)}return r.text()}const a=await r.json();return console.error(a),a}function Ml(t,e={}){return gt(Se({method:"GET",path:t},e))}function Km(t){return gt({method:"DELETE",path:t})}function Qm(t,e){return gt({method:"POST",path:t,data:e})}function ev(t){return gt({method:"GET",path:`api/report/${t}`})}function tv(t){return gt({method:"PUT",path:`api/report/${t}/publish`})}function sv(t){return gt({method:"PUT",path:`api/report/${t}/unpublish`})}function nv(){return gt({method:"GET",path:"api/report/labels"})}function iv(t,e){return gt({method:"PUT",path:`api/report/${t}`,data:{labels:e}})}var rv=Object.freeze(Object.defineProperty({__proto__:null,getReport:ev,publishReport:tv,unpublishReport:sv,getAvailableLabels:nv,setReportLabels:iv},Symbol.toStringTag,{value:"Module"}));async function av(t,e){const s=await Qm("api/auth/login",{username:t,password:e});Zs.token=s.access_token}function ov(){Zs.token=""}function El(t){return gt({method:"POST",path:"api/report",data:t})}function lv(t){return Km(`api/report/${t}`)}async function cv(){const t=await Ml("api/user/role",{isJSON:!1});return Gs.update(e=>(e.role=t,e)),t}async function hv(){const t=await Ml("api/user/permission");return Gs.update(e=>(e.permissions=t,e)),t}var uv=Object.freeze(Object.defineProperty({__proto__:null,login:av,logout:ov,submitReport:El,deleteReport:lv,getRole:cv,getPermission:hv},Symbol.toStringTag,{value:"Module"}));Se(Se({},rv),uv);const tt=je("ProjectManager"),An="pt_project_";class fv extends it{constructor(){super(),this.activeProject=Ye(),this.projects={},this.store=Ye([]),this.loadProjects()}createNewProject(e){const s={meta:Je(Se({},(e==null?void 0:e.meta)||{transform:{x:0,y:0,s:1},name:"DefaultProject"}),{id:li()}),nodes:(e==null?void 0:e.nodes)||[{attributes:{pos:{x:-100,y:0},type:"stem",id:"1",refs:[{id:"0",out:0,in:"input"}]},state:{origin:{x:0,y:0,z:0},height:2,thiccness:.06,amount:1}},{attributes:{pos:{x:0,y:0},type:"output",id:"0"}}]},n=Object.values(this.projects).map(i=>i.meta.name);if(n.includes(s.meta.name)){let i=s.meta.name.replace(/\d+$/,""),r=0;for(;n.includes(s.meta.name);)s.meta.name=i+r,r++}return tt("created new plant",s),s}createNew(e){const s=this.createNewProject(e);this.emit("new",s),this.saveProject(s),this.setActiveProject(s.meta.id)}async updateProjectMeta(e,s){const n=await this.getProject(e);n.meta=Se(Se({},n.meta),s),tt("update meta",e),this.emit("update",n),this.saveProject(n)}async saveProject(e){const s=JSON.parse(JSON.stringify(e));this.projects[s.meta.id]=s,this.emit("save",s),await rs("pt_project_ids",Object.keys(this.projects)),await rs(An+s.meta.id,s),tt("saved plant id: ",s.meta.id),this.store.set(Object.values(this.projects))}async getProject(e){if(e in this.projects)return this.projects[e];const s=await js(An+e);return this.projects[e]=s,s}async deleteProject(e){e in this.projects?(delete this.projects[e],await _m(An+e),await rs("pt_project_ids",Object.keys(this.projects)),this.store.set(Object.values(this.projects)),this.emit("delete",e),tt("deleted project with id: "+e)):tt.warn("cant delete project with id: "+e)}async setActiveProject(e){if(this.loadingActiveProject&&await this.loadingActiveProject,e===this.activeProjectId)return;this.activeProjectId=e,this.loadingActiveProject=this.getProject(e);const s=await this.loadingActiveProject;this.loadingActiveProject?(this.activeProjectId=e,this.saveProject(s),this.activeProject.set(s),await rs("pt_active_id",e),tt("set active project to id: "+e),this.emit("load",s),delete this.loadingActiveProject):tt.warn("cant find plant with id: "+e)}async renderThumbnail({project:e,geo:s}){var a;const n=((a=e==null?void 0:e.meta)==null?void 0:a.id)||this.activeProjectId;if(!(n in this.projects))return;const i=performance.now(),r=await Cm({pd:e,geo:s});if(r){const o=performance.now()-i;this.projects[n].meta.thumbnail=r,tt("generated thumbnail for "+n+" in "+Math.floor(o)+"ms"),this.saveProject(this.projects[n]),this.store.set(Object.values(this.projects))}else tt.warn("There was an error rendering a thumbnail for: "+n)}async loadProjects(){const e=await js("pt_project_ids")||[];tt("loaded project ids",e);const s=await js("pt_active_id");if(!e.length){const n=this.createNewProject();e.push(n.meta.id),await this.saveProject(n)}await Promise.all(e.map(async n=>{const i=await this.getProject(n);tt("loaded ",n),this.projects[n]=i})),s&&e.includes(s)?this.setActiveProject(s):this.setActiveProject(e[0]),this.store.set(Object.values(this.projects))}setProject(e){this.plant=e,this.emit("plant",e)}getActiveProject(){return this.plant}setSettings(e){this.emit("settings",e)}}const dv={transform:{x:63.94975437618115,y:236.56997968981221,s:.36102747024591014},name:"Tree"},pv=[{attributes:{pos:{x:-1298,y:-154},type:"stem",id:"1",refs:[{id:"5",out:0,in:"input"}]},state:{origin:{x:0,y:0,z:0},height:3.2,thiccness:.13,amount:1}},{attributes:{pos:{x:384,y:-103},type:"output",id:"0",refs:[]},state:{}},{attributes:{pos:{x:-888,y:-81},id:"2",name:"Split",type:"Split",refs:[{id:"3",out:0,in:"input"}]},state:{height:.36,angle:0,amount:2}},{attributes:{pos:{x:-663,y:-61},id:"3",name:"Split",type:"Split",refs:[{id:"4",out:0,in:"input"}]},state:{height:.35,angle:0,amount:5}},{attributes:{pos:{x:-462,y:-85},id:"4",name:"Noise",type:"Noise",refs:[{id:"10",out:0,in:"input"}]},state:{size:.52,strength:.22}},{attributes:{pos:{x:-199,y:-79},id:"7",name:"Branches",type:"Branches",refs:[{id:"14",out:0,in:"input"}]},state:{length:1.6,thiccness:.63,offsetSingle:1,lowestBranch:.2,amount:7}},{attributes:{pos:{x:20,y:-78},id:"8",name:"Noise",type:"Noise",refs:[{id:"11",out:0,in:"input"}]},state:{size:1.2,strength:.12}},{attributes:{pos:{x:-320,y:-88},id:"10",name:"Gravity",type:"Gravity",refs:[{id:"7",out:0,in:"input"}]},state:{type:"simple",strength:.22}},{attributes:{pos:{x:-1086,y:-109},id:"5",name:"Noise",type:"Noise",refs:[{id:"2",out:0,in:"input"}]},state:{size:.32,strength:.5}},{attributes:{pos:{x:165,y:-100},id:"11",name:"Leaf",type:"Leaf",refs:[{id:"0",out:0,in:"input"}]},state:{size:.2,shape:[{x:1,y:1,pinned:!0},{x:.62,y:.84,pinned:!1},{x:.54,y:.63,pinned:!1},{x:.38,y:.41,pinned:!0},{x:.44,y:.23,pinned:!1},{x:.64,y:.12,pinned:!1},{x:.98,y:.02,pinned:!0}],lowestLeaf:0,curvature:{x:.5,y:.2},amount:10}},{attributes:{pos:{x:-218,y:286},id:"12",name:"Curve",type:"Curve",refs:[{id:"13",out:0,in:"a"}]},state:{value:[{x:0,y:1,pinned:!0},{x:1,y:0,pinned:!0}]}},{attributes:{pos:{x:-74,y:177},id:"13",name:"Math",type:"Math",refs:[{id:"11",out:0,in:"size"}]},state:{mode:"multiply",a:0,b:.2}},{attributes:{pos:{x:-89,y:-79},id:"14",name:"Gravity",type:"Gravity",refs:[{id:"8",out:0,in:"input"}]},state:{type:"simple",strength:.25}}];var mv={meta:dv,nodes:pv};const vv={name:"Fern",transform:{x:211.38675180876214,y:115.91546088675673,s:.3333982577192747}},gv=[{attributes:{pos:{x:1e3,y:-150},type:"output",id:"0",refs:[]},state:{}},{attributes:{pos:{x:-450,y:-150},id:"2",name:"Stem",type:"Stem",refs:[{id:"9",out:0,in:"input"}]},state:{origin:{x:0,y:0,z:0},height:1,thiccness:.011,amount:7}},{attributes:{pos:{x:-600,y:-150},id:"7",name:"Vec3",type:"Vec3",refs:[{id:"2",out:0,in:"origin"}]},state:{x:0,y:0,z:0}},{attributes:{pos:{x:-750,y:-200},id:"3",name:"Parameter",type:"Parameter",refs:[{id:"7",out:0,in:"x"}]},state:{value:0,variation:.4}},{attributes:{pos:{x:-750,y:-50},id:"8",name:"Parameter",type:"Parameter",refs:[{id:"7",out:0,in:"z"}]},state:{value:0,variation:.32}},{attributes:{pos:{x:-300,y:-150},id:"9",name:"Rotate",type:"Rotate",refs:[{id:"10",out:0,in:"input"}]},state:{axis:"X",spread:!1,angle:0}},{attributes:{pos:{x:-150,y:-150},id:"10",name:"Rotate",type:"Rotate",refs:[{id:"1",out:0,in:"input"}]},state:{axis:"Y",spread:!0,angle:6.2}},{attributes:{pos:{x:-450,y:100},id:"11",name:"Parameter",type:"Parameter",refs:[{id:"9",out:0,in:"angle"}]},state:{value:.87,variation:.27}},{attributes:{pos:{x:150,y:-150},id:"12",name:"Gravity",type:"Gravity",refs:[{id:"13",out:0,in:"input"}]},state:{type:"simple",strength:.62}},{attributes:{pos:{x:300,y:-150},id:"13",name:"Branches",type:"Branches",refs:[{id:"17",out:0,in:"input"}]},state:{length:.46,thiccness:.42,offsetSingle:.5,lowestBranch:.25,amount:22}},{attributes:{pos:{x:-600,y:150},id:"14",name:"Random",type:"Random",refs:[{id:"2",out:0,in:"amount"}]},state:{min:7,max:12}},{attributes:{pos:{x:-600,y:0},id:"16",name:"Parameter",type:"Parameter",refs:[{id:"2",out:0,in:"height"}]},state:{value:1,variation:.052}},{attributes:{pos:{x:450,y:-150},id:"17",name:"Noise",type:"Noise",refs:[{id:"18",out:0,in:"input"}]},state:{size:6,strength:.03}},{attributes:{pos:{x:600,y:-150},id:"18",name:"Gravity",type:"Gravity",refs:[{id:"19",out:0,in:"input"}]},state:{type:"simple",strength:.7}},{attributes:{pos:{x:850,y:-150},id:"19",name:"Leaf",type:"Leaf",refs:[{id:"0",out:0,in:"input"}]},state:{size:.2,shape:[{x:1,y:1,pinned:!0},{x:.62,y:.84,pinned:!1},{x:.54,y:.63,pinned:!1},{x:.38,y:.41,pinned:!0},{x:.44,y:.23,pinned:!1},{x:.64,y:.12,pinned:!1},{x:.98,y:.02,pinned:!0}],lowestLeaf:0,curvature:{x:.5,y:.2},amount:40}},{attributes:{pos:{x:729,y:95},id:"21",name:"Vec2",type:"Vec2",refs:[{id:"19",out:0,in:"curvature"}]},state:{x:.1,y:.05}},{attributes:{pos:{x:450,y:100},id:"22",name:"Curve",type:"Curve",refs:[{id:"23",out:0,in:"a"}]},state:{value:[{x:0,y:1,pinned:!0},{x:1,y:0,pinned:!0}]}},{attributes:{pos:{x:600,y:100},id:"23",name:"Math",type:"Math",refs:[{id:"19",out:0,in:"size"}]},state:{mode:"multiply",a:0,b:.04}},{attributes:{pos:{x:450,y:250},id:"24",name:"Parameter",type:"Parameter",refs:[{id:"23",out:0,in:"b"}]},state:{value:.04,variation:0}},{attributes:{pos:{x:0,y:-150},id:"1",name:"Noise",type:"Noise",refs:[{id:"12",out:0,in:"input"}]},state:{size:1,strength:.02}}];var yv={meta:vv,nodes:gv},Ca=[{title:"Tree",description:"Complex Tree",data:mv},{title:"Fern",description:"Complex Fern",data:yv}];function Va(t,e,s){const n=t.slice();return n[15]=e[s],n}function za(t,e,s){const n=t.slice();return n[12]=e[s],n}function _v(t){let e,s,n,i,r,a,o;return{c(){e=T("p"),s=W("Seems all right"),n=R(),i=T("button"),r=W("Finish Import")},l(l){e=A(l,"P",{});var c=S(e);s=X(c,"Seems all right"),c.forEach(_),n=F(l),i=A(l,"BUTTON",{});var h=S(i);r=X(h,"Finish Import"),h.forEach(_)},m(l,c){I(l,e,c),M(e,s),I(l,n,c),I(l,i,c),M(i,r),a||(o=Z(i,"click",t[5]),a=!0)},p:H,i:H,o:H,d(l){l&&_(e),l&&_(n),l&&_(i),a=!1,o()}}}function wv(t){let e,s,n,i,r,a,o,l,c=t[3],h=[];for(let u=0;u<c.length;u+=1)h[u]=ja(Va(t,c,u));return{c(){e=T("p"),s=W("Errors"),n=R();for(let u=0;u<h.length;u+=1)h[u].c();i=R(),r=T("button"),a=W("okay")},l(u){e=A(u,"P",{});var f=S(e);s=X(f,"Errors"),f.forEach(_),n=F(u);for(let p=0;p<h.length;p+=1)h[p].l(u);i=F(u),r=A(u,"BUTTON",{});var d=S(r);a=X(d,"okay"),d.forEach(_)},m(u,f){I(u,e,f),M(e,s),I(u,n,f);for(let d=0;d<h.length;d+=1)h[d].m(u,f);I(u,i,f),I(u,r,f),M(r,a),o||(l=Z(r,"click",t[9]),o=!0)},p(u,f){if(f&8){c=u[3];let d;for(d=0;d<c.length;d+=1){const p=Va(u,c,d);h[d]?h[d].p(p,f):(h[d]=ja(p),h[d].c(),h[d].m(i.parentNode,i))}for(;d<h.length;d+=1)h[d].d(1);h.length=c.length}},i:H,o:H,d(u){u&&_(e),u&&_(n),Fe(h,u),u&&_(i),u&&_(r),o=!1,l()}}}function bv(t){let e,s,n,i,r,a,o;function l(d){t[6](d)}let c={values:["clipboard","file","examples"]};t[1]!==void 0&&(c.value=t[1]),e=new di({props:c}),Ae.push(()=>Yt(e,"value",l));const h=[Ev,Mv,xv],u=[];function f(d,p){return d[1]==="clipboard"?0:d[1]==="file"?1:d[1]==="examples"?2:-1}return~(i=f(t))&&(r=u[i]=h[i](t)),{c(){re(e.$$.fragment),n=R(),r&&r.c(),a=he()},l(d){le(e.$$.fragment,d),n=F(d),r&&r.l(d),a=he()},m(d,p){ae(e,d,p),I(d,n,p),~i&&u[i].m(d,p),I(d,a,p),o=!0},p(d,p){const m={};!s&&p&2&&(s=!0,m.value=d[1],Ht(()=>s=!1)),e.$set(m);let v=i;i=f(d),i===v?~i&&u[i].p(d,p):(r&&(pe(),V(u[v],1,1,()=>{u[v]=null}),de()),~i?(r=u[i],r?r.p(d,p):(r=u[i]=h[i](d),r.c()),L(r,1),r.m(a.parentNode,a)):r=null)},i(d){o||(L(e.$$.fragment,d),L(r),o=!0)},o(d){V(e.$$.fragment,d),V(r),o=!1},d(d){oe(e,d),d&&_(n),~i&&u[i].d(d),d&&_(a)}}}function ja(t){let e,s=t[15]+"",n;return{c(){e=T("p"),n=W(s)},l(i){e=A(i,"P",{});var r=S(e);n=X(r,s),r.forEach(_)},m(i,r){I(i,e,r),M(e,n)},p(i,r){r&8&&s!==(s=i[15]+"")&&Ee(n,s)},d(i){i&&_(e)}}}function xv(t){let e,s,n=Ca,i=[];for(let a=0;a<n.length;a+=1)i[a]=Ra(za(t,n,a));const r=a=>V(i[a],1,1,()=>{i[a]=null});return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=he()},l(a){for(let o=0;o<i.length;o+=1)i[o].l(a);e=he()},m(a,o){for(let l=0;l<i.length;l+=1)i[l].m(a,o);I(a,e,o),s=!0},p(a,o){if(o&32){n=Ca;let l;for(l=0;l<n.length;l+=1){const c=za(a,n,l);i[l]?(i[l].p(c,o),L(i[l],1)):(i[l]=Ra(c),i[l].c(),L(i[l],1),i[l].m(e.parentNode,e))}for(pe(),l=n.length;l<i.length;l+=1)r(l);de()}},i(a){if(!s){for(let o=0;o<n.length;o+=1)L(i[o]);s=!0}},o(a){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)V(i[o]);s=!1},d(a){Fe(i,a),a&&_(e)}}}function Mv(t){let e,s,n,i,r,a;return{c(){e=T("label"),s=W("file"),n=R(),i=T("input"),this.h()},l(o){e=A(o,"LABEL",{for:!0});var l=S(e);s=X(l,"file"),l.forEach(_),n=F(o),i=A(o,"INPUT",{type:!0,id:!0,accept:!0}),this.h()},h(){E(e,"for","file"),E(i,"type","file"),E(i,"id","file"),E(i,"accept","application/json")},m(o,l){I(o,e,l),M(e,s),I(o,n,l),I(o,i,l),r||(a=Z(i,"change",t[4]),r=!0)},p:H,i:H,o:H,d(o){o&&_(e),o&&_(n),o&&_(i),r=!1,a()}}}function Ev(t){let e,s,n,i,r,a;return{c(){e=T("p"),s=W("Paste Here:"),n=R(),i=T("textarea"),this.h()},l(o){e=A(o,"P",{});var l=S(e);s=X(l,"Paste Here:"),l.forEach(_),n=F(o),i=A(o,"TEXTAREA",{name:!0,id:!0,cols:!0,rows:!0}),S(i).forEach(_),this.h()},h(){E(i,"name",""),E(i,"id",""),E(i,"cols","30"),E(i,"rows","10")},m(o,l){I(o,e,l),M(e,s),I(o,n,l),I(o,i,l),qe(i,t[0]),r||(a=Z(i,"input",t[7]),r=!0)},p(o,l){l&1&&qe(i,o[0])},i:H,o:H,d(o){o&&_(e),o&&_(n),o&&_(i),r=!1,a()}}}function Ra(t){let e,s;function n(){return t[8](t[12])}return e=new Xe({props:{name:t[12].title}}),e.$on("click",n),{c(){re(e.$$.fragment)},l(i){le(e.$$.fragment,i)},m(i,r){ae(e,i,r),s=!0},p(i,r){t=i},i(i){s||(L(e.$$.fragment,i),s=!0)},o(i){V(e.$$.fragment,i),s=!1},d(i){oe(e,i)}}}function kv(t){let e,s,n,i,r,a,o;const l=[bv,wv,_v],c=[];function h(u,f){return u[0]?u[3].length?1:u[2]?2:-1:0}return~(i=h(t))&&(r=c[i]=l[i](t)),{c(){e=T("h2"),s=W("Import"),n=R(),r&&r.c(),a=he()},l(u){e=A(u,"H2",{});var f=S(e);s=X(f,"Import"),f.forEach(_),n=F(u),r&&r.l(u),a=he()},m(u,f){I(u,e,f),M(e,s),I(u,n,f),~i&&c[i].m(u,f),I(u,a,f),o=!0},p(u,[f]){let d=i;i=h(u),i===d?~i&&c[i].p(u,f):(r&&(pe(),V(c[d],1,1,()=>{c[d]=null}),de()),~i?(r=c[i],r?r.p(u,f):(r=c[i]=l[i](u),r.c()),L(r,1),r.m(a.parentNode,a)):r=null)},i(u){o||(L(r),o=!0)},o(u){V(r),o=!1},d(u){u&&_(e),u&&_(n),~i&&c[i].d(u),u&&_(a)}}}function Sv(t,e,s){let n,i,r,a="cliboard";function o(m){console.log({s:m});let v;try{v=JSON.parse(m)}catch(g){if(g)return[null,["Not valid JSON",g.message]]}return[v,[]]}function l(m){const v=m.target.files[0];let g=new FileReader;g.readAsText(v),g.onload=x=>{s(0,r=x.target.result)}}const c=He();function h(m=n){De.createNew(m),c("close")}function u(m){a=m,s(1,a)}function f(){r=this.value,s(0,r)}const d=m=>h(m.data),p=()=>{s(0,r="")};return t.$$.update=()=>{t.$$.dirty&1&&s(2,[n,i]=o(r),n,(s(3,i),s(0,r)))},[r,a,n,i,l,h,u,f,d,p]}class Tv extends ve{constructor(e){super(),ge(this,e,Sv,kv,ye,{})}}function Av(t){let e,s,n,i,r,a,o,l,c,h,u,f,d,p,m;return{c(){e=T("div"),s=T("div"),n=T("button"),i=W("copy"),r=R(),a=T("a"),o=W("download"),h=R(),u=T("div"),f=T("textarea"),this.h()},l(v){e=A(v,"DIV",{id:!0,class:!0});var g=S(e);s=A(g,"DIV",{id:!0});var x=S(s);n=A(x,"BUTTON",{name:!0});var w=S(n);i=X(w,"copy"),w.forEach(_),r=F(x),a=A(x,"A",{href:!0,download:!0});var y=S(a);o=X(y,"download"),y.forEach(_),x.forEach(_),h=F(g),u=A(g,"DIV",{id:!0});var k=S(u);f=A(k,"TEXTAREA",{class:!0}),S(f).forEach(_),k.forEach(_),g.forEach(_),this.h()},h(){var v;E(n,"name","copy"),E(a,"href",l="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t[2]))),E(a,"download",c=`${(v=t[0].meta.name)!=null?v:`plant-${t[0].meta.id}`}.json`),E(s,"id","header"),f.value=d=JSON.stringify(t[2],null,2),E(f,"class","svelte-1sxpmf3"),E(u,"id","content"),E(e,"id","wrapper"),E(e,"class","svelte-1sxpmf3")},m(v,g){I(v,e,g),M(e,s),M(s,n),M(n,i),M(s,r),M(s,a),M(a,o),M(e,h),M(e,u),M(u,f),t[4](f),p||(m=Z(n,"click",t[3]),p=!0)},p(v,[g]){var x;g&4&&l!==(l="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(v[2])))&&E(a,"href",l),g&1&&c!==(c=`${(x=v[0].meta.name)!=null?x:`plant-${v[0].meta.id}`}.json`)&&E(a,"download",c),g&4&&d!==(d=JSON.stringify(v[2],null,2))&&(f.value=d)},i:H,o:H,d(v){v&&_(e),t[4](null),p=!1,m()}}}function Pv(t){const e=JSON.parse(JSON.stringify(t));return delete e.meta.thumbnail,delete e.meta.lastSaved,delete e.history,e}function Iv(t,e,s){let n,{project:i}=e,r;function a(){s(1,r.value=JSON.stringify(n),r),r.select(),document.execCommand("copy"),r.blur()}function o(l){Ae[l?"unshift":"push"](()=>{r=l,s(1,r)})}return t.$$set=l=>{"project"in l&&s(0,i=l.project)},t.$$.update=()=>{t.$$.dirty&1&&s(2,n=Pv(i))},[i,r,n,a,o]}class Nv extends ve{constructor(e){super(),ge(this,e,Iv,Av,ye,{project:0})}}function Lv(t){let e,s,n,i,r,a,o,l,c,h=sr(Date.now()-t[0].meta.lastSaved)+"",u,f,d,p,m,v,g,x,w,y,k,b,$;return{c(){e=T("div"),s=T("div"),n=R(),i=T("div"),r=T("div"),a=T("input"),l=R(),c=T("p"),u=W(h),f=W(" ago"),d=R(),p=T("div"),m=R(),v=T("div"),g=T("button"),x=W("delete"),w=R(),y=T("button"),k=W("export"),this.h()},l(P){e=A(P,"DIV",{class:!0});var D=S(e);s=A(D,"DIV",{class:!0,style:!0});var j=S(s);j.forEach(_),n=F(D),i=A(D,"DIV",{class:!0});var B=S(i);r=A(B,"DIV",{class:!0});var z=S(r);a=A(z,"INPUT",{contenteditable:!0,class:!0}),l=F(z),c=A(z,"P",{class:!0});var C=S(c);u=X(C,h),f=X(C," ago"),C.forEach(_),z.forEach(_),d=F(B),p=A(B,"DIV",{class:!0}),S(p).forEach(_),m=F(B),v=A(B,"DIV",{class:!0});var N=S(v);g=A(N,"BUTTON",{class:!0});var q=S(g);x=X(q,"delete"),q.forEach(_),w=F(N),y=A(N,"BUTTON",{class:!0});var Q=S(y);k=X(Q,"export"),Q.forEach(_),N.forEach(_),B.forEach(_),D.forEach(_),this.h()},h(){E(s,"class","project-image svelte-xxlw50"),K(s,"background-image","url("+t[0].meta.thumbnail+")"),E(a,"contenteditable",""),a.value=o=t[0].meta.name,E(a,"class","svelte-xxlw50"),E(c,"class","svelte-xxlw50"),E(r,"class","project-content-header svelte-xxlw50"),E(p,"class","project-content-main svelte-xxlw50"),E(g,"class","delete svelte-xxlw50"),E(y,"class","export svelte-xxlw50"),E(v,"class","project-content-footer svelte-xxlw50"),E(i,"class","project-content svelte-xxlw50"),E(e,"class","project-wrapper svelte-xxlw50"),ne(e,"active",t[0].meta.id===De.activeProjectId||t[1])},m(P,D){I(P,e,D),M(e,s),M(e,n),M(e,i),M(i,r),M(r,a),M(r,l),M(r,c),M(c,u),M(c,f),M(i,d),M(i,p),M(i,m),M(i,v),M(v,g),M(g,x),M(v,w),M(v,y),M(y,k),b||($=[Z(a,"blur",t[4]),Z(a,"keydown",t[5]),Z(g,"click",Rs(t[6])),Z(y,"click",Rs(t[7])),Z(e,"resize",alert),Z(e,"click",t[8])],b=!0)},p(P,[D]){D&1&&K(s,"background-image","url("+P[0].meta.thumbnail+")"),D&1&&o!==(o=P[0].meta.name)&&a.value!==o&&(a.value=o),D&1&&h!==(h=sr(Date.now()-P[0].meta.lastSaved)+"")&&Ee(u,h),D&3&&ne(e,"active",P[0].meta.id===De.activeProjectId||P[1])},i:H,o:H,d(P){P&&_(e),b=!1,Qe($)}}}function Dv(t,e,s){let{project:n}=e,i=!1;function r(){return s(1,i=!0),setTimeout(()=>{s(1,i=!1)},100),!0}async function a(){var d,p;await vt(`Are you sure you want to delete ${(d=n.meta.name)!=null?d:n.meta.id}?`,{values:["Yes","No"]})==="Yes"&&(await De.deleteProject(n.meta.id),Dt(`Project ${(p=n.meta.name)!=null?p:n.meta.id} deleted!`,{type:"success"}))}const o=function(){const f=this.value.split(`
`).join("").trim();De.updateProjectMeta(n.meta.id,{name:f})},l=function(f){if(f.key==="Enter"){const d=this.value.split(`
`).join("").trim();this.blur(),f.preventDefault(),De.updateProjectMeta(n.meta.id,{name:d})}},c=()=>a(),h=()=>vt(Nv,{props:{project:n},timeout:0}),u=()=>r()&&De.setActiveProject(n.meta.id);return t.$$set=f=>{"project"in f&&s(0,n=f.project)},[n,i,r,a,o,l,c,h,u]}class $v extends ve{constructor(e){super(),ge(this,e,Dv,Lv,ye,{project:0})}}function Fa(t,e,s){const n=t.slice();return n[9]=e[s],n}function Ov(t){let e;return{c(){e=T("div"),this.h()},l(s){e=A(s,"DIV",{class:!0}),S(e).forEach(_),this.h()},h(){E(e,"class","svelte-2b19un")},m(s,n){I(s,e,n)},p:H,d(s){s&&_(e)}}}function Cv(t){let e,s,n;return{c(){e=T("input"),this.h()},l(i){e=A(i,"INPUT",{type:!0,class:!0,placeholder:!0}),this.h()},h(){E(e,"type","text"),E(e,"class","search svelte-2b19un"),E(e,"placeholder","Search")},m(i,r){I(i,e,r),qe(e,t[1]),s||(n=Z(e,"input",t[8]),s=!0)},p(i,r){r&2&&e.value!==i[1]&&qe(e,i[1])},d(i){i&&_(e),s=!1,n()}}}function Ba(t){let e,s,n=t[2],i=[];for(let a=0;a<n.length;a+=1)i[a]=qa(Fa(t,n,a));const r=a=>V(i[a],1,1,()=>{i[a]=null});return{c(){e=T("div");for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=A(a,"DIV",{class:!0});var o=S(e);for(let l=0;l<i.length;l+=1)i[l].l(o);o.forEach(_),this.h()},h(){E(e,"class","project-list svelte-2b19un")},m(a,o){I(a,e,o);for(let l=0;l<i.length;l+=1)i[l].m(e,null);s=!0},p(a,o){if(o&6){n=a[2];let l;for(l=0;l<n.length;l+=1){const c=Fa(a,n,l);i[l]?(i[l].p(c,o),L(i[l],1)):(i[l]=qa(c),i[l].c(),L(i[l],1),i[l].m(e,null))}for(pe(),l=n.length;l<i.length;l+=1)r(l);de()}},i(a){if(!s){for(let o=0;o<n.length;o+=1)L(i[o]);s=!0}},o(a){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)V(i[o]);s=!1},d(a){a&&_(e),Fe(i,a)}}}function Ua(t){let e,s;return e=new $v({props:{project:t[9]}}),{c(){re(e.$$.fragment)},l(n){le(e.$$.fragment,n)},m(n,i){ae(e,n,i),s=!0},p(n,i){const r={};i&4&&(r.project=n[9]),e.$set(r)},i(n){s||(L(e.$$.fragment,n),s=!0)},o(n){V(e.$$.fragment,n),s=!1},d(n){oe(e,n)}}}function qa(t){let e=Wa(t[1],t[9]),s,n,i=e&&Ua(t);return{c(){i&&i.c(),s=he()},l(r){i&&i.l(r),s=he()},m(r,a){i&&i.m(r,a),I(r,s,a),n=!0},p(r,a){a&6&&(e=Wa(r[1],r[9])),e?i?(i.p(r,a),a&6&&L(i,1)):(i=Ua(r),i.c(),L(i,1),i.m(s.parentNode,s)):i&&(pe(),V(i,1,1,()=>{i=null}),de())},i(r){n||(L(i),n=!0)},o(r){V(i),n=!1},d(r){i&&i.d(r),r&&_(s)}}}function Vv(t){let e,s,n,i,r,a,o,l,c,h,u,f,d,p;function m(w,y){return w[2].length>3?Cv:Ov}let v=m(t),g=v(t),x=t[0]&&Ba(t);return{c(){e=T("div"),s=T("div"),n=T("button"),i=T("p"),r=W("new"),a=R(),o=T("button"),l=T("p"),c=W("import"),h=R(),g.c(),u=R(),x&&x.c(),this.h()},l(w){e=A(w,"DIV",{class:!0,style:!0});var y=S(e);s=A(y,"DIV",{class:!0});var k=S(s);n=A(k,"BUTTON",{class:!0});var b=S(n);i=A(b,"P",{class:!0});var $=S(i);r=X($,"new"),$.forEach(_),b.forEach(_),a=F(k),o=A(k,"BUTTON",{class:!0});var P=S(o);l=A(P,"P",{class:!0});var D=S(l);c=X(D,"import"),D.forEach(_),P.forEach(_),h=F(k),g.l(k),k.forEach(_),u=F(y),x&&x.l(y),y.forEach(_),this.h()},h(){E(i,"class","svelte-2b19un"),E(n,"class","add-new svelte-2b19un"),E(l,"class","svelte-2b19un"),E(o,"class","import svelte-2b19un"),E(s,"class","header svelte-2b19un"),E(e,"class","project-manager-wrapper svelte-2b19un"),E(e,"style",`width: ${t[4]}px; height: ${t[5]}px;`)},m(w,y){I(w,e,y),M(e,s),M(s,n),M(n,i),M(i,r),M(s,a),M(s,o),M(o,l),M(l,c),M(s,h),g.m(s,null),M(e,u),x&&x.m(e,null),f=!0,d||(p=[Z(n,"click",t[6]),Z(o,"click",t[7])],d=!0)},p(w,[y]){v===(v=m(w))&&g?g.p(w,y):(g.d(1),g=v(w),g&&(g.c(),g.m(s,null))),w[0]?x?(x.p(w,y),y&1&&L(x,1)):(x=Ba(w),x.c(),L(x,1),x.m(e,null)):x&&(pe(),V(x,1,1,()=>{x=null}),de())},i(w){f||(L(x),f=!0)},o(w){V(x),f=!1},d(w){w&&_(e),g.d(),x&&x.d(),d=!1,Qe(p)}}}function Wa(t,e){if(!t||t.length<1)return!0;const s=e.meta.name.toLowerCase();return t=t.toLowerCase(),!!(s.includes(t)||t.includes(s))}function zv(t,e,s){var f;let n;const{store:i}=De;ht(t,i,d=>s(2,n=d));let{visible:r}=e,a;const{width:o,height:l}=nt.get("projectManagerSize",{width:300,height:((f=globalThis.innerHeight)!=null?f:1)/2}),c=()=>De.createNew(),h=()=>vt(Tv,{timeout:0});function u(){a=this.value,s(1,a)}return t.$$set=d=>{"visible"in d&&s(0,r=d.visible)},[r,a,n,i,o,l,c,h,u]}class jv extends ve{constructor(e){super(),ge(this,e,zv,Vv,ye,{visible:0})}}const Gn={enableSync:{type:"boolean",value:!1},useRandomSeed:{type:"boolean",defaultValue:!1},theme:{type:"select",values:["dark","light"],value:"dark",inputType:"tab"},debug:{onlyDev:!0,options:{showNodeUpdates:{type:"boolean",defaultValue:!1},renderPerf:{type:"boolean",defaultValue:!1},generatePerf:{type:"boolean",defaultValue:!1},pd:{type:"boolean",defaultValue:!1},skeleton:{type:"boolean",defaultValue:!1},wireframe:{type:"boolean",defaultValue:!1},logLevel:{type:"number",min:0,max:2,defaultValue:1}}},background:{options:{grid:{label:"Show Grid",type:"boolean",defaultValue:!1},ground:{label:"Show Ground",type:"boolean",defaultValue:!0},resX:{onlyDev:!0,type:"number",min:8,max:64,step:1,defaultValue:8},resY:{onlyDev:!0,type:"number",min:8,max:64,step:1,defaultValue:16},scale:{type:"number",min:0,max:5,step:.1,defaultValue:1}}},leafRes:{onlyDev:!0,type:"number",min:3,max:12,step:1,defaultValue:2},stemResX:{onlyDev:!0,type:"number",min:3,max:32,step:1,defaultValue:3},stemResY:{onlyDev:!0,type:"number",min:3,max:64,step:1,defaultValue:32},isDev:{label:"Advanced",type:"boolean",defaultValue:!1}},$s=je("SettingsManager"),kl=(t,e)=>{const s={};return Object.entries(t).forEach(([n,i])=>{var a;const r=e&&n in e?e[n]:void 0;typeof i=="object"&&"options"in i?s[n]=kl(i.options,r):s[n]=(a=r!=null?r:i.defaultValue)!=null?a:i.value}),s},Zn=(t,e)=>{const s=e.shift();if(s&&s in t)return e.length?Zn(t[s],e):t[s]},Xa=t=>t.includes(".")?t.split("."):[t];class Rv extends it{constructor(){super(),this.settings={},this.store=Ye(this.settings),$s("Initialized"),this._save=Po(()=>{rs("pt_settings",this.settings)},500,!1)}save(){var e,s,n;this.emit("settings",this.settings),je.setLevel((n=(s=(e=this.settings)==null?void 0:e.debug)==null?void 0:s.logLevel)!=null?n:2),this.store.set(this.settings),$s("save settings",this.settings),this._save()}async loadFromLocal(){var s,n,i;const e=await js("pt_settings")||{};this.settings=kl(Gn,e),je.setLevel((i=(n=(s=this.settings)==null?void 0:s.debug)==null?void 0:n.logLevel)!=null?i:2),this.store.set(this.settings),$s("loaded settings from local",this.settings),this.emit("settings",this.settings)}set(e,s){const n=Xa(e);if(n.length>1){const i=n.pop(),r=Zn(this.settings,n);r&&(r[i]=s)}else this.settings[n[0]]=s;$s(`Set ${e}`,s),this.emit(e+".update",s),this.save()}get(e){return Zn(this.settings,Xa(e))}getSettings(){return JSON.parse(JSON.stringify(this.settings))}}let Fv=0;const Pn=nt.get("sections")||[];var Bv=()=>{const t=Fv++;return{get(){return Pn[t]||!1},set(e){Pn[t]=e,nt.set("sections",Pn)}}};function Ya(t,e,s){const n=t.slice();return n[11]=e[s][0],n[12]=e[s][1],n}function Ha(t){let e,s,n,i,r;const a=[qv,Uv],o=[];function l(c,h){return c[3].options?0:1}return s=l(t),n=o[s]=a[s](t),{c(){e=T("div"),n.c(),this.h()},l(c){e=A(c,"DIV",{class:!0});var h=S(e);n.l(h),h.forEach(_),this.h()},h(){E(e,"class","wrapper svelte-1glihwf")},m(c,h){I(c,e,h),o[s].m(e,null),r=!0},p(c,h){let u=s;s=l(c),s===u?o[s].p(c,h):(pe(),V(o[u],1,1,()=>{o[u]=null}),de(),n=o[s],n?n.p(c,h):(n=o[s]=a[s](c),n.c()),L(n,1),n.m(e,null))},i(c){r||(L(n),ls(()=>{i||(i=lt(e,Gt,{},!0)),i.run(1)}),r=!0)},o(c){V(n),i||(i=lt(e,Gt,{},!1)),i.run(0),r=!1},d(c){c&&_(e),o[s].d(),c&&i&&i.end()}}}function Uv(t){let e,s=(t[3].label||t[2])+"",n,i,r,a,o;const l=[{value:t[1]},t[8](t[6])];var c=qs(t[6],t[1]);function h(u){let f={};for(let d=0;d<l.length;d+=1)f=wo(f,l[d]);return{props:f}}return c&&(r=new c(h()),r.$on("change",t[10])),{c(){e=T("p"),n=W(s),i=R(),r&&re(r.$$.fragment),a=he()},l(u){e=A(u,"P",{});var f=S(e);n=X(f,s),f.forEach(_),i=F(u),r&&le(r.$$.fragment,u),a=he()},m(u,f){I(u,e,f),M(e,n),I(u,i,f),r&&ae(r,u,f),I(u,a,f),o=!0},p(u,f){(!o||f&12)&&s!==(s=(u[3].label||u[2])+"")&&Ee(n,s);const d=f&322?yo(l,[f&2&&{value:u[1]},f&320&&_o(u[8](u[6]))]):{};if(c!==(c=qs(u[6],u[1]))){if(r){pe();const p=r;V(p.$$.fragment,1,0,()=>{oe(p,1)}),de()}c?(r=new c(h()),r.$on("change",u[10]),re(r.$$.fragment),L(r.$$.fragment,1),ae(r,a.parentNode,a)):r=null}else c&&r.$set(d)},i(u){o||(r&&L(r.$$.fragment,u),o=!0)},o(u){r&&V(r.$$.fragment,u),o=!1},d(u){u&&_(e),u&&_(i),u&&_(a),r&&oe(r,u)}}}function qv(t){let e,s;return e=new us({props:{name:t[2],open:t[7].get(),$$slots:{default:[Yv]},$$scope:{ctx:t}}}),e.$on("toggle",t[9]),{c(){re(e.$$.fragment)},l(n){le(e.$$.fragment,n)},m(n,i){ae(e,n,i),s=!0},p(n,i){const r={};i&4&&(r.name=n[2]),i&32779&&(r.$$scope={dirty:i,ctx:n}),e.$set(r)},i(n){s||(L(e.$$.fragment,n),s=!0)},o(n){V(e.$$.fragment,n),s=!1},d(n){oe(e,n)}}}function Wv(t){let e,s;return{c(){e=T("p"),s=W("error")},l(n){e=A(n,"P",{});var i=S(e);s=X(i,"error"),i.forEach(_)},m(n,i){I(n,e,i),M(e,s)},p:H,i:H,o:H,d(n){n&&_(e)}}}function Xv(t){let e,s;return e=new Sl({props:{path:t[0],value:t[12],key:t[11],template:t[3].options[t[11]]}}),{c(){re(e.$$.fragment)},l(n){le(e.$$.fragment,n)},m(n,i){ae(e,n,i),s=!0},p(n,i){const r={};i&1&&(r.path=n[0]),i&2&&(r.value=n[12]),i&2&&(r.key=n[11]),i&10&&(r.template=n[3].options[n[11]]),e.$set(r)},i(n){s||(L(e.$$.fragment,n),s=!0)},o(n){V(e.$$.fragment,n),s=!1},d(n){oe(e,n)}}}function Ga(t){let e,s,n,i;const r=[Xv,Wv],a=[];function o(l,c){return l[11]in l[3].options?0:1}return e=o(t),s=a[e]=r[e](t),{c(){s.c(),n=he()},l(l){s.l(l),n=he()},m(l,c){a[e].m(l,c),I(l,n,c),i=!0},p(l,c){let h=e;e=o(l),e===h?a[e].p(l,c):(pe(),V(a[h],1,1,()=>{a[h]=null}),de(),s=a[e],s?s.p(l,c):(s=a[e]=r[e](l),s.c()),L(s,1),s.m(n.parentNode,n))},i(l){i||(L(s),i=!0)},o(l){V(s),i=!1},d(l){a[e].d(l),l&&_(n)}}}function Yv(t){let e,s,n=Object.entries(t[1]),i=[];for(let a=0;a<n.length;a+=1)i[a]=Ga(Ya(t,n,a));const r=a=>V(i[a],1,1,()=>{i[a]=null});return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=he()},l(a){for(let o=0;o<i.length;o+=1)i[o].l(a);e=he()},m(a,o){for(let l=0;l<i.length;l+=1)i[l].m(a,o);I(a,e,o),s=!0},p(a,o){if(o&11){n=Object.entries(a[1]);let l;for(l=0;l<n.length;l+=1){const c=Ya(a,n,l);i[l]?(i[l].p(c,o),L(i[l],1)):(i[l]=Ga(c),i[l].c(),L(i[l],1),i[l].m(e.parentNode,e))}for(pe(),l=n.length;l<i.length;l+=1)r(l);de()}},i(a){if(!s){for(let o=0;o<n.length;o+=1)L(i[o]);s=!0}},o(a){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)V(i[o]);s=!1},d(a){Fe(i,a),a&&_(e)}}}function Hv(t){let e,s,n=(t[4].isDev||!t[3].onlyDev)&&Ha(t);return{c(){n&&n.c(),e=he()},l(i){n&&n.l(i),e=he()},m(i,r){n&&n.m(i,r),I(i,e,r),s=!0},p(i,[r]){i[4].isDev||!i[3].onlyDev?n?(n.p(i,r),r&24&&L(n,1)):(n=Ha(i),n.c(),L(n,1),n.m(e.parentNode,e)):n&&(pe(),V(n,1,1,()=>{n=null}),de())},i(i){s||(L(n),s=!0)},o(i){V(n),s=!1},d(i){n&&n.d(i),i&&_(e)}}}function Gv(t,e,s){let n;const i=We.store;ht(t,i,p=>s(4,n=p));let{value:r}=e,{key:a}=e,{path:o=""}=e;o=o+(o.length?".":"")+a;let{template:l}=e,c=l;const h=Bv(),u=p=>{const m=Se({},p);return delete m.defaultValue,delete m.type,m},f=({detail:p})=>h.set(p),d=p=>We.set(o,p.detail);return t.$$set=p=>{"value"in p&&s(1,r=p.value),"key"in p&&s(2,a=p.key),"path"in p&&s(0,o=p.path),"template"in p&&s(3,l=p.template)},[o,r,a,l,n,i,c,h,u,f,d]}class Sl extends ve{constructor(e){super(),ge(this,e,Gv,Hv,ye,{value:1,key:2,path:0,template:3})}}function Za(t,e,s){const n=t.slice();return n[2]=e[s][0],n[3]=e[s][1],n}function Ja(t){let e,s;return e=new Sl({props:{key:t[2],value:t[3],template:Gn[t[2]]}}),{c(){re(e.$$.fragment)},l(n){le(e.$$.fragment,n)},m(n,i){ae(e,n,i),s=!0},p(n,i){const r={};i&1&&(r.key=n[2]),i&1&&(r.value=n[3]),i&1&&(r.template=Gn[n[2]]),e.$set(r)},i(n){s||(L(e.$$.fragment,n),s=!0)},o(n){V(e.$$.fragment,n),s=!1},d(n){oe(e,n)}}}function Zv(t){let e,s,n=Object.entries(t[0]),i=[];for(let a=0;a<n.length;a+=1)i[a]=Ja(Za(t,n,a));const r=a=>V(i[a],1,1,()=>{i[a]=null});return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=he()},l(a){for(let o=0;o<i.length;o+=1)i[o].l(a);e=he()},m(a,o){for(let l=0;l<i.length;l+=1)i[l].m(a,o);I(a,e,o),s=!0},p(a,[o]){if(o&1){n=Object.entries(a[0]);let l;for(l=0;l<n.length;l+=1){const c=Za(a,n,l);i[l]?(i[l].p(c,o),L(i[l],1)):(i[l]=Ja(c),i[l].c(),L(i[l],1),i[l].m(e.parentNode,e))}for(pe(),l=n.length;l<i.length;l+=1)r(l);de()}},i(a){if(!s){for(let o=0;o<n.length;o+=1)L(i[o]);s=!0}},o(a){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)V(i[o]);s=!1},d(a){Fe(i,a),a&&_(e)}}}function Jv(t,e,s){let n;const i=We.store;return ht(t,i,r=>s(0,n=r)),[n,i]}class Kv extends ve{constructor(e){super(),ge(this,e,Jv,Zv,ye,{})}}function Qv(t){let e,s;return{c(){e=T("p"),s=W(`\u{1F389} Now you have all the knowledge to use the Plantarium. Have some fun with
  it.`),this.h()},l(n){e=A(n,"P",{class:!0});var i=S(e);s=X(i,`\u{1F389} Now you have all the knowledge to use the Plantarium. Have some fun with
  it.`),i.forEach(_),this.h()},h(){E(e,"class","svelte-1h3eb6p")},m(n,i){I(n,e,i),M(e,s)},p:H,i:H,o:H,d(n){n&&_(e)}}}class e2 extends ve{constructor(e){super(),ge(this,e,null,Qv,ye,{})}}function t2(t){let e,s,n,i,r,a,o,l,c,h,u,f;return i=new Jt({props:{name:"hand"}}),{c(){e=T("p"),s=W("Hey there "),n=T("span"),r=T("div"),re(i.$$.fragment),a=R(),o=T("p"),l=W("Welcome to "),c=T("b"),h=W("Plantarium"),u=W(`, a tool for creating parametrized, procedural 3D
  plants.`),this.h()},l(d){e=A(d,"P",{class:!0});var p=S(e);s=X(p,"Hey there "),n=A(p,"SPAN",{class:!0});var m=S(n);r=A(m,"DIV",{style:!0});var v=S(r);le(i.$$.fragment,v),m.forEach(_),p.forEach(_),a=F(d),o=A(d,"P",{class:!0});var g=S(o);l=X(g,"Welcome to "),c=A(g,"B",{});var x=S(c);h=X(x,"Plantarium"),x.forEach(_),u=X(g,`, a tool for creating parametrized, procedural 3D
  plants.`),g.forEach(_),this.h()},h(){K(r,"display","contents"),K(r,"--stroke","#1a1a1a"),E(n,"class","svelte-1tutruj"),E(e,"class","svelte-1tutruj"),E(o,"class","svelte-1tutruj")},m(d,p){I(d,e,p),M(e,s),M(e,n),M(n,r),ae(i,r,null),I(d,a,p),I(d,o,p),M(o,l),M(o,c),M(c,h),M(o,u),f=!0},p:H,i(d){f||(L(i.$$.fragment,d),f=!0)},o(d){V(i.$$.fragment,d),f=!1},d(d){d&&_(e),oe(i),d&&_(a),d&&_(o)}}}class s2 extends ve{constructor(e){super(),ge(this,e,null,t2,ye,{})}}const In=[{title:"Tutorial",description:s2,options:{"lets go":()=>{}},type:"alert"},{description:`This is the <b>Plant View</b>, here you can explore the generated 3D model of your plant. 
      Try to change the view by:`,selector:".scene-wrapper",checks:[{description:"Clicking and dragging",setup:function(t,{c:e}){const s=document.querySelector(e.selector);s.getAttribute("setup")!=="true"&&(s.setAttribute("setup","true"),s.addEventListener("click",t,{once:!0}))}},{description:"Scrolling / Zooming",setup:(t,{c:e})=>{const s=document.querySelector(e.selector+"> canvas");s.getAttribute("setup")!=="true"&&(s.setAttribute("setup","true"),s.addEventListener("wheel",t,{once:!0,passive:!0}))}}]},{selector:"#nodesystem-view",description:'This is the <b>Node View</b>, here you define the way your plant looks. Try playing with some of the settings. If you are not so sure how this works, maybe visit the <a href="/nodes/tutorial">NodeTutorial</a>'},{description:"This Button opens the project view",clickSelector:"header > div.left > div > div"},{description:"This is the ProjectView, here you can create/rename/delete projects.",selector:".project-manager-wrapper",checks:[{description:"create a new project",setup:(t,{pm:e})=>{e.once("new",t)}},{description:"rename the project",setup:(t,{pm:e})=>{e.once("update",t)}},{description:"delete the project",setup:(t,{pm:e})=>{e.once("delete",t)}}]},{description:"This Button opens the <b>Settings View</b>",clickSelector:"header > div.right > div:nth-child(2) .icon-wrapper"},{description:"This is the <b>SettingView</b>, here you can change some general settings.",selector:"header > div.right > div:nth-child(2) > div > div > div.wrapper.right.visible"},{description:"When you encounter something which doesnt work or you have an Idea for a new feature, use this button to report it.",clickSelector:"header > div.right > div:nth-child(1) > div"},{title:"Tutorial",description:e2,options:{"lets go":()=>{}},type:"alert"}];var os=Ye(void 0);function Ka(t,e,s){const n=t.slice();return n[14]=e[s],n[15]=e,n[16]=s,n}function Qa(t){let e,s,n,i,r,a,o,l,c=t[6].description+"",h,u,f,d,p,m=t[3]&&eo(t);r=new Xe({props:{icon:"cross"}}),r.$on("click",t[11]);let v=t[1]&&to(t),g=!t[4]&&no(t),x=t[0]&&t[5]&&io(t);return{c(){e=T("span"),m&&m.c(),s=R(),n=T("div"),i=T("div"),a=T("div"),re(r.$$.fragment),o=R(),l=T("p"),h=R(),v&&v.c(),u=R(),g&&g.c(),d=R(),x&&x.c(),this.h()},l(w){e=A(w,"SPAN",{class:!0});var y=S(e);m&&m.l(y),s=F(y),n=A(y,"DIV",{class:!0,style:!0});var k=S(n);i=A(k,"DIV",{class:!0});var b=S(i);a=A(b,"DIV",{style:!0});var $=S(a);le(r.$$.fragment,$),b.forEach(_),o=F(k),l=A(k,"P",{class:!0});var P=S(l);P.forEach(_),h=F(k),v&&v.l(k),u=F(k),g&&g.l(k),k.forEach(_),d=F(y),x&&x.l(y),y.forEach(_),this.h()},h(){K(a,"display","contents"),K(a,"--foreground-color","transparent"),E(i,"class","close-wrapper svelte-10hv86l"),E(l,"class","svelte-10hv86l"),E(n,"class","wrapper svelte-10hv86l"),E(n,"style",f=`left: ${t[8]}px; top: ${t[0].top+20}px;`),E(e,"class","svelte-10hv86l"),ne(e,"isLeft",t[2]),ne(e,"hasElement",!!t[5]),ne(e,"hasClick",!!t[3])},m(w,y){I(w,e,y),m&&m.m(e,null),M(e,s),M(e,n),M(n,i),M(i,a),ae(r,a,null),M(n,o),M(n,l),l.innerHTML=c,M(n,h),v&&v.m(n,null),M(n,u),g&&g.m(n,null),M(e,d),x&&x.m(e,null),p=!0},p(w,y){w[3]?m?(m.p(w,y),y&8&&L(m,1)):(m=eo(w),m.c(),L(m,1),m.m(e,s)):m&&(pe(),V(m,1,1,()=>{m=null}),de()),(!p||y&64)&&c!==(c=w[6].description+"")&&(l.innerHTML=c),w[1]?v?(v.p(w,y),y&2&&L(v,1)):(v=to(w),v.c(),L(v,1),v.m(n,u)):v&&(pe(),V(v,1,1,()=>{v=null}),de()),w[4]?g&&(pe(),V(g,1,1,()=>{g=null}),de()):g?(g.p(w,y),y&16&&L(g,1)):(g=no(w),g.c(),L(g,1),g.m(n,null)),(!p||y&257&&f!==(f=`left: ${w[8]}px; top: ${w[0].top+20}px;`))&&E(n,"style",f),w[0]&&w[5]?x?x.p(w,y):(x=io(w),x.c(),x.m(e,null)):x&&(x.d(1),x=null),y&4&&ne(e,"isLeft",w[2]),y&32&&ne(e,"hasElement",!!w[5]),y&8&&ne(e,"hasClick",!!w[3])},i(w){p||(L(m),L(r.$$.fragment,w),L(v),L(g),p=!0)},o(w){V(m),V(r.$$.fragment,w),V(v),V(g),p=!1},d(w){w&&_(e),m&&m.d(),oe(r),v&&v.d(),g&&g.d(),x&&x.d()}}}function eo(t){let e,s,n,i,r;return s=new Jt({props:{name:"pointing"}}),{c(){e=T("div"),n=T("div"),re(s.$$.fragment),this.h()},l(a){e=A(a,"DIV",{class:!0,style:!0});var o=S(e);n=A(o,"DIV",{style:!0});var l=S(n);le(s.$$.fragment,l),o.forEach(_),this.h()},h(){K(n,"display","contents"),K(n,"--fill","#303030"),E(e,"class","click-wrapper svelte-10hv86l"),E(e,"style",i=`top: ${t[0].top+20}px; left: ${t[8]-(t[2]?20:-0)}px;`)},m(a,o){I(a,e,o),M(e,n),ae(s,n,null),r=!0},p(a,o){(!r||o&261&&i!==(i=`top: ${a[0].top+20}px; left: ${a[8]-(a[2]?20:-0)}px;`))&&E(e,"style",i)},i(a){r||(L(s.$$.fragment,a),r=!0)},o(a){V(s.$$.fragment,a),r=!1},d(a){a&&_(e),oe(s)}}}function to(t){let e,s,n=t[1],i=[];for(let a=0;a<n.length;a+=1)i[a]=so(Ka(t,n,a));const r=a=>V(i[a],1,1,()=>{i[a]=null});return{c(){e=T("div");for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=A(a,"DIV",{class:!0});var o=S(e);for(let l=0;l<i.length;l+=1)i[l].l(o);o.forEach(_),this.h()},h(){E(e,"class","checks-wrapper svelte-10hv86l")},m(a,o){I(a,e,o);for(let l=0;l<i.length;l+=1)i[l].m(e,null);s=!0},p(a,o){if(o&2){n=a[1];let l;for(l=0;l<n.length;l+=1){const c=Ka(a,n,l);i[l]?(i[l].p(c,o),L(i[l],1)):(i[l]=so(c),i[l].c(),L(i[l],1),i[l].m(e,null))}for(pe(),l=n.length;l<i.length;l+=1)r(l);de()}},i(a){if(!s){for(let o=0;o<n.length;o+=1)L(i[o]);s=!0}},o(a){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)V(i[o]);s=!1},d(a){a&&_(e),Fe(i,a)}}}function so(t){let e,s,n,i,r,a=t[14].description+"",o,l,c;function h(f){t[12](f,t[14])}let u={};return t[14]._isCompleted!==void 0&&(u.value=t[14]._isCompleted),s=new Zt({props:u}),Ae.push(()=>Yt(s,"value",h)),{c(){e=T("div"),re(s.$$.fragment),i=R(),r=T("p"),o=W(a),l=R(),this.h()},l(f){e=A(f,"DIV",{class:!0});var d=S(e);le(s.$$.fragment,d),i=F(d),r=A(d,"P",{class:!0});var p=S(r);o=X(p,a),p.forEach(_),l=F(d),d.forEach(_),this.h()},h(){E(r,"class","svelte-10hv86l"),E(e,"class","check-wrapper svelte-10hv86l"),ne(e,"is-completed",t[14]._isCompleted)},m(f,d){I(f,e,d),ae(s,e,null),M(e,i),M(e,r),M(r,o),M(e,l),c=!0},p(f,d){t=f;const p={};!n&&d&2&&(n=!0,p.value=t[14]._isCompleted,Ht(()=>n=!1)),s.$set(p),(!c||d&2)&&a!==(a=t[14].description+"")&&Ee(o,a),d&2&&ne(e,"is-completed",t[14]._isCompleted)},i(f){c||(L(s.$$.fragment,f),c=!0)},o(f){V(s.$$.fragment,f),c=!1},d(f){f&&_(e),oe(s)}}}function no(t){let e,s,n,i;return s=new Xe({props:{name:"next"}}),s.$on("click",t[13]),{c(){e=T("div"),n=T("div"),re(s.$$.fragment),this.h()},l(r){e=A(r,"DIV",{class:!0});var a=S(e);n=A(a,"DIV",{style:!0});var o=S(n);le(s.$$.fragment,o),a.forEach(_),this.h()},h(){K(n,"display","contents"),K(n,"--text","white"),K(n,"--bg","#303030"),E(e,"class","next-wrapper svelte-10hv86l")},m(r,a){I(r,e,a),M(e,n),ae(s,n,null),i=!0},p:H,i(r){i||(L(s.$$.fragment,r),i=!0)},o(r){V(s.$$.fragment,r),i=!1},d(r){r&&_(e),oe(s)}}}function io(t){let e,s;return{c(){e=T("span"),this.h()},l(n){e=A(n,"SPAN",{class:!0,style:!0}),S(e).forEach(_),this.h()},h(){E(e,"class","highlighter  svelte-10hv86l"),E(e,"style",s=`width: ${t[0].width}px; height: ${t[0].height}px; left: ${t[0].left}px; top: ${t[0].top}px;`)},m(n,i){I(n,e,i)},p(n,i){i&1&&s!==(s=`width: ${n[0].width}px; height: ${n[0].height}px; left: ${n[0].left}px; top: ${n[0].top}px;`)&&E(e,"style",s)},d(n){n&&_(e)}}}function n2(t){let e,s,n=t[7]&&Qa(t);return{c(){n&&n.c(),e=he()},l(i){n&&n.l(i),e=he()},m(i,r){n&&n.m(i,r),I(i,e,r),s=!0},p(i,[r]){i[7]?n?(n.p(i,r),r&128&&L(n,1)):(n=Qa(i),n.c(),L(n,1),n.m(e.parentNode,e)):n&&(pe(),V(n,1,1,()=>{n=null}),de())},i(i){s||(L(n),s=!0)},o(i){V(n),s=!1},d(i){n&&n.d(i),i&&_(e)}}}function i2(t,e,s){let n,i,r,a,o,l,c,h,u,f,d;ht(t,os,g=>s(6,d=g));const p=()=>{s(7,f=!1)};function m(g,x){t.$$.not_equal(x._isCompleted,g)&&(x._isCompleted=g,s(1,u),s(6,d))}const v=()=>Ci(os,d._isCompleted=!0,d);return t.$$.update=()=>{if(t.$$.dirty&64&&d&&d.clickSelector){const g=document.querySelector(d.clickSelector);g&&g.getAttribute("setup")!=="true"&&(g.setAttribute("setup","true"),g.addEventListener("click",()=>{setTimeout(()=>{Ci(os,d._isCompleted=!0,d)},20)},{once:!0}))}t.$$.dirty&64&&s(10,n=d&&d.selector),t.$$.dirty&1024&&s(5,i=n&&document.querySelector(n)),t.$$.dirty&32&&s(9,r=i&&i.getBoundingClientRect()),t.$$.dirty&64&&s(4,a=d&&d.clickSelector&&document.querySelector(d.clickSelector)),t.$$.dirty&16&&s(3,o=a&&a.getBoundingClientRect()),t.$$.dirty&520&&s(0,l=r||o),t.$$.dirty&1&&s(2,c=l&&l.left+l.width>window.innerWidth-100),t.$$.dirty&5&&s(8,h=l&&(c?l.left-10:l.left+l.width+10)),t.$$.dirty&64&&s(1,u=d&&d.checks),t.$$.dirty&66&&u&&u.forEach((g,x)=>(g._isSetup||(g._isSetup=!0,g.setup(()=>{s(1,u[x]._isCompleted=!0,u),s(1,u),s(6,d)},{pm:De,c:d})),g)),t.$$.dirty&1&&s(7,f=!!l)},[l,u,c,o,a,i,d,f,h,r,n,p,m,v]}class r2 extends ve{constructor(e){super(),ge(this,e,i2,n2,ye,{})}}const ro=["yes","next","lets go","okay"];let ao;const Tl={handleReject:()=>{nt.set("hasViewedTutorial",!0),Dt("The tutorial is accessable under...")},currentIndex:0,previous:async function(){},next:async function(){var s;const t=In[this.currentIndex];if(this.currentIndex===In.length)return;if(t.setup&&await t.setup({pm:ao}),os.set(t),this.currentIndex++,this.currentIndex>2&&nt.set("hasViewedTutorial",!0),t.title=(s=t.title)!=null?s:`Tutorial (${this.currentIndex}/${In.length})`,t.type==="alert"){const n=await vt(t.description,{title:t.title,type:"success",values:t.options?Object.keys(t.options):void 0,timeout:0});if(ro.includes(n.toString()))return this.next()}if(t.type==="toast"){const n=await Dt(t.description,{values:t.options?Object.keys(t.options):void 0,timeout:0});if(ro.includes(n.toString()))return this.next()}const e=os.subscribe(n=>{n._isCompleted&&(e(),this.next())})},init:function({projectManager:t}){if(nt.get("hasViewedTutorial"))return;ao=t;const e=`It looks like this is your first time here...
    Want to take a little tour? `;setTimeout(async()=>{await Dt(e,{title:"",timeout:8e3,values:["nah","yes"]})==="yes"?this.next():this.handleReject()},1e4)},restart:function(){nt.set("hasViewedTutorial",!1),this.currentIndex=0,this.next()}},a2=Ye([]),o2=Ye([]),Al={},Jn={render:!1,generate:!1},Kn={render:a2,generate:o2};function l2(t){Al[t]=performance.now()}function Pl(t){var e,s;Jn.render=!!((e=t==null?void 0:t.debug)!=null&&e.renderPerf),Jn.generate=!!((s=t==null?void 0:t.debug)!=null&&s.generatePerf)}function Il(t,e){(t in Kn?Kn[t]:Ye([])).update(n=>(n.push(e),n.length>200&&n.shift(),n)),t in Qn&&Qn[t]()}function c2(t){var s;if(!Jn[t])return;const e=performance.now()-((s=Al[t])!=null?s:0);Il(t,e)}const oo={},Qn={};function lo(t,e){e=e||oo[t]||document.createElement("canvas"),oo[t]=e;const s=200,n=100;e.width=s,e.height=n;const i=e.getContext("2d");Qn[t]=()=>{const r=[...ql(Kn[t])],a=Math.max(...r);let o=0;const l=s/200;i.clearRect(0,0,s,n),i.fillStyle="rgba(255, 255, 255, 0.5)",i.fillRect(0,0,s,n);for(let c=0;c<r.length;c++){o+=r[c];const h=r[c]*(n/a);i.fillStyle="rgba(0, 0, 0, 0.5)",i.fillRect(c*l,n-h,l,h)}i.fillStyle="black",i.textAlign="left",i.fillText(t+"",10,10),i.textAlign="right",i.fillText(`avg: ${Math.floor(o/r.length*10)/10}ms max: ${Math.floor(a*10)/10}ms`,180,10)}}const We=new Rv,De=new fv;bo(We.get("theme"));Pl(We.getSettings());We.on("enableSync.update",t=>{Dt(`${t?"Enabled":"Disabled"} sync`,{type:"success"})});We.on("debug.logLevel.update",t=>{je.setLevel(t)});We.on("theme.update",t=>{document.body.classList.add("transition-all"),setTimeout(()=>{bo(t),setTimeout(()=>{document.body.classList.remove("transition-all")},400)},100)});const Ot=new gl({view:!0,defaultNodes:!1,registerNodes:ol,deferCompute:!0});We.on("debug.showNodeUpdates.update",t=>{console.log(t),Ot.options.showUpdates=t});De.on("load",t=>Ot.load(t));Ot.on("result",()=>De.setProject(Ot.serialize()),50);Ot.on("save",t=>{De.saveProject(t)});We.on("settings",t=>{De.setSettings(t),Pl(t)},50);Tl.init({projectManager:De});const h2=(t,e)=>{const{background:{scale:s=1,resX:n=16,resY:i=16}={}}=e||{},r=s!=null?s:0,a=n!=null?n:8,o=i!=null?i:8,l=Sd(r,a,o);return mi(t,l)};class u2{constructor(e,s){this.scene=e,this.gl=e.renderer.gl,this.initMeshes(),s.on("settings",this.setSettings.bind(this)),this.setSettings(We.getSettings())}initMeshes(){const e=new pt(this.gl),s=ru.texture(this.gl,"assets/rocky_dirt1-albedo.jpg",{wrapS:this.gl.REPEAT,wrapT:this.gl.REPEAT}),n=new hs(this.gl,{vertex:Ta.vertex,fragment:Ta.fragment,uniforms:{uTime:{value:0},tMap:{value:s},uFogColor:{value:new br("#ffffff")},uFogNear:{value:10},uFogFar:{value:30},texScale:{value:1}}});ms.subscribe(r=>{n.uniforms.uFogColor.value=new br(r["background-color"])}),this.ground=this.scene.addMesh({geometry:e,program:n});const i=(r=0)=>{requestAnimationFrame(i),n.uniforms.uTime.value=r};i()}setSettings(e){var s,n;this.settings=e,(s=e==null?void 0:e.background)!=null&&s.ground&&(this.ground.geometry=h2(this.gl,e)),this.ground.visible=!!((n=e==null?void 0:e.background)!=null&&n.ground)}}function f2(t){let e,s,n=t[1]?"<b>[NEW]</b>":"",i,r=t[0].subject+"",a;return{c(){e=T("p"),s=new Wl(!1),i=R(),a=W(r),this.h()},l(o){e=A(o,"P",{});var l=S(e);s=Xl(l,!1),i=F(l),a=X(l,r),l.forEach(_),this.h()},h(){s.a=i},m(o,l){I(o,e,l),s.m(n,e),M(e,i),M(e,a)},p(o,[l]){l&2&&n!==(n=o[1]?"<b>[NEW]</b>":"")&&s.p(n),l&1&&r!==(r=o[0].subject+"")&&Ee(a,r)},i:H,o:H,d(o){o&&_(e)}}}function d2(t,e,s){let{commit:n}=e,{isNew:i=!1}=e;return t.$$set=r=>{"commit"in r&&s(0,n=r.commit),"isNew"in r&&s(1,i=r.isNew)},[n,i]}class p2 extends ve{constructor(e){super(),ge(this,e,d2,f2,ye,{commit:0,isNew:1})}}const Nl=Ye([]);let ei=nt.get("lastUpdated",Date.now());function m2(t){const e=Date.parse(t.date);return Je(Se({},t),{date:e,new:ei<e})}let Os;async function v2(){const e=await(await fetch("commits.json")).json();return ei=Date.now(),nt.set("lastUpdated",ei),e.map(s=>m2(s))}const g2=async()=>{if(Os)return Os;Os=v2();const t=await Os;Nl.set(t)};function co(t,e,s){const n=t.slice();return n[4]=e[s],n}function ho(t){let e,s=t[2](t[4].date)+"",n;return{c(){e=T("h3"),n=W(s),this.h()},l(i){e=A(i,"H3",{class:!0});var r=S(e);n=X(r,s),r.forEach(_),this.h()},h(){E(e,"class","svelte-13vbnbr")},m(i,r){I(i,e,r),M(e,n)},p(i,r){r&1&&s!==(s=i[2](i[4].date)+"")&&Ee(n,s)},d(i){i&&_(e)}}}function uo(t){let e=t[1](t[4]),s,n,i,r=e&&ho(t);return n=new p2({props:{commit:t[4]}}),{c(){r&&r.c(),s=R(),re(n.$$.fragment)},l(a){r&&r.l(a),s=F(a),le(n.$$.fragment,a)},m(a,o){r&&r.m(a,o),I(a,s,o),ae(n,a,o),i=!0},p(a,o){o&1&&(e=a[1](a[4])),e?r?r.p(a,o):(r=ho(a),r.c(),r.m(s.parentNode,s)):r&&(r.d(1),r=null);const l={};o&1&&(l.commit=a[4]),n.$set(l)},i(a){i||(L(n.$$.fragment,a),i=!0)},o(a){V(n.$$.fragment,a),i=!1},d(a){r&&r.d(a),a&&_(s),oe(n,a)}}}function y2(t){let e,s,n,i,r,a=t[0],o=[];for(let c=0;c<a.length;c+=1)o[c]=uo(co(t,a,c));const l=c=>V(o[c],1,1,()=>{o[c]=null});return{c(){e=T("h1"),s=W("Changelog"),n=R(),i=T("div");for(let c=0;c<o.length;c+=1)o[c].c();this.h()},l(c){e=A(c,"H1",{});var h=S(e);s=X(h,"Changelog"),h.forEach(_),n=F(c),i=A(c,"DIV",{class:!0});var u=S(i);for(let f=0;f<o.length;f+=1)o[f].l(u);u.forEach(_),this.h()},h(){E(i,"class","svelte-13vbnbr")},m(c,h){I(c,e,h),M(e,s),I(c,n,h),I(c,i,h);for(let u=0;u<o.length;u+=1)o[u].m(i,null);r=!0},p(c,[h]){if(h&7){a=c[0];let u;for(u=0;u<a.length;u+=1){const f=co(c,a,u);o[u]?(o[u].p(f,h),L(o[u],1)):(o[u]=uo(f),o[u].c(),L(o[u],1),o[u].m(i,null))}for(pe(),u=a.length;u<o.length;u+=1)l(u);de()}},i(c){if(!r){for(let h=0;h<a.length;h+=1)L(o[h]);r=!0}},o(c){o=o.filter(Boolean);for(let h=0;h<o.length;h+=1)V(o[h]);r=!1},d(c){c&&_(e),c&&_(n),c&&_(i),Fe(o,c)}}}function _2(t,e,s){let n;ht(t,Nl,o=>s(0,n=o)),g2();let i=n.length&&new Date(n[0].date).getDay();return[n,o=>{const l=new Date(o.date);return l.getDay()!=i?(i=l.getDay(),!0):!1},o=>new Date(o).toLocaleDateString()]}class w2 extends ve{constructor(e){super(),ge(this,e,_2,y2,ye,{})}}function b2(t){let e,s,n,i,r;const a=t[4].default,o=si(a,t,t[3],null);return{c(){e=R(),s=T("div"),o&&o.c()},l(l){e=F(l),s=A(l,"DIV",{});var c=S(s);o&&o.l(c),c.forEach(_)},m(l,c){I(l,e,c),I(l,s,c),o&&o.m(s,null),t[5](s),n=!0,i||(r=Z(document.body,"click",t[1]),i=!0)},p(l,[c]){o&&o.p&&(!n||c&8)&&ni(o,a,l,l[3],n?ri(a,l[3],c,null):ii(l[3]),null)},i(l){n||(L(o,l),n=!0)},o(l){V(o,l),n=!1},d(l){l&&_(e),l&&_(s),o&&o.d(l),t[5](null),i=!1,r()}}}function x2(t,e,s){let{$$slots:n={},$$scope:i}=e,{exclude:r=[]}=e,a;const o=He();function l(u){for(var f=u;f;){if(r.indexOf(f)>=0||f===a)return!0;f=f.parentNode}return!1}function c(u){l(u.target)||o("clickoutside")}function h(u){Ae[u?"unshift":"push"](()=>{a=u,s(0,a)})}return t.$$set=u=>{"exclude"in u&&s(2,r=u.exclude),"$$scope"in u&&s(3,i=u.$$scope)},[a,c,r,i,n,h]}class M2 extends ve{constructor(e){super(),ge(this,e,x2,b2,ye,{exclude:2})}}function E2(t){let e,s,n,i,r,a,o,l,c;function h(p){t[6](p)}let u={useActive:!0,icon:t[3],name:t[1]};t[0]!==void 0&&(u.active=t[0]),s=new Xe({props:u}),Ae.push(()=>Yt(s,"active",h));var f=t[4];function d(p){return{props:{visible:p[0]}}}return f&&(l=new f(d(t))),{c(){e=T("div"),n=T("div"),re(s.$$.fragment),a=R(),o=T("div"),l&&re(l.$$.fragment),this.h()},l(p){e=A(p,"DIV",{class:!0});var m=S(e);n=A(m,"DIV",{style:!0});var v=S(n);le(s.$$.fragment,v),a=F(m),o=A(m,"DIV",{class:!0});var g=S(o);l&&le(l.$$.fragment,g),g.forEach(_),m.forEach(_),this.h()},h(){K(n,"display","contents"),K(n,"--bg","transparent"),K(n,"--text",r=t[5]["text-color"]),E(o,"class","wrapper svelte-1t7714i"),ne(o,"visible",t[0]),ne(o,"right",t[2]),E(e,"class","icon-wrapper svelte-1t7714i"),ne(e,"active",t[0])},m(p,m){I(p,e,m),M(e,n),ae(s,n,null),M(e,a),M(e,o),l&&ae(l,o,null),c=!0},p(p,m){m&32&&r!==(r=p[5]["text-color"])&&K(n,"--text",r);const v={};m&8&&(v.icon=p[3]),m&2&&(v.name=p[1]),!i&&m&1&&(i=!0,v.active=p[0],Ht(()=>i=!1)),s.$set(v);const g={};if(m&1&&(g.visible=p[0]),f!==(f=p[4])){if(l){pe();const x=l;V(x.$$.fragment,1,0,()=>{oe(x,1)}),de()}f?(l=new f(d(p)),re(l.$$.fragment),L(l.$$.fragment,1),ae(l,o,null)):l=null}else f&&l.$set(g);m&1&&ne(o,"visible",p[0]),m&4&&ne(o,"right",p[2]),m&1&&ne(e,"active",p[0])},i(p){c||(L(s.$$.fragment,p),l&&L(l.$$.fragment,p),c=!0)},o(p){V(s.$$.fragment,p),l&&V(l.$$.fragment,p),c=!1},d(p){p&&_(e),oe(s),l&&oe(l)}}}function k2(t){let e,s;return e=new M2({props:{$$slots:{default:[E2]},$$scope:{ctx:t}}}),e.$on("clickoutside",t[7]),{c(){re(e.$$.fragment)},l(n){le(e.$$.fragment,n)},m(n,i){ae(e,n,i),s=!0},p(n,[i]){const r={};i&319&&(r.$$scope={dirty:i,ctx:n}),e.$set(r)},i(n){s||(L(e.$$.fragment,n),s=!0)},o(n){V(e.$$.fragment,n),s=!1},d(n){oe(e,n)}}}function S2(t,e,s){let n;ht(t,ms,u=>s(5,n=u));let{name:i=""}=e,{right:r=!1}=e,{icon:a}=e,{component:o}=e,{visible:l=!1}=e;function c(u){l=u,s(0,l)}const h=()=>s(0,l=!1);return t.$$set=u=>{"name"in u&&s(1,i=u.name),"right"in u&&s(2,r=u.right),"icon"in u&&s(3,a=u.icon),"component"in u&&s(4,o=u.component),"visible"in u&&s(0,l=u.visible)},[l,i,r,a,o,n,c,h]}class Nn extends ve{constructor(e){super(),ge(this,e,S2,k2,ye,{name:1,right:2,icon:3,component:4,visible:0})}}function T2(t){let e,s,n,i,r,a,o,l,c,h,u,f,d,p,m,v,g,x,w=t[0]==="bug"&&fo(t);return m=new Xe({props:{name:"Submit"}}),m.$on("click",t[10]),{c(){e=T("section"),s=T("label"),n=W("Title"),i=R(),r=T("input"),a=R(),o=T("section"),l=T("label"),c=W("Description"),h=R(),u=T("textarea"),d=R(),w&&w.c(),p=R(),re(m.$$.fragment),this.h()},l(y){e=A(y,"SECTION",{class:!0});var k=S(e);s=A(k,"LABEL",{for:!0,class:!0});var b=S(s);n=X(b,"Title"),b.forEach(_),i=F(k),r=A(k,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),k.forEach(_),a=F(y),o=A(y,"SECTION",{class:!0});var $=S(o);l=A($,"LABEL",{for:!0,class:!0});var P=S(l);c=X(P,"Description"),P.forEach(_),h=F($),u=A($,"TEXTAREA",{type:!0,id:!0,rowspan:!0,placeholder:!0,class:!0}),S(u).forEach(_),$.forEach(_),d=F(y),w&&w.l(y),p=F(y),le(m.$$.fragment,y),this.h()},h(){E(s,"for","title"),E(s,"class","svelte-1jitmh9"),E(r,"type","text"),E(r,"id","title"),E(r,"placeholder","Simple Title"),E(r,"class","svelte-1jitmh9"),E(e,"class","svelte-1jitmh9"),E(l,"for","description"),E(l,"class","svelte-1jitmh9"),E(u,"type","text"),E(u,"id","description"),E(u,"rowspan","5"),E(u,"placeholder",f=t[0]==="bug"?"Please provide a detailed description of what happened.":"Please describe the feature."),E(u,"class","svelte-1jitmh9"),E(o,"class","svelte-1jitmh9")},m(y,k){I(y,e,k),M(e,s),M(s,n),M(e,i),M(e,r),qe(r,t[1]),I(y,a,k),I(y,o,k),M(o,l),M(l,c),M(o,h),M(o,u),qe(u,t[2]),I(y,d,k),w&&w.m(y,k),I(y,p,k),ae(m,y,k),v=!0,g||(x=[Z(r,"keydown",Rs(t[13])),Z(r,"input",t[14]),Z(u,"keydown",Rs(t[12])),Z(u,"input",t[15])],g=!0)},p(y,k){k&2&&r.value!==y[1]&&qe(r,y[1]),(!v||k&1&&f!==(f=y[0]==="bug"?"Please provide a detailed description of what happened.":"Please describe the feature."))&&E(u,"placeholder",f),k&4&&qe(u,y[2]),y[0]==="bug"?w?(w.p(y,k),k&1&&L(w,1)):(w=fo(y),w.c(),L(w,1),w.m(p.parentNode,p)):w&&(pe(),V(w,1,1,()=>{w=null}),de())},i(y){v||(L(w),L(m.$$.fragment,y),v=!0)},o(y){V(w),V(m.$$.fragment,y),v=!1},d(y){y&&_(e),y&&_(a),y&&_(o),y&&_(d),w&&w.d(y),y&&_(p),oe(m,y),g=!1,Qe(x)}}}function A2(t){let e,s,n,i={ctx:t,current:null,token:null,hasCatch:!0,pending:$2,then:D2,catch:L2,value:19,error:20,blocks:[,,,]};return zi(s=t[6],i),{c(){e=he(),i.block.c()},l(r){e=he(),i.block.l(r)},m(r,a){I(r,e,a),i.block.m(r,i.anchor=a),i.mount=()=>e.parentNode,i.anchor=e,n=!0},p(r,a){t=r,i.ctx=t,a&64&&s!==(s=t[6])&&zi(s,i)||Yl(i,t,a)},i(r){n||(L(i.block),n=!0)},o(r){for(let a=0;a<3;a+=1){const o=i.blocks[a];V(o)}n=!1},d(r){r&&_(e),i.block.d(r),i.token=null,i=null}}}function fo(t){let e,s,n,i,r,a,o,l,c,h,u,f,d,p,m,v,g,x,w,y,k,b,$,P=t[7]&&po(t);function D(C){t[17](C)}let j={};t[3]!==void 0&&(j.value=t[3]),i=new Zt({props:j}),Ae.push(()=>Yt(i,"value",D)),u=new us({props:{name:"What is that?",$$slots:{default:[I2]},$$scope:{ctx:t}}});function B(C){t[18](C)}let z={};return t[4]!==void 0&&(z.value=t[4]),m=new Zt({props:z}),Ae.push(()=>Yt(m,"value",B)),b=new us({props:{name:"What is that?",$$slots:{default:[N2]},$$scope:{ctx:t}}}),{c(){P&&P.c(),e=R(),s=T("section"),n=T("div"),re(i.$$.fragment),a=R(),o=T("p"),l=W("Include Browser Info"),c=R(),h=T("div"),re(u.$$.fragment),f=R(),d=T("section"),p=T("div"),re(m.$$.fragment),g=R(),x=T("p"),w=W("Include Logs"),y=R(),k=T("div"),re(b.$$.fragment),this.h()},l(C){P&&P.l(C),e=F(C),s=A(C,"SECTION",{class:!0});var N=S(s);n=A(N,"DIV",{style:!0});var q=S(n);le(i.$$.fragment,q),a=F(q),o=A(q,"P",{style:!0});var Q=S(o);l=X(Q,"Include Browser Info"),Q.forEach(_),q.forEach(_),c=F(N),h=A(N,"DIV",{class:!0});var te=S(h);le(u.$$.fragment,te),te.forEach(_),N.forEach(_),f=F(C),d=A(C,"SECTION",{class:!0});var ce=S(d);p=A(ce,"DIV",{style:!0});var ie=S(p);le(m.$$.fragment,ie),g=F(ie),x=A(ie,"P",{style:!0});var be=S(x);w=X(be,"Include Logs"),be.forEach(_),ie.forEach(_),y=F(ce),k=A(ce,"DIV",{class:!0});var we=S(k);le(b.$$.fragment,we),we.forEach(_),ce.forEach(_),this.h()},h(){K(o,"margin-left","5px"),K(n,"display","flex"),K(n,"align-items","center"),E(h,"class","info svelte-1jitmh9"),E(s,"class","svelte-1jitmh9"),K(x,"margin-left","5px"),K(p,"display","flex"),K(p,"align-items","center"),E(k,"class","info svelte-1jitmh9"),E(d,"class","svelte-1jitmh9")},m(C,N){P&&P.m(C,N),I(C,e,N),I(C,s,N),M(s,n),ae(i,n,null),M(n,a),M(n,o),M(o,l),M(s,c),M(s,h),ae(u,h,null),I(C,f,N),I(C,d,N),M(d,p),ae(m,p,null),M(p,g),M(p,x),M(x,w),M(d,y),M(d,k),ae(b,k,null),$=!0},p(C,N){C[7]?P?(P.p(C,N),N&128&&L(P,1)):(P=po(C),P.c(),L(P,1),P.m(e.parentNode,e)):P&&(pe(),V(P,1,1,()=>{P=null}),de());const q={};!r&&N&8&&(r=!0,q.value=C[3],Ht(()=>r=!1)),i.$set(q);const Q={};N&2097152&&(Q.$$scope={dirty:N,ctx:C}),u.$set(Q);const te={};!v&&N&16&&(v=!0,te.value=C[4],Ht(()=>v=!1)),m.$set(te);const ce={};N&2097152&&(ce.$$scope={dirty:N,ctx:C}),b.$set(ce)},i(C){$||(L(P),L(i.$$.fragment,C),L(u.$$.fragment,C),L(m.$$.fragment,C),L(b.$$.fragment,C),$=!0)},o(C){V(P),V(i.$$.fragment,C),V(u.$$.fragment,C),V(m.$$.fragment,C),V(b.$$.fragment,C),$=!1},d(C){P&&P.d(C),C&&_(e),C&&_(s),oe(i),oe(u),C&&_(f),C&&_(d),oe(m),oe(b)}}}function po(t){let e,s,n,i,r,a,o,l,c,h,u;function f(p){t[16](p)}let d={};return t[5]!==void 0&&(d.value=t[5]),n=new Zt({props:d}),Ae.push(()=>Yt(n,"value",f)),h=new us({props:{name:"What is that?",$$slots:{default:[P2]},$$scope:{ctx:t}}}),{c(){e=T("section"),s=T("div"),re(n.$$.fragment),r=R(),a=T("p"),o=W("Include StackTrace"),l=R(),c=T("div"),re(h.$$.fragment),this.h()},l(p){e=A(p,"SECTION",{class:!0});var m=S(e);s=A(m,"DIV",{style:!0});var v=S(s);le(n.$$.fragment,v),r=F(v),a=A(v,"P",{style:!0});var g=S(a);o=X(g,"Include StackTrace"),g.forEach(_),v.forEach(_),l=F(m),c=A(m,"DIV",{class:!0});var x=S(c);le(h.$$.fragment,x),x.forEach(_),m.forEach(_),this.h()},h(){K(a,"margin-left","5px"),K(s,"display","flex"),K(s,"align-items","center"),E(c,"class","info svelte-1jitmh9"),E(e,"class","svelte-1jitmh9")},m(p,m){I(p,e,m),M(e,s),ae(n,s,null),M(s,r),M(s,a),M(a,o),M(e,l),M(e,c),ae(h,c,null),u=!0},p(p,m){const v={};!i&&m&32&&(i=!0,v.value=p[5],Ht(()=>i=!1)),n.$set(v);const g={};m&2097280&&(g.$$scope={dirty:m,ctx:p}),h.$set(g)},i(p){u||(L(n.$$.fragment,p),L(h.$$.fragment,p),u=!0)},o(p){V(n.$$.fragment,p),V(h.$$.fragment,p),u=!1},d(p){p&&_(e),oe(n),oe(h)}}}function P2(t){let e,s;return e=new fi({props:{stacktrace:t[7]}}),{c(){re(e.$$.fragment)},l(n){le(e.$$.fragment,n)},m(n,i){ae(e,n,i),s=!0},p(n,i){const r={};i&128&&(r.stacktrace=n[7]),e.$set(r)},i(n){s||(L(e.$$.fragment,n),s=!0)},o(n){V(e.$$.fragment,n),s=!1},d(n){oe(e,n)}}}function I2(t){let e,s,n,i,r,a,o,l,c=t[8].os+"",h,u,f,d,p,m,v,g=t[8].name+"",x,w,y=t[8].version+"",k,b,$,P,D,j,B,z=window.innerWidth+"",C,N,q=window.innerHeight+"",Q,te,ce,ie,be,we,ke,Oe=window.devicePixelRatio+"",Ce,$e;return{c(){e=T("p"),s=W(`This information makes it easier for a developer to track down what might have caused
						the bug.`),n=R(),i=T("ul"),r=T("li"),a=W("OS "),o=T("i"),l=W("("),h=W(c),u=W(")"),f=R(),d=T("li"),p=W("Browser "),m=T("i"),v=W("("),x=W(g),w=W(" / "),k=W(y),b=W(")"),$=R(),P=T("li"),D=W("Screen Resolution "),j=T("i"),B=W("("),C=W(z),N=W("x"),Q=W(q),te=W(")"),ce=R(),ie=T("li"),be=W("Screen DPI "),we=T("i"),ke=W("("),Ce=W(Oe),$e=W(")")},l(xe){e=A(xe,"P",{});var Te=S(e);s=X(Te,`This information makes it easier for a developer to track down what might have caused
						the bug.`),Te.forEach(_),n=F(xe),i=A(xe,"UL",{});var Ie=S(i);r=A(Ie,"LI",{});var Y=S(r);a=X(Y,"OS "),o=A(Y,"I",{});var se=S(o);l=X(se,"("),h=X(se,c),u=X(se,")"),se.forEach(_),Y.forEach(_),f=F(Ie),d=A(Ie,"LI",{});var _e=S(d);p=X(_e,"Browser "),m=A(_e,"I",{});var me=S(m);v=X(me,"("),x=X(me,g),w=X(me," / "),k=X(me,y),b=X(me,")"),me.forEach(_),_e.forEach(_),$=F(Ie),P=A(Ie,"LI",{});var O=S(P);D=X(O,"Screen Resolution "),j=A(O,"I",{});var J=S(j);B=X(J,"("),C=X(J,z),N=X(J,"x"),Q=X(J,q),te=X(J,")"),J.forEach(_),O.forEach(_),ce=F(Ie),ie=A(Ie,"LI",{});var Me=S(ie);be=X(Me,"Screen DPI "),we=A(Me,"I",{});var Ve=S(we);ke=X(Ve,"("),Ce=X(Ve,Oe),$e=X(Ve,")"),Ve.forEach(_),Me.forEach(_),Ie.forEach(_)},m(xe,Te){I(xe,e,Te),M(e,s),I(xe,n,Te),I(xe,i,Te),M(i,r),M(r,a),M(r,o),M(o,l),M(o,h),M(o,u),M(i,f),M(i,d),M(d,p),M(d,m),M(m,v),M(m,x),M(m,w),M(m,k),M(m,b),M(i,$),M(i,P),M(P,D),M(P,j),M(j,B),M(j,C),M(j,N),M(j,Q),M(j,te),M(i,ce),M(i,ie),M(ie,be),M(ie,we),M(we,ke),M(we,Ce),M(we,$e)},p:H,d(xe){xe&&_(e),xe&&_(n),xe&&_(i)}}}function N2(t){let e,s,n,i,r;return i=new jo({props:{logs:t[9]}}),{c(){e=T("p"),s=W(`This information makes it easier for a developer to track down what might have caused
						the bug.`),n=R(),re(i.$$.fragment)},l(a){e=A(a,"P",{});var o=S(e);s=X(o,`This information makes it easier for a developer to track down what might have caused
						the bug.`),o.forEach(_),n=F(a),le(i.$$.fragment,a)},m(a,o){I(a,e,o),M(e,s),I(a,n,o),ae(i,a,o),r=!0},p:H,i(a){r||(L(i.$$.fragment,a),r=!0)},o(a){V(i.$$.fragment,a),r=!1},d(a){a&&_(e),a&&_(n),oe(i,a)}}}function L2(t){let e,s,n,i,r=JSON.stringify(t[20],null,2)+"",a;return{c(){e=T("p"),s=W("Errror"),n=R(),i=T("code"),a=W(r)},l(o){e=A(o,"P",{});var l=S(e);s=X(l,"Errror"),l.forEach(_),n=F(o),i=A(o,"CODE",{});var c=S(i);a=X(c,r),c.forEach(_)},m(o,l){I(o,e,l),M(e,s),I(o,n,l),I(o,i,l),M(i,a)},p(o,l){l&64&&r!==(r=JSON.stringify(o[20],null,2)+"")&&Ee(a,r)},i:H,o:H,d(o){o&&_(e),o&&_(n),o&&_(i)}}}function D2(t){let e,s,n,i=JSON.stringify(t[19],null,2)+"",r,a;return e=new Xe({props:{name:"Done",icon:"checkmark"}}),{c(){re(e.$$.fragment),s=R(),n=T("code"),r=W(i)},l(o){le(e.$$.fragment,o),s=F(o),n=A(o,"CODE",{});var l=S(n);r=X(l,i),l.forEach(_)},m(o,l){ae(e,o,l),I(o,s,l),I(o,n,l),M(n,r),a=!0},p(o,l){(!a||l&64)&&i!==(i=JSON.stringify(o[19],null,2)+"")&&Ee(r,i)},i(o){a||(L(e.$$.fragment,o),a=!0)},o(o){V(e.$$.fragment,o),a=!1},d(o){oe(e,o),o&&_(s),o&&_(n)}}}function $2(t){let e;return{c(){e=W("Submitting Reprot")},l(s){e=X(s,"Submitting Reprot")},m(s,n){I(s,e,n)},p:H,i:H,o:H,d(s){s&&_(e)}}}function O2(t){let e,s,n,i;const r=[A2,T2],a=[];function o(l,c){return l[6]?0:1}return e=o(t),s=a[e]=r[e](t),{c(){s.c(),n=he()},l(l){s.l(l),n=he()},m(l,c){a[e].m(l,c),I(l,n,c),i=!0},p(l,[c]){let h=e;e=o(l),e===h?a[e].p(l,c):(pe(),V(a[h],1,1,()=>{a[h]=null}),de(),s=a[e],s?s.p(l,c):(s=a[e]=r[e](l),s.c()),L(s,1),s.m(n.parentNode,n))},i(l){i||(L(s),i=!0)},o(l){V(s),i=!1},d(l){a[e].d(l),l&&_(n)}}}function C2(t,e,s){let n,{mode:i="bug"}=e,r=Da(),a,o,l=!1,c=!1;const h=je.getHistory();let{error:u}=e,f=!0,d;function p(){const b={type:i,title:a,description:o};f&&(b.stacktrace=n),l&&(b.browser=Da(),b.browser.screen={width:window.innerWidth,height:window.innerHeight,dpi:window.devicePixelRatio}),c&&(b.logs=h),s(6,d=El(b))}Ct(async()=>{console.log(h),n&&s(1,a=n.type+": "+n.title)});function m(b){Vi.call(this,t,b)}function v(b){Vi.call(this,t,b)}function g(){a=this.value,s(1,a)}function x(){o=this.value,s(2,o)}function w(b){f=b,s(5,f)}function y(b){l=b,s(3,l)}function k(b){c=b,s(4,c)}return t.$$set=b=>{"mode"in b&&s(0,i=b.mode),"error"in b&&s(11,u=b.error)},t.$$.update=()=>{t.$$.dirty&2048&&s(7,n=u&&jn(u))},[i,a,o,l,c,f,d,n,r,h,p,u,m,v,g,x,w,y,k]}class ti extends ve{constructor(e){super(),ge(this,e,C2,O2,ye,{mode:0,error:11})}}class V2{constructor(e,s){this.scene=e,this.pm=s,this.m={},this.gl=e.renderer.gl,this.initGeometry(),this.setSettings(We.getSettings()),s.on("settings",this.setSettings.bind(this))}initGeometry(){this.m.skeleton=this.scene.addMesh({geometry:new Nt(this.gl,{position:{size:3,data:new Float32Array([0,0,0])},uv:{size:2,data:new Float32Array([0,0])},index:{size:1,data:new Uint16Array([0])}}),program:new hs(this.gl,{vertex:Aa.vertex,fragment:Aa.fragment,depthTest:!1}),mode:this.gl.LINES}),this.m.vertices=this.scene.addMesh({mode:this.gl.POINTS,geometry:new Nt(this.gl,{position:{size:3,data:new Float32Array(3)}}),program:new hs(this.gl,{vertex:Pa.vertex,fragment:Pa.fragment,depthTest:!1,transparent:!0})})}setSettings(e){var s,n;this.settings=JSON.parse(JSON.stringify(e)),this.m.skeleton.visible=!!((s=this.settings.debug)!=null&&s.skeleton),this.m.vertices.visible=!!((n=this.settings.debug)!=null&&n.skeleton),this.update()}setPlant(e){this.plant=e,this.update()}update(e=this.plant,s=this.settings){var n,i;if(!(!e||!s)&&(e.allSkeletons||e.skeletons)&&((n=s.debug)==null?void 0:n.skeleton)){const r=(i=e.allSkeletons)!=null?i:e.skeletons;let a=0;for(const h of r)a+=h.length/4*3;const o=new Float32Array(a),l=new Uint32Array((a/3-1)*2);let c=0;r.forEach(h=>{const u=h.length/4;for(let f=0;f<u;f++)o[c*3+f*3+0]=h[f*4+0],o[c*3+f*3+1]=h[f*4+1],o[c*3+f*3+2]=h[f*4+2];for(let f=0;f<u-1;f++)l[c*2+f*2]=c+f,l[c*2+f*2+1]=c+f+1;c+=u}),this.m.skeleton.geometry=new Nt(this.gl,{position:{size:3,data:o},index:{size:1,data:l}}),this.m.vertices.geometry=new Nt(this.gl,{position:{size:3,data:o}})}}}const z2=Js(t=>{De.renderThumbnail({geo:t})},5e3),j2=je("scene.foreground");class R2{constructor(e,s){this.scene=e,this.pm=s,this.worker=ml(),this.gl=e.renderer.gl,this.initGeometry(),this.dbg=new V2(e,s),this.setSettings(We.getSettings()),this.setPlant(s.getActiveProject()),this.pm.on("settings",this.setSettings.bind(this)),this.pm.on("plant",this.setPlant.bind(this))}initGeometry(){const e=new Do(this.scene.gl,{width:0,height:0,depth:0});this.mesh=this.scene.addMesh({geometry:e,program:Dm(this.gl)})}setSettings(e){this.settings=JSON.parse(JSON.stringify(e)),this.update()}setPlant(e){!e||(this.plant=window.structuredClone(e),this.update())}async update(e=this.plant,s=this.settings){if(!(!e||!s)){this.scene.isLoading.set(!0);try{l2("generate"),globalThis.pt=e;const n=await this.worker.executeNodeSystem(e,s);if(c2("generate"),!n)return;z2(n.geometry),this.scene.isLoading.set(!1),this.dbg.setPlant(n),this.mesh.geometry=mi(this.gl,n.geometry),this.mesh.geometry.computeBoundingBox(),this.scene.renderer.setControlTarget(this.mesh.geometry.bounds.center)}catch(n){j2.error(n),await Dt(n,{title:"Error [Generator]",values:["report"]})==="report"&&(console.error(n),vt(ti,{timeout:0,title:"Report Bug",type:"error",props:{mode:"bug",error:n}}))}}}}class F2{constructor(e,s){this.isLoading=Ye(!1),this.renderer=new wl({canvas:s,camPos:nt.get("camPos")}),this.renderer.on("camPos",n=>nt.set("camPos",n)),this.renderer.on("perf",n=>Il("render",n),40),this.renderer.handleResize(),this.scene=this.renderer.scene,this.gl=this.renderer.gl,ms.subscribe(n=>{this.renderer.setClearColor(n["background-color"])}),this.wrapper=s.parentElement,this.bg=new u2(this,e),this.fg=new R2(this,e)}addMesh(e){const s=new Lo(this.gl,e);return s.setParent(this.scene),s}}function mo(t){let e,s,n,i,r=JSON.stringify(t[1],null,2)+"",a,o,l;return{c(){e=T("pre"),s=W("    "),n=T("code"),i=W(`
      `),a=W(r),o=W(`
    `),l=W(`
  `),this.h()},l(c){e=A(c,"PRE",{class:!0});var h=S(e);s=X(h,"    "),n=A(h,"CODE",{class:!0});var u=S(n);i=X(u,`
      `),a=X(u,r),o=X(u,`
    `),u.forEach(_),l=X(h,`
  `),h.forEach(_),this.h()},h(){E(n,"class","svelte-gnolzm"),E(e,"class","svelte-gnolzm")},m(c,h){I(c,e,h),M(e,s),M(e,n),M(n,i),M(n,a),M(n,o),M(e,l)},p(c,h){h&2&&r!==(r=JSON.stringify(c[1],null,2)+"")&&Ee(a,r)},d(c){c&&_(e)}}}function vo(t){let e,s,n;return{c(){e=T("div"),s=T("p"),n=W("Is Loading"),this.h()},l(i){e=A(i,"DIV",{class:!0});var r=S(e);s=A(r,"P",{class:!0});var a=S(s);n=X(a,"Is Loading"),a.forEach(_),r.forEach(_),this.h()},h(){E(s,"class","svelte-gnolzm"),E(e,"class","is-loading svelte-gnolzm")},m(i,r){I(i,e,r),M(e,s),M(s,n)},d(i){i&&_(e)}}}function go(t){let e,s,n;return{c(){e=T("div"),s=T("h2"),n=W("Logs:"),this.h()},l(i){e=A(i,"DIV",{class:!0});var r=S(e);s=A(r,"H2",{class:!0});var a=S(s);n=X(a,"Logs:"),a.forEach(_),r.forEach(_),this.h()},h(){E(s,"class","svelte-gnolzm"),E(e,"class","log-wrapper svelte-gnolzm")},m(i,r){I(i,e,r),M(e,s),M(s,n)},d(i){i&&_(e)}}}function B2(t){var v,g,x,w;let e,s,n,i,r,a,o,l,c,h,u,f,d=((g=(v=t[6])==null?void 0:v.debug)==null?void 0:g.pd)&&t[1]&&mo(t),p=t[7]&&vo(),m=((w=(x=t[6])==null?void 0:x.debug)==null?void 0:w.showLogs)&&go();return{c(){e=T("div"),d&&d.c(),s=R(),n=T("div"),i=T("canvas"),a=R(),o=T("canvas"),c=R(),h=T("canvas"),u=R(),p&&p.c(),f=R(),m&&m.c(),this.h()},l(y){e=A(y,"DIV",{class:!0});var k=S(e);d&&d.l(k),s=F(k),n=A(k,"DIV",{class:!0});var b=S(n);i=A(b,"CANVAS",{style:!0,class:!0}),S(i).forEach(_),a=F(b),o=A(b,"CANVAS",{style:!0,class:!0}),S(o).forEach(_),b.forEach(_),c=F(k),h=A(k,"CANVAS",{class:!0}),S(h).forEach(_),u=F(k),p&&p.l(k),f=F(k),m&&m.l(k),k.forEach(_),this.h()},h(){var y,k,b,$;E(i,"style",r=`display: ${(k=(y=t[6])==null?void 0:y.debug)!=null&&k.generatePerf?"visible":"none"}`),E(i,"class","svelte-gnolzm"),E(o,"style",l=`display: ${($=(b=t[6])==null?void 0:b.debug)!=null&&$.renderPerf?"visible":"none"}`),E(o,"class","svelte-gnolzm"),E(n,"class","performance-wrapper svelte-gnolzm"),E(h,"class","svelte-gnolzm"),E(e,"class","scene-wrapper svelte-gnolzm")},m(y,k){I(y,e,k),d&&d.m(e,null),M(e,s),M(e,n),M(n,i),t[10](i),M(n,a),M(n,o),t[11](o),M(e,c),M(e,h),t[12](h),M(e,u),p&&p.m(e,null),M(e,f),m&&m.m(e,null)},p(y,[k]){var b,$,P,D,j,B,z,C;(($=(b=y[6])==null?void 0:b.debug)==null?void 0:$.pd)&&y[1]?d?d.p(y,k):(d=mo(y),d.c(),d.m(e,s)):d&&(d.d(1),d=null),k&64&&r!==(r=`display: ${(D=(P=y[6])==null?void 0:P.debug)!=null&&D.generatePerf?"visible":"none"}`)&&E(i,"style",r),k&64&&l!==(l=`display: ${(B=(j=y[6])==null?void 0:j.debug)!=null&&B.renderPerf?"visible":"none"}`)&&E(o,"style",l),y[7]?p||(p=vo(),p.c(),p.m(e,f)):p&&(p.d(1),p=null),(C=(z=y[6])==null?void 0:z.debug)!=null&&C.showLogs?m||(m=go(),m.c(),m.m(e,null)):m&&(m.d(1),m=null)},i:H,o:H,d(y){y&&_(e),d&&d.d(),t[10](null),t[11](null),t[12](null),p&&p.d(),m&&m.d()}}}function U2(t,e,s){let n,i,r=H,a=()=>(r(),r=ji(p,y=>s(6,i=y)),p),o,l=H,c=()=>(l(),l=ji(n,y=>s(7,o=y)),n);t.$$.on_destroy.push(()=>r()),t.$$.on_destroy.push(()=>l());let h,u,f,d,p,m,v;Ct(()=>{lo("render",v),lo("generate",m)});function g(y){Ae[y?"unshift":"push"](()=>{m=y,s(3,m)})}function x(y){Ae[y?"unshift":"push"](()=>{v=y,s(4,v)})}function w(y){Ae[y?"unshift":"push"](()=>{h=y,s(0,h)})}return t.$$.update=()=>{t.$$.dirty&257&&h&&De&&!u&&om&&s(8,u=new F2(De,h)),t.$$.dirty&256&&c(s(5,n=u&&u.isLoading)),t.$$.dirty&512&&De&&(d&&d(),s(9,d=De.on("save",y=>{const k=JSON.parse(JSON.stringify(y));k.meta.thumbnail="",s(1,f=k)})))},We&&a(s(2,p=We.store)),[h,f,p,m,v,n,i,o,u,d,g,x,w]}class q2 extends ve{constructor(e){super(),ge(this,e,U2,B2,ye,{})}}function W2(t){let e,s,n,i,r,a,o,l,c,h,u,f,d;return s=new Xe({props:{name:"Tutorial",icon:"hand"}}),s.$on("click",t[0]),r=new Xe({props:{name:"Report Bug",icon:"exclamation"}}),r.$on("click",t[1]),l=new Xe({props:{name:"Request Feature"}}),l.$on("click",t[2]),u=new Xe({props:{name:"Changelog"}}),u.$on("click",t[3]),{c(){e=T("div"),n=T("div"),re(s.$$.fragment),i=R(),a=T("div"),re(r.$$.fragment),o=R(),c=T("div"),re(l.$$.fragment),h=R(),f=T("div"),re(u.$$.fragment),this.h()},l(p){e=A(p,"DIV",{class:!0});var m=S(e);n=A(m,"DIV",{style:!0});var v=S(n);le(s.$$.fragment,v),i=F(m),a=A(m,"DIV",{style:!0});var g=S(a);le(r.$$.fragment,g),o=F(m),c=A(m,"DIV",{style:!0});var x=S(c);le(l.$$.fragment,x),h=F(m),f=A(m,"DIV",{style:!0});var w=S(f);le(u.$$.fragment,w),m.forEach(_),this.h()},h(){K(n,"display","contents"),K(n,"--bg","#303030"),K(n,"--text","white"),K(a,"display","contents"),K(a,"--bg","#303030"),K(a,"--text","white"),K(c,"display","contents"),K(c,"--bg","#303030"),K(c,"--text","white"),K(f,"display","contents"),K(f,"--bg","#303030"),K(f,"--text","white"),E(e,"class","svelte-1sr1d3o")},m(p,m){I(p,e,m),M(e,n),ae(s,n,null),M(e,i),M(e,a),ae(r,a,null),M(e,o),M(e,c),ae(l,c,null),M(e,h),M(e,f),ae(u,f,null),d=!0},p:H,i(p){d||(L(s.$$.fragment,p),L(r.$$.fragment,p),L(l.$$.fragment,p),L(u.$$.fragment,p),d=!0)},o(p){V(s.$$.fragment,p),V(r.$$.fragment,p),V(l.$$.fragment,p),V(u.$$.fragment,p),d=!1},d(p){p&&_(e),oe(s),oe(r),oe(l),oe(u)}}}function X2(t){return[()=>Tl.restart(),()=>vt(ti,{timeout:0,title:"Report Bug",type:"error",props:{mode:"bug"}}),()=>vt(ti,{timeout:0,title:"Request Feature",props:{mode:"feat"}}),()=>vt(w2,{timeout:0})]}class Y2 extends ve{constructor(e){super(),ge(this,e,X2,W2,ye,{})}}function H2(t){var m,v;let e,s,n,i,r,a=((v=(m=t[0])==null?void 0:m.meta.name)!=null?v:"")+"",o,l,c,h,u,f,d,p;return n=new Nn({props:{icon:"folder",name:"Projects",component:jv}}),h=new Nn({props:{icon:"question",component:Y2,right:!0}}),f=new Nn({props:{icon:"cog",component:Kv,right:!0}}),{c(){e=T("header"),s=T("div"),re(n.$$.fragment),i=R(),r=T("h3"),o=W(a),l=R(),c=T("div"),re(h.$$.fragment),u=R(),d=T("div"),re(f.$$.fragment),this.h()},l(g){e=A(g,"HEADER",{class:!0});var x=S(e);s=A(x,"DIV",{class:!0});var w=S(s);le(n.$$.fragment,w),w.forEach(_),i=F(x),r=A(x,"H3",{class:!0});var y=S(r);o=X(y,a),y.forEach(_),l=F(x),c=A(x,"DIV",{class:!0});var k=S(c);le(h.$$.fragment,k),u=F(k),d=A(k,"DIV",{style:!0});var b=S(d);le(f.$$.fragment,b),k.forEach(_),x.forEach(_),this.h()},h(){E(s,"class","left svelte-1p5yl84"),E(r,"class","svelte-1p5yl84"),K(d,"display","contents"),K(d,"--min-width","250px"),E(c,"class","right svelte-1p5yl84"),E(e,"class","svelte-1p5yl84")},m(g,x){I(g,e,x),M(e,s),ae(n,s,null),M(e,i),M(e,r),M(r,o),M(e,l),M(e,c),ae(h,c,null),M(c,u),M(c,d),ae(f,d,null),p=!0},p(g,[x]){var w,y;(!p||x&1)&&a!==(a=((y=(w=g[0])==null?void 0:w.meta.name)!=null?y:"")+"")&&Ee(o,a)},i(g){p||(L(n.$$.fragment,g),L(h.$$.fragment,g),L(f.$$.fragment,g),p=!0)},o(g){V(n.$$.fragment,g),V(h.$$.fragment,g),V(f.$$.fragment,g),p=!1},d(g){g&&_(e),oe(n),oe(h),oe(f)}}}function G2(t,e,s){let n;const i=De.activeProject;return ht(t,i,r=>s(0,n=r)),[n,i]}class Z2 extends ve{constructor(e){super(),ge(this,e,G2,H2,ye,{})}}function J2(t){let e,s,n,i,r,a,o,l,c,h,u,f,d,p,m;return e=new nc({}),n=new Ao({}),r=new $o({}),o=new r2({}),c=new Z2({}),f=new q2({}),{c(){re(e.$$.fragment),s=R(),re(n.$$.fragment),i=R(),re(r.$$.fragment),a=R(),re(o.$$.fragment),l=R(),re(c.$$.fragment),h=R(),u=T("main"),re(f.$$.fragment),d=R(),p=T("div"),this.h()},l(v){le(e.$$.fragment,v),s=F(v),le(n.$$.fragment,v),i=F(v),le(r.$$.fragment,v),a=F(v),le(o.$$.fragment,v),l=F(v),le(c.$$.fragment,v),h=F(v),u=A(v,"MAIN",{class:!0});var g=S(u);le(f.$$.fragment,g),d=F(g),p=A(g,"DIV",{id:!0,class:!0}),S(p).forEach(_),g.forEach(_),this.h()},h(){E(p,"id","nodesystem-view"),E(p,"class","svelte-1rf37nd"),E(u,"class","svelte-1rf37nd")},m(v,g){ae(e,v,g),I(v,s,g),ae(n,v,g),I(v,i,g),ae(r,v,g),I(v,a,g),ae(o,v,g),I(v,l,g),ae(c,v,g),I(v,h,g),I(v,u,g),ae(f,u,null),M(u,d),M(u,p),t[1](p),m=!0},p:H,i(v){m||(L(e.$$.fragment,v),L(n.$$.fragment,v),L(r.$$.fragment,v),L(o.$$.fragment,v),L(c.$$.fragment,v),L(f.$$.fragment,v),m=!0)},o(v){V(e.$$.fragment,v),V(n.$$.fragment,v),V(r.$$.fragment,v),V(o.$$.fragment,v),V(c.$$.fragment,v),V(f.$$.fragment,v),m=!1},d(v){oe(e,v),v&&_(s),oe(n,v),v&&_(i),oe(r,v),v&&_(a),oe(o,v),v&&_(l),oe(c,v),v&&_(h),v&&_(u),oe(f),t[1](null)}}}function K2(t,e,s){let n;Ct(async()=>{await We.loadFromLocal(),n.append(Ot.view.wrapper),Ot.view.handleResize()});function i(r){Ae[r?"unshift":"push"](()=>{n=r,s(0,n)})}return[n,i]}class ag extends ve{constructor(e){super(),ge(this,e,K2,J2,ye,{})}}export{ag as default};
