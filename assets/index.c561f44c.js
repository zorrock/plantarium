var Vi=Object.defineProperty,Ai=Object.defineProperties;var zi=Object.getOwnPropertyDescriptors;var yn=Object.getOwnPropertySymbols;var Di=Object.prototype.hasOwnProperty,Fi=Object.prototype.propertyIsEnumerable;var gt=(s,e,t)=>e in s?Vi(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,te=(s,e)=>{for(var t in e||(e={}))Di.call(e,t)&&gt(s,t,e[t]);if(yn)for(var t of yn(e))Fi.call(e,t)&&gt(s,t,e[t]);return s},we=(s,e)=>Ai(s,zi(e));var Ke=(s,e,t)=>(gt(s,typeof e!="symbol"?e+"":e,t),t);import{w as Le,S as X,i as q,s as Z,e as _,a as E,b as v,c as y,d as x,n as T,f as k,g as xe,o as Qe,t as Bi,h as me,j as A,k as le,l as Y,m as M,p as G,q as b,r as K,u as oe,v as _n,x as W,y as bn,z as kn,A as xn,B as Ne,C as Me,D,E as F,F as B,G as wt,H as O,I as fe,J as et,K as Pe,L as Mn,M as Sn,N as $n,O as Ln,P as Nn,T as Pn,Q as Ri,R as tt,U as Hi,V as Cn,W as Wi,X as ae,Y as se,Z as ze,_ as En,$ as Ie,a0 as nt,a1 as yt,a2 as Yi,a3 as Gi,a4 as Ui,a5 as Xi,a6 as qi,a7 as Zi,a8 as Ji,a9 as Ki,aa as st,ab as je,ac as De,ad as ye,ae as Qi,af as eo,ag as to,ah as no,ai as so,aj as it,ak as jn,al as Tn,am as io,an as oo,ao as In,ap as On,aq as Vn,ar as ro,as as lo,at as An,au as ao,av as co,aw as uo}from"./vendor.fc45968a.js";const fo=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}};fo();const ho="0px 0px 2px rgba(0, 0, 0, 0.7)",po="0px 0px 5px rgba(0, 0, 0, 0.144)";var mo={"dark_background-color":"#1a1a1a","dark_foreground-color":"#303030","dark_outline-color":"#212121","dark_text-color":"#ffffff",dark_shadow:ho,"light_background-color":"#d0d0d0","light_foreground-color":"white","light_outline-color":"#b9b9b9","light_text-color":"#484848",light_shadow:po};function vo(s){const e={};return Object.entries(s).forEach(([t,n])=>{const[i,o]=t.split("_");i in e?e[i][o]=n:e[i]={[o]:n}}),e}const _t=vo(mo),ot=Object.keys(_t);let bt="theme"in localStorage?localStorage.getItem("theme"):ot[0];ot.includes(bt)||(bt=ot[0]);const kt=Le(_t[bt]),zn=s=>{ot.includes(s)&&(kt.set(_t[s]),localStorage.setItem("theme",s))};function go(s){let e,t;return{c(){e=_("style"),t=E(),v(e,"type","text/css")},m(n,i){y(document.head,e),s[3](e),x(n,t,i)},p:T,i:T,o:T,d(n){k(e),s[3](null),n&&k(t)}}}function wo(s,e,t){let n,i;xe(s,kt,c=>t(2,i=c));let o,r=!1;function a(){r||!o||(r=!0,t(0,o.innerHTML="* {transition: color 0.2s ease, background-color 0.2s ease, outline 0.2s ease !important;}",o),setTimeout(()=>{t(0,o.innerHTML=`* {transition: color 0.2s ease, background-color 0.2s ease, outline 0.2s ease !important;} :root{${n}}`,o),setTimeout(()=>{t(0,o.innerHTML=`:root{${n}}`,o),r=!1},200)},1))}Qe(()=>{t(0,o.innerHTML=`:root{${n}}`,o)});function l(c){me[c?"unshift":"push"](()=>{o=c,t(0,o)})}return s.$$.update=()=>{s.$$.dirty&4&&t(1,n=Bi(i)),s.$$.dirty&2&&n&&a()},[o,n,i,l]}class yo extends X{constructor(e){super();q(this,e,wo,go,Z,{})}}var _o=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.2" baseProfile="tiny" id="Ebene_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
	 x="0px" y="0px" width="100px" height="100px" viewBox="0 0 100 100" xml:space="preserve">
</svg>
`,bo=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  <defs>
    <style>.cls-1{fill:none;stroke:#fff;stroke-width:5px;}</style>
  </defs>
  <title>branch</title>
  <path class="cls-1" d="M49.59,57.35,72.15,38.69"/>
  <path class="cls-1" d="M51.58,29.45,38,11.21"/>
  <path class="cls-1" d="M53.14,82.61,21.78,55.74"/>
  <path class="cls-1" d="M33.46,47.91l4,21"/>
  <polyline class="cls-1" points="56 97 50 58 51 28 56 16"/>
</svg>`,ko='<svg id="e7691b6e-31fa-49a4-aaec-be19b623d191" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><style>.b50603dd-20d5-40a2-a0ce-2fdf3b92ec21{fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:5px;}</style></defs><title>checkmark</title><path class="b50603dd-20d5-40a2-a0ce-2fdf3b92ec21" d="M75.5,30,40.43,72.47a2,2,0,0,1-3.08,0L24.5,57"/></svg>',xo=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
<defs>
	<style>
		circle, path{
			fill:none;
			stroke: var(--text, white);
			stroke-width: 5px;
		}
	</style>
</defs>
	<circle class="cls-1" cx="50.37" cy="50.5" r="17.23"/>
  <path class="cls-1" d="M38.07,20.49,32.17,8.05,50.83,4.41l.61,13.8,12.13,2.28L68.73,8.05l14,10.16-9,10L81.17,38.7l12-5.47,3.34,17.3H81.93L80.57,63l12.59,6.37L82.7,83.62l-9-9.86L63.58,81.19l5.15,11.23-17.9,3.64V82.71L38.08,81.19,32.77,92.42,17.44,82.71l10.17-8.35L19.11,63,8.19,69.36,4.4,50.56H17.45l1.67-13.81L8.2,30.84l9.25-13.2,11.08,8.81Z"/>
</svg>
`,Mo=`<svg
  xmlns="http://www.w3.org/2000/svg"
	viewBox="0 0 100 100">
  <line fill="none" stroke="#FFFFFF" stroke-width="5" stroke-miterlimit="10" x1="27.836" y1="72.164" x2="72.164" y2="27.836"/>
  <line fill="none" stroke="#FFFFFF" stroke-width="5" stroke-miterlimit="10" x1="27.836" y1="27.988" x2="72.164" y2="72.012"/>
</svg>
`,So=`<svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M50.552 59.3295L39.0695 13.7056H60.2078L50.552 59.3295Z" stroke="white" stroke-width="5" stroke-linejoin="round"/>
<path d="M58.4305 77.2411C58.4305 80.8276 55.4725 83.7944 51.7497 83.7944C48.0269 83.7944 45.0688 80.8276 45.0688 77.2411C45.0688 73.6546 48.0269 70.6878 51.7497 70.6878C55.4725 70.6878 58.4305 73.6546 58.4305 77.2411Z" stroke="white" stroke-width="5"/>
</svg>
`,$o=`<svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">

<defs>
	<style>
		path{
			stroke: white;
			stroke-width: 5px;
		}
	</style>
</defs>

<path d="M23.5167 72.9513V32.1483H82.1056L87.6855 37.0307V76.09L82.1056 78.5312H29.4453L23.5167 72.9513Z" />
<path d="M23.2747 73.6489L12.3145 30.0463L15.8885 21.4688H71.8808L75.693 32.9055" />
<path d="M25.488 43.9781H86.7394" />
</svg>
`,Lo=`<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
<path d="M70.5 26.5L77.5 23.5L82 32V69L77.5 82L64.5 92.5H47L32 82L18 46L21 40H27L35 57.5V15.5L39.5 11L45.5 13.5M70.5 26.5L69 15.5L58.5 14M70.5 26.5V57.5M58.5 14L55 8L45.5 13.5M58.5 14V49M45.5 13.5V49" stroke-width="5"/>
</svg>
`,No=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  <defs>
    <style>.cls-1{fill:none;stroke:#fff;stroke-width:5px;}</style>
  </defs>
  <title>leaf</title>
  <path class="cls-1" d="M50.69,96.21,72.86,72.33,77,47,65.91,21.7,50.66,4.5"/>
  <path class="cls-1" d="M53.37,96.21,31.2,72.33,27.07,47,38.15,21.7,53.4,4.5"/>
</svg>`,Po=`<svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M30.2312 46.4809V15.6962L33.3006 8H40.8035L44.3844 11.0785V29.7203H52.9104L55.9798 33.8249H65.0173L68.0867 38.9557L76.2717 40.1529L79 56.0583L73.7139 72.9899L66.8931 93H36.5405L30.2312 75.5553L20 60.334L21.7052 50.2435L30.2312 46.4809ZM30.2312 46.4809V58.1107M44.3844 29.3783V46.3099M56.4913 34.5091V46.3099M68.7688 39.2978V50.4145" stroke="white" stroke-width="5"/>
</svg>
`,Co=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  <defs>
    <style>.cls-1{fill:none;stroke:#fff;stroke-width:5px;}</style>
  </defs>
  <title>stem</title>
  <path class="cls-1" d="M49,95.5l8.66-23.19L43.24,46.07l10.59-21L43.24,4.5"/>
</svg>`,Eo=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" xml:space="preserve">
  <polygon fill="none" stroke="#FFFFFF" stroke-width="5" stroke-miterlimit="10" points="33.5,73.759 33.5,26.241 67.441,50 "/>
</svg>
`,jo=`<svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M54.7631 15.1799L91.7944 79.3201C93.9114 82.9867 91.2652 87.5701 87.0313 87.5701H12.9687C8.73476 87.5701 6.08857 82.9867 8.20552 79.3201L45.2368 15.1799C47.3538 11.5133 52.6462 11.5133 54.7631 15.1799Z" stroke="white" stroke-width="5" stroke-linejoin="round"/>
<ellipse cx="50.0578" cy="73.7787" rx="5.98166" ry="5.89858" fill="white"/>
<path d="M52.9755 60.2707C52.5275 63.7615 47.4723 63.7615 47.0243 60.2707L43.5981 33.5748C43.3678 31.781 44.7652 30.1929 46.5736 30.1929L53.4261 30.1929C55.2346 30.1929 56.6319 31.781 56.4017 33.5748L52.9755 60.2707Z" fill="white"/>
</svg>
`,To=`<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
<path d="M32.7792 25.4477L45.6598 15.6472L61.6205 20.4075L67.2208 32.728L54.3402 46.4486L50.9801 59.3291V63.9218" stroke-width="8"/>
<path d="M47.3642 83.3434L44.983 79.0169L46.821 74.3331L51.3861 73.0881L55.5363 75.0446L56.307 80.8548L52.3347 84.3528L47.3642 83.3434Z" />
</svg>

`,Dn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",arrow:_o,branch:bo,checkmark:ko,cog:xo,cross:Mo,exclamation:So,folder:$o,hand:Lo,leaf:No,pointing:Po,stem:Co,triangle:Eo,warning:jo,question:To});function Io(s){let e;return{c(){e=_("div"),v(e,"class","icon-wrapper svelte-1ho94ty"),A(e,"active",s[0]),A(e,"dark",s[1]),A(e,"circle",s[2])},m(t,n){x(t,e,n),e.innerHTML=s[3]},p(t,[n]){n&8&&(e.innerHTML=t[3]),n&1&&A(e,"active",t[0]),n&2&&A(e,"dark",t[1]),n&4&&A(e,"circle",t[2])},i:T,o:T,d(t){t&&k(e)}}}function Oo(s,e,t){let n,{name:i="triangle"}=e,{active:o=!1}=e,{dark:r=!1}=e,{circle:a=!1}=e;return s.$$set=l=>{"name"in l&&t(4,i=l.name),"active"in l&&t(0,o=l.active),"dark"in l&&t(1,r=l.dark),"circle"in l&&t(2,a=l.circle)},s.$$.update=()=>{s.$$.dirty&16&&t(3,n=i in Dn?Dn[i]:i.toString()+" icon not found")},[o,r,a,n,i]}class Fe extends X{constructor(e){super();q(this,e,Oo,Io,Z,{name:4,active:0,dark:1,circle:2})}}function Fn(s){let e,t,n,i;const o=[Ao,Vo],r=[];function a(l,c){return l[6]?0:1}return e=a(s),t=r[e]=o[e](s),{c(){t.c(),n=le()},m(l,c){r[e].m(l,c),x(l,n,c),i=!0},p(l,c){let u=e;e=a(l),e===u?r[e].p(l,c):(Y(),M(r[u],1,1,()=>{r[u]=null}),G(),t=r[e],t?t.p(l,c):(t=r[e]=o[e](l),t.c()),b(t,1),t.m(n.parentNode,n))},i(l){i||(b(t),i=!0)},o(l){M(t),i=!1},d(l){r[e].d(l),l&&k(n)}}}function Vo(s){let e;return{c(){e=_("plant-icon"),Me(e,"name",s[1]),Me(e,"active",s[0]),Me(e,"class","svelte-1ry5k13")},m(t,n){x(t,e,n)},p(t,n){n&2&&Me(e,"name",t[1]),n&1&&Me(e,"active",t[0])},i:T,o:T,d(t){t&&k(e)}}}function Ao(s){let e,t;return e=new Fe({props:{name:s[1],active:s[0]}}),{c(){D(e.$$.fragment)},m(n,i){F(e,n,i),t=!0},p(n,i){const o={};i&2&&(o.name=n[1]),i&1&&(o.active=n[0]),e.$set(o)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Bn(s){let e,t;return{c(){e=_("p"),t=K(s[2]),v(e,"class","svelte-1ry5k13")},m(n,i){x(n,e,i),y(e,t)},p(n,i){i&4&&oe(t,n[2])},d(n){n&&k(e)}}}function zo(s){let e,t,n,i,o,r,a,l=s[1]&&Fn(s),c=s[2]&&Bn(s);const u=s[9].default,f=_n(u,s,s[8],null);return{c(){e=_("button"),l&&l.c(),t=E(),c&&c.c(),n=E(),i=_("div"),f&&f.c(),v(i,"class","content svelte-1ry5k13"),e.disabled=s[4],v(e,"class","svelte-1ry5k13"),A(e,"active",s[0]),A(e,"useActive",s[3]),A(e,"only-icon",!s[2]),A(e,"has-icon",!!s[1])},m(h,d){x(h,e,d),l&&l.m(e,null),y(e,t),c&&c.m(e,null),y(e,n),y(e,i),f&&f.m(i,null),s[10](e),o=!0,r||(a=W(e,"click",s[7]),r=!0)},p(h,[d]){h[1]?l?(l.p(h,d),d&2&&b(l,1)):(l=Fn(h),l.c(),b(l,1),l.m(e,t)):l&&(Y(),M(l,1,1,()=>{l=null}),G()),h[2]?c?c.p(h,d):(c=Bn(h),c.c(),c.m(e,n)):c&&(c.d(1),c=null),f&&f.p&&(!o||d&256)&&bn(f,u,h,h[8],o?xn(u,h[8],d,null):kn(h[8]),null),(!o||d&16)&&(e.disabled=h[4]),d&1&&A(e,"active",h[0]),d&8&&A(e,"useActive",h[3]),d&4&&A(e,"only-icon",!h[2]),d&2&&A(e,"has-icon",!!h[1])},i(h){o||(b(l),b(f,h),o=!0)},o(h){M(l),M(f,h),o=!1},d(h){h&&k(e),l&&l.d(),c&&c.d(),f&&f.d(h),s[10](null),r=!1,a()}}}function Do(s,e,t){let n,{$$slots:i={},$$scope:o}=e,{icon:r=void 0}=e,{name:a=""}=e,{active:l=!1}=e,{useActive:c=!1}=e,{disabled:u=!1}=e,f;const h=Ne(),d=()=>{t(0,l=!l),h("click")};function p(m){me[m?"unshift":"push"](()=>{f=m,t(5,f)})}return s.$$set=m=>{"icon"in m&&t(1,r=m.icon),"name"in m&&t(2,a=m.name),"active"in m&&t(0,l=m.active),"useActive"in m&&t(3,c=m.useActive),"disabled"in m&&t(4,u=m.disabled),"$$scope"in m&&t(8,o=m.$$scope)},s.$$.update=()=>{s.$$.dirty&32&&t(6,n=f&&!!f.parentElement)},[l,r,a,c,u,f,n,d,o,i,p]}class ve extends X{constructor(e){super();q(this,e,Do,zo,Z,{icon:1,name:2,active:0,useActive:3,disabled:4})}}var he;(function(s){s.INFO="info",s.WARNING="warning",s.ERROR="error",s.SUCCESS="success"})(he||(he={}));const Fo=s=>(e,t)=>{var r;if(!e&&!t)return;const n=Array.isArray(t==null?void 0:t.values),i={id:wt(),type:he.INFO,content:e,props:t.props,title:(r=t==null?void 0:t.title)!=null?r:t==null?void 0:t.type,values:t==null?void 0:t.values,timeout:t==null?void 0:t.timeout},o=new Promise((a,l)=>{i.resolve=a,i.reject=l});if(o.finally(()=>s.update(a=>a.filter(l=>l.id!==i.id))),t&&"type"in t){const a=t.type.toLowerCase();Object.values(he).forEach(l=>{a===l&&(i.type=l)})}if(e instanceof Error&&(i.type=he.ERROR),typeof i.timeout=="undefined"){let a;i.type===he.SUCCESS&&(a=3e3),i.type===he.INFO&&(a=2e3),i.type===he.WARNING&&(a=7e3),a&&!n&&(i.timeout=a)}return"title"in i||(i.title=i.type.toUpperCase().slice(0,1)+i.type.slice(1)),s.update(a=>[...a,i]),i.timeout&&setTimeout(i.resolve,i.timeout),o};var Rn=()=>{const s=Le([]),e=Fo(s);return{store:s,createMessage:e,MessageType:he}};const{store:Bo,createMessage:Ro,MessageType:Rc}=Rn(),rt=Ro;function Hn(s,e,t){const n=s.slice();return n[5]=e[t],n}function Wn(s){let e,t,n,i,o,r,a,l,c,u,f=s[0].title&&Yn(s);const h=[Wo,Ho],d=[];function p(g,w){return typeof g[0].content=="string"?0:1}i=p(s),o=d[i]=h[i](s);let m=s[0].values&&Gn(s);return{c(){e=_("div"),t=_("div"),f&&f.c(),n=E(),o.c(),r=E(),m&&m.c(),v(t,"class",a="alert-wrapper alert-"+s[0].type+" svelte-1d43s26"),A(t,"isInverted",s[1]),v(e,"class","alert-container svelte-1d43s26")},m(g,w){x(g,e,w),y(e,t),f&&f.m(t,null),y(t,n),d[i].m(t,null),y(t,r),m&&m.m(t,null),u=!0},p(g,w){g[0].title?f?f.p(g,w):(f=Yn(g),f.c(),f.m(t,n)):f&&(f.d(1),f=null);let N=i;i=p(g),i===N?d[i].p(g,w):(Y(),M(d[N],1,1,()=>{d[N]=null}),G(),o=d[i],o?o.p(g,w):(o=d[i]=h[i](g),o.c()),b(o,1),o.m(t,r)),g[0].values?m?(m.p(g,w),w&1&&b(m,1)):(m=Gn(g),m.c(),b(m,1),m.m(t,null)):m&&(Y(),M(m,1,1,()=>{m=null}),G()),(!u||w&1&&a!==(a="alert-wrapper alert-"+g[0].type+" svelte-1d43s26"))&&v(t,"class",a),w&3&&A(t,"isInverted",g[1])},i(g){u||(b(o),b(m),et(()=>{l||(l=Pe(t,Mn,{},!0)),l.run(1)}),et(()=>{c||(c=Pe(e,Sn,{},!0)),c.run(1)}),u=!0)},o(g){M(o),M(m),l||(l=Pe(t,Mn,{},!1)),l.run(0),c||(c=Pe(e,Sn,{},!1)),c.run(0),u=!1},d(g){g&&k(e),f&&f.d(),d[i].d(),m&&m.d(),g&&l&&l.end(),g&&c&&c.end()}}}function Yn(s){let e,t=s[0].title+"",n;return{c(){e=_("h2"),n=K(t),v(e,"class","svelte-1d43s26")},m(i,o){x(i,e,o),y(e,n)},p(i,o){o&1&&t!==(t=i[0].title+"")&&oe(n,t)},d(i){i&&k(e)}}}function Ho(s){let e,t,n;const i=[s[0].props];var o=s[0].content;function r(a){let l={};for(let c=0;c<i.length;c+=1)l=Nn(l,i[c]);return{props:l}}return o&&(e=new o(r())),{c(){e&&D(e.$$.fragment),t=le()},m(a,l){e&&F(e,a,l),x(a,t,l),n=!0},p(a,l){const c=l&1?$n(i,[Ln(a[0].props)]):{};if(o!==(o=a[0].content)){if(e){Y();const u=e;M(u.$$.fragment,1,0,()=>{B(u,1)}),G()}o?(e=new o(r()),D(e.$$.fragment),b(e.$$.fragment,1),F(e,t.parentNode,t)):e=null}else o&&e.$set(c)},i(a){n||(e&&b(e.$$.fragment,a),n=!0)},o(a){e&&M(e.$$.fragment,a),n=!1},d(a){a&&k(t),e&&B(e,a)}}}function Wo(s){let e,t=s[0].content+"";return{c(){e=_("p")},m(n,i){x(n,e,i),e.innerHTML=t},p(n,i){i&1&&t!==(t=n[0].content+"")&&(e.innerHTML=t)},i:T,o:T,d(n){n&&k(e)}}}function Gn(s){let e,t,n=s[0].values,i=[];for(let r=0;r<n.length;r+=1)i[r]=Un(Hn(s,n,r));const o=r=>M(i[r],1,1,()=>{i[r]=null});return{c(){e=_("div");for(let r=0;r<i.length;r+=1)i[r].c();v(e,"class","options-wrapper svelte-1d43s26")},m(r,a){x(r,e,a);for(let l=0;l<i.length;l+=1)i[l].m(e,null);t=!0},p(r,a){if(a&1){n=r[0].values;let l;for(l=0;l<n.length;l+=1){const c=Hn(r,n,l);i[l]?(i[l].p(c,a),b(i[l],1)):(i[l]=Un(c),i[l].c(),b(i[l],1),i[l].m(e,null))}for(Y(),l=n.length;l<i.length;l+=1)o(l);G()}},i(r){if(!t){for(let a=0;a<n.length;a+=1)b(i[a]);t=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)M(i[a]);t=!1},d(r){r&&k(e),fe(i,r)}}}function Un(s){let e,t,n;function i(){return s[4](s[5])}return e=new ve({props:{name:s[5]}}),e.$on("click",i),{c(){t=_("div"),D(e.$$.fragment),O(t,"display","contents"),O(t,"--bg","#303030"),O(t,"--text","white")},m(o,r){x(o,t,r),F(e,t,null),n=!0},p(o,r){s=o;const a={};r&1&&(a.name=s[5]),e.$set(a)},i(o){n||(b(e.$$.fragment,o),n=!0)},o(o){M(e.$$.fragment,o),n=!1},d(o){o&&k(t),B(e,o)}}}function Yo(s){let e,t,n,i,o=s[0]&&Wn(s);return{c(){o&&o.c(),e=le()},m(r,a){o&&o.m(r,a),x(r,e,a),t=!0,n||(i=W(window,"keydown",s[2]),n=!0)},p(r,[a]){r[0]?o?(o.p(r,a),a&1&&b(o,1)):(o=Wn(r),o.c(),b(o,1),o.m(e.parentNode,e)):o&&(Y(),M(o,1,1,()=>{o=null}),G())},i(r){t||(b(o),t=!0)},o(r){M(o),t=!1},d(r){o&&o.d(r),r&&k(e),n=!1,i()}}}function Go(s,e,t){let n,i,o;xe(s,Bo,l=>t(3,o=l));function r(l){l.key==="Escape"&&n.reject()}const a=l=>n.resolve(l);return s.$$.update=()=>{s.$$.dirty&8&&t(0,n=o[0]),s.$$.dirty&1&&t(1,i=n&&(n.type==="success"||n.type==="warning"))},[n,i,r,o,a]}class Uo extends X{constructor(e){super();q(this,e,Go,Yo,Z,{})}}const{store:Xo,createMessage:qo}=Rn(),Be=qo;var Zo=(s,...e)=>{const t=(i,o)=>{Object.getOwnPropertyNames(o).concat(Object.getOwnPropertySymbols(o).map(r=>r.toString())).forEach(r=>{r.match(/^(?:constructor|prototype|arguments|caller|name|bind|call|apply|toString|length)$/)||Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(o,r))})},n=class extends s{constructor(...o){super(...o);e.forEach(r=>t(this,new r))}};return e.forEach(i=>{t(n.prototype,i.prototype),t(n,i)}),n},Xn=s=>{s[0]==="#"&&(s=s.replace("#","")),s.length===3&&(s=s[0]+s[0]+s[1]+s[1]+s[2]+s[2]);const e=s.match(/.{1,2}/g);return[parseInt(e[0],16)/255,parseInt(e[1],16)/255,parseInt(e[2],16)/255]};const _e=.4;function Jo(s,e,t,n,i,o,r,a,l,c){const u=i-t,f=r-i,h=l-r,d=o-n,p=a-o,m=c-a;let g,w,N,L,P=-1e4,I=-1e4;const $=[{x:t,y:n}];for(let V=1;V<s;V++){const z=V/s;g=t+u*z,N=i+f*z;const Q=r+h*z;g+=(N-g)*z,N+=(Q-N)*z,w=n+d*z,L=o+p*z;const J=a+m*z;w+=(L-w)*z,L+=(J-L)*z;const ie=g+(N-g)*z,U=w+(L-w)*z,ee=ie-P,R=U-I;ee*ee+R*R>e&&($.push({x:ie,y:U}),P=ie,I=U)}return $.push({x:l,y:c}),$}function Ko(s){const e=s.length-1;return s.map((t,n,i)=>{if(n===0)return{rx:i[n+1].x*_e*0,ry:t.y+(i[n+1].y-t.y)*_e*0};if(n===e)return{lx:i[n-1].x+(t.x-i[n-1].x)*_e*2,ly:i[n-1].y+(t.y-i[n-1].y)*_e*2};if(t.y>i[n+1].y&&t.y>i[n-1].y||t.y<i[n+1].y&&t.y<i[n-1].y)return{lx:i[n-1].x+(t.x-i[n-1].x)*_e,ly:t.y,rx:t.x+(i[n+1].x-t.x)*_e,ry:t.y};{const r={x:i[n-1].x-i[n+1].x,y:i[n-1].y-i[n+1].y},a=Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2));r.x/=a,r.y/=a;const l=i[n+1].x-t.x,c=t.x-i[n-1].x;return{lx:t.x+r.x*c*_e,ly:t.y+r.y*c*_e,rx:t.x-r.x*l*_e,ry:t.y-r.y*l*_e}}})}function Qo(s){const e=s.length-1,t={},n=Ko(s);return s.map((i,o,r)=>{if(o<e)return Jo(e*20,0,i.x,i.y,n[o].rx,n[o].ry,n[o+1].lx,n[o+1].ly,r[o+1].x,r[o+1].y)}).flat().filter(i=>!i||i.x in t?!1:(t[i.x]=!0,!0))}function qn(s,e,t){let n;return(...i)=>{const o=()=>{n=null,t||s(...i)},r=t&&!n;clearTimeout(n),n=setTimeout(o,e),r&&s(...i)}}function er(s,e=!1){return function(t,n,i){let o;const r=i.value;return i.value=function(...a){const l=()=>{o=null,e||r.apply(this,a)},c=e&&!o;clearTimeout(o),o=setTimeout(l,s),c&&r.apply(this,a)},i}}function xt(s,e){let t,n,i,o=null,r=0;const a=()=>{r=0,o=null,i=s.apply(t,n),o||(t=n=null)};return function(){const l=Date.now();r||(r=l);const c=e-(l-r);return t=this,n=arguments,c<=0||c>e?(o&&(window.clearTimeout(o),o=null),r=l,i=s.apply(t,n),o||(t=n=null)):o||(o=window.setTimeout(a,c)),i}}const be={amountEmitters:0,amountCallbacks:0,emitters:[]};typeof self!="undefined"&&"window"in self&&(window.debug=be);class ge{constructor(){Ke(this,"index",0);Ke(this,"cbs",{});Ke(this,"cbsOnce",{});this.index=be.amountEmitters,be.amountEmitters++}emit(e,t){e in this.cbs&&this.cbs[e].forEach(n=>n(t)),e in this.cbsOnce&&(this.cbsOnce[e].forEach(n=>n(t)),delete this.cbsOnce[e])}on(e,t,n=0){n>0&&(t=xt(t,n));const i=Object.assign(this.cbs,{[e]:[...this.cbs[e]||[],t]});return this.cbs=i,be.emitters[this.index]={name:this.constructor.name,cbs:Object.fromEntries(Object.keys(this.cbs).map(o=>[o,this.cbs[o].length]))},be.amountCallbacks++,()=>{var o;be.amountCallbacks--,(o=i[e])==null||o.splice(i[e].indexOf(t),1),be.emitters[this.index]={name:this.constructor.name,cbs:Object.fromEntries(Object.keys(this.cbs).map(r=>[r,this.cbs[r].length]))}}}once(e,t){return this.cbsOnce[e]=[...this.cbsOnce[e]||[],t],()=>{this.cbsOnce[e].splice(this.cbsOnce[e].indexOf(t),1)}}destroyEventEmitter(){be.amountEmitters--,Object.keys(this.cbs).forEach(e=>{be.amountCallbacks-=this.cbs[e].length,delete this.cbs[e]}),Object.keys(this.cbsOnce).forEach(e=>delete this.cbsOnce[e]),this.cbs={},this.cbsOnce={},delete be.emitters[this.index]}}function tr(s){if(s.length===0)return 0;let e=0;for(let t=0;t<s.length;t++)e=(e<<5)-e+s.charCodeAt(t),e=e&e;return e}var nr=()=>{const s={};let e=0;const t=(n=0,i=0)=>{if(i>500)throw new Error("Infinite loop in id generation algo");return n in s?t(Math.max(n++,e++),i+1):(s[n]=!0,n.toString())};return t.reset=()=>{Object.keys(s).forEach(n=>delete s[+n]),e=0},t};function sr(s,e){const t=[],n=s.length/e;for(let i=0;i<n;i++){const o=[];for(let r=0;r<e;r++)o[r]=s[i*e+r];t.push(o)}return t}const Ce=s=>s>1?"s":"",Zn=s=>{if(typeof s!="number"||isNaN(s))return"never";if(s<1e3)return"< 1 second";const e=Math.floor(s/1e3);if(e<60)return e+" second"+Ce(e);const t=Math.floor(e/60);if(t<60)return t+" minute"+Ce(t);const n=Math.floor(t/60);if(n<24)return n+" hour"+Ce(n);const i=Math.floor(n/24);if(i<7)return i+" day"+Ce(i);const o=Math.floor(i/7);if(o<30)return o+" week"+Ce(o);const r=Math.floor(o/30);if(r<12)return r+" month"+Ce(r);const a=Math.floor(r/12);if(a<10)return a+" year"+Ce(a);const l=Math.floor(r/10);return l+" decade"+Ce(l)};function Mt(s){let e,t={length:NaN};const n=(i,o)=>i===t[o];return function(...o){return(o.length!==t.length||!o.every(n))&&(t=o,e=s.apply(this,o)),e}}const St={},ir=(s,e,t={})=>{if(St[e])return St[e];const n=new Pn(s,t),i=new Image;return St[e]=n,i.onload=()=>{n.image=i},i.src=e,n};var or={texture:ir};let $t=[],lt=2,Te=0;const rr={};let Lt=0;const lr=["#00ffff","#f0ffff","#f5f5dc","#000000","#0000ff","#a52a2a","#00ffff","#00008b","#008b8b","#a9a9a9","#006400","#bdb76b","#8b008b","#556b2f","#ff8c00","#9932cc","#8b0000","#e9967a","#9400d3","#ff00ff","#ffd700","#008000","#4b0082","#f0e68c","#add8e6","#e0ffff","#90ee90","#d3d3d3","#ffb6c1","#ffffe0","#00ff00","#ff00ff","#800000","#000080","#808000","#ffa500","#ffc0cb","#800080","#800080","#ff0000","#c0c0c0","#ffffff","#ffff00"];function ce(s){Te=Math.max(Te,s.length);const e=Lt;rr[s]=lr[Lt],Lt++;const t=(...n)=>{if((!$t.length||$t.includes(s))&&lt===0){if(typeof n[0]=="string"&&typeof n[1]=="object"){console.groupCollapsed(`%c[${s.padEnd(Te," ")}]`,`color: hsl(${e*30}deg 68% 64%); font-weight: bold;`,n[0]),console.log(...n.slice(1)),console.groupEnd();return}console.log(`%c[${s.padEnd(Te," ")}]`,`color: hsl(${e*30}deg 68% 64%); font-weight: bold;`,...n)}};return t.group=(...n)=>{lt<1&&console.groupCollapsed(`%c[${s.padEnd(Te," ")}]`,`color: hsl(${e*30}deg 68% 64%); font-weight: bold;`,...n)},t.warn=(...n)=>{lt<=1&&console.warn(`[${s.padEnd(Te," ")}]`,...n)},t.error=n=>{console.error(`[${s.padEnd(Te," ")}]`,n)},t}ce.setFilter=(...s)=>{$t=s};ce.setLevel=(s=0)=>{lt=s};function ar(s){const e={};return(...t)=>{const n=tr(JSON.stringify(t));return n in e?e[n]:e[n]=s(...t)}}const cr=/^(?:[ ]+)?(?:at )([^ ]*)?(?: )?(?:\[(.*?)\] )?(?:\(([^()]+)\))?$/gm,Jn=s=>s.replace(window.location.href,"").replace(/^node_modules/,"").replace(/.+?(?=plantarium)plantarium\//,"");var Kn=s=>{const[e,...t]=s.split(`
`),[n,i]=e.split(":"),o=t.map(r=>{const a=[...r.matchAll(cr)][0],[,l,c,u]=a;return te(te({name:Jn(l)},u?{location:Jn(u)}:{}),c?{alias:c.trim().replace("as ","")}:{})});return{title:i,type:n,lines:o}};function Qn(s,e,t){const n=s.slice();return n[1]=e[t],n}function es(s){let e,t,n,i=s[0].type+"",o,r,a,l=s[0].title+"",c,u,f,h,d=s[0].lines,p=[];for(let m=0;m<d.length;m+=1)p[m]=ss(Qn(s,d,m));return{c(){e=_("div"),t=_("p"),n=_("b"),o=K(i),r=K(":"),a=E(),c=K(l),u=E(),f=_("pre"),h=_("code");for(let m=0;m<p.length;m+=1)p[m].c();v(f,"class","svelte-1e5rtbs"),v(e,"class","wrapper svelte-1e5rtbs")},m(m,g){x(m,e,g),y(e,t),y(t,n),y(n,o),y(n,r),y(t,a),y(t,c),y(e,u),y(e,f),y(f,h);for(let w=0;w<p.length;w+=1)p[w].m(h,null)},p(m,g){if(g&1&&i!==(i=m[0].type+"")&&oe(o,i),g&1&&l!==(l=m[0].title+"")&&oe(c,l),g&1){d=m[0].lines;let w;for(w=0;w<d.length;w+=1){const N=Qn(m,d,w);p[w]?p[w].p(N,g):(p[w]=ss(N),p[w].c(),p[w].m(h,null))}for(;w<p.length;w+=1)p[w].d(1);p.length=d.length}},d(m){m&&k(e),fe(p,m)}}}function ts(s){let e,t,n,i=s[1].alias+"",o;return{c(){e=K("as "),t=_("strong"),n=K("$"),o=K(i)},m(r,a){x(r,e,a),x(r,t,a),y(t,n),y(t,o)},p(r,a){a&1&&i!==(i=r[1].alias+"")&&oe(o,i)},d(r){r&&k(e),r&&k(t)}}}function ns(s){let e,t,n=s[1].location+"",i,o;return{c(){e=K("\xA0("),t=_("i"),i=K(n),o=K(")")},m(r,a){x(r,e,a),x(r,t,a),y(t,i),x(r,o,a)},p(r,a){a&1&&n!==(n=r[1].location+"")&&oe(i,n)},d(r){r&&k(e),r&&k(t),r&&k(o)}}}function ss(s){let e,t,n=s[1].name+"",i,o,r,a=s[1].alias&&ts(s),l=s[1].location&&ns(s);return{c(){e=K("at "),t=_("strong"),i=K(n),a&&a.c(),o=le(),l&&l.c(),r=_("br")},m(c,u){x(c,e,u),x(c,t,u),y(t,i),a&&a.m(c,u),x(c,o,u),l&&l.m(c,u),x(c,r,u)},p(c,u){u&1&&n!==(n=c[1].name+"")&&oe(i,n),c[1].alias?a?a.p(c,u):(a=ts(c),a.c(),a.m(o.parentNode,o)):a&&(a.d(1),a=null),c[1].location?l?l.p(c,u):(l=ns(c),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(c){c&&k(e),c&&k(t),a&&a.d(c),c&&k(o),l&&l.d(c),c&&k(r)}}}function ur(s){let e,t=s[0]&&es(s);return{c(){t&&t.c(),e=le()},m(n,i){t&&t.m(n,i),x(n,e,i)},p(n,[i]){n[0]?t?t.p(n,i):(t=es(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:T,o:T,d(n){t&&t.d(n),n&&k(e)}}}function fr(s,e,t){let{stacktrace:n}=e;return s.$$set=i=>{"stacktrace"in i&&t(0,n=i.stacktrace)},[n]}class hr extends X{constructor(e){super();q(this,e,fr,ur,Z,{stacktrace:0})}}function is(s,e,t){const n=s.slice();return n[13]=e[t],n}function os(s){let e,t,n,i,o,r,a,l,c,u,f,h,d,p,m,g,w,N,L,P,I,$,V=s[6]&&rs(s),z=s[0].title&&ls(s);const Q=[mr,pr,dr],J=[];function ie(R,ne){return typeof R[0].content=="string"?0:R[0].content instanceof Error?1:R[0].content instanceof Ri?2:-1}~(a=ie(s))&&(l=J[a]=Q[a](s));let U=s[0].content instanceof Error&&cs(s),ee=s[0].values&&us(s);return p=new Fe({props:{name:"cross"}}),{c(){e=_("div"),t=_("div"),n=_("div"),V&&V.c(),i=E(),o=_("div"),z&&z.c(),r=E(),l&&l.c(),c=E(),u=_("div"),U&&U.c(),f=E(),ee&&ee.c(),h=E(),d=_("div"),m=_("div"),D(p.$$.fragment),g=E(),w=_("div"),v(u,"class","button-wrapper svelte-bnz79m"),v(o,"class","toast-text svelte-bnz79m"),O(m,"display","contents"),O(m,"--height","fit-content"),v(d,"class","toast-close svelte-bnz79m"),v(n,"class","toast-content svelte-bnz79m"),A(n,"hasIcon",!!s[6]),v(w,"style",N=`transition: width ${s[0].timeout}ms linear;`),v(w,"class","toast-progress svelte-bnz79m"),A(w,"animateProgress",s[2]),v(t,"class",L="toast toast-"+s[0].type+" svelte-bnz79m"),A(t,"isInverted",s[5]),v(e,"class","wrapper svelte-bnz79m")},m(R,ne){x(R,e,ne),y(e,t),y(t,n),V&&V.m(n,null),y(n,i),y(n,o),z&&z.m(o,null),y(o,r),~a&&J[a].m(o,null),y(o,c),y(o,u),U&&U.m(u,null),y(u,f),ee&&ee.m(u,null),y(n,h),y(n,d),y(d,m),F(p,m,null),y(t,g),y(t,w),s[11](e),P=!0,I||($=W(d,"click",s[10]),I=!0)},p(R,ne){R[6]?V?(V.p(R,ne),ne&64&&b(V,1)):(V=rs(R),V.c(),b(V,1),V.m(n,i)):V&&(Y(),M(V,1,1,()=>{V=null}),G()),R[0].title?z?z.p(R,ne):(z=ls(R),z.c(),z.m(o,r)):z&&(z.d(1),z=null);let Ee=a;a=ie(R),a===Ee?~a&&J[a].p(R,ne):(l&&(Y(),M(J[Ee],1,1,()=>{J[Ee]=null}),G()),~a?(l=J[a],l?l.p(R,ne):(l=J[a]=Q[a](R),l.c()),b(l,1),l.m(o,c)):l=null),R[0].content instanceof Error?U?(U.p(R,ne),ne&1&&b(U,1)):(U=cs(R),U.c(),b(U,1),U.m(u,f)):U&&(Y(),M(U,1,1,()=>{U=null}),G()),R[0].values?ee?(ee.p(R,ne),ne&1&&b(ee,1)):(ee=us(R),ee.c(),b(ee,1),ee.m(u,null)):ee&&(Y(),M(ee,1,1,()=>{ee=null}),G()),ne&64&&A(n,"hasIcon",!!R[6]),(!P||ne&1&&N!==(N=`transition: width ${R[0].timeout}ms linear;`))&&v(w,"style",N),ne&4&&A(w,"animateProgress",R[2]),(!P||ne&1&&L!==(L="toast toast-"+R[0].type+" svelte-bnz79m"))&&v(t,"class",L),ne&33&&A(t,"isInverted",R[5])},i(R){P||(b(V),b(l),b(U),b(ee),b(p.$$.fragment,R),P=!0)},o(R){M(V),M(l),M(U),M(ee),M(p.$$.fragment,R),P=!1},d(R){R&&k(e),V&&V.d(),z&&z.d(),~a&&J[a].d(),U&&U.d(),ee&&ee.d(),B(p),s[11](null),I=!1,$()}}}function rs(s){let e,t,n,i;return t=new Fe({props:{name:s[6],circle:!0}}),{c(){e=_("div"),n=_("div"),D(t.$$.fragment),O(n,"display","contents"),O(n,"--width","40px"),O(n,"--height","40px"),v(e,"class","toast-icon svelte-bnz79m")},m(o,r){x(o,e,r),y(e,n),F(t,n,null),i=!0},p(o,r){const a={};r&64&&(a.name=o[6]),t.$set(a)},i(o){i||(b(t.$$.fragment,o),i=!0)},o(o){M(t.$$.fragment,o),i=!1},d(o){o&&k(e),B(t)}}}function ls(s){let e,t=s[0].title+"",n;return{c(){e=_("h3"),n=K(t),v(e,"class","svelte-bnz79m")},m(i,o){x(i,e,o),y(e,n)},p(i,o){o&1&&t!==(t=i[0].title+"")&&oe(n,t)},d(i){i&&k(e)}}}function dr(s){let e,t,n;var i=s[0].content;function o(r){return{}}return i&&(e=new i(o())),{c(){e&&D(e.$$.fragment),t=le()},m(r,a){e&&F(e,r,a),x(r,t,a),n=!0},p(r,a){if(i!==(i=r[0].content)){if(e){Y();const l=e;M(l.$$.fragment,1,0,()=>{B(l,1)}),G()}i?(e=new i(o()),D(e.$$.fragment),b(e.$$.fragment,1),F(e,t.parentNode,t)):e=null}},i(r){n||(e&&b(e.$$.fragment,r),n=!0)},o(r){e&&M(e.$$.fragment,r),n=!1},d(r){r&&k(t),e&&B(e,r)}}}function pr(s){let e,t=s[0].content.message+"",n,i,o,r,a=s[3]&&as(s);return{c(){e=_("p"),n=K(t),i=E(),a&&a.c(),o=le(),v(e,"class","svelte-bnz79m")},m(l,c){x(l,e,c),y(e,n),x(l,i,c),a&&a.m(l,c),x(l,o,c),r=!0},p(l,c){(!r||c&1)&&t!==(t=l[0].content.message+"")&&oe(n,t),l[3]?a?(a.p(l,c),c&8&&b(a,1)):(a=as(l),a.c(),b(a,1),a.m(o.parentNode,o)):a&&(Y(),M(a,1,1,()=>{a=null}),G())},i(l){r||(b(a),r=!0)},o(l){M(a),r=!1},d(l){l&&k(e),l&&k(i),a&&a.d(l),l&&k(o)}}}function mr(s){let e,t=s[0].content+"";return{c(){e=_("p"),v(e,"class","svelte-bnz79m")},m(n,i){x(n,e,i),e.innerHTML=t},p(n,i){i&1&&t!==(t=n[0].content+"")&&(e.innerHTML=t)},i:T,o:T,d(n){n&&k(e)}}}function as(s){let e,t,n,i;return t=new hr({props:{stacktrace:Kn(s[0].content.stack)}}),{c(){e=_("div"),D(t.$$.fragment),v(e,"class","stack-trace svelte-bnz79m")},m(o,r){x(o,e,r),F(t,e,null),i=!0},p(o,r){const a={};r&1&&(a.stacktrace=Kn(o[0].content.stack)),t.$set(a)},i(o){i||(b(t.$$.fragment,o),et(()=>{n||(n=Pe(e,tt,{},!0)),n.run(1)}),i=!0)},o(o){M(t.$$.fragment,o),n||(n=Pe(e,tt,{},!1)),n.run(0),i=!1},d(o){o&&k(e),B(t),o&&n&&n.end()}}}function cs(s){let e,t,n,i;return e=new ve({props:{name:"> StackTrace"}}),e.$on("click",s[7]),{c(){t=_("div"),D(e.$$.fragment),O(t,"display","contents"),O(t,"--margin","5px 10px 5px -10px"),O(t,"--text",n=s[5]?"#1a1a1a":"white"),O(t,"--bg","transparent")},m(o,r){x(o,t,r),F(e,t,null),i=!0},p(o,r){r&32&&n!==(n=o[5]?"#1a1a1a":"white")&&O(t,"--text",n)},i(o){i||(b(e.$$.fragment,o),i=!0)},o(o){M(e.$$.fragment,o),i=!1},d(o){o&&k(t),B(e,o)}}}function us(s){let e,t,n=s[0].values,i=[];for(let r=0;r<n.length;r+=1)i[r]=fs(is(s,n,r));const o=r=>M(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=le()},m(r,a){for(let l=0;l<i.length;l+=1)i[l].m(r,a);x(r,e,a),t=!0},p(r,a){if(a&49){n=r[0].values;let l;for(l=0;l<n.length;l+=1){const c=is(r,n,l);i[l]?(i[l].p(c,a),b(i[l],1)):(i[l]=fs(c),i[l].c(),b(i[l],1),i[l].m(e.parentNode,e))}for(Y(),l=n.length;l<i.length;l+=1)o(l);G()}},i(r){if(!t){for(let a=0;a<n.length;a+=1)b(i[a]);t=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)M(i[a]);t=!1},d(r){fe(i,r),r&&k(e)}}}function vr(s){let e,t,n,i,o;function r(){return s[9](s[13])}return e=new ve({props:{name:s[13]}}),e.$on("click",r),{c(){t=_("div"),D(e.$$.fragment),O(t,"display","contents"),O(t,"--margin","5px 10px 5px 0"),O(t,"--text",n=s[5]?"white":"#1a1a1a"),O(t,"--bg",i=s[5]?"#1a1a1a":"white")},m(a,l){x(a,t,l),F(e,t,null),o=!0},p(a,l){s=a,l&32&&n!==(n=s[5]?"white":"#1a1a1a")&&O(t,"--text",n),l&32&&i!==(i=s[5]?"#1a1a1a":"white")&&O(t,"--bg",i);const c={};l&1&&(c.name=s[13]),e.$set(c)},i(a){o||(b(e.$$.fragment,a),o=!0)},o(a){M(e.$$.fragment,a),o=!1},d(a){a&&k(t),B(e,a)}}}function gr(s){let e,t,n,i;function o(){return s[8](s[13])}return{c(){e=_("plant-button"),Me(e,"name",t=s[13])},m(r,a){x(r,e,a),n||(i=W(e,"click",o),n=!0)},p(r,a){s=r,a&1&&t!==(t=s[13])&&Me(e,"name",t)},i:T,o:T,d(r){r&&k(e),n=!1,i()}}}function fs(s){let e,t,n,i,o;const r=[gr,vr],a=[];function l(c,u){return c[4]?0:1}return t=l(s),n=a[t]=r[t](s),{c(){e=_("div"),n.c(),i=E(),v(e,"class","button-spacer svelte-bnz79m")},m(c,u){x(c,e,u),a[t].m(e,null),y(e,i),o=!0},p(c,u){let f=t;t=l(c),t===f?a[t].p(c,u):(Y(),M(a[f],1,1,()=>{a[f]=null}),G(),n=a[t],n?n.p(c,u):(n=a[t]=r[t](c),n.c()),b(n,1),n.m(e,i))},i(c){o||(b(n),o=!0)},o(c){M(n),o=!1},d(c){c&&k(e),a[t].d()}}}function wr(s){let e,t,n=s[0]&&os(s);return{c(){n&&n.c(),e=le()},m(i,o){n&&n.m(i,o),x(i,e,o),t=!0},p(i,[o]){i[0]?n?(n.p(i,o),o&1&&b(n,1)):(n=os(i),n.c(),b(n,1),n.m(e.parentNode,e)):n&&(Y(),M(n,1,1,()=>{n=null}),G())},i(i){t||(b(n),t=!0)},o(i){M(n),t=!1},d(i){n&&n.d(i),i&&k(e)}}}function yr(s,e,t){let n,i,{toast:o}=e,r=!1,a=!1;function l(){if(o.type===he.ERROR)return"warning";if(o.type===he.SUCCESS)return"checkmark";if(o.type===he.WARNING)return"exclamation"}let c=!1,u;Qe(()=>{setTimeout(()=>{t(2,r=!0)},10)});const f=()=>{t(3,a=!a)},h=g=>o.resolve(g),d=g=>o.resolve(g),p=()=>o.reject();function m(g){me[g?"unshift":"push"](()=>{u=g,t(1,u)})}return s.$$set=g=>{"toast"in g&&t(0,o=g.toast)},s.$$.update=()=>{s.$$.dirty&1&&t(6,n=o&&l()),s.$$.dirty&1&&t(5,i=o&&(o.type==="success"||o.type==="warning")),s.$$.dirty&2&&t(4,c=u&&!u.parentElement)},[o,u,r,a,c,i,n,f,h,d,p,m]}class _r extends X{constructor(e){super();q(this,e,yr,wr,Z,{toast:0})}}function hs(s,e,t){const n=s.slice();return n[4]=e[t],n}function br(s){let e,t;return e=new _r({props:{toast:s[4]}}),{c(){D(e.$$.fragment)},m(n,i){F(e,n,i),t=!0},p(n,i){const o={};i&4&&(o.toast=n[4]),e.$set(o)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function kr(s){let e,t;return{c(){e=_("plant-toast"),Me(e,"toast",t=s[4])},m(n,i){x(n,e,i)},p(n,i){i&4&&t!==(t=n[4])&&Me(e,"toast",t)},i:T,o:T,d(n){n&&k(e)}}}function ds(s,e){let t,n,i,o,r,a;const l=[kr,br],c=[];function u(f,h){return f[0]?0:1}return n=u(e),i=c[n]=l[n](e),{key:s,first:null,c(){t=_("div"),i.c(),o=E(),this.first=t},m(f,h){x(f,t,h),c[n].m(t,null),y(t,o),a=!0},p(f,h){e=f;let d=n;n=u(e),n===d?c[n].p(e,h):(Y(),M(c[d],1,1,()=>{c[d]=null}),G(),i=c[n],i?i.p(e,h):(i=c[n]=l[n](e),i.c()),b(i,1),i.m(t,o))},i(f){a||(b(i),et(()=>{r||(r=Pe(t,tt,{easing:Cn},!0)),r.run(1)}),a=!0)},o(f){M(i),r||(r=Pe(t,tt,{easing:Cn},!1)),r.run(0),a=!1},d(f){f&&k(t),c[n].d(),f&&r&&r.end()}}}function xr(s){let e,t=[],n=new Map,i,o=s[2];const r=a=>a[4].id;for(let a=0;a<o.length;a+=1){let l=hs(s,o,a),c=r(l);n.set(c,t[a]=ds(c,l))}return{c(){e=_("div");for(let a=0;a<t.length;a+=1)t[a].c();v(e,"id","toast-wrapper"),v(e,"class","svelte-1ujlok7")},m(a,l){x(a,e,l);for(let c=0;c<t.length;c+=1)t[c].m(e,null);s[3](e),i=!0},p(a,[l]){l&5&&(o=a[2],Y(),t=Hi(t,l,r,1,a,o,n,e,Wi,ds,null,hs),G())},i(a){if(!i){for(let l=0;l<o.length;l+=1)b(t[l]);i=!0}},o(a){for(let l=0;l<t.length;l+=1)M(t[l]);i=!1},d(a){a&&k(e);for(let l=0;l<t.length;l+=1)t[l].d();s[3](null)}}}function Mr(s,e,t){let n;xe(s,Xo,a=>t(2,n=a));let i=!1,o;Qe(function(){t(0,i=!o.parentElement)});function r(a){me[a?"unshift":"push"](()=>{o=a,t(1,o)})}return[i,o,n,r]}class Sr extends X{constructor(e){super();q(this,e,Mr,xr,Z,{})}}function $r(s){let e,t,n,i,o,r,a,l,c,u,f;return{c(){e=_("div"),t=_("input"),n=E(),i=_("label"),o=se("svg"),r=se("title"),a=K("cross"),l=se("line"),c=se("line"),v(t,"type","checkbox"),v(t,"id",s[1]),v(t,"class","svelte-5ggwpz"),v(r,"class","svelte-5ggwpz"),v(l,"vector-effect","non-scaling-stroke"),v(l,"x1","0"),v(l,"y1","100"),v(l,"x2","100"),v(l,"y2","0"),v(l,"class","svelte-5ggwpz"),v(c,"vector-effect","non-scaling-stroke"),v(c,"x1","0"),v(c,"y1","0"),v(c,"x2","100"),v(c,"y2","100"),v(c,"class","svelte-5ggwpz"),v(o,"xmlns","http://www.w3.org/2000/svg"),v(o,"viewBox","0 0 100 100"),v(o,"class","svelte-5ggwpz"),v(i,"class","checkbox-label svelte-5ggwpz"),v(i,"for",s[1]),v(e,"class","component-wrapper svelte-5ggwpz")},m(h,d){x(h,e,d),y(e,t),t.checked=s[0],y(e,n),y(e,i),y(i,o),y(o,r),y(r,a),y(o,l),y(o,c),u||(f=W(t,"change",s[2]),u=!0)},p(h,[d]){d&2&&v(t,"id",h[1]),d&1&&(t.checked=h[0]),d&2&&v(i,"for",h[1])},i:T,o:T,d(h){h&&k(e),u=!1,f()}}}function Lr(s,e,t){const n=Ne();let{value:i=!1}=e,{id:o=wt()}=e;function r(){i=this.checked,t(0,i)}return s.$$set=a=>{"value"in a&&t(0,i=a.value),"id"in a&&t(1,o=a.id)},s.$$.update=()=>{s.$$.dirty&1&&i!==void 0&&n("change",!!i)},[i,o,r]}class Nt extends X{constructor(e){super();q(this,e,Lr,$r,Z,{value:0,id:1})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),ae()}get id(){return this.$$.ctx[1]}set id(e){this.$$set({id:e}),ae()}}function ps(s,e,t){const n=s.slice();return n[19]=e[t],n[21]=t,n}function ms(s,e,t){const n=s.slice();return n[19]=e[t],n}function vs(s){let e,t,n,i,o;function r(){return s[10](s[19])}return{c(){e=se("circle"),v(e,"cx",t=s[19].x*100),v(e,"cy",n=s[19].y*100),v(e,"r","2"),v(e,"class","svelte-ag1nlf"),A(e,"pinned",s[19].pinned)},m(a,l){x(a,e,l),i||(o=W(e,"mousedown",r),i=!0)},p(a,l){s=a,l&1&&t!==(t=s[19].x*100)&&v(e,"cx",t),l&1&&n!==(n=s[19].y*100)&&v(e,"cy",n),l&1&&A(e,"pinned",s[19].pinned)},d(a){a&&k(e),i=!1,o()}}}function Nr(s){let e,t,n,i,o;return{c(){e=se("line"),v(e,"x1",t=s[3][s[21]-1].x*100),v(e,"y1",n=s[3][s[21]-1].y*100),v(e,"x2",i=s[19].x*100),v(e,"y2",o=s[19].y*100),v(e,"class","svelte-ag1nlf")},m(r,a){x(r,e,a)},p:T,d(r){r&&k(e)}}}function gs(s){let e,t,n,i=s[21]>0&&s[21]%2==0&&Nr(s);return{c(){i&&i.c(),e=se("circle"),v(e,"cx",t=s[19].x*100),v(e,"cy",n=s[19].y*100),v(e,"r","1"),v(e,"class","svelte-ag1nlf"),A(e,"pinned",s[19].pinned)},m(o,r){i&&i.m(o,r),x(o,e,r)},p(o,r){o[21]>0&&o[21]%2==0&&i.p(o,r)},d(o){i&&i.d(o),o&&k(e)}}}function Pr(s){let e,t,n,i,o,r,a=s[0],l=[];for(let f=0;f<a.length;f+=1)l[f]=vs(ms(s,a,f));let c=s[3],u=[];for(let f=0;f<c.length;f+=1)u[f]=gs(ps(s,c,f));return{c(){e=_("div"),t=se("svg"),n=se("path");for(let f=0;f<l.length;f+=1)l[f].c();i=se("g");for(let f=0;f<u.length;f+=1)u[f].c();v(n,"d",s[2]),v(n,"fill","none"),v(n,"stroke","grey"),v(n,"class","svelte-ag1nlf"),v(i,"id","debug"),v(i,"class","svelte-ag1nlf"),v(t,"viewBox","0 0 100 100"),v(t,"width","100"),v(t,"height","100"),v(t,"class","svelte-ag1nlf"),v(e,"class","component-wrapper svelte-ag1nlf")},m(f,h){x(f,e,h),y(e,t),y(t,n);for(let d=0;d<l.length;d+=1)l[d].m(t,null);y(t,i);for(let d=0;d<u.length;d+=1)u[d].m(i,null);o||(r=[W(t,"mousedown",s[5]),W(t,"mousemove",s[4]),W(t,"mouseover",s[7]),W(t,"mouseout",s[8]),W(t,"mouseup",s[6]),W(t,"focus",s[7]),W(t,"blur",s[8])],o=!0)},p(f,[h]){if(h&4&&v(n,"d",f[2]),h&3){a=f[0];let d;for(d=0;d<a.length;d+=1){const p=ms(f,a,d);l[d]?l[d].p(p,h):(l[d]=vs(p),l[d].c(),l[d].m(t,i))}for(;d<l.length;d+=1)l[d].d(1);l.length=a.length}if(h&8){c=f[3];let d;for(d=0;d<c.length;d+=1){const p=ps(f,c,d);u[d]?u[d].p(p,h):(u[d]=gs(p),u[d].c(),u[d].m(i,null))}for(;d<u.length;d+=1)u[d].d(1);u.length=c.length}},i:T,o:T,d(f){f&&k(e),fe(l,f),fe(u,f),o=!1,ze(r)}}}function Cr(s,e,t){let n,i;const o=Ne();let{value:r=[{x:0,y:1,pinned:!0},{x:1,y:0,pinned:!0}]}=e,a=!1,l,c,u=0,f=0,h=[];const d=()=>{requestAnimationFrame(()=>{o("change",n),t(0,n=n.sort(($,V)=>$.x>V.x?-1:1))})},p=$=>{$.pinned||(n.splice(n.indexOf(l),1),d())},m=$=>{a&&(u=$.offsetX,f=$.offsetY,l&&(c=l,t(1,l=void 0)),c&&(c.x=u/100,c.y=f/100,d()))},g=()=>{if(!l){const $={x:u/100,y:f/100,pinned:!1};t(1,l=$),n.push(l),d()}},w=()=>{l&&(p(l),t(1,l=void 0)),c=void 0},N=()=>{a=!0},L=()=>{a=!1};function P($){const V=En.points($.map(z=>[z.x*100,z.y*100]));return En.svgPath(V)}const I=$=>{t(1,l=$)};return s.$$set=$=>{"value"in $&&t(9,r=$.value)},s.$$.update=()=>{s.$$.dirty&512&&t(0,n=r),s.$$.dirty&1&&t(2,i=P(n))},[n,l,i,h,m,g,w,N,L,r,I]}class Er extends X{constructor(e){super();q(this,e,Cr,Pr,Z,{value:9})}get value(){return this.$$.ctx[9]}set value(e){this.$$set({value:e}),ae()}}function ws(s){let e,t;return{c(){e=_("span"),v(e,"class","overlay svelte-1f8wej8"),v(e,"style",t=`width: ${(s[0]-s[1])/(s[2]-s[1])*100}%`)},m(n,i){x(n,e,i)},p(n,i){i&7&&t!==(t=`width: ${(n[0]-n[1])/(n[2]-n[1])*100}%`)&&v(e,"style",t)},d(n){n&&k(e)}}}function jr(s){let e,t,n,i,o,r,a,l,c,u,f=typeof s[1]!="undefined"&&typeof s[2]!="undefined"&&ws(s);return{c(){e=_("div"),f&&f.c(),t=E(),n=_("button"),n.textContent="-",i=E(),o=_("input"),a=E(),l=_("button"),l.textContent="+",v(n,"class","svelte-1f8wej8"),v(o,"step",s[3]),v(o,"max",s[2]),v(o,"min",s[1]),v(o,"type","number"),v(o,"style",r=`width:${s[5]};`),v(o,"class","svelte-1f8wej8"),v(l,"class","svelte-1f8wej8"),v(e,"class","component-wrapper svelte-1f8wej8")},m(h,d){x(h,e,d),f&&f.m(e,null),y(e,t),y(e,n),y(e,i),y(e,o),Ie(o,s[0]),s[11](o),y(e,a),y(e,l),c||(u=[W(n,"click",s[9]),W(o,"input",s[10]),W(o,"mousedown",s[7]),W(o,"mouseup",s[8]),W(l,"click",s[12])],c=!0)},p(h,[d]){typeof h[1]!="undefined"&&typeof h[2]!="undefined"?f?f.p(h,d):(f=ws(h),f.c(),f.m(e,t)):f&&(f.d(1),f=null),d&8&&v(o,"step",h[3]),d&4&&v(o,"max",h[2]),d&2&&v(o,"min",h[1]),d&32&&r!==(r=`width:${h[5]};`)&&v(o,"style",r),d&1&&nt(o.value)!==h[0]&&Ie(o,h[0])},i:T,o:T,d(h){h&&k(e),f&&f.d(),s[11](null),c=!1,ze(u)}}}function Tr(s,e,t){let n,i;const o=Ne();let{min:r=-1/0}=e,{max:a=1/0}=e,{step:l=1}=e,{value:c=0}=e,u;function f($){t(0,c=Math.max(r,Math.min(+c+$,a)))}let h=0,d=0,p;function m($){$.preventDefault(),d=c,h=$.clientX,p=u.getBoundingClientRect(),window.removeEventListener("mousemove",w),window.addEventListener("mousemove",w),window.addEventListener("mouseup",g),document.body.style.cursor="ew-resize"}function g(){d===c?u.focus():u.blur(),document.body.style.cursor="unset",window.removeEventListener("mouseup",g),window.removeEventListener("mousemove",w)}function w($){if(n){const V=($.clientX-p.left)/p.width;t(0,c=Math.max(Math.min(Math.floor(r+(a-r)*V),a),r))}else{const V=$.clientX-h;t(0,c=d+Math.floor(V/10))}}const N=()=>f(-l);function L(){c=nt(this.value),t(0,c)}function P($){me[$?"unshift":"push"](()=>{u=$,t(4,u)})}const I=()=>f(+l);return s.$$set=$=>{"min"in $&&t(1,r=$.min),"max"in $&&t(2,a=$.max),"step"in $&&t(3,l=$.step),"value"in $&&t(0,c=$.value)},s.$$.update=()=>{var $;s.$$.dirty&6&&(n=typeof r!="undefined"&&typeof a!="undefined"&&Number.isFinite(r)&&Number.isFinite(a)),s.$$.dirty&1&&c!==void 0&&o("change",parseFloat(c+"")),s.$$.dirty&1&&t(5,i=Number.isFinite(c)?Math.max((($=c==null?void 0:c.toString().length)!=null?$:1)*8,30)+"px":"20px")},[c,r,a,l,u,i,f,m,g,N,L,P,I]}class Ir extends X{constructor(e){super();q(this,e,Tr,jr,Z,{min:1,max:2,step:3,value:0})}get min(){return this.$$.ctx[1]}set min(e){this.$$set({min:e}),ae()}get max(){return this.$$.ctx[2]}set max(e){this.$$set({max:e}),ae()}get step(){return this.$$.ctx[3]}set step(e){this.$$set({step:e}),ae()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),ae()}}function Or(s){let e,t,n,i,o,r,a,l;return{c(){e=_("div"),t=_("span"),i=E(),o=_("input"),v(t,"class","overlay svelte-19eeb1g"),v(t,"style",n=`width: ${(s[0]-s[2])/(s[3]-s[2])*100}%`),v(o,"step",s[1]),v(o,"max",s[3]),v(o,"min",s[2]),v(o,"type","number"),v(o,"style",r=`width:${s[6]};`),v(o,"class","svelte-19eeb1g"),v(e,"class","component-wrapper svelte-19eeb1g"),A(e,"is-down",s[5])},m(c,u){x(c,e,u),y(e,t),y(e,i),y(e,o),Ie(o,s[0]),s[10](o),a||(l=[W(o,"input",s[9]),W(o,"mousedown",s[7]),W(o,"mouseup",s[8])],a=!0)},p(c,[u]){u&13&&n!==(n=`width: ${(c[0]-c[2])/(c[3]-c[2])*100}%`)&&v(t,"style",n),u&2&&v(o,"step",c[1]),u&8&&v(o,"max",c[3]),u&4&&v(o,"min",c[2]),u&64&&r!==(r=`width:${c[6]};`)&&v(o,"style",r),u&1&&nt(o.value)!==c[0]&&Ie(o,c[0]),u&32&&A(e,"is-down",c[5])},i:T,o:T,d(c){c&&k(e),s[10](null),a=!1,ze(l)}}}function Vr(s){return parseFloat(s).toPrecision(2)}function Ar(s,e,t){let n,{value:i=.5}=e,{step:o=.01}=e,{min:r=0}=e,{max:a=1}=e;const l=Ne();let c,u=!1,f=0,h=0,d=0,p;function m(P){P.preventDefault(),t(5,u=!0),h=i,f=P.clientY,p=c.getBoundingClientRect(),window.removeEventListener("mousemove",w),window.addEventListener("mousemove",w),window.addEventListener("mouseup",g),document.body.style.cursor="ew-resize"}function g(){t(5,u=!1),h===i&&c.focus(),document.body.style.cursor="unset",window.removeEventListener("mouseup",g),window.removeEventListener("mousemove",w)}function w(P){d=(P.clientX-p.left)/p.width,P.clientY-f,t(0,i=Math.max(Math.min(r+(a-r)*d,a),r))}function N(){i=nt(this.value),t(0,i)}function L(P){me[P?"unshift":"push"](()=>{c=P,t(4,c)})}return s.$$set=P=>{"value"in P&&t(0,i=P.value),"step"in P&&t(1,o=P.step),"min"in P&&t(2,r=P.min),"max"in P&&t(3,a=P.max)},s.$$.update=()=>{var P;s.$$.dirty&1&&i.toString().length>15&&t(0,i=Vr(i)),s.$$.dirty&1&&i!==void 0&&l("change",parseFloat(i+"")),s.$$.dirty&1&&t(6,n=Number.isFinite(i)?Math.max(((P=i==null?void 0:i.toString().length)!=null?P:1)*8,50)+"px":"20px")},[i,o,r,a,c,u,n,m,g,N,L]}class zr extends X{constructor(e){super();q(this,e,Ar,Or,Z,{value:0,step:1,min:2,max:3})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),ae()}get step(){return this.$$.ctx[1]}set step(e){this.$$set({step:e}),ae()}get min(){return this.$$.ctx[2]}set min(e){this.$$set({min:e}),ae()}get max(){return this.$$.ctx[3]}set max(e){this.$$set({max:e}),ae()}}function ys(s,e,t){const n=s.slice();return n[11]=e[t],n}function Dr(s){let e,t,n;return{c(){e=_("div"),e.textContent="none",v(e,"id","selected-value"),v(e,"class","svelte-v39twk")},m(i,o){x(i,e,o),t||(n=W(e,"click",s[4]),t=!0)},p:T,d(i){i&&k(e),t=!1,n()}}}function Fr(s){let e,t,n,i;return{c(){e=_("div"),t=K(s[0]),v(e,"id","selected-value"),v(e,"class","svelte-v39twk")},m(o,r){x(o,e,r),y(e,t),n||(i=W(e,"click",s[4]),n=!0)},p(o,r){r&1&&oe(t,o[0])},d(o){o&&k(e),n=!1,i()}}}function _s(s){let e,t=s[11]+"",n,i,o,r,a;function l(){return s[8](s[11])}return{c(){e=_("p"),n=K(t),i=E(),v(e,"style",o=`opacity: ${s[11]===s[0]?.5:1}`),v(e,"class","item svelte-v39twk")},m(c,u){x(c,e,u),y(e,n),y(e,i),r||(a=W(e,"click",l),r=!0)},p(c,u){s=c,u&2&&t!==(t=s[11]+"")&&oe(n,t),u&3&&o!==(o=`opacity: ${s[11]===s[0]?.5:1}`)&&v(e,"style",o)},d(c){c&&k(e),r=!1,a()}}}function bs(s){let e,t=s[11]!==s[0]&&_s(s);return{c(){t&&t.c(),e=le()},m(n,i){t&&t.m(n,i),x(n,e,i)},p(n,i){n[11]!==n[0]?t?t.p(n,i):(t=_s(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){t&&t.d(n),n&&k(e)}}}function Br(s){let e,t,n,i;function o(u,f){return u[0]!==void 0?Fr:Dr}let r=o(s),a=r(s),l=s[1],c=[];for(let u=0;u<l.length;u+=1)c[u]=bs(ys(s,l,u));return{c(){e=_("div"),t=_("div"),a.c(),n=E(),i=_("div");for(let u=0;u<c.length;u+=1)c[u].c();v(i,"id","item-wrapper"),v(i,"class","svelte-v39twk"),v(t,"id","main"),v(t,"class","svelte-v39twk"),v(e,"class","component-wrapper svelte-v39twk"),A(e,"open",s[2])},m(u,f){x(u,e,f),y(e,t),a.m(t,null),y(t,n),y(t,i);for(let h=0;h<c.length;h+=1)c[h].m(i,null);s[9](t)},p(u,[f]){if(r===(r=o(u))&&a?a.p(u,f):(a.d(1),a=r(u),a&&(a.c(),a.m(t,n))),f&35){l=u[1];let h;for(h=0;h<l.length;h+=1){const d=ys(u,l,h);c[h]?c[h].p(d,f):(c[h]=bs(d),c[h].c(),c[h].m(i,null))}for(;h<c.length;h+=1)c[h].d(1);c.length=l.length}f&4&&A(e,"open",u[2])},i:T,o:T,d(u){u&&k(e),a.d(),fe(c,u),s[9](null)}}}function Rr(s,e,t){const n=Ne();let{value:i=void 0}=e,o=!1,r;function a(){t(2,o=!0),setTimeout(()=>{document.addEventListener("click",()=>{t(2,o=!1)},{once:!0})},50)}function l(p){t(0,i=p),t(2,o=!1)}let{values:c=[]}=e;function u(p){t(1,c=p)}function f(p){t(0,i=p)}const h=p=>l(p);function d(p){me[p?"unshift":"push"](()=>{r=p,t(3,r)})}return s.$$set=p=>{"value"in p&&t(0,i=p.value),"values"in p&&t(1,c=p.values)},s.$$.update=()=>{s.$$.dirty&1&&i&&n("change",i)},[i,c,o,r,a,l,u,f,h,d]}class ks extends X{constructor(e){super();q(this,e,Rr,Br,Z,{value:0,values:1,setItems:6,setValue:7})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),ae()}get values(){return this.$$.ctx[1]}set values(e){this.$$set({values:e}),ae()}get setItems(){return this.$$.ctx[6]}get setValue(){return this.$$.ctx[7]}}function xs(s,e,t){const n=s.slice();return n[19]=e[t],n}function Ms(s){let e,t,n,i,o;function r(){return s[9](s[19])}return{c(){e=se("circle"),v(e,"cx",t=s[19].x*100),v(e,"cy",n=s[19].y*200-50),v(e,"r","4"),v(e,"class","svelte-1z0d3lw"),A(e,"pinned",s[19].pinned)},m(a,l){x(a,e,l),i||(o=W(e,"mousedown",r),i=!0)},p(a,l){s=a,l&1&&t!==(t=s[19].x*100)&&v(e,"cx",t),l&1&&n!==(n=s[19].y*200-50)&&v(e,"cy",n),l&1&&A(e,"pinned",s[19].pinned)},d(a){a&&k(e),i=!1,o()}}}function Hr(s){let e,t,n,i,o,r,a,l,c,u,f,h,d=s[0],p=[];for(let m=0;m<d.length;m+=1)p[m]=Ms(xs(s,d,m));return{c(){e=_("div"),t=se("svg"),n=se("path");for(let m=0;m<p.length;m+=1)p[m].c();i=E(),o=se("svg"),r=se("defs"),a=se("linearGradient"),l=se("stop"),c=se("stop"),u=se("path"),v(n,"d",s[2]),v(n,"fill","none"),v(n,"stroke","#65E2A0"),v(n,"class","svelte-1z0d3lw"),v(t,"viewBox","0 0 100 100"),v(t,"width","50"),v(t,"height","100"),v(t,"class","svelte-1z0d3lw"),v(l,"offset","0%"),O(l,"stop-color","#65E2A0"),O(l,"stop-opacity","1"),v(l,"class","svelte-1z0d3lw"),v(c,"offset","100%"),O(c,"stop-color","#469C6E"),O(c,"stop-opacity","1"),v(c,"class","svelte-1z0d3lw"),v(a,"id","grad1"),v(a,"x1","0%"),v(a,"y1","0%"),v(a,"x2","100%"),v(a,"y2","0%"),v(a,"class","svelte-1z0d3lw"),v(r,"class","svelte-1z0d3lw"),v(u,"d",s[2]),v(u,"fill","url(#grad1)"),v(u,"stroke","grey"),v(u,"class","svelte-1z0d3lw"),v(o,"id","right"),v(o,"viewBox","0 0 100 100"),v(o,"width","50"),v(o,"height","100"),v(o,"class","svelte-1z0d3lw"),v(e,"class","component-wrapper svelte-1z0d3lw")},m(m,g){x(m,e,g),y(e,t),y(t,n);for(let w=0;w<p.length;w+=1)p[w].m(t,null);y(e,i),y(e,o),y(o,r),y(r,a),y(a,l),y(a,c),y(o,u),f||(h=[W(t,"mousedown",s[4]),W(t,"mousemove",s[3]),W(t,"mouseover",s[6]),W(t,"mouseout",s[7]),W(t,"mouseup",s[5]),W(t,"focus",s[6]),W(t,"blur",s[7])],f=!0)},p(m,[g]){if(g&4&&v(n,"d",m[2]),g&3){d=m[0];let w;for(w=0;w<d.length;w+=1){const N=xs(m,d,w);p[w]?p[w].p(N,g):(p[w]=Ms(N),p[w].c(),p[w].m(t,null))}for(;w<p.length;w+=1)p[w].d(1);p.length=d.length}g&4&&v(u,"d",m[2])},i:T,o:T,d(m){m&&k(e),fe(p,m),f=!1,ze(h)}}}function Wr(s,e,t){let n,i;const o=Ne();let{value:r=[{x:1,y:0,pinned:!0},{x:.5,y:.5,pinned:!0},{x:1,y:1,pinned:!0}]}=e,a=!1,l,c,u=0,f=0;const h=()=>{requestAnimationFrame(()=>{o("change",n),t(0,n=n.sort(($,V)=>$.y>V.y?-1:1))})},d=$=>{$.pinned||(n.splice(n.indexOf(l),1),h())},p=$=>{a&&(u=$.offsetX,f=$.offsetY,l&&(c=l,t(1,l=void 0)),c&&(c.x=u/50,c.y=f/100,h()))},m=()=>{if(!l){const $={x:u/50,y:f/100,pinned:!1};t(1,l=$),n.push(l),h()}},g=()=>{l&&(d(l),t(1,l=void 0)),c=void 0},w=()=>{a=!0},N=()=>{a=!1},L=$=>`L ${$.x*100} ${$.y*200-50}`;function P($){return $.reduce((V,z,Q)=>Q===0?`M ${z.x*100},${z.y*200-50}`:`${V} ${L(z)}`,"")}const I=$=>{t(1,l=$)};return s.$$set=$=>{"value"in $&&t(8,r=$.value)},s.$$.update=()=>{s.$$.dirty&256&&t(0,n=r),s.$$.dirty&1&&t(2,i=P(n))},[n,l,i,p,m,g,w,N,r,I]}class Yr extends X{constructor(e){super();q(this,e,Wr,Hr,Z,{value:8})}get value(){return this.$$.ctx[8]}set value(e){this.$$set({value:e}),ae()}}function Ss(s){let e,t,n;return{c(){e=_("div"),t=_("p"),n=K(s[1]),v(t,"class","svelte-1aw08v2"),v(e,"class","border svelte-1aw08v2")},m(i,o){x(i,e,o),y(e,t),y(t,n)},p(i,o){o&2&&oe(n,i[1])},d(i){i&&k(e)}}}function Gr(s){let e,t,n,i,o,r,a,l,c,u,f=s[1]&&Ss(s);const h=s[4].default,d=_n(h,s,s[3],null);return{c(){e=_("div"),t=_("div"),n=se("svg"),i=se("path"),o=E(),f&&f.c(),r=E(),a=_("div"),d&&d.c(),v(i,"d","M13.172 12l-4.95-4.95 1.414-1.414L16 12l-6.364 6.364-1.414-1.414z"),v(i,"class","svelte-1aw08v2"),v(n,"xmlns","http://www.w3.org/2000/svg"),v(n,"viewBox","0 0 24 24"),v(n,"width","24"),v(n,"height","24"),v(n,"class","svelte-1aw08v2"),v(t,"class","header svelte-1aw08v2"),v(a,"class","content svelte-1aw08v2"),v(e,"class","wrapper svelte-1aw08v2"),A(e,"open",s[0])},m(p,m){x(p,e,m),y(e,t),y(t,n),y(n,i),y(t,o),f&&f.m(t,null),y(e,r),y(e,a),d&&d.m(a,null),l=!0,c||(u=W(t,"click",s[2]),c=!0)},p(p,[m]){p[1]?f?f.p(p,m):(f=Ss(p),f.c(),f.m(t,null)):f&&(f.d(1),f=null),d&&d.p&&(!l||m&8)&&bn(d,h,p,p[3],l?xn(h,p[3],m,null):kn(p[3]),null),m&1&&A(e,"open",p[0])},i(p){l||(b(d,p),l=!0)},o(p){M(d,p),l=!1},d(p){p&&k(e),f&&f.d(),d&&d.d(p),c=!1,u()}}}function Ur(s,e,t){let{$$slots:n={},$$scope:i}=e;const o=Ne();let{open:r=!1}=e,{name:a=""}=e;const l=()=>{t(0,r=!r),o("toggle",r)};return s.$$set=c=>{"open"in c&&t(0,r=c.open),"name"in c&&t(1,a=c.name),"$$scope"in c&&t(3,i=c.$$scope)},[r,a,l,i,n]}class $s extends X{constructor(e){super();q(this,e,Ur,Gr,Z,{open:0,name:1})}}function Xr({target:s,template:e,value:t}){t===void 0&&"value"in e&&(t=e.value);const n=Pt(e,t),i=te({},e);return delete i.type,delete i.inputType,delete i.defaultValue,delete i.internal,i.value=t,new n({target:s,props:we(te({},i),{"--width":"100%"})})}function Pt(s,e){return s.inputType==="select"||Array.isArray(s.values)?ks:s.inputType==="curve"?Er:s.inputType==="shape"?Yr:s.type==="number"||typeof e=="number"?s.step&&s.step%1!=0?zr:Ir:Nt}function qr(s){const e=2*Math.PI/s;return new Array(s).fill(null).map((n,i)=>[Math.cos(e*i),Math.sin(e*i)])}function Zr(s,e){const t=new Uint16Array(s*(e-1)*6);for(let n=0;n<e;n++){const i=n*s*6,o=n*s;for(let r=0;r<s;r++){const a=i+r*6,l=o+r;t[a+0]=l,t[a+1]=l-s+1,t[a+2]=l+1,t[a+3]=l+1,t[a+4]=l+s,t[a+5]=l,r===s-1?(t[a+0]=l,t[a+1]=l-s+1,t[a+2]=l+1,t[a+3]=l+1,t[a+4]=l+s,t[a+5]=l):(t[a+0]=l,t[a+1]=l+1,t[a+2]=l+s+1,t[a+3]=l+s+1,t[a+4]=l+s,t[a+5]=l)}}return t}function Jr(s,e){const t=[],n=[],i=[],o={position:[],index:Zr(e,s.length)},r=qr(e),a=r.length,l=s.length;for(let c=0;c<l;c++){const u=[0,0,1];c===0?yt(n,s[c],s[c+1]):c===l-1?yt(n,s[c-1],s[c]):yt(n,s[c-1],s[c+1]),Yi(n,n),Gi(i,u,n);const f=Math.acos(Ui(u,n));Xi(t),qi(t,t,f,i);for(let h=0;h<a;h++){const d=r[h],p=[d[0],d[1],0],m=s[c][3];Zi(p,p,[m,m,1]),Ji(p,p,t),Ki(p,p,s[c]),o.position.push(p)}}return o}function Re(s,e,t){return s*(1-t)+e*t}function Kr(s,e=0){const t=(s.length-1)*e,n=Math.floor(t),i=Math.ceil(t);return Re(s[i],s[n],i-t)}function Ls(s,e){const t=(s.length/4-1)*e,n=Math.floor(t),i=Math.ceil(t),o=i-t;return[Re(s[i*4+0],s[n*4+0],o),Re(s[i*4+1],s[n*4+1],o),Re(s[i*4+2],s[n*4+2],o),Re(s[i*4+3],s[n*4+3],o)]}function Ns(s,e){const t=(s.length/4-1)*e,n=Math.floor(t),i=Math.ceil(t);return[s[i*4+0]-s[n*4+0],s[i*4+1]-s[n*4+1],s[i*4+2]-s[n*4+2],s[i*4+3]+s[n*4+3]/2]}function Ct(...s){if(s.length===1)return s[0];const e=new Float32Array(s.reduce((u,f)=>u+f.position.length,0)),t=new Float32Array(s.reduce((u,f)=>u+f.normal.length,0)),n=new Float32Array(s.reduce((u,f)=>u+f.uv.length,0)),i=s.reduce((u,f)=>u+f.index.length,0),o=i>65536?new Uint32Array(i):new Uint16Array(i);let r=0,a=0,l=0,c=0;for(let u=0;u<s.length;u++){const f=s[u].normal,h=f.length;for(let L=0;L<h;L++)t[a+L]=f[L];a+=h;const d=s[u].uv,p=d.length;for(let L=0;L<p;L++)n[l+L]=d[L];l+=p;const m=s[u].index,g=m.length;for(let L=0;L<g;L++)o[L+c]=m[L]+r/3;c+=g;const w=s[u].position,N=w.length;for(let L=0;L<N;L++)e[r+L]=w[L];r+=N}return{position:e,normal:t,uv:n,index:o}}var Qr=(s,e)=>Math.sqrt(s*s+e*e),el=(s,e,t)=>Math.sqrt(s*s+e*e+t*t);let Oe=0,Et=st.makeNoise2D(Oe),Ps=st.makeNoise3D(Oe);var jt={n1d:s=>Et(s,0),n2d:(s,e)=>Et(s,e),n3d:(s,e,t)=>Ps(s,e,t),get seed(){return Oe},set seed(s){Oe=s,Et=st.makeNoise2D(Oe),Ps=st.makeNoise3D(Oe)}},Cs=([s,e])=>{const t=Qr(s,e);return t===0?[1,0]:[s/t,e/t]},tl=(s,e,t)=>{const n=el(s,e,t);return[s/n,e/n,t/n]},Es=(s,e,t)=>[s*Math.cos(t)-e*Math.sin(t),s*Math.sin(t)+e*Math.cos(t)];function Tt(s,e,t){const[n,i,o]=s,[r,a,l]=tl(e[0],e[1],e[2]),c=Math.cos(t),u=Math.sin(t);return new je((c+(1-c)*r*r)*n+((1-c)*r*a-l*u)*i+((1-c)*r*l+a*u)*o,((1-c)*r*a+l*u)*n+(c+(1-c)*a*a)*i+((1-c)*a*l-r*u)*o,((1-c)*r*l-a*u)*n+((1-c)*a*l+r*u)*i+(c+(1-c)*l*l)*o)}function js(s,e){return new De(s,{position:{size:3,data:e.position},normal:{size:3,data:e.normal},uv:{size:2,data:e.uv},index:{data:e.index}})}const nl=100,It=2,Ts=1;function sl(s=1,e=12,t=12){const n=360*(Math.PI/180)/t,i=e*t+1,o=(e-1)*t*2+t,r=new Float32Array(i*3),a=new Float32Array(i*3),l=new Float32Array(i*2),c=new Uint16Array(o*3);r[0]=0,r[1]=1-Ts,r[2]=0,a[0]=0,a[1]=1,a[2]=0,l[0]=.5,l[1]=.5;const u=new Array(e-1).fill(null).map((h,d,p)=>s+d/(p.length-1)*It);u.push(nl);const f=u.map(h=>{const d=(Math.max(Math.min(h,s+It),s)-s)/It;return Math.sin((d+.5)*Math.PI)/2+.5-Ts});for(let h=0;h<e;h++){const d=u[h],p=f[h];for(let m=0;m<t;m++){const g=n*m,w=Math.cos(g)*d,N=p,L=Math.sin(g)*d,I=h*t+m+1;if(r[I*3+0]=w,r[I*3+1]=N,r[I*3+2]=L,a[I*3+0]=0,a[I*3+1]=1,a[I*3+2]=0,l[I*2+0]=w,l[I*2+1]=L,h===0){const $=(I-1)*3;c[$+0]=0,c[$+1]=(m+1)%t+1,c[$+2]=m+1}else if(m===t-1){const $=h*t*6+m*6-t*3;c[$+0]=I,c[$+1]=I+1-t-t,c[$+2]=I+1-t,c[$+3]=I,c[$+4]=I-t,c[$+5]=I+1-t*2}else{const $=h*t*6+m*6-t*3;c[$+0]=I,c[$+1]=I+1-t,c[$+2]=I+1,c[$+3]=I,c[$+4]=I-t,c[$+5]=I+1-t}}}return{position:r,normal:a,uv:l,index:c}}function il(s,{res:e=1,xCurvature:t=.5,yCurvature:n=.2}={}){const i=s.length,o=3+e*2,r=o*i,a=(o-1)*(i-1)*2,l=new Float32Array(r*3),c=new Float32Array(r*2),u=new Float32Array(r*2),f=new Uint16Array(a*3);return s.forEach((h,d)=>{const p=d*o;for(let m=0;m<o;m++){const g=2-m/(o-1)*2-1;l[p*3+m*3+0]=(h.x-1)*g*.5;const w=-(1-h.y)*(1-h.y)*.5,N=Math.sin(Math.abs(g)*Math.PI)*.01;if(l[p*3+m*3+1]=N*t+w*n,l[p*3+m*3+2]=h.y-1,u[p*2+m*2+0]=l[p*3+m*3+0]+1/2,u[p*2+m*2+1]=l[p*3+m*3+2],d<s.length-1){const L=d*(o-1);f[L*6+m*6+0]=p+m+0,f[L*6+m*6+1]=p+m+1,f[L*6+m*6+2]=p+m+o,f[L*6+m*6+3]=p+m+1,f[L*6+m*6+4]=p+m+o,f[L*6+m*6+5]=p+m+o+1}}}),{position:l,normal:c,index:f,uv:u}}function Is(s,e=8){const t=sr(s,4),n=Jr(t,e);return{position:Float32Array.from(n.position.map(o=>o.splice(0,3)).flat()),index:n.index,normal:new Float32Array,uv:new Float32Array}}const ol={title:"Branches",type:"branch",outputs:["plant"],parameters:{input:{type:"plant",label:"plant",external:!0},length:{type:["number","parameter","curve"],min:0,max:3,step:.05,value:0},thiccness:{type:"number",min:0,max:1,step:.01,value:.8},offsetSingle:{type:"number",min:0,max:1,step:.01,value:.5},lowestBranch:{type:"number",min:0,max:1,step:.01,value:.2},amount:{type:"number",min:0,max:64,value:10}},computeSkeleton(s,e){const{skeletons:t}=s.input.result,n=e.getSetting("stemResY"),i=t.map(o=>{const r=[],a=e.handleParameter(s.amount),l=e.handleParameter(s.lowestBranch);for(let c=0;c<a;c++){const u=c/a,f=e.handleParameter(s.length,u)*(1-u),h=e.handleParameter(s.thiccness,u),d=e.handleParameter(s.offsetSingle,u),p=c%2==0;let m=l+(1-l)*u;m-=1/a*d*(p?-1:1);const[g,,w]=Ns(o,m),N=Cs([g,w]),[L,P]=Es(N[0],N[1],p?-Math.PI/2:Math.PI/2),[I,$,V,z]=Ls(o,m),Q=Math.max(Math.floor(n*f*10),4),J=new Float32Array(Q*4);for(let ie=0;ie<Q*4;ie++){const U=ie/Q;J[ie*4+0]=I+L*U*f,J[ie*4+1]=$,J[ie*4+2]=V+P*U*f,J[ie*4+3]=z*h*(1-U)}r.push(J)}return r}).flat();return{skeletons:i,allSkeletons:[...i,...t]}},computeGeometry(s,e,t){const n=t.getSetting("stemResX"),{geometry:i}=s.input.result,{skeletons:o}=e;return{geometry:Ct(i,...o.map(r=>Is(r,n)))}}},rl={title:"Curve",type:"curve",outputs:["number"],parameters:{value:{type:"curve",inputType:"curve",internal:!0,label:!1,value:[{x:0,y:1,pinned:!0},{x:1,y:0,pinned:!0}]}},computeValue(s,e,t){const n=Qo(s.value).map(i=>i.y);return Kr(n,1-t)}},ll={title:"Gravity",type:"gravity",outputs:["plant"],parameters:{input:{type:"plant",external:!0},type:{internal:!0,type:"select",values:["simple","verlet","test"]},strength:{type:"number",inputType:"slider",min:0,max:2,step:.05}},computeSkeleton(s,e){const{input:t,type:n,strength:i}=s,{skeletons:o}=t.result;return n==="simple"&&o.forEach(r=>{const a=r.length/4;for(let l=1;l<a;l++){const c=l/a,u=r[l*4+1],f=e.handleParameter(i,c);r[l*4+1]=u-u*c*c*c*f}return r}),n==="test"&&o.forEach(r=>{const a=r.length/4;for(let l=1;l<a;l++){const c=l/a,u=e.handleParameter(i,c),f=r[l*4+0],h=r[l*4+1],d=r[l*4+2],p=r[(l-1)*4+0],m=r[(l-1)*4+1],g=r[(l-1)*4+2],w=p-f,N=m-h,L=m-d,[P,I]=Es(w,L,90);for(let $=l;$<a;$++){const V=r[$*4+0],z=r[$*4+1],Q=r[$*4+2],J=V-p,ie=z-m,U=Q-g;let[ee,R,ne]=Tt([J,ie,U],[P,N,I],u*c);const Ee=ee+p,ht=R+m,dt=ne+g;r[$*4+0]=Ee,r[$*4+1]=ht,r[$*4+2]=dt}}return r}),n==="verlet"&&o.forEach(r=>{const a=r.length/4;for(let l=1;l<a;l++){const c=r[l*4+0],u=r[l*4+1],f=r[l*4+2],h=new je(5,0,0).cross(new je(c,u,f),new je(0,1,0)),d=l/a,p=e.handleParameter(i,d);for(let m=l;m<a;m++){const g=Tt([c,u,f],h,d*p);r[m*4+0]=g[0],r[m*4+1]=g[1],r[m*4+2]=g[2]}}return r}),{skeletons:o}},computeGeometry(s){return s.input.result}},Ot=ce("nodes.join"),al={title:"Join",type:"join",outputs:["plant"],parameters:{inputA:{type:"plant",label:"plant",external:!0},inputB:{type:"plant",label:"plant",external:!0}},computeSkeleton(s,e){Ot("compute skeleton",s,e);const{inputA:t,inputB:n}=s;if(!t||!n)return t?t.result:n.result;const{skeletons:i,allSkeletons:o}=t.result,{skeletons:r,allSkeletons:a}=n.result;Ot(i,r);const l=[...i,...r],c=[];return o&&c.push(...o),a&&c.push(...a),{allSkeletons:c,skeletons:l}},computeGeometry(s){const{inputA:e,inputB:t}=s;if(!e||!t)return e?e.result:t.result;const{geometry:n,instances:i}=e.result,{geometry:o,instances:r}=t.result,a=Ct(n,o),l=[];return i&&l.push(...i),r&&l.push(...r),Ot("compute geometry",{geometryA:n,geometryB:o,result:a}),{geometry:a,instances:l}}},cl=[{x:1,y:1,pinned:!0},{x:.62,y:.84,pinned:!1},{x:.54,y:.63,pinned:!1},{x:.38,y:.41,pinned:!0},{x:.44,y:.23,pinned:!1},{x:.64,y:.12,pinned:!1},{x:.98,y:.02,pinned:!0}],ul={title:"Leaf",type:"leaf",outputs:["plant","leaf"],parameters:{input:{type:"plant",external:!0},size:{type:["number","parameter","curve","vec2"],inputType:"slider",min:0,max:3,step:.05,value:0},shape:{type:"leaf",external:!0,defaultValue:cl},lowestLeaf:{type:"number",inputType:"slider",min:0,max:1,step:.01,value:.5},curvature:{external:!0,type:"vec2",defaultValue:{x:0,y:0}},amount:{type:"number",min:0,max:20,value:10}},computeSkeleton(s,e){const{input:t}=s,{skeletons:n}=t.result,i=n.map((o,r)=>{const a=r/n.length,l=e.handleParameter(s.amount,a),c=new Float32Array(l*3),u=new Float32Array(l*3),f=new Float32Array(l*3);for(let h=0;h<l;h++){const d=h/(l-1),p=e.handleParameter(s.size,1-d),m=e.handleParameter(s.lowestLeaf,d),g=m+(1-m)*d-.001,[w,N,L]=Ls(o,g),[P,,I]=Ns(o,g),$=Cs([P,I]),V=Math.atan2(-$[0],$[1]);c[h*3+0]=w,c[h*3+1]=N,c[h*3+2]=L,u[h*3+0]=p,u[h*3+1]=1,u[h*3+2]=p,f[h*3+0]=0,f[h*3+1]=V-Math.PI/2*(h%2==0?-1:1),f[h*3+2]=0}return{offset:c,scale:u,rotation:f}});return{allSkeletons:t.result.allSkeletons,skeletons:n,instances:i}},computeGeometry(s,e,t){const{shape:n,input:i,curvature:o}=s,{instances:r}=e,a=t.handleParameter(o),l=il(t.handleParameter(n),{res:t.getSetting("leafRes",2),xCurvature:a.x,yCurvature:a.y});return{geometry:i.result.geometry,instances:r.map(c=>te(te({},c),l))}}},fl={title:"Math",type:"math",outputs:["number"],parameters:{mode:{type:"whatever",internal:!0,inputType:"selection",label:!1,defaultValue:"add",values:["add","multiply","subtract"]},a:{type:"number",defaultValue:0,label:!1},b:{type:"number",defaultValue:0,label:!1}},computeValue(s,e,t){const{mode:n}=s,i=e.handleParameter(s.a,t),o=e.handleParameter(s.b,t);switch(n){case"multiply":return i*o;case"subtract":return i-o;default:return i+o}}},hl=ce("nodes.noise"),dl={title:"Noise",type:"noise",outputs:["plant"],parameters:{input:{type:"plant",label:"plant",external:!0},size:{type:"number",inputType:"slider",min:0,max:20,step:.05,value:1},strength:{type:"number",inputType:"slider",min:0,max:2,step:.01,value:.5}},computeSkeleton(s,e){hl(s);const{input:t}=s,n=e.handleParameter(s.size),i=e.handleParameter(s.strength),{skeletons:o}=t.result;return o.forEach((r,a)=>{const l=r.length/4,c=[r[0],r[1],r[2]];let u=0;for(let f=0;f<l;f++){const h=f/l;u+=(Math.abs(c[0]-r[f*4+0])+Math.abs(c[1]-r[f*4+1])+Math.abs(c[2]-r[f*4+2]))/3,c[0]=r[f*4+0],c[1]=r[f*4+1],c[2]=r[f*4+2],r[f*4+0]=r[f*4+0]+jt.n1d(u*n+0+a*500)*i*h,r[f*4+1]=r[f*4+1]+jt.n1d(u*n+1e3+a*500)*i*h,r[f*4+2]=r[f*4+2]+jt.n1d(u*n+2e3+a*500)*i*h}}),{skeletons:o,allSkeletons:t.result.allSkeletons}},computeGeometry(s){return s.input.result}},pl={title:"Output",type:"output",outputs:[],parameters:{main:{type:"plant",label:"plant",external:!0}},computeNode(s={}){return s.main}},ml={title:"Parameter",type:"parameter",outputs:["number"],parameters:{value:{type:"number",value:0},variation:{type:"number",inputType:"slider",value:0,min:0,max:1,step:.05}},computeValue(s,e){const{value:t=0,variation:n=0}=s;return n?t+e.n1d(200)*n*Math.max(t,1):t}},vl=s=>s==="X"?[1,0,0]:s==="Z"?[0,0,1]:[0,1,0],gl={title:"Rotate",type:"rotate",outputs:["plant"],parameters:{input:{type:"plant",external:!0},type:{internal:!0,label:!1,type:"select",values:["Y","X","Z"]},spread:{internal:!0,type:"boolean",value:!0},angle:{type:"number",inputType:"slider",min:0,max:Math.PI*2,step:.05,value:0}},computeSkeleton(s,e){const{input:t,type:n,spread:i}=s,{result:{skeletons:o,allSkeletons:r}}=t,a=vl(n);return o.forEach((l,c)=>{const u=l.length/4,f=l[0],h=l[1],d=l[2],p=c/o.length,m=e.handleParameter(s.angle,p)*(i?p:1);for(let g=1;g<u;g++){let w=l[g*4+0],N=l[g*4+1],L=l[g*4+2];w-=f,N-=h,L-=d,[w,N,L]=Tt([w,N,L],a,m),w+=f,N+=h,L+=d,l[g*4+0]=w,l[g*4+1]=N,l[g*4+2]=L}}),{skeletons:o,allSkeletons:r}},computeGeometry(s){return s.input.result}},wl={title:"Shape",type:"shape",outputs:["leaf"],parameters:{value:{type:"leaf",inputType:"shape",internal:!0,label:!1,value:[{x:1,y:0,pinned:!0},{x:.5,y:.5,pinned:!0},{x:1,y:1,pinned:!0}]}},computeValue(s){return s.value}},yl={title:"Slider",type:"slider",outputs:["number"],parameters:{value:{type:"number",label:!1,inputType:"slider",internal:!0,min:0,max:1,step:.01,value:0}},computeValue(s){return s.value}},Os=ce("nodes.stem"),_l={title:"Stem",type:"stem",outputs:["plant"],parameters:{origin:{type:"vec3",external:!0,defaultValue:{x:0,y:0,z:0}},height:{type:"number",inputType:"slider",min:0,max:5,step:.05,value:2},thiccness:{type:"number",inputType:"slider",min:0,max:.2,step:.01,value:.06},amount:{type:"number",min:0,max:20,value:1}},computeSkeleton(s,e){Os("computeSkeleton",s);const t=e.handleParameter(s.amount),n=e.getSetting("stemResY"),i=[];for(let o=0;o<t;o++){const{x:r,y:a,z:l}=e.handleParameter(s.origin),c=e.handleParameter(s.height),u=new Float32Array(n*4);for(let f=0;f<n;f++){const h=f/n,d=e.handleParameter(s.thiccness,h)*(1-h),p=r,m=a+h*c,g=l;u[f*4+0]=p,u[f*4+1]=m,u[f*4+2]=g,u[f*4+3]=d}i.push(u)}return{skeletons:i,allSkeletons:i}},computeGeometry(s,e,t){Os("computeNode",s,e);const n=t.getSetting("stemResX");return{geometry:Ct(...e.skeletons.map(i=>Is(i,n)))}}},bl={title:"Vec2",type:"vec2",outputs:["vec2"],parameters:{x:{label:!1,type:"number",value:0,defaultValue:0},y:{label:!1,type:"number",value:0,defaultValue:0}}},kl={title:"Vec3",type:"vec3",outputs:["vec3"],parameters:{x:{label:!1,type:"number",value:0,defaultValue:0},y:{label:!1,type:"number",value:0,defaultValue:0},z:{label:!1,type:"number",value:0,defaultValue:0}}};var xl=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Branch:ol,Curve:rl,Gravity:ll,Join:al,Leaf:ul,Math:fl,Noise:dl,Output:pl,Parameter:ml,Rotate:gl,Shape:wl,Slider:yl,Stem:_l,Vec2:bl,Vec3:kl});const Vt=Object.values(xl).map(s=>("computeNode"in s?s.compute=s.computeNode:s.compute=e=>({type:s.type,parameters:e}),s));const Ml=(s,e)=>t=>Math.min(Math.max(t,s),e),Sl=s=>{const e=10**s;return t=>Math.floor(t*e)/e},$l=Ml(-1e5,1e5),Ll=Sl(1),at=s=>$l(Ll(s));class Vs{constructor({x1:e=0,y1:t=0,x2:n=0,y2:i=0},o){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x1=e,this.y1=t,this.x2=n,this.y2=i,this.system=o.node.system,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("viewbox","0 0 100 100"),this.svg.setAttribute("width","100"),this.svg.setAttribute("height","100"),this.svg.style.overflow="visible",this.svg.style.position="absolute",this.svg.style.top="3.5px",this.svg.style.pointerEvents="none",this.svg.style.zIndex="-1",o.view.wrapper.append(this.svg),this.path=document.createElementNS("http://www.w3.org/2000/svg","path"),this.path.classList.add("node-connection-path"),this.path.setAttribute("vector-effect","non-scaling-stroke"),this.path.setAttribute("d",`
      M 0 0
      C 50 0 
        50 100
				100  100
      `),this.svg.appendChild(this.path),this.setPosition()}setPosition({x1:e=this.x1,y1:t=this.y1,x2:n=this.x2,y2:i=this.y2}={}){var a;this.x1=at(e),this.y1=at(t),this.x2=at(n),this.y2=at(i);const o=this.x2-this.x1+3.5,r=this.y2-this.y1;(a=this==null?void 0:this.hoverPath)==null||a.setAttribute("d",`
      M 0 0
      C ${o/2} 0 
        ${o/2} ${r}
				${o}  ${r}
      `),this.path.setAttribute("d",`
      M 0 0
      C ${o/2} 0 
        ${o/2} ${r}
				${o}  ${r}
      `)}remove(){var e;this.path.remove(),(e=this==null?void 0:this.hoverPath)==null||e.remove(),this.system.save()}}class Nl extends Vs{constructor(e){super({},e.output);this.connection=e,this.input=e.input.view,this.output=e.output.view,this.hoverPath=document.createElementNS("http://www.w3.org/2000/svg","path"),this.hoverPath.classList.add("node-connection-hover"),this.hoverPath.setAttribute("vector-effect","non-scaling-stroke"),this.svg.append(this.hoverPath),this.hoverPath.addEventListener("mouseover",()=>{const{activeNode:t}=this.system.view;t&&t.view.active&&t.view.hoveredConnection!==this&&this.handleNodeOver(t)}),this.hoverPath.addEventListener("mouseout",()=>{const{activeNode:t}=this.system.view;this.handleNodeOut(t)}),e.input.node.system.view.colorStore.on(e.input.type[0],t=>{this.path.style.stroke=t})}handleNodeOver(e){this.connection.isNodeJoinable(e)&&(e.view.hoveredConnection=this,this.path.classList.add("hover-active"))}handleNodeOut(e){e&&e.view.hoveredConnection===this&&delete e.view.hoveredConnection,this.path.classList.remove("hover-active")}remove(){super.remove()}}function Pl(s){if(!Cl(s))throw new Error("panzoom requires DOM element to be attached to the DOM tree");const t=s.parentElement;return s.scrollTop=0,{getBBox:o,getOwner:i,applyTransform:r};function i(){return t}function o(){return{left:0,top:0,width:s.clientWidth,height:s.clientHeight}}function r(a){s.style.transformOrigin="0 0 0",s.style.transform="matrix("+a.scale+", 0, 0, "+a.scale+", "+a.x+", "+a.y+")"}}function Cl(s){return s&&s.parentElement&&s.style}function El(s,e,t){typeof t!="object"&&(t={});const n=typeof t.minVelocity=="number"?t.minVelocity:5,i=typeof t.amplitude=="number"?t.amplitude:.25,o=typeof t.cancelAnimationFrame=="function"?t.cancelAnimationFrame:jl(),r=typeof t.requestAnimationFrame=="function"?t.requestAnimationFrame:Tl();let a,l;const c=342;let u,f,h,d,p,m,g,w;return{start:L,stop:I,cancel:N};function N(){o(u),o(w)}function L(){a=s(),d=g=f=p=0,l=new Date,o(u),o(w),u=r(P)}function P(){const V=Date.now(),z=V-l;l=V;const Q=s(),J=Q.x-a.x,ie=Q.y-a.y;a=Q;const U=1e3/(1+z);f=.8*J*U+.2*f,p=.8*ie*U+.2*p,u=r(P)}function I(){o(u),o(w);const V=s();h=V.x,m=V.y,l=Date.now(),(f<-n||f>n)&&(d=i*f,h+=d),(p<-n||p>n)&&(g=i*p,m+=g),w=r($)}function $(){const V=Date.now()-l;let z=!1,Q=0,J=0;d&&(Q=-d*Math.exp(-V/c),Q>.5||Q<-.5?z=!0:Q=d=0),g&&(J=-g*Math.exp(-V/c),J>.5||J<-.5?z=!0:J=g=0),z&&(e(h+Q,m+J),w=r($))}}function jl(){return typeof cancelAnimationFrame=="function"?cancelAnimationFrame:clearTimeout}function Tl(){return typeof requestAnimationFrame=="function"?requestAnimationFrame:function(s){return setTimeout(s,16)}}const Il=.2;function Ol(s,e){const t=Pl(s),n=t.getOwner(),i={x:0,y:0};let o=!1;const r={x:0,y:0,scale:1},a=typeof e.pinchSpeed=="number"?e.pinchSpeed:1,l=e.bounds,c=typeof e.maxZoom=="number"?e.maxZoom:Number.POSITIVE_INFINITY,u=typeof e.minZoom=="number"?e.minZoom:0,f=typeof e.boundsPadding=="number"?e.boundsPadding:.05,h=typeof e.zoomSpeed=="number"?e.zoomSpeed:Il;let d=As(e.transformOrigin);Vl(l);let p,m=!1,g=!1,w,N,L;const P=El(bi,Li,e.smoothScroll);let I,$=!1;nn();const V={dispose:Ni,moveBy:Qt,moveTo:pt,smoothMoveTo:$i,centerOn:Si,zoomTo:qe,zoomAbs:tn,pause:ie,resume:U,isPaused:ee,getTransform:Ee,setTransform:ne,getTransformOrigin:ht,setTransformOrigin:dt},z=typeof e.initialX=="number"?e.initialX:r.x,Q=typeof e.initialY=="number"?e.initialY:r.y,J=typeof e.initialZoom=="number"?e.initialZoom:r.scale;return(z!=r.x||Q!=r.y||J!=r.scale)&&tn(z,Q,J),V;function ie(){sn(),$=!0}function U(){$&&(nn(),$=!1)}function ee(){return $}function R(S,C){return i.x=S,i.y=C,i}function ne(S,C,j){r.x=S,r.y=C,r.scale=j,Ge()}function Ee(){return r}function ht(){return d}function dt(S){d=As(S)}function bi(){return{x:r.x,y:r.y}}function pt(S,C){r.x=S,r.y=C,mt(),Ge()}function Qt(S,C){pt(r.x+S,r.y+C)}function mt(){const S=ki();if(!S)return;let C=!1;const j=xi();let H=S.left-j.right;return H>0&&(r.x+=H,C=!0),H=S.right-j.left,H<0&&(r.x+=H,C=!0),H=S.top-j.bottom,H>0&&(r.y+=H,C=!0),H=S.bottom-j.top,H<0&&(r.y+=H,C=!0),C}function ki(){if(!!l){if(typeof l=="boolean"){const S=n.getBoundingClientRect(),C=S.width,j=S.height;return{left:C*f,top:j*f,right:C*(1-f),bottom:j*(1-f)}}return l}}function xi(){const S=t.getBBox(),C=Mi(S.left,S.top);return{left:C.x,top:C.y,right:S.width*r.scale+C.x,bottom:S.height*r.scale+C.y}}function Mi(S,C){return{x:S*r.scale+r.x,y:C*r.scale+r.y}}function Ge(){o=!0,p=window.requestAnimationFrame(Pi)}function en(S,C,j){if(At(S)||At(C)||At(j))throw new Error("zoom requires valid numbers");const H=r.scale*j;if(H<u){if(r.scale===u)return;j=u/r.scale}if(H>c){if(r.scale===c)return;j=c/r.scale}const ue=R(S,C);r.x=ue.x-j*(ue.x-r.x),r.y=ue.y-j*(ue.y-r.y),l&&f===1&&u===1?(r.scale*=j,mt()):mt()||(r.scale*=j),Ge()}function tn(S,C,j){const H=j/r.scale;en(S,C,H)}function Si(S){const C=S.ownerSVGElement;if(!C)throw new Error("ui element is required to be within the scene");const j=S.getBoundingClientRect(),H=j.left+j.width/2,ue=j.top+j.height/2,ke=C.getBoundingClientRect(),Ze=ke.width/2-H,Je=ke.height/2-ue;Ue(Ze,Je)}function $i(S,C){Ue(S-r.x,C-r.y)}function Ue(S,C){return Qt(S,C)}function Li(S,C){pt(S,C)}function Ni(){sn()}function nn(){n.addEventListener("mousedown",fn,{passive:!0}),n.addEventListener("dblclick",un,{passive:!1}),n.addEventListener("touchstart",rn,{passive:!0}),n.addEventListener("keydown",on),n.addEventListener("wheel",mn,{passive:!0}),Ge()}function sn(){n.removeEventListener("wheel",mn),n.removeEventListener("mousedown",fn),n.removeEventListener("keydown",on),n.removeEventListener("dblclick",un),n.removeEventListener("touchstart",rn),p&&(window.cancelAnimationFrame(p),p=0),P.cancel(),pn(),Oi(),wn()}function Pi(){o&&Ci()}function Ci(){o=!1,t.applyTransform(r),p=0,e.onTransform&&e.onTransform(r)}function on(S){let C=0;if(S.keyCode===38||S.keyCode===40||S.keyCode===37||S.keyCode===39||(S.keyCode===189||S.keyCode===109?C=1:(S.keyCode===187||S.keyCode===107)&&(C=-1)),C){const j=vn(C*100),H=d?vt():Ei();qe(H.x,H.y,j)}}function Ei(){const S=n.getBoundingClientRect();return{x:S.width/2,y:S.height/2}}function rn(S){if(ji(S),S.touches.length===1)return Ii(S);S.touches.length===2&&(L=cn(S.touches[0],S.touches[1]),I=!0,ln())}function ji(S){S.stopPropagation(),S.preventDefault()}function Ti(S){S.preventDefault(),S.stopPropagation()}function Ii(S){const C=S.touches[0],j=$e(C),H=R(j.x,j.y);w=H.x,N=H.y,P.cancel(),ln()}function ln(){m||(m=!0,document.addEventListener("touchmove",an),document.addEventListener("touchend",Xe),document.addEventListener("touchcancel",Xe))}function an(S){if(S.touches.length===1){S.stopPropagation();const C=S.touches[0],j=$e(C),H=R(j.x,j.y),ue=H.x-w,ke=H.y-N;ue!==0&&ke!==0&&gn(),w=H.x,N=H.y,Ue(ue,ke)}else if(S.touches.length===2){I=!0;const C=S.touches[0],j=S.touches[1],H=cn(C,j),ue=1+(H/L-1)*a,ke=$e(C),Ze=$e(j);if(w=(ke.x+Ze.x)/2,N=(ke.y+Ze.y)/2,d){const Je=vt();w=Je.x,N=Je.y}qe(w,N,ue),L=H,S.stopPropagation(),S.preventDefault()}}function Xe(S){if(S.touches.length>0){const C=$e(S.touches[0]),j=R(C.x,C.y);w=j.x,N=j.y}}function cn(S,C){const j=S.clientX-C.clientX,H=S.clientY-C.clientY;return Math.sqrt(j*j+H*H)}function un(S){Ti(S)}function fn(S){if(m)return S.stopPropagation(),!1;if(S.target!==n&&S.target!==s||!(S.button===1&&window.event!==null||S.button===0))return;P.cancel();const j=$e(S),H=R(j.x,j.y);return w=H.x,N=H.y,document.addEventListener("mousemove",hn),document.addEventListener("mouseup",dn),!1}function hn(S){if(m||S.ctrlKey)return;gn();const C=$e(S),j=R(C.x,C.y),H=j.x-w,ue=j.y-N;w=j.x,N=j.y,Ue(H,ue)}function dn(){wn(),pn()}function pn(){document.removeEventListener("mousemove",hn),document.removeEventListener("mouseup",dn),g=!1}function Oi(){document.removeEventListener("touchmove",an),document.removeEventListener("touchend",Xe),document.removeEventListener("touchcancel",Xe),g=!1,I=!1,m=!1}function mn(S){P.cancel();let C=S.deltaY;S.deltaMode>0&&(C*=100);const j=vn(C);if(j!==1){const H=d?vt():$e(S);qe(H.x,H.y,j)}}function $e(S){const C=n.getBoundingClientRect(),j=S.clientX-C.left,H=S.clientY-C.top;return{x:j,y:H}}function vt(){const S=n.getBoundingClientRect();return{x:S.width*d.x,y:S.height*d.y}}function qe(S,C,j){return P.cancel(),en(S,C,j)}function vn(S){const C=Math.sign(S),j=Math.min(.25,Math.abs(h*S/128));return 1-C*j}function gn(){g||(g=!0,P.start())}function wn(){g&&(I||P.stop())}}function As(s){if(!!s){if(typeof s=="object")return(!Ve(s.x)||!Ve(s.y))&&zs(),s;zs()}}function zs(s){throw new Error(["Cannot parse transform origin.","Some good examples:",'  "center center" can be achieved with {x: 0.5, y: 0.5}','  "top center" can be achieved with {x: 0.5, y: 0}','  "bottom right" can be achieved with {x: 1, y: 1}'].join(`
`))}function Vl(s){const e=typeof s;if(e==="undefined"||e==="boolean")return;if(!(Ve(s.left)&&Ve(s.top)&&Ve(s.bottom)&&Ve(s.right)))throw new Error("Bounds object is not valid. It can be: undefined, boolean (true|false) or an object {left, top, right, bottom}")}function Ve(s){return Number.isFinite(s)}function At(s){return Number.isNaN?Number.isNaN(s):s!==s}function Al(s,e){const t=s.x2<e.x1,n=s.x1>e.x2,i=s.y1>e.y2,o=s.y2<e.y1;return!(t||n||i||o)}var zl=(s,e)=>e.type.includes(s.type)||e.type.includes("*");class Dl{constructor(e,{input:t,output:n}){if(!n||!t)return;if(this.system=e,t.node.getChildren().includes(n.node))throw new Error("Circular reference");if(!zl(n,t))throw new Error("Can't connect type "+t.type+" to "+n.type);this.output=n,this.input=t,e.options.view&&(this.view=new Nl(this)),this.output.setConnection(this),this.input.setConnection(this),this.output.node.system.save()}joinNode(e){if(!this.isNodeJoinable(e))return;this.remove(),this.output.node.connectTo(e,0,e.getInputs()[0].key);const t=this.input.node.getInputs(),n=t.indexOf(this.input),i=t[n].key;e.connectTo(this.input.node,0,i)}isNodeJoinable(e){const t=this.input.type,n=this.output.type;if(this.input.node===e||this.output.node===e)return!1;const i=e.getInputs();if(!i.length||!i.find(r=>r.type.includes(n)))return!1;const o=e.outputs;return!(!o.length||!o.find(r=>t.includes(r.type)||t.includes("*")))}remove(){this.view&&this.view.remove(),this.input.removeConnection(),this.output.removeConnection(this)}deserialize(){return{id:this.input.node.attributes.id,out:this.indexOut,in:this.indexIn}}get indexOut(){return this.output.node.outputs.indexOf(this.output)}get indexIn(){return this.input.key}}class zt extends ge{constructor(e,t){super();this.outputs=[],this._state={},this.states={},this.inputData=[],this.enableUpdates=!0,this.refs=[],this.system=e;const{attributes:n,state:i={}}=t;this._state=i,this.attributes=n,this.id=n.id,this._compute=ar((o=this._state)=>this.compute(o))}get state(){return this._state}bindView(e){this.view=e,this.outputs.forEach(t=>t.bindView()),Object.values(this.states).forEach(t=>t.bindView())}setAttributes(e){this.attributes=te(te({},this.attributes),e),this.save()}compute(e){return e}getChildren(){return this.outputs.map(n=>n.connections).flat().map(n=>n.input.node)}getSockets(){return[...this.getInputs(),...this.outputs]}getInputs(){return Object.values(this.states).map(e=>e.getInput()).filter(e=>!!e)}setStateValue(e,t){this.states[e].setValue(t)}getStateValue(e){return this.state[e]}update(){!this.enableUpdates||(this.computedData=this._compute(this.state),this.emit("computedData",this.computedData),this.refs.forEach(e=>{e.node.enableUpdates=!1,e.keyIn.forEach(t=>{e.node.setStateValue(t,this.computedData)}),e.node.enableUpdates=!0,e.node.update()}),this.save())}remove(){this.system.removeNode(this),this.destroyEventEmitter()}connectTo(e,t=0,n=e.getInputs()[0].key){var l,c,u;const i=this.outputs[t],o=(l=e.states[n])==null?void 0:l.getInput();if(!o)return;const r=new Dl(this.system,{output:i,input:o});(c=i==null?void 0:i.view)==null||c.updatePosition(),(u=o==null?void 0:o.view)==null||u.updatePosition();const a=this.refs.find(f=>f.node.id===e.id&&f.indexOut===t);return a?a.keyIn=[...a.keyIn,n]:this.refs.push({node:e,keyIn:[n],indexOut:t}),this.update(),r}disconnectFrom(e,t,n){this.refs=this.refs.filter(i=>!(i.indexOut!==n||(i.keyIn.splice(i.keyIn.indexOf(t),1),i.keyIn.length===0))),this.update()}deserialize(){const e=Object.assign({},this.attributes);e.refs=this.outputs.map(n=>n.connections).flat().map(n=>n.deserialize());const t={};return Object.values(this.states).forEach(n=>{t[n.key]=n.getValue()}),Object.assign({},{attributes:e,state:t})}save(){this.system.save()}}var Fl={title:"Boolean",type:"boolean",outputs:["boolean"],parameters:{value:{type:"boolean",defaultValue:!1}},compute({value:s=!1}){return s}};const Bl={title:"Math",type:"math",outputs:["number","number"],parameters:{mode:{type:"whatever",internal:!0,inputType:"selection",label:!1,defaultValue:"add",values:["add","multiply","subtract"]},a:{type:"number",defaultValue:0,label:!1},b:{type:"number",defaultValue:0,label:!1}},compute({mode:s,a:e,b:t}){switch(s){case"multiply":return e*t;case"subtract":return e-t;default:return e+t}}};var Rl={title:"Number",type:"number",outputs:["number"],parameters:{value:{type:"number",internal:!0,label:!1,defaultValue:0}},compute({value:s=0}){return s}};class Hl{constructor(e){this.nodeState=e,this.wrapper=document.createElement("div"),this.input=document.createElement("div"),this.wrapper.classList.add("node-state-single-wrapper"),this.input.classList.add("node-state-input");const t=e.template,n=t.label||e.key;if(typeof n=="string"){const i=document.createElement("p");i.className="state-label",i.innerHTML=n,this.wrapper.appendChild(i)}if((t==null?void 0:t.label)===!1&&this.wrapper.classList.add("hide-label"),!t.external){const i=Xr({target:this.input,template:t,value:e.getValue()});i&&i.$on("change",({detail:o})=>{typeof o!="undefined"&&!Number.isNaN(o)&&this.nodeState.setValue(o)})}e.node.view.stateWrapper.appendChild(this.wrapper),this.wrapper.appendChild(this.input)}updatePosition(){var e,t;this.rect=this.wrapper.getBoundingClientRect(),(t=(e=this.nodeState.getInput())==null?void 0:e.view)==null||t.updatePosition()}get y(){return this.rect.y-this.nodeState.node.view.y}get height(){return this.rect.height}setActive(e){this.wrapper.classList[e?"remove":"add"]("disabled")}}class Wl{constructor(e){if(!e||!e.node)throw new Error("Somethings missing");this.input=e,this.node=e.node,this.wrapper=document.createElement("div"),this.wrapper.classList.add("node-input-wrapper"),e.type.forEach(t=>{this.wrapper.classList.add(`socket-type-${t==="*"?"all":t}`)}),e.state.view.wrapper.appendChild(this.wrapper),this.wrapper.addEventListener("mousedown",t=>{t.stopPropagation(),t.preventDefault();const n=this.input.connection;n?(n.remove(),this.node.system.view.createFloatingConnection(n.output)):this.node.system.view.createFloatingConnection(this.input)},!1),this.node.system.view.colorStore.on(e.type[0],t=>{const n=window.getComputedStyle(this.wrapper,null).getPropertyValue("background-color");this.wrapper.style.backgroundColor=n!=="rgba(0, 0, 0, 0)"?n:t})}updatePosition(){var e;this.rect=this.wrapper.getBoundingClientRect(),(e=this==null?void 0:this.connection)==null||e.setPosition({x2:this.x,y2:this.y})}remove(){this.wrapper.remove(),this.connection&&this.connection.remove()}set state(e){this.wrapper.classList.forEach(t=>{t.includes("socket-state-")&&this.wrapper.classList.remove(t)}),e&&e.length&&this.wrapper.classList.add("socket-state-"+e)}get x(){return this.node.view.x-3}get y(){const e=this.node.system.view;return(this.rect.y+this.rect.height/2-e.y-e.top)/e.s-e.height/2}}class Ae{constructor(e,t,n){this.state=e,this.key=n,this.node=e.node,this.type=Array.isArray(t)?t:[t]}bindView(){this.view=new Wl(this)}removeConnection(){const e=this.connection;delete this.connection,e&&e.remove(),this.node.setStateValue(this.key,void 0),this.state.setIsExternal(!1)}setConnection(e){this.connection&&this.connection.remove(),this.connection=e,this.view&&(this.view.connection=e.view),this.state.setIsExternal(!0)}remove(){this.view&&this.view.remove(),this.removeConnection()}}class Dt extends ge{constructor(e,t,n){super();var i,o;this.node=e,this.key=t,this.template=n,this.isExternal=!1,this.value=(o=(i=e.state[t])!=null?i:n.defaultValue)!=null?o:n.value,this.node._state[t]=this.value,this.template.internal||(this.input=new Ae(this,n.type,t))}setIsExternal(e=!1){var t;this.isExternal=e,(t=this==null?void 0:this.view)==null||t.setActive(!e)}getValue(){return this.value}setValue(e){this.isExternal||(this.value=e),this.node._state[this.key]=e,this.node.update()}remove(){}getInput(){return this.input}bindView(){this.view=new Hl(this),this.input&&this.input.bindView()}}class Ft{constructor(e){this.inputs=[],this.outputs=[],this.active=!1,this.x=0,this.y=0,this.downX=0,this.downY=0,this.mDownX=0,this.mDownY=0,this.height=50,this.width=91,this.node=e,this.system=e.system,this.wrapper=document.createElement("div"),this.wrapper.style.minHeight=this.height+"px",this.wrapper.style.minWidth=this.width+"px",this.wrapper.classList.add("node-wrapper","node-type-"+e.attributes.type.toLowerCase()),this.wrapper.setAttribute("id","node-view-"+this.system.id+"-"+this.node.id),this.outputWrapper=document.createElement("div"),this.outputWrapper.classList.add("node-outputs-wrapper"),this.wrapper.append(this.outputWrapper);const t=document.createElement("p");t.innerHTML=e.attributes.name||e.attributes.type,t.classList.add("node-title"),this.wrapper.appendChild(t),this.stateWrapper=document.createElement("div"),this.stateWrapper.classList.add("node-state-wrapper"),this.wrapper.append(this.stateWrapper),e.system.view.nodeContainer.append(this.wrapper);const{pos:{x:n=0,y:i=0}={}}=e.attributes;this.bindEventListeners(),setTimeout(()=>{const{width:o,height:r}=this.wrapper.getBoundingClientRect();this.width=o/this.system.view.s,this.height=r/this.system.view.s,this.setPosition(n,i)},100)}bindEventListeners(){this.wrapper.addEventListener("mousedown",e=>this.handleMouseDown(e)),this._unsubscribeMouseMove=this.system.view.on("mousemove",e=>this.handleMouseMove(e)),this._unsubscribeMouseUp=this.system.view.on("mouseup",()=>this.handleMouseUp())}removeEventListeners(){this._unsubscribeMouseMove(),this._unsubscribeMouseUp(),this.wrapper.addEventListener("mousedown",e=>this.handleMouseDown(e))}set state(e){this.wrapper.classList.remove("node-active","node-selected","node-dragging"),this.wrapper.classList.add("node-"+e),this._state=e}get state(){return this._state}handleMouseDown(e){var i,o,r,a;if(this.system.view.keyMap.space||e.button===2||e.target!==e.currentTarget)return;e.stopImmediatePropagation(),e.stopPropagation(),this.node.system.view.setActive(this.node,e);const{rmx:t,rmy:n}=this.system.view;this.mDownX=t,this.mDownY=n,this.downX=((o=(i=this.node.attributes)==null?void 0:i.pos)==null?void 0:o.x)||0,this.downY=((a=(r=this.node.attributes)==null?void 0:r.pos)==null?void 0:a.y)||0,this.active=!0,this.system.view.selectedNodes.length&&this.system.view.selectedNodes.forEach(l=>{l.view.active=!0,l.view.mDownX=t,l.view.mDownY=n,l.view.downX=l.view.x,l.view.downY=l.view.y})}handleMouseUp(){this.active=!1,this.hoveredConnection&&(this.hoveredConnection.connection.joinNode(this.node),delete this.hoveredConnection)}handleMouseMove({mx:e,my:t,keys:n}){if(this.active){this.state="dragging";const i=n.ctrlKey?.02:1;let o=this.mDownX-e,r=this.mDownY-t;n.shiftKey&&(Math.abs(o)>Math.abs(r)?r=0:o=0);const a=Math.round((this.downX-o/this.system.view.s)*i)/i,l=Math.round((this.downY-r/this.system.view.s)*i)/i;this.setPosition(a,l)}}setPosition(e,t){this.x=e,this.y=t,this.wrapper.style.left=e+"px",this.wrapper.style.top=t+"px",Object.values(this.node.states).forEach(n=>{var i;return(i=n==null?void 0:n.view)==null?void 0:i.updatePosition()}),this.node.outputs.forEach(n=>n.view.updatePosition()),this.node.setAttributes({pos:{x:e,y:t}})}remove(){this.removeEventListeners(),this.wrapper.remove()}}class Yl extends zt{constructor(e,t){super(e,t);this.states={input:new Dt(this,"input",{type:"*"})},this.outputs=[]}compute({input:e}){return e}}class Gl extends Ft{constructor(e){super(e);const t=document.createElement("div");e.on("computedData",n=>{t.innerHTML="";const i=document.createElement("p");i.innerHTML=JSON.stringify(n,null," "),t.append(i)}),this.wrapper.appendChild(t)}}var Ul={title:"Debug",meta:{description:"Outputs any inputs for debug purposes"},node:Yl,view:Gl};class Xl extends zt{constructor(e,t){super(e,t);this.states={input:new Dt(this,"input",{type:"*",external:!0,label:!1})},this.outputs=[]}compute({input:e}){return e}}class ql extends Ft{constructor(e){super(e);const t=document.createElement("p");t.style.margin="0px",t.style.padding="4px",t.style.color="white",t.style.fontWeight="bold",e.on("computedData",n=>{t.innerHTML=JSON.stringify(n,null,2)}),this.wrapper.appendChild(t)}}var Zl={title:"Output",meta:{description:"Outputs the final value"},node:Xl,view:ql};const Bt={BooleanNode:Fl,MathNode:Bl,NumberNode:Rl,DebugNode:Ul,OutputNode:Zl};let Rt=0;class Ht{constructor(e,t="system"in e?e.system.log.level:2){this.isGrouped=!1,this.output=ce("logger"),this.module=e,this.name=e.constructor.name,this.length=this.name.length,Rt=Math.max(Rt,this.length),this.level=t,this.output=ce(this.getModuleName())}getModuleName(){return this.isGrouped?"":`${this.name.padEnd(Rt," ")}`}handle(e,t,n){n&&n.length?(console.groupCollapsed(`${this.getModuleName()} ${t}`),e(...n),console.groupEnd()):e(`${this.getModuleName()} ${t}`)}info(e,...t){this.level>=3&&this.output(e,...t)}log(e,...t){this.level>=2&&this.output(e,...t)}warn(e,...t){this.level>=1&&this.output.warn(e,...t)}error(e,...t){this.level>=0&&(this.output.error(e),this.output(...t))}group(e){this.output.group(e),this.isGrouped=!0}groupEnd(){console.groupEnd(),this.isGrouped=!1}}class Jl{constructor(e,t,n){this.children=[],this.menu=e,this.type=t,n&&this.children.push(...n),this.wrapper=document.createElement("div"),this.wrapper.classList.add("search-container");const i=document.createElement("p");i.innerHTML=this.type.title,this.wrapper.appendChild(i);const o=[t.title];this.type.meta&&(this.type.meta.description&&o.push(this.type.meta.description.split(" ").join(":")),this.type.meta.tags&&o.push(...this.type.meta.tags)),this.searchString=o.join(":").toLowerCase(),this.menu.wrapper.appendChild(this.wrapper)}show(){this.wrapper.style.display=""}hide(){this.wrapper.style.display="none"}blur(){this.wrapper.classList.remove("focused")}focus(){this.menu.activeContainer&&this.menu.activeContainer.blur(),this.menu.activeContainer=this,this.wrapper.classList.add("focused")}showIfSearch(e){return this.searchString.includes(e.toLowerCase())?(this.show(),!0):(this.hide(),!1)}destroy(){this.wrapper.remove()}}class Kl{constructor(e){this.x=0,this.y=0,this.visible=!1,this.possibleContainers=[],this.filteredContainers=[],this.containers=[],this.view=e,this.system=e.system,this.log=new Ht(this),this.wrapper=document.createElement("div"),this.wrapper.classList.add("context-wrapper"),this.searchInput=document.createElement("input"),this.searchInput.type="text",this.searchInput.placeholder="Search",this.wrapper.appendChild(this.searchInput),this.view.wrapper.append(this.wrapper),this.bindEventListeners(),this.view.on("keydown",({key:t})=>t==="Escape"&&this.hide())}updateTypes(e){this.containers.forEach(t=>t.destroy()),this.containers.push(...e.map(t=>new Jl(this,t)))}setActive(e){const{length:t}=this.filteredContainers;if(!t)return;const i=(((this.activeContainer?this.filteredContainers.indexOf(this.activeContainer):0)+e)%t+t)%t;this.filteredContainers[i].focus(),this.log.info(`Set active entry ${i}`)}bindEventListeners(){window.addEventListener("mousedown",e=>this.handleWindowClick(e)),this.view.system.store.on("types",e=>this.updateTypes(e),20),this.view.on("keydown",({key:e})=>{switch(e){case"escape":this.reject();break;case"arrowdown":this.setActive(1);break;case"arrowup":this.setActive(-1);break}}),this.searchInput.addEventListener("input",()=>{const{value:e=""}=this.searchInput;this.search(e)}),this.searchInput.addEventListener("keydown",({keyCode:e})=>{e===13&&this.activeContainer&&this.resolve()})}handleWindowClick(e){const t=e.composedPath();this.visible&&!t.includes(this.wrapper)&&this.reject()}search(e){if(e&&e.length){const t=this.possibleContainers.filter(n=>n.showIfSearch(e));t.length===0?(this.filteredContainers=[...this.possibleContainers],this.filteredContainers.forEach(n=>n.show())):(this.filteredContainers=[...t],t[0].focus()),this.log.info(`Found ${t.length} entries for search:${e}`)}else this.filteredContainers=[...this.possibleContainers],this.filteredContainers.forEach(t=>t.show())}reject(){this.rej&&this.rej(),this.hide()}resolve(){var r;const e=(r=this.activeContainer)==null?void 0:r.type,{x:t,y:n}=this.view.projectWindowToLocal(this.x,this.y),i=t-this.view.width/2,o=n-this.view.height/2;e?this.res({attributes:{pos:{x:i,y:o},id:"",name:e.title,type:e.title,refs:[]},state:{value:void 0}}):this.reject(),this.hide()}hide(){this.visible=!1,this.wrapper.classList.remove("context-visible"),this.wrapper.blur(),this.res=e=>e,this.reject=()=>{},this.searchInput.disabled=!0}show({x:e,y:t,socket:n}){return this.x=e,this.y=t,this.socket=n,this.visible=!0,this.wrapper.style.left=e+"px",this.wrapper.style.top=t+"px",setTimeout(()=>{this.searchInput.disabled=!1,this.wrapper.classList.add("context-visible"),this.searchInput.value="",this.searchInput.focus(),this.search()},10),this.containers.forEach(i=>i.hide()),this.possibleContainers=n?this.containers.filter(i=>{var o,r,a;if(n instanceof Ae){const{type:l}=n;return!i.type.outputs||!i.type.outputs.length?!1:l.includes("*")?!0:(o=i.type.outputs)==null?void 0:o.some(c=>l.includes(c))}else{const{type:l}=n;return!i.type.inputs||!i.type.inputs.length?!1:l==="*"?!0:((r=i.type.inputs)==null?void 0:r.includes("*"))||((a=i.type.inputs)==null?void 0:a.includes(l))}}):this.containers,this.possibleContainers.forEach(i=>i.show()),this.possibleContainers.length&&this.possibleContainers[0].focus(),this.filteredContainers=[...this.possibleContainers],new Promise((i,o)=>{this.res=i,this.rej=o})}}class Ql extends ge{constructor(e){super();this.mDownX=0,this.mDownY=0,this.downX=0,this.downY=0,this.isShiftKey=!1,this.view=e,this.wrapper=document.createElement("div"),this.wrapper.classList.add("box-selection-wrapper"),this.view.wrapper.append(this.wrapper),this.view.on("mousedown",({target:t,mx:n,x:i,my:o,y:r,keys:a})=>{var l;a.space||a.shiftKey||a.button===2||!a.ctrlKey||t&&!((l=t==null?void 0:t.className)==null?void 0:l.includes("nodesystem"))||(this.mDownX=n,this.mDownY=o,this.downX=i,this.downY=r,this.wrapper.style.left=n+"px",this.wrapper.style.top=o+"px",this.wrapper.style.width="0px",this.wrapper.style.height="0px",this.isShiftKey=a.shift,this.show())})}show(){this.wrapper.classList.add("box-selection-visible");const e=this.view.system.nodes.map(i=>{const{width:o,height:r}=i.view,{x:a,y:l}=i.view,c=a+this.view.width/2,u=l+this.view.height/2,f=c+o,h=u+r;return{n:i,state:i.view.state,x1:c,y1:u,x2:f,y2:h}});let t=[];const n=this.view.on("mousemove",({mx:i,my:o,x:r,y:a})=>{const{mDownX:l,mDownY:c,downX:u,downY:f,isShiftKey:h}=this,d={x1:Math.min(i,l),x2:Math.max(i,l),y1:Math.min(o,c),y2:Math.max(o,c)};this.wrapper.style.left=d.x1+"px",this.wrapper.style.top=d.y1+"px",this.wrapper.style.width=Math.abs(l-i)+"px",this.wrapper.style.height=Math.abs(c-o)+"px";const p={x1:Math.min(r,u),x2:Math.max(r,u),y1:Math.min(a,f),y2:Math.max(a,f)};t=e.filter(m=>Al(p,m)?!0:(h||(m.state="normal",m.n.view.state="normal"),!1)).map(({n:m,state:g})=>(g!=="active"&&(g="selected",m.view.state="selected"),m))},5);this.view.once("mouseup",()=>{n(),this.hide(),this.emit("selection",t)})}projectBox(e){const{x:t,y:n}=this.view.projectWindowToLocal(e.x1,e.y1),{x:i,y:o}=this.view.projectWindowToLocal(e.x2,e.y2);return{x1:t,y1:n,x2:i,y2:o}}hide(){this.wrapper.classList.remove("box-selection-visible")}}class ea{constructor(e){this.connections=[],this.output=e,this.node=e.node,this.wrapper=document.createElement("div"),this.wrapper.classList.add("node-output-wrapper"),this.wrapper.classList.add(`socket-type-${e.type}`),e.node.view.outputWrapper.appendChild(this.wrapper),this.wrapper.addEventListener("mousedown",t=>{t.stopPropagation(),t.preventDefault(),this.node.system.view.createFloatingConnection(this.output)},!1),this.node.system.view.colorStore.on(e.type,t=>{const n=window.getComputedStyle(this.wrapper,null).getPropertyValue("background-color");this.wrapper.style.backgroundColor=n!=="rgba(0, 0, 0, 0)"&&n!=="rgb(0,0,0)"?n:t})}remove(){this.wrapper.remove(),this.connections.forEach(e=>e.remove())}set state(e){this.wrapper.classList.forEach(t=>{t.includes("socket-state-")&&this.wrapper.classList.remove(t)}),e&&e.length&&this.wrapper.classList.add("socket-state-"+e)}updatePosition(){this.rect=this.wrapper.getBoundingClientRect(),this.output.connections.forEach(e=>e.view.setPosition({x1:this.x,y1:this.y}))}get x(){return this.node.view.x+this.node.view.width+3}get y(){const e=this.node.system.view;return(this.rect.y+this.rect.height/2-e.y-e.top)/e.s-e.height/2}}class ct{constructor(e,t){if(this.connections=[],this.node=e,this.type=t,Array.isArray(t))throw new Error("Output can only output one type, not "+t)}bindView(){this.view=new ea(this)}connectTo(e){const t=this.node.outputs.indexOf(this);return this.node.connectTo(e.node,t,e.key)}removeConnection(e){const t=this.connections.indexOf(e);this.connections.splice(t,1),this.node.disconnectFrom(e.input.node,e.indexIn,e.indexOut),this.view&&this.view.connections.splice(t,1)}setConnection(e){this.connections.push(e),this.view&&this.view.connections.push(e.view)}remove(){this.connections.forEach(e=>e.remove())}}class ta extends Zo(Vs,ge){constructor(e,t={}){const{system:n}=e.node;super({},e);this.view=n.view,this.path.style.zIndex="999";const i=Array.isArray(e.type)?e.type[0]:e.type;n.view.colorStore.on(i,f=>{this.path.style.stroke=f}),e.view.updatePosition();const o=e.view.x,r=e.view.y;let a=o,l=r;t&&(a=t.x-n.view.width/2,l=t.y-n.view.height/2),this.setPosition({x1:o,y1:r,x2:a,y2:l}),this.dx2=this.x2,this.dy2=this.y2,this.isInput=e instanceof Ae,this.allSockets=e instanceof Ae?n.getOutputs(e.type):n.getInputs(e.type),this.allSockets.forEach(f=>f.view.state="potential");let c=this.allSockets.filter(f=>f.node.attributes.id!==e.node.attributes.id);c.forEach(f=>f.view.state="middle");const u="connection"in e?[e.connection]:e.connections;if(u&&!!u.length){const f=u.map(h=>[h.input,h.output]).flat();c=c.filter(h=>!f.includes(h))}this.potentialSockets=c,this.potentialSockets.forEach(f=>f.view.updatePosition()),this.potentialSockets.forEach(f=>f.view.state="highlight"),this._unsubMouseUp=this.view.on("mouseup",this.handleMouseUp.bind(this)),this._unsubMouseMove=this.view.on("mousemove",this.handleMouseMove.bind(this)),this.mdx=this.view.mx,this.mdy=this.view.my,this.socket=e}handleMouseUp(e){const{x:t,y:n,keys:i}=e;this._unsubMouseUp(),this._unsubMouseMove(),this.allSockets.forEach(a=>a.view.state="");let o,r=0;this.socket instanceof Ae&&this.hoveredSocket instanceof ct?(o=this.socket.key,r=this.hoveredSocket.node.outputs.indexOf(this.hoveredSocket)):this.socket instanceof ct&&this.hoveredSocket instanceof Ae&&(o=this.hoveredSocket.key,r=this.socket.node.outputs.indexOf(this.socket)),this.hoveredSocket?(this.emit("connection",{keyIn:o,indexOut:r,inputNode:this.isInput?this.socket.node:this.hoveredSocket.node,outputNode:this.isInput?this.hoveredSocket.node:this.socket.node}),this.remove()):i.ctrlKey?this.view.addMenu.show({x:t,y:n,socket:this.socket}).then(a=>this.view.system.createNode(a)).then(a=>{this.socket instanceof ct?this.socket.node.connectTo(a,r,o):a.connectTo(this.socket.node,r,o)}).catch(()=>{}).finally(()=>{this.remove()}):this.remove()}handleMouseMove(e){const{x:t,y:n}=e;this.mdx||(this.mdx=t,this.mdy=n);const i=this.dx2+(t-this.mdx),o=this.dy2+(n-this.mdy),r=20,a=this.potentialSockets.map(l=>{const{x:c,y:u}=l.view;return{socket:l,distance:Math.abs(i-c)+Math.abs(o-u)}}).filter(l=>l.distance<r).sort((l,c)=>l.distance>c.distance?-1:1).map(l=>l.socket);if(a.length){const{x:l,y:c}=a[0].view;this.hoveredSocket=a[0],this.setPosition({x2:l,y2:c})}else this.hoveredSocket=void 0,this.setPosition({x2:i,y2:o})}remove(){super.remove()}}const na=[{color:"#a52a2a",name:"brown"},{color:"#008000",name:"green"},{color:"#4b0082",name:"indigo"},{color:"#f0e68c",name:"khaki"},{color:"#add8e6",name:"lightblue"},{color:"#e0ffff",name:"lightcyan"},{color:"#90ee90",name:"lightgreen"},{color:"#d3d3d3",name:"lightgrey"},{color:"#ffb6c1",name:"lightpink"},{color:"#ffffe0",name:"lightyellow"},{color:"#00ff00",name:"lime"},{color:"#ff00ff",name:"magenta"},{color:"#800000",name:"maroon"},{color:"#000080",name:"navy"},{color:"#808000",name:"olive"},{color:"#ffa500",name:"orange"},{color:"#ffc0cb",name:"pink"},{color:"#800080",name:"purple"},{color:"#800080",name:"violet"},{color:"#ff0000",name:"red"},{color:"#c0c0c0",name:"silver"},{color:"#ffffff",name:"white"}];class sa extends ge{constructor(){super();this.colors={boolean:"#f00",number:"#fff",plant:"#65e2a0",vec3:"#6363C7"},this.index=0}setType(e){e in this.colors||(this.colors[e]=na[this.index].color,this.index++),this.emit(e,this.colors[e])}on(e,t){return this.setType(e),t(this.colors[e]),super.on(e,t)}}class ia extends ge{constructor(e){super();var t,n,i,o;this.colorStore=new sa,this.width=0,this.height=0,this.top=0,this.left=0,this.x=window.innerWidth/2,this.y=window.innerHeight/2,this.s=1,this.mx=0,this.my=0,this.mdx=0,this.mdy=0,this.rmx=0,this.rmy=0,this.mouseDown=!1,this.keyMap={},this.selectedNodes=[],this.selectedNodesDown=[],this.clipboard=[],this.system=e,this.wrapper=(n=(t=e.options)==null?void 0:t.wrapper)!=null?n:document.createElement("div"),this.wrapper.classList.add("nodesystem-wrapper"),e.options.parent&&e.options.parent.appendChild(this.wrapper),this.transformWrapper=document.createElement("div"),this.transformWrapper.classList.add("nodesystem-transform"),this.wrapper.appendChild(this.transformWrapper),this.nodeContainer=document.createElement("div"),this.nodeContainer.classList.add("nodes-container"),this.transformWrapper.append(this.nodeContainer),this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("viewBox","0 0 1 1"),this.svg.setAttribute("height","1"),this.svg.setAttribute("width","1"),this.svg.setAttribute("preserveAspectRatio","none"),this.svg.style.transform=`scale(${(i=window.devicePixelRatio)!=null?i:1})`,this.transformWrapper.appendChild(this.svg),this.addMenu=new Kl(this),this.boxSelection=new Ql(this),this.boxSelection.on("selection",r=>{this.selectedNodes=r}),this.dpr=(o=window.devicePixelRatio)!=null?o:1,this.bindEventListeners(),this.handleResize(),setTimeout(()=>{this.setTransform({x:0,y:0,s:1})},1)}createFloatingConnection(e){new ta(e,{x:this.mx,y:this.my}).once("connection",({inputNode:n,outputNode:i,keyIn:o,indexOut:r})=>{i.connectTo(n,r,o)})}setActive(e,{shiftKey:t=!1,ctrlKey:n=!1}={}){if(!e)this.activeNode&&(this.activeNode.view.state="normal",this.activeNode=void 0),this.selectedNodes.forEach(i=>i.view.state="normal"),this.selectedNodes=[];else if(t&&n){if(this.activeNode&&(this.activeNode.view.state="normal",this.activeNode=void 0),this.activeNode=e,this.activeNode.view.state="active",this.activeNode.outputs.length){const i=this.system.createNode({state:{},attributes:{type:"debug",id:"0",name:"debug",refs:[],pos:{x:this.activeNode.view.x+this.activeNode.view.width+10,y:this.activeNode.view.y}}});i.enableUpdates=!0,this.activeNode.connectTo(i,0,"input")}}else t?this.activeNode?(this.selectedNodes.push(this.activeNode),this.activeNode.view.state="selected",this.activeNode=e,this.activeNode.view.state="active"):(this.activeNode=e,this.activeNode.view.state="active"):this.activeNode?(this.selectedNodes.forEach(i=>i.view.state="normal"),this.selectedNodes=[],this.activeNode!==e&&(this.activeNode.view.state="normal",this.activeNode=e,this.activeNode.view.state="active")):(this.activeNode=e,this.activeNode.view.state="active")}getSelectedNodes(){return this.activeNode&&this.selectedNodes.includes(this.activeNode)?this.selectedNodes:this.activeNode?[...this.selectedNodes,this.activeNode]:[...this.selectedNodes]}projectLocalToWindow(e,t){const n=e+this.x,i=t+this.y,o=n*this.s,r=i*this.s;return{x:o,y:r}}projectWindowToLocal(e,t){const n=e-this.x,i=t-this.y,o=n/this.s,r=i/this.s;return{x:o,y:r}}setTransform({x:e=this.x,y:t=this.y,s:n=this.s}={}){this.x=e,this.y=t,this.s=n/this.dpr,this.panzoom.setTransform(e,t,n/this.dpr)}bindEventListeners(){document.addEventListener("keydown",e=>this.handleKeyDown(e)),document.addEventListener("keyup",e=>this.handleKeyUp(e)),this.wrapper.addEventListener("mousemove",e=>this.handleMouseMove(e)),this.wrapper.addEventListener("mousedown",e=>this.handleMouseDown(e)),this.wrapper.addEventListener("touchdown",e=>this.handleMouseDown(e)),this.wrapper.addEventListener("mouseup",e=>this.handleMouseUp(e)),window.addEventListener("resize",xt(()=>this.handleResize(),10)),this.panzoom=Ol(this.transformWrapper,{minZoom:.2,maxZoom:5,onTransform:({x:e,y:t,scale:n})=>{this.x=e,this.y=t,this.s=n,this.wrapper.style.backgroundPosition=`${e}px ${t}px`,this.wrapper.style.backgroundSize=n*this.height*.02+"% "+n*this.width*.02+"%",this.wrapper.style.backgroundOrigin=`${e}px ${t}px`,window.t={x:e,y:t,s:n},this.system.setMetaData({transform:{x:e,y:t,s:n}})}})}handleResize(){const{width:e,height:t,top:n,left:i}=this.wrapper.getBoundingClientRect();this.width=e,this.height=t,this.top=n,this.left=i,this.emit("resize",{width:e,height:t})}handleMouseMove(e){this.ev=e;const{clientX:t,clientY:n,shiftKey:i,ctrlKey:o}=e;this.rmx=t-this.left,this.rmy=n-this.top;const{x:r,y:a}=this.projectWindowToLocal(this.rmx,this.rmy);this.mx=r,this.my=a,this.emit("mousemove",{x:r,y:a,mx:this.rmx,my:this.rmy,keys:we(te({},this.keyMap),{shiftKey:i,ctrlKey:o})})}handleMouseDown(e){const{shiftKey:t,ctrlKey:n,clientX:i,clientY:o,button:r,target:a}=e;t||this.setActive(),this.mouseDown=!0,this.rmx=i-this.left,this.rmy=o-this.top;const{x:l,y:c}=this.projectWindowToLocal(this.rmx,this.rmy);this.mx=l,this.my=c,this.selectedNodesDown=this.selectedNodes.map(u=>[u.view.x,u.view.y]),this.emit("mousedown",{x:l,y:c,mx:this.rmx,my:this.rmy,target:a,keys:we(te({},this.keyMap),{shiftKey:t,ctrlKey:n,button:r})})}handleMouseUp({clientX:e,clientY:t,shiftKey:n,ctrlKey:i}){this.mouseDown=!1;const o=e-this.left,r=t-this.top;this.emit("mouseup",{x:o,y:r,keys:we(te({},this.keyMap),{shiftKey:n,ctrlKey:i})})}handleKeyUp({key:e}){e===" "&&(e="space"),delete this.keyMap[e&&e.toLowerCase()],this.emit("keyup",{key:e,keys:this.keyMap})}handleKeyDown({key:e,ctrlKey:t,shiftKey:n}){switch(e=e===" "?"space":e.toLowerCase(),this.keyMap[e&&e.toLowerCase()]=!0,e==="space"&&this.ev&&this.handleMouseDown(this.ev),e){case"a":n&&this.addMenu.show({x:this.rmx,y:this.rmy}).then(i=>{this.system.createNode(i)}).catch();break;case"c":if(n&&t)localStorage.clear(),window.location.reload();else if(t){const i=this.selectedNodes.splice(0);this.activeNode&&!i.includes(this.activeNode)&&i.push(this.activeNode),this.clipboard=i.map(o=>o.deserialize())}else this.selectedNodes.length&&this.activeNode&&this.selectedNodes[0].connectTo(this.activeNode);break;case"f":this.setTransform({x:0,y:0,s:1});break;case"g":this.keyMap.g||(this.mdx=this.mx,this.mdy=this.my,this.selectedNodesDown=this.selectedNodes.map(i=>[i.view.x,i.view.y]));break;case"x":this.activeNode&&(t?this.system.spliceNode(this.activeNode):this.system.removeNode(this.activeNode)),this.selectedNodes.forEach(i=>i.remove());break;case"z":break;case"l":this.activeNode&&(console.log(this.activeNode),console.log(this.activeNode.deserialize()));break;case"v":if(t){const i=this.clipboard.sort((c,u)=>{const{pos:{x:f=0,y:h=0}={}}=c.attributes,{pos:{x:d=0,y:p=0}={}}=u.attributes;return f+h<d+p?-1:1});let{pos:{x:o=0,y:r=0}={}}=i[0].attributes;const{x:a,y:l}=this.projectWindowToLocal(this.mx,this.my);o-=a,r-=l,this.clipboard.map(c=>{const{pos:{x:u=0,y:f=0}={}}=c.attributes;return c.attributes.pos={x:u-o,y:f-r},c}).forEach(c=>this.system.createNode(c))}break}this.emit("keydown",{key:e,keys:we(te({},this.keyMap),{ctrlKey:t})})}}class oa{constructor(e){this.id=nr(),this.system=e,this.log=new Ht(this),this.log.info("Initialized")}reset(){this.id.reset(),this.log.info("Reset id generator")}create(e){const{attributes:t}=e,n=t.type.toLowerCase(),i=this.system.store.getByName(n);t.id=this.id(+t.id);const o=new i.node(this.system,e);if(this.system.options.view&&i.view){const r=new i.view(o);o.bindView(r)}return n==="output"&&(this.system.outputNode&&this.system.outputNode.remove(),this.system.outputNode=o,o.on("computedData",r=>this.system.result=r)),this.log.info(`Created node with type ${t.type}`,e),o}}class ra{constructor(e){this.system=e}parseSystem(e){const{nodes:t}=e,n=new Map,i=t.map(o=>{const r=this.system.factory.create(o);return r.enableUpdates=!1,n.set(r.id,r),r});return i.forEach(o=>{o.attributes.refs&&o.attributes.refs.forEach(r=>{const a=n.get(r.id);if(!a)throw new Error(`Failed ref: from ${o.attributes.name||o.attributes.id} to ${r.id} `);o.connectTo(a,r.out,r.in)})}),i.forEach(o=>{o.enableUpdates=!0,o.update()}),i}parseType(e){const{compute:t,meta:n,outputs:i,title:o,parameters:r}=e,a=class extends zt{constructor(c,u){super(c,u);if(t&&(this.compute=t),i){const f=Array.isArray(i)?i:[i];this.outputs=f.map(h=>new ct(this,h))}Object.entries(r).forEach(([f,h])=>{this.states[f]=new Dt(this,f,h)})}},l=Object.values(r).filter(c=>c.internal!==!0).map(c=>c.type);if(this.system.options.view){const c=class extends Ft{constructor(f){super(f)}};return we(te({},e),{inputs:l,title:o,meta:n,node:a,view:c})}return we(te({inputs:l},e),{title:o,meta:n,node:a})}getData(){return{meta:this.system.meta,nodes:this.system.nodes.map(e=>e.deserialize())}}}const la=ce("NodeTypeStore");class aa extends ge{constructor(){super();this.types=[],this.typeMap={}}add(e){la("register new type "+e.title,e),this.types=[...this.types.filter(t=>t.title.toLowerCase()!==e.title.toLowerCase()),e],this.typeMap[e.title.toLowerCase()]=e,this.emit("types",this.types),this.emit("type",e)}getByName(e){if(e in this.typeMap)return this.typeMap[e];throw new Error("NodeTypeStore: type "+e+" does not exist")}}var ca=Object.defineProperty,ua=Object.getOwnPropertyDescriptor,fa=(s,e,t,n)=>{for(var i=n>1?void 0:n?ua(e,t):e,o=s.length-1,r;o>=0;o--)(r=s[o])&&(i=(n?r(e,t,i):r(i))||i);return n&&i&&ca(e,t,i),i};let ha=0;class Wt extends ge{constructor(e={}){super();this.parser=new ra(this),this.meta={lastSaved:Date.now()},this.isLoaded=!1,this.isPaused=!1,this.nodes=[],this.states=[],this.id=ha++;const{view:t=!1,wrapper:n,defaultNodes:i=!1,registerNodes:o=!1,logLevel:r=5}=e;this.options={view:t,wrapper:n};try{if(this.log=new Ht(this,r),this.log.group(`Instantiated id:${this.id}`),this.store=new aa,this.factory=new oa(this),t&&(this.view=new ia(this)),i){const a=[];i===!0?a.push(...Object.entries(Bt).map(l=>l[1])):Array.isArray(i)&&i.length&&i.forEach(l=>{typeof l=="string"&&l in Bt&&a.push(Bt[l])}),a.forEach(l=>this.registerNodeType(l))}o&&o.length&&o.forEach(this.registerNodeType.bind(this)),this.log.groupEnd()}catch(a){this.emit("error",{type:"init",error:a})}}get result(){return this._result}set result(e){this._result=e,this.isLoaded&&this.emit("result",e)}setMetaData(e){this.meta=te(te({},this.meta),e),this.save()}load(e){try{this.isLoaded=!1,this.isPaused=!0,this.nodes.forEach(n=>n.enableUpdates=!1),this.nodes.forEach(n=>n.remove()),this.factory.reset();const t=this.parser.parseSystem(e);return this.addNodes(t),this.meta=e.meta||{lastSaved:0},this.meta.lastSaved=Date.now(),this.view&&this.view.setTransform(this.meta.transform),this.log.info(`Loaded NodeSystemData with ${t.length} Nodes`,e),this.isPaused=!1,this.isLoaded=!0,this.result=this._result,this}catch(t){this.emit("error",{type:"loading",error:t})}}serialize(){return we(te({},this.parser.getData()),{meta:this.meta})}save(){this.isLoaded&&(this.meta.lastSaved=Date.now(),this.log.info("save system",this.serialize()),this.emit("save",this.serialize()))}addNodes(e){e.forEach(t=>this.addNode(t))}addNode(e){this.nodes.push(e),this.save()}removeNode(e){e.view.remove(),Object.values(e.states).forEach(t=>t.remove()),e.outputs.forEach(t=>t.remove()),e.getInputs().forEach(t=>t.remove()),this.nodes=this.nodes.filter(t=>t!==e),this.save(),this.log.info(`Removed Node id:${e.id} type:${e.attributes.type}`,e.deserialize())}spliceNode(e){const t=e.getInputs().map(i=>{var o;return(o=i==null?void 0:i.connection)==null?void 0:o.output}),n=e.outputs.map(i=>i.connections).flat().map(i=>i.input);for(let i=0;i<t.length;i++){const o=t[i],r=n[i];!r||!o||o.connectTo(r)}return this.removeNode(e)}getSockets(e){const t=this.nodes.map(n=>[...n.getSockets()]).flat();return e?t.filter(n=>n.type===e):t}getInputs(e){const t=this.nodes.map(n=>n.getInputs()).flat();return!e||e==="*"?t:t.filter(n=>n.type.includes("*")||n.type.includes(e))}getOutputs(e){const t=this.nodes.map(n=>n.outputs).flat();return!e||e.includes("*")?t:t.filter(n=>n.type==="*"||e.includes(n.type))}createNode(e){const t=this.factory.create(e);return this.addNode(t),this.save(),this.log.info(`Created new node id:${e.attributes.id} type:${e.attributes.type}`,e),t}getNodes(){return this.nodes}getNodeTypes(){return this.store.types}registerNodeType(e){if("node"in e)this.store.add(e);else{const t=this.parser.parseType(e);this.store.add(t)}this.log.info(`Registered new nodeType type:${e.title}`,e)}}fa([er(1e3)],Wt.prototype,"save",1);const Se=ce("ProjectManager"),Yt="pt_project_";class da extends ge{constructor(){super();this.activeProject=Le(),this.projects={},this.store=Le([]),this.loadProjects()}createNewProject(){const e=Object.values(this.projects).filter(n=>/^DefaultProject((\d)+)?/.test(n.meta.name)).length,t={meta:{name:"DefaultProject"+(e||""),id:wt(),transform:{x:0,y:0,s:1}},nodes:[{attributes:{pos:{x:-100,y:0},type:"stem",id:"1",refs:[{id:"0",in:"main",out:0}]}},{attributes:{pos:{x:0,y:0},type:"output",id:"0",refs:[]}}]};return Se("created new plant",t),t}createNew(){const e=this.createNewProject();this.emit("new",e),this.saveProject(e)}async updateProjectMeta(e,t){const n=await this.getProject(e);n.meta=te(te({},n.meta),t),Se("update meta",e),this.emit("update",n),this.saveProject(n)}async saveProject(e){const t=JSON.parse(JSON.stringify(e));this.projects[t.meta.id]=t,this.emit("save",t),await ye.setItem("pt_project_ids",Object.keys(this.projects)),await ye.setItem(Yt+t.meta.id,t),Se("saved plant id: ",t.meta.id),this.store.set(Object.values(this.projects))}async getProject(e){if(e in this.projects)return this.projects[e];const t=await ye.getItem(Yt+e);return this.projects[e]=t,t}async deleteProject(e){e in this.projects?(delete this.projects[e],await ye.removeItem(Yt+e),await ye.setItem("pt_project_ids",Object.keys(this.projects)),this.store.set(Object.values(this.projects)),this.emit("delete",e),Se("deleted project with id: "+e)):Se.warn("cant delete project with id: "+e)}async setActiveProject(e){if(this.loadingActiveProject||e===this.activeProjectId)return;this.activeProjectId=e,this.loadingActiveProject=this.getProject(e);const t=await this.loadingActiveProject;this.loadingActiveProject?(this.activeProjectId=e,this.saveProject(t),this.activeProject.set(t),await ye.setItem("pt_active_id",e),Se("set active project to id: "+e),this.emit("load",t),delete this.loadingActiveProject):Se.warn("cant find plant with id: "+e)}async loadProjects(){const e=await ye.getItem("pt_project_ids")||[];Se("loaded project ids",e);const t=await ye.getItem("pt_active_id");if(!e.length){const n=this.createNewProject();e.push(n.meta.id),await this.saveProject(n)}await Promise.all(e.map(async n=>{const i=await this.getProject(n);Se("loaded ",n),this.projects[n]=i})),t&&e.includes(t)?this.setActiveProject(t):this.setActiveProject(e[0]),this.store.set(Object.values(this.projects))}setProject(e){this.plant=e,this.emit("plant",e)}getActiveProject(){return this.plant}setSettings(e){this.emit("settings",e)}}const pa=JSON.parse(localStorage.getItem("pt_local_state")),He=te({},pa),ma=qn((s,e)=>{He[s]=e,localStorage.setItem("pt_local_state",JSON.stringify(He))},100,!1);var de={get(s,e){var t;return He[s]=(t=He[s])!=null?t:e,He[s]},set:ma};var Yc=(()=>{let s=Math.random();return()=>(s=s>0?s-Math.random():s+Math.random(),s.toString().split(".")[1])})();const va={};Vt.forEach(s=>{va[s.type]=s,"computeSkeleton"in s&&(s.computeSkeleton=Mt(s.computeSkeleton)),"computeGeometry"in s&&(s.computeGeometry=Mt(s.computeGeometry)),"computeValue"in s&&(s.computeValue=Mt(s.computeValue))});const Gc=ce("gen.plant");function ga(){return new Worker("assets/webWorker.22d229d5.js",{type:"module"})}var Ds=()=>{const s=ga(),e=Qi(s);let t=!1;async function n(i,o){if(t)return;t=!0;const r=await e.plant(i,o);return t=!1,r}return{plant:n}};class Fs extends ge{constructor({canvas:e,width:t,height:n,clearColor:i="ffffff",camPos:o=[0,2,4]}={}){super();if(this.scene=new eo,this.lastCamPos=new je(0,0,0),this.canvas=e,(!t||!n)&&e){const r=e.getBoundingClientRect();t=r.width,n=r.height}this.renderer=new to({canvas:e,width:t,height:n,antialias:!0,dpr:1}),this.gl=this.renderer.gl,this.gl.clearColor(...Xn(i),1),this.renderer.gl.canvas&&(this.canvas=this.renderer.gl.canvas),this.camera=new no(this.gl,{fov:70,aspect:t/n}),this.lastCamPos.set(o),this.camera.position.set(o),this.camera.lookAt(new je(0,0,0)),e&&(this.controls=new so(this.camera,{element:e,target:new je(0,.2,0),maxPolarAngle:1.6,minDistance:.2,maxDistance:15,ease:.7,rotateSpeed:.5,inertia:.5})),this.bindEventlisteners(),e&&this.render()}setControlTarget(e){Number.isNaN(e.x)||(this.controlTarget||(this.controls.target=e),this.controlTarget=e)}setClearColor(e){this.gl.clearColor(...Xn(e),1)}renderScene(e){this.renderer.render({scene:e,camera:this.camera})}render(){requestAnimationFrame(this.render.bind(this)),this.lastCamPos.equals(this.camera.position)||(this.lastCamPos.set(this.camera.position),this.emit("camPos",this.camera.position.toArray())),this.controlTarget&&(this.controlTarget.squaredDistance(this.controls.target)<5e-5?this.controls.target=this.controlTarget:this.controls.target.lerp(this.controlTarget,.05)),window.target=this.controls.target,this.controls.update(),this.renderer.render({scene:this.scene,camera:this.camera})}bindEventlisteners(){const e=xt(()=>this.handleResize(),500);window.addEventListener("resize",()=>{this.canvas.classList.add("resizing"),e()})}handleResize(){let e=this.canvas.parentElement;e||(e=this.canvas);const{width:t,height:n}=e.getBoundingClientRect();this.renderer.setSize(t,n),this.camera.perspective({aspect:this.gl.canvas.width/this.gl.canvas.height}),this.canvas.classList.remove("resizing")}}var wa=`precision highp float;precision highp int;
#define GLSLIFY 1
uniform float uTime;uniform sampler2D tMap;uniform vec3 uFogColor;uniform float uFogNear;uniform float uFogFar;uniform float texScale;varying vec2 vUv;varying vec4 vMVPos;varying vec3 vPos;void main(){vec3 tex=texture2D(tMap,vUv*texScale).rgb;float dist=length(vMVPos);float fog=smoothstep(uFogNear,uFogFar,dist);tex=mix(tex,uFogColor,fog);tex=mix(tex,uFogColor,smoothstep(0.0,-1.0,vPos.y));gl_FragColor.rgb=tex;}`,ya=`precision highp float;precision highp int;
#define GLSLIFY 1
attribute vec2 uv;attribute vec3 position;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform float uTime;varying vec2 vUv;varying vec4 vMVPos;varying vec3 vPos;void main(){vUv=uv;vec3 pos=position;vPos=pos;vMVPos=modelViewMatrix*vec4(pos,1.0);gl_Position=projectionMatrix*vMVPos;}`,_a=`#version 300 es
precision highp float;
#define varying in
#define texture2D texture
#define gl_FragColor FragColor
out vec4 FragColor;precision highp float;
#define GLSLIFY 1
uniform sampler2D tMap;varying vec4 vMVPos;vec3 normals(vec3 pos){vec3 fdx=dFdx(pos);vec3 fdy=dFdy(pos);return normalize(cross(fdx,fdy));}vec2 matcap(vec3 eye,vec3 normal){vec3 reflected=reflect(eye,normal);float m=2.8284271247461903*sqrt(reflected.z+1.0);return reflected.xy/m+0.5;}void main(){vec3 normal=normals(vMVPos.xyz);vec3 mat=texture2D(tMap,matcap(normalize(vMVPos.xyz),normal)).rgb;gl_FragColor.rgb=mat;gl_FragColor.a=1.0;}`,ba=`#version 300 es
#define GLSLIFY 1
#define attribute in
#define varying out
attribute vec3 position;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;varying vec4 vMVPos;void main(){vMVPos=modelViewMatrix*vec4(position,1.0);gl_Position=projectionMatrix*vMVPos;}`,ka=`precision highp float;
#define GLSLIFY 1
float pointSize=0.02;varying float distToCamera;void main(){vec2 uv=gl_PointCoord.xy;float dist=2.0-distToCamera;float circle=pointSize*dist>length(uv-0.5)?0.8:0.0;float xMask=min(abs(uv.x-0.5),abs(uv.y-0.5));circle=xMask>0.003?0.0:circle;gl_FragColor.rgb=vec3(0.0,0.0,0.0);gl_FragColor.a=circle;}`,xa=`#define GLSLIFY 1
attribute vec3 position;uniform mat4 modelMatrix;uniform mat4 viewMatrix;uniform mat4 projectionMatrix;varying float distToCamera;void main(){vec4 mPos=modelMatrix*vec4(position,1.0);vec4 mvPos=viewMatrix*mPos;gl_PointSize=300.0/length(mvPos.xyz);distToCamera=-mvPos.z/10.0+1.0;gl_Position=projectionMatrix*mvPos;}`,Ma=`precision highp float;precision highp int;
#define GLSLIFY 1
void main(){gl_FragColor=vec4(1.,.9,.4,.7);}`,Sa=`precision highp float;precision highp int;
#define GLSLIFY 1
attribute vec2 uv;attribute vec3 position;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform mat3 normalMatrix;void main(){gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}`;const Bs={fragment:wa,vertex:ya},Rs={fragment:Ma,vertex:Sa},Hs={fragment:ka,vertex:xa},Ws=s=>{const e=new Pn(s),t=new Image;return t.onload=()=>e.image=t,t.src="assets/matcap_green.jpg",new it(s,{vertex:ba,fragment:_a,uniforms:{tMap:{value:e}},cullFace:null})};Ds();const ut=new Fs({width:100,height:100});new Wt({view:!1,defaultNodes:!1,registerNodes:Vt});const $a=new jn(ut.gl,{geometry:new Tn(ut.gl,{width:0,height:0,depth:0}),program:Ws(ut.gl)});$a.setParent(ut.scene);function La(s){let e,t,n,i,o,r,a,l,c,u=Zn(Date.now()-s[0].meta.lastSaved)+"",f,h,d,p,m,g,w,N,L;return{c(){e=_("div"),t=_("div"),n=E(),i=_("div"),o=_("div"),r=_("input"),l=E(),c=_("p"),f=K(u),h=K(" ago"),d=E(),p=_("div"),m=E(),g=_("div"),w=_("button"),w.textContent="delete",v(t,"class","project-image svelte-129g8uk"),v(r,"contenteditable",""),r.value=a=s[0].meta.name,v(r,"class","svelte-129g8uk"),v(c,"class","svelte-129g8uk"),v(o,"class","project-content-header svelte-129g8uk"),v(p,"class","project-content-main svelte-129g8uk"),v(w,"class","delete svelte-129g8uk"),v(g,"class","project-content-footer svelte-129g8uk"),v(i,"class","project-content svelte-129g8uk"),v(e,"class","project-wrapper svelte-129g8uk"),A(e,"active",s[0].meta.id===re.activeProjectId||s[1])},m(P,I){x(P,e,I),y(e,t),y(e,n),y(e,i),y(i,o),y(o,r),y(o,l),y(o,c),y(c,f),y(c,h),y(i,d),y(i,p),y(i,m),y(i,g),y(g,w),N||(L=[W(r,"blur",s[3]),W(r,"keydown",s[4]),W(w,"click",io(s[5])),W(e,"resize",alert),W(e,"click",s[6])],N=!0)},p(P,[I]){I&1&&a!==(a=P[0].meta.name)&&r.value!==a&&(r.value=a),I&1&&u!==(u=Zn(Date.now()-P[0].meta.lastSaved)+"")&&oe(f,u),I&3&&A(e,"active",P[0].meta.id===re.activeProjectId||P[1])},i:T,o:T,d(P){P&&k(e),N=!1,ze(L)}}}function Na(s,e,t){let{project:n}=e,i=!1;function o(){return t(1,i=!0),setTimeout(()=>{t(1,i=!1)},100),!0}const r=function(){const u=this.value.split(`
`).join("").trim();re.updateProjectMeta(n.meta.id,{name:u})},a=function(u){if(u.key==="Enter"){const f=this.value.split(`
`).join("").trim();this.blur(),u.preventDefault(),re.updateProjectMeta(n.meta.id,{name:f})}},l=()=>re.deleteProject(n.meta.id),c=()=>o()&&re.setActiveProject(n.meta.id);return s.$$set=u=>{"project"in u&&t(0,n=u.project)},[n,i,o,r,a,l,c]}class Pa extends X{constructor(e){super();q(this,e,Na,La,Z,{project:0})}}function Ys(s,e,t){const n=s.slice();return n[9]=e[t],n}function Ca(s){let e;return{c(){e=_("div"),v(e,"class","svelte-7wgw1o")},m(t,n){x(t,e,n)},p:T,d(t){t&&k(e)}}}function Ea(s){let e,t,n;return{c(){e=_("input"),v(e,"type","text"),v(e,"class","search svelte-7wgw1o"),v(e,"placeholder","Search")},m(i,o){x(i,e,o),Ie(e,s[1]),t||(n=W(e,"input",s[8]),t=!0)},p(i,o){o&2&&e.value!==i[1]&&Ie(e,i[1])},d(i){i&&k(e),t=!1,n()}}}function Gs(s){let e,t,n=s[2],i=[];for(let r=0;r<n.length;r+=1)i[r]=Xs(Ys(s,n,r));const o=r=>M(i[r],1,1,()=>{i[r]=null});return{c(){e=_("div");for(let r=0;r<i.length;r+=1)i[r].c();v(e,"class","project-list svelte-7wgw1o")},m(r,a){x(r,e,a);for(let l=0;l<i.length;l+=1)i[l].m(e,null);t=!0},p(r,a){if(a&6){n=r[2];let l;for(l=0;l<n.length;l+=1){const c=Ys(r,n,l);i[l]?(i[l].p(c,a),b(i[l],1)):(i[l]=Xs(c),i[l].c(),b(i[l],1),i[l].m(e,null))}for(Y(),l=n.length;l<i.length;l+=1)o(l);G()}},i(r){if(!t){for(let a=0;a<n.length;a+=1)b(i[a]);t=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)M(i[a]);t=!1},d(r){r&&k(e),fe(i,r)}}}function Us(s){let e,t;return e=new Pa({props:{project:s[9]}}),{c(){D(e.$$.fragment)},m(n,i){F(e,n,i),t=!0},p(n,i){const o={};i&4&&(o.project=n[9]),e.$set(o)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Xs(s){let e=qs(s[1],s[9]),t,n,i=e&&Us(s);return{c(){i&&i.c(),t=le()},m(o,r){i&&i.m(o,r),x(o,t,r),n=!0},p(o,r){r&6&&(e=qs(o[1],o[9])),e?i?(i.p(o,r),r&6&&b(i,1)):(i=Us(o),i.c(),b(i,1),i.m(t.parentNode,t)):i&&(Y(),M(i,1,1,()=>{i=null}),G())},i(o){n||(b(i),n=!0)},o(o){M(i),n=!1},d(o){i&&i.d(o),o&&k(t)}}}function ja(s){let e,t,n,i,o,r,a,l,c,u,f,h;t=new oo({}),t.$on("resize",s[6]);function d(w,N){return w[2].length>3?Ea:Ca}let p=d(s),m=p(s);l=new ks({props:{values:["Date","Test","Test2"]}});let g=s[0]&&Gs(s);return{c(){e=_("div"),D(t.$$.fragment),n=E(),i=_("div"),o=_("button"),o.innerHTML='<p class="svelte-7wgw1o">new</p>',r=E(),m.c(),a=E(),D(l.$$.fragment),c=E(),g&&g.c(),v(o,"class","add-new svelte-7wgw1o"),v(i,"class","header svelte-7wgw1o"),v(e,"class","project-manager-wrapper svelte-7wgw1o"),v(e,"style",`width: ${s[4]}px; height: ${s[5]}px;`)},m(w,N){x(w,e,N),F(t,e,null),y(e,n),y(e,i),y(i,o),y(i,r),m.m(i,null),y(i,a),F(l,i,null),y(e,c),g&&g.m(e,null),u=!0,f||(h=W(o,"click",s[7]),f=!0)},p(w,[N]){p===(p=d(w))&&m?m.p(w,N):(m.d(1),m=p(w),m&&(m.c(),m.m(i,a))),w[0]?g?(g.p(w,N),N&1&&b(g,1)):(g=Gs(w),g.c(),b(g,1),g.m(e,null)):g&&(Y(),M(g,1,1,()=>{g=null}),G())},i(w){u||(b(t.$$.fragment,w),b(l.$$.fragment,w),b(g),u=!0)},o(w){M(t.$$.fragment,w),M(l.$$.fragment,w),M(g),u=!1},d(w){w&&k(e),B(t),m.d(),B(l),g&&g.d(),f=!1,h()}}}function qs(s,e){if(!s||s.length<1)return!0;const t=e.meta.name.toLowerCase();return s=s.toLowerCase(),!!(t.includes(s)||s.includes(t))}function Ta(s,e,t){let n;const{store:i}=re;xe(s,i,h=>t(2,n=h));let{visible:o}=e,r;const{width:a,height:l}=de.get("projectManagerSize",{width:300,height:window.innerHeight/2}),c=h=>{o&&de.set("projectManagerSize",{width:h.detail.contentRect.width,height:h.detail.contentRect.height})},u=()=>re.createNew();function f(){r=this.value,t(1,r)}return s.$$set=h=>{"visible"in h&&t(0,o=h.visible)},[o,r,n,i,a,l,c,u,f]}class Ia extends X{constructor(e){super();q(this,e,Ta,ja,Z,{visible:0})}}const Gt={enableSync:{type:"boolean",defaultValue:!1},useRandomSeed:{type:"boolean",defaultValue:!1},theme:{type:"select",values:["dark","light"],defaultValue:"dark"},debug:{options:{reportError:{type:"boolean",defaultValue:!1},pd:{type:"boolean",defaultValue:!1},skeleton:{type:"boolean",defaultValue:!1},wireframe:{type:"boolean",defaultValue:!1},logLevel:{type:"number",min:0,max:2,defaultValue:1}}},ground:{options:{enabled:{type:"boolean",defaultValue:!0},resX:{type:"number",min:8,max:64,step:1,defaultValue:8},resY:{type:"number",min:8,max:64,step:1,defaultValue:16},scale:{type:"number",min:0,max:5,step:.1,defaultValue:1}}},leafRes:{type:"number",min:3,max:12,step:1,defaultValue:2},stemResX:{type:"number",min:3,max:32,step:1,defaultValue:3},stemResY:{type:"number",min:3,max:64,step:1,defaultValue:32}},Ut=ce("SettingsManager"),Zs=(s,e)=>{const t={};return Object.entries(s).forEach(([n,i])=>{var r;const o=e&&n in e?e[n]:void 0;"options"in i?t[n]=Zs(i.options,o):t[n]=(r=o!=null?o:i.defaultValue)!=null?r:i.value}),t},Xt=(s,e)=>{const t=e.shift();if(t&&t in s)return e.length?Xt(s[t],e):s[t]},Js=s=>s.includes(".")?s.split("."):[s];class Oa extends ge{constructor(){super();this.settings={},this.store=Le(this.settings),this._save=qn(()=>{ye.setItem("pt_settings",this.settings)},500,!1)}save(){var e,t,n;this.emit("settings",this.settings),ce.setLevel((n=(t=(e=this.settings)==null?void 0:e.debug)==null?void 0:t.logLevel)!=null?n:2),this.store.set(this.settings),Ut("save settings",this.settings),this._save()}async loadFromLocal(){var t,n,i;const e=await ye.getItem("pt_settings")||{};this.settings=Zs(Gt,e),ce.setLevel((i=(n=(t=this.settings)==null?void 0:t.debug)==null?void 0:n.logLevel)!=null?i:2),this.store.set(this.settings),Ut("loaded settings from local",this.settings),this.emit("settings",this.settings)}set(e,t){const n=Js(e);if(n.length>1){const i=n.pop(),o=Xt(this.settings,n);o&&(o[i]=t)}else this.settings[n[0]]=t;Ut(`Set ${n}`,t),this.emit(n+".update",t),this.save()}get(e){return Xt(this.settings,Js(e))}getSettings(){return JSON.parse(JSON.stringify(this.settings))}}let Va=0;const qt=de.get("sections")||[];var Aa=()=>{const s=Va++;return{get(){return qt[s]||!1},set(e){qt[s]=e,de.set("sections",qt)}}};function Ks(s,e,t){const n=s.slice();return n[9]=e[t][0],n[10]=e[t][1],n}function za(s){let e,t,n,i,o,r;const a=[{value:s[1]},s[6](s[4])];var l=Pt(s[4],s[1]);function c(u){let f={};for(let h=0;h<a.length;h+=1)f=Nn(f,a[h]);return{props:f}}return l&&(i=new l(c()),i.$on("change",s[8])),{c(){e=_("p"),t=K(s[2]),n=E(),i&&D(i.$$.fragment),o=le()},m(u,f){x(u,e,f),y(e,t),x(u,n,f),i&&F(i,u,f),x(u,o,f),r=!0},p(u,f){(!r||f&4)&&oe(t,u[2]);const h=f&82?$n(a,[f&2&&{value:u[1]},f&80&&Ln(u[6](u[4]))]):{};if(l!==(l=Pt(u[4],u[1]))){if(i){Y();const d=i;M(d.$$.fragment,1,0,()=>{B(d,1)}),G()}l?(i=new l(c()),i.$on("change",u[8]),D(i.$$.fragment),b(i.$$.fragment,1),F(i,o.parentNode,o)):i=null}else l&&i.$set(h)},i(u){r||(i&&b(i.$$.fragment,u),r=!0)},o(u){i&&M(i.$$.fragment,u),r=!1},d(u){u&&k(e),u&&k(n),u&&k(o),i&&B(i,u)}}}function Da(s){let e,t;return e=new $s({props:{name:s[2],open:s[5].get(),$$slots:{default:[Ra]},$$scope:{ctx:s}}}),e.$on("toggle",s[7]),{c(){D(e.$$.fragment)},m(n,i){F(e,n,i),t=!0},p(n,i){const o={};i&4&&(o.name=n[2]),i&8203&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Fa(s){let e;return{c(){e=_("p"),e.textContent="error"},m(t,n){x(t,e,n)},p:T,i:T,o:T,d(t){t&&k(e)}}}function Ba(s){let e,t;return e=new ei({props:{path:s[0],value:s[10],key:s[9],template:s[3].options[s[9]]}}),{c(){D(e.$$.fragment)},m(n,i){F(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.path=n[0]),i&2&&(o.value=n[10]),i&2&&(o.key=n[9]),i&10&&(o.template=n[3].options[n[9]]),e.$set(o)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Qs(s){let e,t,n,i;const o=[Ba,Fa],r=[];function a(l,c){return l[9]in l[3].options?0:1}return e=a(s),t=r[e]=o[e](s),{c(){t.c(),n=le()},m(l,c){r[e].m(l,c),x(l,n,c),i=!0},p(l,c){let u=e;e=a(l),e===u?r[e].p(l,c):(Y(),M(r[u],1,1,()=>{r[u]=null}),G(),t=r[e],t?t.p(l,c):(t=r[e]=o[e](l),t.c()),b(t,1),t.m(n.parentNode,n))},i(l){i||(b(t),i=!0)},o(l){M(t),i=!1},d(l){r[e].d(l),l&&k(n)}}}function Ra(s){let e,t,n=Object.entries(s[1]),i=[];for(let r=0;r<n.length;r+=1)i[r]=Qs(Ks(s,n,r));const o=r=>M(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=le()},m(r,a){for(let l=0;l<i.length;l+=1)i[l].m(r,a);x(r,e,a),t=!0},p(r,a){if(a&11){n=Object.entries(r[1]);let l;for(l=0;l<n.length;l+=1){const c=Ks(r,n,l);i[l]?(i[l].p(c,a),b(i[l],1)):(i[l]=Qs(c),i[l].c(),b(i[l],1),i[l].m(e.parentNode,e))}for(Y(),l=n.length;l<i.length;l+=1)o(l);G()}},i(r){if(!t){for(let a=0;a<n.length;a+=1)b(i[a]);t=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)M(i[a]);t=!1},d(r){fe(i,r),r&&k(e)}}}function Ha(s){let e,t,n,i;const o=[Da,za],r=[];function a(l,c){return l[3].options?0:1}return t=a(s),n=r[t]=o[t](s),{c(){e=_("div"),n.c(),v(e,"class","wrapper svelte-td5kv9")},m(l,c){x(l,e,c),r[t].m(e,null),i=!0},p(l,[c]){let u=t;t=a(l),t===u?r[t].p(l,c):(Y(),M(r[u],1,1,()=>{r[u]=null}),G(),n=r[t],n?n.p(l,c):(n=r[t]=o[t](l),n.c()),b(n,1),n.m(e,null))},i(l){i||(b(n),i=!0)},o(l){M(n),i=!1},d(l){l&&k(e),r[t].d()}}}function Wa(s,e,t){let{value:n}=e,{key:i}=e,{path:o=""}=e;o=o+(o.length?".":"")+i;let{template:r}=e,a=r;const l=Aa(),c=h=>{const d=te({},h);return delete d.defaultValue,delete d.type,d},u=({detail:h})=>l.set(h),f=h=>pe.set(o,h.detail);return s.$$set=h=>{"value"in h&&t(1,n=h.value),"key"in h&&t(2,i=h.key),"path"in h&&t(0,o=h.path),"template"in h&&t(3,r=h.template)},[o,n,i,r,a,l,c,u,f]}class ei extends X{constructor(e){super();q(this,e,Wa,Ha,Z,{value:1,key:2,path:0,template:3})}}function ti(s,e,t){const n=s.slice();return n[2]=e[t][0],n[3]=e[t][1],n}function ni(s){let e,t;return e=new ei({props:{key:s[2],value:s[3],template:Gt[s[2]]}}),{c(){D(e.$$.fragment)},m(n,i){F(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.key=n[2]),i&1&&(o.value=n[3]),i&1&&(o.template=Gt[n[2]]),e.$set(o)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Ya(s){let e,t,n=Object.entries(s[0]),i=[];for(let r=0;r<n.length;r+=1)i[r]=ni(ti(s,n,r));const o=r=>M(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=le()},m(r,a){for(let l=0;l<i.length;l+=1)i[l].m(r,a);x(r,e,a),t=!0},p(r,[a]){if(a&1){n=Object.entries(r[0]);let l;for(l=0;l<n.length;l+=1){const c=ti(r,n,l);i[l]?(i[l].p(c,a),b(i[l],1)):(i[l]=ni(c),i[l].c(),b(i[l],1),i[l].m(e.parentNode,e))}for(Y(),l=n.length;l<i.length;l+=1)o(l);G()}},i(r){if(!t){for(let a=0;a<n.length;a+=1)b(i[a]);t=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)M(i[a]);t=!1},d(r){fe(i,r),r&&k(e)}}}function Ga(s,e,t){let n;const i=pe.store;return xe(s,i,o=>t(0,n=o)),[n,i]}class Ua extends X{constructor(e){super();q(this,e,Ga,Ya,Z,{})}}function Xa(s){let e;return{c(){e=_("p"),e.textContent=`\u{1F389} Now you have all the knowledge to use the Plantarium. Have some fun with
  it.`,v(e,"class","svelte-1h3eb6p")},m(t,n){x(t,e,n)},p:T,i:T,o:T,d(t){t&&k(e)}}}class qa extends X{constructor(e){super();q(this,e,null,Xa,Z,{})}}function Za(s){let e,t,n,i,o,r,a,l;return i=new Fe({props:{name:"hand"}}),{c(){e=_("p"),t=K("Hey there "),n=_("span"),o=_("div"),D(i.$$.fragment),r=E(),a=_("p"),a.innerHTML=`Welcome to <b>Plantarium</b>, a tool for creating parametrized, procedural 3D
  plants.`,O(o,"display","contents"),O(o,"--stroke","#1a1a1a"),v(n,"class","svelte-1tutruj"),v(e,"class","svelte-1tutruj"),v(a,"class","svelte-1tutruj")},m(c,u){x(c,e,u),y(e,t),y(e,n),y(n,o),F(i,o,null),x(c,r,u),x(c,a,u),l=!0},p:T,i(c){l||(b(i.$$.fragment,c),l=!0)},o(c){M(i.$$.fragment,c),l=!1},d(c){c&&k(e),B(i),c&&k(r),c&&k(a)}}}class Ja extends X{constructor(e){super();q(this,e,null,Za,Z,{})}}const Zt=[{title:"Tutorial",description:Ja,options:{"lets go":()=>{}},type:"alert"},{description:`This is the <b>Plant View</b>, here you can explore the generated 3D model of your plant. 
      Try to change the view by:`,selector:".scene-wrapper",checks:[{description:"Clicking and dragging",setup:function(s,{c:e}){const t=document.querySelector(e.selector);t.getAttribute("setup")!=="true"&&(t.setAttribute("setup","true"),t.addEventListener("click",s,{once:!0}))}},{description:"Scrolling / Zooming",setup:(s,{c:e})=>{const t=document.querySelector(e.selector+"> canvas");t.getAttribute("setup")!=="true"&&(t.setAttribute("setup","true"),t.addEventListener("wheel",s,{once:!0,passive:!0}))}}]},{selector:"#nodesystem-view",description:"This is the <b>Node View</b>, here you define the way your plant looks. Try playing with some of the settings. If you are not so sure how this works, maybe visit the NodeTutorial"},{description:"This Button opens the project view",clickSelector:"header > div.left > div > div"},{description:"This is the ProjectView, here you can create/rename/delete projects.",selector:".project-manager-wrapper",checks:[{description:"create a new project",setup:(s,{pm:e})=>{e.once("new",s)}},{description:"rename the project",setup:(s,{pm:e})=>{e.once("update",s)}},{description:"delete the project",setup:(s,{pm:e})=>{e.once("delete",s)}}]},{description:"This Button opens the <b>Settings View</b>",clickSelector:"header > div.right > div:nth-child(2) .icon-wrapper"},{description:"This is the <b>SettingView</b>, here you can change some general settings.",selector:"header > div.right > div:nth-child(2) > div > div > div.wrapper.right.visible"},{description:"When you encounter something which doesnt work or you have an Idea for a new feature, use this button to report it.",clickSelector:"header > div.right > div:nth-child(1) > div"},{title:"Tutorial",description:qa,options:{"lets go":()=>{}},type:"alert"}];var We=Le(void 0);function si(s,e,t){const n=s.slice();return n[14]=e[t],n[15]=e,n[16]=t,n}function ii(s){let e,t,n,i,o,r,a,l,c=s[6].description+"",u,f,h,d,p,m=s[3]&&oi(s);o=new ve({props:{icon:"cross"}}),o.$on("click",s[11]);let g=s[1]&&ri(s),w=!s[4]&&ai(s),N=s[0]&&s[5]&&ci(s);return{c(){e=_("span"),m&&m.c(),t=E(),n=_("div"),i=_("div"),r=_("div"),D(o.$$.fragment),a=E(),l=_("p"),u=E(),g&&g.c(),f=E(),w&&w.c(),d=E(),N&&N.c(),O(r,"display","contents"),O(r,"--bg","transparent"),v(i,"class","close-wrapper svelte-zb5b7g"),v(l,"class","svelte-zb5b7g"),v(n,"class","wrapper svelte-zb5b7g"),v(n,"style",h=`left: ${s[8]}px; top: ${s[0].top+20}px;`),v(e,"class","svelte-zb5b7g"),A(e,"isLeft",s[2]),A(e,"hasElement",!!s[5]),A(e,"hasClick",!!s[3])},m(L,P){x(L,e,P),m&&m.m(e,null),y(e,t),y(e,n),y(n,i),y(i,r),F(o,r,null),y(n,a),y(n,l),l.innerHTML=c,y(n,u),g&&g.m(n,null),y(n,f),w&&w.m(n,null),y(e,d),N&&N.m(e,null),p=!0},p(L,P){L[3]?m?(m.p(L,P),P&8&&b(m,1)):(m=oi(L),m.c(),b(m,1),m.m(e,t)):m&&(Y(),M(m,1,1,()=>{m=null}),G()),(!p||P&64)&&c!==(c=L[6].description+"")&&(l.innerHTML=c),L[1]?g?(g.p(L,P),P&2&&b(g,1)):(g=ri(L),g.c(),b(g,1),g.m(n,f)):g&&(Y(),M(g,1,1,()=>{g=null}),G()),L[4]?w&&(Y(),M(w,1,1,()=>{w=null}),G()):w?(w.p(L,P),P&16&&b(w,1)):(w=ai(L),w.c(),b(w,1),w.m(n,null)),(!p||P&257&&h!==(h=`left: ${L[8]}px; top: ${L[0].top+20}px;`))&&v(n,"style",h),L[0]&&L[5]?N?N.p(L,P):(N=ci(L),N.c(),N.m(e,null)):N&&(N.d(1),N=null),P&4&&A(e,"isLeft",L[2]),P&32&&A(e,"hasElement",!!L[5]),P&8&&A(e,"hasClick",!!L[3])},i(L){p||(b(m),b(o.$$.fragment,L),b(g),b(w),p=!0)},o(L){M(m),M(o.$$.fragment,L),M(g),M(w),p=!1},d(L){L&&k(e),m&&m.d(),B(o),g&&g.d(),w&&w.d(),N&&N.d()}}}function oi(s){let e,t,n,i,o;return t=new Fe({props:{name:"pointing"}}),{c(){e=_("div"),n=_("div"),D(t.$$.fragment),O(n,"display","contents"),O(n,"--fill","#303030"),v(e,"class","click-wrapper svelte-zb5b7g"),v(e,"style",i=`top: ${s[0].top+20}px; left: ${s[8]-(s[2]?20:-0)}px;`)},m(r,a){x(r,e,a),y(e,n),F(t,n,null),o=!0},p(r,a){(!o||a&261&&i!==(i=`top: ${r[0].top+20}px; left: ${r[8]-(r[2]?20:-0)}px;`))&&v(e,"style",i)},i(r){o||(b(t.$$.fragment,r),o=!0)},o(r){M(t.$$.fragment,r),o=!1},d(r){r&&k(e),B(t)}}}function ri(s){let e,t,n=s[1],i=[];for(let r=0;r<n.length;r+=1)i[r]=li(si(s,n,r));const o=r=>M(i[r],1,1,()=>{i[r]=null});return{c(){e=_("div");for(let r=0;r<i.length;r+=1)i[r].c();v(e,"class","checks-wrapper svelte-zb5b7g")},m(r,a){x(r,e,a);for(let l=0;l<i.length;l+=1)i[l].m(e,null);t=!0},p(r,a){if(a&2){n=r[1];let l;for(l=0;l<n.length;l+=1){const c=si(r,n,l);i[l]?(i[l].p(c,a),b(i[l],1)):(i[l]=li(c),i[l].c(),b(i[l],1),i[l].m(e,null))}for(Y(),l=n.length;l<i.length;l+=1)o(l);G()}},i(r){if(!t){for(let a=0;a<n.length;a+=1)b(i[a]);t=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)M(i[a]);t=!1},d(r){r&&k(e),fe(i,r)}}}function li(s){let e,t,n,i,o,r=s[14].description+"",a,l,c;function u(h){s[12](h,s[14])}let f={};return s[14]._isCompleted!==void 0&&(f.value=s[14]._isCompleted),t=new Nt({props:f}),me.push(()=>On(t,"value",u)),{c(){e=_("div"),D(t.$$.fragment),i=E(),o=_("p"),a=K(r),l=E(),v(o,"class","svelte-zb5b7g"),v(e,"class","check-wrapper svelte-zb5b7g"),A(e,"is-completed",s[14]._isCompleted)},m(h,d){x(h,e,d),F(t,e,null),y(e,i),y(e,o),y(o,a),y(e,l),c=!0},p(h,d){s=h;const p={};!n&&d&2&&(n=!0,p.value=s[14]._isCompleted,In(()=>n=!1)),t.$set(p),(!c||d&2)&&r!==(r=s[14].description+"")&&oe(a,r),d&2&&A(e,"is-completed",s[14]._isCompleted)},i(h){c||(b(t.$$.fragment,h),c=!0)},o(h){M(t.$$.fragment,h),c=!1},d(h){h&&k(e),B(t)}}}function ai(s){let e,t,n,i;return t=new ve({props:{name:"next"}}),t.$on("click",s[13]),{c(){e=_("div"),n=_("div"),D(t.$$.fragment),O(n,"display","contents"),O(n,"--text","white"),O(n,"--bg","#303030"),v(e,"class","next-wrapper svelte-zb5b7g")},m(o,r){x(o,e,r),y(e,n),F(t,n,null),i=!0},p:T,i(o){i||(b(t.$$.fragment,o),i=!0)},o(o){M(t.$$.fragment,o),i=!1},d(o){o&&k(e),B(t)}}}function ci(s){let e,t;return{c(){e=_("span"),v(e,"class","highlighter  svelte-zb5b7g"),v(e,"style",t=`width: ${s[0].width}px; height: ${s[0].height}px; left: ${s[0].left}px; top: ${s[0].top}px;`)},m(n,i){x(n,e,i)},p(n,i){i&1&&t!==(t=`width: ${n[0].width}px; height: ${n[0].height}px; left: ${n[0].left}px; top: ${n[0].top}px;`)&&v(e,"style",t)},d(n){n&&k(e)}}}function Ka(s){let e,t,n=s[7]&&ii(s);return{c(){n&&n.c(),e=le()},m(i,o){n&&n.m(i,o),x(i,e,o),t=!0},p(i,[o]){i[7]?n?(n.p(i,o),o&128&&b(n,1)):(n=ii(i),n.c(),b(n,1),n.m(e.parentNode,e)):n&&(Y(),M(n,1,1,()=>{n=null}),G())},i(i){t||(b(n),t=!0)},o(i){M(n),t=!1},d(i){n&&n.d(i),i&&k(e)}}}function Qa(s,e,t){let n,i,o,r,a,l,c,u,f,h,d;xe(s,We,w=>t(6,d=w));const p=()=>{t(7,h=!1)};function m(w,N){s.$$.not_equal(N._isCompleted,w)&&(N._isCompleted=w,t(1,f),t(6,d))}const g=()=>Vn(We,d._isCompleted=!0,d);return s.$$.update=()=>{if(s.$$.dirty&64&&d&&d.clickSelector){const w=document.querySelector(d.clickSelector);w&&w.getAttribute("setup")!=="true"&&(w.setAttribute("setup","true"),w.addEventListener("click",()=>{setTimeout(()=>{Vn(We,d._isCompleted=!0,d)},20)},{once:!0}))}s.$$.dirty&64&&t(10,n=d&&d.selector),s.$$.dirty&1024&&t(5,i=n&&document.querySelector(n)),s.$$.dirty&32&&t(9,o=i&&i.getBoundingClientRect()),s.$$.dirty&64&&t(4,r=d&&d.clickSelector&&document.querySelector(d.clickSelector)),s.$$.dirty&16&&t(3,a=r&&r.getBoundingClientRect()),s.$$.dirty&520&&t(0,l=o||a),s.$$.dirty&1&&t(2,c=l&&l.left+l.width>window.innerWidth-100),s.$$.dirty&5&&t(8,u=l&&(c?l.left-10:l.left+l.width+10)),s.$$.dirty&64&&t(1,f=d&&d.checks),s.$$.dirty&66&&f&&f.forEach((w,N)=>(w._isSetup||(w._isSetup=!0,w.setup(()=>{t(1,f[N]._isCompleted=!0,f),t(1,f),t(6,d)},{pm:re,c:d})),w)),s.$$.dirty&1&&t(7,h=!!l)},[l,f,c,a,r,i,d,h,u,o,n,p,m,g]}class ec extends X{constructor(e){super();q(this,e,Qa,Ka,Z,{})}}const ui=["yes","next","lets go","okay"];let fi;const hi={handleReject:()=>{de.set("hasViewedTutorial",!0),Be("The tutorial is accessable under...")},currentIndex:0,previous:async function(){},next:async function(){var t;const s=Zt[this.currentIndex];if(this.currentIndex===Zt.length)return;if(s.setup&&await s.setup({pm:fi}),We.set(s),this.currentIndex++,this.currentIndex>2&&de.set("hasViewedTutorial",!0),s.title=(t=s.title)!=null?t:`Tutorial (${this.currentIndex}/${Zt.length})`,s.type==="alert"){const n=await rt(s.description,{title:s.title,type:"success",values:s.options?Object.keys(s.options):void 0,timeout:0});if(ui.includes(n.toString()))return this.next()}if(s.type==="toast"){const n=await Be(s.description,{values:s.options?Object.keys(s.options):void 0,timeout:0});if(ui.includes(n.toString()))return this.next()}const e=We.subscribe(n=>{n._isCompleted&&(e(),this.next())})},init:function({projectManager:s}){if(de.get("hasViewedTutorial"))return;fi=s;const e=`It looks like this is your first time here...
    Want to take a little tour? `;setTimeout(async()=>{await Be(e,{title:"",timeout:8e3,values:["nah","yes"]})==="yes"?this.next():this.handleReject()},1e4)},restart:function(){de.set("hasViewedTutorial",!1),this.currentIndex=0,this.next()}},pe=new Oa,re=new da;zn(pe.get("theme"));pe.on("enableSync.update",s=>{Be(`${s?"Enabled":"Disabled"} sync`,{type:"success"})});pe.on("theme.update",s=>{zn(s)});const Ye=new Wt({view:!0,defaultNodes:!1,registerNodes:Vt});re.on("load",s=>{Ye.load(s)});Ye.on("result",s=>re.setProject(s),50);Ye.on("save",s=>re.saveProject(s));pe.on("settings",s=>re.setSettings(s),50);hi.init({projectManager:re});const tc=(s,e)=>{const{ground:{scale:t=1,resX:n=16,resY:i=16}={}}=e||{},o=t!=null?t:0,r=n!=null?n:8,a=i!=null?i:8,l=sl(o,r,a);return js(s,l)};class nc{constructor(e,t){this.scene=e,this.gl=e.renderer.gl,this.initMeshes(),t.on("settings",this.setSettings.bind(this)),this.setSettings(pe.getSettings())}initMeshes(){const e=new ro(this.gl),t=or.texture(this.gl,"assets/rocky_dirt1-albedo.jpg",{wrapS:this.gl.REPEAT,wrapT:this.gl.REPEAT}),n=new it(this.gl,{vertex:Bs.vertex,fragment:Bs.fragment,uniforms:{uTime:{value:0},tMap:{value:t},uFogColor:{value:new lo("#ffffff")},uFogNear:{value:10},uFogFar:{value:30},texScale:{value:1}}});this.ground=this.scene.addMesh({geometry:e,program:n});const i=(o=0)=>{requestAnimationFrame(i),n.uniforms.uTime.value=o};i()}setSettings(e){var t,n;this.settings=e,((t=e==null?void 0:e.ground)==null?void 0:t.enabled)&&(this.ground.geometry=tc(this.gl,e)),this.ground.visible=!!((n=e==null?void 0:e.ground)==null?void 0:n.enabled)}}class sc{constructor(e,t){this.scene=e,this.pm=t,this.m={},this.gl=e.renderer.gl,this.initHTML(),this.initGeometry(),this.setSettings(pe.getSettings()),t.on("settings",this.setSettings.bind(this))}initHTML(){}initGeometry(){this.m.skeleton=this.scene.addMesh({geometry:new De(this.gl,{position:{size:3,data:new Float32Array([0,0,0])},uv:{size:2,data:new Float32Array([0,0])},index:{size:1,data:new Uint16Array([0])}}),program:new it(this.gl,{vertex:Rs.vertex,fragment:Rs.fragment,depthTest:!1}),mode:this.gl.LINES}),this.m.vertices=this.scene.addMesh({mode:this.gl.POINTS,geometry:new De(this.gl,{position:{size:3,data:new Float32Array(3)}}),program:new it(this.gl,{vertex:Hs.vertex,fragment:Hs.fragment,depthTest:!1,transparent:!0})})}setSettings(e){var t,n;this.settings=JSON.parse(JSON.stringify(e)),this.m.skeleton.visible=!!((t=this.settings.debug)==null?void 0:t.skeleton),this.m.vertices.visible=!!((n=this.settings.debug)==null?void 0:n.skeleton),this.update()}setPlant(e){this.plant=e,this.update()}update(e=this.plant,t=this.settings){var n,i;if(!(!e||!t)&&(e.allSkeletons||e.skeletons)&&((n=t.debug)==null?void 0:n.skeleton)){const o=(i=e.allSkeletons)!=null?i:e.skeletons;let r=0;for(const u of o)r+=u.length/4*3;const a=new Float32Array(r),l=new Uint32Array((r/3-1)*2);let c=0;o.forEach(u=>{const f=u.length/4;for(let h=0;h<f;h++)a[c*3+h*3+0]=u[h*4+0],a[c*3+h*3+1]=u[h*4+1],a[c*3+h*3+2]=u[h*4+2];for(let h=0;h<f-1;h++)l[c*2+h*2]=c+h,l[c*2+h*2+1]=c+h+1;c+=f}),this.m.skeleton.geometry=new De(this.gl,{position:{size:3,data:a},index:{size:1,data:l}}),this.m.vertices.geometry=new De(this.gl,{position:{size:3,data:a}})}}}const ic=ce("scene.foreground");class oc{constructor(e,t){this.scene=e,this.pm=t,this.worker=Ds(),this.gl=e.renderer.gl,this.initGeometry(),this.dbg=new sc(e,t),this.setSettings(pe.getSettings()),this.setPlant(t.getActiveProject()),this.pm.on("settings",this.setSettings.bind(this)),this.pm.on("plant",this.setPlant.bind(this))}initGeometry(){const e=new Tn(this.scene.gl,{width:0,height:0,depth:0});this.mesh=this.scene.addMesh({geometry:e,program:Ws(this.gl)})}setSettings(e){this.settings=JSON.parse(JSON.stringify(e)),this.update()}setPlant(e){!e||(this.plant=JSON.parse(JSON.stringify(e)),this.update())}async update(e=this.plant,t=this.settings){var n;if(!(!e||!t)){this.scene.isLoading.set(!0);try{const i=await this.worker.plant(e,t);if(!i)return;this.scene.isLoading.set(!1),this.mesh.mode=((n=t==null?void 0:t.debug)==null?void 0:n.wireframe)?this.gl.LINES:this.gl.TRIANGLES,this.dbg.setPlant(i),this.mesh.geometry=js(this.gl,i.geometry),this.mesh.geometry.computeBoundingBox(),this.scene.renderer.setControlTarget(this.mesh.geometry.bounds.center)}catch(i){ic.error(i),Be(i,{title:"Error [Generator]",values:["Report"]})}}}}class rc{constructor(e,t){this.isLoading=Le(!1),this.renderer=new Fs({canvas:t,camPos:de.get("camPos")}),this.renderer.on("camPos",n=>de.set("camPos",n)),this.renderer.handleResize(),this.scene=this.renderer.scene,this.gl=this.renderer.gl,this.wrapper=document.getElementById("canvas-wrapper"),this.bg=new nc(this,e),this.fg=new oc(this,e)}addMesh(e){const t=new jn(this.gl,e);return t.setParent(this.scene),t}}function di(s){let e,t,n=JSON.stringify(s[1],null,2)+"",i;return{c(){e=_("pre"),t=_("code"),i=K(n),v(t,"class","svelte-1gkla7w"),v(e,"class","svelte-1gkla7w")},m(o,r){x(o,e,r),y(e,t),y(t,i)},p(o,r){r&2&&n!==(n=JSON.stringify(o[1],null,2)+"")&&oe(i,n)},d(o){o&&k(e)}}}function pi(s){let e;return{c(){e=_("div"),e.innerHTML='<p class="svelte-1gkla7w">Is Loading</p>',v(e,"class","is-loading svelte-1gkla7w")},m(t,n){x(t,e,n)},d(t){t&&k(e)}}}function lc(s){var a,l;let e,t,n,i,o=((l=(a=s[4])==null?void 0:a.debug)==null?void 0:l.pd)&&s[1]&&di(s),r=s[5]&&pi();return{c(){e=_("div"),o&&o.c(),t=E(),n=_("canvas"),i=E(),r&&r.c(),v(n,"class","svelte-1gkla7w"),v(e,"class","scene-wrapper svelte-1gkla7w")},m(c,u){x(c,e,u),o&&o.m(e,null),y(e,t),y(e,n),s[8](n),y(e,i),r&&r.m(e,null)},p(c,[u]){var f,h;((h=(f=c[4])==null?void 0:f.debug)==null?void 0:h.pd)&&c[1]?o?o.p(c,u):(o=di(c),o.c(),o.m(e,t)):o&&(o.d(1),o=null),c[5]?r||(r=pi(),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i:T,o:T,d(c){c&&k(e),o&&o.d(),s[8](null),r&&r.d()}}}function ac(s,e,t){let n,i,o=T,r=()=>(o(),o=An(p,g=>t(4,i=g)),p),a,l=T,c=()=>(l(),l=An(n,g=>t(5,a=g)),n);s.$$.on_destroy.push(()=>o()),s.$$.on_destroy.push(()=>l());let u,f,h,d,p;function m(g){me[g?"unshift":"push"](()=>{u=g,t(0,u)})}return s.$$.update=()=>{s.$$.dirty&65&&u&&re&&!f&&t(6,f=new rc(re,u)),s.$$.dirty&64&&c(t(3,n=f&&f.isLoading)),s.$$.dirty&128&&re&&(d&&d(),t(7,d=re.on("save",g=>t(1,h=g))))},pe&&r(t(2,p=pe.store)),[u,h,p,n,i,a,f,d,m]}class cc extends X{constructor(e){super();q(this,e,ac,lc,Z,{})}}function uc(s){let e,t,n=(s[1]?"<b>[NEW]</b>":"")+"",i,o=s[0].subject+"",r;return{c(){e=_("p"),t=new ao,i=E(),r=K(o),t.a=i},m(a,l){x(a,e,l),t.m(n,e),y(e,i),y(e,r)},p(a,[l]){l&2&&n!==(n=(a[1]?"<b>[NEW]</b>":"")+"")&&t.p(n),l&1&&o!==(o=a[0].subject+"")&&oe(r,o)},i:T,o:T,d(a){a&&k(e)}}}function fc(s,e,t){let{commit:n}=e,{isNew:i=!1}=e;return s.$$set=o=>{"commit"in o&&t(0,n=o.commit),"isNew"in o&&t(1,i=o.isNew)},[n,i]}class hc extends X{constructor(e){super();q(this,e,fc,uc,Z,{commit:0,isNew:1})}}const mi=Le([]);let Jt=de.get("lastUpdated",Date.now());function dc(s){const e=Date.parse(s.date);return we(te({},s),{date:e,new:Jt<e})}let ft;async function pc(){const e=await(await fetch("commits.json")).json();return Jt=Date.now(),de.set("lastUpdated",Jt),e.map(t=>dc(t))}const mc=async()=>{if(ft)return ft;ft=pc();const s=await ft;mi.set(s)};function vi(s,e,t){const n=s.slice();return n[4]=e[t],n}function gi(s){let e,t=s[2](s[4].date)+"",n;return{c(){e=_("h3"),n=K(t),v(e,"class","svelte-13vbnbr")},m(i,o){x(i,e,o),y(e,n)},p(i,o){o&1&&t!==(t=i[2](i[4].date)+"")&&oe(n,t)},d(i){i&&k(e)}}}function wi(s){let e=s[1](s[4]),t,n,i,o=e&&gi(s);return n=new hc({props:{commit:s[4]}}),{c(){o&&o.c(),t=E(),D(n.$$.fragment)},m(r,a){o&&o.m(r,a),x(r,t,a),F(n,r,a),i=!0},p(r,a){a&1&&(e=r[1](r[4])),e?o?o.p(r,a):(o=gi(r),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null);const l={};a&1&&(l.commit=r[4]),n.$set(l)},i(r){i||(b(n.$$.fragment,r),i=!0)},o(r){M(n.$$.fragment,r),i=!1},d(r){o&&o.d(r),r&&k(t),B(n,r)}}}function vc(s){let e,t,n,i,o=s[0],r=[];for(let l=0;l<o.length;l+=1)r[l]=wi(vi(s,o,l));const a=l=>M(r[l],1,1,()=>{r[l]=null});return{c(){e=_("h1"),e.textContent="Changelog",t=E(),n=_("div");for(let l=0;l<r.length;l+=1)r[l].c();v(n,"class","svelte-13vbnbr")},m(l,c){x(l,e,c),x(l,t,c),x(l,n,c);for(let u=0;u<r.length;u+=1)r[u].m(n,null);i=!0},p(l,[c]){if(c&7){o=l[0];let u;for(u=0;u<o.length;u+=1){const f=vi(l,o,u);r[u]?(r[u].p(f,c),b(r[u],1)):(r[u]=wi(f),r[u].c(),b(r[u],1),r[u].m(n,null))}for(Y(),u=o.length;u<r.length;u+=1)a(u);G()}},i(l){if(!i){for(let c=0;c<o.length;c+=1)b(r[c]);i=!0}},o(l){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)M(r[c]);i=!1},d(l){l&&k(e),l&&k(t),l&&k(n),fe(r,l)}}}function gc(s,e,t){let n;xe(s,mi,a=>t(0,n=a)),mc();let i=n.length&&new Date(n[0].date).getDay();return[n,a=>{const l=new Date(a.date);return l.getDay()!=i?(i=l.getDay(),!0):!1},a=>new Date(a).toLocaleDateString()]}class wc extends X{constructor(e){super();q(this,e,gc,vc,Z,{})}}function yc(s){let e,t,n,i,o,r,a,l,c;function u(p){s[6](p)}let f={useActive:!0,icon:s[2],name:s[0]};s[4]!==void 0&&(f.active=s[4]),t=new ve({props:f}),me.push(()=>On(t,"active",u));var h=s[3];function d(p){return{props:{visible:p[4]}}}return h&&(l=new h(d(s))),{c(){e=_("div"),n=_("div"),D(t.$$.fragment),r=E(),a=_("div"),l&&D(l.$$.fragment),O(n,"display","contents"),O(n,"--bg","transparent"),O(n,"--text",o=s[5]["text-color"]),v(a,"class","wrapper svelte-1e2gb7"),A(a,"visible",s[4]),A(a,"right",s[1]),v(e,"class","icon-wrapper svelte-1e2gb7"),A(e,"active",s[4])},m(p,m){x(p,e,m),y(e,n),F(t,n,null),y(e,r),y(e,a),l&&F(l,a,null),c=!0},p(p,m){m&32&&o!==(o=p[5]["text-color"])&&O(n,"--text",o);const g={};m&4&&(g.icon=p[2]),m&1&&(g.name=p[0]),!i&&m&16&&(i=!0,g.active=p[4],In(()=>i=!1)),t.$set(g);const w={};if(m&16&&(w.visible=p[4]),h!==(h=p[3])){if(l){Y();const N=l;M(N.$$.fragment,1,0,()=>{B(N,1)}),G()}h?(l=new h(d(p)),D(l.$$.fragment),b(l.$$.fragment,1),F(l,a,null)):l=null}else h&&l.$set(w);m&16&&A(a,"visible",p[4]),m&2&&A(a,"right",p[1]),m&16&&A(e,"active",p[4])},i(p){c||(b(t.$$.fragment,p),l&&b(l.$$.fragment,p),c=!0)},o(p){M(t.$$.fragment,p),l&&M(l.$$.fragment,p),c=!1},d(p){p&&k(e),B(t),l&&B(l)}}}function _c(s){let e,t;return e=new co({props:{$$slots:{default:[yc]},$$scope:{ctx:s}}}),e.$on("clickoutside",s[7]),{c(){D(e.$$.fragment)},m(n,i){F(e,n,i),t=!0},p(n,[i]){const o={};i&319&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function bc(s,e,t){let n;xe(s,kt,f=>t(5,n=f));let{name:i}=e,{right:o=!1}=e,{icon:r}=e,{component:a}=e,l;function c(f){l=f,t(4,l)}const u=()=>t(4,l=!1);return s.$$set=f=>{"name"in f&&t(0,i=f.name),"right"in f&&t(1,o=f.right),"icon"in f&&t(2,r=f.icon),"component"in f&&t(3,a=f.component)},[i,o,r,a,l,n,c,u]}class Kt extends X{constructor(e){super();q(this,e,bc,_c,Z,{name:0,right:1,icon:2,component:3})}}function yi(s){let e,t,n,i,o,r,a;return t=new Nt({}),r=new $s({props:{name:"What is that?",$$slots:{default:[kc]},$$scope:{ctx:s}}}),{c(){e=_("div"),D(t.$$.fragment),n=E(),i=_("p"),i.textContent="Include Browser Features",o=E(),D(r.$$.fragment)},m(l,c){x(l,e,c),F(t,e,null),y(e,n),y(e,i),x(l,o,c),F(r,l,c),a=!0},i(l){a||(b(t.$$.fragment,l),b(r.$$.fragment,l),a=!0)},o(l){M(t.$$.fragment,l),M(r.$$.fragment,l),a=!1},d(l){l&&k(e),B(t),l&&k(o),B(r,l)}}}function kc(s){let e;return{c(){e=_("ul"),e.innerHTML=`<li>Du</li> 
      <li>Du</li> 
      <li>Du</li> 
      <li>Du</li>`},m(t,n){x(t,e,n)},d(t){t&&k(e)}}}function xc(s){let e,t,n,i,o,r,a,l,c=s[0]==="bug"&&yi(s);return r=new ve({props:{name:"Submit"}}),{c(){e=_("label"),e.textContent="Description",t=E(),n=_("input"),i=E(),c&&c.c(),o=E(),a=_("div"),D(r.$$.fragment),v(e,"for","description"),v(n,"type","text"),v(n,"id","description"),O(a,"display","contents"),O(a,"--bg","white"),O(a,"--text-color","#303030")},m(u,f){x(u,e,f),x(u,t,f),x(u,n,f),x(u,i,f),c&&c.m(u,f),x(u,o,f),x(u,a,f),F(r,a,null),l=!0},p(u,[f]){u[0]==="bug"?c?f&1&&b(c,1):(c=yi(u),c.c(),b(c,1),c.m(o.parentNode,o)):c&&(Y(),M(c,1,1,()=>{c=null}),G())},i(u){l||(b(c),b(r.$$.fragment,u),l=!0)},o(u){M(c),M(r.$$.fragment,u),l=!1},d(u){u&&k(e),u&&k(t),u&&k(n),u&&k(i),c&&c.d(u),u&&k(o),u&&k(a),B(r,u)}}}function Mc(s,e,t){let{mode:n="bug"}=e;return s.$$set=i=>{"mode"in i&&t(0,n=i.mode)},[n]}class _i extends X{constructor(e){super();q(this,e,Mc,xc,Z,{mode:0})}}function Sc(s){let e,t,n,i,o,r,a,l,c,u,f,h,d;return t=new ve({props:{name:"Tutorial",icon:"hand"}}),t.$on("click",s[0]),o=new ve({props:{name:"Report Bug",icon:"exclamation"}}),o.$on("click",s[1]),l=new ve({props:{name:"Request Feature"}}),l.$on("click",s[2]),f=new ve({props:{name:"Changelog"}}),f.$on("click",s[3]),{c(){e=_("div"),n=_("div"),D(t.$$.fragment),i=E(),r=_("div"),D(o.$$.fragment),a=E(),c=_("div"),D(l.$$.fragment),u=E(),h=_("div"),D(f.$$.fragment),O(n,"display","contents"),O(n,"--bg","#303030"),O(n,"--text","white"),O(r,"display","contents"),O(r,"--bg","#303030"),O(r,"--text","white"),O(c,"display","contents"),O(c,"--bg","#303030"),O(c,"--text","white"),O(h,"display","contents"),O(h,"--bg","#303030"),O(h,"--text","white"),v(e,"class","svelte-4ypi13")},m(p,m){x(p,e,m),y(e,n),F(t,n,null),y(e,i),y(e,r),F(o,r,null),y(e,a),y(e,c),F(l,c,null),y(e,u),y(e,h),F(f,h,null),d=!0},p:T,i(p){d||(b(t.$$.fragment,p),b(o.$$.fragment,p),b(l.$$.fragment,p),b(f.$$.fragment,p),d=!0)},o(p){M(t.$$.fragment,p),M(o.$$.fragment,p),M(l.$$.fragment,p),M(f.$$.fragment,p),d=!1},d(p){p&&k(e),B(t),B(o),B(l),B(f)}}}function $c(s){return[()=>hi.restart(),()=>rt(_i,{timeout:0,title:"Report Bug",type:"error",props:{mode:"bug"}}),()=>rt(_i,{timeout:0,title:"Request Feature",props:{mode:"feat"}}),()=>rt(wc,{timeout:0})]}class Lc extends X{constructor(e){super();q(this,e,$c,Sc,Z,{})}}function Nc(s){var m,g;let e,t,n,i,o,r=((g=(m=s[0])==null?void 0:m.meta.name)!=null?g:"")+"",a,l,c,u,f,h,d,p;return n=new Kt({props:{icon:"folder",name:"Projects",component:Ia}}),u=new Kt({props:{icon:"question",component:Lc,right:!0}}),h=new Kt({props:{icon:"cog",component:Ua,right:!0}}),{c(){e=_("header"),t=_("div"),D(n.$$.fragment),i=E(),o=_("h3"),a=K(r),l=E(),c=_("div"),D(u.$$.fragment),f=E(),d=_("div"),D(h.$$.fragment),v(t,"class","left svelte-1dyrwb1"),v(o,"class","svelte-1dyrwb1"),O(d,"display","contents"),O(d,"--min-width","250px"),v(c,"class","right svelte-1dyrwb1"),v(e,"class","svelte-1dyrwb1")},m(w,N){x(w,e,N),y(e,t),F(n,t,null),y(e,i),y(e,o),y(o,a),y(e,l),y(e,c),F(u,c,null),y(c,f),y(c,d),F(h,d,null),p=!0},p(w,[N]){var L,P;(!p||N&1)&&r!==(r=((P=(L=w[0])==null?void 0:L.meta.name)!=null?P:"")+"")&&oe(a,r)},i(w){p||(b(n.$$.fragment,w),b(u.$$.fragment,w),b(h.$$.fragment,w),p=!0)},o(w){M(n.$$.fragment,w),M(u.$$.fragment,w),M(h.$$.fragment,w),p=!1},d(w){w&&k(e),B(n),B(u),B(h)}}}function Pc(s,e,t){let n;const i=re.activeProject;return xe(s,i,o=>t(0,n=o)),[n,i]}class Cc extends X{constructor(e){super();q(this,e,Pc,Nc,Z,{})}}function Ec(s){let e,t,n,i,o,r,a,l,c,u,f,h,d,p,m;return e=new yo({}),n=new Uo({}),o=new Sr({}),a=new ec({}),c=new Cc({}),h=new cc({}),{c(){D(e.$$.fragment),t=E(),D(n.$$.fragment),i=E(),D(o.$$.fragment),r=E(),D(a.$$.fragment),l=E(),D(c.$$.fragment),u=E(),f=_("main"),D(h.$$.fragment),d=E(),p=_("div"),v(p,"id","nodesystem-view"),v(p,"class","svelte-nr2iax"),v(f,"class","svelte-nr2iax")},m(g,w){F(e,g,w),x(g,t,w),F(n,g,w),x(g,i,w),F(o,g,w),x(g,r,w),F(a,g,w),x(g,l,w),F(c,g,w),x(g,u,w),x(g,f,w),F(h,f,null),y(f,d),y(f,p),s[1](p),m=!0},p:T,i(g){m||(b(e.$$.fragment,g),b(n.$$.fragment,g),b(o.$$.fragment,g),b(a.$$.fragment,g),b(c.$$.fragment,g),b(h.$$.fragment,g),m=!0)},o(g){M(e.$$.fragment,g),M(n.$$.fragment,g),M(o.$$.fragment,g),M(a.$$.fragment,g),M(c.$$.fragment,g),M(h.$$.fragment,g),m=!1},d(g){B(e,g),g&&k(t),B(n,g),g&&k(i),B(o,g),g&&k(r),B(a,g),g&&k(l),B(c,g),g&&k(u),g&&k(f),B(h),s[1](null)}}}function jc(s,e,t){let n;Qe(async()=>{n.append(Ye.view.wrapper),Ye.view.handleResize()});function i(o){me[o?"unshift":"push"](()=>{n=o,t(0,n)})}return[n,i]}class Tc extends X{constructor(e){super();q(this,e,jc,Ec,Z,{})}}function Ic(s){return{c:T,m:T,i:T,o:T,d:T}}function Oc(s){let e,t;return e=new Tc({}),{c(){D(e.$$.fragment)},m(n,i){F(e,n,i),t=!0},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Vc(s){let e;return{c(){e=_("p"),e.textContent="Loading"},m(t,n){x(t,e,n)},i:T,o:T,d(t){t&&k(e)}}}function Ac(s){let e,t,n={ctx:s,current:null,token:null,hasCatch:!1,pending:Vc,then:Oc,catch:Ic,value:0,blocks:[,,,]};return uo(pe.loadFromLocal(),n),{c(){e=le(),n.block.c()},m(i,o){x(i,e,o),n.block.m(i,n.anchor=o),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(i,[o]){s=i},i(i){t||(b(n.block),t=!0)},o(i){for(let o=0;o<3;o+=1){const r=n.blocks[o];M(r)}t=!1},d(i){i&&k(e),n.block.d(i),n.token=null,n=null}}}class zc extends X{constructor(e){super();q(this,e,null,Ac,Z,{})}}let Dc;try{Dc=new zc({target:document.body})}catch(s){console.log(s)}
//# sourceMappingURL=index.c561f44c.js.map
