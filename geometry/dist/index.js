var yn=Object.create;var Le=Object.defineProperty;var xn=Object.getOwnPropertyDescriptor;var vn=Object.getOwnPropertyNames;var gn=Object.getPrototypeOf,bn=Object.prototype.hasOwnProperty;var Z=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Pe=(e,t)=>{for(var n in t)Le(e,n,{get:t[n],enumerable:!0})},_n=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of vn(t))!bn.call(e,i)&&i!==n&&Le(e,i,{get:()=>t[i],enumerable:!(r=xn(t,i))||r.enumerable});return e};var dt=(e,t,n)=>(n=e!=null?yn(gn(e)):{},_n(t||!e||!e.__esModule?Le(n,"default",{value:e,enumerable:!0}):n,e));var Tt=Z((Ge,Ue)=>{(function(e,t){typeof define=="function"&&define.amd?define([],t):typeof Ge<"u"?t():(t(),e.FileSaver={})})(Ge,function(){"use strict";function e(o,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}function t(o,l,c){var f=new XMLHttpRequest;f.open("GET",o),f.responseType="blob",f.onload=function(){a(f.response,l,c)},f.onerror=function(){console.error("could not download file")},f.send()}function n(o){var l=new XMLHttpRequest;l.open("HEAD",o,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function r(o){try{o.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),o.dispatchEvent(l)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,s=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(o,l,c){var f=i.URL||i.webkitURL,d=document.createElement("a");l=l||o.name||"download",d.download=l,d.rel="noopener",typeof o=="string"?(d.href=o,d.origin===location.origin?r(d):n(d.href)?t(o,l,c):r(d,d.target="_blank")):(d.href=f.createObjectURL(o),setTimeout(function(){f.revokeObjectURL(d.href)},4e4),setTimeout(function(){r(d)},0))}:"msSaveOrOpenBlob"in navigator?function(o,l,c){if(l=l||o.name||"download",typeof o!="string")navigator.msSaveOrOpenBlob(e(o,c),l);else if(n(o))t(o,l,c);else{var f=document.createElement("a");f.href=o,f.target="_blank",setTimeout(function(){r(f)})}}:function(o,l,c,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof o=="string")return t(o,l,c);var d=o.type==="application/octet-stream",u=/constructor/i.test(i.HTMLElement)||i.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||d&&u||s)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var x=y.result;x=p?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=x:location=x,f=null},y.readAsDataURL(o)}else{var m=i.URL||i.webkitURL,h=m.createObjectURL(o);f?f.location=h:location.href=h,f=null,setTimeout(function(){m.revokeObjectURL(h)},4e4)}});i.saveAs=a.saveAs=a,typeof Ue<"u"&&(Ue.exports=a)})});var Me=Z(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});function P1(e){var t=new Uint32Array(1);return t[0]=e[0]*1664525+1013904223,t}nt.default=P1});var tn=Z(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.makeNoise2D=void 0;var Ae=Me(),N1=1/47,it=(Math.sqrt(2+1)-1)/2,I1=(1/Math.sqrt(2+1)-1)/2;function Xt(e,t,n){return{dx:-t-e*it,dy:-n-e*it,xsb:t,ysb:n}}function V1(e){for(var t=[],n=0;n<le.length;n+=4){for(var r=j1[le[n]],i=null,s=null,a=0;a<r.length;a+=3)s=Xt(r[a],r[a+1],r[a+2]),i===null?t[n/4]=s:i.next=s,i=s;s.next=Xt(le[n+1],le[n+2],le[n+3])}for(var o=[],n=0;n<rt.length;n+=2)o[rt[n]]=t[rt[n+1]];for(var l=new Uint8Array(256),c=new Uint8Array(256),f=new Uint8Array(256),n=0;n<256;n++)f[n]=n;var d=new Uint32Array(1);d[0]=e,d=Ae.default(Ae.default(Ae.default(d)));for(var n=255;n>=0;n--){d=Ae.default(d);var u=new Uint32Array(1);u[0]=(d[0]+31)%(n+1),u[0]<0&&(u[0]+=n+1),l[n]=f[u[0]],c[n]=l[n]&14,f[u[0]]=f[n]}return function(p,y){for(var m=(p+y)*I1,h=p+m,x=y+m,w=Math.floor(h),_=Math.floor(x),g=(w+_)*it,v=p-(w+g),b=y-(_+g),E=h-w,M=x-_,z=E+M,T=E-M+1|z<<1|z+M<<2|z+E<<4,O=0,F=o[T];F!==void 0;F=F.next){var D=v+F.dx,A=b+F.dy,R=2-D*D-A*A;if(R>0){var P=w+F.xsb,k=_+F.ysb,I=l[P&255],N=c[I+k&255],Y=en[N]*D+en[N+1]*A;O+=R*R*R*R*Y}}return O*N1}}Fe.makeNoise2D=V1;var j1=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],en=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],rt=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],le=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0]});var nn=Z(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.makeNoise3D=void 0;var Ee=Me(),C1=1/103,ze=(Math.sqrt(3+1)-1)/3,q1=(1/Math.sqrt(3+1)-1)/3;function st(e,t,n,r){return{dx:-t-e*ze,dy:-n-e*ze,dz:-r-e*ze,xsb:t,ysb:n,zsb:r}}function G1(e){for(var t=[],n=0;n<C.length;n+=9){for(var r=U1[C[n]],i=null,s=null,a=0;a<r.length;a+=4)s=st(r[a],r[a+1],r[a+2],r[a+3]),i===null?t[n/9]=s:i.next=s,i=s;s.next=st(C[n+1],C[n+2],C[n+3],C[n+4]),s.next.next=st(C[n+5],C[n+6],C[n+7],C[n+8])}for(var o=[],n=0;n<ot.length;n+=2)o[ot[n]]=t[ot[n+1]];for(var l=new Uint8Array(256),c=new Uint8Array(256),f=new Uint8Array(256),n=0;n<256;n++)f[n]=n;var d=new Uint32Array(1);d[0]=e,d=Ee.default(Ee.default(Ee.default(d)));for(var n=255;n>=0;n--){d=Ee.default(d);var u=new Uint32Array(1);u[0]=(d[0]+31)%(n+1),u[0]<0&&(u[0]+=n+1),l[n]=f[u[0]],c[n]=l[n]%24*3,f[u[0]]=f[n]}return function(p,y,m){for(var h=(p+y+m)*q1,x=p+h,w=y+h,_=m+h,g=Math.floor(x),v=Math.floor(w),b=Math.floor(_),E=(g+v+b)*ze,M=p-(g+E),z=y-(v+E),T=m-(b+E),O=x-g,F=w-v,D=_-b,A=O+F+D,R=F-D+1|O-F+1<<1|O-D+1<<2|A<<3|A+D<<5|A+F<<7|A+O<<9,P=0,k=o[R];k!==void 0;k=k.next){var I=M+k.dx,N=z+k.dy,Y=T+k.dz,U=2-I*I-N*N-Y*Y;if(U>0){var V=g+k.xsb,ne=v+k.ysb,re=b+k.zsb,ie=l[V&255],se=l[ie+ne&255],q=c[se+re&255],ke=at[q]*I+at[q+1]*N+at[q+2]*Y;P+=U*U*U*U*ke}}return P*C1}}Oe.makeNoise3D=G1;var U1=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],at=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],ot=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],C=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0]});var rn=Z($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.makeNoise4D=void 0;var Se=Me(),B1=1/30,ce=(Math.sqrt(4+1)-1)/4,H1=(1/Math.sqrt(4+1)-1)/4;function Te(e,t,n,r,i){return{dx:-t-e*ce,dy:-n-e*ce,dz:-r-e*ce,dw:-i-e*ce,xsb:t,ysb:n,zsb:r,wsb:i}}function Y1(e){for(var t=[],n=0;n<L.length;n+=16){for(var r=W1[L[n]],i=null,s=null,a=0;a<r.length;a+=5)s=Te(r[a],r[a+1],r[a+2],r[a+3],r[a+4]),i===null?t[n/16]=s:i.next=s,i=s;s.next=Te(L[n+1],L[n+2],L[n+3],L[n+4],L[n+5]),s.next.next=Te(L[n+6],L[n+7],L[n+8],L[n+9],L[n+10]),s.next.next.next=Te(L[n+11],L[n+12],L[n+13],L[n+14],L[n+15])}for(var o=[],n=0;n<lt.length;n+=2)o[lt[n]]=t[lt[n+1]];for(var l=new Uint8Array(256),c=new Uint8Array(256),f=new Uint8Array(256),n=0;n<256;n++)f[n]=n;var d=new Uint32Array(1);d[0]=e,d=Se.default(Se.default(Se.default(d)));for(var n=255;n>=0;n--){d=Se.default(d);var u=new Uint32Array(1);u[0]=(d[0]+31)%(n+1),u[0]<0&&(u[0]+=n+1),l[n]=f[u[0]],c[n]=l[n]&252,f[u[0]]=f[n]}return function(p,y,m,h){for(var x=(p+y+m+h)*H1,w=p+x,_=y+x,g=m+x,v=h+x,b=Math.floor(w),E=Math.floor(_),M=Math.floor(g),z=Math.floor(v),T=(b+E+M+z)*ce,O=p-(b+T),F=y-(E+T),D=m-(M+T),A=h-(z+T),R=w-b,P=_-E,k=g-M,I=v-z,N=R+P+k+I,Y=k-I+1|P-k+1<<1|P-I+1<<2|R-P+1<<3|R-k+1<<4|R-I+1<<5|N<<6|N+I<<8|N+k<<11|N+P<<14|N+R<<17,U=0,V=o[Y];V!==void 0;V=V.next){var ne=O+V.dx,re=F+V.dy,ie=D+V.dz,se=A+V.dw,q=2-ne*ne-re*re-ie*ie-se*se;if(q>0){var ke=b+V.xsb,cn=E+V.ysb,fn=M+V.zsb,un=z+V.wsb,dn=l[ke&255],hn=l[dn+cn&255],pn=l[hn+fn&255],ue=c[pn+un&255],mn=De[ue]*ne+De[ue+1]*re+De[ue+2]*ie+De[ue+3]*se;U+=q*q*q*q*mn}}return U*B1}}$e.makeNoise4D=Y1;var W1=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],De=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],lt=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],L=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1]});var sn=Z(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.makeNoise4D=B.makeNoise3D=B.makeNoise2D=void 0;var Q1=tn();Object.defineProperty(B,"makeNoise2D",{enumerable:!0,get:function(){return Q1.makeNoise2D}});var Z1=nn();Object.defineProperty(B,"makeNoise3D",{enumerable:!0,get:function(){return Z1.makeNoise3D}});var J1=rn();Object.defineProperty(B,"makeNoise4D",{enumerable:!0,get:function(){return J1.makeNoise4D}})});function Ne(e){let t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function de(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function ht(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function Ie(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Ve(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function pt(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function mt(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function pe(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function yt(e,t){let n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}function xt(e,t){let n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function je(e){let t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function vt(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function gt(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function he(e,t){let n=t[0],r=t[1],i=t[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e}function Ce(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function qe(e,t,n){let r=t[0],i=t[1],s=t[2],a=n[0],o=n[1],l=n[2];return e[0]=i*l-s*o,e[1]=s*a-r*l,e[2]=r*o-i*a,e}function bt(e,t,n,r){let i=t[0],s=t[1],a=t[2];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=a+r*(n[2]-a),e}function _t(e,t,n){let r=t[0],i=t[1],s=t[2],a=n[3]*r+n[7]*i+n[11]*s+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/a,e}function wt(e,t,n){let r=t[0],i=t[1],s=t[2],a=n[3]*r+n[7]*i+n[11]*s+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*s)/a,e[1]=(n[1]*r+n[5]*i+n[9]*s)/a,e[2]=(n[2]*r+n[6]*i+n[10]*s)/a,e}function Mt(e,t,n){let r=t[0],i=t[1],s=t[2],a=n[0],o=n[1],l=n[2],c=n[3],f=o*s-l*i,d=l*r-a*s,u=a*i-o*r,p=o*u-l*d,y=l*f-a*u,m=a*d-o*f,h=c*2;return f*=h,d*=h,u*=h,p*=2,y*=2,m*=2,e[0]=r+f+p,e[1]=i+d+y,e[2]=s+u+m,e}var At=function(){let e=[0,0,0],t=[0,0,0];return function(n,r){de(e,n),de(t,r),he(e,e),he(t,t);let i=Ce(e,t);return i>1?0:i<-1?Math.PI:Math.acos(i)}}();function Ft(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}var Et=e=>!!e.length;var S=class extends Array{constructor(t=0,n=t,r=t){return super(t,n,r),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(t){this[0]=t}set y(t){this[1]=t}set z(t){this[2]=t}set(t,n=t,r=t){return Et(t)?this.copy(t):(ht(this,t,n,r),this)}copy(t){return de(this,t),this}add(t,n){return n?Ie(this,t,n):Ie(this,this,t),this}sub(t,n){return n?Ve(this,t,n):Ve(this,this,t),this}multiply(t){return t.length?pt(this,this,t):pe(this,this,t),this}divide(t){return t.length?mt(this,this,t):pe(this,this,1/t),this}inverse(t=this){return gt(this,t),this}len(){return Ne(this)}distance(t){return t?yt(this,t):Ne(this)}squaredLen(){return je(this)}squaredDistance(t){return t?xt(this,t):je(this)}negate(t=this){return vt(this,t),this}cross(t,n){return n?qe(this,t,n):qe(this,this,t),this}scale(t){return pe(this,this,t),this}normalize(){return he(this,this),this}dot(t){return Ce(this,t)}equals(t){return Ft(this,t)}applyMatrix4(t){return _t(this,this,t),this}scaleRotateMatrix4(t){return wt(this,this,t),this}applyQuaternion(t){return Mt(this,this,t),this}angle(t){return At(this,t)}lerp(t,n){return bt(this,this,t,n),this}clone(){return new S(this[0],this[1],this[2])}fromArray(t,n=0){return this[0]=t[n],this[1]=t[n+1],this[2]=t[n+2],this}toArray(t=[],n=0){return t[n]=this[0],t[n+1]=this[1],t[n+2]=this[2],t}transformDirection(t){let n=this[0],r=this[1],i=this[2];return this[0]=t[0]*n+t[4]*r+t[8]*i,this[1]=t[1]*n+t[5]*r+t[9]*i,this[2]=t[2]*n+t[6]*r+t[10]*i,this.normalize()}};var W=new S,Mn=1,An=1,zt=!1,me=class{constructor(t,n={}){this.raycast="box",t.canvas||console.error("gl not passed as fist argument to Geometry"),this.gl=t,this.attributes=n,this.id=Mn++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let r in n)this.addAttribute(r,n[r])}addAttribute(t,n){if(this.attributes[t]=n,n.id=An++,n.size=n.size||1,n.type=n.type||(n.data.constructor===Float32Array?this.gl.FLOAT:n.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),n.target=t==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,n.normalized=n.normalized||!1,n.stride=n.stride||0,n.offset=n.offset||0,n.count=n.count||(n.stride?n.data.byteLength/n.stride:n.data.length/n.size),n.divisor=n.instanced||0,n.needsUpdate=!1,n.buffer||(n.buffer=this.gl.createBuffer(),this.updateAttribute(n)),n.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==n.count*n.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,n.count*n.divisor);this.instancedCount=n.count*n.divisor}else t==="index"?this.drawRange.count=n.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,n.count))}updateAttribute(t){this.glState.boundBuffer!==t.buffer&&(this.gl.bindBuffer(t.target,t.buffer),this.glState.boundBuffer=t.buffer),this.gl.bufferData(t.target,t.data,this.gl.STATIC_DRAW),t.needsUpdate=!1}setIndex(t){this.addAttribute("index",t)}setDrawRange(t,n){this.drawRange.start=t,this.drawRange.count=n}setInstancedCount(t){this.instancedCount=t}createVAO(t){this.VAOs[t.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.bindAttributes(t)}bindAttributes(t){t.attributeLocations.forEach((n,{name:r,type:i})=>{if(!this.attributes[r]){console.warn(`active attribute ${r} not being supplied`);return}let s=this.attributes[r];this.gl.bindBuffer(s.target,s.buffer),this.glState.boundBuffer=s.buffer;let a=1;i===35674&&(a=2),i===35675&&(a=3),i===35676&&(a=4);let o=s.size/a,l=a===1?0:a*a*a,c=a===1?0:a*a;for(let f=0;f<a;f++)this.gl.vertexAttribPointer(n+f,o,s.type,s.normalized,s.stride+l,s.offset+f*c),this.gl.enableVertexAttribArray(n+f),this.gl.renderer.vertexAttribDivisor(n+f,s.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:t,mode:n=this.gl.TRIANGLES}){this.gl.renderer.currentGeometry!==`${this.id}_${t.attributeOrder}`&&(this.VAOs[t.attributeOrder]||this.createVAO(t),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${t.attributeOrder}`),t.attributeLocations.forEach((r,{name:i})=>{let s=this.attributes[i];s.needsUpdate&&this.updateAttribute(s)}),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(n,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*2,this.instancedCount):this.gl.renderer.drawArraysInstanced(n,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(n,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*2):this.gl.drawArrays(n,this.drawRange.start,this.drawRange.count)}getPosition(){let t=this.attributes.position;if(t.data)return t;if(!zt)return console.warn("No position buffer data found to compute bounds"),zt=!0}computeBoundingBox(t=null){t||(t=this.getPosition());let n=t.data,r=t.offset||0,i=t.stride||t.size;this.bounds||(this.bounds={min:new S,max:new S,center:new S,scale:new S,radius:1/0});let s=this.bounds.min,a=this.bounds.max,o=this.bounds.center,l=this.bounds.scale;s.set(1/0),a.set(-1/0);for(let c=r,f=n.length;c<f;c+=i){let d=n[c],u=n[c+1],p=n[c+2];s.x=Math.min(d,s.x),s.y=Math.min(u,s.y),s.z=Math.min(p,s.z),a.x=Math.max(d,a.x),a.y=Math.max(u,a.y),a.z=Math.max(p,a.z)}l.sub(a,s),o.add(s,a).divide(2)}computeBoundingSphere(t=null){t||(t=this.getPosition());let n=t.data,r=t.offset||0,i=t.stride||t.size;this.bounds||this.computeBoundingBox(t);let s=0;for(let a=r,o=n.length;a<o;a+=i)W.fromArray(n,a),s=Math.max(s,this.bounds.center.squaredDistance(W));this.bounds.radius=Math.sqrt(s)}computeVertexNormals(){let t=this.attributes.position;if(!t)return;let n=this.attributes.normal;n?n.data.fill(0):(this.addAttribute("normal",{size:3,data:new Float32Array(t.count*3)}),n=this.attributes.normal);let r=new S,i=new S,s=new S,a=new S,o=new S,l=new S,c=new S,f=new S,d=this.attributes.index;if(d){let u,p,y;for(let m=0,h=d.count;m<h;m+=3)u=d.data[m],p=d.data[m+1],y=d.data[m+2],r.fromArray(t.data,u*t.size),i.fromArray(t.data,p*t.size),s.fromArray(t.data,y*t.size),c.sub(s,i),f.sub(r,i),c.cross(f),a.fromArray(n.data,u*n.size),o.fromArray(n.data,p*n.size),l.fromArray(n.data,y*n.size),a.add(c),o.add(c),l.add(c),u*=n.size,n.data[u]=a.x,n.data[u+1]=a.y,n.data[u+2]=a.z,p*=n.size,n.data[p]=o.x,n.data[p+1]=o.y,n.data[p+2]=o.z,y*=n.size,n.data[y]=l.x,n.data[y+1]=l.y,n.data[y+2]=l.z}else for(let u=0,p=t.count;u<p;u+=3)r.fromArray(t.data,u*t.size),i.fromArray(t.data,(u+1)*t.size),s.fromArray(t.data,(u+2)*t.size),c.sub(s,i),f.sub(r,i),c.cross(f),n.data[u*n.size]=c.x,n.data[u*n.size+1]=c.y,n.data[u*n.size+2]=c.z,n.data[(u+1)*n.size]=c.x,n.data[(u+1)*n.size+1]=c.y,n.data[(u+1)*n.size+2]=c.z,n.data[(u+2)*n.size]=c.x,n.data[(u+2)*n.size+1]=c.y,n.data[(u+2)*n.size+2]=c.z;this.normalizeNormals(),n.needsUpdate=!0}normalizeNormals(){let t=this.attributes.normal;for(let n=0,r=t.count;n<r;n++)W.fromArray(t.data,n*t.size),W.normalize(),t.data[n*t.size]=W.x,t.data[n*t.size+1]=W.y,t.data[n*t.size+2]=W.z}remove(){for(let t in this.attributes)this.gl.deleteBuffer(this.attributes[t].buffer),delete this.attributes[t]}};var Ot;function Fn(e){let t=e.position,n=e.index,r=e.normal;for(let i=0;i<n.length/3;i++){let s=new S(t[n[i*3+0]*3+0],t[n[i*3+0]*3+1],t[n[i*3+0]*3+2]),a=new S(t[n[i*3+1]*3+0]-s.x,t[n[i*3+1]*3+1]-s.y,t[n[i*3+1]*3+2]-s.z),o=new S(t[n[i*3+2]*3+0]-s.x,t[n[i*3+2]*3+1]-s.y,t[n[i*3+2]*3+2]-s.z),l=new S().cross(a,o).normalize();l[0]===0&&l[1]===0&&l[3]===0&&(l=Ot);for(let c=0;c<3;c++)r[n[i*3+c]*3+0]=l.x,r[n[i*3+c]*3+1]=l.y,r[n[i*3+c]*3+2]=l.z;Ot=l}return e}function En(e,t=[0,0,0],n=[0,0,0],r=[1,1,1]){let i=new Float32Array(e.position.length),s=e.position.length,a=e.position;for(let o=0;o<s;o+=3){let l=a[o+0]*r[0],c=a[o+1]*r[1],f=a[o+2]*r[2],d=l,u=Math.cos(n[0])*c-Math.sin(n[0])*f,p=Math.sin(n[0])*c+Math.cos(n[0])*f,y=Math.cos(n[1])*d-Math.sin(n[1])*p,m=u,h=Math.sin(n[1])*d+Math.cos(n[1])*p;i[o+0]=y+t[0],i[o+1]=m+t[1],i[o+2]=h+t[2]}return{position:i,uv:e.uv,normal:e.normal,index:e.index}}function zn(e){let t=[],n={position:e.position,normal:e.position,uv:e.uv,index:e.index},r=e.offset,i=e.rotation,s=e.scale,a=e.offset.length;for(let o=0;o<a;o+=3)t.push(En(n,[r[o+0],r[o+1],r[o+2]],[i[o+0],i[o+1],i[o+2]],[s[o+0],s[o+1],s[o+2]]));return t}var xe={};Pe(xe,{computeControlPoints:()=>ye,drawControlPoints:()=>Tn,drawCurve:()=>Dn,drawLinear:()=>Sn,drawSamplePoints:()=>$n,toArray:()=>St});function On(e,t,n,r,i,s,a,o,l,c){let f=i-n,d=a-i,u=l-a,p=s-r,y=o-s,m=c-o,h,x,w,_,g=-1e4,v=-1e4,b=[{x:n,y:r}];for(let E=1;E<e;E++){let M=E/e;h=n+f*M,w=i+d*M;let z=a+u*M;h+=(w-h)*M,w+=(z-w)*M,x=r+p*M,_=s+y*M;let T=o+m*M;x+=(_-x)*M,_+=(T-_)*M;let O=h+(w-h)*M,F=x+(_-x)*M,D=O-g,A=F-v;D*D+A*A>t&&(b.push({x:O,y:F}),g=O,v=F)}return b.push({x:l,y:c}),b}function ye(e){let t=e.length-1;return e.map((n,r,i)=>{if(r===0)return{rx:i[r+1].x*.4*0,ry:n.y+(i[r+1].y-n.y)*.4*0};if(r===t)return{lx:i[r-1].x+(n.x-i[r-1].x)*.4*2,ly:i[r-1].y+(n.y-i[r-1].y)*.4*2};if(n.y>i[r+1].y&&n.y>i[r-1].y||n.y<i[r+1].y&&n.y<i[r-1].y)return{lx:i[r-1].x+(n.x-i[r-1].x)*.4,ly:n.y,rx:n.x+(i[r+1].x-n.x)*.4,ry:n.y};{let a={x:i[r-1].x-i[r+1].x,y:i[r-1].y-i[r+1].y},o=Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2));a.x/=o,a.y/=o;let l=i[r+1].x-n.x,c=n.x-i[r-1].x;return{lx:n.x+a.x*c*.4,ly:n.y+a.y*c*.4,rx:n.x-a.x*l*.4,ry:n.y-a.y*l*.4}}})}function Sn(e,t){e.save(),e.beginPath(),t.forEach((n,r,i)=>{r<i.length-1&&(e.strokeStyle="gray",e.moveTo(n.x,n.y),e.lineTo(i[r+1].x,i[r+1].y))}),e.stroke(),e.restore()}function Tn(e,t){ye(t).forEach((n,r)=>{"rx"in n&&"ry"in n&&(e.fillRect(n.rx-1,n.ry-1,2,2),e.beginPath(),e.moveTo(t[r].x,t[r].y),e.lineTo(n.rx,n.ry),e.stroke()),"lx"in n&&"ly"in n&&(e.fillRect(n.lx-1,n.ly-1,2,2),e.beginPath(),e.moveTo(t[r].x,t[r].y),e.lineTo(n.lx,n.ly),e.stroke())})}function Dn(e,t){let n=ye(t);t.forEach((r,i,s)=>{i<s.length-1&&(e.moveTo(r.x,r.y),e.bezierCurveTo(n[i].rx,n[i].ry,n[i+1].lx,n[i+1].ly,s[i+1].x,s[i+1].y),e.stroke())})}function St(e){let t=e.length-1,n={},r=ye(e);return e.map((i,s,a)=>{if(s<t)return On(t*20,0,i.x,i.y,r[s].rx,r[s].ry,r[s+1].lx,r[s+1].ly,a[s+1].x,a[s+1].y)}).flat().filter(i=>!i||i.x in n?!1:(n[i.x]=!0,!0))}function $n(e,t){e.save(),e.fillStyle="red",St(t).forEach(n=>{e.fillRect(n.x-1,n.y-1,2,2)}),e.restore()}var Rn=dt(Tt(),1);var Pn={amountEmitters:0,amountCallbacks:0,emitters:[]};typeof self<"u"&&"window"in self&&(globalThis.debug=Pn);function ve(e,t){let n=[],r=e.length/t;for(let i=0;i<r;i++){let s=[];for(let a=0;a<t;a++)s[a]=e[i*t+a];n.push(s)}return n}function ae(){}function Dt(e){return e()}function Be(e){e.forEach(Dt)}function $t(e){return typeof e=="function"}function Rt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function In(e){return Object.keys(e).length===0}var Ni=Promise.resolve();var Ii=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Vn(e,t){let n=e.$$;n.fragment!==null&&(Be(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}var jn;typeof HTMLElement=="function"&&(jn=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(Dt).filter($t);for(let t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){Be(this.$$.on_disconnect)}$destroy(){Vn(this,1),this.$destroy=ae}$on(e,t){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let r=n.indexOf(t);r!==-1&&n.splice(r,1)}}$set(e){this.$$set&&!In(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});var J=[];function kt(e,t=ae){let n,r=new Set;function i(o){if(Rt(e,o)&&(e=o,n)){let l=!J.length;for(let c of r)c[1](),J.push(c,e);if(l){for(let c=0;c<J.length;c+=2)J[c][0](J[c+1]);J.length=0}}}function s(o){i(o(e))}function a(o,l=ae){let c=[o,l];return r.add(c),r.size===1&&(n=t(i)||ae),o(e),()=>{r.delete(c),r.size===0&&(n(),n=null)}}return{set:i,update:s,subscribe:a}}var Cn=typeof globalThis.WorkerGlobalScope<"u"&&self instanceof globalThis.WorkerGlobalScope,ge=[],be=2,K=0,qn={},He=0,Gn=["#00ffff","#f0ffff","#f5f5dc","#000000","#0000ff","#a52a2a","#00ffff","#00008b","#008b8b","#a9a9a9","#006400","#bdb76b","#8b008b","#556b2f","#ff8c00","#9932cc","#8b0000","#e9967a","#9400d3","#ff00ff","#ffd700","#008000","#4b0082","#f0e68c","#add8e6","#e0ffff","#90ee90","#d3d3d3","#ffb6c1","#ffffe0","#00ff00","#ff00ff","#800000","#000080","#808000","#ffa500","#ffc0cb","#800080","#800080","#ff0000","#c0c0c0","#ffffff","#ffff00"],Ye="plant.log.history",We="localStorage"in globalThis,oe=We?Ye in localStorage?JSON.parse(localStorage.getItem(Ye)):[]:[];We&&(be=parseInt(localStorage.getItem("pt-log-level"))||2);function Un(){We&&localStorage.setItem(Ye,JSON.stringify(oe))}var X;function Qe(e){K=Math.max(K,e.length);let t=He;qn[e]=Gn[He],He++;let n=(i,s)=>{if(!Cn&&(oe.push({scope:e,args:i,level:be}),oe.length=Math.min(100,oe.length),X&&X.set(oe),Un(),(!ge.length||ge.includes(e))&&s<=be)){if(i instanceof Error){console.error(`[${e.padEnd(K," ")}]`,i);return}if(Array.isArray(i)&&typeof i[0]=="string"&&typeof i[1]=="object"){console.groupCollapsed(`%c[${e.padEnd(K," ")}]`,`color: hsl(${t*30}deg 68% 64%); font-weight: bold;`,i[0]),console.log(...i.slice(1)),console.groupEnd();return}s===0&&console.log(`%c[${e.padEnd(K," ")}]`,`color: hsl(${t*30}deg 68% 64%); font-weight: bold;`,...i),s===1&&console.warn(`[${e.padEnd(K," ")}]`,...i)}},r=(...i)=>n(i,2);return r.warn=(...i)=>n(i,1),r.error=i=>n(i,0),r}Qe.getStore=function(){return X||(X=kt([]),X)};Qe.setFilter=(...e)=>{ge=e,console.log("[log] set filter",{filters:ge})};Qe.setLevel=(e=0)=>{be=e,localStorage.setItem("pt-log-level",""+e)};function Hn(e){return xe.toArray(e).map(t=>t.y)}var $=1e-6,j=typeof Float32Array<"u"?Float32Array:Array,Ze=Math.random;var js=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var _e={};Pe(_e,{add:()=>Tr,adjoint:()=>er,clone:()=>Wn,copy:()=>Qn,create:()=>Yn,determinant:()=>tr,equals:()=>kr,exactEquals:()=>Rr,frob:()=>Sr,fromQuat:()=>gr,fromQuat2:()=>pr,fromRotation:()=>fr,fromRotationTranslation:()=>It,fromRotationTranslationScale:()=>xr,fromRotationTranslationScaleOrigin:()=>vr,fromScaling:()=>cr,fromTranslation:()=>lr,fromValues:()=>Zn,fromXRotation:()=>ur,fromYRotation:()=>dr,fromZRotation:()=>hr,frustum:()=>br,getRotation:()=>yr,getScaling:()=>Vt,getTranslation:()=>mr,identity:()=>Pt,invert:()=>Xn,lookAt:()=>Er,mul:()=>Lr,multiply:()=>Nt,multiplyScalar:()=>Dr,multiplyScalarAndAdd:()=>$r,ortho:()=>Ar,orthoNO:()=>Ct,orthoZO:()=>Fr,perspective:()=>_r,perspectiveFromFieldOfView:()=>Mr,perspectiveNO:()=>jt,perspectiveZO:()=>wr,rotate:()=>ir,rotateX:()=>sr,rotateY:()=>ar,rotateZ:()=>or,scale:()=>rr,set:()=>Jn,str:()=>Or,sub:()=>Pr,subtract:()=>qt,targetTo:()=>zr,translate:()=>nr,transpose:()=>Kn});function Yn(){var e=new j(16);return j!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Wn(e){var t=new j(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Qn(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Zn(e,t,n,r,i,s,a,o,l,c,f,d,u,p,y,m){var h=new j(16);return h[0]=e,h[1]=t,h[2]=n,h[3]=r,h[4]=i,h[5]=s,h[6]=a,h[7]=o,h[8]=l,h[9]=c,h[10]=f,h[11]=d,h[12]=u,h[13]=p,h[14]=y,h[15]=m,h}function Jn(e,t,n,r,i,s,a,o,l,c,f,d,u,p,y,m,h){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=s,e[5]=a,e[6]=o,e[7]=l,e[8]=c,e[9]=f,e[10]=d,e[11]=u,e[12]=p,e[13]=y,e[14]=m,e[15]=h,e}function Pt(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Kn(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],s=t[6],a=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=s,e[11]=t[14],e[12]=i,e[13]=a,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function Xn(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],a=t[4],o=t[5],l=t[6],c=t[7],f=t[8],d=t[9],u=t[10],p=t[11],y=t[12],m=t[13],h=t[14],x=t[15],w=n*o-r*a,_=n*l-i*a,g=n*c-s*a,v=r*l-i*o,b=r*c-s*o,E=i*c-s*l,M=f*m-d*y,z=f*h-u*y,T=f*x-p*y,O=d*h-u*m,F=d*x-p*m,D=u*x-p*h,A=w*D-_*F+g*O+v*T-b*z+E*M;return A?(A=1/A,e[0]=(o*D-l*F+c*O)*A,e[1]=(i*F-r*D-s*O)*A,e[2]=(m*E-h*b+x*v)*A,e[3]=(u*b-d*E-p*v)*A,e[4]=(l*T-a*D-c*z)*A,e[5]=(n*D-i*T+s*z)*A,e[6]=(h*g-y*E-x*_)*A,e[7]=(f*E-u*g+p*_)*A,e[8]=(a*F-o*T+c*M)*A,e[9]=(r*T-n*F-s*M)*A,e[10]=(y*b-m*g+x*w)*A,e[11]=(d*g-f*b-p*w)*A,e[12]=(o*z-a*O-l*M)*A,e[13]=(n*O-r*z+i*M)*A,e[14]=(m*_-y*v-h*w)*A,e[15]=(f*v-d*_+u*w)*A,e):null}function er(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],a=t[4],o=t[5],l=t[6],c=t[7],f=t[8],d=t[9],u=t[10],p=t[11],y=t[12],m=t[13],h=t[14],x=t[15];return e[0]=o*(u*x-p*h)-d*(l*x-c*h)+m*(l*p-c*u),e[1]=-(r*(u*x-p*h)-d*(i*x-s*h)+m*(i*p-s*u)),e[2]=r*(l*x-c*h)-o*(i*x-s*h)+m*(i*c-s*l),e[3]=-(r*(l*p-c*u)-o*(i*p-s*u)+d*(i*c-s*l)),e[4]=-(a*(u*x-p*h)-f*(l*x-c*h)+y*(l*p-c*u)),e[5]=n*(u*x-p*h)-f*(i*x-s*h)+y*(i*p-s*u),e[6]=-(n*(l*x-c*h)-a*(i*x-s*h)+y*(i*c-s*l)),e[7]=n*(l*p-c*u)-a*(i*p-s*u)+f*(i*c-s*l),e[8]=a*(d*x-p*m)-f*(o*x-c*m)+y*(o*p-c*d),e[9]=-(n*(d*x-p*m)-f*(r*x-s*m)+y*(r*p-s*d)),e[10]=n*(o*x-c*m)-a*(r*x-s*m)+y*(r*c-s*o),e[11]=-(n*(o*p-c*d)-a*(r*p-s*d)+f*(r*c-s*o)),e[12]=-(a*(d*h-u*m)-f*(o*h-l*m)+y*(o*u-l*d)),e[13]=n*(d*h-u*m)-f*(r*h-i*m)+y*(r*u-i*d),e[14]=-(n*(o*h-l*m)-a*(r*h-i*m)+y*(r*l-i*o)),e[15]=n*(o*u-l*d)-a*(r*u-i*d)+f*(r*l-i*o),e}function tr(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],f=e[9],d=e[10],u=e[11],p=e[12],y=e[13],m=e[14],h=e[15],x=t*a-n*s,w=t*o-r*s,_=t*l-i*s,g=n*o-r*a,v=n*l-i*a,b=r*l-i*o,E=c*y-f*p,M=c*m-d*p,z=c*h-u*p,T=f*m-d*y,O=f*h-u*y,F=d*h-u*m;return x*F-w*O+_*T+g*z-v*M+b*E}function Nt(e,t,n){var r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],c=t[6],f=t[7],d=t[8],u=t[9],p=t[10],y=t[11],m=t[12],h=t[13],x=t[14],w=t[15],_=n[0],g=n[1],v=n[2],b=n[3];return e[0]=_*r+g*o+v*d+b*m,e[1]=_*i+g*l+v*u+b*h,e[2]=_*s+g*c+v*p+b*x,e[3]=_*a+g*f+v*y+b*w,_=n[4],g=n[5],v=n[6],b=n[7],e[4]=_*r+g*o+v*d+b*m,e[5]=_*i+g*l+v*u+b*h,e[6]=_*s+g*c+v*p+b*x,e[7]=_*a+g*f+v*y+b*w,_=n[8],g=n[9],v=n[10],b=n[11],e[8]=_*r+g*o+v*d+b*m,e[9]=_*i+g*l+v*u+b*h,e[10]=_*s+g*c+v*p+b*x,e[11]=_*a+g*f+v*y+b*w,_=n[12],g=n[13],v=n[14],b=n[15],e[12]=_*r+g*o+v*d+b*m,e[13]=_*i+g*l+v*u+b*h,e[14]=_*s+g*c+v*p+b*x,e[15]=_*a+g*f+v*y+b*w,e}function nr(e,t,n){var r=n[0],i=n[1],s=n[2],a,o,l,c,f,d,u,p,y,m,h,x;return t===e?(e[12]=t[0]*r+t[4]*i+t[8]*s+t[12],e[13]=t[1]*r+t[5]*i+t[9]*s+t[13],e[14]=t[2]*r+t[6]*i+t[10]*s+t[14],e[15]=t[3]*r+t[7]*i+t[11]*s+t[15]):(a=t[0],o=t[1],l=t[2],c=t[3],f=t[4],d=t[5],u=t[6],p=t[7],y=t[8],m=t[9],h=t[10],x=t[11],e[0]=a,e[1]=o,e[2]=l,e[3]=c,e[4]=f,e[5]=d,e[6]=u,e[7]=p,e[8]=y,e[9]=m,e[10]=h,e[11]=x,e[12]=a*r+f*i+y*s+t[12],e[13]=o*r+d*i+m*s+t[13],e[14]=l*r+u*i+h*s+t[14],e[15]=c*r+p*i+x*s+t[15]),e}function rr(e,t,n){var r=n[0],i=n[1],s=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ir(e,t,n,r){var i=r[0],s=r[1],a=r[2],o=Math.hypot(i,s,a),l,c,f,d,u,p,y,m,h,x,w,_,g,v,b,E,M,z,T,O,F,D,A,R;return o<$?null:(o=1/o,i*=o,s*=o,a*=o,l=Math.sin(n),c=Math.cos(n),f=1-c,d=t[0],u=t[1],p=t[2],y=t[3],m=t[4],h=t[5],x=t[6],w=t[7],_=t[8],g=t[9],v=t[10],b=t[11],E=i*i*f+c,M=s*i*f+a*l,z=a*i*f-s*l,T=i*s*f-a*l,O=s*s*f+c,F=a*s*f+i*l,D=i*a*f+s*l,A=s*a*f-i*l,R=a*a*f+c,e[0]=d*E+m*M+_*z,e[1]=u*E+h*M+g*z,e[2]=p*E+x*M+v*z,e[3]=y*E+w*M+b*z,e[4]=d*T+m*O+_*F,e[5]=u*T+h*O+g*F,e[6]=p*T+x*O+v*F,e[7]=y*T+w*O+b*F,e[8]=d*D+m*A+_*R,e[9]=u*D+h*A+g*R,e[10]=p*D+x*A+v*R,e[11]=y*D+w*A+b*R,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function sr(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[4],a=t[5],o=t[6],l=t[7],c=t[8],f=t[9],d=t[10],u=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*i+c*r,e[5]=a*i+f*r,e[6]=o*i+d*r,e[7]=l*i+u*r,e[8]=c*i-s*r,e[9]=f*i-a*r,e[10]=d*i-o*r,e[11]=u*i-l*r,e}function ar(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[0],a=t[1],o=t[2],l=t[3],c=t[8],f=t[9],d=t[10],u=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i-c*r,e[1]=a*i-f*r,e[2]=o*i-d*r,e[3]=l*i-u*r,e[8]=s*r+c*i,e[9]=a*r+f*i,e[10]=o*r+d*i,e[11]=l*r+u*i,e}function or(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[0],a=t[1],o=t[2],l=t[3],c=t[4],f=t[5],d=t[6],u=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i+c*r,e[1]=a*i+f*r,e[2]=o*i+d*r,e[3]=l*i+u*r,e[4]=c*i-s*r,e[5]=f*i-a*r,e[6]=d*i-o*r,e[7]=u*i-l*r,e}function lr(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function cr(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fr(e,t,n){var r=n[0],i=n[1],s=n[2],a=Math.hypot(r,i,s),o,l,c;return a<$?null:(a=1/a,r*=a,i*=a,s*=a,o=Math.sin(t),l=Math.cos(t),c=1-l,e[0]=r*r*c+l,e[1]=i*r*c+s*o,e[2]=s*r*c-i*o,e[3]=0,e[4]=r*i*c-s*o,e[5]=i*i*c+l,e[6]=s*i*c+r*o,e[7]=0,e[8]=r*s*c+i*o,e[9]=i*s*c-r*o,e[10]=s*s*c+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function ur(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function dr(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function hr(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function It(e,t,n){var r=t[0],i=t[1],s=t[2],a=t[3],o=r+r,l=i+i,c=s+s,f=r*o,d=r*l,u=r*c,p=i*l,y=i*c,m=s*c,h=a*o,x=a*l,w=a*c;return e[0]=1-(p+m),e[1]=d+w,e[2]=u-x,e[3]=0,e[4]=d-w,e[5]=1-(f+m),e[6]=y+h,e[7]=0,e[8]=u+x,e[9]=y-h,e[10]=1-(f+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function pr(e,t){var n=new j(3),r=-t[0],i=-t[1],s=-t[2],a=t[3],o=t[4],l=t[5],c=t[6],f=t[7],d=r*r+i*i+s*s+a*a;return d>0?(n[0]=(o*a+f*r+l*s-c*i)*2/d,n[1]=(l*a+f*i+c*r-o*s)*2/d,n[2]=(c*a+f*s+o*i-l*r)*2/d):(n[0]=(o*a+f*r+l*s-c*i)*2,n[1]=(l*a+f*i+c*r-o*s)*2,n[2]=(c*a+f*s+o*i-l*r)*2),It(e,t,n),e}function mr(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Vt(e,t){var n=t[0],r=t[1],i=t[2],s=t[4],a=t[5],o=t[6],l=t[8],c=t[9],f=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(s,a,o),e[2]=Math.hypot(l,c,f),e}function yr(e,t){var n=new j(3);Vt(n,t);var r=1/n[0],i=1/n[1],s=1/n[2],a=t[0]*r,o=t[1]*i,l=t[2]*s,c=t[4]*r,f=t[5]*i,d=t[6]*s,u=t[8]*r,p=t[9]*i,y=t[10]*s,m=a+f+y,h=0;return m>0?(h=Math.sqrt(m+1)*2,e[3]=.25*h,e[0]=(d-p)/h,e[1]=(u-l)/h,e[2]=(o-c)/h):a>f&&a>y?(h=Math.sqrt(1+a-f-y)*2,e[3]=(d-p)/h,e[0]=.25*h,e[1]=(o+c)/h,e[2]=(u+l)/h):f>y?(h=Math.sqrt(1+f-a-y)*2,e[3]=(u-l)/h,e[0]=(o+c)/h,e[1]=.25*h,e[2]=(d+p)/h):(h=Math.sqrt(1+y-a-f)*2,e[3]=(o-c)/h,e[0]=(u+l)/h,e[1]=(d+p)/h,e[2]=.25*h),e}function xr(e,t,n,r){var i=t[0],s=t[1],a=t[2],o=t[3],l=i+i,c=s+s,f=a+a,d=i*l,u=i*c,p=i*f,y=s*c,m=s*f,h=a*f,x=o*l,w=o*c,_=o*f,g=r[0],v=r[1],b=r[2];return e[0]=(1-(y+h))*g,e[1]=(u+_)*g,e[2]=(p-w)*g,e[3]=0,e[4]=(u-_)*v,e[5]=(1-(d+h))*v,e[6]=(m+x)*v,e[7]=0,e[8]=(p+w)*b,e[9]=(m-x)*b,e[10]=(1-(d+y))*b,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function vr(e,t,n,r,i){var s=t[0],a=t[1],o=t[2],l=t[3],c=s+s,f=a+a,d=o+o,u=s*c,p=s*f,y=s*d,m=a*f,h=a*d,x=o*d,w=l*c,_=l*f,g=l*d,v=r[0],b=r[1],E=r[2],M=i[0],z=i[1],T=i[2],O=(1-(m+x))*v,F=(p+g)*v,D=(y-_)*v,A=(p-g)*b,R=(1-(u+x))*b,P=(h+w)*b,k=(y+_)*E,I=(h-w)*E,N=(1-(u+m))*E;return e[0]=O,e[1]=F,e[2]=D,e[3]=0,e[4]=A,e[5]=R,e[6]=P,e[7]=0,e[8]=k,e[9]=I,e[10]=N,e[11]=0,e[12]=n[0]+M-(O*M+A*z+k*T),e[13]=n[1]+z-(F*M+R*z+I*T),e[14]=n[2]+T-(D*M+P*z+N*T),e[15]=1,e}function gr(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],a=n+n,o=r+r,l=i+i,c=n*a,f=r*a,d=r*o,u=i*a,p=i*o,y=i*l,m=s*a,h=s*o,x=s*l;return e[0]=1-d-y,e[1]=f+x,e[2]=u-h,e[3]=0,e[4]=f-x,e[5]=1-c-y,e[6]=p+m,e[7]=0,e[8]=u+h,e[9]=p-m,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function br(e,t,n,r,i,s,a){var o=1/(n-t),l=1/(i-r),c=1/(s-a);return e[0]=s*2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s*2*l,e[6]=0,e[7]=0,e[8]=(n+t)*o,e[9]=(i+r)*l,e[10]=(a+s)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*s*2*c,e[15]=0,e}function jt(e,t,n,r,i){var s=1/Math.tan(t/2),a;return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(a=1/(r-i),e[10]=(i+r)*a,e[14]=2*i*r*a):(e[10]=-1,e[14]=-2*r),e}var _r=jt;function wr(e,t,n,r,i){var s=1/Math.tan(t/2),a;return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(a=1/(r-i),e[10]=i*a,e[14]=i*r*a):(e[10]=-1,e[14]=-r),e}function Mr(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),o=Math.tan(t.rightDegrees*Math.PI/180),l=2/(a+o),c=2/(i+s);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-((a-o)*l*.5),e[9]=(i-s)*c*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function Ct(e,t,n,r,i,s,a){var o=1/(t-n),l=1/(r-i),c=1/(s-a);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*o,e[13]=(i+r)*l,e[14]=(a+s)*c,e[15]=1,e}var Ar=Ct;function Fr(e,t,n,r,i,s,a){var o=1/(t-n),l=1/(r-i),c=1/(s-a);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=c,e[11]=0,e[12]=(t+n)*o,e[13]=(i+r)*l,e[14]=s*c,e[15]=1,e}function Er(e,t,n,r){var i,s,a,o,l,c,f,d,u,p,y=t[0],m=t[1],h=t[2],x=r[0],w=r[1],_=r[2],g=n[0],v=n[1],b=n[2];return Math.abs(y-g)<$&&Math.abs(m-v)<$&&Math.abs(h-b)<$?Pt(e):(f=y-g,d=m-v,u=h-b,p=1/Math.hypot(f,d,u),f*=p,d*=p,u*=p,i=w*u-_*d,s=_*f-x*u,a=x*d-w*f,p=Math.hypot(i,s,a),p?(p=1/p,i*=p,s*=p,a*=p):(i=0,s=0,a=0),o=d*a-u*s,l=u*i-f*a,c=f*s-d*i,p=Math.hypot(o,l,c),p?(p=1/p,o*=p,l*=p,c*=p):(o=0,l=0,c=0),e[0]=i,e[1]=o,e[2]=f,e[3]=0,e[4]=s,e[5]=l,e[6]=d,e[7]=0,e[8]=a,e[9]=c,e[10]=u,e[11]=0,e[12]=-(i*y+s*m+a*h),e[13]=-(o*y+l*m+c*h),e[14]=-(f*y+d*m+u*h),e[15]=1,e)}function zr(e,t,n,r){var i=t[0],s=t[1],a=t[2],o=r[0],l=r[1],c=r[2],f=i-n[0],d=s-n[1],u=a-n[2],p=f*f+d*d+u*u;p>0&&(p=1/Math.sqrt(p),f*=p,d*=p,u*=p);var y=l*u-c*d,m=c*f-o*u,h=o*d-l*f;return p=y*y+m*m+h*h,p>0&&(p=1/Math.sqrt(p),y*=p,m*=p,h*=p),e[0]=y,e[1]=m,e[2]=h,e[3]=0,e[4]=d*h-u*m,e[5]=u*y-f*h,e[6]=f*m-d*y,e[7]=0,e[8]=f,e[9]=d,e[10]=u,e[11]=0,e[12]=i,e[13]=s,e[14]=a,e[15]=1,e}function Or(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Sr(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function Tr(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function qt(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function Dr(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function $r(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function Rr(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function kr(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],f=e[8],d=e[9],u=e[10],p=e[11],y=e[12],m=e[13],h=e[14],x=e[15],w=t[0],_=t[1],g=t[2],v=t[3],b=t[4],E=t[5],M=t[6],z=t[7],T=t[8],O=t[9],F=t[10],D=t[11],A=t[12],R=t[13],P=t[14],k=t[15];return Math.abs(n-w)<=$*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(r-_)<=$*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-g)<=$*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(s-v)<=$*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(a-b)<=$*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(o-E)<=$*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(l-M)<=$*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(c-z)<=$*Math.max(1,Math.abs(c),Math.abs(z))&&Math.abs(f-T)<=$*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(d-O)<=$*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(u-F)<=$*Math.max(1,Math.abs(u),Math.abs(F))&&Math.abs(p-D)<=$*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(y-A)<=$*Math.max(1,Math.abs(y),Math.abs(A))&&Math.abs(m-R)<=$*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(h-P)<=$*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(x-k)<=$*Math.max(1,Math.abs(x),Math.abs(k))}var Lr=Nt,Pr=qt;var we={};Pe(we,{add:()=>Cr,angle:()=>c1,bezier:()=>t1,ceil:()=>qr,clone:()=>Nr,copy:()=>Vr,create:()=>Gt,cross:()=>Kr,dist:()=>x1,distance:()=>Wt,div:()=>y1,divide:()=>Yt,dot:()=>Jt,equals:()=>h1,exactEquals:()=>d1,floor:()=>Gr,forEach:()=>_1,fromValues:()=>Ir,hermite:()=>e1,inverse:()=>Zr,len:()=>g1,length:()=>Ut,lerp:()=>Xr,max:()=>Br,min:()=>Ur,mul:()=>m1,multiply:()=>Ht,negate:()=>Qr,normalize:()=>Jr,random:()=>n1,rotateX:()=>a1,rotateY:()=>o1,rotateZ:()=>l1,round:()=>Hr,scale:()=>Yr,scaleAndAdd:()=>Wr,set:()=>jr,sqrDist:()=>v1,sqrLen:()=>b1,squaredDistance:()=>Qt,squaredLength:()=>Zt,str:()=>u1,sub:()=>p1,subtract:()=>Bt,transformMat3:()=>i1,transformMat4:()=>r1,transformQuat:()=>s1,zero:()=>f1});function Gt(){var e=new j(3);return j!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Nr(e){var t=new j(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ut(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function Ir(e,t,n){var r=new j(3);return r[0]=e,r[1]=t,r[2]=n,r}function Vr(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function jr(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function Cr(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Bt(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Ht(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function Yt(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function qr(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function Gr(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function Ur(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function Br(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function Hr(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function Yr(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function Wr(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function Wt(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.hypot(n,r,i)}function Qt(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function Zt(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function Qr(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function Zr(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function Jr(e,t){var n=t[0],r=t[1],i=t[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e}function Jt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Kr(e,t,n){var r=t[0],i=t[1],s=t[2],a=n[0],o=n[1],l=n[2];return e[0]=i*l-s*o,e[1]=s*a-r*l,e[2]=r*o-i*a,e}function Xr(e,t,n,r){var i=t[0],s=t[1],a=t[2];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=a+r*(n[2]-a),e}function e1(e,t,n,r,i,s){var a=s*s,o=a*(2*s-3)+1,l=a*(s-2)+s,c=a*(s-1),f=a*(3-2*s);return e[0]=t[0]*o+n[0]*l+r[0]*c+i[0]*f,e[1]=t[1]*o+n[1]*l+r[1]*c+i[1]*f,e[2]=t[2]*o+n[2]*l+r[2]*c+i[2]*f,e}function t1(e,t,n,r,i,s){var a=1-s,o=a*a,l=s*s,c=o*a,f=3*s*o,d=3*l*a,u=l*s;return e[0]=t[0]*c+n[0]*f+r[0]*d+i[0]*u,e[1]=t[1]*c+n[1]*f+r[1]*d+i[1]*u,e[2]=t[2]*c+n[2]*f+r[2]*d+i[2]*u,e}function n1(e,t){t=t||1;var n=Ze()*2*Math.PI,r=Ze()*2-1,i=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=r*t,e}function r1(e,t,n){var r=t[0],i=t[1],s=t[2],a=n[3]*r+n[7]*i+n[11]*s+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/a,e}function i1(e,t,n){var r=t[0],i=t[1],s=t[2];return e[0]=r*n[0]+i*n[3]+s*n[6],e[1]=r*n[1]+i*n[4]+s*n[7],e[2]=r*n[2]+i*n[5]+s*n[8],e}function s1(e,t,n){var r=n[0],i=n[1],s=n[2],a=n[3],o=t[0],l=t[1],c=t[2],f=i*c-s*l,d=s*o-r*c,u=r*l-i*o,p=i*u-s*d,y=s*f-r*u,m=r*d-i*f,h=a*2;return f*=h,d*=h,u*=h,p*=2,y*=2,m*=2,e[0]=o+f+p,e[1]=l+d+y,e[2]=c+u+m,e}function a1(e,t,n,r){var i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e}function o1(e,t,n,r){var i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e}function l1(e,t,n,r){var i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e}function c1(e,t){var n=e[0],r=e[1],i=e[2],s=t[0],a=t[1],o=t[2],l=Math.sqrt(n*n+r*r+i*i),c=Math.sqrt(s*s+a*a+o*o),f=l*c,d=f&&Jt(e,t)/f;return Math.acos(Math.min(Math.max(d,-1),1))}function f1(e){return e[0]=0,e[1]=0,e[2]=0,e}function u1(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function d1(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function h1(e,t){var n=e[0],r=e[1],i=e[2],s=t[0],a=t[1],o=t[2];return Math.abs(n-s)<=$*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-a)<=$*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-o)<=$*Math.max(1,Math.abs(i),Math.abs(o))}var p1=Bt,m1=Ht,y1=Yt,x1=Wt,v1=Qt,g1=Ut,b1=Zt,_1=function(){var e=Gt();return function(t,n,r,i,s,a){var o,l;for(n||(n=3),r||(r=0),i?l=Math.min(i*n+r,t.length):l=t.length,o=r;o<l;o+=n)e[0]=t[o],e[1]=t[o+1],e[2]=t[o+2],s(e,e,a),t[o]=e[0],t[o+1]=e[1],t[o+2]=e[2];return t}}();var{identity:w1,rotate:M1}=_e,{add:A1,cross:F1,dot:E1,mul:z1,normalize:Kt,subtract:Je,scale:Gs,transformMat4:O1}=we;function S1(e){let t=2*Math.PI/e;return new Array(e).fill(null).map((n,r)=>[Math.cos(t*r),Math.sin(t*r)])}function T1(e,t=1){let n=new Uint16Array(e*(Math.max(t,1)-1)*6);for(let r=0;r<t;r++){let i=r*e*6,s=r*e;for(let a=0;a<e;a++){let o=i+a*6,l=s+a;n[o+0]=l,n[o+1]=l-e+1,n[o+2]=l+1,n[o+3]=l+1,n[o+4]=l+e,n[o+5]=l,a===e-1?(n[o+0]=l,n[o+1]=l-e+1,n[o+2]=l+1,n[o+3]=l+1,n[o+4]=l+e,n[o+5]=l):(n[o+0]=l,n[o+1]=l+1,n[o+2]=l+e+1,n[o+3]=l+e+1,n[o+4]=l+e,n[o+5]=l)}}return n}function Ke(e,t=3){let n=e,r=[],i=[],s=[],a={position:[],normals:[],index:T1(t,n.length)},o=S1(t),l=o.length,c=n.length;for(let f=0;f<c;f++){let d=[0,0,1];f===0?Je(i,n[f],n[f+1]):f===c-1?Je(i,n[f-1],n[f]):Je(i,n[f-1],n[f+1]),Kt(i,i),F1(s,d,i);let u=Math.acos(E1(d,i));w1(r),M1(r,r,u,s);for(let p=0;p<l;p++){let y=o[p],m=[y[0],y[1],0],h=n[f][3];z1(m,m,[h,h,1]),O1(m,m,r);let x=[];Kt(x,m),a.normals.push(x),A1(m,m,n[f]),a.position.push(m)}}return a}function D1(e){let t=e.position.length/3,n=new Float32Array(t*2);for(let r=0;r<t;r++)n[r*2+0]=e.position[r*3+0],n[r*2+1]=e.position[r*3+2];return{...e,position:n}}function G(e,t,n){return e*(1-n)+t*n}function $1(e,t=0){let n=(e.length-1)*t,r=Math.floor(n),i=Math.ceil(n);return G(e[i],e[r],i-n)}var R1=$1;function k1(e,t){let n=(e.length/4-1)*t,r=Math.floor(n),i=Math.ceil(n),s=i-n;return[G(e[i*4+0],e[r*4+0],s),G(e[i*4+1],e[r*4+1],s),G(e[i*4+2],e[r*4+2],s),G(e[i*4+3],e[r*4+3],s)]}function Xe(e,t){let n=(e.length/4-1)*t,r=Math.floor(n),i=Math.ceil(n);return[e[i*4+0]-e[r*4+0],e[i*4+1]-e[r*4+1],e[i*4+2]-e[r*4+2],e[i*4+3]+e[r*4+3]/2]}function L1(...e){let t=e.filter(d=>!!d);if(t.length===1)return t[0];let n=new Float32Array(t.reduce((d,u)=>d+u.position.length,0)),r=new Float32Array(t.reduce((d,u)=>d+u.normal.length,0)),i=new Float32Array(t.reduce((d,u)=>d+u.uv.length,0)),s=t.reduce((d,u)=>d+u.index.length,0),a=s>65536?new Uint32Array(s):new Uint16Array(s),o=0,l=0,c=0,f=0;for(let d=0;d<t.length;d++){let u=t[d].normal,p=u.length;for(let g=0;g<p;g++)r[l+g]=u[g];l+=p;let y=t[d].uv,m=y.length;for(let g=0;g<m;g++)i[c+g]=y[g];c+=m;let h=t[d].index,x=h.length;for(let g=0;g<x;g++)a[g+f]=h[g]+o/3;f+=x;let w=t[d].position,_=w.length;for(let g=0;g<_;g++)n[o+g]=w[g];o+=_}return{position:n,normal:r,uv:i,index:a}}var et=(e,t)=>Math.sqrt(e*e+t*t);var tt=(e,t,n)=>Math.sqrt(e*e+t*t+n*n);var ee=dt(sn()),Q=0,ct=(0,ee.makeNoise2D)(Q),an=(0,ee.makeNoise3D)(Q),fe={n1d:e=>ct(e,0),n2d:(e,t)=>ct(e,t),n3d:(e,t,n)=>an(e,t,n),get seed(){return Q},set seed(e){e!==Q&&(Q=e,ct=(0,ee.makeNoise2D)(Q),an=(0,ee.makeNoise3D)(Q))}};var K1=([e,t])=>{let n=et(e,t);return n===0?[1,0]:[e/n,t/n]};var te=([e,t,n])=>{let r=tt(e,t,n);return[e/r,t/r,n/r]};var X1=(e,t,n)=>[e*Math.cos(n)-t*Math.sin(n),e*Math.sin(n)+t*Math.cos(n)];function H(e,t,n){let[r,i,s]=e,[a,o,l]=te(t),c=Math.cos(n),f=Math.sin(n);return new S((c+(1-c)*a*a)*r+((1-c)*a*o-l*f)*i+((1-c)*a*l+o*f)*s,((1-c)*a*o+l*f)*r+(c+(1-c)*o*o)*i+((1-c)*o*l-a*f)*s,((1-c)*a*l-o*f)*r+((1-c)*o*l+a*f)*i+(c+(1-c)*l*l)*s)}function ei(e,t,n){let r=new Float32Array(e.position.length),i=e.position.length/3;for(let s=0;s<i;s++){let a=H([e.position[s*3],e.position[s*3+1],e.position[s*3+2]],t,n);r[s*3+0]=a[0],r[s*3+1]=a[1],r[s*3+2]=a[2]}return{...e,position:r}}function ti(e,t){return new me(e,{position:{size:3,data:t.position},normal:{size:3,data:t.normal},uv:{size:2,data:t.uv},index:{data:t.index}})}function ni(e,t){let n=e.position.length/3;for(let r=0;r<n;r++)e.position[r*3+0]+=t[0],e.position[r*3+1]+=t[1],e.position[r*3+2]+=t[2];return e}function on([e,t,n]){return e===0&&n===0?[1,0,0]:[1,1,-((e+t)/n)]}function ri(e=2,t=3){t=t+2;let n=(t*4-4)*3,r=new Float32Array(n*2),i=new Float32Array(n),s=new Float32Array((t*4-4)*2),a=new Uint16Array(t*4);for(let l=0;l<t;l++){let c=l/(t-1)*2-1;r[l*6+0]=-e,r[l*6+1]=0,r[l*6+2]=e*c,r[l*6+3]=e,r[l*6+4]=0,r[l*6+5]=e*c}let o=t*6;for(let l=0;l<t;l++){let c=l/(t-1)*2-1;r[o+l*6+0]=-e*c,r[o+l*6+1]=0,r[o+l*6+2]=-e,r[o+l*6+3]=-e*c,r[o+l*6+4]=0,r[o+l*6+5]=e}return{position:r,normal:i,uv:s,index:a}}function ii(e=1,t=12,n=12){let r=360*(Math.PI/180)/n,i=t*n+1,s=(t-1)*n*2+n,a=new Float32Array(i*3),o=new Float32Array(i*3),l=new Float32Array(i*2),c=new Uint16Array(s*3);a[0]=0,a[1]=1-1,a[2]=0,o[0]=0,o[1]=1,o[2]=0,l[0]=.5,l[1]=.5;let f=new Array(t-1).fill(null).map((u,p,y)=>e+p/(y.length-1)*2);f.push(100);let d=f.map(u=>{let p=(Math.max(Math.min(u,e+2),e)-e)/2;return Math.sin((p+.5)*Math.PI)/2+.5-1});for(let u=0;u<t;u++){let p=f[u],y=d[u];for(let m=0;m<n;m++){let h=r*m,x=Math.cos(h)*p,w=y,_=Math.sin(h)*p,v=u*n+m+1;if(a[v*3+0]=x,a[v*3+1]=w,a[v*3+2]=_,o[v*3+0]=0,o[v*3+1]=1,o[v*3+2]=0,l[v*2+0]=x,l[v*2+1]=_,u===0){let b=(v-1)*3;c[b+0]=0,c[b+1]=(m+1)%n+1,c[b+2]=m+1}else if(m===n-1){let b=u*n*6+m*6-n*3;c[b+0]=v,c[b+1]=v+1-n-n,c[b+2]=v+1-n,c[b+3]=v,c[b+4]=v-n,c[b+5]=v+1-n*2}else{let b=u*n*6+m*6-n*3;c[b+0]=v,c[b+1]=v+1-n,c[b+2]=v+1,c[b+3]=v,c[b+4]=v-n,c[b+5]=v+1-n}}}return{position:a,normal:o,uv:l,index:c}}function si(e,{res:t=1,xCurvature:n=.5,yCurvature:r=.2}={}){let i=e.length,s=3+t*2,a=s*i,o=(s-1)*(i-1)*2,l=new Float32Array(a*3),c=new Float32Array(a*2),f=new Float32Array(a*2),d=new Uint16Array(o*3);return e.forEach((u,p)=>{let y=p*s;for(let m=0;m<s;m++){let h=2-m/(s-1)*2-1;l[y*3+m*3+0]=(u.x-1)*h*.5;let x=-(1-u.y)*(1-u.y)*.5,w=Math.sin(Math.abs(h)*Math.PI)*.01;if(l[y*3+m*3+1]=w*n+x*r,l[y*3+m*3+2]=u.y-1,f[y*2+m*2+0]=l[y*3+m*3+0]+1/2,f[y*2+m*2+1]=l[y*3+m*3+2],p<e.length-1){let _=p*(s-1);d[_*6+m*6+0]=y+m+0,d[_*6+m*6+1]=y+m+1,d[_*6+m*6+2]=y+m+s,d[_*6+m*6+3]=y+m+1,d[_*6+m*6+4]=y+m+s,d[_*6+m*6+5]=y+m+s+1}}}),{position:l,normal:c,index:d,uv:f}}var ai=e=>{let t=e*3,n=Float32Array.from([+e,-e,-e,+e,-e,+e,-e,-e,+e,-e,-e,-e,-e,+e,-e,+e,+e,-e,+e,+e,+e,-e,+e,+e]),r=Float32Array.from([...n].map(a=>a/t)),i=Float32Array.from(new Array(24).fill(.5)),s=Uint16Array.from([0,1,2,0,2,3,0,3,4,4,5,0,0,1,6,0,6,5,1,2,7,1,7,6,3,7,2,3,7,4,4,6,7,4,6,5]);return{position:n,normal:r,uv:i,index:s}};function oi(e=[0,0,0],t=1,n=3){let r=(n+1)*3,i=360*(Math.PI/180)/n,s=[e[0],e[1],e[2]+t],a=new Float32Array(r),o=new Float32Array(r),l=new Float32Array(n*2),c=new Uint16Array(n*3);a[0]=e[0],a[1]=e[1],a[2]=e[2];for(let f=1;f<=n+1;f++){let d=i*(f-1),u=Math.cos(d)*(s[0]-e[0])-Math.sin(d)*(s[2]-e[2])+e[0],p=e[1],y=Math.sin(d)*(s[0]-e[0])+Math.cos(d)*(s[2]-e[2])+e[2];a[f*3+0]=u,a[f*3+1]=p,a[f*3+2]=y}for(let f=0;f<n;f++)f===n-1?(c[f*3+0]=0,c[f*3+1]=n,c[f*3+2]=1):(c[f*3+0]=0,c[f*3+1]=f+1,c[f*3+2]=f+2);return{position:a,normal:o,uv:l,index:c}}function li(e,t){return e[0]===0&&e[2]===0?new S(0,0,1):new S().cross(e,t).normalize()}function Re(e,t,n,r=3,i){t.normalize();let s=r*3,a=360*(Math.PI/180)/r,o=new Float32Array(s),l=e[0],c=e[1],f=e[2],d=li(e,t).multiply(n);for(let u=0;u<r;u++){let p=a*u,y=H(d,i||t,p);o[u*3+0]=l+y[0],o[u*3+1]=c+y[1],o[u*3+2]=f+y[2]}return o}function ci(e=new S(0,0,0),t=1){let n=new Float32Array(9),r=new Float32Array(9),i=new Float32Array(6),s=new Uint16Array(3);return n[0]=e[0],n[1]=e[1],n[2]=e[2]-t,n[3]=e[0]+t,n[4]=e[1],n[5]=e[2]+t,n[6]=e[0]-t,n[7]=e[1],n[8]=e[2]+t,r[0]=0,r[1]=1,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=1,r[8]=0,i[0]=.5,i[1]=1,i[2]=1,i[3]=0,i[4]=0,i[5]=0,s[0]=0,s[1]=2,s[2]=1,{position:n,normal:r,uv:i,index:s}}function fi(e,t=8){let n=ve(e,4),r=Ke(n,t),i=Float32Array.from(r.position.flat()),s=Float32Array.from(r.normals.flat());return{position:i,index:r.index,normal:s,uv:new Float32Array}}function ui(e,t){let n=0,r=e.length;for(let i=0;i<r;i++){let s=e[i],a=s.length;for(let o=0;o<a;o++)t[n+o]=s[o];n+=a}}function ln(e,t){let n=e.length/4,r=n*t*3,i=n*t*6-t*6,s=n*t*2,a=new Float32Array(r),o=new Float32Array(r),l=new Float32Array(s),c=i>65536?new Uint32Array(i):new Uint16Array(i),f=[],d;for(let u=0;u<n;u++){for(let m=0;m<t;m++){let h=u*t*2+m*2;l[h+0]=-.5-m/t,l[h+1]=u/n}let p=new S(e[u*4+0],e[u*4+1],e[u*4+2]),y=e[u*4+3];u<n-1?(d=new S(e[u*4+4],e[u*4+5],e[u*4+6]).sub(p),f[u]=Re(p,d,y,t)):f[u]=Re(p,d,y,t)}ui(f,a);for(let u=0;u<n;u++){let p=u*t*6,y=u*t;for(let m=0;m<t;m++){let h=p+m*6,x=y+m;m===t-1?(c[h+0]=x,c[h+1]=x-t+1,c[h+2]=x+1,c[h+3]=x+1,c[h+4]=x+t,c[h+5]=x):(c[h+0]=x,c[h+1]=x+1,c[h+2]=x+t+1,c[h+3]=x+t+1,c[h+4]=x+t,c[h+5]=x)}}return{position:a,normal:o,uv:l,index:c}}function go(e,t=1,n=1,r=0,i=!0){let s=Array.isArray(n)?1:n,a=(n[0]??s)*10,o=(n[1]??s)*10,l=(n[2]??s)*10,c=Array.isArray(r)?0:r,f=r[0]??c,d=r[1]??c,u=r[2]??c,p=e.length/4,y=[e[0],e[1],e[2]],m=0;for(let h=0;h<p;h++){let x=h/p;m+=(Math.abs(y[0]-e[h*4+0])+Math.abs(y[1]-e[h*4+1])+Math.abs(y[2]-e[h*4+2]))/3,y[0]=e[h*4+0],y[1]=e[h*4+1],y[2]=e[h*4+2];let w=i?t*x:t,[_,g,v]=e.slice(h*4,h*4+3);e[h*4+0]=_+fe.n1d(1e3+f+m*a)*w,e[h*4+1]=g+fe.n1d(2e3+d+m*o)*w,e[h*4+2]=v+fe.n1d(3e3+u+m*l)*w}return e}function ft(e,[t,n,r]){let i=e.length/4,s=-1;for(;s++<i-1;)e[s*4+0]=e[s*4+0]+t,e[s*4+1]=e[s*4+1]+n,e[s*4+2]=e[s*4+2]+r;return e}function ut(e,t,n=1,r,i=!1){let[s=0,a=0,o=0]=r||e;s&&a&&o&&ft(e,[-s,-a,-o]);let l=e.length/4,c=-1;for(;c++<l-1;){let f=e.slice(c*4,c*4+3),d=c/l,u=H([...f],t,i?n*d:n);e[c*4+0]=u[0],e[c*4+1]=u[1],e[c*4+2]=u[2]}return s&&a&&o&&ft(e,[s,a,o]),e}function zo(e,t=.5,n=2,r=1){let i=Math.max(Math.min(t,1),0),s=Math.floor(Math.max(0,n));if(s<2)return[e];let a=e.length/4,o=Math.floor(a*i),l=te(Xe(e,i)),c=te(on(l));return[...o<0?[]:[e.slice(0,o*4)],...new Array(s).fill(null).map((f,d)=>{let u=e.slice((o-2)*4),p=d/n;return ut(u,c,r,void 0,!0),ut(u,l,p*6),u})].filter(f=>f.length>4)}export{ai as box,Fn as calculateNormals,oi as circle,zn as convertInstancedGeometry,Hn as curveToArray,Ke as extrudePath,on as findOrthogonalVector,D1 as flatten,ri as grid,ii as ground,R1 as interpolateArray,k1 as interpolateSkeleton,Xe as interpolateSkeletonVec,L1 as join,si as leaf,et as length2D,tt as length3D,G as lerp,fe as noise,go as noiseSkeleton,K1 as normalize2D,te as normalize3D,Re as ring,X1 as rotate2D,H as rotate3D,ei as rotateMesh3D,ut as rotateSkeleton,zo as splitSkeleton,ti as transferToGeometry,ni as translateMesh,ft as translateSkeleton,ci as triangle,fi as tube,ln as tube_old};
//# sourceMappingURL=index.js.map
