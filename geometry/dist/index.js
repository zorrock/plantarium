var bn=Object.create;var Pe=Object.defineProperty;var _n=Object.getOwnPropertyDescriptor;var wn=Object.getOwnPropertyNames;var Mn=Object.getPrototypeOf,An=Object.prototype.hasOwnProperty;var J=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Le=(e,t)=>{for(var n in t)Pe(e,n,{get:t[n],enumerable:!0})},Fn=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of wn(t))!An.call(e,i)&&i!==n&&Pe(e,i,{get:()=>t[i],enumerable:!(r=_n(t,i))||r.enumerable});return e};var mt=(e,t,n)=>(n=e!=null?bn(Mn(e)):{},Fn(t||!e||!e.__esModule?Pe(n,"default",{value:e,enumerable:!0}):n,e));var Rt=J((Be,He)=>{(function(e,t){typeof define=="function"&&define.amd?define([],t):typeof Be<"u"?t():(t(),e.FileSaver={})})(Be,function(){"use strict";function e(o,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}function t(o,l,c){var f=new XMLHttpRequest;f.open("GET",o),f.responseType="blob",f.onload=function(){a(f.response,l,c)},f.onerror=function(){console.error("could not download file")},f.send()}function n(o){var l=new XMLHttpRequest;l.open("HEAD",o,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function r(o){try{o.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),o.dispatchEvent(l)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,s=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(o,l,c){var f=i.URL||i.webkitURL,h=document.createElement("a");l=l||o.name||"download",h.download=l,h.rel="noopener",typeof o=="string"?(h.href=o,h.origin===location.origin?r(h):n(h.href)?t(o,l,c):r(h,h.target="_blank")):(h.href=f.createObjectURL(o),setTimeout(function(){f.revokeObjectURL(h.href)},4e4),setTimeout(function(){r(h)},0))}:"msSaveOrOpenBlob"in navigator?function(o,l,c){if(l=l||o.name||"download",typeof o!="string")navigator.msSaveOrOpenBlob(e(o,c),l);else if(n(o))t(o,l,c);else{var f=document.createElement("a");f.href=o,f.target="_blank",setTimeout(function(){r(f)})}}:function(o,l,c,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof o=="string")return t(o,l,c);var h=o.type==="application/octet-stream",u=/constructor/i.test(i.HTMLElement)||i.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||h&&u||s)&&typeof FileReader<"u"){var v=new FileReader;v.onloadend=function(){var y=v.result;y=m?y:y.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=y:location=y,f=null},v.readAsDataURL(o)}else{var p=i.URL||i.webkitURL,d=p.createObjectURL(o);f?f.location=d:location.href=d,f=null,setTimeout(function(){p.revokeObjectURL(d)},4e4)}});i.saveAs=a.saveAs=a,typeof He<"u"&&(He.exports=a)})});var Ae=J(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});function I1(e){var t=new Uint32Array(1);return t[0]=e[0]*1664525+1013904223,t}it.default=I1});var sn=J(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.makeNoise2D=void 0;var Fe=Ae(),V1=1/47,at=(Math.sqrt(2+1)-1)/2,j1=(1/Math.sqrt(2+1)-1)/2;function nn(e,t,n){return{dx:-t-e*at,dy:-n-e*at,xsb:t,ysb:n}}function C1(e){for(var t=[],n=0;n<ce.length;n+=4){for(var r=G1[ce[n]],i=null,s=null,a=0;a<r.length;a+=3)s=nn(r[a],r[a+1],r[a+2]),i===null?t[n/4]=s:i.next=s,i=s;s.next=nn(ce[n+1],ce[n+2],ce[n+3])}for(var o=[],n=0;n<st.length;n+=2)o[st[n]]=t[st[n+1]];for(var l=new Uint8Array(256),c=new Uint8Array(256),f=new Uint8Array(256),n=0;n<256;n++)f[n]=n;var h=new Uint32Array(1);h[0]=e,h=Fe.default(Fe.default(Fe.default(h)));for(var n=255;n>=0;n--){h=Fe.default(h);var u=new Uint32Array(1);u[0]=(h[0]+31)%(n+1),u[0]<0&&(u[0]+=n+1),l[n]=f[u[0]],c[n]=l[n]&14,f[u[0]]=f[n]}return function(m,v){for(var p=(m+v)*j1,d=m+p,y=v+p,_=Math.floor(d),g=Math.floor(y),w=(_+g)*at,b=m-(_+w),x=v-(g+w),E=d-_,M=y-g,z=E+M,S=E-M+1|z<<1|z+M<<2|z+E<<4,O=0,F=o[S];F!==void 0;F=F.next){var N=b+F.dx,A=x+F.dy,$=2-N*N-A*A;if($>0){var P=_+F.xsb,D=g+F.ysb,I=l[P&255],L=c[I+D&255],Y=rn[L]*N+rn[L+1]*A;O+=$*$*$*$*Y}}return O*V1}}Ee.makeNoise2D=C1;var G1=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],rn=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],st=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],ce=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0]});var an=J(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.makeNoise3D=void 0;var ze=Ae(),q1=1/103,Oe=(Math.sqrt(3+1)-1)/3,U1=(1/Math.sqrt(3+1)-1)/3;function ot(e,t,n,r){return{dx:-t-e*Oe,dy:-n-e*Oe,dz:-r-e*Oe,xsb:t,ysb:n,zsb:r}}function B1(e){for(var t=[],n=0;n<C.length;n+=9){for(var r=H1[C[n]],i=null,s=null,a=0;a<r.length;a+=4)s=ot(r[a],r[a+1],r[a+2],r[a+3]),i===null?t[n/9]=s:i.next=s,i=s;s.next=ot(C[n+1],C[n+2],C[n+3],C[n+4]),s.next.next=ot(C[n+5],C[n+6],C[n+7],C[n+8])}for(var o=[],n=0;n<ct.length;n+=2)o[ct[n]]=t[ct[n+1]];for(var l=new Uint8Array(256),c=new Uint8Array(256),f=new Uint8Array(256),n=0;n<256;n++)f[n]=n;var h=new Uint32Array(1);h[0]=e,h=ze.default(ze.default(ze.default(h)));for(var n=255;n>=0;n--){h=ze.default(h);var u=new Uint32Array(1);u[0]=(h[0]+31)%(n+1),u[0]<0&&(u[0]+=n+1),l[n]=f[u[0]],c[n]=l[n]%24*3,f[u[0]]=f[n]}return function(m,v,p){for(var d=(m+v+p)*U1,y=m+d,_=v+d,g=p+d,w=Math.floor(y),b=Math.floor(_),x=Math.floor(g),E=(w+b+x)*Oe,M=m-(w+E),z=v-(b+E),S=p-(x+E),O=y-w,F=_-b,N=g-x,A=O+F+N,$=F-N+1|O-F+1<<1|O-N+1<<2|A<<3|A+N<<5|A+F<<7|A+O<<9,P=0,D=o[$];D!==void 0;D=D.next){var I=M+D.dx,L=z+D.dy,Y=S+D.dz,U=2-I*I-L*L-Y*Y;if(U>0){var V=w+D.xsb,ie=b+D.ysb,se=x+D.zsb,ae=l[V&255],oe=l[ae+ie&255],G=c[oe+se&255],ke=lt[G]*I+lt[G+1]*L+lt[G+2]*Y;P+=U*U*U*U*ke}}return P*q1}}Te.makeNoise3D=B1;var H1=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],lt=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],ct=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],C=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0]});var on=J($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.makeNoise4D=void 0;var Se=Ae(),Y1=1/30,fe=(Math.sqrt(4+1)-1)/4,W1=(1/Math.sqrt(4+1)-1)/4;function Ne(e,t,n,r,i){return{dx:-t-e*fe,dy:-n-e*fe,dz:-r-e*fe,dw:-i-e*fe,xsb:t,ysb:n,zsb:r,wsb:i}}function Q1(e){for(var t=[],n=0;n<k.length;n+=16){for(var r=J1[k[n]],i=null,s=null,a=0;a<r.length;a+=5)s=Ne(r[a],r[a+1],r[a+2],r[a+3],r[a+4]),i===null?t[n/16]=s:i.next=s,i=s;s.next=Ne(k[n+1],k[n+2],k[n+3],k[n+4],k[n+5]),s.next.next=Ne(k[n+6],k[n+7],k[n+8],k[n+9],k[n+10]),s.next.next.next=Ne(k[n+11],k[n+12],k[n+13],k[n+14],k[n+15])}for(var o=[],n=0;n<ft.length;n+=2)o[ft[n]]=t[ft[n+1]];for(var l=new Uint8Array(256),c=new Uint8Array(256),f=new Uint8Array(256),n=0;n<256;n++)f[n]=n;var h=new Uint32Array(1);h[0]=e,h=Se.default(Se.default(Se.default(h)));for(var n=255;n>=0;n--){h=Se.default(h);var u=new Uint32Array(1);u[0]=(h[0]+31)%(n+1),u[0]<0&&(u[0]+=n+1),l[n]=f[u[0]],c[n]=l[n]&252,f[u[0]]=f[n]}return function(m,v,p,d){for(var y=(m+v+p+d)*W1,_=m+y,g=v+y,w=p+y,b=d+y,x=Math.floor(_),E=Math.floor(g),M=Math.floor(w),z=Math.floor(b),S=(x+E+M+z)*fe,O=m-(x+S),F=v-(E+S),N=p-(M+S),A=d-(z+S),$=_-x,P=g-E,D=w-M,I=b-z,L=$+P+D+I,Y=D-I+1|P-D+1<<1|P-I+1<<2|$-P+1<<3|$-D+1<<4|$-I+1<<5|L<<6|L+I<<8|L+D<<11|L+P<<14|L+$<<17,U=0,V=o[Y];V!==void 0;V=V.next){var ie=O+V.dx,se=F+V.dy,ae=N+V.dz,oe=A+V.dw,G=2-ie*ie-se*se-ae*ae-oe*oe;if(G>0){var ke=x+V.xsb,hn=E+V.ysb,mn=M+V.zsb,pn=z+V.wsb,vn=l[ke&255],yn=l[vn+hn&255],xn=l[yn+mn&255],de=c[xn+pn&255],gn=Re[de]*ie+Re[de+1]*se+Re[de+2]*ae+Re[de+3]*oe;U+=G*G*G*G*gn}}return U*Y1}}$e.makeNoise4D=Q1;var J1=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],Re=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],ft=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],k=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1]});var ln=J(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.makeNoise4D=B.makeNoise3D=B.makeNoise2D=void 0;var Z1=sn();Object.defineProperty(B,"makeNoise2D",{enumerable:!0,get:function(){return Z1.makeNoise2D}});var K1=an();Object.defineProperty(B,"makeNoise3D",{enumerable:!0,get:function(){return K1.makeNoise3D}});var X1=on();Object.defineProperty(B,"makeNoise4D",{enumerable:!0,get:function(){return X1.makeNoise4D}})});function Ie(e){let t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function he(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function pt(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function Ve(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function je(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function vt(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function yt(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function pe(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function xt(e,t){let n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}function gt(e,t){let n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function Ce(e){let t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function bt(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function _t(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function me(e,t){let n=t[0],r=t[1],i=t[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e}function Ge(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function qe(e,t,n){let r=t[0],i=t[1],s=t[2],a=n[0],o=n[1],l=n[2];return e[0]=i*l-s*o,e[1]=s*a-r*l,e[2]=r*o-i*a,e}function wt(e,t,n,r){let i=t[0],s=t[1],a=t[2];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=a+r*(n[2]-a),e}function Mt(e,t,n){let r=t[0],i=t[1],s=t[2],a=n[3]*r+n[7]*i+n[11]*s+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/a,e}function At(e,t,n){let r=t[0],i=t[1],s=t[2],a=n[3]*r+n[7]*i+n[11]*s+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*s)/a,e[1]=(n[1]*r+n[5]*i+n[9]*s)/a,e[2]=(n[2]*r+n[6]*i+n[10]*s)/a,e}function Ft(e,t,n){let r=t[0],i=t[1],s=t[2],a=n[0],o=n[1],l=n[2],c=n[3],f=o*s-l*i,h=l*r-a*s,u=a*i-o*r,m=o*u-l*h,v=l*f-a*u,p=a*h-o*f,d=c*2;return f*=d,h*=d,u*=d,m*=2,v*=2,p*=2,e[0]=r+f+m,e[1]=i+h+v,e[2]=s+u+p,e}var Et=function(){let e=[0,0,0],t=[0,0,0];return function(n,r){he(e,n),he(t,r),me(e,e),me(t,t);let i=Ge(e,t);return i>1?0:i<-1?Math.PI:Math.acos(i)}}();function zt(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}var Ot=e=>!!e.length;var T=class extends Array{constructor(t=0,n=t,r=t){return super(t,n,r),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(t){this[0]=t}set y(t){this[1]=t}set z(t){this[2]=t}set(t,n=t,r=t){return Ot(t)?this.copy(t):(pt(this,t,n,r),this)}copy(t){return he(this,t),this}add(t,n){return n?Ve(this,t,n):Ve(this,this,t),this}sub(t,n){return n?je(this,t,n):je(this,this,t),this}multiply(t){return t.length?vt(this,this,t):pe(this,this,t),this}divide(t){return t.length?yt(this,this,t):pe(this,this,1/t),this}inverse(t=this){return _t(this,t),this}len(){return Ie(this)}distance(t){return t?xt(this,t):Ie(this)}squaredLen(){return Ce(this)}squaredDistance(t){return t?gt(this,t):Ce(this)}negate(t=this){return bt(this,t),this}cross(t,n){return n?qe(this,t,n):qe(this,this,t),this}scale(t){return pe(this,this,t),this}normalize(){return me(this,this),this}dot(t){return Ge(this,t)}equals(t){return zt(this,t)}applyMatrix4(t){return Mt(this,this,t),this}scaleRotateMatrix4(t){return At(this,this,t),this}applyQuaternion(t){return Ft(this,this,t),this}angle(t){return Et(this,t)}lerp(t,n){return wt(this,this,t,n),this}clone(){return new T(this[0],this[1],this[2])}fromArray(t,n=0){return this[0]=t[n],this[1]=t[n+1],this[2]=t[n+2],this}toArray(t=[],n=0){return t[n]=this[0],t[n+1]=this[1],t[n+2]=this[2],t}transformDirection(t){let n=this[0],r=this[1],i=this[2];return this[0]=t[0]*n+t[4]*r+t[8]*i,this[1]=t[1]*n+t[5]*r+t[9]*i,this[2]=t[2]*n+t[6]*r+t[10]*i,this.normalize()}};var W=new T,zn=1,On=1,Tt=!1,ve=class{constructor(t,n={}){this.raycast="box",t.canvas||console.error("gl not passed as fist argument to Geometry"),this.gl=t,this.attributes=n,this.id=zn++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let r in n)this.addAttribute(r,n[r])}addAttribute(t,n){if(this.attributes[t]=n,n.id=On++,n.size=n.size||1,n.type=n.type||(n.data.constructor===Float32Array?this.gl.FLOAT:n.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),n.target=t==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,n.normalized=n.normalized||!1,n.stride=n.stride||0,n.offset=n.offset||0,n.count=n.count||(n.stride?n.data.byteLength/n.stride:n.data.length/n.size),n.divisor=n.instanced||0,n.needsUpdate=!1,n.buffer||(n.buffer=this.gl.createBuffer(),this.updateAttribute(n)),n.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==n.count*n.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,n.count*n.divisor);this.instancedCount=n.count*n.divisor}else t==="index"?this.drawRange.count=n.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,n.count))}updateAttribute(t){this.glState.boundBuffer!==t.buffer&&(this.gl.bindBuffer(t.target,t.buffer),this.glState.boundBuffer=t.buffer),this.gl.bufferData(t.target,t.data,this.gl.STATIC_DRAW),t.needsUpdate=!1}setIndex(t){this.addAttribute("index",t)}setDrawRange(t,n){this.drawRange.start=t,this.drawRange.count=n}setInstancedCount(t){this.instancedCount=t}createVAO(t){this.VAOs[t.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.bindAttributes(t)}bindAttributes(t){t.attributeLocations.forEach((n,{name:r,type:i})=>{if(!this.attributes[r]){console.warn(`active attribute ${r} not being supplied`);return}let s=this.attributes[r];this.gl.bindBuffer(s.target,s.buffer),this.glState.boundBuffer=s.buffer;let a=1;i===35674&&(a=2),i===35675&&(a=3),i===35676&&(a=4);let o=s.size/a,l=a===1?0:a*a*a,c=a===1?0:a*a;for(let f=0;f<a;f++)this.gl.vertexAttribPointer(n+f,o,s.type,s.normalized,s.stride+l,s.offset+f*c),this.gl.enableVertexAttribArray(n+f),this.gl.renderer.vertexAttribDivisor(n+f,s.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:t,mode:n=this.gl.TRIANGLES}){this.gl.renderer.currentGeometry!==`${this.id}_${t.attributeOrder}`&&(this.VAOs[t.attributeOrder]||this.createVAO(t),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${t.attributeOrder}`),t.attributeLocations.forEach((r,{name:i})=>{let s=this.attributes[i];s.needsUpdate&&this.updateAttribute(s)}),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(n,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*2,this.instancedCount):this.gl.renderer.drawArraysInstanced(n,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(n,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*2):this.gl.drawArrays(n,this.drawRange.start,this.drawRange.count)}getPosition(){let t=this.attributes.position;if(t.data)return t;if(!Tt)return console.warn("No position buffer data found to compute bounds"),Tt=!0}computeBoundingBox(t=null){t||(t=this.getPosition());let n=t.data,r=t.offset||0,i=t.stride||t.size;this.bounds||(this.bounds={min:new T,max:new T,center:new T,scale:new T,radius:1/0});let s=this.bounds.min,a=this.bounds.max,o=this.bounds.center,l=this.bounds.scale;s.set(1/0),a.set(-1/0);for(let c=r,f=n.length;c<f;c+=i){let h=n[c],u=n[c+1],m=n[c+2];s.x=Math.min(h,s.x),s.y=Math.min(u,s.y),s.z=Math.min(m,s.z),a.x=Math.max(h,a.x),a.y=Math.max(u,a.y),a.z=Math.max(m,a.z)}l.sub(a,s),o.add(s,a).divide(2)}computeBoundingSphere(t=null){t||(t=this.getPosition());let n=t.data,r=t.offset||0,i=t.stride||t.size;this.bounds||this.computeBoundingBox(t);let s=0;for(let a=r,o=n.length;a<o;a+=i)W.fromArray(n,a),s=Math.max(s,this.bounds.center.squaredDistance(W));this.bounds.radius=Math.sqrt(s)}computeVertexNormals(){let t=this.attributes.position;if(!t)return;let n=this.attributes.normal;n?n.data.fill(0):(this.addAttribute("normal",{size:3,data:new Float32Array(t.count*3)}),n=this.attributes.normal);let r=new T,i=new T,s=new T,a=new T,o=new T,l=new T,c=new T,f=new T,h=this.attributes.index;if(h){let u,m,v;for(let p=0,d=h.count;p<d;p+=3)u=h.data[p],m=h.data[p+1],v=h.data[p+2],r.fromArray(t.data,u*t.size),i.fromArray(t.data,m*t.size),s.fromArray(t.data,v*t.size),c.sub(s,i),f.sub(r,i),c.cross(f),a.fromArray(n.data,u*n.size),o.fromArray(n.data,m*n.size),l.fromArray(n.data,v*n.size),a.add(c),o.add(c),l.add(c),u*=n.size,n.data[u]=a.x,n.data[u+1]=a.y,n.data[u+2]=a.z,m*=n.size,n.data[m]=o.x,n.data[m+1]=o.y,n.data[m+2]=o.z,v*=n.size,n.data[v]=l.x,n.data[v+1]=l.y,n.data[v+2]=l.z}else for(let u=0,m=t.count;u<m;u+=3)r.fromArray(t.data,u*t.size),i.fromArray(t.data,(u+1)*t.size),s.fromArray(t.data,(u+2)*t.size),c.sub(s,i),f.sub(r,i),c.cross(f),n.data[u*n.size]=c.x,n.data[u*n.size+1]=c.y,n.data[u*n.size+2]=c.z,n.data[(u+1)*n.size]=c.x,n.data[(u+1)*n.size+1]=c.y,n.data[(u+1)*n.size+2]=c.z,n.data[(u+2)*n.size]=c.x,n.data[(u+2)*n.size+1]=c.y,n.data[(u+2)*n.size+2]=c.z;this.normalizeNormals(),n.needsUpdate=!0}normalizeNormals(){let t=this.attributes.normal;for(let n=0,r=t.count;n<r;n++)W.fromArray(t.data,n*t.size),W.normalize(),t.data[n*t.size]=W.x,t.data[n*t.size+1]=W.y,t.data[n*t.size+2]=W.z}remove(){for(let t in this.attributes)this.gl.deleteBuffer(this.attributes[t].buffer),delete this.attributes[t]}};var St;function Ue(e){let t=e.position,n=e.index,r=e.normal;for(let i=0;i<n.length/3;i++){let s=new T(t[n[i*3+0]*3+0],t[n[i*3+0]*3+1],t[n[i*3+0]*3+2]),a=new T(t[n[i*3+1]*3+0]-s.x,t[n[i*3+1]*3+1]-s.y,t[n[i*3+1]*3+2]-s.z),o=new T(t[n[i*3+2]*3+0]-s.x,t[n[i*3+2]*3+1]-s.y,t[n[i*3+2]*3+2]-s.z),l=new T().cross(a,o).normalize();l[0]===0&&l[1]===0&&l[3]===0&&(l=St);for(let c=0;c<3;c++)r[n[i*3+c]*3+0]=l.x,r[n[i*3+c]*3+1]=l.y,r[n[i*3+c]*3+2]=l.z;St=l}return e}function Tn(e,t=[0,0,0],n=[0,0,0],r=[1,1,1]){let i=new Float32Array(e.position.length),s=e.position.length,a=e.position;for(let o=0;o<s;o+=3){let l=a[o+0]*r[0],c=a[o+1]*r[1],f=a[o+2]*r[2],h=l,u=Math.cos(n[0])*c-Math.sin(n[0])*f,m=Math.sin(n[0])*c+Math.cos(n[0])*f,v=Math.cos(n[1])*h-Math.sin(n[1])*m,p=u,d=Math.sin(n[1])*h+Math.cos(n[1])*m;i[o+0]=v+t[0],i[o+1]=p+t[1],i[o+2]=d+t[2]}return{position:i,uv:e.uv,normal:e.normal,index:e.index}}function Sn(e){let t=[],n={position:e.position,normal:e.normal,uv:e.uv,index:e.index},r=e.offset,i=e.rotation,s=e.scale,a=e.offset.length;for(let o=0;o<a;o+=3)t.push(Tn(n,[r[o+0],r[o+1],r[o+2]],[i[o+0],i[o+1],i[o+2]],[s[o+0],s[o+1],s[o+2]]));return t}var xe={};Le(xe,{computeControlPoints:()=>ye,drawControlPoints:()=>$n,drawCurve:()=>Dn,drawLinear:()=>Rn,drawSamplePoints:()=>kn,toArray:()=>Nt});function Nn(e,t,n,r,i,s,a,o,l,c){let f=i-n,h=a-i,u=l-a,m=s-r,v=o-s,p=c-o,d,y,_,g,w=-1e4,b=-1e4,x=[{x:n,y:r}];for(let E=1;E<e;E++){let M=E/e;d=n+f*M,_=i+h*M;let z=a+u*M;d+=(_-d)*M,_+=(z-_)*M,y=r+m*M,g=s+v*M;let S=o+p*M;y+=(g-y)*M,g+=(S-g)*M;let O=d+(_-d)*M,F=y+(g-y)*M,N=O-w,A=F-b;N*N+A*A>t&&(x.push({x:O,y:F}),w=O,b=F)}return x.push({x:l,y:c}),x}function ye(e){let t=e.length-1;return e.map((n,r,i)=>{if(r===0)return{rx:i[r+1].x*.4*0,ry:n.y+(i[r+1].y-n.y)*.4*0};if(r===t)return{lx:i[r-1].x+(n.x-i[r-1].x)*.4*2,ly:i[r-1].y+(n.y-i[r-1].y)*.4*2};if(n.y>i[r+1].y&&n.y>i[r-1].y||n.y<i[r+1].y&&n.y<i[r-1].y)return{lx:i[r-1].x+(n.x-i[r-1].x)*.4,ly:n.y,rx:n.x+(i[r+1].x-n.x)*.4,ry:n.y};{let a={x:i[r-1].x-i[r+1].x,y:i[r-1].y-i[r+1].y},o=Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2));a.x/=o,a.y/=o;let l=i[r+1].x-n.x,c=n.x-i[r-1].x;return{lx:n.x+a.x*c*.4,ly:n.y+a.y*c*.4,rx:n.x-a.x*l*.4,ry:n.y-a.y*l*.4}}})}function Rn(e,t){e.save(),e.beginPath(),t.forEach((n,r,i)=>{r<i.length-1&&(e.strokeStyle="gray",e.moveTo(n.x,n.y),e.lineTo(i[r+1].x,i[r+1].y))}),e.stroke(),e.restore()}function $n(e,t){ye(t).forEach((n,r)=>{"rx"in n&&"ry"in n&&(e.fillRect(n.rx-1,n.ry-1,2,2),e.beginPath(),e.moveTo(t[r].x,t[r].y),e.lineTo(n.rx,n.ry),e.stroke()),"lx"in n&&"ly"in n&&(e.fillRect(n.lx-1,n.ly-1,2,2),e.beginPath(),e.moveTo(t[r].x,t[r].y),e.lineTo(n.lx,n.ly),e.stroke())})}function Dn(e,t){let n=ye(t);t.forEach((r,i,s)=>{i<s.length-1&&(e.moveTo(r.x,r.y),e.bezierCurveTo(n[i].rx,n[i].ry,n[i+1].lx,n[i+1].ly,s[i+1].x,s[i+1].y),e.stroke())})}function Nt(e){let t=e.length-1,n={},r=ye(e);return e.map((i,s,a)=>{if(s<t)return Nn(t*20,0,i.x,i.y,r[s].rx,r[s].ry,r[s+1].lx,r[s+1].ly,a[s+1].x,a[s+1].y)}).flat().filter(i=>!i||i.x in n?!1:(n[i.x]=!0,!0))}function kn(e,t){e.save(),e.fillStyle="red",Nt(t).forEach(n=>{e.fillRect(n.x-1,n.y-1,2,2)}),e.restore()}var Pn=mt(Rt(),1);var Vn={amountEmitters:0,amountCallbacks:0,emitters:[]};typeof self<"u"&&"window"in self&&(globalThis.debug=Vn);function le(){}function $t(e){return e()}function Ye(e){e.forEach($t)}function Dt(e){return typeof e=="function"}function kt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Cn(e){return Object.keys(e).length===0}var ji=Promise.resolve();var Ci=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Gn(e,t){let n=e.$$;n.fragment!==null&&(Ye(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}var qn;typeof HTMLElement=="function"&&(qn=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:e}=this.$$;this.$$.on_disconnect=e.map($t).filter(Dt);for(let t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){Ye(this.$$.on_disconnect)}$destroy(){Gn(this,1),this.$destroy=le}$on(e,t){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let r=n.indexOf(t);r!==-1&&n.splice(r,1)}}$set(e){this.$$set&&!Cn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});var Z=[];function Pt(e,t=le){let n,r=new Set;function i(o){if(kt(e,o)&&(e=o,n)){let l=!Z.length;for(let c of r)c[1](),Z.push(c,e);if(l){for(let c=0;c<Z.length;c+=2)Z[c][0](Z[c+1]);Z.length=0}}}function s(o){i(o(e))}function a(o,l=le){let c=[o,l];return r.add(c),r.size===1&&(n=t(i)||le),o(e),()=>{r.delete(c),r.size===0&&(n(),n=null)}}return{set:i,update:s,subscribe:a}}var Un=typeof globalThis.WorkerGlobalScope<"u"&&self instanceof globalThis.WorkerGlobalScope,ge=[],be=2,K=0,Bn={},We=0,Hn=["#00ffff","#f0ffff","#f5f5dc","#000000","#0000ff","#a52a2a","#00ffff","#00008b","#008b8b","#a9a9a9","#006400","#bdb76b","#8b008b","#556b2f","#ff8c00","#9932cc","#8b0000","#e9967a","#9400d3","#ff00ff","#ffd700","#008000","#4b0082","#f0e68c","#add8e6","#e0ffff","#90ee90","#d3d3d3","#ffb6c1","#ffffe0","#00ff00","#ff00ff","#800000","#000080","#808000","#ffa500","#ffc0cb","#800080","#800080","#ff0000","#c0c0c0","#ffffff","#ffff00"],Qe="plant.log.history",Je="localStorage"in globalThis,X=Je?Qe in localStorage?JSON.parse(localStorage.getItem(Qe)):[]:[];Je&&(be=parseInt(localStorage.getItem("pt-log-level"))||2);function Yn(){Je&&localStorage.setItem(Qe,JSON.stringify(X))}var ee;function _e(e){K=Math.max(K,e.length);let t=We;Bn[e]=Hn[We],We++;let n=(i,s)=>{if(!Un&&(X.push({scope:e,args:i,level:be,date:Date.now()}),X.length=Math.min(100,X.length),ee&&ee.set(X),Yn(),(!ge.length||ge.includes(e))&&s<=be)){if(i instanceof Error){console.error(`[${e.padEnd(K," ")}]`,i);return}if(Array.isArray(i)&&typeof i[0]=="string"&&typeof i[1]=="object"){console.groupCollapsed(`%c[${e.padEnd(K," ")}]`,`color: hsl(${t*30}deg 68% 64%); font-weight: bold;`,i[0]),console.log(...i.slice(1)),console.groupEnd();return}s===0&&console.log(`%c[${e.padEnd(K," ")}]`,`color: hsl(${t*30}deg 68% 64%); font-weight: bold;`,...i),s===1&&console.warn(`[${e.padEnd(K," ")}]`,...i)}},r=(...i)=>n(i,2);return r.warn=(...i)=>n(i,1),r.error=i=>n(i,0),r}_e.getStore=function(){return ee||(ee=Pt([]),ee)};_e.getHistory=function(){return[...X]};_e.setFilter=(...e)=>{ge=e,console.log("[log] set filter",{filters:ge})};_e.setLevel=(e=0)=>{be=e,localStorage.setItem("pt-log-level",""+e)};function Qn(e){return xe.toArray(e).map(t=>t.y)}var R=1e-6,j=typeof Float32Array<"u"?Float32Array:Array,Ze=Math.random;var Ys=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var we={};Le(we,{add:()=>$r,adjoint:()=>rr,clone:()=>Zn,copy:()=>Kn,create:()=>Jn,determinant:()=>ir,equals:()=>Lr,exactEquals:()=>Pr,frob:()=>Rr,fromQuat:()=>wr,fromQuat2:()=>yr,fromRotation:()=>hr,fromRotationTranslation:()=>jt,fromRotationTranslationScale:()=>br,fromRotationTranslationScaleOrigin:()=>_r,fromScaling:()=>dr,fromTranslation:()=>ur,fromValues:()=>Xn,fromXRotation:()=>mr,fromYRotation:()=>pr,fromZRotation:()=>vr,frustum:()=>Mr,getRotation:()=>gr,getScaling:()=>Ct,getTranslation:()=>xr,identity:()=>It,invert:()=>nr,lookAt:()=>Tr,mul:()=>Ir,multiply:()=>Vt,multiplyScalar:()=>Dr,multiplyScalarAndAdd:()=>kr,ortho:()=>zr,orthoNO:()=>qt,orthoZO:()=>Or,perspective:()=>Ar,perspectiveFromFieldOfView:()=>Er,perspectiveNO:()=>Gt,perspectiveZO:()=>Fr,rotate:()=>or,rotateX:()=>lr,rotateY:()=>cr,rotateZ:()=>fr,scale:()=>ar,set:()=>er,str:()=>Nr,sub:()=>Vr,subtract:()=>Ut,targetTo:()=>Sr,translate:()=>sr,transpose:()=>tr});function Jn(){var e=new j(16);return j!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Zn(e){var t=new j(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Kn(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Xn(e,t,n,r,i,s,a,o,l,c,f,h,u,m,v,p){var d=new j(16);return d[0]=e,d[1]=t,d[2]=n,d[3]=r,d[4]=i,d[5]=s,d[6]=a,d[7]=o,d[8]=l,d[9]=c,d[10]=f,d[11]=h,d[12]=u,d[13]=m,d[14]=v,d[15]=p,d}function er(e,t,n,r,i,s,a,o,l,c,f,h,u,m,v,p,d){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=s,e[5]=a,e[6]=o,e[7]=l,e[8]=c,e[9]=f,e[10]=h,e[11]=u,e[12]=m,e[13]=v,e[14]=p,e[15]=d,e}function It(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function tr(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],s=t[6],a=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=s,e[11]=t[14],e[12]=i,e[13]=a,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function nr(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],a=t[4],o=t[5],l=t[6],c=t[7],f=t[8],h=t[9],u=t[10],m=t[11],v=t[12],p=t[13],d=t[14],y=t[15],_=n*o-r*a,g=n*l-i*a,w=n*c-s*a,b=r*l-i*o,x=r*c-s*o,E=i*c-s*l,M=f*p-h*v,z=f*d-u*v,S=f*y-m*v,O=h*d-u*p,F=h*y-m*p,N=u*y-m*d,A=_*N-g*F+w*O+b*S-x*z+E*M;return A?(A=1/A,e[0]=(o*N-l*F+c*O)*A,e[1]=(i*F-r*N-s*O)*A,e[2]=(p*E-d*x+y*b)*A,e[3]=(u*x-h*E-m*b)*A,e[4]=(l*S-a*N-c*z)*A,e[5]=(n*N-i*S+s*z)*A,e[6]=(d*w-v*E-y*g)*A,e[7]=(f*E-u*w+m*g)*A,e[8]=(a*F-o*S+c*M)*A,e[9]=(r*S-n*F-s*M)*A,e[10]=(v*x-p*w+y*_)*A,e[11]=(h*w-f*x-m*_)*A,e[12]=(o*z-a*O-l*M)*A,e[13]=(n*O-r*z+i*M)*A,e[14]=(p*g-v*b-d*_)*A,e[15]=(f*b-h*g+u*_)*A,e):null}function rr(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],a=t[4],o=t[5],l=t[6],c=t[7],f=t[8],h=t[9],u=t[10],m=t[11],v=t[12],p=t[13],d=t[14],y=t[15];return e[0]=o*(u*y-m*d)-h*(l*y-c*d)+p*(l*m-c*u),e[1]=-(r*(u*y-m*d)-h*(i*y-s*d)+p*(i*m-s*u)),e[2]=r*(l*y-c*d)-o*(i*y-s*d)+p*(i*c-s*l),e[3]=-(r*(l*m-c*u)-o*(i*m-s*u)+h*(i*c-s*l)),e[4]=-(a*(u*y-m*d)-f*(l*y-c*d)+v*(l*m-c*u)),e[5]=n*(u*y-m*d)-f*(i*y-s*d)+v*(i*m-s*u),e[6]=-(n*(l*y-c*d)-a*(i*y-s*d)+v*(i*c-s*l)),e[7]=n*(l*m-c*u)-a*(i*m-s*u)+f*(i*c-s*l),e[8]=a*(h*y-m*p)-f*(o*y-c*p)+v*(o*m-c*h),e[9]=-(n*(h*y-m*p)-f*(r*y-s*p)+v*(r*m-s*h)),e[10]=n*(o*y-c*p)-a*(r*y-s*p)+v*(r*c-s*o),e[11]=-(n*(o*m-c*h)-a*(r*m-s*h)+f*(r*c-s*o)),e[12]=-(a*(h*d-u*p)-f*(o*d-l*p)+v*(o*u-l*h)),e[13]=n*(h*d-u*p)-f*(r*d-i*p)+v*(r*u-i*h),e[14]=-(n*(o*d-l*p)-a*(r*d-i*p)+v*(r*l-i*o)),e[15]=n*(o*u-l*h)-a*(r*u-i*h)+f*(r*l-i*o),e}function ir(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],f=e[9],h=e[10],u=e[11],m=e[12],v=e[13],p=e[14],d=e[15],y=t*a-n*s,_=t*o-r*s,g=t*l-i*s,w=n*o-r*a,b=n*l-i*a,x=r*l-i*o,E=c*v-f*m,M=c*p-h*m,z=c*d-u*m,S=f*p-h*v,O=f*d-u*v,F=h*d-u*p;return y*F-_*O+g*S+w*z-b*M+x*E}function Vt(e,t,n){var r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],c=t[6],f=t[7],h=t[8],u=t[9],m=t[10],v=t[11],p=t[12],d=t[13],y=t[14],_=t[15],g=n[0],w=n[1],b=n[2],x=n[3];return e[0]=g*r+w*o+b*h+x*p,e[1]=g*i+w*l+b*u+x*d,e[2]=g*s+w*c+b*m+x*y,e[3]=g*a+w*f+b*v+x*_,g=n[4],w=n[5],b=n[6],x=n[7],e[4]=g*r+w*o+b*h+x*p,e[5]=g*i+w*l+b*u+x*d,e[6]=g*s+w*c+b*m+x*y,e[7]=g*a+w*f+b*v+x*_,g=n[8],w=n[9],b=n[10],x=n[11],e[8]=g*r+w*o+b*h+x*p,e[9]=g*i+w*l+b*u+x*d,e[10]=g*s+w*c+b*m+x*y,e[11]=g*a+w*f+b*v+x*_,g=n[12],w=n[13],b=n[14],x=n[15],e[12]=g*r+w*o+b*h+x*p,e[13]=g*i+w*l+b*u+x*d,e[14]=g*s+w*c+b*m+x*y,e[15]=g*a+w*f+b*v+x*_,e}function sr(e,t,n){var r=n[0],i=n[1],s=n[2],a,o,l,c,f,h,u,m,v,p,d,y;return t===e?(e[12]=t[0]*r+t[4]*i+t[8]*s+t[12],e[13]=t[1]*r+t[5]*i+t[9]*s+t[13],e[14]=t[2]*r+t[6]*i+t[10]*s+t[14],e[15]=t[3]*r+t[7]*i+t[11]*s+t[15]):(a=t[0],o=t[1],l=t[2],c=t[3],f=t[4],h=t[5],u=t[6],m=t[7],v=t[8],p=t[9],d=t[10],y=t[11],e[0]=a,e[1]=o,e[2]=l,e[3]=c,e[4]=f,e[5]=h,e[6]=u,e[7]=m,e[8]=v,e[9]=p,e[10]=d,e[11]=y,e[12]=a*r+f*i+v*s+t[12],e[13]=o*r+h*i+p*s+t[13],e[14]=l*r+u*i+d*s+t[14],e[15]=c*r+m*i+y*s+t[15]),e}function ar(e,t,n){var r=n[0],i=n[1],s=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function or(e,t,n,r){var i=r[0],s=r[1],a=r[2],o=Math.hypot(i,s,a),l,c,f,h,u,m,v,p,d,y,_,g,w,b,x,E,M,z,S,O,F,N,A,$;return o<R?null:(o=1/o,i*=o,s*=o,a*=o,l=Math.sin(n),c=Math.cos(n),f=1-c,h=t[0],u=t[1],m=t[2],v=t[3],p=t[4],d=t[5],y=t[6],_=t[7],g=t[8],w=t[9],b=t[10],x=t[11],E=i*i*f+c,M=s*i*f+a*l,z=a*i*f-s*l,S=i*s*f-a*l,O=s*s*f+c,F=a*s*f+i*l,N=i*a*f+s*l,A=s*a*f-i*l,$=a*a*f+c,e[0]=h*E+p*M+g*z,e[1]=u*E+d*M+w*z,e[2]=m*E+y*M+b*z,e[3]=v*E+_*M+x*z,e[4]=h*S+p*O+g*F,e[5]=u*S+d*O+w*F,e[6]=m*S+y*O+b*F,e[7]=v*S+_*O+x*F,e[8]=h*N+p*A+g*$,e[9]=u*N+d*A+w*$,e[10]=m*N+y*A+b*$,e[11]=v*N+_*A+x*$,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function lr(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[4],a=t[5],o=t[6],l=t[7],c=t[8],f=t[9],h=t[10],u=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*i+c*r,e[5]=a*i+f*r,e[6]=o*i+h*r,e[7]=l*i+u*r,e[8]=c*i-s*r,e[9]=f*i-a*r,e[10]=h*i-o*r,e[11]=u*i-l*r,e}function cr(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[0],a=t[1],o=t[2],l=t[3],c=t[8],f=t[9],h=t[10],u=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i-c*r,e[1]=a*i-f*r,e[2]=o*i-h*r,e[3]=l*i-u*r,e[8]=s*r+c*i,e[9]=a*r+f*i,e[10]=o*r+h*i,e[11]=l*r+u*i,e}function fr(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[0],a=t[1],o=t[2],l=t[3],c=t[4],f=t[5],h=t[6],u=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i+c*r,e[1]=a*i+f*r,e[2]=o*i+h*r,e[3]=l*i+u*r,e[4]=c*i-s*r,e[5]=f*i-a*r,e[6]=h*i-o*r,e[7]=u*i-l*r,e}function ur(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function dr(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function hr(e,t,n){var r=n[0],i=n[1],s=n[2],a=Math.hypot(r,i,s),o,l,c;return a<R?null:(a=1/a,r*=a,i*=a,s*=a,o=Math.sin(t),l=Math.cos(t),c=1-l,e[0]=r*r*c+l,e[1]=i*r*c+s*o,e[2]=s*r*c-i*o,e[3]=0,e[4]=r*i*c-s*o,e[5]=i*i*c+l,e[6]=s*i*c+r*o,e[7]=0,e[8]=r*s*c+i*o,e[9]=i*s*c-r*o,e[10]=s*s*c+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function mr(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function pr(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function vr(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function jt(e,t,n){var r=t[0],i=t[1],s=t[2],a=t[3],o=r+r,l=i+i,c=s+s,f=r*o,h=r*l,u=r*c,m=i*l,v=i*c,p=s*c,d=a*o,y=a*l,_=a*c;return e[0]=1-(m+p),e[1]=h+_,e[2]=u-y,e[3]=0,e[4]=h-_,e[5]=1-(f+p),e[6]=v+d,e[7]=0,e[8]=u+y,e[9]=v-d,e[10]=1-(f+m),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function yr(e,t){var n=new j(3),r=-t[0],i=-t[1],s=-t[2],a=t[3],o=t[4],l=t[5],c=t[6],f=t[7],h=r*r+i*i+s*s+a*a;return h>0?(n[0]=(o*a+f*r+l*s-c*i)*2/h,n[1]=(l*a+f*i+c*r-o*s)*2/h,n[2]=(c*a+f*s+o*i-l*r)*2/h):(n[0]=(o*a+f*r+l*s-c*i)*2,n[1]=(l*a+f*i+c*r-o*s)*2,n[2]=(c*a+f*s+o*i-l*r)*2),jt(e,t,n),e}function xr(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Ct(e,t){var n=t[0],r=t[1],i=t[2],s=t[4],a=t[5],o=t[6],l=t[8],c=t[9],f=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(s,a,o),e[2]=Math.hypot(l,c,f),e}function gr(e,t){var n=new j(3);Ct(n,t);var r=1/n[0],i=1/n[1],s=1/n[2],a=t[0]*r,o=t[1]*i,l=t[2]*s,c=t[4]*r,f=t[5]*i,h=t[6]*s,u=t[8]*r,m=t[9]*i,v=t[10]*s,p=a+f+v,d=0;return p>0?(d=Math.sqrt(p+1)*2,e[3]=.25*d,e[0]=(h-m)/d,e[1]=(u-l)/d,e[2]=(o-c)/d):a>f&&a>v?(d=Math.sqrt(1+a-f-v)*2,e[3]=(h-m)/d,e[0]=.25*d,e[1]=(o+c)/d,e[2]=(u+l)/d):f>v?(d=Math.sqrt(1+f-a-v)*2,e[3]=(u-l)/d,e[0]=(o+c)/d,e[1]=.25*d,e[2]=(h+m)/d):(d=Math.sqrt(1+v-a-f)*2,e[3]=(o-c)/d,e[0]=(u+l)/d,e[1]=(h+m)/d,e[2]=.25*d),e}function br(e,t,n,r){var i=t[0],s=t[1],a=t[2],o=t[3],l=i+i,c=s+s,f=a+a,h=i*l,u=i*c,m=i*f,v=s*c,p=s*f,d=a*f,y=o*l,_=o*c,g=o*f,w=r[0],b=r[1],x=r[2];return e[0]=(1-(v+d))*w,e[1]=(u+g)*w,e[2]=(m-_)*w,e[3]=0,e[4]=(u-g)*b,e[5]=(1-(h+d))*b,e[6]=(p+y)*b,e[7]=0,e[8]=(m+_)*x,e[9]=(p-y)*x,e[10]=(1-(h+v))*x,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function _r(e,t,n,r,i){var s=t[0],a=t[1],o=t[2],l=t[3],c=s+s,f=a+a,h=o+o,u=s*c,m=s*f,v=s*h,p=a*f,d=a*h,y=o*h,_=l*c,g=l*f,w=l*h,b=r[0],x=r[1],E=r[2],M=i[0],z=i[1],S=i[2],O=(1-(p+y))*b,F=(m+w)*b,N=(v-g)*b,A=(m-w)*x,$=(1-(u+y))*x,P=(d+_)*x,D=(v+g)*E,I=(d-_)*E,L=(1-(u+p))*E;return e[0]=O,e[1]=F,e[2]=N,e[3]=0,e[4]=A,e[5]=$,e[6]=P,e[7]=0,e[8]=D,e[9]=I,e[10]=L,e[11]=0,e[12]=n[0]+M-(O*M+A*z+D*S),e[13]=n[1]+z-(F*M+$*z+I*S),e[14]=n[2]+S-(N*M+P*z+L*S),e[15]=1,e}function wr(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],a=n+n,o=r+r,l=i+i,c=n*a,f=r*a,h=r*o,u=i*a,m=i*o,v=i*l,p=s*a,d=s*o,y=s*l;return e[0]=1-h-v,e[1]=f+y,e[2]=u-d,e[3]=0,e[4]=f-y,e[5]=1-c-v,e[6]=m+p,e[7]=0,e[8]=u+d,e[9]=m-p,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Mr(e,t,n,r,i,s,a){var o=1/(n-t),l=1/(i-r),c=1/(s-a);return e[0]=s*2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s*2*l,e[6]=0,e[7]=0,e[8]=(n+t)*o,e[9]=(i+r)*l,e[10]=(a+s)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*s*2*c,e[15]=0,e}function Gt(e,t,n,r,i){var s=1/Math.tan(t/2),a;return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(a=1/(r-i),e[10]=(i+r)*a,e[14]=2*i*r*a):(e[10]=-1,e[14]=-2*r),e}var Ar=Gt;function Fr(e,t,n,r,i){var s=1/Math.tan(t/2),a;return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(a=1/(r-i),e[10]=i*a,e[14]=i*r*a):(e[10]=-1,e[14]=-r),e}function Er(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),o=Math.tan(t.rightDegrees*Math.PI/180),l=2/(a+o),c=2/(i+s);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-((a-o)*l*.5),e[9]=(i-s)*c*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function qt(e,t,n,r,i,s,a){var o=1/(t-n),l=1/(r-i),c=1/(s-a);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*o,e[13]=(i+r)*l,e[14]=(a+s)*c,e[15]=1,e}var zr=qt;function Or(e,t,n,r,i,s,a){var o=1/(t-n),l=1/(r-i),c=1/(s-a);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=c,e[11]=0,e[12]=(t+n)*o,e[13]=(i+r)*l,e[14]=s*c,e[15]=1,e}function Tr(e,t,n,r){var i,s,a,o,l,c,f,h,u,m,v=t[0],p=t[1],d=t[2],y=r[0],_=r[1],g=r[2],w=n[0],b=n[1],x=n[2];return Math.abs(v-w)<R&&Math.abs(p-b)<R&&Math.abs(d-x)<R?It(e):(f=v-w,h=p-b,u=d-x,m=1/Math.hypot(f,h,u),f*=m,h*=m,u*=m,i=_*u-g*h,s=g*f-y*u,a=y*h-_*f,m=Math.hypot(i,s,a),m?(m=1/m,i*=m,s*=m,a*=m):(i=0,s=0,a=0),o=h*a-u*s,l=u*i-f*a,c=f*s-h*i,m=Math.hypot(o,l,c),m?(m=1/m,o*=m,l*=m,c*=m):(o=0,l=0,c=0),e[0]=i,e[1]=o,e[2]=f,e[3]=0,e[4]=s,e[5]=l,e[6]=h,e[7]=0,e[8]=a,e[9]=c,e[10]=u,e[11]=0,e[12]=-(i*v+s*p+a*d),e[13]=-(o*v+l*p+c*d),e[14]=-(f*v+h*p+u*d),e[15]=1,e)}function Sr(e,t,n,r){var i=t[0],s=t[1],a=t[2],o=r[0],l=r[1],c=r[2],f=i-n[0],h=s-n[1],u=a-n[2],m=f*f+h*h+u*u;m>0&&(m=1/Math.sqrt(m),f*=m,h*=m,u*=m);var v=l*u-c*h,p=c*f-o*u,d=o*h-l*f;return m=v*v+p*p+d*d,m>0&&(m=1/Math.sqrt(m),v*=m,p*=m,d*=m),e[0]=v,e[1]=p,e[2]=d,e[3]=0,e[4]=h*d-u*p,e[5]=u*v-f*d,e[6]=f*p-h*v,e[7]=0,e[8]=f,e[9]=h,e[10]=u,e[11]=0,e[12]=i,e[13]=s,e[14]=a,e[15]=1,e}function Nr(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Rr(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function $r(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function Ut(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function Dr(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function kr(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function Pr(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Lr(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],f=e[8],h=e[9],u=e[10],m=e[11],v=e[12],p=e[13],d=e[14],y=e[15],_=t[0],g=t[1],w=t[2],b=t[3],x=t[4],E=t[5],M=t[6],z=t[7],S=t[8],O=t[9],F=t[10],N=t[11],A=t[12],$=t[13],P=t[14],D=t[15];return Math.abs(n-_)<=R*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(r-g)<=R*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(i-w)<=R*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(s-b)<=R*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(a-x)<=R*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(o-E)<=R*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(l-M)<=R*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(c-z)<=R*Math.max(1,Math.abs(c),Math.abs(z))&&Math.abs(f-S)<=R*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(h-O)<=R*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(u-F)<=R*Math.max(1,Math.abs(u),Math.abs(F))&&Math.abs(m-N)<=R*Math.max(1,Math.abs(m),Math.abs(N))&&Math.abs(v-A)<=R*Math.max(1,Math.abs(v),Math.abs(A))&&Math.abs(p-$)<=R*Math.max(1,Math.abs(p),Math.abs($))&&Math.abs(d-P)<=R*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(y-D)<=R*Math.max(1,Math.abs(y),Math.abs(D))}var Ir=Vt,Vr=Ut;var Me={};Le(Me,{add:()=>Ur,angle:()=>d1,bezier:()=>i1,ceil:()=>Br,clone:()=>jr,copy:()=>Gr,create:()=>Bt,cross:()=>t1,dist:()=>b1,distance:()=>Jt,div:()=>g1,divide:()=>Qt,dot:()=>Xt,equals:()=>v1,exactEquals:()=>p1,floor:()=>Hr,forEach:()=>A1,fromValues:()=>Cr,hermite:()=>r1,inverse:()=>Xr,len:()=>w1,length:()=>Ht,lerp:()=>n1,max:()=>Wr,min:()=>Yr,mul:()=>x1,multiply:()=>Wt,negate:()=>Kr,normalize:()=>e1,random:()=>s1,rotateX:()=>c1,rotateY:()=>f1,rotateZ:()=>u1,round:()=>Qr,scale:()=>Jr,scaleAndAdd:()=>Zr,set:()=>qr,sqrDist:()=>_1,sqrLen:()=>M1,squaredDistance:()=>Zt,squaredLength:()=>Kt,str:()=>m1,sub:()=>y1,subtract:()=>Yt,transformMat3:()=>o1,transformMat4:()=>a1,transformQuat:()=>l1,zero:()=>h1});function Bt(){var e=new j(3);return j!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function jr(e){var t=new j(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ht(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function Cr(e,t,n){var r=new j(3);return r[0]=e,r[1]=t,r[2]=n,r}function Gr(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function qr(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function Ur(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Yt(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Wt(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function Qt(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function Br(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function Hr(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function Yr(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function Wr(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function Qr(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function Jr(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function Zr(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function Jt(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.hypot(n,r,i)}function Zt(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function Kt(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function Kr(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function Xr(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function e1(e,t){var n=t[0],r=t[1],i=t[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e}function Xt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function t1(e,t,n){var r=t[0],i=t[1],s=t[2],a=n[0],o=n[1],l=n[2];return e[0]=i*l-s*o,e[1]=s*a-r*l,e[2]=r*o-i*a,e}function n1(e,t,n,r){var i=t[0],s=t[1],a=t[2];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=a+r*(n[2]-a),e}function r1(e,t,n,r,i,s){var a=s*s,o=a*(2*s-3)+1,l=a*(s-2)+s,c=a*(s-1),f=a*(3-2*s);return e[0]=t[0]*o+n[0]*l+r[0]*c+i[0]*f,e[1]=t[1]*o+n[1]*l+r[1]*c+i[1]*f,e[2]=t[2]*o+n[2]*l+r[2]*c+i[2]*f,e}function i1(e,t,n,r,i,s){var a=1-s,o=a*a,l=s*s,c=o*a,f=3*s*o,h=3*l*a,u=l*s;return e[0]=t[0]*c+n[0]*f+r[0]*h+i[0]*u,e[1]=t[1]*c+n[1]*f+r[1]*h+i[1]*u,e[2]=t[2]*c+n[2]*f+r[2]*h+i[2]*u,e}function s1(e,t){t=t||1;var n=Ze()*2*Math.PI,r=Ze()*2-1,i=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=r*t,e}function a1(e,t,n){var r=t[0],i=t[1],s=t[2],a=n[3]*r+n[7]*i+n[11]*s+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/a,e}function o1(e,t,n){var r=t[0],i=t[1],s=t[2];return e[0]=r*n[0]+i*n[3]+s*n[6],e[1]=r*n[1]+i*n[4]+s*n[7],e[2]=r*n[2]+i*n[5]+s*n[8],e}function l1(e,t,n){var r=n[0],i=n[1],s=n[2],a=n[3],o=t[0],l=t[1],c=t[2],f=i*c-s*l,h=s*o-r*c,u=r*l-i*o,m=i*u-s*h,v=s*f-r*u,p=r*h-i*f,d=a*2;return f*=d,h*=d,u*=d,m*=2,v*=2,p*=2,e[0]=o+f+m,e[1]=l+h+v,e[2]=c+u+p,e}function c1(e,t,n,r){var i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e}function f1(e,t,n,r){var i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e}function u1(e,t,n,r){var i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e}function d1(e,t){var n=e[0],r=e[1],i=e[2],s=t[0],a=t[1],o=t[2],l=Math.sqrt(n*n+r*r+i*i),c=Math.sqrt(s*s+a*a+o*o),f=l*c,h=f&&Xt(e,t)/f;return Math.acos(Math.min(Math.max(h,-1),1))}function h1(e){return e[0]=0,e[1]=0,e[2]=0,e}function m1(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function p1(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function v1(e,t){var n=e[0],r=e[1],i=e[2],s=t[0],a=t[1],o=t[2];return Math.abs(n-s)<=R*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-a)<=R*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-o)<=R*Math.max(1,Math.abs(i),Math.abs(o))}var y1=Yt,x1=Wt,g1=Qt,b1=Jt,_1=Zt,w1=Ht,M1=Kt,A1=function(){var e=Bt();return function(t,n,r,i,s,a){var o,l;for(n||(n=3),r||(r=0),i?l=Math.min(i*n+r,t.length):l=t.length,o=r;o<l;o+=n)e[0]=t[o],e[1]=t[o+1],e[2]=t[o+2],s(e,e,a),t[o]=e[0],t[o+1]=e[1],t[o+2]=e[2];return t}}();function te(e,t,n){for(let r=0;r<n.length;r++)e[t+r]=n[r]}var{identity:F1,rotate:E1}=we,{add:z1,cross:O1,dot:T1,mul:en,normalize:tn,subtract:Ke,transformMat4:S1}=Me;function N1(e){let t=2*Math.PI/e;return new Array(e).fill(null).map((n,r)=>[Math.cos(t*r),Math.sin(t*r)])}function R1(e,t=1){let n=new Uint16Array(e*(Math.max(t,1)-1)*6);for(let r=0;r<t;r++){let i=r*e*6,s=r*e;for(let a=0;a<e;a++){let o=i+a*6,l=s+a;n[o+0]=l,n[o+1]=l-e+1,n[o+2]=l+1,n[o+3]=l+1,n[o+4]=l+e,n[o+5]=l,a===e-1?(n[o+0]=l,n[o+1]=l-e+1,n[o+2]=l+1,n[o+3]=l+1,n[o+4]=l+e,n[o+5]=l):(n[o+0]=l,n[o+1]=l+1,n[o+2]=l+e+1,n[o+3]=l+e+1,n[o+4]=l+e,n[o+5]=l)}}return n}function Xe(e,t=3){let n=[],r=[],i=[],s=e.length/4,a=s*t,o=new Float32Array(a*3),l=new Float32Array(a*3),c=new Float32Array(a*2),f=R1(t,s),h=N1(t);for(let u=0;u<s;u++){let m=[0,0,1],v=e.slice(u*4,u*4+3),p=e.slice((u+1)*4,(u+1)*4+3),d=e.slice((u-1)*4,(u-1)*4+3),y=e[u*4+3];u===0?Ke(r,v,p):u===s-1?Ke(r,d,v):Ke(r,d,p),tn(r,r),O1(i,m,r);let _=Math.acos(T1(m,r));F1(n),E1(n,n,_,i);for(let g=0;g<t;g++){let w=[...h[g],0];en(w,w,[y,y,1]),S1(w,w,n);let b=[];tn(b,w);let x=u*t*3+g*3;te(l,x,b),en(b,b,[-1,-1,-1]),z1(w,w,v),te(o,x,w),te(c,u*t*2+g*2,[g/t,u/s])}}return{position:o,normal:l,uv:c,index:f}}function $1(e){let t=e.position.length/3,n=new Float32Array(t*2);for(let r=0;r<t;r++)n[r*2+0]=e.position[r*3+0],n[r*2+1]=e.position[r*3+2];return{...e,position:n}}function q(e,t,n){return e*(1-n)+t*n}function D1(e,t=0){let n=(e.length-1)*t,r=Math.floor(n),i=Math.ceil(n);return q(e[i],e[r],i-n)}var k1=D1;function P1(e,t){let n=(e.length/4-1)*t,r=Math.floor(n),i=Math.ceil(n),s=i-n;return[q(e[i*4+0],e[r*4+0],s),q(e[i*4+1],e[r*4+1],s),q(e[i*4+2],e[r*4+2],s),q(e[i*4+3],e[r*4+3],s)]}function et(e,t){let n=(e.length/4-1)*t,r=Math.floor(n),i=Math.ceil(n);return[e[i*4+0]-e[r*4+0],e[i*4+1]-e[r*4+1],e[i*4+2]-e[r*4+2],e[i*4+3]+e[r*4+3]/2]}function tt(e,t=!1){let n=e.normal.includes(NaN);n&&console.warn("Normals has NaN");let r=e.index.includes(NaN);r&&console.warn("Index has NaN");let i=e.position.includes(NaN);i&&console.warn("Position has NaN");let s=e.uv.includes(NaN);s&&console.warn("UV has NaN");let a=e.position.length/3;e.position.length!==e.normal.length&&console.warn("position and normal amount not eqal"),e.uv.length!==a*2&&(console.groupCollapsed("uv amount not correct, should be "+a*2+" is "+e.uv.length),console.trace(),console.groupEnd()),(n||r||i||s||t)&&console.log("Check",{p:e.position.length,pn:i,n:e.normal.length,nn:n,i:e.index.length,in:r,u:e.uv.length,un:s})}function L1(...e){let t=e.filter(m=>!!m);if(t.length===1)return t[0];t.forEach(m=>tt(m));let n=0,r=0,i=0;for(let{position:m,index:v,uv:p}of t)n+=m.length,r+=p.length,i+=v.length;let s=new Float32Array(r),a=new Float32Array(n),o=new Float32Array(n),l=i>65536?new Uint32Array(i):new Uint16Array(i),c=0,f=0,h=0,u=0;for(let m=0;m<t.length;m++){let v=t[m].normal,p=v.length;for(let x=0;x<p;x++)o[f+x]=v[x];f+=p;let d=t[m].uv,y=d.length;for(let x=0;x<y;x++)s[h+x]=d[x];h+=y;let _=t[m].index,g=_.length;for(let x=0;x<g;x++)l[x+u]=_[x]+c/3;u+=g;let w=t[m].position,b=w.length;for(let x=0;x<b;x++)a[c+x]=w[x];c+=b}return{position:a,normal:o,uv:s,index:l}}var nt=(e,t)=>Math.sqrt(e*e+t*t);var rt=(e,t,n)=>Math.sqrt(e*e+t*t+n*n);var ne=mt(ln(),1),Q=0,ut=(0,ne.makeNoise2D)(Q),cn=(0,ne.makeNoise3D)(Q),ue={n1d:e=>ut(e,0),n2d:(e,t)=>ut(e,t),n3d:(e,t,n)=>cn(e,t,n),get seed(){return Q},set seed(e){e!==Q&&(Q=e,ut=(0,ne.makeNoise2D)(Q),cn=(0,ne.makeNoise3D)(Q))}};var ei=([e,t])=>{let n=nt(e,t);return n===0?[1,0]:[e/n,t/n]};var re=([e,t,n])=>{let r=rt(e,t,n);return[e/r,t/r,n/r]};function fn(e,{offset:t,scale:n,rotation:r}){let i=Math.max(...[t?.length,n?.length,r?.length].filter(l=>!!l)),s=new Array(i).fill(null).map(l=>0),a=new Array(i).fill(null).map(l=>1),o=new Array(i).fill(null).map(l=>0);return t?.length&&s.splice(0,t.length,...t),n?.length&&a.splice(0,n.length,...n),r?.length&&o.splice(0,r.length,...r),{...e,offset:Float32Array.from(s),scale:Float32Array.from(a),rotation:Float32Array.from(o)}}var ti=(e,t,n)=>[e*Math.cos(n)-t*Math.sin(n),e*Math.sin(n)+t*Math.cos(n)];function H(e,t,n){let[r,i,s]=e,[a,o,l]=re(t),c=Math.cos(n),f=Math.sin(n);return new T((c+(1-c)*a*a)*r+((1-c)*a*o-l*f)*i+((1-c)*a*l+o*f)*s,((1-c)*a*o+l*f)*r+(c+(1-c)*o*o)*i+((1-c)*o*l-a*f)*s,((1-c)*a*l-o*f)*r+((1-c)*o*l+a*f)*i+(c+(1-c)*l*l)*s)}function ni(e,t,n){let r=new Float32Array(e.position.length),i=e.position.length/3;for(let s=0;s<i;s++){let a=H([e.position[s*3],e.position[s*3+1],e.position[s*3+2]],t,n);r[s*3+0]=a[0],r[s*3+1]=a[1],r[s*3+2]=a[2]}return{...e,position:r}}function ri(e,t){return new ve(e,{position:{size:3,data:t.position},normal:{size:3,data:t.normal},uv:{size:2,data:t.uv},index:{data:t.index}})}function ii(e,t){let n=e.position.length/3;for(let r=0;r<n;r++)e.position[r*3+0]+=t[0],e.position[r*3+1]+=t[1],e.position[r*3+2]+=t[2];return e}function si(e){let t=Array.isArray(e)?e:[e];console.log("TOOBJ",t);let n="",r=0,i=0,s=0,a=[];function o(l){let c=0,f=0,h=0,{index:u,uv:m,normal:v,position:p}=l;if(n+=`o plant
`,p?.length)for(let d=0;d<p.length;d+=3){let[y,_,g]=p.slice(d,d+3);isNaN(y)||isNaN(_)||isNaN(g)||(n+="v "+y+" "+_+" "+g+`
`)}if(m?.length)for(let d=0;d<m.length;d+=2){let[y,_]=m.slice(d,d+2);n+="vt "+y+" "+_+`
`}if(v?.length)for(let d=0;d<v.length;d+=3){let[y,_,g]=v.slice(d,d+3);isNaN(y)||isNaN(_)||isNaN(g)||(n+="vn "+y+" "+_+" "+g+`
`)}if(u?.length)for(let d=0;d<u.length;d+=3){for(let y=0;y<3;y++){let _=u[d+y]+1;a[y]=r+_+(v||m?"/"+(m?i+_:"")+(v?"/"+(s+_):""):"")}n+="f "+a.join(" ")+`
`}else for(let d=0,y=p.length;d<y;d+=3){for(let _=0;_<3;_++){let g=d+_+1;a[_]=r+g+(v||m?"/"+(m?i+g:"")+(v?"/"+(s+g):""):"")}n+="f "+a.join(" ")+`
`}r+=c,i+=h,s+=f}return t.forEach(l=>o(l)),n}function un([e,t,n]){return e===0&&n===0?[1,0,0]:[1,1,-((e+t)/n)]}function ai(e=2,t=3){t=t+2;let n=(t*4-4)*3,r=new Float32Array(n*2),i=new Float32Array(n),s=new Float32Array((t*4-4)*2),a=new Uint16Array(t*4);for(let l=0;l<t;l++){let c=l/(t-1)*2-1;r[l*6+0]=-e,r[l*6+1]=0,r[l*6+2]=e*c,r[l*6+3]=e,r[l*6+4]=0,r[l*6+5]=e*c}let o=t*6;for(let l=0;l<t;l++){let c=l/(t-1)*2-1;r[o+l*6+0]=-e*c,r[o+l*6+1]=0,r[o+l*6+2]=-e,r[o+l*6+3]=-e*c,r[o+l*6+4]=0,r[o+l*6+5]=e}return{position:r,normal:i,uv:s,index:a}}function oi(e=1,t=12,n=12){let r=360*(Math.PI/180)/n,i=t*n+1,s=(t-1)*n*2+n,a=new Float32Array(i*3),o=new Float32Array(i*3),l=new Float32Array(i*2),c=new Uint16Array(s*3);a[0]=0,a[1]=1-1,a[2]=0,o[0]=0,o[1]=1,o[2]=0,l[0]=.5,l[1]=.5;let f=new Array(t-1).fill(null).map((u,m,v)=>e+m/(v.length-1)*2);f.push(100);let h=f.map(u=>{let m=(Math.max(Math.min(u,e+2),e)-e)/2;return Math.sin((m+.5)*Math.PI)/2+.5-1});for(let u=0;u<t;u++){let m=f[u],v=h[u];for(let p=0;p<n;p++){let d=r*p,y=Math.cos(d)*m,_=v,g=Math.sin(d)*m,b=u*n+p+1;if(a[b*3+0]=y,a[b*3+1]=_,a[b*3+2]=g,o[b*3+0]=0,o[b*3+1]=1,o[b*3+2]=0,l[b*2+0]=y,l[b*2+1]=g,u===0){let x=(b-1)*3;c[x+0]=0,c[x+1]=(p+1)%n+1,c[x+2]=p+1}else if(p===n-1){let x=u*n*6+p*6-n*3;c[x+0]=b,c[x+1]=b+1-n-n,c[x+2]=b+1-n,c[x+3]=b,c[x+4]=b-n,c[x+5]=b+1-n*2}else{let x=u*n*6+p*6-n*3;c[x+0]=b,c[x+1]=b+1-n,c[x+2]=b+1,c[x+3]=b,c[x+4]=b-n,c[x+5]=b+1-n}}}return{position:a,normal:o,uv:l,index:c}}function li(e,{res:t=1,xCurvature:n=.5,yCurvature:r=.2}={}){let i=e.length,s=3+t*2,a=s*i,o=(s-1)*(i-1)*2,l=new Float32Array(a*3),c=new Float32Array(a*3),f=new Float32Array(a*2),h=new Uint16Array(o*3);return e.forEach((u,m)=>{let v=m*s;for(let p=0;p<s;p++){let d=2-p/(s-1)*2-1,y=-(1-u.y)*(1-u.y)*.5,_=Math.sin(Math.abs(d)*Math.PI)*.01;if(l[v*3+p*3+0]=(u.x-1)*d*.5,l[v*3+p*3+1]=_*n+y*r,l[v*3+p*3+2]=u.y-1,f[v*2+p*2+0]=l[v*3+p*3+0]+1/2,f[v*2+p*2+1]=l[v*3+p*3+2],m<e.length-1){let g=m*(s-1);h[g*6+p*6+0]=v+p+0,h[g*6+p*6+1]=v+p+1,h[g*6+p*6+2]=v+p+s,h[g*6+p*6+3]=v+p+1,h[g*6+p*6+4]=v+p+s,h[g*6+p*6+5]=v+p+s+1}}}),Ue({position:l,normal:c,index:h,uv:f})}var ci=e=>{let t=e*3,n=Float32Array.from([+e,-e,-e,+e,-e,+e,-e,-e,+e,-e,-e,-e,-e,+e,-e,+e,+e,-e,+e,+e,+e,-e,+e,+e]),r=Float32Array.from([...n].map(a=>a/t)),i=Float32Array.from(new Array(24).fill(.5)),s=Uint16Array.from([0,1,2,0,2,3,0,3,4,4,5,0,0,1,6,0,6,5,1,2,7,1,7,6,3,7,2,3,7,4,4,6,7,4,6,5]);return{position:n,normal:r,uv:i,index:s}};function fi(e=[0,0,0],t=1,n=3){let r=(n+1)*3,i=360*(Math.PI/180)/n,s=[e[0],e[1],e[2]+t],a=new Float32Array(r),o=new Float32Array(r),l=new Float32Array(n*2),c=new Uint16Array(n*3);a[0]=e[0],a[1]=e[1],a[2]=e[2];for(let f=1;f<=n+1;f++){let h=i*(f-1),u=Math.cos(h)*(s[0]-e[0])-Math.sin(h)*(s[2]-e[2])+e[0],m=e[1],v=Math.sin(h)*(s[0]-e[0])+Math.cos(h)*(s[2]-e[2])+e[2];a[f*3+0]=u,a[f*3+1]=m,a[f*3+2]=v}for(let f=0;f<n;f++)f===n-1?(c[f*3+0]=0,c[f*3+1]=n,c[f*3+2]=1):(c[f*3+0]=0,c[f*3+1]=f+1,c[f*3+2]=f+2);return{position:a,normal:o,uv:l,index:c}}function ui(e,t){return e[0]===0&&e[2]===0?new T(0,0,1):new T().cross(e,t).normalize()}function De(e,t,n,r=3,i){t.normalize();let s=r*3,a=360*(Math.PI/180)/r,o=new Float32Array(s),l=e[0],c=e[1],f=e[2],h=ui(e,t).multiply(n);for(let u=0;u<r;u++){let m=a*u,v=H(h,i||t,m);o[u*3+0]=l+v[0],o[u*3+1]=c+v[1],o[u*3+2]=f+v[2]}return o}function di(e=new T(0,0,0),t=1){let n=new Float32Array(9),r=new Float32Array(9),i=new Float32Array(6),s=new Uint16Array(3);return n[0]=e[0],n[1]=e[1],n[2]=e[2]-t,n[3]=e[0]+t,n[4]=e[1],n[5]=e[2]+t,n[6]=e[0]-t,n[7]=e[1],n[8]=e[2]+t,r[0]=0,r[1]=1,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=1,r[8]=0,i[0]=.5,i[1]=1,i[2]=1,i[3]=0,i[4]=0,i[5]=0,s[0]=0,s[1]=2,s[2]=1,{position:n,normal:r,uv:i,index:s}}function hi(e,t=8){return Xe(e,t)}function mi(e,t){let n=0,r=e.length;for(let i=0;i<r;i++){let s=e[i],a=s.length;for(let o=0;o<a;o++)t[n+o]=s[o];n+=a}}function dn(e,t){let n=e.length/4,r=n*t*3,i=n*t*6-t*6,s=n*t*2,a=new Float32Array(r),o=new Float32Array(r),l=new Float32Array(s),c=i>65536?new Uint32Array(i):new Uint16Array(i),f=[],h;for(let u=0;u<n;u++){for(let p=0;p<t;p++){let d=u*t*2+p*2;l[d+0]=-.5-p/t,l[d+1]=u/n}let m=new T(e[u*4+0],e[u*4+1],e[u*4+2]),v=e[u*4+3];u<n-1?(h=new T(e[u*4+4],e[u*4+5],e[u*4+6]).sub(m),f[u]=De(m,h,v,t)):f[u]=De(m,h,v,t)}mi(f,a);for(let u=0;u<n;u++){let m=u*t*6,v=u*t;for(let p=0;p<t;p++){let d=m+p*6,y=v+p;p===t-1?(c[d+0]=y,c[d+1]=y-t+1,c[d+2]=y+1,c[d+3]=y+1,c[d+4]=y+t,c[d+5]=y):(c[d+0]=y,c[d+1]=y+1,c[d+2]=y+t+1,c[d+3]=y+t+1,c[d+4]=y+t,c[d+5]=y)}}return{position:a,normal:o,uv:l,index:c}}function ko(e,t=1,n=1,r=0,i=!0){let s=Array.isArray(n)?1:n,a=(n[0]??s)*10,o=(n[1]??s)*10,l=(n[2]??s)*10,c=Array.isArray(r)?0:r,f=r[0]??c,h=r[1]??c,u=r[2]??c,m=e.length/4,v=[e[0],e[1],e[2]],p=0;for(let d=0;d<m;d++){let y=d/m;p+=(Math.abs(v[0]-e[d*4+0])+Math.abs(v[1]-e[d*4+1])+Math.abs(v[2]-e[d*4+2]))/3,v[0]=e[d*4+0],v[1]=e[d*4+1],v[2]=e[d*4+2];let _=i?t*y:t,[g,w,b]=e.slice(d*4,d*4+3);e[d*4+0]=g+ue.n1d(1e3+f+p*a)*_,e[d*4+1]=w+ue.n1d(2e3+h+p*o)*_,e[d*4+2]=b+ue.n1d(3e3+u+p*l)*_}return e}function dt(e,[t,n,r]){let i=e.length/4,s=-1;for(;s++<i-1;)e[s*4+0]=e[s*4+0]+t,e[s*4+1]=e[s*4+1]+n,e[s*4+2]=e[s*4+2]+r;return e}function ht(e,t,n=1,r,i=!1){let[s=0,a=0,o=0]=r||e;s&&a&&o&&dt(e,[-s,-a,-o]);let l=e.length/4,c=-1;for(;c++<l-1;){let f=e.slice(c*4,c*4+3),h=c/l,u=H([...f],t,i?n*h:n);e[c*4+0]=u[0],e[c*4+1]=u[1],e[c*4+2]=u[2]}return s&&a&&o&&dt(e,[s,a,o]),e}function qo(e,t=.5,n=2,r=1){let i=Math.max(Math.min(t,1),0),s=Math.floor(Math.max(0,n));if(s<2)return[e];let a=e.length/4,o=Math.floor(a*i),l=re(et(e,i)),c=re(un(l));return[...o<0?[]:[e.slice(0,o*4)],...new Array(s).fill(null).map((f,h)=>{let u=e.slice((o-2)*4),m=h/n;return ht(u,c,r,void 0,!0),ht(u,l,m*6),u})].filter(f=>f.length>4)}export{ci as box,Ue as calculateNormals,fi as circle,Sn as convertInstancedGeometry,Qn as curveToArray,Xe as extrudePath,un as findOrthogonalVector,$1 as flatten,ai as grid,oi as ground,te as insertArray,fn as instanceGeometry,k1 as interpolateArray,P1 as interpolateSkeleton,et as interpolateSkeletonVec,L1 as join,li as leaf,nt as length2D,rt as length3D,q as lerp,ue as noise,ko as noiseSkeleton,ei as normalize2D,re as normalize3D,De as ring,ti as rotate2D,H as rotate3D,ni as rotateMesh3D,ht as rotateSkeleton,tt as sanityCheckGeometry,qo as splitSkeleton,si as toOBJ,ri as transferToGeometry,ii as translateMesh,dt as translateSkeleton,di as triangle,hi as tube,dn as tube_old};
//# sourceMappingURL=index.js.map
