var Vi=Object.defineProperty,Ai=Object.defineProperties;var Di=Object.getOwnPropertyDescriptors;var rs=Object.getOwnPropertySymbols;var ji=Object.prototype.hasOwnProperty,Pi=Object.prototype.propertyIsEnumerable;var os=(n,e,t)=>e in n?Vi(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ue=(n,e)=>{for(var t in e||(e={}))ji.call(e,t)&&os(n,t,e[t]);if(rs)for(var t of rs(e))Pi.call(e,t)&&os(n,t,e[t]);return n},_e=(n,e)=>Ai(n,Di(e));import{L as $i,S as ae,i as le,s as ce,M as Y,t as Z,N as q,a as k,h as K,d as v,b as f,O as B,g as T,J as g,E as F,e as M,c as x,n as te,o as j,p as se,q as I,w as ie,l as Q,x as he,y as ne,B as re,P as Bi,Q as Ri,j as fe,F as ni,k as U,m as z,R,G as ri,H as oi,I as ai,T as Le,U as be,f as J,K as Te,V as Ee,W as ht,X as Se,Y as wt,z as Fi,A as Wi,C as Hi,v as Vt,Z as Ui,_ as zi,$ as Xi,a0 as oe,a1 as Ue,a2 as We,a3 as yt,a4 as Yi}from"./index-bd6e4685.js";import{w as gt,c as Ae}from"./singletons-fb8f9557.js";var qi=(n,...e)=>{const t=(i,r)=>{Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r).map(o=>o.toString())).forEach(o=>{o.match(/^(?:constructor|prototype|arguments|caller|name|bind|call|apply|toString|length)$/)||Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(r,o))})},s=class extends n{constructor(...r){super(...r),e.forEach(o=>t(this,new o))}};return e.forEach(i=>{t(s.prototype,i.prototype),t(s,i)}),s};const xt=class extends Error{constructor(n,e={}){super(n),this.detail=n,this.meta=e}static fromParent(n,e,t,s){return new xt(t,Object.assign({cause:n},s))}getCause(){return this.meta.cause||void 0}unwrapChain(n=this){return xt.unwrapChain(n)}};let Zi=xt;Zi.unwrapChain=n=>{const e=[n];let t=n.getCause();for(;t;)e.push(t),t=t.getCause();return e};function Ki(n,e=!1){return function(t,s,i){let r;const o=i.value;return i.value=function(...a){const l=()=>{r=null,e||o.apply(this,a)},c=e&&!r;clearTimeout(r),r=setTimeout(l,n),c&&o.apply(this,a)},i}}var ze=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Gi={exports:{}};(function(n,e){(function(t,s){s()})(ze,function(){function t(c,h){return typeof h=="undefined"?h={autoBom:!1}:typeof h!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function s(c,h,d){var p=new XMLHttpRequest;p.open("GET",c),p.responseType="blob",p.onload=function(){l(p.response,h,d)},p.onerror=function(){console.error("could not download file")},p.send()}function i(c){var h=new XMLHttpRequest;h.open("HEAD",c,!1);try{h.send()}catch{}return 200<=h.status&&299>=h.status}function r(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(h)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ze=="object"&&ze.global===ze?ze:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(c,h,d){var p=o.URL||o.webkitURL,u=document.createElement("a");h=h||c.name||"download",u.download=h,u.rel="noopener",typeof c=="string"?(u.href=c,u.origin===location.origin?r(u):i(u.href)?s(c,h,d):r(u,u.target="_blank")):(u.href=p.createObjectURL(c),setTimeout(function(){p.revokeObjectURL(u.href)},4e4),setTimeout(function(){r(u)},0))}:"msSaveOrOpenBlob"in navigator?function(c,h,d){if(h=h||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(t(c,d),h);else if(i(c))s(c,h,d);else{var p=document.createElement("a");p.href=c,p.target="_blank",setTimeout(function(){r(p)})}}:function(c,h,d,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof c=="string")return s(c,h,d);var u=c.type==="application/octet-stream",m=/constructor/i.test(o.HTMLElement)||o.safari,w=/CriOS\/[\d]+/.test(navigator.userAgent);if((w||u&&m||a)&&typeof FileReader!="undefined"){var _=new FileReader;_.onloadend=function(){var N=_.result;N=w?N:N.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=N:location=N,p=null},_.readAsDataURL(c)}else{var E=o.URL||o.webkitURL,O=E.createObjectURL(c);p?p.location=O:location.href=O,p=null,setTimeout(function(){E.revokeObjectURL(O)},4e4)}});o.saveAs=l.saveAs=l,n.exports=l})})(Gi);function li(n,e){let t,s,i,r=null,o=0;const a=n,l=()=>{o=0,r=null,i=a.apply(t,s),r||(t=s=null)};return function(){const h=Date.now();o||(o=h);const d=e-(h-o);return t=this,s=arguments,d<=0||d>e?(r&&(clearTimeout(r),r=null),o=h,i=a.apply(t,s),r||(t=s=null)):r||(r=setTimeout(l,d)),i}}const ye={amountEmitters:0,amountCallbacks:0,emitters:[]};typeof self!="undefined"&&"window"in self&&(globalThis.debug=ye);class Ie{constructor(){this.index=0,this.cbs={},this.cbsOnce={},this.index=ye.amountEmitters,ye.amountEmitters++}emit(e,t){e in this.cbs&&this.cbs[e].forEach(s=>s(t)),e in this.cbsOnce&&(this.cbsOnce[e].forEach(s=>s(t)),delete this.cbsOnce[e])}on(e,t,s=0){s>0&&(t=li(t,s));const i=Object.assign(this.cbs,{[e]:[...this.cbs[e]||[],t]});return this.cbs=i,ye.emitters[this.index]={name:this.constructor.name,cbs:Object.fromEntries(Object.keys(this.cbs).map(r=>[r,this.cbs[r].length]))},ye.amountCallbacks++,()=>{var r;ye.amountCallbacks--,(r=i[e])==null||r.splice(i[e].indexOf(t),1),ye.emitters[this.index]={name:this.constructor.name,cbs:Object.fromEntries(Object.keys(this.cbs).map(o=>[o,this.cbs[o].length]))}}}once(e,t){return this.cbsOnce[e]=[...this.cbsOnce[e]||[],t],()=>{this.cbsOnce[e].splice(this.cbsOnce[e].indexOf(t),1)}}destroyEventEmitter(){ye.amountEmitters--,Object.keys(this.cbs).forEach(e=>{ye.amountCallbacks-=this.cbs[e].length,delete this.cbs[e]}),Object.keys(this.cbsOnce).forEach(e=>delete this.cbsOnce[e]),this.cbs={},this.cbsOnce={},delete ye.emitters[this.index]}}function Ji(n){if(n.length===0)return 0;let e=0;for(let t=0;t<n.length;t++)e=(e<<5)-e+n.charCodeAt(t),e=e&e;return e}var Qi=()=>{const n={};let e=0;const t=(s=0,i=0)=>{if(i>500)throw new Error("Infinite loop in id generation algo");return s in n?t(Math.max(s++,e++),i+1):(n[s]=!0,s.toString())};return t.reset=()=>{Object.keys(n).forEach(s=>delete n[+s]),e=0},t};const en=typeof globalThis.WorkerGlobalScope!="undefined"&&self instanceof globalThis.WorkerGlobalScope;let ut=[],dt=2,Oe=0,as=0;const Nt="plant.log.history",At="localStorage"in globalThis,$e=At?Nt in localStorage?JSON.parse(localStorage.getItem(Nt)):[]:[];At&&(dt=parseInt(localStorage.getItem("pt-log-level"))||2);function tn(){At&&localStorage.setItem(Nt,JSON.stringify($e))}let Be;function Me(n){Oe=Math.max(Oe,n.length);const e=as;as++;const t=(i,r)=>{if(!en&&($e.push({scope:n,args:i,level:dt,date:Date.now()}),$e.length=Math.min(100,$e.length),Be&&Be.set($e),tn(),(!ut.length||ut.includes(n))&&r<=dt)){if(i instanceof Error){console.error(`[${n.padEnd(Oe," ")}]`,i);return}if(Array.isArray(i)&&typeof i[0]=="string"&&typeof i[1]=="object"){console.groupCollapsed(`%c[${n.padEnd(Oe," ")}]`,`color: hsl(${e*30}deg 68% 64%); font-weight: bold;`,i[0]),console.log(...i.slice(1)),console.groupEnd();return}if(r===0){console.error(`%c[${n.padEnd(Oe," ")}]`,`color: hsl(${e*30}deg 68% 64%); font-weight: bold;`,...i);return}if(r===1){console.warn(`[${n.padEnd(Oe," ")}]`,...i);return}r===2&&console.log(`%c[${n.padEnd(Oe," ")}]`,`color: hsl(${e*30}deg 68% 64%); font-weight: bold;`,...i)}},s=(...i)=>t(i,2);return s.warn=(...i)=>t(i,1),s.error=i=>t(i,0),s}Me.getStore=function(){return Be||(Be=gt([]),Be)};Me.getHistory=function(){return[...$e]};Me.setFilter=(...n)=>{ut=n,console.log("[log] set filter",{filters:ut})};Me.setLevel=(n=0)=>{dt=n,localStorage.setItem("pt-log-level",""+n)};function sn(n){const e={};return(...t)=>{const s=Ji(JSON.stringify(t));return s in e?e[s]:e[s]=n(...t)}}var Ze="<unknown>";function nn(n){var e=n.split(`
`);return e.reduce(function(t,s){var i=an(s)||cn(s)||dn(s)||vn(s)||pn(s);return i&&t.push(i),t},[])}var rn=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/|[a-z]:\\|\\\\).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,on=/\((\S*)(?::(\d+))(?::(\d+))\)/;function an(n){var e=rn.exec(n);if(!e)return null;var t=e[2]&&e[2].indexOf("native")===0,s=e[2]&&e[2].indexOf("eval")===0,i=on.exec(e[2]);return s&&i!=null&&(e[2]=i[1],e[3]=i[2],e[4]=i[3]),{file:t?null:e[2],methodName:e[1]||Ze,arguments:t?[e[2]]:[],lineNumber:e[3]?+e[3]:null,column:e[4]?+e[4]:null}}var ln=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function cn(n){var e=ln.exec(n);return e?{file:e[2],methodName:e[1]||Ze,arguments:[],lineNumber:+e[3],column:e[4]?+e[4]:null}:null}var hn=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,un=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function dn(n){var e=hn.exec(n);if(!e)return null;var t=e[3]&&e[3].indexOf(" > eval")>-1,s=un.exec(e[3]);return t&&s!=null&&(e[3]=s[1],e[4]=s[2],e[5]=null),{file:e[3],methodName:e[1]||Ze,arguments:e[2]?e[2].split(","):[],lineNumber:e[4]?+e[4]:null,column:e[5]?+e[5]:null}}var fn=/^\s*(?:([^@]*)(?:\((.*?)\))?@)?(\S.*?):(\d+)(?::(\d+))?\s*$/i;function pn(n){var e=fn.exec(n);return e?{file:e[3],methodName:e[1]||Ze,arguments:[],lineNumber:+e[4],column:e[5]?+e[5]:null}:null}var mn=/^\s*at (?:((?:\[object object\])?[^\\/]+(?: \[as \S+\])?) )?\(?(.*?):(\d+)(?::(\d+))?\)?\s*$/i;function vn(n){var e=mn.exec(n);return e?{file:e[2],methodName:e[1]||Ze,arguments:[],lineNumber:+e[3],column:e[4]?+e[4]:null}:null}const wn=n=>n.replace(window.location.href,"").replace(/^node_modules/,"").replace(/.+?(?=plantarium)plantarium\//,"");var ls=n=>{const e=nn(n.stack).map(t=>(t.file=wn(t.file),t));return{title:n.message,type:n.name,lines:e}};const yn=n=>JSON.parse(JSON.stringify(n)),gn=globalThis.structuredClone||yn;const _n=(n,e)=>t=>Math.min(Math.max(t,n),e),bn=n=>{const e=10**n;return t=>Math.floor(t*e)/e},kn=_n(-1e5,1e5),En=bn(1),nt=n=>kn(En(n));class ci{constructor({x1:e=0,y1:t=0,x2:s=0,y2:i=0},r){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x1=e,this.y1=t,this.x2=s,this.y2=i,this.system=r.node.system,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("viewbox","0 0 100 100"),this.svg.setAttribute("width","100"),this.svg.setAttribute("height","100"),this.svg.style.overflow="visible",this.svg.style.position="absolute",this.svg.style.top="3.5px",this.svg.style.pointerEvents="none",this.svg.style.zIndex="-1",r.view.wrapper.append(this.svg),this.path=document.createElementNS("http://www.w3.org/2000/svg","path"),this.path.classList.add("node-connection-path"),this.path.setAttribute("vector-effect","non-scaling-stroke"),this.path.setAttribute("d",`
      M 0 0
      C 50 0 
        50 100
				100  100
      `),this.svg.appendChild(this.path),this.setPosition()}setPosition({x1:e=this.x1,y1:t=this.y1,x2:s=this.x2,y2:i=this.y2}={}){var a;this.x1=nt(e),this.y1=nt(t),this.x2=nt(s),this.y2=nt(i);const r=this.x2-this.x1+7,o=this.y2-this.y1;(a=this==null?void 0:this.hoverPath)==null||a.setAttribute("d",`
      M 0 0
      C ${r/2} 0 
        ${r/2} ${o}
				${r}  ${o}
      `),this.path.setAttribute("d",`
      M 0 0
      C ${r/2} 0 
        ${r/2} ${o}
				${r}  ${o}
      `)}remove(){var e;this.path.remove(),(e=this==null?void 0:this.hoverPath)==null||e.remove(),this.system.save()}}class Ln extends ci{constructor(e){super({},e.output),this.connection=e,this.input=e.input.view,this.output=e.output.view,this.hoverPath=document.createElementNS("http://www.w3.org/2000/svg","path"),this.hoverPath.classList.add("node-connection-hover"),this.hoverPath.setAttribute("vector-effect","non-scaling-stroke"),this.svg.append(this.hoverPath),this.hoverPath.addEventListener("mouseover",()=>{const{activeNode:s}=this.system.view;s&&s.view.active&&s.view.hoveredConnection!==this&&this.handleNodeOver(s)}),this.hoverPath.addEventListener("mouseout",()=>{const{activeNode:s}=this.system.view;this.handleNodeOut(s)}),e.input.node.system.view.colorStore.onType(e.output.type,s=>{this.path.style.stroke=s,this.svg.style.setProperty("--socket-color",s)})}handleNodeOver(e){this.connection.isNodeJoinable(e)&&(e.view.hoveredConnection=this,this.path.classList.add("hover-active"),this.hoverPath.classList.add("hover-active"))}handleNodeOut(e){e&&e.view.hoveredConnection===this&&delete e.view.hoveredConnection,this.hoverPath.classList.remove("hover-active"),this.path.classList.remove("hover-active")}remove(){super.remove()}}function Mn(n){if(!xn(n))throw new Error("panzoom requires DOM element to be attached to the DOM tree");const t=n.parentElement;return n.scrollTop=0,{getBBox:r,getOwner:i,applyTransform:o};function i(){return t}function r(){return{left:0,top:0,width:n.clientWidth,height:n.clientHeight}}function o(a){n.style.transformOrigin="0 0 0",n.style.transform="matrix("+a.scale+", 0, 0, "+a.scale+", "+a.x+", "+a.y+")"}}function xn(n){return n&&n.parentElement&&n.style}function Nn(n,e,t){typeof t!="object"&&(t={});const s=typeof t.minVelocity=="number"?t.minVelocity:5,i=typeof t.amplitude=="number"?t.amplitude:.25,r=typeof t.cancelAnimationFrame=="function"?t.cancelAnimationFrame:Sn(),o=typeof t.requestAnimationFrame=="function"?t.requestAnimationFrame:Cn();let a,l;const c=342;let h,d,p,u,m,w,_,E;return{start:N,stop:V,cancel:O};function O(){r(h),r(E)}function N(){a=n(),u=_=d=m=0,l=new Date,r(h),r(E),h=o(L)}function L(){const D=Date.now(),C=D-l;l=D;const H=n(),X=H.x-a.x,pe=H.y-a.y;a=H;const W=1e3/(1+C);d=.8*X*W+.2*d,m=.8*pe*W+.2*m,h=o(L)}function V(){r(h),r(E);const D=n();p=D.x,w=D.y,l=Date.now(),(d<-s||d>s)&&(u=i*d,p+=u),(m<-s||m>s)&&(_=i*m,w+=_),E=o(b)}function b(){const D=Date.now()-l;let C=!1,H=0,X=0;u&&(H=-u*Math.exp(-D/c),H>.5||H<-.5?C=!0:H=u=0),_&&(X=-_*Math.exp(-D/c),X>.5||X<-.5?C=!0:X=_=0),C&&(e(p+H,w+X),E=o(b))}}function Sn(){return typeof cancelAnimationFrame=="function"?cancelAnimationFrame:clearTimeout}function Cn(){return typeof requestAnimationFrame=="function"?requestAnimationFrame:function(n){return setTimeout(n,16)}}const Tn=.2;function In(n,e){const t=Mn(n),s=t.getOwner(),i={x:0,y:0};let r=!1;const o={x:0,y:0,scale:1},a=typeof e.pinchSpeed=="number"?e.pinchSpeed:1,l=e.bounds,c=typeof e.maxZoom=="number"?e.maxZoom:Number.POSITIVE_INFINITY,h=typeof e.minZoom=="number"?e.minZoom:0,d=typeof e.boundsPadding=="number"?e.boundsPadding:.05,p=typeof e.zoomSpeed=="number"?e.zoomSpeed:Tn;let u=cs(e.transformOrigin);On(l);let m,w=!1,_=!1,E,O,N;const L=Nn(De,Li,e.smoothScroll);let V,b=!1;Ht();const D={dispose:Mi,moveBy:Ge,moveTo:je,smoothMoveTo:Ei,centerOn:ki,zoomTo:tt,zoomAbs:Wt,pause:pe,resume:W,isPaused:G,getTransform:we,setTransform:ee,getTransformOrigin:me,setTransformOrigin:xe},C=typeof e.initialX=="number"?e.initialX:o.x,H=typeof e.initialY=="number"?e.initialY:o.y,X=typeof e.initialZoom=="number"?e.initialZoom:o.scale;return(C!=o.x||H!=o.y||X!=o.scale)&&Wt(C,H,X),D;function pe(){Ut(),b=!0}function W(){b&&(Ht(),b=!1)}function G(){return b}function $(y,S){return i.x=y,i.y=S,i}function ee(y,S,A){o.x=y,o.y=S,o.scale=A,Je()}function we(){return o}function me(){return u}function xe(y){u=cs(y)}function De(){return{x:o.x,y:o.y}}function je(y,S){o.x=y,o.y=S,_t(),Je()}function Ge(y,S){je(o.x+y,o.y+S)}function _t(){const y=gi();if(!y)return;let S=!1;const A=_i();let P=y.left-A.right;return P>0&&(o.x+=P,S=!0),P=y.right-A.left,P<0&&(o.x+=P,S=!0),P=y.top-A.bottom,P>0&&(o.y+=P,S=!0),P=y.bottom-A.top,P<0&&(o.y+=P,S=!0),S}function gi(){if(!!l){if(typeof l=="boolean"){const y=s.getBoundingClientRect(),S=y.width,A=y.height;return{left:S*d,top:A*d,right:S*(1-d),bottom:A*(1-d)}}return l}}function _i(){const y=t.getBBox(),S=bi(y.left,y.top);return{left:S.x,top:S.y,right:y.width*o.scale+S.x,bottom:y.height*o.scale+S.y}}function bi(y,S){return{x:y*o.scale+o.x,y:S*o.scale+o.y}}function Je(){r=!0,m=window.requestAnimationFrame(xi)}function Ft(y,S,A){if(kt(y)||kt(S)||kt(A))throw new Error("zoom requires valid numbers");const P=o.scale*A;if(P<h){if(o.scale===h)return;A=h/o.scale}if(P>c){if(o.scale===c)return;A=c/o.scale}const de=$(y,S);o.x=de.x-A*(de.x-o.x),o.y=de.y-A*(de.y-o.y),l&&d===1&&h===1?(o.scale*=A,_t()):_t()||(o.scale*=A),Je()}function Wt(y,S,A){const P=A/o.scale;Ft(y,S,P)}function ki(y){const S=y.ownerSVGElement;if(!S)throw new Error("ui element is required to be within the scene");const A=y.getBoundingClientRect(),P=A.left+A.width/2,de=A.top+A.height/2,ge=S.getBoundingClientRect(),st=ge.width/2-P,it=ge.height/2-de;Qe(st,it)}function Ei(y,S){Qe(y-o.x,S-o.y)}function Qe(y,S){return Ge(y,S)}function Li(y,S){je(y,S)}function Mi(){Ut()}function Ht(){s.addEventListener("mousedown",Gt,{passive:!0}),s.addEventListener("dblclick",Kt,{passive:!1}),s.addEventListener("touchstart",Xt,{passive:!0}),s.addEventListener("keydown",zt),s.addEventListener("wheel",ts,{passive:!0}),Je()}function Ut(){s.removeEventListener("wheel",ts),s.removeEventListener("mousedown",Gt),s.removeEventListener("keydown",zt),s.removeEventListener("dblclick",Kt),s.removeEventListener("touchstart",Xt),m&&(window.cancelAnimationFrame(m),m=0),L.cancel(),es(),Oi(),ns()}function xi(){r&&Ni()}function Ni(){r=!1,t.applyTransform(o),m=0,e.onTransform&&e.onTransform(o)}function zt(y){let S=0;if(y.keyCode===38||y.keyCode===40||y.keyCode===37||y.keyCode===39||(y.keyCode===189||y.keyCode===109?S=1:(y.keyCode===187||y.keyCode===107)&&(S=-1)),S){const A=ss(S*100),P=u?bt():Si();tt(P.x,P.y,A)}}function Si(){const y=s.getBoundingClientRect();return{x:y.width/2,y:y.height/2}}function Xt(y){if(Ci(y),y.touches.length===1)return Ii(y);y.touches.length===2&&(N=Zt(y.touches[0],y.touches[1]),V=!0,Yt())}function Ci(y){y.stopPropagation(),y.preventDefault()}function Ti(y){y.preventDefault(),y.stopPropagation()}function Ii(y){const S=y.touches[0],A=Ne(S),P=$(A.x,A.y);E=P.x,O=P.y,L.cancel(),Yt()}function Yt(){w||(w=!0,document.addEventListener("touchmove",qt),document.addEventListener("touchend",et),document.addEventListener("touchcancel",et))}function qt(y){if(y.touches.length===1){y.stopPropagation();const S=y.touches[0],A=Ne(S),P=$(A.x,A.y),de=P.x-E,ge=P.y-O;de!==0&&ge!==0&&is(),E=P.x,O=P.y,Qe(de,ge)}else if(y.touches.length===2){V=!0;const S=y.touches[0],A=y.touches[1],P=Zt(S,A),de=1+(P/N-1)*a,ge=Ne(S),st=Ne(A);if(E=(ge.x+st.x)/2,O=(ge.y+st.y)/2,u){const it=bt();E=it.x,O=it.y}tt(E,O,de),N=P,y.stopPropagation(),y.preventDefault()}}function et(y){if(y.touches.length>0){const S=Ne(y.touches[0]),A=$(S.x,S.y);E=A.x,O=A.y}}function Zt(y,S){const A=y.clientX-S.clientX,P=y.clientY-S.clientY;return Math.sqrt(A*A+P*P)}function Kt(y){Ti(y)}function Gt(y){if(w)return y.stopPropagation(),!1;if(y.target!==s&&y.target!==n||!(y.button===1&&window.event!==null||y.button===0))return;L.cancel();const A=Ne(y),P=$(A.x,A.y);return E=P.x,O=P.y,document.addEventListener("mousemove",Jt),document.addEventListener("mouseup",Qt),!1}function Jt(y){if(w||y.ctrlKey)return;is();const S=Ne(y),A=$(S.x,S.y),P=A.x-E,de=A.y-O;E=A.x,O=A.y,Qe(P,de)}function Qt(){ns(),es()}function es(){document.removeEventListener("mousemove",Jt),document.removeEventListener("mouseup",Qt),_=!1}function Oi(){document.removeEventListener("touchmove",qt),document.removeEventListener("touchend",et),document.removeEventListener("touchcancel",et),_=!1,V=!1,w=!1}function ts(y){L.cancel();let S=y.deltaY;y.deltaMode>0&&(S*=100);const A=ss(S);if(A!==1){const P=u?bt():Ne(y);tt(P.x,P.y,A)}}function Ne(y){const S=s.getBoundingClientRect(),A=y.clientX-S.left,P=y.clientY-S.top;return{x:A,y:P}}function bt(){const y=s.getBoundingClientRect();return{x:y.width*u.x,y:y.height*u.y}}function tt(y,S,A){return L.cancel(),Ft(y,S,A)}function ss(y){const S=Math.sign(y),A=Math.min(.25,Math.abs(p*y/128));return 1-S*A}function is(){_||(_=!0,L.start())}function ns(){_&&(V||L.stop())}}function cs(n){if(!!n){if(typeof n=="object")return(!Re(n.x)||!Re(n.y))&&hs(),n;hs()}}function hs(n){throw new Error(["Cannot parse transform origin.","Some good examples:",'  "center center" can be achieved with {x: 0.5, y: 0.5}','  "top center" can be achieved with {x: 0.5, y: 0}','  "bottom right" can be achieved with {x: 1, y: 1}'].join(`
`))}function On(n){const e=typeof n;if(e==="undefined"||e==="boolean")return;if(!(Re(n.left)&&Re(n.top)&&Re(n.bottom)&&Re(n.right)))throw new Error("Bounds object is not valid. It can be: undefined, boolean (true|false) or an object {left, top, right, bottom}")}function Re(n){return Number.isFinite(n)}function kt(n){return Number.isNaN?Number.isNaN(n):n!==n}function Vn(n,e){const t=n.x2<e.x1,s=n.x1>e.x2,i=n.y1>e.y2,r=n.y2<e.y1;return!(t||s||i||r)}var An=(n,e)=>e.type.includes(n.type)||e.type.includes("*");function ft(n,e){if(n===void 0&&e===void 0)return;const t=Array.isArray(n)?"array":typeof n;if(t==="string"||t==="boolean"||t==="number")return n===e?void 0:e;if(Array.isArray(n)){const o=n.map((a,l)=>typeof e=="object"&&l in e?ft(a,e[l]):e[l]);return!o.length||o.length===1&&!o[0]?void 0:o}if(!n)return e;const s=Object.keys(n),i={};let r=!1;if(s.forEach(o=>{const a=ft(n[o],e[o]);a!==void 0&&(r=!0,i[o]=a)}),!!r)return i}function Dn(n,e){return[ft(n,e),ft(e,n)]}function pt(n,e){const t=typeof n;if(t==="string"||t==="boolean"||t==="number")return e;if(Array.isArray(n))return n.map((s,i)=>e[i]?pt(s,e[i]):s);if(typeof n=="object"){const s=Object.keys(e),i=ue({},n);return s.forEach(r=>{i[r]=pt(n[r],e[r])}),i}}class jn{constructor(e,{input:t,output:s}){var r;if(s.connections.find(o=>o.input===t))return;if(((r=t==null?void 0:t.connection)==null?void 0:r.output)===s||!s||!t)return;if(this.system=e,t.node.getChildren().includes(s.node))throw new Error("Circular reference");if(!An(s,t))throw new Error("Can't connect type "+t.type+" to "+s.type);this.output=s,this.input=t,e.options.view&&(this.view=new Ln(this)),this.output.setConnection(this),this.input.setConnection(this),this.output.node.system.save()}joinNode(e){if(!this.isNodeJoinable(e))return;this.system.isPaused=!0,this.remove(),this.output.node.connectTo(e,0,e.getInputs()[0].key);const t=this.input.node.getInputs(),s=t.indexOf(this.input),i=t[s].key;e.connectTo(this.input.node,0,i),this.system.isPaused=!1,e.update()}isNodeJoinable(e){const t=this.input.type,s=this.output.type;if(this.input.node===e||this.output.node===e)return!1;const i=e.getInputs();if(!i.length||!i.find(o=>o.type.includes(s)))return!1;const r=e.outputs;return!(!r.length||!r.find(o=>t.includes(o.type)||t.includes("*")))}remove(){this.view&&this.view.remove(),this.input.removeConnection(),this.output.removeConnection(this)}deserialize(){return{id:this.input.node.attributes.id,out:this.indexOut,in:this.indexIn}}get indexOut(){return this.output.node.outputs.indexOf(this.output)}get indexIn(){return this.input.key}}class Dt extends Ie{constructor(e,t){super(),this.outputs=[],this._state={},this.states={},this.inputData=[],this.enableUpdates=!0,this.refs=[],this.system=e;const{attributes:s,state:i={}}=t;this._state=i,this.attributes=s,this.id=s.id,this._compute=sn((r=this._state)=>this.compute(r))}get state(){return this._state}bindView(e){this.view=e,this.outputs.forEach(t=>t.bindView()),Object.values(this.states).forEach(t=>t.bindView())}setAttributes(e){this.enableUpdates&&this.system.history.addAction(),this.attributes=ue(ue({},this.attributes),e),this==null||this.view.updateViewPosition(),this.save()}compute(e){return e}getChildren(){return this.outputs.map(s=>s.connections).flat().map(s=>s.input.node)}getSockets(){return[...this.getInputs(),...this.outputs]}getInputs(){return Object.values(this.states).map(e=>e.getInput()).filter(e=>!!e)}setStateValue(e,t){this.states[e].setValue(t)}getStateValue(e){return this.state[e]}update(){!this.enableUpdates||(this.system.options.showUpdates&&this.view&&this.view.showUpdate(),Object.values(this.states).find(e=>!e.isOkay)?this.computedData=void 0:this.computedData=this._compute(this.state),this.emit("computedData",this.computedData),this.refs.forEach(e=>{e.node.enableUpdates=!1,e.keyIn.forEach(t=>{this.system.options.deferCompute?e.node.setStateValue(t,{type:this.attributes.type,parameters:this.computedData}):e.node.setStateValue(t,this.computedData)}),e.node.enableUpdates=!0,e.node.update()}),this.save())}remove(){this.system.removeNode(this),this.destroyEventEmitter()}connectTo(e,t=0,s=e.getInputs()[0].key){var l,c,h;const i=this.outputs[t],r=(l=e.states[s])==null?void 0:l.getInput();if(!r)return;const o=new jn(this.system,{output:i,input:r});(c=i==null?void 0:i.view)==null||c.updatePosition(),(h=r==null?void 0:r.view)==null||h.updatePosition();const a=this.refs.find(d=>d.node.id===e.id&&d.indexOut===t);return a?a.keyIn=[...a.keyIn,s]:this.refs.push({node:e,keyIn:[s],indexOut:t}),this.update(),o}disconnectFrom(e,t,s){this.refs=this.refs.filter(i=>!(i.indexOut!==s||(i.keyIn.splice(i.keyIn.indexOf(t),1),i.keyIn.length===0))),this.update()}deserialize(){const e=Object.assign({},this.attributes);e.refs=this.outputs.map(s=>s.connections).flat().map(s=>s.deserialize());const t={};return Object.values(this.states).forEach(s=>{t[s.key]=s.getValue()}),gn({attributes:e,state:t})}save(){this.system.save()}}class jt{constructor(e){var r,o;this.inputs=[],this.outputs=[],this.active=!1,this.x=0,this.y=0,this.downX=0,this.downY=0,this.mDownX=0,this.mDownY=0,this.height=50,this.width=91,this.node=e,this.system=e.system,this.wrapper=document.createElement("div"),this.wrapper.style.minHeight=this.height+"px",this.wrapper.style.minWidth=this.width+"px",this.wrapper.classList.add("node-wrapper","node-type-"+e.attributes.type.toLowerCase()),this.wrapper.setAttribute("id","node-view-"+this.system.id+"-"+this.node.id),this.errorWrapper=document.createElement("div"),this.errorWrapper.classList.add("nodeview-error-wrapper"),this.wrapper.appendChild(this.errorWrapper),this.outputWrapper=document.createElement("div"),this.outputWrapper.classList.add("node-outputs-wrapper"),this.wrapper.append(this.outputWrapper);const t=document.createElement("p");t.innerHTML=e.attributes.name||e.attributes.type,t.classList.add("node-title"),this.wrapper.appendChild(t),this.stateWrapper=document.createElement("div"),this.stateWrapper.classList.add("node-state-wrapper"),this.wrapper.append(this.stateWrapper),e.system.view.nodeContainer.append(this.wrapper);const{pos:{x:s=0,y:i=0}={}}=e.attributes;this.x=s,this.y=i,this.wrapper.style.left=s+"px",this.wrapper.style.top=i+"px",(o=(r=this.node)==null?void 0:r.meta)!=null&&o.description&&(this.helpWrapper=document.createElement("div"),this.helpWrapper.innerHTML=`<h3>${e.attributes.name||e.attributes.type}</h3>
<p>${this.node.meta.description}</p>`,this.helpWrapper.classList.add("nodeview-help-wrapper"),this.wrapper.append(this.helpWrapper)),setTimeout(()=>{const{width:a,height:l}=this.wrapper.getBoundingClientRect();this.width=a/this.system.view.s,this.height=l/this.system.view.s,this.updateViewPosition(s,i)},10),this.bindEventListeners()}bindEventListeners(){this.helpWrapper&&this.system.view.on("transform",()=>{const{x:e}=this.wrapper.getBoundingClientRect();e>this.system.view.width/2?(this.wrapper.classList.remove("tooltip-right"),this.wrapper.classList.add("tooltip-left")):(this.wrapper.classList.add("tooltip-right"),this.wrapper.classList.remove("tooltip-left"))},2e3),this.wrapper.addEventListener("mousedown",e=>this.handleMouseDown(e)),this._unsubscribeMouseMove=this.system.view.on("mousemove",e=>this.handleMouseMove(e)),this._unsubscribeMouseUp=this.system.view.on("mouseup",()=>this.handleMouseUp())}removeEventListeners(){this._unsubscribeMouseMove(),this._unsubscribeMouseUp(),this.wrapper.addEventListener("mousedown",e=>this.handleMouseDown(e))}set state(e){this.wrapper.classList.remove("node-active","node-selected","node-dragging"),e==="no-error"&&this.wrapper.classList.remove("node-error"),this.wrapper.classList.add("node-"+e),this._state=e}get state(){return this._state}showErrors(e){if(this.errorWrapper.innerHTML="",this.errorWrapper.classList.remove("has-errors"),!e)return;const t=Array.isArray(e)?e:[e];t!=null&&t.length&&(this.errorWrapper.classList.add("has-errors"),this.errorWrapper.innerHTML=t.map(s=>`<div class="nodeview-error">${s}</div>`).join(""))}handleMouseDown(e){var i,r,o,a;if(this.system.view.keyMap.space||e.button===2||e.target!==e.currentTarget)return;e.stopImmediatePropagation(),e.stopPropagation(),this.node.system.view.setActive(this.node,e);const{rmx:t,rmy:s}=this.system.view;this.mDownX=t,this.mDownY=s,this.downX=((r=(i=this.node.attributes)==null?void 0:i.pos)==null?void 0:r.x)||0,this.downY=((a=(o=this.node.attributes)==null?void 0:o.pos)==null?void 0:a.y)||0,this.active=!0,this.system.view.selectedNodes.length&&this.system.view.selectedNodes.forEach(l=>{l.view.active=!0,l.view.mDownX=t,l.view.mDownY=s,l.view.downX=l.view.x,l.view.downY=l.view.y})}handleMouseUp(){this.active=!1,this.hoveredConnection&&(this.hoveredConnection.connection.joinNode(this.node),delete this.hoveredConnection)}showUpdate(){this.wrapper.classList.add("is-updating"),setTimeout(()=>{this.wrapper.classList.remove("is-updating")},200)}handleMouseMove({mx:e,my:t,keys:s}){if(this.active){this.state="dragging";const i=s.ctrlKey?.02:1;let r=this.mDownX-e,o=this.mDownY-t;s.shiftKey&&(Math.abs(r)>Math.abs(o)?o=0:r=0);const a=Math.round((this.downX-r/this.system.view.s)*i)/i,l=Math.round((this.downY-o/this.system.view.s)*i)/i;this.setPosition(a,l)}}updateViewPosition(e=(r=>(r=(i=>(i=(s=>(s=this.node.attributes)==null?void 0:s.pos)())==null?void 0:i.x)())!=null?r:this.x)(),t=(l=>(l=(a=>(a=(o=>(o=this.node.attributes)==null?void 0:o.pos)())==null?void 0:a.y)())!=null?l:this.y)()){this.wrapper.style.left=e+"px",this.wrapper.style.top=t+"px",Object.values(this.node.states).forEach(c=>{var h;return(h=c==null?void 0:c.view)==null?void 0:h.updatePosition()}),this.node.outputs.forEach(c=>c.view.updatePosition())}setPosition(e,t){this.x=e,this.y=t,this.node.setAttributes({pos:{x:e,y:t}}),this.updateViewPosition()}remove(){this.removeEventListeners(),this.wrapper.remove()}}function Pn(){return"window"in globalThis}const us=Pn();function ds(n){const e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)}function hi(n){const e=n-1;return e*e*e+1}function fs(n,{delay:e=0,duration:t=400,easing:s=$i}={}){const i=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:s,css:r=>`opacity: ${r*i}`}}function mt(n,{delay:e=0,duration:t=400,easing:s=hi}={}){const i=getComputedStyle(n),r=+i.opacity,o=parseFloat(i.height),a=parseFloat(i.paddingTop),l=parseFloat(i.paddingBottom),c=parseFloat(i.marginTop),h=parseFloat(i.marginBottom),d=parseFloat(i.borderTopWidth),p=parseFloat(i.borderBottomWidth);return{delay:e,duration:t,easing:s,css:u=>`overflow: hidden;opacity: ${Math.min(u*20,1)*r};height: ${u*o}px;padding-top: ${u*a}px;padding-bottom: ${u*l}px;margin-top: ${u*c}px;margin-bottom: ${u*h}px;border-top-width: ${u*d}px;border-bottom-width: ${u*p}px;`}}function ps(n,{delay:e=0,duration:t=400,easing:s=hi,start:i=0,opacity:r=0}={}){const o=getComputedStyle(n),a=+o.opacity,l=o.transform==="none"?"":o.transform,c=1-i,h=a*(1-r);return{delay:e,duration:t,easing:s,css:(d,p)=>`
			transform: ${l} scale(${1-c*p});
			opacity: ${a-h*p}
		`}}function $n(n){let e,t,s,i,r,o,a,l;return{c(){e=Y("svg"),t=Y("title"),s=Z("branch"),i=Y("path"),r=Y("path"),o=Y("path"),a=Y("path"),l=Y("polyline"),this.h()},l(c){e=q(c,"svg",{xmlns:!0,viewBox:!0,class:!0});var h=k(e);t=q(h,"title",{});var d=k(t);s=K(d,"branch"),d.forEach(v),i=q(h,"path",{id:!0,d:!0,class:!0}),k(i).forEach(v),r=q(h,"path",{id:!0,d:!0,class:!0}),k(r).forEach(v),o=q(h,"path",{id:!0,d:!0,class:!0}),k(o).forEach(v),a=q(h,"path",{id:!0,d:!0,class:!0}),k(a).forEach(v),l=q(h,"polyline",{points:!0,class:!0}),k(l).forEach(v),h.forEach(v),this.h()},h(){f(i,"id","right-branch"),f(i,"d","M49.59,57.35,72.15,38.69"),f(i,"class","svelte-1vkkcpp"),f(r,"id","top-left-branch"),f(r,"d","M51.58,29.45,38,11.21"),f(r,"class","svelte-1vkkcpp"),f(o,"id","low-left-branch"),f(o,"d","M53.14,82.61,21.78,55.74"),f(o,"class","svelte-1vkkcpp"),f(a,"id","low-left-small-branch"),f(a,"d","M37.108 68.971L33.812 47.849"),f(a,"class","svelte-1vkkcpp"),f(l,"points","56 97 50 58 51 28 56 16"),f(l,"class","svelte-1vkkcpp"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"viewBox","0 0 100 100"),f(e,"class","svelte-1vkkcpp"),B(e,"animated",n[0])},m(c,h){T(c,e,h),g(e,t),g(t,s),g(e,i),g(e,r),g(e,o),g(e,a),g(e,l)},p(c,[h]){h&1&&B(e,"animated",c[0])},i:F,o:F,d(c){c&&v(e)}}}function Bn(n,e,t){let{animated:s=!1}=e;return n.$$set=i=>{"animated"in i&&t(0,s=i.animated)},[s]}class Rn extends ae{constructor(e){super(),le(this,e,Bn,$n,ce,{animated:0})}}var Fn='<svg id="e7691b6e-31fa-49a4-aaec-be19b623d191" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><style>.b50603dd-20d5-40a2-a0ce-2fdf3b92ec21{fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:5px;}</style></defs><title>checkmark</title><path class="b50603dd-20d5-40a2-a0ce-2fdf3b92ec21" d="M75.5,30,40.43,72.47a2,2,0,0,1-3.08,0L24.5,57"/></svg>',Wn=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
<defs>
</defs>
	<circle  cx="50.37" cy="50.5" r="17.23"/>
  <path  d="M38.07,20.49,32.17,8.05,50.83,4.41l.61,13.8,12.13,2.28L68.73,8.05l14,10.16-9,10L81.17,38.7l12-5.47,3.34,17.3H81.93L80.57,63l12.59,6.37L82.7,83.62l-9-9.86L63.58,81.19l5.15,11.23-17.9,3.64V82.71L38.08,81.19,32.77,92.42,17.44,82.71l10.17-8.35L19.11,63,8.19,69.36,4.4,50.56H17.45l1.67-13.81L8.2,30.84l9.25-13.2,11.08,8.81Z"/>
</svg>
`,Hn=`<svg
  xmlns="http://www.w3.org/2000/svg"
	viewBox="0 0 100 100">
  <line fill="none" stroke="#FFFFFF" stroke-width="5" stroke-miterlimit="10" x1="27.836" y1="72.164" x2="72.164" y2="27.836"/>
  <line fill="none" stroke="#FFFFFF" stroke-width="5" stroke-miterlimit="10" x1="27.836" y1="27.988" x2="72.164" y2="72.012"/>
</svg>
`,Un=`<svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M50.552 59.3295L39.0695 13.7056H60.2078L50.552 59.3295Z" stroke-linejoin="round"/>
<path d="M58.4305 77.2411C58.4305 80.8276 55.4725 83.7944 51.7497 83.7944C48.0269 83.7944 45.0688 80.8276 45.0688 77.2411C45.0688 73.6546 48.0269 70.6878 51.7497 70.6878C55.4725 70.6878 58.4305 73.6546 58.4305 77.2411Z"/>
</svg>
`,zn=`<svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">

<defs>
	<style>
		path{
			stroke: white;
			stroke-width: 5px;
		}
	</style>
</defs>

<path d="M23.5167 72.9513V32.1483H82.1056L87.6855 37.0307V76.09L82.1056 78.5312H29.4453L23.5167 72.9513Z" />
<path d="M23.2747 73.6489L12.3145 30.0463L15.8885 21.4688H71.8808L75.693 32.9055" />
<path d="M25.488 43.9781H86.7394" />
</svg>
`,Xn=`<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
<path d="M70.5 26.5L77.5 23.5L82 32V69L77.5 82L64.5 92.5H47L32 82L18 46L21 40H27L35 57.5V15.5L39.5 11L45.5 13.5M70.5 26.5L69 15.5L58.5 14M70.5 26.5V57.5M58.5 14L55 8L45.5 13.5M58.5 14V49M45.5 13.5V49" stroke-width="5" fill="none"/>
</svg>
`,Yn=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  <defs>
    <style>.cls-1{fill:none;stroke:#fff;stroke-width:5px;}</style>
  </defs>
  <title>leaf</title>
  <path class="cls-1" d="M50.69,96.21,72.86,72.33,77,47,65.91,21.7,50.66,4.5"/>
  <path class="cls-1" d="M53.37,96.21,31.2,72.33,27.07,47,38.15,21.7,53.4,4.5"/>
</svg>`,qn=`<svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M30.2312 46.4809V15.6962L33.3006 8H40.8035L44.3844 11.0785V29.7203H52.9104L55.9798 33.8249H65.0173L68.0867 38.9557L76.2717 40.1529L79 56.0583L73.7139 72.9899L66.8931 93H36.5405L30.2312 75.5553L20 60.334L21.7052 50.2435L30.2312 46.4809ZM30.2312 46.4809V58.1107M44.3844 29.3783V46.3099M56.4913 34.5091V46.3099M68.7688 39.2978V50.4145" stroke="white" stroke-width="5"/>
</svg>
`,Zn=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  <defs>
    <style>.cls-1{fill:none;stroke:#fff;stroke-width:5px;}</style>
  </defs>
  <title>stem</title>
  <path class="cls-1" d="M49,95.5l8.66-23.19L43.24,46.07l10.59-21L43.24,4.5"/>
</svg>`,Kn=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" xml:space="preserve">
  <polygon fill="none" stroke="#FFFFFF" stroke-width="5" stroke-miterlimit="10" points="33.5,73.759 33.5,26.241 67.441,50 "/>
</svg>
`,Gn=`<svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M54.7631 15.1799L91.7944 79.3201C93.9114 82.9867 91.2652 87.5701 87.0313 87.5701H12.9687C8.73476 87.5701 6.08857 82.9867 8.20552 79.3201L45.2368 15.1799C47.3538 11.5133 52.6462 11.5133 54.7631 15.1799Z" stroke="white" stroke-width="5" stroke-linejoin="round"/>
<ellipse cx="50.0578" cy="73.7787" rx="5.98166" ry="5.89858" fill="white"/>
<path d="M52.9755 60.2707C52.5275 63.7615 47.4723 63.7615 47.0243 60.2707L43.5981 33.5748C43.3678 31.781 44.7652 30.1929 46.5736 30.1929L53.4261 30.1929C55.2346 30.1929 56.6319 31.781 56.4017 33.5748L52.9755 60.2707Z" fill="white"/>
</svg>
`,Jn=`<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
<path d="M32.7792 25.4477L45.6598 15.6472L61.6205 20.4075L67.2208 32.728L54.3402 46.4486L50.9801 59.3291V63.9218" stroke-width="8"/>
<path d="M47.3642 83.3434L44.983 79.0169L46.821 74.3331L51.3861 73.0881L55.5363 75.0446L56.307 80.8548L52.3347 84.3528L47.3642 83.3434Z" />
</svg>

`,Qn=`<svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M42 88.5V80V63.5L32 55L26 39.5L32 24.5L46 15L67.5 19L78 30.5V51.5L65 66.5V76V88.5L59.5 94.5H46L42 88.5Z"/>
<path d="M42 74L64.5 83" />
<path d="M42.5 82.5L63 91" />
<path d="M42 70L67 71"/>
<path d="M51.5 69.5L49.5 58.5L43.5 51.5L60.5 50.5L59 57.5L58 71.5" />
<path d="M55 25.5L64.5 28.5L69 38V44"/>
<path d="M19 28.5L11.5 23.5M35 14L29 4.5M61 10L63 -0.5M78 19.5L90.5 10M85 39.5L92 39"/>
<path d="M22.5 50L14.5 52.5"/>
</svg>
`,er=`<svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M42 86.5V78V61.5L32 53L26 37.5L32 22.5L46 13L67.5 17L78 28.5V49.5L65 64.5V74V86.5L59.5 92.5H46L42 86.5Z" />
<path d="M42 72L64.5 81" />
<path d="M42.5 80.5L63 89" />
<path d="M42 68L67 69" />
<path d="M51.5 67.5L49.5 56.5L43.5 49.5L60.5 48.5L59 55.5L58 69.5"/>
<path d="M55 23.5L64.5 26.5L69 36V42" />
</svg>
`,tr=`<svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
<defs>
<style>
#gh-icon{
    stroke: none !important;
    fill: var(--text-color);
  }
</style>
</defs>
<path id="gh-icon" d="M16 0C7.16 0 0 7.16 0 16C0 23.08 4.58 29.06 10.94 31.18C11.74 31.32 12.04 30.84 12.04 30.42C12.04 30.04 12.02 28.78 12.02 27.44C8 28.18 6.96 26.46 6.64 25.56C6.46 25.1 5.68 23.68 5 23.3C4.44 23 3.64 22.26 4.98 22.24C6.24 22.22 7.14 23.4 7.44 23.88C8.88 26.3 11.18 25.62 12.1 25.2C12.24 24.16 12.66 23.46 13.12 23.06C9.56 22.66 5.84 21.28 5.84 15.16C5.84 13.42 6.46 11.98 7.48 10.86C7.32 10.46 6.76 8.82 7.64 6.62C7.64 6.62 8.98 6.2 12.04 8.26C13.32 7.9 14.68 7.72 16.04 7.72C17.4 7.72 18.76 7.9 20.04 8.26C23.1 6.18 24.44 6.62 24.44 6.62C25.32 8.82 24.76 10.46 24.6 10.86C25.62 11.98 26.24 13.4 26.24 15.16C26.24 21.3 22.5 22.66 18.94 23.06C19.52 23.56 20.02 24.52 20.02 26.02C20.02 28.16 20 29.88 20 30.42C20 30.84 20.3 31.34 21.1 31.18C27.42 29.06 32 23.06 32 16C32 7.16 24.84 0 16 0V0Z" fill="#24292E"/>
</svg>
`,sr=`<svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M16 70L19.8068 76H76.1477L83 71.3548V50.5M83 39.5V28.7419L79.1932 21H22.8523L16 28.7419V39M16 51.5V57.5" />
<rect x="9.53153" y="62.98" width="10.0663" height="10.2909" transform="rotate(-47.7262 9.53153 62.98)" />
<rect x="9.53153" y="46.98" width="10.0663" height="10.2909" transform="rotate(-47.7262 9.53153 46.98)" />
<rect x="75.5315" y="45.98" width="10.0663" height="10.2909" transform="rotate(-47.7262 75.5315 45.98)" />
<path d="M16 32.5H83.5" />
</svg>
`,ir=`<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
<path d="M42.3064 76.3951L60.3917 79.5448L71.5322 66.0581L71.0775 49.7779L62.385 32.699L51.7555 22.1391L39.551 20.6218L30.0718 29.8084L28.4454 44.7032L32.4241 63.4494L42.3064 76.3951Z" />
<path d="M43 35.5L60 79.5M40 75.5L32 90M32 60L16.5 68.5M28 43L12 41.5M71 16L60 28.5L28 40.5M71 46.5L86 40.5M71 64.5L86 68.5M46.5 21.5L48 9M32 28.5L22.5 19" />
</svg>
`,ms=Object.freeze(Object.defineProperty({__proto__:null,branch:Rn,checkmark:Fn,cog:Wn,cross:Hn,exclamation:Un,folder:zn,hand:Xn,leaf:Yn,pointing:qn,stem:Zn,triangle:Kn,warning:Gn,question:Jn,bulb:Qn,bulb_dark:er,github:tr,node:sr,bug:ir},Symbol.toStringTag,{value:"Module"}));function nr(n){let e,t,s;var i=n[4];function r(o){return{props:{animated:o[3]}}}return i&&(e=new i(r(n))),{c(){e&&ie(e.$$.fragment),t=Q()},l(o){e&&he(e.$$.fragment,o),t=Q()},m(o,a){e&&ne(e,o,a),T(o,t,a),s=!0},p(o,a){const l={};if(a&8&&(l.animated=o[3]),i!==(i=o[4])){if(e){te();const c=e;j(c.$$.fragment,1,0,()=>{re(c,1)}),se()}i?(e=new i(r(o)),ie(e.$$.fragment),I(e.$$.fragment,1),ne(e,t.parentNode,t)):e=null}else i&&e.$set(l)},i(o){s||(e&&I(e.$$.fragment,o),s=!0)},o(o){e&&j(e.$$.fragment,o),s=!1},d(o){o&&v(t),e&&re(e,o)}}}function rr(n){let e,t;return{c(){e=new Bi(!1),t=Q(),this.h()},l(s){e=Ri(s,!1),t=Q(),this.h()},h(){e.a=t},m(s,i){e.m(n[4],s,i),T(s,t,i)},p(s,i){i&16&&e.p(s[4])},i:F,o:F,d(s){s&&v(t),s&&e.d()}}}function or(n){let e,t,s,i;const r=[rr,nr],o=[];function a(l,c){return typeof l[4]=="string"?0:1}return t=a(n),s=o[t]=r[t](n),{c(){e=M("div"),s.c(),this.h()},l(l){e=x(l,"DIV",{class:!0});var c=k(e);s.l(c),c.forEach(v),this.h()},h(){f(e,"class","icon-wrapper svelte-wupv6r"),B(e,"active",n[0]),B(e,"dark",n[1]),B(e,"circle",n[2]),B(e,"animated",n[3])},m(l,c){T(l,e,c),o[t].m(e,null),i=!0},p(l,[c]){let h=t;t=a(l),t===h?o[t].p(l,c):(te(),j(o[h],1,1,()=>{o[h]=null}),se(),s=o[t],s?s.p(l,c):(s=o[t]=r[t](l),s.c()),I(s,1),s.m(e,null)),c&1&&B(e,"active",l[0]),c&2&&B(e,"dark",l[1]),c&4&&B(e,"circle",l[2]),c&8&&B(e,"animated",l[3])},i(l){i||(I(s),i=!0)},o(l){j(s),i=!1},d(l){l&&v(e),o[t].d()}}}function ar(n,e,t){let s,{name:i="triangle"}=e,{active:r=!1}=e,{dark:o=!1}=e,{circle:a=!1}=e,{animated:l=!1}=e;return n.$$set=c=>{"name"in c&&t(5,i=c.name),"active"in c&&t(0,r=c.active),"dark"in c&&t(1,o=c.dark),"circle"in c&&t(2,a=c.circle),"animated"in c&&t(3,l=c.animated)},n.$$.update=()=>{n.$$.dirty&32&&t(4,s=i in ms?ms[i]:i.toString()+" icon not found")},[r,o,a,l,s,i]}class Pt extends ae{constructor(e){super(),le(this,e,ar,or,ce,{name:5,active:0,dark:1,circle:2,animated:3})}}function vs(n){let e,t,s,i;const r=[cr,lr],o=[];function a(l,c){return l[7]?0:1}return e=a(n),t=o[e]=r[e](n),{c(){t.c(),s=Q()},l(l){t.l(l),s=Q()},m(l,c){o[e].m(l,c),T(l,s,c),i=!0},p(l,c){let h=e;e=a(l),e===h?o[e].p(l,c):(te(),j(o[h],1,1,()=>{o[h]=null}),se(),t=o[e],t?t.p(l,c):(t=o[e]=r[e](l),t.c()),I(t,1),t.m(s.parentNode,s))},i(l){i||(I(t),i=!0)},o(l){j(t),i=!1},d(l){o[e].d(l),l&&v(s)}}}function lr(n){let e;return{c(){e=M("plant-icon"),this.h()},l(t){e=x(t,"PLANT-ICON",{name:!0,active:!0,class:!0}),k(e).forEach(v),this.h()},h(){be(e,"name",n[1]),be(e,"active",n[0]),be(e,"class","svelte-rinkpy")},m(t,s){T(t,e,s)},p(t,s){s&2&&be(e,"name",t[1]),s&1&&be(e,"active",t[0])},i:F,o:F,d(t){t&&v(e)}}}function cr(n){let e,t,s;return e=new Pt({props:{name:n[1],active:n[0]}}),{c(){t=M("div"),ie(e.$$.fragment),this.h()},l(i){t=x(i,"DIV",{style:!0});var r=k(t);he(e.$$.fragment,r),this.h()},h(){J(t,"display","contents"),J(t,"--width","25px")},m(i,r){T(i,t,r),ne(e,t,null),s=!0},p(i,r){const o={};r&2&&(o.name=i[1]),r&1&&(o.active=i[0]),e.$set(o)},i(i){s||(I(e.$$.fragment,i),s=!0)},o(i){j(e.$$.fragment,i),s=!1},d(i){i&&v(t),re(e,i)}}}function ws(n){let e,t;return{c(){e=M("p"),t=Z(n[2]),this.h()},l(s){e=x(s,"P",{class:!0});var i=k(e);t=K(i,n[2]),i.forEach(v),this.h()},h(){f(e,"class","svelte-rinkpy")},m(s,i){T(s,e,i),g(e,t)},p(s,i){i&4&&fe(t,s[2])},d(s){s&&v(e)}}}function hr(n){let e,t,s,i,r,o,a,l,c=n[1]&&vs(n),h=n[2]&&ws(n);const d=n[10].default,p=ni(d,n,n[9],null);return{c(){e=M("div"),t=M("button"),c&&c.c(),s=U(),h&&h.c(),i=U(),r=M("div"),p&&p.c(),this.h()},l(u){e=x(u,"DIV",{class:!0});var m=k(e);t=x(m,"BUTTON",{class:!0});var w=k(t);c&&c.l(w),s=z(w),h&&h.l(w),i=z(w),r=x(w,"DIV",{class:!0});var _=k(r);p&&p.l(_),_.forEach(v),w.forEach(v),m.forEach(v),this.h()},h(){f(r,"class","content svelte-rinkpy"),t.disabled=n[5],f(t,"class","svelte-rinkpy"),B(t,"active",n[0]),B(t,"invert",n[4]),B(t,"useActive",n[3]),B(t,"only-icon",!n[2]),B(t,"has-icon",!!n[1]),f(e,"class","component-wrapper svelte-rinkpy")},m(u,m){T(u,e,m),g(e,t),c&&c.m(t,null),g(t,s),h&&h.m(t,null),g(t,i),g(t,r),p&&p.m(r,null),n[11](t),o=!0,a||(l=R(t,"click",n[8]),a=!0)},p(u,[m]){u[1]?c?(c.p(u,m),m&2&&I(c,1)):(c=vs(u),c.c(),I(c,1),c.m(t,s)):c&&(te(),j(c,1,1,()=>{c=null}),se()),u[2]?h?h.p(u,m):(h=ws(u),h.c(),h.m(t,i)):h&&(h.d(1),h=null),p&&p.p&&(!o||m&512)&&ri(p,d,u,u[9],o?ai(d,u[9],m,null):oi(u[9]),null),(!o||m&32)&&(t.disabled=u[5]),m&1&&B(t,"active",u[0]),m&16&&B(t,"invert",u[4]),m&8&&B(t,"useActive",u[3]),m&4&&B(t,"only-icon",!u[2]),m&2&&B(t,"has-icon",!!u[1])},i(u){o||(I(c),I(p,u),o=!0)},o(u){j(c),j(p,u),o=!1},d(u){u&&v(e),c&&c.d(),h&&h.d(),p&&p.d(u),n[11](null),a=!1,l()}}}function ur(n,e,t){let s,{$$slots:i={},$$scope:r}=e,{icon:o=void 0}=e,{name:a=""}=e,{active:l=!1}=e,{useActive:c=!1}=e,{invert:h=!1}=e,{disabled:d=!1}=e,p;const u=Le(),m=()=>{t(0,l=!l),u("click")};function w(_){Te[_?"unshift":"push"](()=>{p=_,t(6,p)})}return n.$$set=_=>{"icon"in _&&t(1,o=_.icon),"name"in _&&t(2,a=_.name),"active"in _&&t(0,l=_.active),"useActive"in _&&t(3,c=_.useActive),"invert"in _&&t(4,h=_.invert),"disabled"in _&&t(5,d=_.disabled),"$$scope"in _&&t(9,r=_.$$scope)},n.$$.update=()=>{n.$$.dirty&64&&t(7,s=p&&!!p.parentElement)},[l,o,a,c,h,d,p,s,m,r,i,w]}class Ke extends ae{constructor(e){super(),le(this,e,ur,hr,ce,{icon:1,name:2,active:0,useActive:3,invert:4,disabled:5})}}var ui={exports:{}},lt=1;function dr(){return lt=(lt*9301+49297)%233280,lt/233280}function fr(n){lt=n}var pr={nextValue:dr,seed:fr},St=pr,Ve="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-",Ce,ys,Xe;function Ct(){Xe=!1}function di(n){if(!n){Ce!==Ve&&(Ce=Ve,Ct());return}if(n!==Ce){if(n.length!==Ve.length)throw new Error("Custom alphabet for shortid must be "+Ve.length+" unique characters. You submitted "+n.length+" characters: "+n);var e=n.split("").filter(function(t,s,i){return s!==i.lastIndexOf(t)});if(e.length)throw new Error("Custom alphabet for shortid must be "+Ve.length+" unique characters. These characters were not unique: "+e.join(", "));Ce=n,Ct()}}function mr(n){return di(n),Ce}function vr(n){St.seed(n),ys!==n&&(Ct(),ys=n)}function wr(){Ce||di(Ve);for(var n=Ce.split(""),e=[],t=St.nextValue(),s;n.length>0;)t=St.nextValue(),s=Math.floor(t*n.length),e.push(n.splice(s,1)[0]);return e.join("")}function fi(){return Xe||(Xe=wr(),Xe)}function yr(n){var e=fi();return e[n]}function gr(){return Ce||Ve}var $t={get:gr,characters:mr,seed:vr,lookup:yr,shuffled:fi},Et=typeof window=="object"&&(window.crypto||window.msCrypto),Tt;!Et||!Et.getRandomValues?Tt=function(n){for(var e=[],t=0;t<n;t++)e.push(Math.floor(Math.random()*256));return e}:Tt=function(n){return Et.getRandomValues(new Uint8Array(n))};var _r=Tt,br=function(n,e,t){for(var s=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*s*t/e.length),r="";;)for(var o=n(i),a=i;a--;)if(r+=e[o[a]&s]||"",r.length===+t)return r},kr=$t,Er=_r,Lr=br;function Mr(n){for(var e=0,t,s="";!t;)s=s+Lr(Er,kr.get(),1),t=n<Math.pow(16,e+1),e++;return s}var xr=Mr,rt=xr,Nr=1567752802062,Sr=7,ot,gs;function Cr(n){var e="",t=Math.floor((Date.now()-Nr)*.001);return t===gs?ot++:(ot=0,gs=t),e=e+rt(Sr),e=e+rt(n),ot>0&&(e=e+rt(ot)),e=e+rt(t),e}var Tr=Cr,Ir=$t;function Or(n){if(!n||typeof n!="string"||n.length<6)return!1;var e=new RegExp("[^"+Ir.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]");return!e.test(n)}var Vr=Or;(function(n){var e=$t,t=Tr,s=Vr,i=0;function r(c){return e.seed(c),n.exports}function o(c){return i=c,n.exports}function a(c){return c!==void 0&&e.characters(c),e.shuffled()}function l(){return t(i)}n.exports=l,n.exports.generate=l,n.exports.seed=r,n.exports.worker=o,n.exports.characters=a,n.exports.isValid=s})(ui);var pi=ui.exports,ve=(n=>(n.INFO="info",n.WARNING="warning",n.ERROR="error",n.SUCCESS="success",n))(ve||{});const Ar=n=>(e,t={})=>{var o;if(!e&&!t)return;const s=Array.isArray(t==null?void 0:t.values),i={id:pi(),type:ve.INFO,content:e,props:t.props,title:(o=t==null?void 0:t.title)!=null?o:t==null?void 0:t.type,values:t==null?void 0:t.values,timeout:t==null?void 0:t.timeout},r=new Promise((a,l)=>{i.resolve=a,i.reject=()=>a(void 0)});if(r.finally(()=>n.update(a=>a.filter(l=>l.id!==i.id))),t&&"type"in t){const a=t.type.toLowerCase();Object.values(ve).forEach(l=>{a===l&&(i.type=l)})}if(e instanceof Error&&(i.type=ve.ERROR),typeof i.timeout=="undefined"){let a;i.type===ve.SUCCESS&&(a=3e3),i.type===ve.INFO&&(a=2e3),i.type===ve.WARNING&&(a=7e3),a&&!s&&(i.timeout=a)}return"title"in i||(i.title=i.type.toUpperCase().slice(0,1)+i.type.slice(1)),n.update(a=>[...a,i]),i.timeout&&setTimeout(i.resolve,i.timeout),r};var mi=()=>{const n=gt([]),e=Ar(n);return{store:n,createMessage:e,MessageType:ve}};const{store:Dr,createMessage:jr,MessageType:$a}=mi(),Pr=Dr,Ba=jr;function _s(n,e,t){const s=n.slice();return s[7]=e[t],s}function bs(n){let e,t,s,i,r,o,a,l,c,h,d,p,u,m;i=new Ke({props:{icon:"cross"}}),i.$on("click",n[4]);let w=n[0].title&&ks(n);const _=[Br,$r],E=[];function O(L,V){return typeof L[0].content=="string"?0:1}l=O(n),c=E[l]=_[l](n);let N=n[0].values&&Es(n);return{c(){e=M("div"),t=M("div"),s=M("div"),r=M("div"),ie(i.$$.fragment),o=U(),w&&w.c(),a=U(),c.c(),h=U(),N&&N.c(),this.h()},l(L){e=x(L,"DIV",{class:!0});var V=k(e);t=x(V,"DIV",{class:!0});var b=k(t);s=x(b,"DIV",{class:!0});var D=k(s);r=x(D,"DIV",{style:!0});var C=k(r);he(i.$$.fragment,C),D.forEach(v),o=z(b),w&&w.l(b),a=z(b),c.l(b),h=z(b),N&&N.l(b),b.forEach(v),V.forEach(v),this.h()},h(){J(r,"display","contents"),J(r,"--foreground-color","transparent"),f(s,"class","close-wrapper svelte-3vp4n3"),f(t,"class",d="alert-wrapper alert-"+n[0].type+" svelte-3vp4n3"),B(t,"isInverted",n[1]),f(e,"class","alert-container svelte-3vp4n3")},m(L,V){T(L,e,V),g(e,t),g(t,s),g(s,r),ne(i,r,null),g(t,o),w&&w.m(t,null),g(t,a),E[l].m(t,null),g(t,h),N&&N.m(t,null),m=!0},p(L,V){L[0].title?w?w.p(L,V):(w=ks(L),w.c(),w.m(t,a)):w&&(w.d(1),w=null);let b=l;l=O(L),l===b?E[l].p(L,V):(te(),j(E[b],1,1,()=>{E[b]=null}),se(),c=E[l],c?c.p(L,V):(c=E[l]=_[l](L),c.c()),I(c,1),c.m(t,h)),L[0].values?N?(N.p(L,V),V&1&&I(N,1)):(N=Es(L),N.c(),I(N,1),N.m(t,null)):N&&(te(),j(N,1,1,()=>{N=null}),se()),(!m||V&1&&d!==(d="alert-wrapper alert-"+L[0].type+" svelte-3vp4n3"))&&f(t,"class",d),V&3&&B(t,"isInverted",L[1])},i(L){m||(I(i.$$.fragment,L),I(c),I(N),ht(()=>{p||(p=Se(t,ps,{},!0)),p.run(1)}),ht(()=>{u||(u=Se(e,fs,{},!0)),u.run(1)}),m=!0)},o(L){j(i.$$.fragment,L),j(c),j(N),p||(p=Se(t,ps,{},!1)),p.run(0),u||(u=Se(e,fs,{},!1)),u.run(0),m=!1},d(L){L&&v(e),re(i),w&&w.d(),E[l].d(),N&&N.d(),L&&p&&p.end(),L&&u&&u.end()}}}function ks(n){let e,t=n[0].title+"",s;return{c(){e=M("h2"),s=Z(t),this.h()},l(i){e=x(i,"H2",{class:!0});var r=k(e);s=K(r,t),r.forEach(v),this.h()},h(){f(e,"class","svelte-3vp4n3")},m(i,r){T(i,e,r),g(e,s)},p(i,r){r&1&&t!==(t=i[0].title+"")&&fe(s,t)},d(i){i&&v(e)}}}function $r(n){let e,t,s;const i=[n[0].props];var r=n[0].content;function o(a){let l={};for(let c=0;c<i.length;c+=1)l=Hi(l,i[c]);return{props:l}}return r&&(e=new r(o()),e.$on("close",n[5])),{c(){e&&ie(e.$$.fragment),t=Q()},l(a){e&&he(e.$$.fragment,a),t=Q()},m(a,l){e&&ne(e,a,l),T(a,t,l),s=!0},p(a,l){const c=l&1?Fi(i,[Wi(a[0].props)]):{};if(r!==(r=a[0].content)){if(e){te();const h=e;j(h.$$.fragment,1,0,()=>{re(h,1)}),se()}r?(e=new r(o()),e.$on("close",a[5]),ie(e.$$.fragment),I(e.$$.fragment,1),ne(e,t.parentNode,t)):e=null}else r&&e.$set(c)},i(a){s||(e&&I(e.$$.fragment,a),s=!0)},o(a){e&&j(e.$$.fragment,a),s=!1},d(a){a&&v(t),e&&re(e,a)}}}function Br(n){let e,t=n[0].content+"";return{c(){e=M("p")},l(s){e=x(s,"P",{});var i=k(e);i.forEach(v)},m(s,i){T(s,e,i),e.innerHTML=t},p(s,i){i&1&&t!==(t=s[0].content+"")&&(e.innerHTML=t)},i:F,o:F,d(s){s&&v(e)}}}function Es(n){let e,t,s=n[0].values,i=[];for(let o=0;o<s.length;o+=1)i[o]=Ls(_s(n,s,o));const r=o=>j(i[o],1,1,()=>{i[o]=null});return{c(){e=M("div");for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=x(o,"DIV",{class:!0});var a=k(e);for(let l=0;l<i.length;l+=1)i[l].l(a);a.forEach(v),this.h()},h(){f(e,"class","options-wrapper svelte-3vp4n3")},m(o,a){T(o,e,a);for(let l=0;l<i.length;l+=1)i[l].m(e,null);t=!0},p(o,a){if(a&1){s=o[0].values;let l;for(l=0;l<s.length;l+=1){const c=_s(o,s,l);i[l]?(i[l].p(c,a),I(i[l],1)):(i[l]=Ls(c),i[l].c(),I(i[l],1),i[l].m(e,null))}for(te(),l=s.length;l<i.length;l+=1)r(l);se()}},i(o){if(!t){for(let a=0;a<s.length;a+=1)I(i[a]);t=!0}},o(o){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)j(i[a]);t=!1},d(o){o&&v(e),Ee(i,o)}}}function Ls(n){let e,t,s;function i(){return n[6](n[7])}return e=new Ke({props:{name:n[7]}}),e.$on("click",i),{c(){t=M("div"),ie(e.$$.fragment),this.h()},l(r){t=x(r,"DIV",{style:!0});var o=k(t);he(e.$$.fragment,o),this.h()},h(){J(t,"display","contents"),J(t,"--bg","#303030"),J(t,"--text","white"),J(t,"--margin","0 10px 0 0")},m(r,o){T(r,t,o),ne(e,t,null),s=!0},p(r,o){n=r;const a={};o&1&&(a.name=n[7]),e.$set(a)},i(r){s||(I(e.$$.fragment,r),s=!0)},o(r){j(e.$$.fragment,r),s=!1},d(r){r&&v(t),re(e,r)}}}function Rr(n){let e,t,s,i,r=n[0]&&bs(n);return{c(){r&&r.c(),e=Q()},l(o){r&&r.l(o),e=Q()},m(o,a){r&&r.m(o,a),T(o,e,a),t=!0,s||(i=R(window,"keydown",n[2]),s=!0)},p(o,[a]){o[0]?r?(r.p(o,a),a&1&&I(r,1)):(r=bs(o),r.c(),I(r,1),r.m(e.parentNode,e)):r&&(te(),j(r,1,1,()=>{r=null}),se())},i(o){t||(I(r),t=!0)},o(o){j(r),t=!1},d(o){r&&r.d(o),o&&v(e),s=!1,i()}}}function Fr(n,e,t){let s,i,r;wt(n,Pr,h=>t(3,r=h));function o(h){h.key==="Escape"&&s&&s.reject()}const a=()=>{s.reject()},l=()=>s.resolve(!1),c=h=>s.resolve(h);return n.$$.update=()=>{n.$$.dirty&8&&t(0,s=r[0]),n.$$.dirty&1&&(s?us&&document.body.classList.add("overlay-visible"):us&&document.body.classList.remove("overlay-visible")),n.$$.dirty&1&&t(1,i=s&&(s.type==="success"||s.type==="warning"))},[s,i,o,r,a,l,c]}class Wr extends ae{constructor(e){super(),le(this,e,Fr,Rr,ce,{})}}const{store:Hr,createMessage:Ur}=mi(),zr=Hr,Ra=Ur;function Ms(n,e,t){const s=n.slice();return s[1]=e[t],s}function xs(n){let e,t,s,i=n[0].type+"",r,o,a,l=n[0].title+"",c,h,d,p,u,m,w,_,E=n[0].lines,O=[];for(let N=0;N<E.length;N+=1)O[N]=Ns(Ms(n,E,N));return{c(){e=M("div"),t=M("p"),s=M("b"),r=Z(i),o=Z(":"),a=U(),c=Z(l),h=U(),d=M("pre"),p=Z("    "),u=M("code"),m=Z(`
      `);for(let N=0;N<O.length;N+=1)O[N].c();w=Z(`
    `),_=Z(`
  `),this.h()},l(N){e=x(N,"DIV",{class:!0});var L=k(e);t=x(L,"P",{});var V=k(t);s=x(V,"B",{});var b=k(s);r=K(b,i),o=K(b,":"),b.forEach(v),a=z(V),c=K(V,l),V.forEach(v),h=z(L),d=x(L,"PRE",{class:!0});var D=k(d);p=K(D,"    "),u=x(D,"CODE",{});var C=k(u);m=K(C,`
      `);for(let H=0;H<O.length;H+=1)O[H].l(C);w=K(C,`
    `),C.forEach(v),_=K(D,`
  `),D.forEach(v),L.forEach(v),this.h()},h(){f(d,"class","svelte-pl1jfp"),f(e,"class","wrapper svelte-pl1jfp")},m(N,L){T(N,e,L),g(e,t),g(t,s),g(s,r),g(s,o),g(t,a),g(t,c),g(e,h),g(e,d),g(d,p),g(d,u),g(u,m);for(let V=0;V<O.length;V+=1)O[V].m(u,null);g(u,w),g(d,_)},p(N,L){if(L&1&&i!==(i=N[0].type+"")&&fe(r,i),L&1&&l!==(l=N[0].title+"")&&fe(c,l),L&1){E=N[0].lines;let V;for(V=0;V<E.length;V+=1){const b=Ms(N,E,V);O[V]?O[V].p(b,L):(O[V]=Ns(b),O[V].c(),O[V].m(u,w))}for(;V<O.length;V+=1)O[V].d(1);O.length=E.length}},d(N){N&&v(e),Ee(O,N)}}}function Ns(n){let e,t,s=n[1].methodName+"",i,r,o,a=n[1].file+"",l,c;return{c(){e=Z("at "),t=M("strong"),i=Z(s),r=Z(" "),o=M("i"),l=Z(a),c=M("br")},l(h){e=K(h,"at "),t=x(h,"STRONG",{});var d=k(t);i=K(d,s),d.forEach(v),r=K(h," "),o=x(h,"I",{});var p=k(o);l=K(p,a),p.forEach(v),c=x(h,"BR",{})},m(h,d){T(h,e,d),T(h,t,d),g(t,i),T(h,r,d),T(h,o,d),g(o,l),T(h,c,d)},p(h,d){d&1&&s!==(s=h[1].methodName+"")&&fe(i,s),d&1&&a!==(a=h[1].file+"")&&fe(l,a)},d(h){h&&v(e),h&&v(t),h&&v(r),h&&v(o),h&&v(c)}}}function Xr(n){let e,t=n[0]&&xs(n);return{c(){t&&t.c(),e=Q()},l(s){t&&t.l(s),e=Q()},m(s,i){t&&t.m(s,i),T(s,e,i)},p(s,[i]){s[0]?t?t.p(s,i):(t=xs(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:F,o:F,d(s){t&&t.d(s),s&&v(e)}}}function Yr(n,e,t){let{stacktrace:s}=e;return n.$$set=i=>{"stacktrace"in i&&t(0,s=i.stacktrace)},[s]}class qr extends ae{constructor(e){super(),le(this,e,Yr,Xr,ce,{stacktrace:0})}}function Ss(n,e,t){const s=n.slice();return s[13]=e[t],s}function Cs(n){let e,t,s,i,r,o,a,l,c,h,d,p,u,m,w,_,E,O,N,L,V,b,D=n[6]&&Ts(n),C=n[0].title&&Is(n);const H=[Gr,Kr,Zr],X=[];function pe($,ee){return typeof $[0].content=="string"?0:$[0].content instanceof Error?1:$[0].content instanceof Ui?2:-1}~(a=pe(n))&&(l=X[a]=H[a](n));let W=n[0].content instanceof Error&&Vs(n),G=n[0].values&&As(n);return m=new Pt({props:{name:"cross",dark:n[5]}}),{c(){e=M("div"),t=M("div"),s=M("div"),D&&D.c(),i=U(),r=M("div"),C&&C.c(),o=U(),l&&l.c(),c=U(),h=M("div"),W&&W.c(),d=U(),G&&G.c(),p=U(),u=M("div"),w=M("div"),ie(m.$$.fragment),_=U(),E=M("div"),this.h()},l($){e=x($,"DIV",{class:!0});var ee=k(e);t=x(ee,"DIV",{class:!0});var we=k(t);s=x(we,"DIV",{class:!0});var me=k(s);D&&D.l(me),i=z(me),r=x(me,"DIV",{class:!0});var xe=k(r);C&&C.l(xe),o=z(xe),l&&l.l(xe),c=z(xe),h=x(xe,"DIV",{class:!0});var De=k(h);W&&W.l(De),d=z(De),G&&G.l(De),De.forEach(v),xe.forEach(v),p=z(me),u=x(me,"DIV",{class:!0});var je=k(u);w=x(je,"DIV",{style:!0});var Ge=k(w);he(m.$$.fragment,Ge),je.forEach(v),me.forEach(v),_=z(we),E=x(we,"DIV",{style:!0,class:!0}),k(E).forEach(v),we.forEach(v),ee.forEach(v),this.h()},h(){f(h,"class","button-wrapper svelte-11jarjr"),f(r,"class","toast-text svelte-11jarjr"),J(w,"display","contents"),J(w,"--width","fit-content"),f(u,"class","toast-close svelte-11jarjr"),f(s,"class","toast-content svelte-11jarjr"),B(s,"hasIcon",!!n[6]),f(E,"style",O=`transition: width ${n[0].timeout}ms linear;`),f(E,"class","toast-progress svelte-11jarjr"),B(E,"animateProgress",n[2]),f(t,"class",N="toast toast-"+n[0].type+" svelte-11jarjr"),B(t,"isInverted",n[5]),f(e,"class","wrapper svelte-11jarjr")},m($,ee){T($,e,ee),g(e,t),g(t,s),D&&D.m(s,null),g(s,i),g(s,r),C&&C.m(r,null),g(r,o),~a&&X[a].m(r,null),g(r,c),g(r,h),W&&W.m(h,null),g(h,d),G&&G.m(h,null),g(s,p),g(s,u),g(u,w),ne(m,w,null),g(t,_),g(t,E),n[11](e),L=!0,V||(b=R(u,"click",n[10]),V=!0)},p($,ee){$[6]?D?(D.p($,ee),ee&64&&I(D,1)):(D=Ts($),D.c(),I(D,1),D.m(s,i)):D&&(te(),j(D,1,1,()=>{D=null}),se()),$[0].title?C?C.p($,ee):(C=Is($),C.c(),C.m(r,o)):C&&(C.d(1),C=null);let we=a;a=pe($),a===we?~a&&X[a].p($,ee):(l&&(te(),j(X[we],1,1,()=>{X[we]=null}),se()),~a?(l=X[a],l?l.p($,ee):(l=X[a]=H[a]($),l.c()),I(l,1),l.m(r,c)):l=null),$[0].content instanceof Error?W?(W.p($,ee),ee&1&&I(W,1)):(W=Vs($),W.c(),I(W,1),W.m(h,d)):W&&(te(),j(W,1,1,()=>{W=null}),se()),$[0].values?G?(G.p($,ee),ee&1&&I(G,1)):(G=As($),G.c(),I(G,1),G.m(h,null)):G&&(te(),j(G,1,1,()=>{G=null}),se());const me={};ee&32&&(me.dark=$[5]),m.$set(me),ee&64&&B(s,"hasIcon",!!$[6]),(!L||ee&1&&O!==(O=`transition: width ${$[0].timeout}ms linear;`))&&f(E,"style",O),ee&4&&B(E,"animateProgress",$[2]),(!L||ee&1&&N!==(N="toast toast-"+$[0].type+" svelte-11jarjr"))&&f(t,"class",N),ee&33&&B(t,"isInverted",$[5])},i($){L||(I(D),I(l),I(W),I(G),I(m.$$.fragment,$),L=!0)},o($){j(D),j(l),j(W),j(G),j(m.$$.fragment,$),L=!1},d($){$&&v(e),D&&D.d(),C&&C.d(),~a&&X[a].d(),W&&W.d(),G&&G.d(),re(m),n[11](null),V=!1,b()}}}function Ts(n){let e,t,s,i;return t=new Pt({props:{name:n[6],dark:n[5],circle:!0}}),{c(){e=M("div"),s=M("div"),ie(t.$$.fragment),this.h()},l(r){e=x(r,"DIV",{class:!0});var o=k(e);s=x(o,"DIV",{style:!0});var a=k(s);he(t.$$.fragment,a),o.forEach(v),this.h()},h(){J(s,"display","contents"),J(s,"--width","40px"),J(s,"--height","40px"),f(e,"class","toast-icon svelte-11jarjr")},m(r,o){T(r,e,o),g(e,s),ne(t,s,null),i=!0},p(r,o){const a={};o&64&&(a.name=r[6]),o&32&&(a.dark=r[5]),t.$set(a)},i(r){i||(I(t.$$.fragment,r),i=!0)},o(r){j(t.$$.fragment,r),i=!1},d(r){r&&v(e),re(t)}}}function Is(n){let e,t=n[0].title+"",s;return{c(){e=M("h3"),s=Z(t),this.h()},l(i){e=x(i,"H3",{class:!0});var r=k(e);s=K(r,t),r.forEach(v),this.h()},h(){f(e,"class","svelte-11jarjr")},m(i,r){T(i,e,r),g(e,s)},p(i,r){r&1&&t!==(t=i[0].title+"")&&fe(s,t)},d(i){i&&v(e)}}}function Zr(n){let e,t,s;var i=n[0].content;function r(o){return{}}return i&&(e=new i(r())),{c(){e&&ie(e.$$.fragment),t=Q()},l(o){e&&he(e.$$.fragment,o),t=Q()},m(o,a){e&&ne(e,o,a),T(o,t,a),s=!0},p(o,a){if(i!==(i=o[0].content)){if(e){te();const l=e;j(l.$$.fragment,1,0,()=>{re(l,1)}),se()}i?(e=new i(r()),ie(e.$$.fragment),I(e.$$.fragment,1),ne(e,t.parentNode,t)):e=null}},i(o){s||(e&&I(e.$$.fragment,o),s=!0)},o(o){e&&j(e.$$.fragment,o),s=!1},d(o){o&&v(t),e&&re(e,o)}}}function Kr(n){let e,t=n[0].content.message+"",s,i,r,o,a=n[3]&&Os(n);return{c(){e=M("p"),s=Z(t),i=U(),a&&a.c(),r=Q(),this.h()},l(l){e=x(l,"P",{class:!0});var c=k(e);s=K(c,t),c.forEach(v),i=z(l),a&&a.l(l),r=Q(),this.h()},h(){f(e,"class","svelte-11jarjr")},m(l,c){T(l,e,c),g(e,s),T(l,i,c),a&&a.m(l,c),T(l,r,c),o=!0},p(l,c){(!o||c&1)&&t!==(t=l[0].content.message+"")&&fe(s,t),l[3]?a?(a.p(l,c),c&8&&I(a,1)):(a=Os(l),a.c(),I(a,1),a.m(r.parentNode,r)):a&&(te(),j(a,1,1,()=>{a=null}),se())},i(l){o||(I(a),o=!0)},o(l){j(a),o=!1},d(l){l&&v(e),l&&v(i),a&&a.d(l),l&&v(r)}}}function Gr(n){let e,t=n[0].content+"";return{c(){e=M("p"),this.h()},l(s){e=x(s,"P",{class:!0});var i=k(e);i.forEach(v),this.h()},h(){f(e,"class","svelte-11jarjr")},m(s,i){T(s,e,i),e.innerHTML=t},p(s,i){i&1&&t!==(t=s[0].content+"")&&(e.innerHTML=t)},i:F,o:F,d(s){s&&v(e)}}}function Os(n){let e,t,s,i;return t=new qr({props:{stacktrace:ls(n[0].content)}}),{c(){e=M("div"),ie(t.$$.fragment),this.h()},l(r){e=x(r,"DIV",{class:!0});var o=k(e);he(t.$$.fragment,o),o.forEach(v),this.h()},h(){f(e,"class","stack-trace svelte-11jarjr")},m(r,o){T(r,e,o),ne(t,e,null),i=!0},p(r,o){const a={};o&1&&(a.stacktrace=ls(r[0].content)),t.$set(a)},i(r){i||(I(t.$$.fragment,r),ht(()=>{s||(s=Se(e,mt,{},!0)),s.run(1)}),i=!0)},o(r){j(t.$$.fragment,r),s||(s=Se(e,mt,{},!1)),s.run(0),i=!1},d(r){r&&v(e),re(t),r&&s&&s.end()}}}function Vs(n){let e,t,s;return e=new Ke({props:{invert:n[5],name:"> StackTrace"}}),e.$on("click",n[7]),{c(){t=M("div"),ie(e.$$.fragment),this.h()},l(i){t=x(i,"DIV",{style:!0});var r=k(t);he(e.$$.fragment,r),this.h()},h(){J(t,"display","contents"),J(t,"--margin","5px 10px 5px 0px"),J(t,"--bg","transparent")},m(i,r){T(i,t,r),ne(e,t,null),s=!0},p(i,r){const o={};r&32&&(o.invert=i[5]),e.$set(o)},i(i){s||(I(e.$$.fragment,i),s=!0)},o(i){j(e.$$.fragment,i),s=!1},d(i){i&&v(t),re(e,i)}}}function As(n){let e,t,s=n[0].values,i=[];for(let o=0;o<s.length;o+=1)i[o]=Ds(Ss(n,s,o));const r=o=>j(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=Q()},l(o){for(let a=0;a<i.length;a+=1)i[a].l(o);e=Q()},m(o,a){for(let l=0;l<i.length;l+=1)i[l].m(o,a);T(o,e,a),t=!0},p(o,a){if(a&17){s=o[0].values;let l;for(l=0;l<s.length;l+=1){const c=Ss(o,s,l);i[l]?(i[l].p(c,a),I(i[l],1)):(i[l]=Ds(c),i[l].c(),I(i[l],1),i[l].m(e.parentNode,e))}for(te(),l=s.length;l<i.length;l+=1)r(l);se()}},i(o){if(!t){for(let a=0;a<s.length;a+=1)I(i[a]);t=!0}},o(o){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)j(i[a]);t=!1},d(o){Ee(i,o),o&&v(e)}}}function Jr(n){let e,t,s;function i(){return n[9](n[13])}return e=new Ke({props:{invert:!0,name:n[13]}}),e.$on("click",i),{c(){t=M("div"),ie(e.$$.fragment),this.h()},l(r){t=x(r,"DIV",{style:!0});var o=k(t);he(e.$$.fragment,o),this.h()},h(){J(t,"display","contents"),J(t,"--height","fit-content"),J(t,"--white-space","break-spaces"),J(t,"--margin","5px 10px 5px 0")},m(r,o){T(r,t,o),ne(e,t,null),s=!0},p(r,o){n=r;const a={};o&1&&(a.name=n[13]),e.$set(a)},i(r){s||(I(e.$$.fragment,r),s=!0)},o(r){j(e.$$.fragment,r),s=!1},d(r){r&&v(t),re(e,r)}}}function Qr(n){let e,t,s,i;function r(){return n[8](n[13])}return{c(){e=M("plant-button"),this.h()},l(o){e=x(o,"PLANT-BUTTON",{name:!0}),k(e).forEach(v),this.h()},h(){be(e,"name",t=n[13])},m(o,a){T(o,e,a),s||(i=R(e,"click",r),s=!0)},p(o,a){n=o,a&1&&t!==(t=n[13])&&be(e,"name",t)},i:F,o:F,d(o){o&&v(e),s=!1,i()}}}function Ds(n){let e,t,s,i,r;const o=[Qr,Jr],a=[];function l(c,h){return c[4]?0:1}return t=l(n),s=a[t]=o[t](n),{c(){e=M("div"),s.c(),i=U(),this.h()},l(c){e=x(c,"DIV",{class:!0});var h=k(e);s.l(h),i=z(h),h.forEach(v),this.h()},h(){f(e,"class","button-spacer svelte-11jarjr")},m(c,h){T(c,e,h),a[t].m(e,null),g(e,i),r=!0},p(c,h){let d=t;t=l(c),t===d?a[t].p(c,h):(te(),j(a[d],1,1,()=>{a[d]=null}),se(),s=a[t],s?s.p(c,h):(s=a[t]=o[t](c),s.c()),I(s,1),s.m(e,i))},i(c){r||(I(s),r=!0)},o(c){j(s),r=!1},d(c){c&&v(e),a[t].d()}}}function eo(n){let e,t,s=n[0]&&Cs(n);return{c(){s&&s.c(),e=Q()},l(i){s&&s.l(i),e=Q()},m(i,r){s&&s.m(i,r),T(i,e,r),t=!0},p(i,[r]){i[0]?s?(s.p(i,r),r&1&&I(s,1)):(s=Cs(i),s.c(),I(s,1),s.m(e.parentNode,e)):s&&(te(),j(s,1,1,()=>{s=null}),se())},i(i){t||(I(s),t=!0)},o(i){j(s),t=!1},d(i){s&&s.d(i),i&&v(e)}}}function to(n,e,t){let s,i,{toast:r}=e,o=!1,a=!1;function l(){if(r.type===ve.ERROR)return"warning";if(r.type===ve.SUCCESS)return"checkmark";if(r.type===ve.WARNING)return"exclamation"}let c=!1,h;Vt(()=>{setTimeout(()=>{t(2,o=!0)},10)});const d=()=>{t(3,a=!a)},p=_=>r.resolve(_),u=_=>r.resolve(_),m=()=>r.reject();function w(_){Te[_?"unshift":"push"](()=>{h=_,t(1,h)})}return n.$$set=_=>{"toast"in _&&t(0,r=_.toast)},n.$$.update=()=>{n.$$.dirty&1&&t(6,s=r&&l()),n.$$.dirty&1&&t(5,i=r&&(r.type==="success"||r.type==="warning"||r.type==="error")),n.$$.dirty&2&&t(4,c=h&&!h.parentElement)},[r,h,o,a,c,i,s,d,p,u,m,w]}class so extends ae{constructor(e){super(),le(this,e,to,eo,ce,{toast:0})}}function js(n,e,t){const s=n.slice();return s[4]=e[t],s}function io(n){let e,t;return e=new so({props:{toast:n[4]}}),{c(){ie(e.$$.fragment)},l(s){he(e.$$.fragment,s)},m(s,i){ne(e,s,i),t=!0},p(s,i){const r={};i&4&&(r.toast=s[4]),e.$set(r)},i(s){t||(I(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){re(e,s)}}}function no(n){let e,t;return{c(){e=M("plant-toast"),this.h()},l(s){e=x(s,"PLANT-TOAST",{toast:!0}),k(e).forEach(v),this.h()},h(){be(e,"toast",t=n[4])},m(s,i){T(s,e,i)},p(s,i){i&4&&t!==(t=s[4])&&be(e,"toast",t)},i:F,o:F,d(s){s&&v(e)}}}function Ps(n,e){let t,s,i,r,o,a;const l=[no,io],c=[];function h(d,p){return d[0]?0:1}return s=h(e),i=c[s]=l[s](e),{key:n,first:null,c(){t=M("div"),i.c(),r=U(),this.h()},l(d){t=x(d,"DIV",{});var p=k(t);i.l(p),r=z(p),p.forEach(v),this.h()},h(){this.first=t},m(d,p){T(d,t,p),c[s].m(t,null),g(t,r),a=!0},p(d,p){e=d;let u=s;s=h(e),s===u?c[s].p(e,p):(te(),j(c[u],1,1,()=>{c[u]=null}),se(),i=c[s],i?i.p(e,p):(i=c[s]=l[s](e),i.c()),I(i,1),i.m(t,r))},i(d){a||(I(i),ht(()=>{o||(o=Se(t,mt,{easing:ds},!0)),o.run(1)}),a=!0)},o(d){j(i),o||(o=Se(t,mt,{easing:ds},!1)),o.run(0),a=!1},d(d){d&&v(t),c[s].d(),d&&o&&o.end()}}}function ro(n){let e,t=[],s=new Map,i,r=n[2];const o=a=>a[4].id;for(let a=0;a<r.length;a+=1){let l=js(n,r,a),c=o(l);s.set(c,t[a]=Ps(c,l))}return{c(){e=M("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=x(a,"DIV",{id:!0,class:!0});var l=k(e);for(let c=0;c<t.length;c+=1)t[c].l(l);l.forEach(v),this.h()},h(){f(e,"id","toast-wrapper"),f(e,"class","svelte-1ujlok7")},m(a,l){T(a,e,l);for(let c=0;c<t.length;c+=1)t[c].m(e,null);n[3](e),i=!0},p(a,[l]){l&5&&(r=a[2],te(),t=zi(t,l,o,1,a,r,s,e,Xi,Ps,null,js),se())},i(a){if(!i){for(let l=0;l<r.length;l+=1)I(t[l]);i=!0}},o(a){for(let l=0;l<t.length;l+=1)j(t[l]);i=!1},d(a){a&&v(e);for(let l=0;l<t.length;l+=1)t[l].d();n[3](null)}}}function oo(n,e,t){let s;wt(n,zr,a=>t(2,s=a));let i=!1,r;Vt(function(){t(0,i=!r.parentElement)});function o(a){Te[a?"unshift":"push"](()=>{r=a,t(1,r)})}return[i,r,s,o]}class ao extends ae{constructor(e){super(),le(this,e,oo,ro,ce,{})}}function $s(n){let e,t;return{c(){e=M("p"),t=Z(n[1]),this.h()},l(s){e=x(s,"P",{class:!0});var i=k(e);t=K(i,n[1]),i.forEach(v),this.h()},h(){f(e,"class","svelte-ap46ok")},m(s,i){T(s,e,i),g(e,t)},p(s,i){i&2&&fe(t,s[1])},d(s){s&&v(e)}}}function lo(n){let e,t,s,i,r,o,a,l,c,h,d,p,u=n[1]&&$s(n);return{c(){e=M("div"),t=M("input"),s=U(),i=M("label"),r=Y("svg"),o=Y("title"),a=Z("cross"),l=Y("line"),c=Y("line"),h=U(),u&&u.c(),this.h()},l(m){e=x(m,"DIV",{class:!0});var w=k(e);t=x(w,"INPUT",{type:!0,id:!0,class:!0}),s=z(w),i=x(w,"LABEL",{class:!0,for:!0});var _=k(i);r=q(_,"svg",{xmlns:!0,viewBox:!0,class:!0});var E=k(r);o=q(E,"title",{class:!0});var O=k(o);a=K(O,"cross"),O.forEach(v),l=q(E,"line",{"vector-effect":!0,x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),k(l).forEach(v),c=q(E,"line",{"vector-effect":!0,x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),k(c).forEach(v),E.forEach(v),_.forEach(v),h=z(w),u&&u.l(w),w.forEach(v),this.h()},h(){f(t,"type","checkbox"),f(t,"id",n[2]),f(t,"class","svelte-ap46ok"),f(o,"class","svelte-ap46ok"),f(l,"vector-effect","non-scaling-stroke"),f(l,"x1","0"),f(l,"y1","100"),f(l,"x2","100"),f(l,"y2","0"),f(l,"class","svelte-ap46ok"),f(c,"vector-effect","non-scaling-stroke"),f(c,"x1","0"),f(c,"y1","0"),f(c,"x2","100"),f(c,"y2","100"),f(c,"class","svelte-ap46ok"),f(r,"xmlns","http://www.w3.org/2000/svg"),f(r,"viewBox","0 0 100 100"),f(r,"class","svelte-ap46ok"),f(i,"class","checkbox-label svelte-ap46ok"),f(i,"for",n[2]),f(e,"class","component-wrapper svelte-ap46ok")},m(m,w){T(m,e,w),g(e,t),t.checked=n[0],g(e,s),g(e,i),g(i,r),g(r,o),g(o,a),g(r,l),g(r,c),g(e,h),u&&u.m(e,null),d||(p=R(t,"change",n[3]),d=!0)},p(m,[w]){w&4&&f(t,"id",m[2]),w&1&&(t.checked=m[0]),w&4&&f(i,"for",m[2]),m[1]?u?u.p(m,w):(u=$s(m),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i:F,o:F,d(m){m&&v(e),u&&u.d(),d=!1,p()}}}function co(n,e,t){const s=Le();let{value:i=!1}=e,{label:r}=e,{id:o=pi()}=e;function a(){i=this.checked,t(0,i)}return n.$$set=l=>{"value"in l&&t(0,i=l.value),"label"in l&&t(1,r=l.label),"id"in l&&t(2,o=l.id)},n.$$.update=()=>{n.$$.dirty&1&&i!==void 0&&s("change",!!i)},[i,r,o,a]}class ho extends ae{constructor(e){super(),le(this,e,co,lo,ce,{value:0,label:1,id:2})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),oe()}get label(){return this.$$.ctx[1]}set label(e){this.$$set({label:e}),oe()}get id(){return this.$$.ctx[2]}set id(e){this.$$set({id:e}),oe()}}/**
 * Convert a series of points to a monotone cubic spline
 * Algorithm based on https://github.com/mbostock/d3
 * https://github.com/yr/monotone-cubic-spline
 * @copyright Yr
 * @license MIT
 */var uo=1e-6,Bs={points:function(e){var t=fo(e),s=e[1],i=e[0],r=[],o=t[1],a=t[0];r.push(i,[i[0]+a[0],i[1]+a[1],s[0]-o[0],s[1]-o[1],s[0],s[1]]);for(var l=2,c=t.length;l<c;l++){var h=e[l],d=t[l];r.push([h[0]-d[0],h[1]-d[1],h[0],h[1]])}return r},slice:function(e,t,s){var i=e.slice(t,s);if(t){if(i[1].length<6){var r=i[0].length;i[1]=[i[0][r-2]*2-i[0][r-4],i[0][r-1]*2-i[0][r-3]].concat(i[1])}i[0]=i[0].slice(-2)}return i},svgPath:function(e){for(var t="",s=0;s<e.length;s++){var i=e[s],r=i.length;s?r>4?(t+="C"+i[0]+", "+i[1],t+=", "+i[2]+", "+i[3],t+=", "+i[4]+", "+i[5]):(t+="S"+i[0]+", "+i[1],t+=", "+i[2]+", "+i[3]):t+="M"+i[r-2]+" "+i[r-1]}return t}};function fo(n){for(var e=po(n),t=n.length-1,s=[],i=void 0,r=void 0,o=void 0,a=void 0,l=0;l<t;l++)o=It(n[l],n[l+1]),Math.abs(o)<uo?e[l]=e[l+1]=0:(i=e[l]/o,r=e[l+1]/o,a=i*i+r*r,a>9&&(a=o*3/Math.sqrt(a),e[l]=a*i,e[l+1]=a*r));for(var c=0;c<=t;c++)a=(n[Math.min(t,c+1)][0]-n[Math.max(0,c-1)][0])/(6*(1+e[c]*e[c])),s.push([a||0,e[c]*a||0]);return s}function It(n,e){return(e[1]-n[1])/(e[0]-n[0])}function po(n){for(var e=[],t=n[0],s=n[1],i=e[0]=It(t,s),r=1,o=n.length-1;r<o;r++)t=s,s=n[r+1],e[r]=(i+(i=It(t,s)))*.5;return e[r]=i,e}function Rs(n,e,t){const s=n.slice();return s[19]=e[t],s[21]=t,s}function Fs(n,e,t){const s=n.slice();return s[19]=e[t],s}function Ws(n){let e,t,s,i,r;function o(){return n[10](n[19])}return{c(){e=Y("circle"),this.h()},l(a){e=q(a,"circle",{cx:!0,cy:!0,r:!0,class:!0}),k(e).forEach(v),this.h()},h(){f(e,"cx",t=n[19].x*100),f(e,"cy",s=n[19].y*100),f(e,"r","2"),f(e,"class","svelte-1hhavr7"),B(e,"pinned",n[19].pinned)},m(a,l){T(a,e,l),i||(r=R(e,"mousedown",o),i=!0)},p(a,l){n=a,l&1&&t!==(t=n[19].x*100)&&f(e,"cx",t),l&1&&s!==(s=n[19].y*100)&&f(e,"cy",s),l&1&&B(e,"pinned",n[19].pinned)},d(a){a&&v(e),i=!1,r()}}}function mo(n){let e,t,s,i,r;return{c(){e=Y("line"),this.h()},l(o){e=q(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),k(e).forEach(v),this.h()},h(){f(e,"x1",t=n[3][n[21]-1].x*100),f(e,"y1",s=n[3][n[21]-1].y*100),f(e,"x2",i=n[19].x*100),f(e,"y2",r=n[19].y*100),f(e,"class","svelte-1hhavr7")},m(o,a){T(o,e,a)},p:F,d(o){o&&v(e)}}}function Hs(n){let e,t,s,i=n[21]>0&&n[21]%2===0&&mo(n);return{c(){i&&i.c(),e=Y("circle"),this.h()},l(r){i&&i.l(r),e=q(r,"circle",{cx:!0,cy:!0,r:!0,class:!0}),k(e).forEach(v),this.h()},h(){f(e,"cx",t=n[19].x*100),f(e,"cy",s=n[19].y*100),f(e,"r","1"),f(e,"class","svelte-1hhavr7"),B(e,"pinned",n[19].pinned)},m(r,o){i&&i.m(r,o),T(r,e,o)},p(r,o){r[21]>0&&r[21]%2===0&&i.p(r,o)},d(r){i&&i.d(r),r&&v(e)}}}function vo(n){let e,t,s,i,r,o,a=n[0],l=[];for(let d=0;d<a.length;d+=1)l[d]=Ws(Fs(n,a,d));let c=n[3],h=[];for(let d=0;d<c.length;d+=1)h[d]=Hs(Rs(n,c,d));return{c(){e=M("div"),t=Y("svg"),s=Y("path");for(let d=0;d<l.length;d+=1)l[d].c();i=Y("g");for(let d=0;d<h.length;d+=1)h[d].c();this.h()},l(d){e=x(d,"DIV",{class:!0});var p=k(e);t=q(p,"svg",{viewBox:!0,width:!0,height:!0,class:!0});var u=k(t);s=q(u,"path",{d:!0,fill:!0,stroke:!0,class:!0}),k(s).forEach(v);for(let w=0;w<l.length;w+=1)l[w].l(u);i=q(u,"g",{id:!0,class:!0});var m=k(i);for(let w=0;w<h.length;w+=1)h[w].l(m);m.forEach(v),u.forEach(v),p.forEach(v),this.h()},h(){f(s,"d",n[2]),f(s,"fill","none"),f(s,"stroke","grey"),f(s,"class","svelte-1hhavr7"),f(i,"id","debug"),f(i,"class","svelte-1hhavr7"),f(t,"viewBox","0 0 100 100"),f(t,"width","100"),f(t,"height","100"),f(t,"class","svelte-1hhavr7"),f(e,"class","component-wrapper svelte-1hhavr7")},m(d,p){T(d,e,p),g(e,t),g(t,s);for(let u=0;u<l.length;u+=1)l[u].m(t,null);g(t,i);for(let u=0;u<h.length;u+=1)h[u].m(i,null);r||(o=[R(t,"mousedown",n[5]),R(t,"mousemove",n[4]),R(t,"mouseover",n[7]),R(t,"mouseout",n[8]),R(t,"mouseup",n[6]),R(t,"focus",n[7]),R(t,"blur",n[8])],r=!0)},p(d,[p]){if(p&4&&f(s,"d",d[2]),p&3){a=d[0];let u;for(u=0;u<a.length;u+=1){const m=Fs(d,a,u);l[u]?l[u].p(m,p):(l[u]=Ws(m),l[u].c(),l[u].m(t,i))}for(;u<l.length;u+=1)l[u].d(1);l.length=a.length}if(p&8){c=d[3];let u;for(u=0;u<c.length;u+=1){const m=Rs(d,c,u);h[u]?h[u].p(m,p):(h[u]=Hs(m),h[u].c(),h[u].m(i,null))}for(;u<h.length;u+=1)h[u].d(1);h.length=c.length}},i:F,o:F,d(d){d&&v(e),Ee(l,d),Ee(h,d),r=!1,Ue(o)}}}function wo(n,e,t){let s,i;const r=Le();let{value:o=[{x:0,y:1,pinned:!0},{x:1,y:0,pinned:!0}]}=e,a=!1,l,c,h=0,d=0,p=[];const u=()=>{requestAnimationFrame(()=>{r("change",s),t(0,s=s.sort((b,D)=>b.x>D.x?1:-1)),t(0,s[0].x=0,s),t(0,s[s.length-1].x=1,s)})},m=b=>{b.pinned||(s.splice(s.indexOf(l),1),u())},w=b=>{a&&(h=b.offsetX,d=b.offsetY,l&&(c=l,t(1,l=void 0)),c&&(c.x=h/100,c.y=d/100,u()))},_=()=>{if(!l){const b={x:h/100,y:d/100,pinned:!1};t(1,l=b),s.push(l),u()}},E=()=>{l&&(m(l),t(1,l=void 0)),c=void 0},O=()=>{a=!0},N=()=>{a=!1};function L(b){const D=Bs.points(b.map(C=>[C.x*100,C.y*100]));return Bs.svgPath(D)}const V=b=>{t(1,l=b)};return n.$$set=b=>{"value"in b&&t(9,o=b.value)},n.$$.update=()=>{n.$$.dirty&512&&t(0,s=o),n.$$.dirty&1&&t(2,i=L(s))},[s,l,i,p,w,_,E,O,N,o,V]}class yo extends ae{constructor(e){super(),le(this,e,wo,vo,ce,{value:9})}get value(){return this.$$.ctx[9]}set value(e){this.$$set({value:e}),oe()}}function Us(n){let e,t;return{c(){e=M("span"),this.h()},l(s){e=x(s,"SPAN",{class:!0,style:!0}),k(e).forEach(v),this.h()},h(){f(e,"class","overlay svelte-9t7y4q"),f(e,"style",t=`width: ${Math.min((n[0]-n[1])/(n[2]-n[1]),1)*100}%`)},m(s,i){T(s,e,i)},p(s,i){i&7&&t!==(t=`width: ${Math.min((s[0]-s[1])/(s[2]-s[1]),1)*100}%`)&&f(e,"style",t)},d(s){s&&v(e)}}}function go(n){let e,t,s,i,r,o,a,l,c,h,d,p,u=typeof n[1]!="undefined"&&typeof n[2]!="undefined"&&Us(n);return{c(){e=M("div"),u&&u.c(),t=U(),s=M("button"),i=Z("-"),r=U(),o=M("input"),l=U(),c=M("button"),h=Z("+"),this.h()},l(m){e=x(m,"DIV",{class:!0});var w=k(e);u&&u.l(w),t=z(w),s=x(w,"BUTTON",{class:!0});var _=k(s);i=K(_,"-"),_.forEach(v),r=z(w),o=x(w,"INPUT",{step:!0,max:!0,min:!0,type:!0,style:!0,class:!0}),l=z(w),c=x(w,"BUTTON",{class:!0});var E=k(c);h=K(E,"+"),E.forEach(v),w.forEach(v),this.h()},h(){f(s,"class","svelte-9t7y4q"),f(o,"step",n[3]),f(o,"max",n[2]),f(o,"min",n[1]),f(o,"type","number"),f(o,"style",a=`width:${n[5]};`),f(o,"class","svelte-9t7y4q"),f(c,"class","svelte-9t7y4q"),f(e,"class","component-wrapper svelte-9t7y4q")},m(m,w){T(m,e,w),u&&u.m(e,null),g(e,t),g(e,s),g(s,i),g(e,r),g(e,o),We(o,n[0]),n[11](o),g(e,l),g(e,c),g(c,h),d||(p=[R(s,"click",n[9]),R(o,"input",n[10]),R(o,"mousedown",n[7]),R(o,"mouseup",n[8]),R(c,"click",n[12])],d=!0)},p(m,[w]){typeof m[1]!="undefined"&&typeof m[2]!="undefined"?u?u.p(m,w):(u=Us(m),u.c(),u.m(e,t)):u&&(u.d(1),u=null),w&8&&f(o,"step",m[3]),w&4&&f(o,"max",m[2]),w&2&&f(o,"min",m[1]),w&32&&a!==(a=`width:${m[5]};`)&&f(o,"style",a),w&1&&yt(o.value)!==m[0]&&We(o,m[0])},i:F,o:F,d(m){m&&v(e),u&&u.d(),n[11](null),d=!1,Ue(p)}}}function _o(n,e,t){let s,i;const r=Le();let{min:o=-1/0}=e,{max:a=1/0}=e,{step:l=1}=e,{value:c=0}=e;c||(c=0);let h;function d(b){t(0,c=Math.max(o,Math.min(+c+b,a)))}let p=0,u=0,m;function w(b){b.preventDefault(),u=c,p=b.clientX,m=h.getBoundingClientRect(),window.removeEventListener("mousemove",E),window.addEventListener("mousemove",E),window.addEventListener("mouseup",_),document.body.style.cursor="ew-resize"}function _(){u===c?h.focus():h.blur(),document.body.style.cursor="unset",window.removeEventListener("mouseup",_),window.removeEventListener("mousemove",E)}function E(b){if(s){const D=(b.clientX-m.left)/m.width;t(0,c=Math.max(Math.min(Math.floor(o+(a-o)*D),a),o))}else{const D=b.clientX-p;t(0,c=u+Math.floor(D/10))}}const O=()=>d(-l);function N(){c=yt(this.value),t(0,c)}function L(b){Te[b?"unshift":"push"](()=>{h=b,t(4,h)})}const V=()=>d(+l);return n.$$set=b=>{"min"in b&&t(1,o=b.min),"max"in b&&t(2,a=b.max),"step"in b&&t(3,l=b.step),"value"in b&&t(0,c=b.value)},n.$$.update=()=>{var b;n.$$.dirty&6&&(s=typeof o!="undefined"&&typeof a!="undefined"&&Number.isFinite(o)&&Number.isFinite(a)),n.$$.dirty&1&&c!==void 0&&r("change",parseFloat(c+"")),n.$$.dirty&1&&t(5,i=Number.isFinite(c)?Math.max(((b=c==null?void 0:c.toString().length)!=null?b:1)*8,30)+"px":"20px")},[c,o,a,l,h,i,d,w,_,O,N,L,V]}class zs extends ae{constructor(e){super(),le(this,e,_o,go,ce,{min:1,max:2,step:3,value:0})}get min(){return this.$$.ctx[1]}set min(e){this.$$set({min:e}),oe()}get max(){return this.$$.ctx[2]}set max(e){this.$$set({max:e}),oe()}get step(){return this.$$.ctx[3]}set step(e){this.$$set({step:e}),oe()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),oe()}}function bo(n){let e,t,s,i,r,o,a,l;return{c(){e=M("div"),t=M("span"),i=U(),r=M("input"),this.h()},l(c){e=x(c,"DIV",{class:!0});var h=k(e);t=x(h,"SPAN",{class:!0,style:!0}),k(t).forEach(v),i=z(h),r=x(h,"INPUT",{step:!0,max:!0,min:!0,type:!0,style:!0,class:!0}),h.forEach(v),this.h()},h(){f(t,"class","overlay svelte-2d38g4"),f(t,"style",s=`width: ${(n[0]-n[1])/(n[2]-n[1])*100}%`),f(r,"step",n[3]),f(r,"max",n[2]),f(r,"min",n[1]),f(r,"type","number"),f(r,"style",o=`width:${n[6]};`),f(r,"class","svelte-2d38g4"),f(e,"class","component-wrapper svelte-2d38g4"),B(e,"is-down",n[5])},m(c,h){T(c,e,h),g(e,t),g(e,i),g(e,r),We(r,n[0]),n[10](r),a||(l=[R(r,"input",n[9]),R(r,"mousedown",n[7]),R(r,"mouseup",n[8])],a=!0)},p(c,[h]){h&7&&s!==(s=`width: ${(c[0]-c[1])/(c[2]-c[1])*100}%`)&&f(t,"style",s),h&8&&f(r,"step",c[3]),h&4&&f(r,"max",c[2]),h&2&&f(r,"min",c[1]),h&64&&o!==(o=`width:${c[6]};`)&&f(r,"style",o),h&1&&yt(r.value)!==c[0]&&We(r,c[0]),h&32&&B(e,"is-down",c[5])},i:F,o:F,d(c){c&&v(e),n[10](null),a=!1,Ue(l)}}}function ko(n){return parseFloat(n).toPrecision(2)}function Eo(n,e,t){let s,{value:i=.5}=e,{step:r=.01}=e,{min:o=0}=e,{max:a=1}=e;const l=Le();let c,h=!1,d=0,p=0,u=0,m;function w(L){L.preventDefault(),t(5,h=!0),p=i,d=L.clientY,m=c.getBoundingClientRect(),window.removeEventListener("mousemove",E),window.addEventListener("mousemove",E),window.addEventListener("mouseup",_),document.body.style.cursor="ew-resize"}function _(){t(5,h=!1),p===i&&c.focus(),i<o&&t(1,o=i),i>a&&t(2,a=i),document.body.style.cursor="unset",window.removeEventListener("mouseup",_),window.removeEventListener("mousemove",E)}function E(L){if(u=(L.clientX-m.left)/m.width,L.clientY-d,L.ctrlKey){let V=o+(a-o)*u;t(0,i=V)}else t(0,i=Math.max(Math.min(o+(a-o)*u,a),o))}function O(){i=yt(this.value),t(0,i)}function N(L){Te[L?"unshift":"push"](()=>{c=L,t(4,c)})}return n.$$set=L=>{"value"in L&&t(0,i=L.value),"step"in L&&t(3,r=L.step),"min"in L&&t(1,o=L.min),"max"in L&&t(2,a=L.max)},n.$$.update=()=>{var L;n.$$.dirty&1&&(i||0).toString().length>5&&t(0,i=ko(i||0)),n.$$.dirty&1&&i!==void 0&&l("change",parseFloat(i+"")),n.$$.dirty&1&&t(6,s=Number.isFinite(i)?Math.max(((L=i==null?void 0:i.toString().length)!=null?L:1)*8,50)+"px":"20px")},[i,o,a,r,c,h,s,w,_,O,N]}class Xs extends ae{constructor(e){super(),le(this,e,Eo,bo,ce,{value:0,step:3,min:1,max:2})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),oe()}get step(){return this.$$.ctx[3]}set step(e){this.$$set({step:e}),oe()}get min(){return this.$$.ctx[1]}set min(e){this.$$set({min:e}),oe()}get max(){return this.$$.ctx[2]}set max(e){this.$$set({max:e}),oe()}}function Ys(n,e,t){const s=n.slice();return s[7]=e[t],s}function qs(n){let e,t=n[7]+"",s,i,r,o,a;function l(){return n[5](n[7])}return{c(){e=M("p"),s=Z(t),i=U(),this.h()},l(c){e=x(c,"P",{style:!0,class:!0});var h=k(e);s=K(h,t),i=z(h),h.forEach(v),this.h()},h(){f(e,"style",r=`opacity: ${n[7]===n[0]?.5:1}`),f(e,"class","item svelte-3ixr9b"),B(e,"selected",n[0]===n[7])},m(c,h){T(c,e,h),g(e,s),g(e,i),o||(a=R(e,"click",l),o=!0)},p(c,h){n=c,h&2&&t!==(t=n[7]+"")&&fe(s,t),h&3&&r!==(r=`opacity: ${n[7]===n[0]?.5:1}`)&&f(e,"style",r),h&3&&B(e,"selected",n[0]===n[7])},d(c){c&&v(e),o=!1,a()}}}function Lo(n){let e,t,s=n[1],i=[];for(let r=0;r<s.length;r+=1)i[r]=qs(Ys(n,s,r));return{c(){e=M("div"),t=M("div");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=x(r,"DIV",{class:!0});var o=k(e);t=x(o,"DIV",{id:!0,class:!0});var a=k(t);for(let l=0;l<i.length;l+=1)i[l].l(a);a.forEach(v),o.forEach(v),this.h()},h(){f(t,"id","main"),f(t,"class","svelte-3ixr9b"),f(e,"class","component-wrapper svelte-3ixr9b")},m(r,o){T(r,e,o),g(e,t);for(let a=0;a<i.length;a+=1)i[a].m(t,null)},p(r,[o]){if(o&7){s=r[1];let a;for(a=0;a<s.length;a+=1){const l=Ys(r,s,a);i[a]?i[a].p(l,o):(i[a]=qs(l),i[a].c(),i[a].m(t,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=s.length}},i:F,o:F,d(r){r&&v(e),Ee(i,r)}}}function Mo(n,e,t){const s=Le();let{value:i=void 0}=e;function r(h){t(0,i=h),open=!1}let{values:o=[]}=e;function a(h){t(1,o=h)}function l(h){t(0,i=h)}const c=h=>r(h);return n.$$set=h=>{"value"in h&&t(0,i=h.value),"values"in h&&t(1,o=h.values)},n.$$.update=()=>{n.$$.dirty&1&&i&&s("change",i)},[i,o,r,a,l,c]}class xo extends ae{constructor(e){super(),le(this,e,Mo,Lo,ce,{value:0,values:1,setItems:3,setValue:4})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),oe()}get values(){return this.$$.ctx[1]}set values(e){this.$$set({values:e}),oe()}get setItems(){return this.$$.ctx[3]}get setValue(){return this.$$.ctx[4]}}function Zs(n,e,t){const s=n.slice();return s[11]=e[t],s}function No(n){let e,t,s,i;return{c(){e=M("div"),t=Z("none"),this.h()},l(r){e=x(r,"DIV",{id:!0,class:!0});var o=k(e);t=K(o,"none"),o.forEach(v),this.h()},h(){f(e,"id","selected-value"),f(e,"class","svelte-1t3rhtn")},m(r,o){T(r,e,o),g(e,t),s||(i=R(e,"click",n[4]),s=!0)},p:F,d(r){r&&v(e),s=!1,i()}}}function So(n){let e,t,s,i;return{c(){e=M("div"),t=Z(n[0]),this.h()},l(r){e=x(r,"DIV",{id:!0,class:!0});var o=k(e);t=K(o,n[0]),o.forEach(v),this.h()},h(){f(e,"id","selected-value"),f(e,"class","svelte-1t3rhtn")},m(r,o){T(r,e,o),g(e,t),s||(i=R(e,"click",n[4]),s=!0)},p(r,o){o&1&&fe(t,r[0])},d(r){r&&v(e),s=!1,i()}}}function Ks(n){let e,t=n[11]+"",s,i,r,o,a;function l(){return n[8](n[11])}return{c(){e=M("p"),s=Z(t),i=U(),this.h()},l(c){e=x(c,"P",{style:!0,class:!0});var h=k(e);s=K(h,t),i=z(h),h.forEach(v),this.h()},h(){f(e,"style",r=`opacity: ${n[11]===n[0]?.5:1}`),f(e,"class","item svelte-1t3rhtn")},m(c,h){T(c,e,h),g(e,s),g(e,i),o||(a=R(e,"click",l),o=!0)},p(c,h){n=c,h&2&&t!==(t=n[11]+"")&&fe(s,t),h&3&&r!==(r=`opacity: ${n[11]===n[0]?.5:1}`)&&f(e,"style",r)},d(c){c&&v(e),o=!1,a()}}}function Gs(n){let e,t=n[11]!==n[0]&&Ks(n);return{c(){t&&t.c(),e=Q()},l(s){t&&t.l(s),e=Q()},m(s,i){t&&t.m(s,i),T(s,e,i)},p(s,i){s[11]!==s[0]?t?t.p(s,i):(t=Ks(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(s){t&&t.d(s),s&&v(e)}}}function Co(n){let e,t,s,i;function r(h,d){return h[0]!==void 0?So:No}let o=r(n),a=o(n),l=n[1],c=[];for(let h=0;h<l.length;h+=1)c[h]=Gs(Zs(n,l,h));return{c(){e=M("div"),t=M("div"),a.c(),s=U(),i=M("div");for(let h=0;h<c.length;h+=1)c[h].c();this.h()},l(h){e=x(h,"DIV",{class:!0});var d=k(e);t=x(d,"DIV",{id:!0,class:!0});var p=k(t);a.l(p),s=z(p),i=x(p,"DIV",{id:!0,class:!0});var u=k(i);for(let m=0;m<c.length;m+=1)c[m].l(u);u.forEach(v),p.forEach(v),d.forEach(v),this.h()},h(){f(i,"id","item-wrapper"),f(i,"class","svelte-1t3rhtn"),f(t,"id","main"),f(t,"class","svelte-1t3rhtn"),f(e,"class","component-wrapper svelte-1t3rhtn"),B(e,"open",n[2])},m(h,d){T(h,e,d),g(e,t),a.m(t,null),g(t,s),g(t,i);for(let p=0;p<c.length;p+=1)c[p].m(i,null);n[9](t)},p(h,[d]){if(o===(o=r(h))&&a?a.p(h,d):(a.d(1),a=o(h),a&&(a.c(),a.m(t,s))),d&35){l=h[1];let p;for(p=0;p<l.length;p+=1){const u=Zs(h,l,p);c[p]?c[p].p(u,d):(c[p]=Gs(u),c[p].c(),c[p].m(i,null))}for(;p<c.length;p+=1)c[p].d(1);c.length=l.length}d&4&&B(e,"open",h[2])},i:F,o:F,d(h){h&&v(e),a.d(),Ee(c,h),n[9](null)}}}function To(n,e,t){const s=Le();let{value:i=void 0}=e,r=!1,o;function a(){t(2,r=!0),setTimeout(()=>{document.addEventListener("click",()=>{t(2,r=!1)},{once:!0})},50)}function l(m){t(0,i=m),t(2,r=!1)}let{values:c=[]}=e;function h(m){t(1,c=m)}function d(m){t(0,i=m)}const p=m=>l(m);function u(m){Te[m?"unshift":"push"](()=>{o=m,t(3,o)})}return n.$$set=m=>{"value"in m&&t(0,i=m.value),"values"in m&&t(1,c=m.values)},n.$$.update=()=>{n.$$.dirty&1&&i&&s("change",i)},[i,c,r,o,a,l,h,d,p,u]}class Io extends ae{constructor(e){super(),le(this,e,To,Co,ce,{value:0,values:1,setItems:6,setValue:7})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),oe()}get values(){return this.$$.ctx[1]}set values(e){this.$$set({values:e}),oe()}get setItems(){return this.$$.ctx[6]}get setValue(){return this.$$.ctx[7]}}function Js(n,e,t){const s=n.slice();return s[19]=e[t],s}function Qs(n){let e,t,s,i,r;function o(){return n[9](n[19])}return{c(){e=Y("circle"),this.h()},l(a){e=q(a,"circle",{cx:!0,cy:!0,r:!0,class:!0}),k(e).forEach(v),this.h()},h(){f(e,"cx",t=n[19].x*100),f(e,"cy",s=n[19].y*200-50),f(e,"r","4"),f(e,"class","svelte-z63oko"),B(e,"pinned",n[19].pinned)},m(a,l){T(a,e,l),i||(r=R(e,"mousedown",o),i=!0)},p(a,l){n=a,l&1&&t!==(t=n[19].x*100)&&f(e,"cx",t),l&1&&s!==(s=n[19].y*200-50)&&f(e,"cy",s),l&1&&B(e,"pinned",n[19].pinned)},d(a){a&&v(e),i=!1,r()}}}function Oo(n){let e,t,s,i,r,o,a,l,c,h,d,p,u=n[0],m=[];for(let w=0;w<u.length;w+=1)m[w]=Qs(Js(n,u,w));return{c(){e=M("div"),t=Y("svg"),s=Y("path");for(let w=0;w<m.length;w+=1)m[w].c();i=U(),r=Y("svg"),o=Y("defs"),a=Y("linearGradient"),l=Y("stop"),c=Y("stop"),h=Y("path"),this.h()},l(w){e=x(w,"DIV",{class:!0});var _=k(e);t=q(_,"svg",{viewBox:!0,width:!0,height:!0,class:!0});var E=k(t);s=q(E,"path",{d:!0,fill:!0,class:!0}),k(s).forEach(v);for(let V=0;V<m.length;V+=1)m[V].l(E);E.forEach(v),i=z(_),r=q(_,"svg",{id:!0,viewBox:!0,width:!0,height:!0,class:!0});var O=k(r);o=q(O,"defs",{class:!0});var N=k(o);a=q(N,"linearGradient",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0,class:!0});var L=k(a);l=q(L,"stop",{offset:!0,style:!0,class:!0}),k(l).forEach(v),c=q(L,"stop",{offset:!0,style:!0,class:!0}),k(c).forEach(v),L.forEach(v),N.forEach(v),h=q(O,"path",{d:!0,fill:!0,stroke:!0,class:!0}),k(h).forEach(v),O.forEach(v),_.forEach(v),this.h()},h(){f(s,"d",n[2]),f(s,"fill","none"),f(s,"class","left-path svelte-z63oko"),f(t,"viewBox","0 0 100 100"),f(t,"width","50"),f(t,"height","100"),f(t,"class","svelte-z63oko"),f(l,"offset","0%"),J(l,"stop-color","#65E2A0"),J(l,"stop-opacity","1"),f(l,"class","svelte-z63oko"),f(c,"offset","100%"),J(c,"stop-color","#469C6E"),J(c,"stop-opacity","1"),f(c,"class","svelte-z63oko"),f(a,"id","grad1"),f(a,"x1","0%"),f(a,"y1","0%"),f(a,"x2","100%"),f(a,"y2","0%"),f(a,"class","svelte-z63oko"),f(o,"class","svelte-z63oko"),f(h,"d",n[2]),f(h,"fill","url(#grad1)"),f(h,"stroke","grey"),f(h,"class","svelte-z63oko"),f(r,"id","right"),f(r,"viewBox","0 0 100 100"),f(r,"width","50"),f(r,"height","100"),f(r,"class","svelte-z63oko"),f(e,"class","component-wrapper svelte-z63oko")},m(w,_){T(w,e,_),g(e,t),g(t,s);for(let E=0;E<m.length;E+=1)m[E].m(t,null);g(e,i),g(e,r),g(r,o),g(o,a),g(a,l),g(a,c),g(r,h),d||(p=[R(t,"mousedown",n[4]),R(t,"mousemove",n[3]),R(t,"mouseover",n[6]),R(t,"mouseout",n[7]),R(t,"mouseup",n[5]),R(t,"focus",n[6]),R(t,"blur",n[7])],d=!0)},p(w,[_]){if(_&4&&f(s,"d",w[2]),_&3){u=w[0];let E;for(E=0;E<u.length;E+=1){const O=Js(w,u,E);m[E]?m[E].p(O,_):(m[E]=Qs(O),m[E].c(),m[E].m(t,null))}for(;E<m.length;E+=1)m[E].d(1);m.length=u.length}_&4&&f(h,"d",w[2])},i:F,o:F,d(w){w&&v(e),Ee(m,w),d=!1,Ue(p)}}}function Vo(n,e,t){let s,i;const r=Le();let{value:o=[{x:1,y:0,pinned:!0},{x:.5,y:.5,pinned:!0},{x:1,y:1,pinned:!0}]}=e,a=!1,l,c,h=0,d=0;const p=()=>{requestAnimationFrame(()=>{r("change",s),t(0,s=s.sort((b,D)=>b.y>D.y?-1:1))})},u=b=>{b.pinned||(s.splice(s.indexOf(l),1),p())},m=b=>{a&&(h=b.offsetX,d=b.offsetY,l&&(c=l,t(1,l=void 0)),c&&(c.x=h/50,c.y=d/100,p()))},w=()=>{if(!l){const b={x:h/50,y:d/100,pinned:!1};t(1,l=b),s.push(l),p()}},_=()=>{l&&(u(l),t(1,l=void 0)),c=void 0},E=()=>{a=!0},O=()=>{a=!1},N=b=>`L ${b.x*100} ${b.y*200-50}`;function L(b){let D=[...b];return b[0].x<.95&&(D=[{x:1,y:1},...D]),b[b.length-1].x<.95&&(D=[...D,{x:1,y:0}]),D.reduce((C,H,X)=>X===0?`M ${H.x*100},${H.y*200-50}`:`${C} ${N(H)}`,"")}const V=b=>{t(1,l=b)};return n.$$set=b=>{"value"in b&&t(8,o=b.value)},n.$$.update=()=>{n.$$.dirty&256&&t(0,s=o),n.$$.dirty&1&&t(2,i=L(s))},[s,l,i,m,w,_,E,O,o,V]}class Ao extends ae{constructor(e){super(),le(this,e,Vo,Oo,ce,{value:8})}get value(){return this.$$.ctx[8]}set value(e){this.$$set({value:e}),oe()}}function ei(n,e,t){const s=n.slice();return s[21]=e[t],s[23]=t,s}function ti(n){let e,t=(n[21].title||n[21].value)+"",s,i,r,o;function a(){return n[14](n[21])}function l(){return n[15](n[21])}function c(){return n[16](n[21])}return{c(){e=M("div"),s=Z(t),i=U(),this.h()},l(h){e=x(h,"DIV",{class:!0});var d=k(e);s=K(d,t),i=z(d),d.forEach(v),this.h()},h(){f(e,"class","search-entry svelte-1xpdwt6"),B(e,"focused",n[21].value===n[3])},m(h,d){T(h,e,d),g(e,s),g(e,i),r||(o=[R(e,"focus",a),R(e,"mouseover",l),R(e,"click",c)],r=!0)},p(h,d){n=h,d&16&&t!==(t=(n[21].title||n[21].value)+"")&&fe(s,t),d&24&&B(e,"focused",n[21].value===n[3])},d(h){h&&v(e),r=!1,Ue(o)}}}function si(n){let e,t=n[23]<n[0]&&ti(n);return{c(){t&&t.c(),e=Q()},l(s){t&&t.l(s),e=Q()},m(s,i){t&&t.m(s,i),T(s,e,i)},p(s,i){s[23]<s[0]?t?t.p(s,i):(t=ti(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(s){t&&t.d(s),s&&v(e)}}}function Do(n){let e,t,s,i,r,o=n[4],a=[];for(let l=0;l<o.length;l+=1)a[l]=si(ei(n,o,l));return{c(){e=M("div"),t=M("input"),s=U();for(let l=0;l<a.length;l+=1)a[l].c();this.h()},l(l){e=x(l,"DIV",{class:!0});var c=k(e);t=x(c,"INPUT",{type:!0,placeholder:!0,class:!0}),s=z(c);for(let h=0;h<a.length;h+=1)a[h].l(c);c.forEach(v),this.h()},h(){f(t,"type","text"),f(t,"placeholder","Search"),f(t,"class","svelte-1xpdwt6"),f(e,"class","search-wrapper svelte-1xpdwt6")},m(l,c){T(l,e,c),g(e,t),n[12](t),We(t,n[1]),g(e,s);for(let h=0;h<a.length;h+=1)a[h].m(e,null);i||(r=[R(window,"keydown",n[6]),R(t,"input",n[13])],i=!0)},p(l,[c]){if(c&2&&t.value!==l[1]&&We(t,l[1]),c&185){o=l[4];let h;for(h=0;h<o.length;h+=1){const d=ei(l,o,h);a[h]?a[h].p(d,c):(a[h]=si(d),a[h].c(),a[h].m(e,null))}for(;h<a.length;h+=1)a[h].d(1);a.length=o.length}},i:F,o:F,d(l){l&&v(e),n[12](null),Ee(a,l),i=!1,Ue(r)}}}function jo(n,e,t){let s,i;const r=Le(),o={};let{limitAmount:a=10}=e,{values:l=[]}=e,c,h="";function d(C,H){if(!(H!=null&&H.length))return C;const X=C.filter(W=>!!(W.value.includes(H)||W.title&&W.title.toLowerCase().includes(H)));return X.length?(X.find(W=>W.value===i)||t(3,i=X[0].value),X):[{value:"Nothing Found"}]}function p(){c.focus()}function u(){t(1,h="")}function m({value:C=i}={value:i}){o[C]=o[C]+1||1,r("input",C)}function w(C){if(!i.length){t(3,i=s[0].value);return}const H=s.slice(0,a).find(G=>G.value===i);if(!H)return;const X=s.indexOf(H),pe=Math.min(s.length,a),W=((X+C)%pe+pe)%pe;t(3,i=s[W].value)}function _({key:C}){C==="Enter"&&i.length&&m(),C==="ArrowDown"&&w(1),C==="ArrowUp"&&w(-1)}function E(C){t(3,i=C.value)}const O=C=>{t(8,l=C)};function N(C){Te[C?"unshift":"push"](()=>{c=C,t(2,c)})}function L(){h=this.value,t(1,h)}const V=C=>E(C),b=C=>E(C),D=C=>m(C);return n.$$set=C=>{"limitAmount"in C&&t(0,a=C.limitAmount),"values"in C&&t(8,l=C.values)},n.$$.update=()=>{n.$$.dirty&258&&t(4,s=d(l,h.toLowerCase()))},t(3,i=""),[a,h,c,i,s,m,_,E,l,p,u,O,N,L,V,b,D]}class Po extends ae{constructor(e){super(),le(this,e,jo,Do,ce,{limitAmount:0,values:8,focus:9,clear:10,setItems:11})}get focus(){return this.$$.ctx[9]}get clear(){return this.$$.ctx[10]}get setItems(){return this.$$.ctx[11]}}function $o({target:n,template:e,value:t}){const s=Bo(e),i=_e(ue({},e),{value:t});return delete i.type,delete i.internal,delete i.label,delete i.inputType,delete i.description,new s({target:n,props:i})}function Bo(n){if(n.type==="select")return n.inputType==="tab"?xo:Io;if(n.type==="curve")return yo;if(n.type==="shape")return Ao;if(n.type==="number"){if(n.inputType){if(n.inputType==="float")return Xs;if(n.inputType==="integer")return zs}return(n==null?void 0:n.step)&&n.step%1!==0?Xs:zs}return ho}class Ro{constructor(e){this.nodeState=e,this.wrapper=document.createElement("div"),this.input=document.createElement("div"),this.wrapper.classList.add("node-state-single-wrapper"),this.input.classList.add("node-state-input");const t=e.template,s=t.label||e.key;if(typeof s=="string"){const i=document.createElement("p");i.className="state-label",i.innerHTML=s,this.wrapper.appendChild(i)}(t==null?void 0:t.label)===!1&&this.wrapper.classList.add("hide-label"),!t.external&&t.type!=="*"&&(this.element=$o({target:this.input,template:t,value:e.getValue()}),this.element&&this.element.$on("change",({detail:i})=>{typeof i!="undefined"&&!Number.isNaN(i)&&this.nodeState.setValue(i)})),t.description&&(this.helpWrapper=document.createElement("div"),this.helpWrapper.classList.add("nodeview-help-wrapper","nodestate-help-wrapper"),this.helpWrapper.innerHTML=`<i>${t.label||this.nodeState.key}</i><br><p>${t.description}</p>`,this.wrapper.appendChild(this.helpWrapper)),e.node.view.stateWrapper.appendChild(this.wrapper),this.wrapper.appendChild(this.input)}updateValue(){setTimeout(()=>{this.element&&(this.element.value=this.nodeState.getValue())},50)}updatePosition(){var e,t;this.rect=this.wrapper.getBoundingClientRect(),(t=(e=this.nodeState.getInput())==null?void 0:e.view)==null||t.updatePosition()}setErrorState(e){e?this.wrapper.classList.add("state-error"):this.wrapper.classList.remove("state-error")}get y(){return this.rect.y-this.nodeState.node.view.y}get height(){return this.rect.height}setActive(e){this.wrapper.classList[e?"remove":"add"]("disabled"),this.nodeState.node.getInputs().forEach(t=>t.view.updatePosition())}}class Fo{constructor(e){if(!e||!e.node)throw new Error("Somethings missing");this.input=e,this.node=e.node,this.wrapper=document.createElement("div"),this.wrapper.classList.add("node-input-wrapper"),e.type.forEach(t=>{this.wrapper.classList.add(`socket-type-${t==="*"?"all":t}`)}),e.state.view.wrapper.appendChild(this.wrapper),this.wrapper.addEventListener("mousedown",async t=>{t.stopPropagation(),t.preventDefault(),this.node.enableUpdates=!1;const s=this.input.connection;s?(s.remove(),await this.node.system.view.createFloatingConnection(s.output)):await this.node.system.view.createFloatingConnection(this.input),this.node.enableUpdates=!0,this.node.update()},!1),this.node.system.view.colorStore.onType(e.type[0],t=>{const s=window.getComputedStyle(this.wrapper,null).getPropertyValue("background-color");this.wrapper.style.setProperty("--socket-color",t),this.wrapper.style.backgroundColor=s!=="rgba(0, 0, 0, 0)"?s:t})}updatePosition(){var e;this.rect=this.wrapper.getBoundingClientRect(),(e=this==null?void 0:this.connection)==null||e.setPosition({x2:this.x,y2:this.y})}remove(){this.wrapper.remove(),this.connection&&this.connection.remove()}set state(e){this.wrapper.classList.forEach(t=>{t.includes("socket-state-")&&this.wrapper.classList.remove(t)}),e&&e.length&&this.wrapper.classList.add("socket-state-"+e)}get x(){return this.node.view.x-3}get y(){const e=this.node.system.view;return(this.rect.y+this.rect.height/2-e.y-e.top)/e.s-e.height/2}}class Ye{constructor(e,t,s){this.state=e,this.key=s,this.node=e.node,this.type=Array.isArray(t)?t:[t]}bindView(){this.view=new Fo(this)}removeConnection(){const e=this.connection;delete this.connection,e&&e.remove(),this.node.setStateValue(this.key,void 0),this.state.setIsExternal(!1)}setConnection(e){this.connection&&this.connection.remove(),this.connection=e,this.view&&(this.view.connection=e.view),this.state.setIsExternal(!0)}remove(){this.view&&this.view.remove(),this.removeConnection()}}class Bt extends Ie{constructor(e,t,s){var i;super(),this.node=e,this.key=t,this.template=s,this.isExternal=!1,this.isOkay=!0,this.value=(i=e.state[t])!=null?i:s.value,this.node._state[t]=this.value,this.template.internal||(this.input=new Ye(this,s.type,t))}setIsExternal(e=!1){var t;this.isExternal=e,(t=this==null?void 0:this.view)==null||t.setActive(!e)}getValue(){return this.value}checkErrors(e=this.template.value){var t,s;((t=this.template)==null?void 0:t.required)&&e===void 0?(this.isOkay=!1,this.node.view&&this.node.view.showErrors(`Input <b>${((s=this.template)==null?void 0:s.label)||this.key}</b> is required`)):(this.isOkay=!0,this.node.view.showErrors()),this!=null&&this.view&&this.view.setErrorState(!this.isOkay)}setValue(e=this.template.value){this.isExternal||(this.node.enableUpdates&&this.node.system.history.addAction(),this.value=e),this.node._state[this.key]=e,this.checkErrors(e),this.node.enableUpdates&&(this==null||this.view.updateValue(),this.isOkay&&this.node.update())}remove(){}getInput(){return this.input}bindView(){this.view=new Ro(this),this.input&&this.input.bindView(),this.checkErrors()}}var Wo={title:"Boolean",type:"boolean",outputs:["boolean"],meta:{description:"This is the boolean node"},parameters:{value:{type:"boolean",value:!1,description:"The value of the boolean, true or false."}},compute({value:n=!1}){return n}},Ho={title:"Math",type:"math",outputs:["number"],parameters:{mode:{type:"select",internal:!0,label:!1,value:"add",values:["add","multiply","subtract"]},a:{type:"number",value:0,label:!1},b:{type:"number",value:0,label:!1}},compute({mode:n,a:e,b:t}){switch(n){case"multiply":return e*t;case"subtract":return e-t;default:return e+t}}},Uo={title:"Number",type:"number",outputs:["number"],parameters:{value:{type:"number",internal:!0,label:!1,value:0}},compute({value:n=0}){return n}};class zo extends Dt{constructor(e,t){super(e,t),this.states={input:new Bt(this,"input",{type:"*"})},this.outputs=[]}compute({input:e}){return e}}class Xo extends jt{constructor(e){super(e);const t=document.createElement("div");t.style.color="var(--text-color, white)",e.on("computedData",s=>{t.innerHTML="";const i=document.createElement("p");i.innerHTML=JSON.stringify(s,null," "),t.append(i)}),this.wrapper.appendChild(t)}}var Yo={title:"Debug",type:"debug",meta:{description:"Outputs any inputs for debug purposes"},node:zo,view:Xo};class qo extends Dt{constructor(e,t){super(e,t),this.attributes.type="output",this.states={input:new Bt(this,"input",{type:"*",external:!0,label:!1})},this.outputs=[]}compute({input:e}){return e}}class Zo extends jt{constructor(e){super(e);const t=document.createElement("p");t.style.margin="0px",t.style.padding="4px",t.style.color="var(--text-color,white)",t.style.fontWeight="bold",e.on("computedData",s=>{t.innerHTML=JSON.stringify(s,null,2)}),this.wrapper.appendChild(t)}}var Ko={title:"Output",type:"output",meta:{description:"Outputs the final value"},node:qo,view:Zo};const Lt={BooleanNode:Wo,MathNode:Ho,NumberNode:Uo,DebugNode:Yo,OutputNode:Ko};const Go=Me("AddMenu");class Jo{constructor(e){this.x=0,this.y=0,this.types=[],this.view=e,this.system=e.system,this.wrapper=document.createElement("div"),this.wrapper.classList.add("context-wrapper"),this.searchEl=new Po({target:this.wrapper}),this.searchEl.$on("input",({detail:t})=>{this.resolve(t)}),this.view.wrapper.append(this.wrapper),this.view.system.store.on("types",t=>this.updateTypes(t),20),this.wrapper.classList.add("cl-"+Math.floor(Math.random()*1e3)),this.view.on("keydown",({key:t})=>t==="Escape"&&this.hide())}updateTypes(e=this.types){this.types=e,Go("register types",e),this.searchEl.setItems(e.map(t=>({outputs:t.outputs,inputs:t.inputs,value:t.type||t.title,title:t.title})).filter(t=>{var s,i;return this.socket?Array.isArray(this.socket.type)?(s=t==null?void 0:t.outputs)==null?void 0:s.find(r=>this.socket.type.includes(r)):(i=t==null?void 0:t.inputs)==null?void 0:i.includes(this.socket.type):!0}))}handleWindowClick(e){e.composedPath().includes(this.wrapper)||this.reject()}reject(){this.rej&&this.rej(),this.hide()}resolve(e){const t=this.system.store.getByType(e),{x:s,y:i}=this.view.projectWindowToLocal(this.x,this.y),r=s-this.view.width/2,o=i-this.view.height/2;t?this.res({attributes:{pos:{x:r,y:o},id:"",name:t.title,type:t.type,refs:[]},state:{value:void 0}}):this.reject(),this.hide()}hide(){this.searchEl.clear(),this.wrapper.classList.remove("context-visible"),this.wrapper.blur(),this.rej&&this.rej(),this.res=e=>e,this.reject=()=>{}}show({x:e,y:t,socket:s}){return this.x=e,this.y=t,this.socket=s,this.wrapper.style.left=e/this.system.view.width*100+"%",this.wrapper.style.top=t/this.system.view.height*100+"%",this.wrapper.classList.add("context-visible"),this.updateTypes(),setTimeout(()=>{this.searchEl.focus()},20),new Promise((i,r)=>{this.res=i,this.rej=r})}}class Qo extends Ie{constructor(e){super(),this.mDownX=0,this.mDownY=0,this.downX=0,this.downY=0,this.isShiftKey=!1,this.view=e,this.wrapper=document.createElement("div"),this.wrapper.classList.add("box-selection-wrapper"),this.view.wrapper.append(this.wrapper),this.view.on("mousedown",({target:t,mx:s,x:i,my:r,y:o,keys:a})=>{var l;a.space||a.shiftKey||a.button===2||!a.ctrlKey||t&&!((l=t==null?void 0:t.className)!=null&&l.includes("nodesystem"))||(this.mDownX=s,this.mDownY=r,this.downX=i,this.downY=o,this.wrapper.style.left=s+"px",this.wrapper.style.top=r+"px",this.wrapper.style.width="0px",this.wrapper.style.height="0px",this.isShiftKey=a.shift,this.show())})}show(){this.wrapper.classList.add("box-selection-visible");const e=this.view.system.nodes.map(i=>{const{width:r,height:o}=i.view,{x:a,y:l}=i.view,c=a+this.view.width/2,h=l+this.view.height/2,d=c+r,p=h+o;return{n:i,state:i.view.state,x1:c,y1:h,x2:d,y2:p}});let t=[];const s=this.view.on("mousemove",({mx:i,my:r,x:o,y:a})=>{const{mDownX:l,mDownY:c,downX:h,downY:d,isShiftKey:p}=this,u={x1:Math.min(i,l),x2:Math.max(i,l),y1:Math.min(r,c),y2:Math.max(r,c)};this.wrapper.style.left=u.x1+"px",this.wrapper.style.top=u.y1+"px",this.wrapper.style.width=Math.abs(l-i)+"px",this.wrapper.style.height=Math.abs(c-r)+"px";const m={x1:Math.min(o,h),x2:Math.max(o,h),y1:Math.min(a,d),y2:Math.max(a,d)};t=e.filter(w=>Vn(m,w)?!0:(p||(w.state="normal",w.n.view.state="normal"),!1)).map(({n:w,state:_})=>(_!=="active"&&(_="selected",w.view.state="selected"),w))},5);this.view.once("mouseup",()=>{s(),this.hide(),this.emit("selection",t)})}projectBox(e){const{x:t,y:s}=this.view.projectWindowToLocal(e.x1,e.y1),{x:i,y:r}=this.view.projectWindowToLocal(e.x2,e.y2);return{x1:t,y1:s,x2:i,y2:r}}hide(){this.wrapper.classList.remove("box-selection-visible")}}class ea{constructor(e){this.connections=[],this.output=e,this.node=e.node,this.wrapper=document.createElement("div"),this.wrapper.classList.add("node-output-wrapper"),this.wrapper.classList.add(`socket-type-${e.type}`),e.node.view.outputWrapper.appendChild(this.wrapper),this.wrapper.addEventListener("mousedown",t=>{t.target===this.wrapper&&(t.stopPropagation(),t.preventDefault(),this.node.system.view.createFloatingConnection(this.output))},!1),this.node.system.view.colorStore.onType(e.type,t=>{const s=window.getComputedStyle(this.wrapper,null).getPropertyValue("background-color");this.wrapper.style.setProperty("--socket-color",t),this.wrapper.style.backgroundColor=s!=="rgba(0, 0, 0, 0)"&&s!=="rgb(0,0,0)"?s:t})}remove(){this.wrapper.remove(),this.connections.forEach(e=>e.remove())}set state(e){this.wrapper.classList.forEach(t=>{t.includes("socket-state-")&&this.wrapper.classList.remove(t)}),e&&e.length&&this.wrapper.classList.add("socket-state-"+e)}updatePosition(){this.rect=this.wrapper.getBoundingClientRect(),this.output.connections.forEach(e=>e.view.setPosition({x1:this.x,y1:this.y}))}get x(){return this.node.view.x+this.node.view.width+3}get y(){const e=this.node.system.view;return(this.rect.y+this.rect.height/2-e.y-e.top)/e.s-e.height/2}}class ct{constructor(e,t){if(this.connections=[],this.node=e,this.type=t,Array.isArray(t))throw new Error("Output can only output one type, not "+t)}bindView(){this.view=new ea(this)}connectTo(e){const t=this.node.outputs.indexOf(this);return this.node.connectTo(e.node,t,e.key)}removeConnection(e){const t=this.connections.indexOf(e);this.connections.splice(t,1),this.node.disconnectFrom(e.input.node,e.indexIn,e.indexOut),this.view&&this.view.connections.splice(t,1)}setConnection(e){this.connections.push(e),this.view&&this.view.connections.push(e.view)}remove(){this.connections.forEach(e=>e.remove())}}class ta extends qi(ci,Ie){constructor(e,t={}){const{system:s}=e.node;super({},e),this.view=s.view,this.path.style.zIndex="999";const i=Array.isArray(e.type)?e.type[0]:e.type;s.view.colorStore.onType(i,d=>{this.path.style.stroke=d}),e.view.updatePosition();const r=e.view.x,o=e.view.y;let a=r,l=o;t&&(a=t.x-s.view.width/2,l=t.y-s.view.height/2),this.setPosition({x1:r,y1:o,x2:a,y2:l}),this.dx2=this.x2,this.dy2=this.y2,this.isInput=e instanceof Ye,this.allSockets=e instanceof Ye?s.getOutputs(e.type):s.getInputs(e.type),this.allSockets.forEach(d=>d.view.state="potential");let c=this.allSockets.filter(d=>d.node.attributes.id!==e.node.attributes.id);c.forEach(d=>d.view.state="middle"),this.system.view.setState("floating");const h="connection"in e?[e.connection]:e.connections;if(h&&!!h.length){const d=h.map(p=>[p.input,p.output]).flat();c=c.filter(p=>!d.includes(p))}this.potentialSockets=c,this.potentialSockets.forEach(d=>d.view.updatePosition()),this.potentialSockets.forEach(d=>d.view.state="highlight"),this._unsubMouseUp=this.view.on("mouseup",this.handleMouseUp.bind(this)),this._unsubMouseMove=this.view.on("mousemove",this.handleMouseMove.bind(this)),this.mdx=this.view.mx,this.mdy=this.view.my,this.socket=e,e.view.updatePosition()}handleMouseUp(e){const{x:t,y:s,keys:i}=e;this._unsubMouseUp(),this._unsubMouseMove(),this.allSockets.forEach(a=>a.view.state="");let r,o=0;this.socket instanceof Ye&&this.hoveredSocket instanceof ct?(r=this.socket.key,o=this.hoveredSocket.node.outputs.indexOf(this.hoveredSocket)):this.socket instanceof ct&&this.hoveredSocket instanceof Ye&&(r=this.hoveredSocket.key,o=this.socket.node.outputs.indexOf(this.socket)),this.hoveredSocket?(this.emit("connection",{keyIn:r,indexOut:o,inputNode:this.isInput?this.socket.node:this.hoveredSocket.node,outputNode:this.isInput?this.hoveredSocket.node:this.socket.node}),this.remove()):i.ctrlKey?this.view.addMenu.show({x:t,y:s,socket:this.socket}).then(a=>this.view.system.createNode(a)).then(a=>{this.socket instanceof ct?this.socket.node.connectTo(a,o,r):a.connectTo(this.socket.node,o,r),this.remove()}).catch(()=>{this.remove()}).finally(()=>{this.remove()}):this.remove()}handleMouseMove(e){const{x:t,y:s}=e;this.mdx||(this.mdx=t,this.mdy=s);const i=this.dx2+(t-this.mdx),r=this.dy2+(s-this.mdy),o=20,a=this.potentialSockets.map(l=>{const{x:c,y:h}=l.view;return{socket:l,distance:Math.abs(i-c)+Math.abs(r-h)}}).filter(l=>l.distance<o).sort((l,c)=>l.distance>c.distance?-1:1).map(l=>l.socket);if(a.length){const{x:l,y:c}=a[0].view;this.hoveredSocket=a[0],this.setPosition({x2:l,y2:c})}else this.hoveredSocket=void 0,this.setPosition({x2:i,y2:r})}remove(){super.remove(),this.emit("remove"),this.system.view.setState("normal"),this.system.isPaused=!1}}const sa=[{color:"#a52a2a",name:"brown"},{color:"#008000",name:"green"},{color:"#4b0082",name:"indigo"},{color:"#f0e68c",name:"khaki"},{color:"#add8e6",name:"lightblue"},{color:"#e0ffff",name:"lightcyan"},{color:"#90ee90",name:"lightgreen"},{color:"#d3d3d3",name:"lightgrey"},{color:"#ffb6c1",name:"lightpink"},{color:"#ffffe0",name:"lightyellow"},{color:"#00ff00",name:"lime"},{color:"#ff00ff",name:"magenta"},{color:"#800000",name:"maroon"},{color:"#000080",name:"navy"},{color:"#808000",name:"olive"},{color:"#ffa500",name:"orange"},{color:"#ffc0cb",name:"pink"},{color:"#800080",name:"purple"},{color:"#800080",name:"violet"},{color:"#ff0000",name:"red"},{color:"#c0c0c0",name:"silver"},{color:"#ffffff",name:"white"}];class ia extends Ie{constructor(e){super(),this.colors={},this.index=0,this.updateTypes(e.system.store.types),e.system.store.on("types",t=>this.updateTypes(t))}updateTypes(e){e.forEach(t=>{var s,i;(s=t==null?void 0:t.inputs)==null||s.forEach(r=>Array.isArray(r)?r.forEach(o=>this.setType(o)):this.setType(r)),(i=t==null?void 0:t.outputs)==null||i.forEach(r=>this.setType(r))})}setColors(e){for(const t in e)this.colors[t]=e[t]}setType(e){!e||(e in this.colors||(this.colors[e]=sa[this.index].color,this.index++),this.emit(e,this.colors[e]),this.emit("colors",Object.entries(this.colors)))}get(e){return this.colors[e]}onType(e,t){return this.setType(e),t(this.colors[e]),super.on(e,t)}}let Fe,qe;globalThis.document&&(typeof document.hidden!="undefined"?(qe="visibilitychange",Fe="visibilityState"):typeof document.mozHidden!="undefined"?(qe="mozvisibilitychange",Fe="mozVisibilityState"):typeof document.msHidden!="undefined"?(qe="msvisibilitychange",Fe="msVisibilityState"):typeof document.webkitHidden!="undefined"&&(qe="webkitvisibilitychange",Fe="webkitVisibilityState"));var na=n=>{globalThis.document&&(n(document[Fe]),document.addEventListener(qe,function(){n(document[Fe])},!1))};class ra{constructor(e){this.wrapper=document.createElement("div"),this.wrapper.addEventListener("click",()=>{this.wrapper.focus()}),this.wrapper.classList.add("nodesystem-socket-legend"),e.wrapper.appendChild(this.wrapper),this.updateTypes(Object.entries(e.colorStore.colors)),e.colorStore.on("colors",t=>{this.updateTypes(t)})}updateTypes(e){this.wrapper.style.setProperty("--max-height",(1+e.length)*30+"px"),this.wrapper.innerHTML=`<input id="nodesocket-legend-input" type="checkbox"/><label for="nodesocket-legend-input" class="socket-legend-title">Legend</label> 
<div class="socket-legend-type-wrapper">
${e.map(([t,s])=>`
<div class="socket-legend-col" style="background-color:${s}"></div><div class="socket-legend-type">${t}</div>
`).join("")}
</div>
`}}class oa extends Ie{constructor(e){var t,s,i,r,o;super(),this.width=0,this.height=0,this.top=0,this.left=0,this.x=window.innerWidth/2,this.y=window.innerHeight/2,this.s=1,this.mx=0,this.my=0,this.mdx=0,this.mdy=0,this.rmx=0,this.rmy=0,this.mouseDown=!1,this.keyMap={},this.selectedNodes=[],this.selectedNodesDown=[],this.clipboard=[],this.system=e,this.colorStore=new ia(this),this.wrapper=(s=(t=e.options)==null?void 0:t.wrapper)!=null?s:document.createElement("div"),this.wrapper.classList.add("nodesystem-wrapper"),e.options.parent&&e.options.parent.appendChild(this.wrapper),(i=e.options)!=null&&i.hideLegend||new ra(this),this.transformWrapper=document.createElement("div"),this.transformWrapper.classList.add("nodesystem-transform"),this.wrapper.appendChild(this.transformWrapper),this.errorWrapper=document.createElement("div"),this.errorWrapper.classList.add("nodesystem-errors"),this.wrapper.appendChild(this.errorWrapper),this.nodeContainer=document.createElement("div"),this.nodeContainer.classList.add("nodes-container"),this.transformWrapper.append(this.nodeContainer),this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("viewBox","0 0 1 1"),this.svg.setAttribute("height","1"),this.svg.setAttribute("width","1"),this.svg.setAttribute("preserveAspectRatio","none"),this.svg.style.transform=`scale(${(r=window.devicePixelRatio)!=null?r:1})`,this.transformWrapper.appendChild(this.svg),this.addMenu=new Jo(this),this.boxSelection=new Qo(this),this.boxSelection.on("selection",a=>{this.selectedNodes=a}),this.dpr=(o=window.devicePixelRatio)!=null?o:1,this.bindEventListeners(),this.handleResize(),na(()=>{setTimeout(()=>{this.handleResize(),this.system.nodes.forEach(a=>{a.view.updateViewPosition()})},500)})}showErrorMessages(e){if(!e){this.errorWrapper.innerHTML="";return}const t=Array.isArray(e)?e:[e];this.errorWrapper.innerHTML=t.map(s=>`<p>${s}</p>`).join("")}createFloatingConnection(e){const t=new ta(e,{x:this.mx,y:this.my});return new Promise(s=>{t.once("remove",s),t.once("connection",({inputNode:i,outputNode:r,keyIn:o,indexOut:a})=>{r.connectTo(i,a,o)})})}setActive(e,{shiftKey:t=!1,ctrlKey:s=!1}={}){if(!e)this.activeNode&&(this.activeNode.view.state="normal",this.activeNode=void 0),this.selectedNodes.forEach(i=>i.view.state="normal"),this.selectedNodes=[];else if(t&&s){if(this.activeNode&&(this.activeNode.view.state="normal",this.activeNode=void 0),this.activeNode=e,this.activeNode.view.state="active",this.activeNode.outputs.length){const i=this.system.createNode({state:{},attributes:{type:"debug",id:"0",name:"debug",refs:[],pos:{x:this.activeNode.view.x+this.activeNode.view.width+10,y:this.activeNode.view.y}}});i.enableUpdates=!0,this.activeNode.connectTo(i,0,"input")}}else t?this.activeNode?(this.selectedNodes.push(this.activeNode),this.activeNode.view.state="selected",this.activeNode=e,this.activeNode.view.state="active"):(this.activeNode=e,this.activeNode.view.state="active"):this.activeNode?(this.selectedNodes.forEach(i=>i.view.state="normal"),this.selectedNodes=[],this.activeNode!==e&&(this.activeNode.view.state="normal",this.activeNode=e,this.activeNode.view.state="active")):(this.activeNode=e,this.activeNode.view.state="active")}getSelectedNodes(){return this.activeNode&&this.selectedNodes.includes(this.activeNode)?this.selectedNodes:this.activeNode?[...this.selectedNodes,this.activeNode]:[...this.selectedNodes]}projectLocalToWindow(e,t){const s=e+this.x,i=t+this.y,r=s*this.s,o=i*this.s;return{x:r,y:o}}projectWindowToLocal(e,t){const s=e-this.x,i=t-this.y,r=s/this.s,o=i/this.s;return{x:r,y:o}}setTransform({x:e=this.x,y:t=this.y,s=this.s}={}){this.x=e,this.y=t,this.s=s,this.panzoom.setTransform(e,t,s)}setState(e){this.wrapper.classList.forEach(t=>{t.startsWith("nodesystem-state-")&&this.wrapper.classList.remove(t)}),this.state=e,this.wrapper.classList.add("nodesystem-state-"+e)}showAddMenu(){this.addMenu.show({x:this.rmx,y:this.rmy}).then(e=>{const t=this.system.createNode(e);this.setActive(t)}).catch()}bindEventListeners(){window.addEventListener("keydown",e=>this.handleKeyDown(e)),window.addEventListener("keyup",e=>this.handleKeyUp(e)),this.wrapper.addEventListener("mousemove",e=>this.handleMouseMove(e)),this.wrapper.addEventListener("contextmenu",e=>{e.preventDefault(),this.showAddMenu()}),this.wrapper.addEventListener("mousedown",e=>this.handleMouseDown(e)),this.wrapper.addEventListener("touchdown",e=>this.handleMouseDown(e)),this.wrapper.addEventListener("mouseup",e=>this.handleMouseUp(e)),window.addEventListener("resize",li(()=>this.handleResize(),10)),this.panzoom=In(this.transformWrapper,{minZoom:.2,maxZoom:5,onTransform:({x:e,y:t,scale:s})=>{this.x=e,this.y=t,this.s=s;const i=(s-.2)/5/2,r=s*this.height*.02,o=s*this.width*.02;this.wrapper.style.setProperty("--scale",Math.abs(i)+""),this.wrapper.style.setProperty("--scale-x",r+"%"),this.wrapper.style.setProperty("--scale-y",o+"%"),this.wrapper.style.setProperty("--pos-x",`${e}px`),this.wrapper.style.setProperty("--pos-y",`${t}px`),this.system.setMetaData({transform:{x:e,y:t,s}}),this.emit("transform",{x:e,y:t,s})}})}handleResize(){const{width:e,height:t,top:s,left:i}=this.wrapper.getBoundingClientRect();this.width=e,this.height=t,this.top=s,this.left=i,this.emit("resize",{width:e,height:t})}handleMouseMove(e){this.ev=e;const{clientX:t,clientY:s,shiftKey:i,ctrlKey:r}=e;this.rmx=t-this.left,this.rmy=s-this.top;const{x:o,y:a}=this.projectWindowToLocal(this.rmx,this.rmy);this.mx=o,this.my=a,this.emit("mousemove",{x:o,y:a,mx:this.rmx,my:this.rmy,keys:_e(ue({},this.keyMap),{shiftKey:i,ctrlKey:r})})}handleMouseDown(e){const{shiftKey:t,ctrlKey:s,clientX:i,clientY:r,button:o,target:a}=e;t||this.setActive(),e.path&&![...e.path].includes(this.addMenu.wrapper)&&(this.addMenu.hide(),e.preventDefault()),this.mouseDown=!0,this.rmx=i-this.left,this.rmy=r-this.top;const{x:l,y:c}=this.projectWindowToLocal(this.rmx,this.rmy);this.selectedNodesDown=this.selectedNodes.map(h=>[h.view.x,h.view.y]),this.emit("mousedown",{x:l,y:c,mx:this.rmx,my:this.rmy,target:a,keys:_e(ue({},this.keyMap),{shiftKey:t,ctrlKey:s,button:o})})}handleMouseUp({clientX:e,clientY:t,shiftKey:s,ctrlKey:i}){this.mouseDown=!1;const r=e-this.left,o=t-this.top;this.emit("mouseup",{x:r,y:o,keys:_e(ue({},this.keyMap),{shiftKey:s,ctrlKey:i})})}handleKeyUp({key:e}){e===" "&&(e="space"),delete this.keyMap[e&&e.toLowerCase()],this.emit("keyup",{key:e,keys:this.keyMap})}handleKeyDown({key:e,ctrlKey:t,shiftKey:s}){switch(console.log({key:e}),e=e===" "?"space":e.toLowerCase(),this.keyMap[e&&e.toLowerCase()]=!0,e==="space"&&this.ev&&this.handleMouseDown(this.ev),e){case"escape":this.addMenu.hide(),this.setState("normal");break;case"?":this.setState("help");break;case"a":s&&this.showAddMenu();break;case"c":if(s&&t)window.confirm("Clear Storage?")&&(localStorage.clear(),window.location.reload());else if(t){const i=this.selectedNodes.splice(0);this.activeNode&&!i.includes(this.activeNode)&&i.push(this.activeNode),this.clipboard=i.map(r=>r.deserialize()).map(r=>(r.attributes.pos.x-=this.mx,r.attributes.pos.y-=this.my,r))}else this.selectedNodes.length&&this.activeNode&&this.selectedNodes[0].connectTo(this.activeNode);break;case"f":this.setTransform({x:0,y:0,s:1});break;case"g":this.keyMap.g||(this.mdx=this.mx,this.mdy=this.my,this.selectedNodesDown=this.selectedNodes.map(i=>[i.view.x,i.view.y]));break;case"x":case"delete":t?(this.activeNode&&this.system.spliceNode(this.activeNode),this.selectedNodes.forEach(i=>this.system.spliceNode(i))):(this.activeNode&&this.system.removeNode(this.activeNode),this.selectedNodes.forEach(i=>i.remove()));break;case"z":this.system.history&&t&&(s?this.system.history.redo():this.system.history.undo());break;case"l":this.activeNode&&(console.log(this.activeNode),console.log(this.activeNode.deserialize()));break;case"v":t&&this.clipboard.map(i=>{const{pos:{x:r=0,y:o=0}={}}=i.attributes;return i.attributes.pos={x:r+this.mx,y:o+this.my},i}).forEach(i=>this.system.createNode(i));break}this.emit("keydown",{key:e,keys:_e(ue({},this.keyMap),{ctrlKey:t})})}}const Mt=Me("NodeFactory");class aa{constructor(e){this.id=Qi(),this.system=e,Mt("Initialized")}reset(){this.id.reset(),Mt("Reset id generator")}create(e){const{attributes:t}=e;t.type=t.type.toLowerCase();const s=this.system.store.getByType(t.type);t.id=this.id(+t.id);const i=new s.node(this.system,e);if(this.system.options.view&&s.view){const r=new s.view(i);i.bindView(r)}return s.type==="output"&&this.system.setOutputNode(i),Mt(`Created node with type ${t.type}`,e),i}}const at=Me("NodeHistory");class la{constructor(e){this.system=e,this.history=[],this.historyIndex=-1,this.isApplyingChanges=!1,at("Initialized")}addAction(){!this.system.isLoaded||this.isApplyingChanges||(this._timeout?clearTimeout(this._timeout):this.prevState=this.system.serialize().nodes,this._timeout=setTimeout(()=>{this._addAction(),this._timeout=void 0},200))}_addAction(){if(at("Register History Step"),this.isApplyingChanges)return;this.historyIndex!==this.history.length-1&&(this.history.length=this.historyIndex+1);const e=this.system.serialize().nodes,[t,s]=Dn(this.prevState,e);!s||!t||(this.history.push({previous:s,next:t}),this.history.length>60&&(this.history=this.history.reverse().slice(0,60).reverse()),this.historyIndex=this.history.length-1)}serialize(){return{steps:this.history,index:this.historyIndex}}deserialize(e){this.historyIndex=e.index,this.history=e.steps}undo(){if(this.isApplyingChanges)return;if(this.isApplyingChanges=!0,this.historyIndex<0){at("Reached beginning of Stack"),this.isApplyingChanges=!1;return}const{previous:e}=this.history[this.historyIndex],t=this.system.serialize(),s=pt(t.nodes,e);t.nodes=s,this.system.load(t),this.historyIndex--,this.isApplyingChanges=!1}redo(){if(this.isApplyingChanges)return;if(this.isApplyingChanges=!0,this.historyIndex>=this.history.length-1){at("Reached end of Stack"),this.isApplyingChanges=!1;return}const{next:e}=this.history[this.historyIndex+1],t=this.system.serialize(),s=pt(t.nodes,e);t.nodes=s,this.system.load(t),this.historyIndex++,this.isApplyingChanges=!1}}class ca{constructor(e){this.system=e}parseSystem(e){const{nodes:t}=e,s=new Map,i=t.map(r=>{const o=this.system.factory.create(r);return o.enableUpdates=!1,s.set(o.id,o),o});return i.forEach(r=>{r.attributes.refs&&r.attributes.refs.forEach(o=>{const a=s.get(o.id);if(!a)throw new Error(`Failed ref: from ${r.attributes.name||r.attributes.id} to ${o.id} `);r.connectTo(a,o.out,o.in)})}),i.forEach(r=>{r.enableUpdates=!0,r.update()}),i}parseType(e){const{compute:t,meta:s,outputs:i,title:r,parameters:o={}}=e,a=class extends Dt{constructor(c,h){if(super(c,h),this.meta=s,t&&(this.compute=t),i){const d=Array.isArray(i)?i:[i];this.outputs=d.map(p=>new ct(this,p))}Object.entries(o).forEach(([d,p])=>{this.states[d]=new Bt(this,d,p)})}},l=Object.values(o).filter(c=>c.internal!==!0).map(c=>c.type);if(this.system.options.view){const c=class extends jt{constructor(d){super(d)}};return _e(ue({},e),{inputs:l,title:r,meta:s,node:a,view:c})}return _e(ue({inputs:l},e),{title:r,meta:s,node:a})}getData(){return{meta:this.system.meta,nodes:this.system.nodes.map(e=>e.deserialize())}}}const ha=Me("NodeTypeStore");class ua extends Ie{constructor(){super(),this.types=[],this.typeMap={}}add(e){ha("register new type "+e.title,e),this.types=[...this.types.filter(t=>t.type.toLowerCase()!==e.type.toLowerCase()),e],this.typeMap[e.type.toLowerCase()]=e,this.emit("types",this.types),this.emit("type",e)}clear(){this.typeMap={},this.types=[],this.emit("types",this.types)}getByType(e){if(e in this.typeMap)return this.typeMap[e];if(e.toLowerCase()in this.typeMap)return this.typeMap[e.toLowerCase()];throw console.log({typeMap:this.typeMap}),new Error("NodeTypeStore: type "+e+" does not exist")}}var da=Object.defineProperty,fa=Object.getOwnPropertyDescriptor,pa=(n,e,t,s)=>{for(var i=s>1?void 0:s?fa(e,t):e,r=n.length-1,o;r>=0;r--)(o=n[r])&&(i=(s?o(e,t,i):o(i))||i);return s&&i&&da(e,t,i),i};let ma=0;const Pe=Me("NodeSystem");class va extends Ie{constructor(e={}){super(),this.parser=new ca(this),this.meta={lastSaved:Date.now()},this.isLoaded=!1,this.isPaused=!1,this.nodes=[],this.states=[],this.id=ma++;const{view:t=!1,wrapper:s,defaultNodes:i=!1,registerNodes:r=!1,connectionColors:o=!1,showUpdates:a=!1,deferCompute:l=!1}=e;this.options={view:t,wrapper:s,showUpdates:a,deferCompute:l};try{if(Pe(`Instantiated id:${this.id}`),this.store=new ua,this.factory=new aa(this),this.history=new la(this),t&&(this.view=new oa(this),o&&this.view.colorStore.setColors(o)),i){const c=[];i===!0?c.push(...Object.entries(Lt).map(h=>h[1])):Array.isArray(i)&&i.length&&i.forEach(h=>{typeof h=="string"&&h in Lt&&c.push(Lt[h])}),c.forEach(h=>this.registerNodeType(h))}r&&r.length&&r.forEach(c=>this.registerNodeType(c))}catch(c){console.warn("Error Loading",c),this.emit("error",{type:"init",error:c})}}get result(){return this._result}set result(e){this._result=e,this.isLoaded&&this.emit("result",e)}setMetaData(e){this.meta=ue(ue({},this.meta),e),this.save()}load(e){var t;if(Pe("Loading NodeSystemData",{systemData:e}),!e){this.isLoaded=!0;return}try{this.isLoaded=!1,this.isPaused=!0,this.nodes.forEach(i=>i.enableUpdates=!1),this.nodes.forEach(i=>i.remove()),this.factory.reset();const s=this.parser.parseSystem(e);return this.addNodes(s),this.meta=e.meta||{lastSaved:0},this.meta.lastSaved=Date.now(),(t=this==null?void 0:this.view)==null||t.setTransform(this.meta.transform),Pe(`Loaded NodeSystemData with ${s.length} Nodes`,e),"history"in e&&this.history.deserialize(e.history),this.isPaused=!1,this.isLoaded=!0,this.result=this._result,this}catch(s){console.warn("Error",s),this.emit("error",{type:"loading",error:s})}}serialize(){return _e(ue({},this.parser.getData()),{history:this.history.serialize(),meta:this.meta})}save(){this.isLoaded&&(this.meta.lastSaved=Date.now(),Pe("save system",this.serialize()),this.emit("save",this.serialize()))}setOutputNode(e){this.outputNode&&this.outputNode.remove(),this.outputNode=e,e.on("computedData",t=>{this.options.deferCompute?this.result={type:"output",parameters:t}:this.result=t})}addNodes(e){e.forEach(t=>this.addNode(t))}addNode(e){this.history.addAction(),this.nodes.push(e),this.save()}removeNode(e){this.history.addAction(),e.enableUpdates=!1,e.view.remove(),Object.values(e.states).forEach(t=>t.remove()),e.outputs.forEach(t=>t.remove()),e.getInputs().forEach(t=>t.remove()),this.nodes=this.nodes.filter(t=>t!==e),this.save(),Pe(`Removed Node id:${e.id} type:${e.attributes.type}`,e.deserialize())}spliceNode(e){const t=e.getInputs().map(i=>{var r;return(r=i==null?void 0:i.connection)==null?void 0:r.output}),s=e.outputs.map(i=>i.connections).flat().map(i=>i.input);for(let i=0;i<t.length;i++){const r=t[i],o=s[i];!o||!r||r.connectTo(o)}return this.removeNode(e)}getSockets(e){const t=this.nodes.map(s=>[...s.getSockets()]).flat();return e?t.filter(s=>s.type===e):t}getInputs(e){const t=this.nodes.map(s=>s.getInputs()).flat();return!e||e==="*"?t:t.filter(s=>s.type.includes("*")||s.type.includes(e))}getOutputs(e){const t=this.nodes.map(s=>s.outputs).flat();return!e||e.includes("*")?t:t.filter(s=>s.type==="*"||e.includes(s.type))}createNode(e){const t=this.factory.create(e);return this.addNode(t),this.save(),Pe(`Created new node id:${e.attributes.id} type:${e.attributes.type}`,e),t}getNodes(){return this.nodes}findNodeById(e){return this.nodes.filter(t=>t.id===e)[0]}getNodeTypes(){return this.store.types}registerNodeType(e){if(Array.isArray(e))return e.forEach(t=>this.registerNodeType(t));if("node"in e)this.store.add(e);else{const t=this.parser.parseType(e);this.store.add(t)}}}pa([Ki(1e3)],va.prototype,"save",1);const Wa={meta:{lastSaved:Date.now(),transform:{x:0,y:0,s:1}},nodes:[{attributes:{pos:{x:127,y:-46},type:"output",id:"0",refs:[]},state:{}},{attributes:{pos:{x:-15,y:-59},type:"math",id:"1",refs:[{id:"0",out:0,in:"input"}]},state:{mode:"multiply",a:0,b:0}},{attributes:{pos:{x:-157,y:-120},type:"number",id:"2",refs:[{id:"1",out:0,in:"a"}]},state:{value:2}},{attributes:{pos:{x:-159,y:48},type:"number",id:"3",refs:[{id:"1",out:0,in:"b"}]},state:{value:2}}]},Ot={meta:{lastSaved:Date.now(),transform:{x:0,y:0,s:1}},nodes:[{attributes:{pos:{x:-300,y:0},type:"number",id:"0",refs:[{id:"1",out:0,in:"a"},{id:"1",out:0,in:"b"}]},state:{value:2}}]},ke=12,wa=new Array(ke).fill(null).map(n=>new Array(ke).fill(null)).map((n,e)=>n.map((t,s)=>{const i=e*ke+s+1;return{attributes:{id:i.toString(),pos:{x:-200+s*100,y:e*150},type:"math",refs:[{id:(i+1).toString(),out:0,in:"a"},{id:(i+1).toString(),out:0,in:"b"}]},state:{mode:"add"}}}));Ot.nodes.push(...wa.flat().flat(),{attributes:{id:(ke*ke+1).toString(),pos:{x:-200+ke*100,y:(ke-1)*150},type:"output",refs:[]},state:{value:2}});Ot.nodes[Ot.nodes.length-2].attributes.refs=[{id:(ke*ke+1).toString(),out:0,in:"input"}];const Ha={meta:{lastSaved:1652709738865},nodes:[],history:{steps:[],index:-1}},ya="#469c6e",ga="#b74141",_a="0px 0px 2px rgba(0, 0, 0, 0.7)",ba="#65e2a0",ka="#e26565",Ea="0px 0px 5px rgba(0, 0, 0, 0.144)",La="0px 0px 5px rgba(0, 0, 0, 0.144)";var Ma={"dark_background-color":"#141516","dark_midground-color":"#242729",dark_accent:ya,"dark_accent-dark":"#65e2a0",dark_error:ga,"dark_foreground-color":"#33373a","dark_outline-color":"#212121","dark_text-color":"#ffffff","dark_text-color-invert":"black",dark_shadow:_a,"light_background-color":"#d0d0d0","light_midground-color":"white",light_accent:ba,"light_accent-dark":"#469c6e",light_error:ka,"light_foreground-color":"#e8e8e8","light_outline-color":"#b9b9b9","light_text-color":"#484848","light_text-color-invert":"white",light_shadow:Ea,"pinky_background-color":"#d0d0d0","pinky_foreground-color":"pink","pinky_outline-color":"#b9b9b9","pinky_text-color":"#484848",pinky_shadow:La};function xa(n){const e={};return Object.entries(n).forEach(([t,s])=>{const[i,r]=t.split("_");i in e?e[i][r]=s:e[i]={[r]:s}}),e}const Rt=xa(Ma),vt=Object.keys(Rt);let He="dark";"localStorage"in globalThis&&(He="theme"in localStorage?localStorage.getItem("theme"):vt[0]);vt.includes(He)||(He=vt[0]);globalThis.window&&document.body.classList.add("theme-"+He);const vi=gt(Rt[He]),wi=gt(He),Na=n=>{if(vt.includes(n)){for(const e of document.body.classList.values())e.startsWith("theme-")&&document.body.classList.remove(e);document.body.classList.add("theme-"+n),vi.set(Rt[n]),wi.set(n),localStorage.setItem("theme",n)}else console.warn("cannot set theme",n)};function Sa(n){return yi("",typeof n=="string"?JSON.parse(n):n)}function yi(n,e){var t="";return Object.entries(e).forEach(function(s){var i=s[0],r=s[1];t+=typeof r=="object"?yi(""+ii(n,i),r):"--"+ii(n,i)+": "+r+";"}),t}function ii(n,e){return n?e==="__default"?n:n+"-"+e:e}function Ca(n){let e;return{c(){e=M("style"),this.h()},l(t){const s=Yi('[data-svelte="svelte-14spz5y"]',document.head);e=x(s,"STYLE",{type:!0,id:!0});var i=k(e);i.forEach(v),s.forEach(v),this.h()},h(){f(e,"type","text/css"),f(e,"id","theme-css")},m(t,s){g(document.head,e),n[3](e)},p:F,i:F,o:F,d(t){v(e),n[3](null)}}}function Ta(n,e,t){let s,i;wt(n,vi,c=>t(2,i=c));let r,o=!1;function a(){o||!r||(o=!0,t(0,r.innerHTML="* {transition: color 0.2s ease, background-color 0.2s ease, outline 0.2s ease !important;}",r),setTimeout(()=>{t(0,r.innerHTML=`* {transition: color 0.2s ease, background-color 0.2s ease, outline 0.2s ease !important;} :root{${s}}`,r),setTimeout(()=>{t(0,r.innerHTML=`:root{${s}}`,r),o=!1},200)},1))}Vt(()=>{t(0,r.innerHTML=`:root{${s}}`,r)});function l(c){Te[c?"unshift":"push"](()=>{r=c,t(0,r)})}return n.$$.update=()=>{n.$$.dirty&4&&t(1,s=Sa(i)),n.$$.dirty&2&&s&&a()},[r,s,i,l]}class Ia extends ae{constructor(e){super(),le(this,e,Ta,Ca,ce,{})}}function Oa(n){let e,t,s,i,r,o,a,l,c,h;t=new Ke({props:{icon:n[0]==="dark"?"bulb_dark":"bulb"}}),t.$on("click",n[3]);const d=n[2].default,p=ni(d,n,n[1],null);return r=new Ia({}),a=new ao({}),c=new Wr({}),{c(){e=M("header"),ie(t.$$.fragment),s=U(),p&&p.c(),i=U(),ie(r.$$.fragment),o=U(),ie(a.$$.fragment),l=U(),ie(c.$$.fragment),this.h()},l(u){e=x(u,"HEADER",{class:!0});var m=k(e);he(t.$$.fragment,m),s=z(m),p&&p.l(m),m.forEach(v),i=z(u),he(r.$$.fragment,u),o=z(u),he(a.$$.fragment,u),l=z(u),he(c.$$.fragment,u),this.h()},h(){f(e,"class","svelte-8lwjtb")},m(u,m){T(u,e,m),ne(t,e,null),g(e,s),p&&p.m(e,null),T(u,i,m),ne(r,u,m),T(u,o,m),ne(a,u,m),T(u,l,m),ne(c,u,m),h=!0},p(u,[m]){const w={};m&1&&(w.icon=u[0]==="dark"?"bulb_dark":"bulb"),t.$set(w),p&&p.p&&(!h||m&2)&&ri(p,d,u,u[1],h?ai(d,u[1],m,null):oi(u[1]),null)},i(u){h||(I(t.$$.fragment,u),I(p,u),I(r.$$.fragment,u),I(a.$$.fragment,u),I(c.$$.fragment,u),h=!0)},o(u){j(t.$$.fragment,u),j(p,u),j(r.$$.fragment,u),j(a.$$.fragment,u),j(c.$$.fragment,u),h=!1},d(u){u&&v(e),re(t),p&&p.d(u),u&&v(i),re(r,u),u&&v(o),re(a,u),u&&v(l),re(c,u)}}}function Va(n,e,t){let s;wt(n,wi,a=>t(0,s=a));let{$$slots:i={},$$scope:r}=e;const o=()=>Na(s==="dark"?"light":"dark");return n.$$set=a=>{"$$scope"in a&&t(1,r=a.$$scope)},[s,r,i,o]}class Ua extends ae{constructor(e){super(),le(this,e,Va,Oa,ce,{})}}Ae.disable_scroll_handling;const za=Ae.goto;Ae.invalidate;Ae.prefetch;Ae.prefetch_routes;Ae.before_navigate;Ae.after_navigate;export{Ke as B,Ua as H,va as N,Dt as a,Bt as b,jt as c,Wa as d,Ba as e,Ra as f,za as g,Ot as s,Ha as t};
