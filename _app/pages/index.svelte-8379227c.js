var Lo=Object.defineProperty,To=Object.defineProperties;var Vo=Object.getOwnPropertyDescriptors;var tn=Object.getOwnPropertySymbols;var jo=Object.prototype.hasOwnProperty,Do=Object.prototype.propertyIsEnumerable;var ts=(n,e,t)=>e in n?Lo(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ce=(n,e)=>{for(var t in e||(e={}))jo.call(e,t)&&ts(n,t,e[t]);if(tn)for(var t of tn(e))Do.call(e,t)&&ts(n,t,e[t]);return n},De=(n,e)=>To(n,Vo(e));var jt=(n,e,t)=>(ts(n,typeof e!="symbol"?e+"":e,t),t);import{D as Se,S as oe,i as re,s as le,e as P,k as j,L as Co,c as M,a as k,d as v,m as D,b as w,J as y,g as I,K as F,M as Ce,v as it,N as Oo,O as ve,P as G,l as ee,n as te,o as L,p as se,q as $,t as O,h as A,j as ue,F as sn,Q as X,G as nn,H as on,I as rn,R as Ue,T as He,w as q,x as Q,y as J,B as Z,U as ss,f as B,V as Pe,W as mt,X as Oe,Y as ln,Z as an,z as cn,A as un,C as hn,_ as fn,$ as Ao,a0 as ot,a1 as Ro,a2 as dn,a3 as Bo,a4 as he,a5 as fe,a6 as Je,a7 as pn,a8 as Dt,a9 as Ne,aa as Ct,ab as ns,ac as zo,ad as Fo,ae as Wo,af as Uo,ag as Ho,ah as Go,ai as Yo,aj as Xo,ak as Ot,al as et,am as vt,an as qo,ao as Jo,ap as Zo,aq as Ko,ar as Qo,as as At,at as mn,au as vn,av as Ae,aw as is,ax as er,ay as Rt,az as Bt,aA as gn,aB as tr,aC as sr,aD as _n,aE as nr,aF as ir,aG as or,aH as wn,aI as yn,aJ as rr,aK as bn}from"../chunks/vendor-73a48dc0.js";const lr="0px 0px 2px rgba(0, 0, 0, 0.7)",ar="0px 0px 5px rgba(0, 0, 0, 0.144)";var cr={"dark_background-color":"#1a1a1a","dark_foreground-color":"#303030","dark_outline-color":"#212121","dark_text-color":"#ffffff",dark_shadow:lr,"light_background-color":"#d0d0d0","light_foreground-color":"white","light_outline-color":"#b9b9b9","light_text-color":"#484848",light_shadow:ar};function ur(n){const e={};return Object.entries(n).forEach(([t,s])=>{const[i,r]=t.split("_");i in e?e[i][r]=s:e[i]={[r]:s}}),e}const os=ur(cr),zt=Object.keys(os);let Ft="dark";"localStorage"in globalThis&&(Ft="theme"in localStorage?localStorage.getItem("theme"):zt[0]);zt.includes(Ft)||(Ft=zt[0]);const gt=Se(os[Ft]),kn=n=>{zt.includes(n)&&(gt.set(os[n]),localStorage.setItem("theme",n))};function hr(n){let e,t;return{c(){e=P("style"),t=j(),this.h()},l(s){const i=Co('[data-svelte="svelte-1olf9b"]',document.head);e=M(i,"STYLE",{type:!0});var r=k(e);r.forEach(v),i.forEach(v),t=D(s),this.h()},h(){w(e,"type","text/css")},m(s,i){y(document.head,e),n[3](e),I(s,t,i)},p:F,i:F,o:F,d(s){v(e),n[3](null),s&&v(t)}}}function fr(n,e,t){let s,i;Ce(n,gt,c=>t(2,i=c));let r,o=!1;function l(){o||!r||(o=!0,t(0,r.innerHTML="* {transition: color 0.2s ease, background-color 0.2s ease, outline 0.2s ease !important;}",r),setTimeout(()=>{t(0,r.innerHTML=`* {transition: color 0.2s ease, background-color 0.2s ease, outline 0.2s ease !important;} :root{${s}}`,r),setTimeout(()=>{t(0,r.innerHTML=`:root{${s}}`,r),o=!1},200)},1))}it(()=>{t(0,r.innerHTML=`:root{${s}}`,r)});function a(c){ve[c?"unshift":"push"](()=>{r=c,t(0,r)})}return n.$$.update=()=>{n.$$.dirty&4&&t(1,s=Oo(i)),n.$$.dirty&2&&s&&l()},[r,s,i,a]}class dr extends oe{constructor(e){super();re(this,e,fr,hr,le,{})}}function pr(){return"window"in globalThis}const En=pr();var mr=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.2" baseProfile="tiny" id="Ebene_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
	 x="0px" y="0px" width="100px" height="100px" viewBox="0 0 100 100" xml:space="preserve">
</svg>
`,vr=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  <defs>
    <style>.cls-1{fill:none;stroke:#fff;stroke-width:5px;}</style>
  </defs>
  <title>branch</title>
  <path class="cls-1" d="M49.59,57.35,72.15,38.69"/>
  <path class="cls-1" d="M51.58,29.45,38,11.21"/>
  <path class="cls-1" d="M53.14,82.61,21.78,55.74"/>
  <path class="cls-1" d="M33.46,47.91l4,21"/>
  <polyline class="cls-1" points="56 97 50 58 51 28 56 16"/>
</svg>`,gr='<svg id="e7691b6e-31fa-49a4-aaec-be19b623d191" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><style>.b50603dd-20d5-40a2-a0ce-2fdf3b92ec21{fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:5px;}</style></defs><title>checkmark</title><path class="b50603dd-20d5-40a2-a0ce-2fdf3b92ec21" d="M75.5,30,40.43,72.47a2,2,0,0,1-3.08,0L24.5,57"/></svg>',_r=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
<defs>
	<style>
		circle, path{
			fill:none;
			stroke: var(--text, white);
			stroke-width: 5px;
		}
	</style>
</defs>
	<circle class="cls-1" cx="50.37" cy="50.5" r="17.23"/>
  <path class="cls-1" d="M38.07,20.49,32.17,8.05,50.83,4.41l.61,13.8,12.13,2.28L68.73,8.05l14,10.16-9,10L81.17,38.7l12-5.47,3.34,17.3H81.93L80.57,63l12.59,6.37L82.7,83.62l-9-9.86L63.58,81.19l5.15,11.23-17.9,3.64V82.71L38.08,81.19,32.77,92.42,17.44,82.71l10.17-8.35L19.11,63,8.19,69.36,4.4,50.56H17.45l1.67-13.81L8.2,30.84l9.25-13.2,11.08,8.81Z"/>
</svg>
`,wr=`<svg
  xmlns="http://www.w3.org/2000/svg"
	viewBox="0 0 100 100">
  <line fill="none" stroke="#FFFFFF" stroke-width="5" stroke-miterlimit="10" x1="27.836" y1="72.164" x2="72.164" y2="27.836"/>
  <line fill="none" stroke="#FFFFFF" stroke-width="5" stroke-miterlimit="10" x1="27.836" y1="27.988" x2="72.164" y2="72.012"/>
</svg>
`,yr=`<svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M50.552 59.3295L39.0695 13.7056H60.2078L50.552 59.3295Z" stroke="white" stroke-width="5" stroke-linejoin="round"/>
<path d="M58.4305 77.2411C58.4305 80.8276 55.4725 83.7944 51.7497 83.7944C48.0269 83.7944 45.0688 80.8276 45.0688 77.2411C45.0688 73.6546 48.0269 70.6878 51.7497 70.6878C55.4725 70.6878 58.4305 73.6546 58.4305 77.2411Z" stroke="white" stroke-width="5"/>
</svg>
`,br=`<svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">

<defs>
	<style>
		path{
			stroke: white;
			stroke-width: 5px;
		}
	</style>
</defs>

<path d="M23.5167 72.9513V32.1483H82.1056L87.6855 37.0307V76.09L82.1056 78.5312H29.4453L23.5167 72.9513Z" />
<path d="M23.2747 73.6489L12.3145 30.0463L15.8885 21.4688H71.8808L75.693 32.9055" />
<path d="M25.488 43.9781H86.7394" />
</svg>
`,kr=`<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
<path d="M70.5 26.5L77.5 23.5L82 32V69L77.5 82L64.5 92.5H47L32 82L18 46L21 40H27L35 57.5V15.5L39.5 11L45.5 13.5M70.5 26.5L69 15.5L58.5 14M70.5 26.5V57.5M58.5 14L55 8L45.5 13.5M58.5 14V49M45.5 13.5V49" stroke-width="5"/>
</svg>
`,Er=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  <defs>
    <style>.cls-1{fill:none;stroke:#fff;stroke-width:5px;}</style>
  </defs>
  <title>leaf</title>
  <path class="cls-1" d="M50.69,96.21,72.86,72.33,77,47,65.91,21.7,50.66,4.5"/>
  <path class="cls-1" d="M53.37,96.21,31.2,72.33,27.07,47,38.15,21.7,53.4,4.5"/>
</svg>`,Sr=`<svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M30.2312 46.4809V15.6962L33.3006 8H40.8035L44.3844 11.0785V29.7203H52.9104L55.9798 33.8249H65.0173L68.0867 38.9557L76.2717 40.1529L79 56.0583L73.7139 72.9899L66.8931 93H36.5405L30.2312 75.5553L20 60.334L21.7052 50.2435L30.2312 46.4809ZM30.2312 46.4809V58.1107M44.3844 29.3783V46.3099M56.4913 34.5091V46.3099M68.7688 39.2978V50.4145" stroke="white" stroke-width="5"/>
</svg>
`,Pr=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  <defs>
    <style>.cls-1{fill:none;stroke:#fff;stroke-width:5px;}</style>
  </defs>
  <title>stem</title>
  <path class="cls-1" d="M49,95.5l8.66-23.19L43.24,46.07l10.59-21L43.24,4.5"/>
</svg>`,Mr=`<svg
  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" xml:space="preserve">
  <polygon fill="none" stroke="#FFFFFF" stroke-width="5" stroke-miterlimit="10" points="33.5,73.759 33.5,26.241 67.441,50 "/>
</svg>
`,xr=`<svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M54.7631 15.1799L91.7944 79.3201C93.9114 82.9867 91.2652 87.5701 87.0313 87.5701H12.9687C8.73476 87.5701 6.08857 82.9867 8.20552 79.3201L45.2368 15.1799C47.3538 11.5133 52.6462 11.5133 54.7631 15.1799Z" stroke="white" stroke-width="5" stroke-linejoin="round"/>
<ellipse cx="50.0578" cy="73.7787" rx="5.98166" ry="5.89858" fill="white"/>
<path d="M52.9755 60.2707C52.5275 63.7615 47.4723 63.7615 47.0243 60.2707L43.5981 33.5748C43.3678 31.781 44.7652 30.1929 46.5736 30.1929L53.4261 30.1929C55.2346 30.1929 56.6319 31.781 56.4017 33.5748L52.9755 60.2707Z" fill="white"/>
</svg>
`,Nr=`<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
<path d="M32.7792 25.4477L45.6598 15.6472L61.6205 20.4075L67.2208 32.728L54.3402 46.4486L50.9801 59.3291V63.9218" stroke-width="8"/>
<path d="M47.3642 83.3434L44.983 79.0169L46.821 74.3331L51.3861 73.0881L55.5363 75.0446L56.307 80.8548L52.3347 84.3528L47.3642 83.3434Z" />
</svg>

`,Sn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",arrow:mr,branch:vr,checkmark:gr,cog:_r,cross:wr,exclamation:yr,folder:br,hand:kr,leaf:Er,pointing:Sr,stem:Pr,triangle:Mr,warning:xr,question:Nr});function $r(n){let e;return{c(){e=P("div"),this.h()},l(t){e=M(t,"DIV",{class:!0});var s=k(e);s.forEach(v),this.h()},h(){w(e,"class","icon-wrapper svelte-1ho94ty"),G(e,"active",n[0]),G(e,"dark",n[1]),G(e,"circle",n[2])},m(t,s){I(t,e,s),e.innerHTML=n[3]},p(t,[s]){s&8&&(e.innerHTML=t[3]),s&1&&G(e,"active",t[0]),s&2&&G(e,"dark",t[1]),s&4&&G(e,"circle",t[2])},i:F,o:F,d(t){t&&v(e)}}}function Ir(n,e,t){let s,{name:i="triangle"}=e,{active:r=!1}=e,{dark:o=!1}=e,{circle:l=!1}=e;return n.$$set=a=>{"name"in a&&t(4,i=a.name),"active"in a&&t(0,r=a.active),"dark"in a&&t(1,o=a.dark),"circle"in a&&t(2,l=a.circle)},n.$$.update=()=>{n.$$.dirty&16&&t(3,s=i in Sn?Sn[i]:i.toString()+" icon not found")},[r,o,l,s,i]}class _t extends oe{constructor(e){super();re(this,e,Ir,$r,le,{name:4,active:0,dark:1,circle:2})}}function Pn(n){let e,t,s,i;const r=[Tr,Lr],o=[];function l(a,c){return a[6]?0:1}return e=l(n),t=o[e]=r[e](n),{c(){t.c(),s=ee()},l(a){t.l(a),s=ee()},m(a,c){o[e].m(a,c),I(a,s,c),i=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(te(),L(o[u],1,1,()=>{o[u]=null}),se(),t=o[e],t?t.p(a,c):(t=o[e]=r[e](a),t.c()),$(t,1),t.m(s.parentNode,s))},i(a){i||($(t),i=!0)},o(a){L(t),i=!1},d(a){o[e].d(a),a&&v(s)}}}function Lr(n){let e;return{c(){e=P("plant-icon"),this.h()},l(t){e=M(t,"PLANT-ICON",{name:!0,active:!0,class:!0}),k(e).forEach(v),this.h()},h(){He(e,"name",n[1]),He(e,"active",n[0]),He(e,"class","svelte-liun6t")},m(t,s){I(t,e,s)},p(t,s){s&2&&He(e,"name",t[1]),s&1&&He(e,"active",t[0])},i:F,o:F,d(t){t&&v(e)}}}function Tr(n){let e,t;return e=new _t({props:{name:n[1],active:n[0]}}),{c(){q(e.$$.fragment)},l(s){Q(e.$$.fragment,s)},m(s,i){J(e,s,i),t=!0},p(s,i){const r={};i&2&&(r.name=s[1]),i&1&&(r.active=s[0]),e.$set(r)},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Mn(n){let e,t;return{c(){e=P("p"),t=O(n[2]),this.h()},l(s){e=M(s,"P",{class:!0});var i=k(e);t=A(i,n[2]),i.forEach(v),this.h()},h(){w(e,"class","svelte-liun6t")},m(s,i){I(s,e,i),y(e,t)},p(s,i){i&4&&ue(t,s[2])},d(s){s&&v(e)}}}function Vr(n){let e,t,s,i,r,o,l,a,c=n[1]&&Pn(n),u=n[2]&&Mn(n);const h=n[9].default,m=sn(h,n,n[8],null);return{c(){e=P("div"),t=P("button"),c&&c.c(),s=j(),u&&u.c(),i=j(),r=P("div"),m&&m.c(),this.h()},l(d){e=M(d,"DIV",{class:!0});var f=k(e);t=M(f,"BUTTON",{class:!0});var p=k(t);c&&c.l(p),s=D(p),u&&u.l(p),i=D(p),r=M(p,"DIV",{class:!0});var g=k(r);m&&m.l(g),g.forEach(v),p.forEach(v),f.forEach(v),this.h()},h(){w(r,"class","content svelte-liun6t"),t.disabled=n[4],w(t,"class","svelte-liun6t"),G(t,"active",n[0]),G(t,"useActive",n[3]),G(t,"only-icon",!n[2]),G(t,"has-icon",!!n[1]),w(e,"class","component-wrapper")},m(d,f){I(d,e,f),y(e,t),c&&c.m(t,null),y(t,s),u&&u.m(t,null),y(t,i),y(t,r),m&&m.m(r,null),n[10](t),o=!0,l||(a=X(t,"click",n[7]),l=!0)},p(d,[f]){d[1]?c?(c.p(d,f),f&2&&$(c,1)):(c=Pn(d),c.c(),$(c,1),c.m(t,s)):c&&(te(),L(c,1,1,()=>{c=null}),se()),d[2]?u?u.p(d,f):(u=Mn(d),u.c(),u.m(t,i)):u&&(u.d(1),u=null),m&&m.p&&(!o||f&256)&&nn(m,h,d,d[8],o?rn(h,d[8],f,null):on(d[8]),null),(!o||f&16)&&(t.disabled=d[4]),f&1&&G(t,"active",d[0]),f&8&&G(t,"useActive",d[3]),f&4&&G(t,"only-icon",!d[2]),f&2&&G(t,"has-icon",!!d[1])},i(d){o||($(c),$(m,d),o=!0)},o(d){L(c),L(m,d),o=!1},d(d){d&&v(e),c&&c.d(),u&&u.d(),m&&m.d(d),n[10](null),l=!1,a()}}}function jr(n,e,t){let s,{$$slots:i={},$$scope:r}=e,{icon:o=void 0}=e,{name:l=""}=e,{active:a=!1}=e,{useActive:c=!1}=e,{disabled:u=!1}=e,h;const m=Ue(),d=()=>{t(0,a=!a),m("click")};function f(p){ve[p?"unshift":"push"](()=>{h=p,t(5,h)})}return n.$$set=p=>{"icon"in p&&t(1,o=p.icon),"name"in p&&t(2,l=p.name),"active"in p&&t(0,a=p.active),"useActive"in p&&t(3,c=p.useActive),"disabled"in p&&t(4,u=p.disabled),"$$scope"in p&&t(8,r=p.$$scope)},n.$$.update=()=>{n.$$.dirty&32&&t(6,s=h&&!!h.parentElement)},[a,o,l,c,u,h,s,d,r,i,f]}class Me extends oe{constructor(e){super();re(this,e,jr,Vr,le,{icon:1,name:2,active:0,useActive:3,disabled:4})}}var $e;(function(n){n.INFO="info",n.WARNING="warning",n.ERROR="error",n.SUCCESS="success"})($e||($e={}));const Dr=n=>(e,t={})=>{var o;if(!e&&!t)return;const s=Array.isArray(t==null?void 0:t.values),i={id:ss(),type:$e.INFO,content:e,props:t.props,title:(o=t==null?void 0:t.title)!=null?o:t==null?void 0:t.type,values:t==null?void 0:t.values,timeout:t==null?void 0:t.timeout},r=new Promise((l,a)=>{i.resolve=l,i.reject=a});if(r.finally(()=>n.update(l=>l.filter(a=>a.id!==i.id))),t&&"type"in t){const l=t.type.toLowerCase();Object.values($e).forEach(a=>{l===a&&(i.type=a)})}if(e instanceof Error&&(i.type=$e.ERROR),typeof i.timeout=="undefined"){let l;i.type===$e.SUCCESS&&(l=3e3),i.type===$e.INFO&&(l=2e3),i.type===$e.WARNING&&(l=7e3),l&&!s&&(i.timeout=l)}return"title"in i||(i.title=i.type.toUpperCase().slice(0,1)+i.type.slice(1)),n.update(l=>[...l,i]),i.timeout&&setTimeout(i.resolve,i.timeout),r};var xn=()=>{const n=Se([]),e=Dr(n);return{store:n,createMessage:e,MessageType:$e}};const{store:Cr,createMessage:Or,MessageType:xh}=xn(),Ar=Cr,wt=Or;function Nn(n,e,t){const s=n.slice();return s[6]=e[t],s}function $n(n){let e,t,s,i,r,o,l,a,c,u,h,m,d,f;i=new Me({props:{icon:"cross"}}),i.$on("click",n[4]);let p=n[0].title&&In(n);const g=[Br,Rr],_=[];function N(b,x){return typeof b[0].content=="string"?0:1}a=N(n),c=_[a]=g[a](n);let E=n[0].values&&Ln(n);return{c(){e=P("div"),t=P("div"),s=P("div"),r=P("div"),q(i.$$.fragment),o=j(),p&&p.c(),l=j(),c.c(),u=j(),E&&E.c(),this.h()},l(b){e=M(b,"DIV",{class:!0});var x=k(e);t=M(x,"DIV",{class:!0});var S=k(t);s=M(S,"DIV",{class:!0});var C=k(s);r=M(C,"DIV",{style:!0});var V=k(r);Q(i.$$.fragment,V),C.forEach(v),o=D(S),p&&p.l(S),l=D(S),c.l(S),u=D(S),E&&E.l(S),S.forEach(v),x.forEach(v),this.h()},h(){B(r,"display","contents"),B(r,"--bg","transparent"),w(s,"class","close-wrapper svelte-6zzrtw"),w(t,"class",h="alert-wrapper alert-"+n[0].type+" svelte-6zzrtw"),G(t,"isInverted",n[1]),w(e,"class","alert-container svelte-6zzrtw")},m(b,x){I(b,e,x),y(e,t),y(t,s),y(s,r),J(i,r,null),y(t,o),p&&p.m(t,null),y(t,l),_[a].m(t,null),y(t,u),E&&E.m(t,null),f=!0},p(b,x){b[0].title?p?p.p(b,x):(p=In(b),p.c(),p.m(t,l)):p&&(p.d(1),p=null);let S=a;a=N(b),a===S?_[a].p(b,x):(te(),L(_[S],1,1,()=>{_[S]=null}),se(),c=_[a],c?c.p(b,x):(c=_[a]=g[a](b),c.c()),$(c,1),c.m(t,u)),b[0].values?E?(E.p(b,x),x&1&&$(E,1)):(E=Ln(b),E.c(),$(E,1),E.m(t,null)):E&&(te(),L(E,1,1,()=>{E=null}),se()),(!f||x&1&&h!==(h="alert-wrapper alert-"+b[0].type+" svelte-6zzrtw"))&&w(t,"class",h),x&3&&G(t,"isInverted",b[1])},i(b){f||($(i.$$.fragment,b),$(c),$(E),mt(()=>{m||(m=Oe(t,ln,{},!0)),m.run(1)}),mt(()=>{d||(d=Oe(e,an,{},!0)),d.run(1)}),f=!0)},o(b){L(i.$$.fragment,b),L(c),L(E),m||(m=Oe(t,ln,{},!1)),m.run(0),d||(d=Oe(e,an,{},!1)),d.run(0),f=!1},d(b){b&&v(e),Z(i),p&&p.d(),_[a].d(),E&&E.d(),b&&m&&m.end(),b&&d&&d.end()}}}function In(n){let e,t=n[0].title+"",s;return{c(){e=P("h2"),s=O(t),this.h()},l(i){e=M(i,"H2",{class:!0});var r=k(e);s=A(r,t),r.forEach(v),this.h()},h(){w(e,"class","svelte-6zzrtw")},m(i,r){I(i,e,r),y(e,s)},p(i,r){r&1&&t!==(t=i[0].title+"")&&ue(s,t)},d(i){i&&v(e)}}}function Rr(n){let e,t,s;const i=[n[0].props];var r=n[0].content;function o(l){let a={};for(let c=0;c<i.length;c+=1)a=hn(a,i[c]);return{props:a}}return r&&(e=new r(o())),{c(){e&&q(e.$$.fragment),t=ee()},l(l){e&&Q(e.$$.fragment,l),t=ee()},m(l,a){e&&J(e,l,a),I(l,t,a),s=!0},p(l,a){const c=a&1?cn(i,[un(l[0].props)]):{};if(r!==(r=l[0].content)){if(e){te();const u=e;L(u.$$.fragment,1,0,()=>{Z(u,1)}),se()}r?(e=new r(o()),q(e.$$.fragment),$(e.$$.fragment,1),J(e,t.parentNode,t)):e=null}else r&&e.$set(c)},i(l){s||(e&&$(e.$$.fragment,l),s=!0)},o(l){e&&L(e.$$.fragment,l),s=!1},d(l){l&&v(t),e&&Z(e,l)}}}function Br(n){let e,t=n[0].content+"";return{c(){e=P("p")},l(s){e=M(s,"P",{});var i=k(e);i.forEach(v)},m(s,i){I(s,e,i),e.innerHTML=t},p(s,i){i&1&&t!==(t=s[0].content+"")&&(e.innerHTML=t)},i:F,o:F,d(s){s&&v(e)}}}function Ln(n){let e,t,s=n[0].values,i=[];for(let o=0;o<s.length;o+=1)i[o]=Tn(Nn(n,s,o));const r=o=>L(i[o],1,1,()=>{i[o]=null});return{c(){e=P("div");for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=M(o,"DIV",{class:!0});var l=k(e);for(let a=0;a<i.length;a+=1)i[a].l(l);l.forEach(v),this.h()},h(){w(e,"class","options-wrapper svelte-6zzrtw")},m(o,l){I(o,e,l);for(let a=0;a<i.length;a+=1)i[a].m(e,null);t=!0},p(o,l){if(l&1){s=o[0].values;let a;for(a=0;a<s.length;a+=1){const c=Nn(o,s,a);i[a]?(i[a].p(c,l),$(i[a],1)):(i[a]=Tn(c),i[a].c(),$(i[a],1),i[a].m(e,null))}for(te(),a=s.length;a<i.length;a+=1)r(a);se()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)$(i[l]);t=!0}},o(o){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)L(i[l]);t=!1},d(o){o&&v(e),Pe(i,o)}}}function Tn(n){let e,t,s;function i(){return n[5](n[6])}return e=new Me({props:{name:n[6]}}),e.$on("click",i),{c(){t=P("div"),q(e.$$.fragment),this.h()},l(r){t=M(r,"DIV",{style:!0});var o=k(t);Q(e.$$.fragment,o),this.h()},h(){B(t,"display","contents"),B(t,"--bg","#303030"),B(t,"--text","white")},m(r,o){I(r,t,o),J(e,t,null),s=!0},p(r,o){n=r;const l={};o&1&&(l.name=n[6]),e.$set(l)},i(r){s||($(e.$$.fragment,r),s=!0)},o(r){L(e.$$.fragment,r),s=!1},d(r){r&&v(t),Z(e,r)}}}function zr(n){let e,t,s,i,r=n[0]&&$n(n);return{c(){r&&r.c(),e=ee()},l(o){r&&r.l(o),e=ee()},m(o,l){r&&r.m(o,l),I(o,e,l),t=!0,s||(i=X(window,"keydown",n[2]),s=!0)},p(o,[l]){o[0]?r?(r.p(o,l),l&1&&$(r,1)):(r=$n(o),r.c(),$(r,1),r.m(e.parentNode,e)):r&&(te(),L(r,1,1,()=>{r=null}),se())},i(o){t||($(r),t=!0)},o(o){L(r),t=!1},d(o){r&&r.d(o),o&&v(e),s=!1,i()}}}function Fr(n,e,t){let s,i,r;Ce(n,Ar,c=>t(3,r=c));function o(c){c.key==="Escape"&&s&&s.reject()}const l=()=>{s.reject()},a=c=>s.resolve(c);return n.$$.update=()=>{n.$$.dirty&8&&t(0,s=r[0]),n.$$.dirty&1&&(s?En&&document.body.classList.add("overlay-visible"):En&&document.body.classList.remove("overlay-visible")),n.$$.dirty&1&&t(1,i=s&&(s.type==="success"||s.type==="warning"))},[s,i,o,r,l,a]}class Wr extends oe{constructor(e){super();re(this,e,Fr,zr,le,{})}}const{store:Ur,createMessage:Hr}=xn(),Gr=Ur,yt=Hr;var Yr=(n,...e)=>{const t=(i,r)=>{Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r).map(o=>o.toString())).forEach(o=>{o.match(/^(?:constructor|prototype|arguments|caller|name|bind|call|apply|toString|length)$/)||Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(r,o))})},s=class extends n{constructor(...r){super(...r);e.forEach(o=>t(this,new o))}};return e.forEach(i=>{t(s.prototype,i.prototype),t(s,i)}),s},Vn=n=>{n[0]==="#"&&(n=n.replace("#","")),n.length===3&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]);const e=n.match(/.{1,2}/g);return[parseInt(e[0],16)/255,parseInt(e[1],16)/255,parseInt(e[2],16)/255]};const Re=.4;function Xr(n,e,t,s,i,r,o,l,a,c){const u=i-t,h=o-i,m=a-o,d=r-s,f=l-r,p=c-l;let g,_,N,E,b=-1e4,x=-1e4;const S=[{x:t,y:s}];for(let C=1;C<n;C++){const V=C/n;g=t+u*V,N=i+h*V;const Y=o+m*V;g+=(N-g)*V,N+=(Y-N)*V,_=s+d*V,E=r+f*V;const W=l+p*V;_+=(E-_)*V,E+=(W-E)*V;const ie=g+(N-g)*V,U=_+(E-_)*V,ne=ie-b,H=U-x;ne*ne+H*H>e&&(S.push({x:ie,y:U}),b=ie,x=U)}return S.push({x:a,y:c}),S}function qr(n){const e=n.length-1;return n.map((t,s,i)=>{if(s===0)return{rx:i[s+1].x*Re*0,ry:t.y+(i[s+1].y-t.y)*Re*0};if(s===e)return{lx:i[s-1].x+(t.x-i[s-1].x)*Re*2,ly:i[s-1].y+(t.y-i[s-1].y)*Re*2};if(t.y>i[s+1].y&&t.y>i[s-1].y||t.y<i[s+1].y&&t.y<i[s-1].y)return{lx:i[s-1].x+(t.x-i[s-1].x)*Re,ly:t.y,rx:t.x+(i[s+1].x-t.x)*Re,ry:t.y};{const o={x:i[s-1].x-i[s+1].x,y:i[s-1].y-i[s+1].y},l=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2));o.x/=l,o.y/=l;const a=i[s+1].x-t.x,c=t.x-i[s-1].x;return{lx:t.x+o.x*c*Re,ly:t.y+o.y*c*Re,rx:t.x-o.x*a*Re,ry:t.y-o.y*a*Re}}})}function Jr(n){const e=n.length-1,t={},s=qr(n);return n.map((i,r,o)=>{if(r<e)return Xr(e*20,0,i.x,i.y,s[r].rx,s[r].ry,s[r+1].lx,s[r+1].ly,o[r+1].x,o[r+1].y)}).flat().filter(i=>!i||i.x in t?!1:(t[i.x]=!0,!0))}function jn(n,e,t){let s;return(...i)=>{const r=()=>{s=null,t||n(...i)},o=t&&!s;clearTimeout(s),s=setTimeout(r,e),o&&n(...i)}}function Zr(n,e=!1){return function(t,s,i){let r;const o=i.value;return i.value=function(...l){const a=()=>{r=null,e||o.apply(this,l)},c=e&&!r;clearTimeout(r),r=setTimeout(a,n),c&&o.apply(this,l)},i}}function Wt(n,e){let t,s,i,r=null,o=0;const l=n,a=()=>{o=0,r=null,i=l.apply(t,s),r||(t=s=null)};return function(){const u=Date.now();o||(o=u);const h=e-(u-o);return t=this,s=arguments,h<=0||h>e?(r&&(clearTimeout(r),r=null),o=u,i=l.apply(t,s),r||(t=s=null)):r||(r=setTimeout(a,h)),i}}const Be={amountEmitters:0,amountCallbacks:0,emitters:[]};typeof self!="undefined"&&"window"in self&&(window.debug=Be);class Te{constructor(){jt(this,"index",0);jt(this,"cbs",{});jt(this,"cbsOnce",{});this.index=Be.amountEmitters,Be.amountEmitters++}emit(e,t){e in this.cbs&&this.cbs[e].forEach(s=>s(t)),e in this.cbsOnce&&(this.cbsOnce[e].forEach(s=>s(t)),delete this.cbsOnce[e])}on(e,t,s=0){s>0&&(t=Wt(t,s));const i=Object.assign(this.cbs,{[e]:[...this.cbs[e]||[],t]});return this.cbs=i,Be.emitters[this.index]={name:this.constructor.name,cbs:Object.fromEntries(Object.keys(this.cbs).map(r=>[r,this.cbs[r].length]))},Be.amountCallbacks++,()=>{var r;Be.amountCallbacks--,(r=i[e])==null||r.splice(i[e].indexOf(t),1),Be.emitters[this.index]={name:this.constructor.name,cbs:Object.fromEntries(Object.keys(this.cbs).map(o=>[o,this.cbs[o].length]))}}}once(e,t){return this.cbsOnce[e]=[...this.cbsOnce[e]||[],t],()=>{this.cbsOnce[e].splice(this.cbsOnce[e].indexOf(t),1)}}destroyEventEmitter(){Be.amountEmitters--,Object.keys(this.cbs).forEach(e=>{Be.amountCallbacks-=this.cbs[e].length,delete this.cbs[e]}),Object.keys(this.cbsOnce).forEach(e=>delete this.cbsOnce[e]),this.cbs={},this.cbsOnce={},delete Be.emitters[this.index]}}function Kr(n){if(n.length===0)return 0;let e=0;for(let t=0;t<n.length;t++)e=(e<<5)-e+n.charCodeAt(t),e=e&e;return e}var Qr=()=>{const n={};let e=0;const t=(s=0,i=0)=>{if(i>500)throw new Error("Infinite loop in id generation algo");return s in n?t(Math.max(s++,e++),i+1):(n[s]=!0,s.toString())};return t.reset=()=>{Object.keys(n).forEach(s=>delete n[+s]),e=0},t};function el(n,e){const t=[],s=n.length/e;for(let i=0;i<s;i++){const r=[];for(let o=0;o<e;o++)r[o]=n[i*e+o];t.push(r)}return t}const Ze=n=>n>1?"s":"",Dn=n=>{if(typeof n!="number"||isNaN(n))return"never";if(n<1e3)return"< 1 second";const e=Math.floor(n/1e3);if(e<60)return e+" second"+Ze(e);const t=Math.floor(e/60);if(t<60)return t+" minute"+Ze(t);const s=Math.floor(t/60);if(s<24)return s+" hour"+Ze(s);const i=Math.floor(s/24);if(i<7)return i+" day"+Ze(i);const r=Math.floor(i/7);if(r<30)return r+" week"+Ze(r);const o=Math.floor(r/30);if(o<12)return o+" month"+Ze(o);const l=Math.floor(o/12);if(l<10)return l+" year"+Ze(l);const a=Math.floor(o/10);return a+" decade"+Ze(a)};function rs(n){let e,t={length:NaN};const s=(i,r)=>i===t[r];return function(...r){return(r.length!==t.length||!r.every(s))&&(t=r,e=n.apply(this,r)),e}}const ls={},tl=(n,e,t={})=>{if(ls[e])return ls[e];const s=new fn(n,t),i=new Image;return ls[e]=s,i.onload=()=>{s.image=i},i.src=e,s};var sl={texture:tl};let as=[],cs=2,rt=0;const nl={};let us=0;const il=["#00ffff","#f0ffff","#f5f5dc","#000000","#0000ff","#a52a2a","#00ffff","#00008b","#008b8b","#a9a9a9","#006400","#bdb76b","#8b008b","#556b2f","#ff8c00","#9932cc","#8b0000","#e9967a","#9400d3","#ff00ff","#ffd700","#008000","#4b0082","#f0e68c","#add8e6","#e0ffff","#90ee90","#d3d3d3","#ffb6c1","#ffffe0","#00ff00","#ff00ff","#800000","#000080","#808000","#ffa500","#ffc0cb","#800080","#800080","#ff0000","#c0c0c0","#ffffff","#ffff00"],hs="plant.log.history",Cn="localStorage"in globalThis,bt=Cn?hs in localStorage?JSON.parse(localStorage.getItem(hs)):[]:[];function ol(){Cn&&localStorage.setItem(hs,JSON.stringify(bt))}let lt;function ge(n){rt=Math.max(rt,n.length);const e=us;nl[n]=il[us],us++;const t=(i,r)=>{if(bt.push({scope:n,args:i,level:cs}),bt.length=Math.min(100,bt.length),lt&&lt.set(bt),ol(),(!as.length||as.includes(n))&&r<=cs){if(i instanceof Error||r===2){console.error(`[${n.padEnd(rt," ")}]`,i);return}if(Array.isArray(i)&&typeof i[0]=="string"&&typeof i[1]=="object"){console.groupCollapsed(`%c[${n.padEnd(rt," ")}]`,`color: hsl(${e*30}deg 68% 64%); font-weight: bold;`,i[0]),console.log(...i.slice(1)),console.groupEnd();return}r===0&&console.log(`%c[${n.padEnd(rt," ")}]`,`color: hsl(${e*30}deg 68% 64%); font-weight: bold;`,...i),r===1&&console.warn(`[${n.padEnd(rt," ")}]`,...i)}},s=(...i)=>t(i,0);return s.warn=(...i)=>t(i,1),s.error=i=>t(i,2),s}ge.getStore=function(){return lt||(lt=Se([]),lt)};ge.setFilter=(...n)=>{as=n};ge.setLevel=(n=0)=>{cs=n};function rl(n){const e={};return(...t)=>{const s=Kr(JSON.stringify(t));return s in e?e[s]:e[s]=n(...t)}}const ll=/^(?:[ ]+)?(?:at )([^ ]*)?(?: )?(?:\[(.*?)\] )?(?:\(([^()]+)\))?$/gm,On=n=>n.replace(window.location.href,"").replace(/^node_modules/,"").replace(/.+?(?=plantarium)plantarium\//,"");var fs=n=>{const[e,...t]=n.split(`
`),[s,i]=e.split(":"),r=t.map(o=>{const l=[...o.matchAll(ll)][0],[,a,c,u]=l;return ce(ce({name:On(a)},u?{location:On(u)}:{}),c?{alias:c.trim().replace("as ","")}:{})});return{title:i,type:s,lines:r}};function An(n,e,t){const s=n.slice();return s[1]=e[t],s}function Rn(n){let e,t,s,i=n[0].type+"",r,o,l,a=n[0].title+"",c,u,h,m,d=n[0].lines,f=[];for(let p=0;p<d.length;p+=1)f[p]=Fn(An(n,d,p));return{c(){e=P("div"),t=P("p"),s=P("b"),r=O(i),o=O(":"),l=j(),c=O(a),u=j(),h=P("pre"),m=P("code");for(let p=0;p<f.length;p+=1)f[p].c();this.h()},l(p){e=M(p,"DIV",{class:!0});var g=k(e);t=M(g,"P",{});var _=k(t);s=M(_,"B",{});var N=k(s);r=A(N,i),o=A(N,":"),N.forEach(v),l=D(_),c=A(_,a),_.forEach(v),u=D(g),h=M(g,"PRE",{class:!0});var E=k(h);m=M(E,"CODE",{});var b=k(m);for(let x=0;x<f.length;x+=1)f[x].l(b);b.forEach(v),E.forEach(v),g.forEach(v),this.h()},h(){w(h,"class","svelte-1e5rtbs"),w(e,"class","wrapper svelte-1e5rtbs")},m(p,g){I(p,e,g),y(e,t),y(t,s),y(s,r),y(s,o),y(t,l),y(t,c),y(e,u),y(e,h),y(h,m);for(let _=0;_<f.length;_+=1)f[_].m(m,null)},p(p,g){if(g&1&&i!==(i=p[0].type+"")&&ue(r,i),g&1&&a!==(a=p[0].title+"")&&ue(c,a),g&1){d=p[0].lines;let _;for(_=0;_<d.length;_+=1){const N=An(p,d,_);f[_]?f[_].p(N,g):(f[_]=Fn(N),f[_].c(),f[_].m(m,null))}for(;_<f.length;_+=1)f[_].d(1);f.length=d.length}},d(p){p&&v(e),Pe(f,p)}}}function Bn(n){let e,t,s,i=n[1].alias+"",r;return{c(){e=O("as "),t=P("strong"),s=O("$"),r=O(i)},l(o){e=A(o,"as "),t=M(o,"STRONG",{});var l=k(t);s=A(l,"$"),r=A(l,i),l.forEach(v)},m(o,l){I(o,e,l),I(o,t,l),y(t,s),y(t,r)},p(o,l){l&1&&i!==(i=o[1].alias+"")&&ue(r,i)},d(o){o&&v(e),o&&v(t)}}}function zn(n){let e,t,s=n[1].location+"",i,r;return{c(){e=O("\xA0("),t=P("i"),i=O(s),r=O(")")},l(o){e=A(o,"\xA0("),t=M(o,"I",{});var l=k(t);i=A(l,s),l.forEach(v),r=A(o,")")},m(o,l){I(o,e,l),I(o,t,l),y(t,i),I(o,r,l)},p(o,l){l&1&&s!==(s=o[1].location+"")&&ue(i,s)},d(o){o&&v(e),o&&v(t),o&&v(r)}}}function Fn(n){let e,t,s=n[1].name+"",i,r,o,l=n[1].alias&&Bn(n),a=n[1].location&&zn(n);return{c(){e=O("at "),t=P("strong"),i=O(s),l&&l.c(),r=ee(),a&&a.c(),o=P("br")},l(c){e=A(c,"at "),t=M(c,"STRONG",{});var u=k(t);i=A(u,s),u.forEach(v),l&&l.l(c),r=ee(),a&&a.l(c),o=M(c,"BR",{})},m(c,u){I(c,e,u),I(c,t,u),y(t,i),l&&l.m(c,u),I(c,r,u),a&&a.m(c,u),I(c,o,u)},p(c,u){u&1&&s!==(s=c[1].name+"")&&ue(i,s),c[1].alias?l?l.p(c,u):(l=Bn(c),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null),c[1].location?a?a.p(c,u):(a=zn(c),a.c(),a.m(o.parentNode,o)):a&&(a.d(1),a=null)},d(c){c&&v(e),c&&v(t),l&&l.d(c),c&&v(r),a&&a.d(c),c&&v(o)}}}function al(n){let e,t=n[0]&&Rn(n);return{c(){t&&t.c(),e=ee()},l(s){t&&t.l(s),e=ee()},m(s,i){t&&t.m(s,i),I(s,e,i)},p(s,[i]){s[0]?t?t.p(s,i):(t=Rn(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:F,o:F,d(s){t&&t.d(s),s&&v(e)}}}function cl(n,e,t){let{stacktrace:s}=e;return n.$$set=i=>{"stacktrace"in i&&t(0,s=i.stacktrace)},[s]}class ul extends oe{constructor(e){super();re(this,e,cl,al,le,{stacktrace:0})}}function Wn(n,e,t){const s=n.slice();return s[13]=e[t],s}function Un(n){let e,t,s,i,r,o,l,a,c,u,h,m,d,f,p,g,_,N,E,b,x,S,C=n[6]&&Hn(n),V=n[0].title&&Gn(n);const Y=[dl,fl,hl],W=[];function ie(H,ae){return typeof H[0].content=="string"?0:H[0].content instanceof Error?1:H[0].content instanceof Ao?2:-1}~(l=ie(n))&&(a=W[l]=Y[l](n));let U=n[0].content instanceof Error&&Xn(n),ne=n[0].values&&qn(n);return f=new _t({props:{name:"cross"}}),{c(){e=P("div"),t=P("div"),s=P("div"),C&&C.c(),i=j(),r=P("div"),V&&V.c(),o=j(),a&&a.c(),c=j(),u=P("div"),U&&U.c(),h=j(),ne&&ne.c(),m=j(),d=P("div"),p=P("div"),q(f.$$.fragment),g=j(),_=P("div"),this.h()},l(H){e=M(H,"DIV",{class:!0});var ae=k(e);t=M(ae,"DIV",{class:!0});var pe=k(t);s=M(pe,"DIV",{class:!0});var ye=k(s);C&&C.l(ye),i=D(ye),r=M(ye,"DIV",{class:!0});var be=k(r);V&&V.l(be),o=D(be),a&&a.l(be),c=D(be),u=M(be,"DIV",{class:!0});var ke=k(u);U&&U.l(ke),h=D(ke),ne&&ne.l(ke),ke.forEach(v),be.forEach(v),m=D(ye),d=M(ye,"DIV",{class:!0});var je=k(d);p=M(je,"DIV",{style:!0});var xe=k(p);Q(f.$$.fragment,xe),je.forEach(v),ye.forEach(v),g=D(pe),_=M(pe,"DIV",{style:!0,class:!0}),k(_).forEach(v),pe.forEach(v),ae.forEach(v),this.h()},h(){w(u,"class","button-wrapper svelte-pmp1k"),w(r,"class","toast-text svelte-pmp1k"),B(p,"display","contents"),B(p,"--height","fit-content"),w(d,"class","toast-close svelte-pmp1k"),w(s,"class","toast-content svelte-pmp1k"),G(s,"hasIcon",!!n[6]),w(_,"style",N=`transition: width ${n[0].timeout}ms linear;`),w(_,"class","toast-progress svelte-pmp1k"),G(_,"animateProgress",n[2]),w(t,"class",E="toast toast-"+n[0].type+" svelte-pmp1k"),G(t,"isInverted",n[5]),w(e,"class","wrapper svelte-pmp1k")},m(H,ae){I(H,e,ae),y(e,t),y(t,s),C&&C.m(s,null),y(s,i),y(s,r),V&&V.m(r,null),y(r,o),~l&&W[l].m(r,null),y(r,c),y(r,u),U&&U.m(u,null),y(u,h),ne&&ne.m(u,null),y(s,m),y(s,d),y(d,p),J(f,p,null),y(t,g),y(t,_),n[11](e),b=!0,x||(S=X(d,"click",n[10]),x=!0)},p(H,ae){H[6]?C?(C.p(H,ae),ae&64&&$(C,1)):(C=Hn(H),C.c(),$(C,1),C.m(s,i)):C&&(te(),L(C,1,1,()=>{C=null}),se()),H[0].title?V?V.p(H,ae):(V=Gn(H),V.c(),V.m(r,o)):V&&(V.d(1),V=null);let pe=l;l=ie(H),l===pe?~l&&W[l].p(H,ae):(a&&(te(),L(W[pe],1,1,()=>{W[pe]=null}),se()),~l?(a=W[l],a?a.p(H,ae):(a=W[l]=Y[l](H),a.c()),$(a,1),a.m(r,c)):a=null),H[0].content instanceof Error?U?(U.p(H,ae),ae&1&&$(U,1)):(U=Xn(H),U.c(),$(U,1),U.m(u,h)):U&&(te(),L(U,1,1,()=>{U=null}),se()),H[0].values?ne?(ne.p(H,ae),ae&1&&$(ne,1)):(ne=qn(H),ne.c(),$(ne,1),ne.m(u,null)):ne&&(te(),L(ne,1,1,()=>{ne=null}),se()),ae&64&&G(s,"hasIcon",!!H[6]),(!b||ae&1&&N!==(N=`transition: width ${H[0].timeout}ms linear;`))&&w(_,"style",N),ae&4&&G(_,"animateProgress",H[2]),(!b||ae&1&&E!==(E="toast toast-"+H[0].type+" svelte-pmp1k"))&&w(t,"class",E),ae&33&&G(t,"isInverted",H[5])},i(H){b||($(C),$(a),$(U),$(ne),$(f.$$.fragment,H),b=!0)},o(H){L(C),L(a),L(U),L(ne),L(f.$$.fragment,H),b=!1},d(H){H&&v(e),C&&C.d(),V&&V.d(),~l&&W[l].d(),U&&U.d(),ne&&ne.d(),Z(f),n[11](null),x=!1,S()}}}function Hn(n){let e,t,s,i;return t=new _t({props:{name:n[6],circle:!0}}),{c(){e=P("div"),s=P("div"),q(t.$$.fragment),this.h()},l(r){e=M(r,"DIV",{class:!0});var o=k(e);s=M(o,"DIV",{style:!0});var l=k(s);Q(t.$$.fragment,l),o.forEach(v),this.h()},h(){B(s,"display","contents"),B(s,"--width","40px"),B(s,"--height","40px"),w(e,"class","toast-icon svelte-pmp1k")},m(r,o){I(r,e,o),y(e,s),J(t,s,null),i=!0},p(r,o){const l={};o&64&&(l.name=r[6]),t.$set(l)},i(r){i||($(t.$$.fragment,r),i=!0)},o(r){L(t.$$.fragment,r),i=!1},d(r){r&&v(e),Z(t)}}}function Gn(n){let e,t=n[0].title+"",s;return{c(){e=P("h3"),s=O(t),this.h()},l(i){e=M(i,"H3",{class:!0});var r=k(e);s=A(r,t),r.forEach(v),this.h()},h(){w(e,"class","svelte-pmp1k")},m(i,r){I(i,e,r),y(e,s)},p(i,r){r&1&&t!==(t=i[0].title+"")&&ue(s,t)},d(i){i&&v(e)}}}function hl(n){let e,t,s;var i=n[0].content;function r(o){return{}}return i&&(e=new i(r())),{c(){e&&q(e.$$.fragment),t=ee()},l(o){e&&Q(e.$$.fragment,o),t=ee()},m(o,l){e&&J(e,o,l),I(o,t,l),s=!0},p(o,l){if(i!==(i=o[0].content)){if(e){te();const a=e;L(a.$$.fragment,1,0,()=>{Z(a,1)}),se()}i?(e=new i(r()),q(e.$$.fragment),$(e.$$.fragment,1),J(e,t.parentNode,t)):e=null}},i(o){s||(e&&$(e.$$.fragment,o),s=!0)},o(o){e&&L(e.$$.fragment,o),s=!1},d(o){o&&v(t),e&&Z(e,o)}}}function fl(n){let e,t=n[0].content.message+"",s,i,r,o,l=n[3]&&Yn(n);return{c(){e=P("p"),s=O(t),i=j(),l&&l.c(),r=ee(),this.h()},l(a){e=M(a,"P",{class:!0});var c=k(e);s=A(c,t),c.forEach(v),i=D(a),l&&l.l(a),r=ee(),this.h()},h(){w(e,"class","svelte-pmp1k")},m(a,c){I(a,e,c),y(e,s),I(a,i,c),l&&l.m(a,c),I(a,r,c),o=!0},p(a,c){(!o||c&1)&&t!==(t=a[0].content.message+"")&&ue(s,t),a[3]?l?(l.p(a,c),c&8&&$(l,1)):(l=Yn(a),l.c(),$(l,1),l.m(r.parentNode,r)):l&&(te(),L(l,1,1,()=>{l=null}),se())},i(a){o||($(l),o=!0)},o(a){L(l),o=!1},d(a){a&&v(e),a&&v(i),l&&l.d(a),a&&v(r)}}}function dl(n){let e,t=n[0].content+"";return{c(){e=P("p"),this.h()},l(s){e=M(s,"P",{class:!0});var i=k(e);i.forEach(v),this.h()},h(){w(e,"class","svelte-pmp1k")},m(s,i){I(s,e,i),e.innerHTML=t},p(s,i){i&1&&t!==(t=s[0].content+"")&&(e.innerHTML=t)},i:F,o:F,d(s){s&&v(e)}}}function Yn(n){let e,t,s,i;return t=new ul({props:{stacktrace:fs(n[0].content.stack)}}),{c(){e=P("div"),q(t.$$.fragment),this.h()},l(r){e=M(r,"DIV",{class:!0});var o=k(e);Q(t.$$.fragment,o),o.forEach(v),this.h()},h(){w(e,"class","stack-trace svelte-pmp1k")},m(r,o){I(r,e,o),J(t,e,null),i=!0},p(r,o){const l={};o&1&&(l.stacktrace=fs(r[0].content.stack)),t.$set(l)},i(r){i||($(t.$$.fragment,r),mt(()=>{s||(s=Oe(e,ot,{},!0)),s.run(1)}),i=!0)},o(r){L(t.$$.fragment,r),s||(s=Oe(e,ot,{},!1)),s.run(0),i=!1},d(r){r&&v(e),Z(t),r&&s&&s.end()}}}function Xn(n){let e,t,s,i;return e=new Me({props:{name:"> StackTrace"}}),e.$on("click",n[7]),{c(){t=P("div"),q(e.$$.fragment),this.h()},l(r){t=M(r,"DIV",{style:!0});var o=k(t);Q(e.$$.fragment,o),this.h()},h(){B(t,"display","contents"),B(t,"--margin","5px 10px 5px -10px"),B(t,"--text",s=n[5]?"#1a1a1a":"white"),B(t,"--bg","transparent")},m(r,o){I(r,t,o),J(e,t,null),i=!0},p(r,o){o&32&&s!==(s=r[5]?"#1a1a1a":"white")&&B(t,"--text",s)},i(r){i||($(e.$$.fragment,r),i=!0)},o(r){L(e.$$.fragment,r),i=!1},d(r){r&&v(t),Z(e,r)}}}function qn(n){let e,t,s=n[0].values,i=[];for(let o=0;o<s.length;o+=1)i[o]=Jn(Wn(n,s,o));const r=o=>L(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=ee()},l(o){for(let l=0;l<i.length;l+=1)i[l].l(o);e=ee()},m(o,l){for(let a=0;a<i.length;a+=1)i[a].m(o,l);I(o,e,l),t=!0},p(o,l){if(l&49){s=o[0].values;let a;for(a=0;a<s.length;a+=1){const c=Wn(o,s,a);i[a]?(i[a].p(c,l),$(i[a],1)):(i[a]=Jn(c),i[a].c(),$(i[a],1),i[a].m(e.parentNode,e))}for(te(),a=s.length;a<i.length;a+=1)r(a);se()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)$(i[l]);t=!0}},o(o){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)L(i[l]);t=!1},d(o){Pe(i,o),o&&v(e)}}}function pl(n){let e,t,s,i,r;function o(){return n[9](n[13])}return e=new Me({props:{name:n[13]}}),e.$on("click",o),{c(){t=P("div"),q(e.$$.fragment),this.h()},l(l){t=M(l,"DIV",{style:!0});var a=k(t);Q(e.$$.fragment,a),this.h()},h(){B(t,"display","contents"),B(t,"--margin","5px 10px 5px 0"),B(t,"--text",s=n[5]?"white":"#1a1a1a"),B(t,"--bg",i=n[5]?"#1a1a1a":"white")},m(l,a){I(l,t,a),J(e,t,null),r=!0},p(l,a){n=l,a&32&&s!==(s=n[5]?"white":"#1a1a1a")&&B(t,"--text",s),a&32&&i!==(i=n[5]?"#1a1a1a":"white")&&B(t,"--bg",i);const c={};a&1&&(c.name=n[13]),e.$set(c)},i(l){r||($(e.$$.fragment,l),r=!0)},o(l){L(e.$$.fragment,l),r=!1},d(l){l&&v(t),Z(e,l)}}}function ml(n){let e,t,s,i;function r(){return n[8](n[13])}return{c(){e=P("plant-button"),this.h()},l(o){e=M(o,"PLANT-BUTTON",{name:!0}),k(e).forEach(v),this.h()},h(){He(e,"name",t=n[13])},m(o,l){I(o,e,l),s||(i=X(e,"click",r),s=!0)},p(o,l){n=o,l&1&&t!==(t=n[13])&&He(e,"name",t)},i:F,o:F,d(o){o&&v(e),s=!1,i()}}}function Jn(n){let e,t,s,i,r;const o=[ml,pl],l=[];function a(c,u){return c[4]?0:1}return t=a(n),s=l[t]=o[t](n),{c(){e=P("div"),s.c(),i=j(),this.h()},l(c){e=M(c,"DIV",{class:!0});var u=k(e);s.l(u),i=D(u),u.forEach(v),this.h()},h(){w(e,"class","button-spacer svelte-pmp1k")},m(c,u){I(c,e,u),l[t].m(e,null),y(e,i),r=!0},p(c,u){let h=t;t=a(c),t===h?l[t].p(c,u):(te(),L(l[h],1,1,()=>{l[h]=null}),se(),s=l[t],s?s.p(c,u):(s=l[t]=o[t](c),s.c()),$(s,1),s.m(e,i))},i(c){r||($(s),r=!0)},o(c){L(s),r=!1},d(c){c&&v(e),l[t].d()}}}function vl(n){let e,t,s=n[0]&&Un(n);return{c(){s&&s.c(),e=ee()},l(i){s&&s.l(i),e=ee()},m(i,r){s&&s.m(i,r),I(i,e,r),t=!0},p(i,[r]){i[0]?s?(s.p(i,r),r&1&&$(s,1)):(s=Un(i),s.c(),$(s,1),s.m(e.parentNode,e)):s&&(te(),L(s,1,1,()=>{s=null}),se())},i(i){t||($(s),t=!0)},o(i){L(s),t=!1},d(i){s&&s.d(i),i&&v(e)}}}function gl(n,e,t){let s,i,{toast:r}=e,o=!1,l=!1;function a(){if(r.type===$e.ERROR)return"warning";if(r.type===$e.SUCCESS)return"checkmark";if(r.type===$e.WARNING)return"exclamation"}let c=!1,u;it(()=>{setTimeout(()=>{t(2,o=!0)},10)});const h=()=>{t(3,l=!l)},m=g=>r.resolve(g),d=g=>r.resolve(g),f=()=>r.reject();function p(g){ve[g?"unshift":"push"](()=>{u=g,t(1,u)})}return n.$$set=g=>{"toast"in g&&t(0,r=g.toast)},n.$$.update=()=>{n.$$.dirty&1&&t(6,s=r&&a()),n.$$.dirty&1&&t(5,i=r&&(r.type==="success"||r.type==="warning")),n.$$.dirty&2&&t(4,c=u&&!u.parentElement)},[r,u,o,l,c,i,s,h,m,d,f,p]}class _l extends oe{constructor(e){super();re(this,e,gl,vl,le,{toast:0})}}function Zn(n,e,t){const s=n.slice();return s[4]=e[t],s}function wl(n){let e,t;return e=new _l({props:{toast:n[4]}}),{c(){q(e.$$.fragment)},l(s){Q(e.$$.fragment,s)},m(s,i){J(e,s,i),t=!0},p(s,i){const r={};i&4&&(r.toast=s[4]),e.$set(r)},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function yl(n){let e,t;return{c(){e=P("plant-toast"),this.h()},l(s){e=M(s,"PLANT-TOAST",{toast:!0}),k(e).forEach(v),this.h()},h(){He(e,"toast",t=n[4])},m(s,i){I(s,e,i)},p(s,i){i&4&&t!==(t=s[4])&&He(e,"toast",t)},i:F,o:F,d(s){s&&v(e)}}}function Kn(n,e){let t,s,i,r,o,l;const a=[yl,wl],c=[];function u(h,m){return h[0]?0:1}return s=u(e),i=c[s]=a[s](e),{key:n,first:null,c(){t=P("div"),i.c(),r=j(),this.h()},l(h){t=M(h,"DIV",{});var m=k(t);i.l(m),r=D(m),m.forEach(v),this.h()},h(){this.first=t},m(h,m){I(h,t,m),c[s].m(t,null),y(t,r),l=!0},p(h,m){e=h;let d=s;s=u(e),s===d?c[s].p(e,m):(te(),L(c[d],1,1,()=>{c[d]=null}),se(),i=c[s],i?i.p(e,m):(i=c[s]=a[s](e),i.c()),$(i,1),i.m(t,r))},i(h){l||($(i),mt(()=>{o||(o=Oe(t,ot,{easing:dn},!0)),o.run(1)}),l=!0)},o(h){L(i),o||(o=Oe(t,ot,{easing:dn},!1)),o.run(0),l=!1},d(h){h&&v(t),c[s].d(),h&&o&&o.end()}}}function bl(n){let e,t=[],s=new Map,i,r=n[2];const o=l=>l[4].id;for(let l=0;l<r.length;l+=1){let a=Zn(n,r,l),c=o(a);s.set(c,t[l]=Kn(c,a))}return{c(){e=P("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=M(l,"DIV",{id:!0,class:!0});var a=k(e);for(let c=0;c<t.length;c+=1)t[c].l(a);a.forEach(v),this.h()},h(){w(e,"id","toast-wrapper"),w(e,"class","svelte-1ujlok7")},m(l,a){I(l,e,a);for(let c=0;c<t.length;c+=1)t[c].m(e,null);n[3](e),i=!0},p(l,[a]){a&5&&(r=l[2],te(),t=Ro(t,a,o,1,l,r,s,e,Bo,Kn,null,Zn),se())},i(l){if(!i){for(let a=0;a<r.length;a+=1)$(t[a]);i=!0}},o(l){for(let a=0;a<t.length;a+=1)L(t[a]);i=!1},d(l){l&&v(e);for(let a=0;a<t.length;a+=1)t[a].d();n[3](null)}}}function kl(n,e,t){let s;Ce(n,Gr,l=>t(2,s=l));let i=!1,r;it(function(){t(0,i=!r.parentElement)});function o(l){ve[l?"unshift":"push"](()=>{r=l,t(1,r)})}return[i,r,s,o]}class El extends oe{constructor(e){super();re(this,e,kl,bl,le,{})}}function Sl(n){let e,t,s,i,r,o,l,a,c,u,h;return{c(){e=P("div"),t=P("input"),s=j(),i=P("label"),r=he("svg"),o=he("title"),l=O("cross"),a=he("line"),c=he("line"),this.h()},l(m){e=M(m,"DIV",{class:!0});var d=k(e);t=M(d,"INPUT",{type:!0,id:!0,class:!0}),s=D(d),i=M(d,"LABEL",{class:!0,for:!0});var f=k(i);r=fe(f,"svg",{xmlns:!0,viewBox:!0,class:!0});var p=k(r);o=fe(p,"title",{class:!0});var g=k(o);l=A(g,"cross"),g.forEach(v),a=fe(p,"line",{"vector-effect":!0,x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),k(a).forEach(v),c=fe(p,"line",{"vector-effect":!0,x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),k(c).forEach(v),p.forEach(v),f.forEach(v),d.forEach(v),this.h()},h(){w(t,"type","checkbox"),w(t,"id",n[1]),w(t,"class","svelte-ohv39p"),w(o,"class","svelte-ohv39p"),w(a,"vector-effect","non-scaling-stroke"),w(a,"x1","0"),w(a,"y1","100"),w(a,"x2","100"),w(a,"y2","0"),w(a,"class","svelte-ohv39p"),w(c,"vector-effect","non-scaling-stroke"),w(c,"x1","0"),w(c,"y1","0"),w(c,"x2","100"),w(c,"y2","100"),w(c,"class","svelte-ohv39p"),w(r,"xmlns","http://www.w3.org/2000/svg"),w(r,"viewBox","0 0 100 100"),w(r,"class","svelte-ohv39p"),w(i,"class","checkbox-label svelte-ohv39p"),w(i,"for",n[1]),w(e,"class","component-wrapper svelte-ohv39p")},m(m,d){I(m,e,d),y(e,t),t.checked=n[0],y(e,s),y(e,i),y(i,r),y(r,o),y(o,l),y(r,a),y(r,c),u||(h=X(t,"change",n[2]),u=!0)},p(m,[d]){d&2&&w(t,"id",m[1]),d&1&&(t.checked=m[0]),d&2&&w(i,"for",m[1])},i:F,o:F,d(m){m&&v(e),u=!1,h()}}}function Pl(n,e,t){const s=Ue();let{value:i=!1}=e,{id:r=ss()}=e;function o(){i=this.checked,t(0,i)}return n.$$set=l=>{"value"in l&&t(0,i=l.value),"id"in l&&t(1,r=l.id)},n.$$.update=()=>{n.$$.dirty&1&&i!==void 0&&s("change",!!i)},[i,r,o]}class Ut extends oe{constructor(e){super();re(this,e,Pl,Sl,le,{value:0,id:1})}}function Qn(n,e,t){const s=n.slice();return s[19]=e[t],s[21]=t,s}function ei(n,e,t){const s=n.slice();return s[19]=e[t],s}function ti(n){let e,t,s,i,r;function o(){return n[10](n[19])}return{c(){e=he("circle"),this.h()},l(l){e=fe(l,"circle",{cx:!0,cy:!0,r:!0,class:!0}),k(e).forEach(v),this.h()},h(){w(e,"cx",t=n[19].x*100),w(e,"cy",s=n[19].y*100),w(e,"r","2"),w(e,"class","svelte-tsaxx5"),G(e,"pinned",n[19].pinned)},m(l,a){I(l,e,a),i||(r=X(e,"mousedown",o),i=!0)},p(l,a){n=l,a&1&&t!==(t=n[19].x*100)&&w(e,"cx",t),a&1&&s!==(s=n[19].y*100)&&w(e,"cy",s),a&1&&G(e,"pinned",n[19].pinned)},d(l){l&&v(e),i=!1,r()}}}function Ml(n){let e,t,s,i,r;return{c(){e=he("line"),this.h()},l(o){e=fe(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),k(e).forEach(v),this.h()},h(){w(e,"x1",t=n[3][n[21]-1].x*100),w(e,"y1",s=n[3][n[21]-1].y*100),w(e,"x2",i=n[19].x*100),w(e,"y2",r=n[19].y*100),w(e,"class","svelte-tsaxx5")},m(o,l){I(o,e,l)},p:F,d(o){o&&v(e)}}}function si(n){let e,t,s,i=n[21]>0&&n[21]%2==0&&Ml(n);return{c(){i&&i.c(),e=he("circle"),this.h()},l(r){i&&i.l(r),e=fe(r,"circle",{cx:!0,cy:!0,r:!0,class:!0}),k(e).forEach(v),this.h()},h(){w(e,"cx",t=n[19].x*100),w(e,"cy",s=n[19].y*100),w(e,"r","1"),w(e,"class","svelte-tsaxx5"),G(e,"pinned",n[19].pinned)},m(r,o){i&&i.m(r,o),I(r,e,o)},p(r,o){r[21]>0&&r[21]%2==0&&i.p(r,o)},d(r){i&&i.d(r),r&&v(e)}}}function xl(n){let e,t,s,i,r,o,l=n[0],a=[];for(let h=0;h<l.length;h+=1)a[h]=ti(ei(n,l,h));let c=n[3],u=[];for(let h=0;h<c.length;h+=1)u[h]=si(Qn(n,c,h));return{c(){e=P("div"),t=he("svg"),s=he("path");for(let h=0;h<a.length;h+=1)a[h].c();i=he("g");for(let h=0;h<u.length;h+=1)u[h].c();this.h()},l(h){e=M(h,"DIV",{class:!0});var m=k(e);t=fe(m,"svg",{viewBox:!0,width:!0,height:!0,class:!0});var d=k(t);s=fe(d,"path",{d:!0,fill:!0,stroke:!0,class:!0}),k(s).forEach(v);for(let p=0;p<a.length;p+=1)a[p].l(d);i=fe(d,"g",{id:!0,class:!0});var f=k(i);for(let p=0;p<u.length;p+=1)u[p].l(f);f.forEach(v),d.forEach(v),m.forEach(v),this.h()},h(){w(s,"d",n[2]),w(s,"fill","none"),w(s,"stroke","grey"),w(s,"class","svelte-tsaxx5"),w(i,"id","debug"),w(i,"class","svelte-tsaxx5"),w(t,"viewBox","0 0 100 100"),w(t,"width","100"),w(t,"height","100"),w(t,"class","svelte-tsaxx5"),w(e,"class","component-wrapper svelte-tsaxx5")},m(h,m){I(h,e,m),y(e,t),y(t,s);for(let d=0;d<a.length;d+=1)a[d].m(t,null);y(t,i);for(let d=0;d<u.length;d+=1)u[d].m(i,null);r||(o=[X(t,"mousedown",n[5]),X(t,"mousemove",n[4]),X(t,"mouseover",n[7]),X(t,"mouseout",n[8]),X(t,"mouseup",n[6]),X(t,"focus",n[7]),X(t,"blur",n[8])],r=!0)},p(h,[m]){if(m&4&&w(s,"d",h[2]),m&3){l=h[0];let d;for(d=0;d<l.length;d+=1){const f=ei(h,l,d);a[d]?a[d].p(f,m):(a[d]=ti(f),a[d].c(),a[d].m(t,i))}for(;d<a.length;d+=1)a[d].d(1);a.length=l.length}if(m&8){c=h[3];let d;for(d=0;d<c.length;d+=1){const f=Qn(h,c,d);u[d]?u[d].p(f,m):(u[d]=si(f),u[d].c(),u[d].m(i,null))}for(;d<u.length;d+=1)u[d].d(1);u.length=c.length}},i:F,o:F,d(h){h&&v(e),Pe(a,h),Pe(u,h),r=!1,Je(o)}}}function Nl(n,e,t){let s,i;const r=Ue();let{value:o=[{x:0,y:1,pinned:!0},{x:1,y:0,pinned:!0}]}=e,l=!1,a,c,u=0,h=0,m=[];const d=()=>{requestAnimationFrame(()=>{r("change",s),t(0,s=s.sort((S,C)=>S.x>C.x?-1:1))})},f=S=>{S.pinned||(s.splice(s.indexOf(a),1),d())},p=S=>{l&&(u=S.offsetX,h=S.offsetY,a&&(c=a,t(1,a=void 0)),c&&(c.x=u/100,c.y=h/100,d()))},g=()=>{if(!a){const S={x:u/100,y:h/100,pinned:!1};t(1,a=S),s.push(a),d()}},_=()=>{a&&(f(a),t(1,a=void 0)),c=void 0},N=()=>{l=!0},E=()=>{l=!1};function b(S){const C=pn.points(S.map(V=>[V.x*100,V.y*100]));return pn.svgPath(C)}const x=S=>{t(1,a=S)};return n.$$set=S=>{"value"in S&&t(9,o=S.value)},n.$$.update=()=>{n.$$.dirty&512&&t(0,s=o),n.$$.dirty&1&&t(2,i=b(s))},[s,a,i,m,p,g,_,N,E,o,x]}class $l extends oe{constructor(e){super();re(this,e,Nl,xl,le,{value:9})}}function ni(n){let e,t;return{c(){e=P("span"),this.h()},l(s){e=M(s,"SPAN",{class:!0,style:!0}),k(e).forEach(v),this.h()},h(){w(e,"class","overlay svelte-3lnuwn"),w(e,"style",t=`width: ${(n[0]-n[1])/(n[2]-n[1])*100}%`)},m(s,i){I(s,e,i)},p(s,i){i&7&&t!==(t=`width: ${(s[0]-s[1])/(s[2]-s[1])*100}%`)&&w(e,"style",t)},d(s){s&&v(e)}}}function Il(n){let e,t,s,i,r,o,l,a,c,u,h,m,d=typeof n[1]!="undefined"&&typeof n[2]!="undefined"&&ni(n);return{c(){e=P("div"),d&&d.c(),t=j(),s=P("button"),i=O("-"),r=j(),o=P("input"),a=j(),c=P("button"),u=O("+"),this.h()},l(f){e=M(f,"DIV",{class:!0});var p=k(e);d&&d.l(p),t=D(p),s=M(p,"BUTTON",{class:!0});var g=k(s);i=A(g,"-"),g.forEach(v),r=D(p),o=M(p,"INPUT",{step:!0,max:!0,min:!0,type:!0,style:!0,class:!0}),a=D(p),c=M(p,"BUTTON",{class:!0});var _=k(c);u=A(_,"+"),_.forEach(v),p.forEach(v),this.h()},h(){w(s,"class","svelte-3lnuwn"),w(o,"step",n[3]),w(o,"max",n[2]),w(o,"min",n[1]),w(o,"type","number"),w(o,"style",l=`width:${n[5]};`),w(o,"class","svelte-3lnuwn"),w(c,"class","svelte-3lnuwn"),w(e,"class","component-wrapper svelte-3lnuwn")},m(f,p){I(f,e,p),d&&d.m(e,null),y(e,t),y(e,s),y(s,i),y(e,r),y(e,o),Ne(o,n[0]),n[11](o),y(e,a),y(e,c),y(c,u),h||(m=[X(s,"click",n[9]),X(o,"input",n[10]),X(o,"mousedown",n[7]),X(o,"mouseup",n[8]),X(c,"click",n[12])],h=!0)},p(f,[p]){typeof f[1]!="undefined"&&typeof f[2]!="undefined"?d?d.p(f,p):(d=ni(f),d.c(),d.m(e,t)):d&&(d.d(1),d=null),p&8&&w(o,"step",f[3]),p&4&&w(o,"max",f[2]),p&2&&w(o,"min",f[1]),p&32&&l!==(l=`width:${f[5]};`)&&w(o,"style",l),p&1&&Ct(o.value)!==f[0]&&Ne(o,f[0])},i:F,o:F,d(f){f&&v(e),d&&d.d(),n[11](null),h=!1,Je(m)}}}function Ll(n,e,t){let s,i;const r=Ue();let{min:o=-1/0}=e,{max:l=1/0}=e,{step:a=1}=e,{value:c=0}=e;c||(c=0);let u;function h(S){t(0,c=Math.max(o,Math.min(+c+S,l)))}let m=0,d=0,f;function p(S){S.preventDefault(),d=c,m=S.clientX,f=u.getBoundingClientRect(),window.removeEventListener("mousemove",_),window.addEventListener("mousemove",_),window.addEventListener("mouseup",g),document.body.style.cursor="ew-resize"}function g(){d===c?u.focus():u.blur(),document.body.style.cursor="unset",window.removeEventListener("mouseup",g),window.removeEventListener("mousemove",_)}function _(S){if(s){const C=(S.clientX-f.left)/f.width;t(0,c=Math.max(Math.min(Math.floor(o+(l-o)*C),l),o))}else{const C=S.clientX-m;t(0,c=d+Math.floor(C/10))}}const N=()=>h(-a);function E(){c=Ct(this.value),t(0,c)}function b(S){ve[S?"unshift":"push"](()=>{u=S,t(4,u)})}const x=()=>h(+a);return n.$$set=S=>{"min"in S&&t(1,o=S.min),"max"in S&&t(2,l=S.max),"step"in S&&t(3,a=S.step),"value"in S&&t(0,c=S.value)},n.$$.update=()=>{var S;n.$$.dirty&6&&(s=typeof o!="undefined"&&typeof l!="undefined"&&Number.isFinite(o)&&Number.isFinite(l)),n.$$.dirty&1&&c!==void 0&&r("change",parseFloat(c+"")),n.$$.dirty&1&&t(5,i=Number.isFinite(c)?Math.max(((S=c==null?void 0:c.toString().length)!=null?S:1)*8,30)+"px":"20px")},[c,o,l,a,u,i,h,p,g,N,E,b,x]}class Tl extends oe{constructor(e){super();re(this,e,Ll,Il,le,{min:1,max:2,step:3,value:0})}get min(){return this.$$.ctx[1]}set min(e){this.$$set({min:e}),Dt()}get max(){return this.$$.ctx[2]}set max(e){this.$$set({max:e}),Dt()}get step(){return this.$$.ctx[3]}set step(e){this.$$set({step:e}),Dt()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),Dt()}}function Vl(n){let e,t,s,i,r,o,l,a;return{c(){e=P("div"),t=P("span"),i=j(),r=P("input"),this.h()},l(c){e=M(c,"DIV",{class:!0});var u=k(e);t=M(u,"SPAN",{class:!0,style:!0}),k(t).forEach(v),i=D(u),r=M(u,"INPUT",{step:!0,max:!0,min:!0,type:!0,style:!0,class:!0}),u.forEach(v),this.h()},h(){w(t,"class","overlay svelte-2vvjq7"),w(t,"style",s=`width: ${(n[0]-n[1])/(n[2]-n[1])*100}%`),w(r,"step",n[3]),w(r,"max",n[2]),w(r,"min",n[1]),w(r,"type","number"),w(r,"style",o=`width:${n[6]};`),w(r,"class","svelte-2vvjq7"),w(e,"class","component-wrapper svelte-2vvjq7"),G(e,"is-down",n[5])},m(c,u){I(c,e,u),y(e,t),y(e,i),y(e,r),Ne(r,n[0]),n[10](r),l||(a=[X(r,"input",n[9]),X(r,"mousedown",n[7]),X(r,"mouseup",n[8])],l=!0)},p(c,[u]){u&7&&s!==(s=`width: ${(c[0]-c[1])/(c[2]-c[1])*100}%`)&&w(t,"style",s),u&8&&w(r,"step",c[3]),u&4&&w(r,"max",c[2]),u&2&&w(r,"min",c[1]),u&64&&o!==(o=`width:${c[6]};`)&&w(r,"style",o),u&1&&Ct(r.value)!==c[0]&&Ne(r,c[0]),u&32&&G(e,"is-down",c[5])},i:F,o:F,d(c){c&&v(e),n[10](null),l=!1,Je(a)}}}function jl(n){return parseFloat(n).toPrecision(2)}function Dl(n,e,t){let s,{value:i=.5}=e,{step:r=.01}=e,{min:o=0}=e,{max:l=1}=e;const a=Ue();let c,u=!1,h=0,m=0,d=0,f;function p(b){b.preventDefault(),t(5,u=!0),m=i,h=b.clientY,f=c.getBoundingClientRect(),window.removeEventListener("mousemove",_),window.addEventListener("mousemove",_),window.addEventListener("mouseup",g),document.body.style.cursor="ew-resize"}function g(){t(5,u=!1),m===i&&c.focus(),i<o&&t(1,o=i),i>l&&t(2,l=i),document.body.style.cursor="unset",window.removeEventListener("mouseup",g),window.removeEventListener("mousemove",_)}function _(b){if(d=(b.clientX-f.left)/f.width,b.clientY-h,b.ctrlKey){let x=o+(l-o)*d;t(0,i=x)}else t(1,o=0),t(2,l=1),t(0,i=Math.max(Math.min(o+(l-o)*d,l),o))}function N(){i=Ct(this.value),t(0,i)}function E(b){ve[b?"unshift":"push"](()=>{c=b,t(4,c)})}return n.$$set=b=>{"value"in b&&t(0,i=b.value),"step"in b&&t(3,r=b.step),"min"in b&&t(1,o=b.min),"max"in b&&t(2,l=b.max)},n.$$.update=()=>{var b;n.$$.dirty&1&&(i||0).toString().length>5&&t(0,i=jl(i||0)),n.$$.dirty&1&&i!==void 0&&a("change",parseFloat(i+"")),n.$$.dirty&1&&t(6,s=Number.isFinite(i)?Math.max(((b=i==null?void 0:i.toString().length)!=null?b:1)*8,50)+"px":"20px")},[i,o,l,r,c,u,s,p,g,N,E]}class Cl extends oe{constructor(e){super();re(this,e,Dl,Vl,le,{value:0,step:3,min:1,max:2})}}function ii(n,e,t){const s=n.slice();return s[11]=e[t],s}function Ol(n){let e,t,s,i;return{c(){e=P("div"),t=O("none"),this.h()},l(r){e=M(r,"DIV",{id:!0,class:!0});var o=k(e);t=A(o,"none"),o.forEach(v),this.h()},h(){w(e,"id","selected-value"),w(e,"class","svelte-1ywe9t")},m(r,o){I(r,e,o),y(e,t),s||(i=X(e,"click",n[4]),s=!0)},p:F,d(r){r&&v(e),s=!1,i()}}}function Al(n){let e,t,s,i;return{c(){e=P("div"),t=O(n[0]),this.h()},l(r){e=M(r,"DIV",{id:!0,class:!0});var o=k(e);t=A(o,n[0]),o.forEach(v),this.h()},h(){w(e,"id","selected-value"),w(e,"class","svelte-1ywe9t")},m(r,o){I(r,e,o),y(e,t),s||(i=X(e,"click",n[4]),s=!0)},p(r,o){o&1&&ue(t,r[0])},d(r){r&&v(e),s=!1,i()}}}function oi(n){let e,t=n[11]+"",s,i,r,o,l;function a(){return n[8](n[11])}return{c(){e=P("p"),s=O(t),i=j(),this.h()},l(c){e=M(c,"P",{style:!0,class:!0});var u=k(e);s=A(u,t),i=D(u),u.forEach(v),this.h()},h(){w(e,"style",r=`opacity: ${n[11]===n[0]?.5:1}`),w(e,"class","item svelte-1ywe9t")},m(c,u){I(c,e,u),y(e,s),y(e,i),o||(l=X(e,"click",a),o=!0)},p(c,u){n=c,u&2&&t!==(t=n[11]+"")&&ue(s,t),u&3&&r!==(r=`opacity: ${n[11]===n[0]?.5:1}`)&&w(e,"style",r)},d(c){c&&v(e),o=!1,l()}}}function ri(n){let e,t=n[11]!==n[0]&&oi(n);return{c(){t&&t.c(),e=ee()},l(s){t&&t.l(s),e=ee()},m(s,i){t&&t.m(s,i),I(s,e,i)},p(s,i){s[11]!==s[0]?t?t.p(s,i):(t=oi(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(s){t&&t.d(s),s&&v(e)}}}function Rl(n){let e,t,s,i;function r(u,h){return u[0]!==void 0?Al:Ol}let o=r(n),l=o(n),a=n[1],c=[];for(let u=0;u<a.length;u+=1)c[u]=ri(ii(n,a,u));return{c(){e=P("div"),t=P("div"),l.c(),s=j(),i=P("div");for(let u=0;u<c.length;u+=1)c[u].c();this.h()},l(u){e=M(u,"DIV",{class:!0});var h=k(e);t=M(h,"DIV",{id:!0,class:!0});var m=k(t);l.l(m),s=D(m),i=M(m,"DIV",{id:!0,class:!0});var d=k(i);for(let f=0;f<c.length;f+=1)c[f].l(d);d.forEach(v),m.forEach(v),h.forEach(v),this.h()},h(){w(i,"id","item-wrapper"),w(i,"class","svelte-1ywe9t"),w(t,"id","main"),w(t,"class","svelte-1ywe9t"),w(e,"class","component-wrapper svelte-1ywe9t"),G(e,"open",n[2])},m(u,h){I(u,e,h),y(e,t),l.m(t,null),y(t,s),y(t,i);for(let m=0;m<c.length;m+=1)c[m].m(i,null);n[9](t)},p(u,[h]){if(o===(o=r(u))&&l?l.p(u,h):(l.d(1),l=o(u),l&&(l.c(),l.m(t,s))),h&35){a=u[1];let m;for(m=0;m<a.length;m+=1){const d=ii(u,a,m);c[m]?c[m].p(d,h):(c[m]=ri(d),c[m].c(),c[m].m(i,null))}for(;m<c.length;m+=1)c[m].d(1);c.length=a.length}h&4&&G(e,"open",u[2])},i:F,o:F,d(u){u&&v(e),l.d(),Pe(c,u),n[9](null)}}}function Bl(n,e,t){const s=Ue();let{value:i=void 0}=e,r=!1,o;function l(){t(2,r=!0),setTimeout(()=>{document.addEventListener("click",()=>{t(2,r=!1)},{once:!0})},50)}function a(f){t(0,i=f),t(2,r=!1)}let{values:c=[]}=e;function u(f){t(1,c=f)}function h(f){t(0,i=f)}const m=f=>a(f);function d(f){ve[f?"unshift":"push"](()=>{o=f,t(3,o)})}return n.$$set=f=>{"value"in f&&t(0,i=f.value),"values"in f&&t(1,c=f.values)},n.$$.update=()=>{n.$$.dirty&1&&i&&s("change",i)},[i,c,r,o,l,a,u,h,m,d]}class zl extends oe{constructor(e){super();re(this,e,Bl,Rl,le,{value:0,values:1,setItems:6,setValue:7})}get setItems(){return this.$$.ctx[6]}get setValue(){return this.$$.ctx[7]}}function li(n,e,t){const s=n.slice();return s[19]=e[t],s}function ai(n){let e,t,s,i,r;function o(){return n[9](n[19])}return{c(){e=he("circle"),this.h()},l(l){e=fe(l,"circle",{cx:!0,cy:!0,r:!0,class:!0}),k(e).forEach(v),this.h()},h(){w(e,"cx",t=n[19].x*100),w(e,"cy",s=n[19].y*200-50),w(e,"r","4"),w(e,"class","svelte-vrnf7c"),G(e,"pinned",n[19].pinned)},m(l,a){I(l,e,a),i||(r=X(e,"mousedown",o),i=!0)},p(l,a){n=l,a&1&&t!==(t=n[19].x*100)&&w(e,"cx",t),a&1&&s!==(s=n[19].y*200-50)&&w(e,"cy",s),a&1&&G(e,"pinned",n[19].pinned)},d(l){l&&v(e),i=!1,r()}}}function Fl(n){let e,t,s,i,r,o,l,a,c,u,h,m,d=n[0],f=[];for(let p=0;p<d.length;p+=1)f[p]=ai(li(n,d,p));return{c(){e=P("div"),t=he("svg"),s=he("path");for(let p=0;p<f.length;p+=1)f[p].c();i=j(),r=he("svg"),o=he("defs"),l=he("linearGradient"),a=he("stop"),c=he("stop"),u=he("path"),this.h()},l(p){e=M(p,"DIV",{class:!0});var g=k(e);t=fe(g,"svg",{viewBox:!0,width:!0,height:!0,class:!0});var _=k(t);s=fe(_,"path",{d:!0,fill:!0,stroke:!0,class:!0}),k(s).forEach(v);for(let x=0;x<f.length;x+=1)f[x].l(_);_.forEach(v),i=D(g),r=fe(g,"svg",{id:!0,viewBox:!0,width:!0,height:!0,class:!0});var N=k(r);o=fe(N,"defs",{class:!0});var E=k(o);l=fe(E,"linearGradient",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0,class:!0});var b=k(l);a=fe(b,"stop",{offset:!0,style:!0,class:!0}),k(a).forEach(v),c=fe(b,"stop",{offset:!0,style:!0,class:!0}),k(c).forEach(v),b.forEach(v),E.forEach(v),u=fe(N,"path",{d:!0,fill:!0,stroke:!0,class:!0}),k(u).forEach(v),N.forEach(v),g.forEach(v),this.h()},h(){w(s,"d",n[2]),w(s,"fill","none"),w(s,"stroke","#65E2A0"),w(s,"class","svelte-vrnf7c"),w(t,"viewBox","0 0 100 100"),w(t,"width","50"),w(t,"height","100"),w(t,"class","svelte-vrnf7c"),w(a,"offset","0%"),B(a,"stop-color","#65E2A0"),B(a,"stop-opacity","1"),w(a,"class","svelte-vrnf7c"),w(c,"offset","100%"),B(c,"stop-color","#469C6E"),B(c,"stop-opacity","1"),w(c,"class","svelte-vrnf7c"),w(l,"id","grad1"),w(l,"x1","0%"),w(l,"y1","0%"),w(l,"x2","100%"),w(l,"y2","0%"),w(l,"class","svelte-vrnf7c"),w(o,"class","svelte-vrnf7c"),w(u,"d",n[2]),w(u,"fill","url(#grad1)"),w(u,"stroke","grey"),w(u,"class","svelte-vrnf7c"),w(r,"id","right"),w(r,"viewBox","0 0 100 100"),w(r,"width","50"),w(r,"height","100"),w(r,"class","svelte-vrnf7c"),w(e,"class","component-wrapper svelte-vrnf7c")},m(p,g){I(p,e,g),y(e,t),y(t,s);for(let _=0;_<f.length;_+=1)f[_].m(t,null);y(e,i),y(e,r),y(r,o),y(o,l),y(l,a),y(l,c),y(r,u),h||(m=[X(t,"mousedown",n[4]),X(t,"mousemove",n[3]),X(t,"mouseover",n[6]),X(t,"mouseout",n[7]),X(t,"mouseup",n[5]),X(t,"focus",n[6]),X(t,"blur",n[7])],h=!0)},p(p,[g]){if(g&4&&w(s,"d",p[2]),g&3){d=p[0];let _;for(_=0;_<d.length;_+=1){const N=li(p,d,_);f[_]?f[_].p(N,g):(f[_]=ai(N),f[_].c(),f[_].m(t,null))}for(;_<f.length;_+=1)f[_].d(1);f.length=d.length}g&4&&w(u,"d",p[2])},i:F,o:F,d(p){p&&v(e),Pe(f,p),h=!1,Je(m)}}}function Wl(n,e,t){let s,i;const r=Ue();let{value:o=[{x:1,y:0,pinned:!0},{x:.5,y:.5,pinned:!0},{x:1,y:1,pinned:!0}]}=e,l=!1,a,c,u=0,h=0;const m=()=>{requestAnimationFrame(()=>{r("change",s),t(0,s=s.sort((S,C)=>S.y>C.y?-1:1))})},d=S=>{S.pinned||(s.splice(s.indexOf(a),1),m())},f=S=>{l&&(u=S.offsetX,h=S.offsetY,a&&(c=a,t(1,a=void 0)),c&&(c.x=u/50,c.y=h/100,m()))},p=()=>{if(!a){const S={x:u/50,y:h/100,pinned:!1};t(1,a=S),s.push(a),m()}},g=()=>{a&&(d(a),t(1,a=void 0)),c=void 0},_=()=>{l=!0},N=()=>{l=!1},E=S=>`L ${S.x*100} ${S.y*200-50}`;function b(S){return S.reduce((C,V,Y)=>Y===0?`M ${V.x*100},${V.y*200-50}`:`${C} ${E(V)}`,"")}const x=S=>{t(1,a=S)};return n.$$set=S=>{"value"in S&&t(8,o=S.value)},n.$$.update=()=>{n.$$.dirty&256&&t(0,s=o),n.$$.dirty&1&&t(2,i=b(s))},[s,a,i,f,p,g,_,N,o,x]}class Ul extends oe{constructor(e){super();re(this,e,Wl,Fl,le,{value:8})}}function ci(n,e,t){const s=n.slice();return s[21]=e[t],s[23]=t,s}function ui(n){let e,t=(n[21].title||n[21].value)+"",s,i,r,o;function l(){return n[14](n[21])}function a(){return n[15](n[21])}function c(){return n[16](n[21])}return{c(){e=P("div"),s=O(t),i=j(),this.h()},l(u){e=M(u,"DIV",{class:!0});var h=k(e);s=A(h,t),i=D(h),h.forEach(v),this.h()},h(){w(e,"class","search-entry svelte-779fwr"),G(e,"focused",n[21].value===n[3])},m(u,h){I(u,e,h),y(e,s),y(e,i),r||(o=[X(e,"focus",l),X(e,"mouseover",a),X(e,"click",c)],r=!0)},p(u,h){n=u,h&16&&t!==(t=(n[21].title||n[21].value)+"")&&ue(s,t),h&24&&G(e,"focused",n[21].value===n[3])},d(u){u&&v(e),r=!1,Je(o)}}}function hi(n){let e,t=n[23]<n[0]&&ui(n);return{c(){t&&t.c(),e=ee()},l(s){t&&t.l(s),e=ee()},m(s,i){t&&t.m(s,i),I(s,e,i)},p(s,i){s[23]<s[0]?t?t.p(s,i):(t=ui(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(s){t&&t.d(s),s&&v(e)}}}function Hl(n){let e,t,s,i,r,o=n[4],l=[];for(let a=0;a<o.length;a+=1)l[a]=hi(ci(n,o,a));return{c(){e=P("div"),t=P("input"),s=j();for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=M(a,"DIV",{class:!0});var c=k(e);t=M(c,"INPUT",{type:!0,placeholder:!0,class:!0}),s=D(c);for(let u=0;u<l.length;u+=1)l[u].l(c);c.forEach(v),this.h()},h(){w(t,"type","text"),w(t,"placeholder","Search"),w(t,"class","svelte-779fwr"),w(e,"class","search-wrapper svelte-779fwr")},m(a,c){I(a,e,c),y(e,t),n[12](t),Ne(t,n[1]),y(e,s);for(let u=0;u<l.length;u+=1)l[u].m(e,null);i||(r=[X(window,"keydown",n[6]),X(t,"input",n[13])],i=!0)},p(a,[c]){if(c&2&&t.value!==a[1]&&Ne(t,a[1]),c&185){o=a[4];let u;for(u=0;u<o.length;u+=1){const h=ci(a,o,u);l[u]?l[u].p(h,c):(l[u]=hi(h),l[u].c(),l[u].m(e,null))}for(;u<l.length;u+=1)l[u].d(1);l.length=o.length}},i:F,o:F,d(a){a&&v(e),n[12](null),Pe(l,a),i=!1,Je(r)}}}function Gl(n,e,t){let s,i;const r=Ue(),o={};let{limitAmount:l=10}=e,{values:a=[]}=e,c,u="";function h(V,Y){if(!(Y==null?void 0:Y.length))return V;const W=V.filter(U=>!!(U.value.includes(Y)||U.title&&U.title.toLowerCase().includes(Y)));return W.length?(W.find(U=>U.value===i)||t(3,i=W[0].value),W):[{value:"Nothing Found"}]}function m(){c.focus()}function d(){t(1,u="")}function f({value:V=i}={value:i}){o[V]=o[V]+1||1,r("input",V)}function p(V){if(!i.length){t(3,i=s[0].value);return}const Y=s.slice(0,l).find(ne=>ne.value===i);if(!Y)return;const W=s.indexOf(Y),ie=Math.min(s.length,l),U=((W+V)%ie+ie)%ie;t(3,i=s[U].value)}function g({key:V}){V==="Enter"&&i.length&&f(),V==="ArrowDown"&&p(1),V==="ArrowUp"&&p(-1)}function _(V){t(3,i=V.value)}const N=V=>{t(8,a=V)};function E(V){ve[V?"unshift":"push"](()=>{c=V,t(2,c)})}function b(){u=this.value,t(1,u)}const x=V=>_(V),S=V=>_(V),C=V=>f(V);return n.$$set=V=>{"limitAmount"in V&&t(0,l=V.limitAmount),"values"in V&&t(8,a=V.values)},n.$$.update=()=>{n.$$.dirty&258&&t(4,s=h(a,u.toLowerCase()))},t(3,i=""),[l,u,c,i,s,f,g,_,a,m,d,N,E,b,x,S,C]}class Yl extends oe{constructor(e){super();re(this,e,Gl,Hl,le,{limitAmount:0,values:8,focus:9,clear:10,setItems:11})}get focus(){return this.$$.ctx[9]}get clear(){return this.$$.ctx[10]}get setItems(){return this.$$.ctx[11]}}function fi(n){let e,t,s;return{c(){e=P("div"),t=P("p"),s=O(n[1]),this.h()},l(i){e=M(i,"DIV",{class:!0});var r=k(e);t=M(r,"P",{class:!0});var o=k(t);s=A(o,n[1]),o.forEach(v),r.forEach(v),this.h()},h(){w(t,"class","svelte-1aw08v2"),w(e,"class","border svelte-1aw08v2")},m(i,r){I(i,e,r),y(e,t),y(t,s)},p(i,r){r&2&&ue(s,i[1])},d(i){i&&v(e)}}}function Xl(n){let e,t,s,i,r,o,l,a,c,u,h=n[1]&&fi(n);const m=n[4].default,d=sn(m,n,n[3],null);return{c(){e=P("div"),t=P("div"),s=he("svg"),i=he("path"),r=j(),h&&h.c(),o=j(),l=P("div"),d&&d.c(),this.h()},l(f){e=M(f,"DIV",{class:!0});var p=k(e);t=M(p,"DIV",{class:!0});var g=k(t);s=fe(g,"svg",{xmlns:!0,viewBox:!0,width:!0,height:!0,class:!0});var _=k(s);i=fe(_,"path",{d:!0,class:!0}),k(i).forEach(v),_.forEach(v),r=D(g),h&&h.l(g),g.forEach(v),o=D(p),l=M(p,"DIV",{class:!0});var N=k(l);d&&d.l(N),N.forEach(v),p.forEach(v),this.h()},h(){w(i,"d","M13.172 12l-4.95-4.95 1.414-1.414L16 12l-6.364 6.364-1.414-1.414z"),w(i,"class","svelte-1aw08v2"),w(s,"xmlns","http://www.w3.org/2000/svg"),w(s,"viewBox","0 0 24 24"),w(s,"width","24"),w(s,"height","24"),w(s,"class","svelte-1aw08v2"),w(t,"class","header svelte-1aw08v2"),w(l,"class","content svelte-1aw08v2"),w(e,"class","wrapper svelte-1aw08v2"),G(e,"open",n[0])},m(f,p){I(f,e,p),y(e,t),y(t,s),y(s,i),y(t,r),h&&h.m(t,null),y(e,o),y(e,l),d&&d.m(l,null),a=!0,c||(u=X(t,"click",n[2]),c=!0)},p(f,[p]){f[1]?h?h.p(f,p):(h=fi(f),h.c(),h.m(t,null)):h&&(h.d(1),h=null),d&&d.p&&(!a||p&8)&&nn(d,m,f,f[3],a?rn(m,f[3],p,null):on(f[3]),null),p&1&&G(e,"open",f[0])},i(f){a||($(d,f),a=!0)},o(f){L(d,f),a=!1},d(f){f&&v(e),h&&h.d(),d&&d.d(f),c=!1,u()}}}function ql(n,e,t){let{$$slots:s={},$$scope:i}=e;const r=Ue();let{open:o=!1}=e,{name:l=""}=e;const a=()=>{t(0,o=!o),r("toggle",o)};return n.$$set=c=>{"open"in c&&t(0,o=c.open),"name"in c&&t(1,l=c.name),"$$scope"in c&&t(3,i=c.$$scope)},[o,l,a,i,s]}class ds extends oe{constructor(e){super();re(this,e,ql,Xl,le,{open:0,name:1})}}function Jl({target:n,template:e,value:t}){t===void 0&&"value"in e&&(t=e.value);const s=ps(e,t),i=ce({},e);return delete i.type,delete i.inputType,delete i.defaultValue,delete i.internal,i.value=t,new s({target:n,props:De(ce({},i),{"--width":"100%"})})}function ps(n,e){return n.inputType==="select"||Array.isArray(n.values)?zl:n.inputType==="curve"?$l:n.inputType==="shape"?Ul:n.type==="number"||typeof e=="number"?n.step&&n.step%1!=0?Cl:Tl:Ut}function Zl(n){const e=2*Math.PI/n;return new Array(n).fill(null).map((t,s)=>[Math.cos(e*s),Math.sin(e*s)])}function Kl(n,e=1){const t=new Uint16Array(n*(Math.max(e,1)-1)*6);for(let s=0;s<e;s++){const i=s*n*6,r=s*n;for(let o=0;o<n;o++){const l=i+o*6,a=r+o;t[l+0]=a,t[l+1]=a-n+1,t[l+2]=a+1,t[l+3]=a+1,t[l+4]=a+n,t[l+5]=a,o===n-1?(t[l+0]=a,t[l+1]=a-n+1,t[l+2]=a+1,t[l+3]=a+1,t[l+4]=a+n,t[l+5]=a):(t[l+0]=a,t[l+1]=a+1,t[l+2]=a+n+1,t[l+3]=a+n+1,t[l+4]=a+n,t[l+5]=a)}}return t}function Ql(n,e){const t=[],s=[],i=[],r={position:[],index:Kl(e,n.length)},o=Zl(e),l=o.length,a=n.length;for(let c=0;c<a;c++){const u=[0,0,1];c===0?ns(s,n[c],n[c+1]):c===a-1?ns(s,n[c-1],n[c]):ns(s,n[c-1],n[c+1]),zo(s,s),Fo(i,u,s);const h=Math.acos(Wo(u,s));Uo(t),Ho(t,t,h,i);for(let m=0;m<l;m++){const d=o[m],f=[d[0],d[1],0],p=n[c][3];Go(f,f,[p,p,1]),Yo(f,f,t),Xo(f,f,n[c]),r.position.push(f)}}return r}function kt(n,e,t){return n*(1-t)+e*t}function ea(n,e=0){const t=(n.length-1)*e,s=Math.floor(t),i=Math.ceil(t);return kt(n[i],n[s],i-t)}function di(n,e){const t=(n.length/4-1)*e,s=Math.floor(t),i=Math.ceil(t),r=i-t;return[kt(n[i*4+0],n[s*4+0],r),kt(n[i*4+1],n[s*4+1],r),kt(n[i*4+2],n[s*4+2],r),kt(n[i*4+3],n[s*4+3],r)]}function pi(n,e){const t=(n.length/4-1)*e,s=Math.floor(t),i=Math.ceil(t);return[n[i*4+0]-n[s*4+0],n[i*4+1]-n[s*4+1],n[i*4+2]-n[s*4+2],n[i*4+3]+n[s*4+3]/2]}function ms(...n){if(n.length===1)return n[0];const e=new Float32Array(n.reduce((u,h)=>u+h.position.length,0)),t=new Float32Array(n.reduce((u,h)=>u+h.normal.length,0)),s=new Float32Array(n.reduce((u,h)=>u+h.uv.length,0)),i=n.reduce((u,h)=>u+h.index.length,0),r=i>65536?new Uint32Array(i):new Uint16Array(i);let o=0,l=0,a=0,c=0;for(let u=0;u<n.length;u++){const h=n[u].normal,m=h.length;for(let E=0;E<m;E++)t[l+E]=h[E];l+=m;const d=n[u].uv,f=d.length;for(let E=0;E<f;E++)s[a+E]=d[E];a+=f;const p=n[u].index,g=p.length;for(let E=0;E<g;E++)r[E+c]=p[E]+o/3;c+=g;const _=n[u].position,N=_.length;for(let E=0;E<N;E++)e[o+E]=_[E];o+=N}return{position:e,normal:t,uv:s,index:r}}var ta=(n,e)=>Math.sqrt(n*n+e*e),sa=(n,e,t)=>Math.sqrt(n*n+e*e+t*t);let at=0,vs=Ot.makeNoise2D(at),mi=Ot.makeNoise3D(at);var gs={n1d:n=>vs(n,0),n2d:(n,e)=>vs(n,e),n3d:(n,e,t)=>mi(n,e,t),get seed(){return at},set seed(n){at=n,vs=Ot.makeNoise2D(at),mi=Ot.makeNoise3D(at)}},vi=([n,e])=>{const t=ta(n,e);return t===0?[1,0]:[n/t,e/t]},na=(n,e,t)=>{const s=sa(n,e,t);return[n/s,e/s,t/s]},gi=(n,e,t)=>[n*Math.cos(t)-e*Math.sin(t),n*Math.sin(t)+e*Math.cos(t)];function _s(n,e,t){const[s,i,r]=n,[o,l,a]=na(e[0],e[1],e[2]),c=Math.cos(t),u=Math.sin(t);return new et((c+(1-c)*o*o)*s+((1-c)*o*l-a*u)*i+((1-c)*o*a+l*u)*r,((1-c)*o*l+a*u)*s+(c+(1-c)*l*l)*i+((1-c)*l*a-o*u)*r,((1-c)*o*a-l*u)*s+((1-c)*l*a+o*u)*i+(c+(1-c)*a*a)*r)}function ws(n,e){return new vt(n,{position:{size:3,data:e.position},normal:{size:3,data:e.normal},uv:{size:2,data:e.uv},index:{data:e.index}})}const ia=100,ys=2,_i=1;function oa(n=1,e=12,t=12){const s=360*(Math.PI/180)/t,i=e*t+1,r=(e-1)*t*2+t,o=new Float32Array(i*3),l=new Float32Array(i*3),a=new Float32Array(i*2),c=new Uint16Array(r*3);o[0]=0,o[1]=1-_i,o[2]=0,l[0]=0,l[1]=1,l[2]=0,a[0]=.5,a[1]=.5;const u=new Array(e-1).fill(null).map((m,d,f)=>n+d/(f.length-1)*ys);u.push(ia);const h=u.map(m=>{const d=(Math.max(Math.min(m,n+ys),n)-n)/ys;return Math.sin((d+.5)*Math.PI)/2+.5-_i});for(let m=0;m<e;m++){const d=u[m],f=h[m];for(let p=0;p<t;p++){const g=s*p,_=Math.cos(g)*d,N=f,E=Math.sin(g)*d,x=m*t+p+1;if(o[x*3+0]=_,o[x*3+1]=N,o[x*3+2]=E,l[x*3+0]=0,l[x*3+1]=1,l[x*3+2]=0,a[x*2+0]=_,a[x*2+1]=E,m===0){const S=(x-1)*3;c[S+0]=0,c[S+1]=(p+1)%t+1,c[S+2]=p+1}else if(p===t-1){const S=m*t*6+p*6-t*3;c[S+0]=x,c[S+1]=x+1-t-t,c[S+2]=x+1-t,c[S+3]=x,c[S+4]=x-t,c[S+5]=x+1-t*2}else{const S=m*t*6+p*6-t*3;c[S+0]=x,c[S+1]=x+1-t,c[S+2]=x+1,c[S+3]=x,c[S+4]=x-t,c[S+5]=x+1-t}}}return{position:o,normal:l,uv:a,index:c}}function ra(n,{res:e=1,xCurvature:t=.5,yCurvature:s=.2}={}){const i=n.length,r=3+e*2,o=r*i,l=(r-1)*(i-1)*2,a=new Float32Array(o*3),c=new Float32Array(o*2),u=new Float32Array(o*2),h=new Uint16Array(l*3);return n.forEach((m,d)=>{const f=d*r;for(let p=0;p<r;p++){const g=2-p/(r-1)*2-1;a[f*3+p*3+0]=(m.x-1)*g*.5;const _=-(1-m.y)*(1-m.y)*.5,N=Math.sin(Math.abs(g)*Math.PI)*.01;if(a[f*3+p*3+1]=N*t+_*s,a[f*3+p*3+2]=m.y-1,u[f*2+p*2+0]=a[f*3+p*3+0]+1/2,u[f*2+p*2+1]=a[f*3+p*3+2],d<n.length-1){const E=d*(r-1);h[E*6+p*6+0]=f+p+0,h[E*6+p*6+1]=f+p+1,h[E*6+p*6+2]=f+p+r,h[E*6+p*6+3]=f+p+1,h[E*6+p*6+4]=f+p+r,h[E*6+p*6+5]=f+p+r+1}}}),{position:a,normal:c,index:h,uv:u}}function wi(n,e=8){const t=el(n,4),s=Ql(t,e);return{position:Float32Array.from(s.position.map(r=>r.splice(0,3)).flat()),index:s.index,normal:new Float32Array,uv:new Float32Array}}const la={title:"Branches",type:"branches",outputs:["plant"],parameters:{input:{type:"plant",label:"plant",external:!0},length:{type:["number","parameter","curve"],min:0,max:3,step:.05,value:.8},thiccness:{type:"number",min:0,max:1,step:.01,value:.8},offsetSingle:{type:"number",min:0,max:1,step:.01,value:.5},lowestBranch:{type:"number",min:0,max:1,step:.01,value:.2},amount:{type:"number",min:0,max:64,value:10}},computeSkeleton(n,e){const{skeletons:t}=n.input.result,s=e.getSetting("stemResY"),i=t.map(r=>{const o=[],l=e.handleParameter(n.amount),a=e.handleParameter(n.lowestBranch);for(let c=0;c<l;c++){const u=c/l,h=e.handleParameter(n.length,u)*(1-u),m=e.handleParameter(n.thiccness,u),d=e.handleParameter(n.offsetSingle,u),f=c%2==0;let p=a+(1-a)*u;p-=1/l*d*(f?-1:1);const[g,,_]=pi(r,p),N=vi([g,_]),[E,b]=gi(N[0],N[1],f?-Math.PI/2:Math.PI/2),[x,S,C,V]=di(r,p),Y=Math.max(Math.floor(s*h*10),4),W=new Float32Array(Y*4);for(let ie=0;ie<Y*4;ie++){const U=ie/Y;W[ie*4+0]=x+E*U*h,W[ie*4+1]=S,W[ie*4+2]=C+b*U*h,W[ie*4+3]=V*m*(1-U)}o.push(W)}return o}).flat();return{skeletons:i,allSkeletons:[...i,...t]}},computeGeometry(n,e,t){const s=t.getSetting("stemResX"),{geometry:i}=n.input.result,{skeletons:r}=e;return{geometry:ms(i,...r.map(o=>wi(o,s)))}}},aa={title:"Random",type:"random",outputs:["number"],parameters:{min:{type:"number",value:0,inputType:"slider",min:0,max:1,step:.05},max:{type:"number",inputType:"slider",value:1,min:0,max:1,step:.05}},computeValue(n,e){const{min:t=0,max:s=1}=n;return s?t+e.n1dn(200)*Math.abs(s-t):0}},ca={title:"Curve",type:"curve",outputs:["number"],parameters:{value:{type:"curve",inputType:"curve",internal:!0,label:!1,value:[{x:0,y:1,pinned:!0},{x:1,y:0,pinned:!0}]}},computeValue(n,e,t){const s=Jr(n.value).map(i=>i.y);return ea(s,1-t)}},ua={title:"Gravity",type:"gravity",outputs:["plant"],parameters:{input:{type:"plant",external:!0},type:{internal:!0,type:"select",values:["simple","verlet","test"]},strength:{type:"number",inputType:"slider",min:0,max:2,step:.05}},computeSkeleton(n,e){const{input:t,type:s,strength:i}=n,{skeletons:r}=t.result;return s==="simple"&&r.forEach(o=>{const l=o.length/4;for(let a=1;a<l;a++){const c=a/l,u=o[a*4+1],h=e.handleParameter(i,c);o[a*4+1]=u-u*c*c*c*h}return o}),s==="test"&&r.forEach(o=>{const l=o.length/4;for(let a=1;a<l;a++){const c=a/l,u=e.handleParameter(i,c),h=o[a*4+0],m=o[a*4+1],d=o[a*4+2],f=o[(a-1)*4+0],p=o[(a-1)*4+1],g=o[(a-1)*4+2],_=f-h,N=p-m,E=p-d,[b,x]=gi(_,E,90);for(let S=a;S<l;S++){const C=o[S*4+0],V=o[S*4+1],Y=o[S*4+2],W=C-f,ie=V-p,U=Y-g;let[ne,H,ae]=_s([W,ie,U],[b,N,x],u*c);const pe=ne+f,ye=H+p,be=ae+g;o[S*4+0]=pe,o[S*4+1]=ye,o[S*4+2]=be}}return o}),s==="verlet"&&r.forEach(o=>{const l=o.length/4;for(let a=1;a<l;a++){const c=o[a*4+0],u=o[a*4+1],h=o[a*4+2],m=new et(5,0,0).cross(new et(c,u,h),new et(0,1,0)),d=a/l,f=e.handleParameter(i,d);for(let p=a;p<l;p++){const g=_s([c,u,h],m,d*f);o[p*4+0]=g[0],o[p*4+1]=g[1],o[p*4+2]=g[2]}}return o}),{skeletons:r}},computeGeometry(n){return n.input.result}},bs=ge("nodes.join"),ha={title:"Join",type:"join",outputs:["plant"],parameters:{inputA:{type:"plant",label:"plant",external:!0},inputB:{type:"plant",label:"plant",external:!0}},computeSkeleton(n,e){bs("compute skeleton",n,e);const{inputA:t,inputB:s}=n;if(!t||!s)return t?t.result:s.result;const{skeletons:i,allSkeletons:r}=t.result,{skeletons:o,allSkeletons:l}=s.result;bs(i,o);const a=[...i,...o],c=[];return r&&c.push(...r),l&&c.push(...l),{allSkeletons:c,skeletons:a}},computeGeometry(n){const{inputA:e,inputB:t}=n;if(!e||!t)return e?e.result:t.result;const{geometry:s,instances:i}=e.result,{geometry:r,instances:o}=t.result,l=ms(s,r),a=[];return i&&a.push(...i),o&&a.push(...o),bs("compute geometry",{geometryA:s,geometryB:r,result:l}),{geometry:l,instances:a}}},fa=[{x:1,y:1,pinned:!0},{x:.62,y:.84,pinned:!1},{x:.54,y:.63,pinned:!1},{x:.38,y:.41,pinned:!0},{x:.44,y:.23,pinned:!1},{x:.64,y:.12,pinned:!1},{x:.98,y:.02,pinned:!0}],da={title:"Leaf",type:"leaf",outputs:["plant","leaf"],parameters:{input:{type:"plant",external:!0},size:{type:["number","parameter","curve","vec2"],inputType:"slider",min:0,max:3,step:.05,value:.2},shape:{type:"leaf",external:!0,defaultValue:fa},lowestLeaf:{type:"number",inputType:"slider",min:0,max:1,step:.01,value:.5},curvature:{external:!0,type:"vec2",defaultValue:{x:.5,y:.2}},amount:{type:"number",min:0,max:20,value:10}},computeSkeleton(n,e){const{input:t}=n,{skeletons:s}=t.result,i=s.map((r,o)=>{const l=o/s.length,a=e.handleParameter(n.amount,l),c=new Float32Array(a*3),u=new Float32Array(a*3),h=new Float32Array(a*3);for(let m=0;m<a;m++){const d=m/(a-1),f=e.handleParameter(n.size,1-d),p=e.handleParameter(n.lowestLeaf,d),g=p+(1-p)*d-.001,[_,N,E]=di(r,g),[b,,x]=pi(r,g),S=vi([b,x]),C=Math.atan2(-S[0],S[1]);c[m*3+0]=_,c[m*3+1]=N,c[m*3+2]=E,u[m*3+0]=f,u[m*3+1]=1,u[m*3+2]=f,h[m*3+0]=0,h[m*3+1]=C-Math.PI/2*(m%2==0?-1:1),h[m*3+2]=0}return{offset:c,scale:u,rotation:h}});return{allSkeletons:t.result.allSkeletons,skeletons:s,instances:i}},computeGeometry(n,e,t){const{shape:s,input:i,curvature:r}=n,{instances:o}=e,l=t.handleParameter(r),a=ra(t.handleParameter(s),{res:t.getSetting("leafRes",2),xCurvature:l.x,yCurvature:l.y});return{geometry:i.result.geometry,instances:o.map(c=>ce(ce({},c),a))}}},pa={title:"Math",type:"math",outputs:["number"],parameters:{mode:{type:"whatever",internal:!0,inputType:"selection",label:!1,defaultValue:"add",values:["add","multiply","subtract"]},a:{type:"number",defaultValue:0,label:!1},b:{type:"number",defaultValue:0,label:!1}},computeValue(n,e,t){const{mode:s}=n,i=e.handleParameter(n.a,t),r=e.handleParameter(n.b,t);switch(s){case"multiply":return i*r;case"subtract":return i-r;default:return i+r}}},ma=ge("nodes.noise"),va={title:"Noise",type:"noise",outputs:["plant"],parameters:{input:{type:"plant",label:"plant",external:!0},size:{type:"number",inputType:"slider",min:0,max:20,step:.05,value:1},strength:{type:"number",inputType:"slider",min:0,max:2,step:.01,value:.5}},computeSkeleton(n,e){ma(n);const{input:t}=n,s=e.handleParameter(n.size),i=e.handleParameter(n.strength),{skeletons:r}=t.result;return r.forEach((o,l)=>{const a=o.length/4,c=[o[0],o[1],o[2]];let u=0;for(let h=0;h<a;h++){const m=h/a;u+=(Math.abs(c[0]-o[h*4+0])+Math.abs(c[1]-o[h*4+1])+Math.abs(c[2]-o[h*4+2]))/3,c[0]=o[h*4+0],c[1]=o[h*4+1],c[2]=o[h*4+2],o[h*4+0]=o[h*4+0]+gs.n1d(u*s+0+l*500)*i*m,o[h*4+1]=o[h*4+1]+gs.n1d(u*s+1e3+l*500)*i*m,o[h*4+2]=o[h*4+2]+gs.n1d(u*s+2e3+l*500)*i*m}}),{skeletons:r,allSkeletons:t.result.allSkeletons}},computeGeometry(n){return n.input.result}},ga={title:"Output",type:"output",outputs:[],parameters:{main:{type:"plant",label:"plant",external:!0}},computeNode(n={}){return n.main}},_a={title:"Parameter",type:"parameter",outputs:["number"],parameters:{value:{type:"number",value:0},variation:{type:"number",inputType:"slider",value:0,min:0,max:1,step:.05}},computeValue(n,e){const{value:t=0,variation:s=0}=n;return s?t+e.n1d(200)*s*Math.max(t,1):t}},wa=n=>n==="X"?[1,0,0]:n==="Z"?[0,0,1]:[0,1,0],ya={title:"Rotate",type:"rotate",outputs:["plant"],parameters:{input:{type:"plant",external:!0},type:{internal:!0,label:!1,type:"select",values:["Y","X","Z"]},spread:{internal:!0,type:"boolean",value:!0},angle:{type:"number",inputType:"slider",min:0,max:Math.PI*2,step:.05,value:0}},computeSkeleton(n,e){const{input:t,type:s,spread:i}=n,{result:{skeletons:r,allSkeletons:o}}=t,l=wa(s);return r.forEach((a,c)=>{const u=a.length/4,h=a[0],m=a[1],d=a[2],f=c/r.length,p=e.handleParameter(n.angle,f)*(i?f:1);for(let g=1;g<u;g++){let _=a[g*4+0],N=a[g*4+1],E=a[g*4+2];_-=h,N-=m,E-=d,[_,N,E]=_s([_,N,E],l,p),_+=h,N+=m,E+=d,a[g*4+0]=_,a[g*4+1]=N,a[g*4+2]=E}}),{skeletons:r,allSkeletons:o}},computeGeometry(n){return n.input.result}},ba={title:"Shape",type:"shape",outputs:["leaf"],parameters:{value:{type:"leaf",inputType:"shape",internal:!0,label:!1,value:[{x:1,y:0,pinned:!0},{x:.5,y:.5,pinned:!0},{x:1,y:1,pinned:!0}]}},computeValue(n){return n.value}},ka={title:"Slider",type:"slider",outputs:["number"],parameters:{value:{type:"number",label:!1,inputType:"slider",internal:!0,min:0,max:1,step:.01,value:0}},computeValue(n){return n.value}},yi=ge("nodes.stem"),Ea={title:"Stem",type:"stem",outputs:["plant"],parameters:{origin:{type:"vec3",external:!0,defaultValue:{x:0,y:0,z:0}},height:{type:"number",inputType:"slider",min:0,max:5,step:.05,value:2},thiccness:{type:"number",inputType:"slider",min:0,max:.2,step:.01,value:.06},amount:{type:"number",min:0,max:20,value:1}},computeSkeleton(n,e){yi("computeSkeleton",n);const t=e.handleParameter(n.amount),s=e.getSetting("stemResY"),i=[];for(let r=0;r<t;r++){const{x:o,y:l,z:a}=e.handleParameter(n.origin),c=e.handleParameter(n.height),u=new Float32Array(s*4);for(let h=0;h<s;h++){const m=h/s,d=e.handleParameter(n.thiccness,m)*(1-m),f=o,p=l+m*c,g=a;u[h*4+0]=f,u[h*4+1]=p,u[h*4+2]=g,u[h*4+3]=d}i.push(u)}return{skeletons:i,allSkeletons:i}},computeGeometry(n,e,t){yi("computeNode",n,e);const s=t.getSetting("stemResX");return{geometry:ms(...e.skeletons.map(i=>wi(i,s)))}}},Sa={title:"Vec2",type:"vec2",outputs:["vec2"],parameters:{x:{label:!1,type:"number",value:0,defaultValue:0},y:{label:!1,type:"number",value:0,defaultValue:0}}},Pa={title:"Vec3",type:"vec3",outputs:["vec3"],parameters:{x:{label:!1,type:"number",value:0,defaultValue:0},y:{label:!1,type:"number",value:0,defaultValue:0},z:{label:!1,type:"number",value:0,defaultValue:0}}},Ma={title:"Vec3Length",type:"vec3length",outputs:["number"],parameters:{vec:{label:!1,type:"vec3",value:0,defaultValue:0}},computeValue(n){const{vec:e}=n;return e?Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2)+Math.pow(e.z,2)):0}};var xa=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Branch:la,Random:aa,Curve:ca,Gravity:ua,Join:ha,Leaf:da,Math:pa,Noise:va,Output:ga,Parameter:_a,Rotate:ya,Shape:ba,Slider:ka,Stem:Ea,Vec2:Sa,Vec3:Pa,VecLength:Ma});const ks=Object.values(xa).map(n=>("computeNode"in n?n.compute=n.computeNode:n.compute=e=>({type:n.type,parameters:e}),n));const Na=(n,e)=>t=>Math.min(Math.max(t,n),e),$a=n=>{const e=10**n;return t=>Math.floor(t*e)/e},Ia=Na(-1e5,1e5),La=$a(1),Ht=n=>Ia(La(n));class bi{constructor({x1:e=0,y1:t=0,x2:s=0,y2:i=0},r){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x1=e,this.y1=t,this.x2=s,this.y2=i,this.system=r.node.system,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("viewbox","0 0 100 100"),this.svg.setAttribute("width","100"),this.svg.setAttribute("height","100"),this.svg.style.overflow="visible",this.svg.style.position="absolute",this.svg.style.top="3.5px",this.svg.style.pointerEvents="none",this.svg.style.zIndex="-1",r.view.wrapper.append(this.svg),this.path=document.createElementNS("http://www.w3.org/2000/svg","path"),this.path.classList.add("node-connection-path"),this.path.setAttribute("vector-effect","non-scaling-stroke"),this.path.setAttribute("d",`
      M 0 0
      C 50 0 
        50 100
				100  100
      `),this.svg.appendChild(this.path),this.setPosition()}setPosition({x1:e=this.x1,y1:t=this.y1,x2:s=this.x2,y2:i=this.y2}={}){var l;this.x1=Ht(e),this.y1=Ht(t),this.x2=Ht(s),this.y2=Ht(i);const r=this.x2-this.x1+3.5,o=this.y2-this.y1;(l=this==null?void 0:this.hoverPath)==null||l.setAttribute("d",`
      M 0 0
      C ${r/2} 0 
        ${r/2} ${o}
				${r}  ${o}
      `),this.path.setAttribute("d",`
      M 0 0
      C ${r/2} 0 
        ${r/2} ${o}
				${r}  ${o}
      `)}remove(){var e;this.path.remove(),(e=this==null?void 0:this.hoverPath)==null||e.remove(),this.system.save()}}class Ta extends bi{constructor(e){super({},e.output);this.connection=e,this.input=e.input.view,this.output=e.output.view,this.hoverPath=document.createElementNS("http://www.w3.org/2000/svg","path"),this.hoverPath.classList.add("node-connection-hover"),this.hoverPath.setAttribute("vector-effect","non-scaling-stroke"),this.svg.append(this.hoverPath),this.hoverPath.addEventListener("mouseover",()=>{const{activeNode:t}=this.system.view;t&&t.view.active&&t.view.hoveredConnection!==this&&this.handleNodeOver(t)}),this.hoverPath.addEventListener("mouseout",()=>{const{activeNode:t}=this.system.view;this.handleNodeOut(t)}),e.input.node.system.view.colorStore.on(e.input.type[0],t=>{this.path.style.stroke=t})}handleNodeOver(e){this.connection.isNodeJoinable(e)&&(e.view.hoveredConnection=this,this.path.classList.add("hover-active"))}handleNodeOut(e){e&&e.view.hoveredConnection===this&&delete e.view.hoveredConnection,this.path.classList.remove("hover-active")}remove(){super.remove()}}function Va(n){if(!ja(n))throw new Error("panzoom requires DOM element to be attached to the DOM tree");const t=n.parentElement;return n.scrollTop=0,{getBBox:r,getOwner:i,applyTransform:o};function i(){return t}function r(){return{left:0,top:0,width:n.clientWidth,height:n.clientHeight}}function o(l){n.style.transformOrigin="0 0 0",n.style.transform="matrix("+l.scale+", 0, 0, "+l.scale+", "+l.x+", "+l.y+")"}}function ja(n){return n&&n.parentElement&&n.style}function Da(n,e,t){typeof t!="object"&&(t={});const s=typeof t.minVelocity=="number"?t.minVelocity:5,i=typeof t.amplitude=="number"?t.amplitude:.25,r=typeof t.cancelAnimationFrame=="function"?t.cancelAnimationFrame:Ca(),o=typeof t.requestAnimationFrame=="function"?t.requestAnimationFrame:Oa();let l,a;const c=342;let u,h,m,d,f,p,g,_;return{start:E,stop:x,cancel:N};function N(){r(u),r(_)}function E(){l=n(),d=g=h=f=0,a=new Date,r(u),r(_),u=o(b)}function b(){const C=Date.now(),V=C-a;a=C;const Y=n(),W=Y.x-l.x,ie=Y.y-l.y;l=Y;const U=1e3/(1+V);h=.8*W*U+.2*h,f=.8*ie*U+.2*f,u=o(b)}function x(){r(u),r(_);const C=n();m=C.x,p=C.y,a=Date.now(),(h<-s||h>s)&&(d=i*h,m+=d),(f<-s||f>s)&&(g=i*f,p+=g),_=o(S)}function S(){const C=Date.now()-a;let V=!1,Y=0,W=0;d&&(Y=-d*Math.exp(-C/c),Y>.5||Y<-.5?V=!0:Y=d=0),g&&(W=-g*Math.exp(-C/c),W>.5||W<-.5?V=!0:W=g=0),V&&(e(m+Y,p+W),_=o(S))}}function Ca(){return typeof cancelAnimationFrame=="function"?cancelAnimationFrame:clearTimeout}function Oa(){return typeof requestAnimationFrame=="function"?requestAnimationFrame:function(n){return setTimeout(n,16)}}const Aa=.2;function Ra(n,e){const t=Va(n),s=t.getOwner(),i={x:0,y:0};let r=!1;const o={x:0,y:0,scale:1},l=typeof e.pinchSpeed=="number"?e.pinchSpeed:1,a=e.bounds,c=typeof e.maxZoom=="number"?e.maxZoom:Number.POSITIVE_INFINITY,u=typeof e.minZoom=="number"?e.minZoom:0,h=typeof e.boundsPadding=="number"?e.boundsPadding:.05,m=typeof e.zoomSpeed=="number"?e.zoomSpeed:Aa;let d=ki(e.transformOrigin);Ba(a);let f,p=!1,g=!1,_,N,E;const b=Da(ke,Xe,e.smoothScroll);let x,S=!1;Fe();const C={dispose:pt,moveBy:xe,moveTo:je,smoothMoveTo:tt,centerOn:dt,zoomTo:Lt,zoomAbs:Le,pause:ie,resume:U,isPaused:ne,getTransform:pe,setTransform:ae,getTransformOrigin:ye,setTransformOrigin:be},V=typeof e.initialX=="number"?e.initialX:o.x,Y=typeof e.initialY=="number"?e.initialY:o.y,W=typeof e.initialZoom=="number"?e.initialZoom:o.scale;return(V!=o.x||Y!=o.y||W!=o.scale)&&Le(V,Y,W),C;function ie(){st(),S=!0}function U(){S&&(Fe(),S=!1)}function ne(){return S}function H(T,R){return i.x=T,i.y=R,i}function ae(T,R,z){o.x=T,o.y=R,o.scale=z,me()}function pe(){return o}function ye(){return d}function be(T){d=ki(T)}function ke(){return{x:o.x,y:o.y}}function je(T,R){o.x=T,o.y=R,Qe(),me()}function xe(T,R){je(o.x+T,o.y+R)}function Qe(){const T=$t();if(!T)return;let R=!1;const z=ht();let K=T.left-z.right;return K>0&&(o.x+=K,R=!0),K=T.right-z.left,K<0&&(o.x+=K,R=!0),K=T.top-z.bottom,K>0&&(o.y+=K,R=!0),K=T.bottom-z.top,K<0&&(o.y+=K,R=!0),R}function $t(){if(!!a){if(typeof a=="boolean"){const T=s.getBoundingClientRect(),R=T.width,z=T.height;return{left:R*h,top:z*h,right:R*(1-h),bottom:z*(1-h)}}return a}}function ht(){const T=t.getBBox(),R=ft(T.left,T.top);return{left:R.x,top:R.y,right:T.width*o.scale+R.x,bottom:T.height*o.scale+R.y}}function ft(T,R){return{x:T*o.scale+o.x,y:R*o.scale+o.y}}function me(){r=!0,f=window.requestAnimationFrame(nt)}function ze(T,R,z){if(Es(T)||Es(R)||Es(z))throw new Error("zoom requires valid numbers");const K=o.scale*z;if(K<u){if(o.scale===u)return;z=u/o.scale}if(K>c){if(o.scale===c)return;z=c/o.scale}const Ee=H(T,R);o.x=Ee.x-z*(Ee.x-o.x),o.y=Ee.y-z*(Ee.y-o.y),a&&h===1&&u===1?(o.scale*=z,Qe()):Qe()||(o.scale*=z),me()}function Le(T,R,z){const K=z/o.scale;ze(T,R,K)}function dt(T){const R=T.ownerSVGElement;if(!R)throw new Error("ui element is required to be within the scene");const z=T.getBoundingClientRect(),K=z.left+z.width/2,Ee=z.top+z.height/2,We=R.getBoundingClientRect(),Tt=We.width/2-K,Vt=We.height/2-Ee;Ye(Tt,Vt)}function tt(T,R){Ye(T-o.x,R-o.y)}function Ye(T,R){return xe(T,R)}function Xe(T,R){je(T,R)}function pt(){st()}function Fe(){s.addEventListener("mousedown",Ys,{passive:!0}),s.addEventListener("dblclick",Gs,{passive:!1}),s.addEventListener("touchstart",Fs,{passive:!0}),s.addEventListener("keydown",zs),s.addEventListener("wheel",Zs,{passive:!0}),me()}function st(){s.removeEventListener("wheel",Zs),s.removeEventListener("mousedown",Ys),s.removeEventListener("keydown",zs),s.removeEventListener("dblclick",Gs),s.removeEventListener("touchstart",Fs),f&&(window.cancelAnimationFrame(f),f=0),b.cancel(),Js(),Io(),en()}function nt(){r&&Po()}function Po(){r=!1,t.applyTransform(o),f=0,e.onTransform&&e.onTransform(o)}function zs(T){let R=0;if(T.keyCode===38||T.keyCode===40||T.keyCode===37||T.keyCode===39||(T.keyCode===189||T.keyCode===109?R=1:(T.keyCode===187||T.keyCode===107)&&(R=-1)),R){const z=Ks(R*100),K=d?es():Mo();Lt(K.x,K.y,z)}}function Mo(){const T=s.getBoundingClientRect();return{x:T.width/2,y:T.height/2}}function Fs(T){if(xo(T),T.touches.length===1)return $o(T);T.touches.length===2&&(E=Hs(T.touches[0],T.touches[1]),x=!0,Ws())}function xo(T){T.stopPropagation(),T.preventDefault()}function No(T){T.preventDefault(),T.stopPropagation()}function $o(T){const R=T.touches[0],z=qe(R),K=H(z.x,z.y);_=K.x,N=K.y,b.cancel(),Ws()}function Ws(){p||(p=!0,document.addEventListener("touchmove",Us),document.addEventListener("touchend",It),document.addEventListener("touchcancel",It))}function Us(T){if(T.touches.length===1){T.stopPropagation();const R=T.touches[0],z=qe(R),K=H(z.x,z.y),Ee=K.x-_,We=K.y-N;Ee!==0&&We!==0&&Qs(),_=K.x,N=K.y,Ye(Ee,We)}else if(T.touches.length===2){x=!0;const R=T.touches[0],z=T.touches[1],K=Hs(R,z),Ee=1+(K/E-1)*l,We=qe(R),Tt=qe(z);if(_=(We.x+Tt.x)/2,N=(We.y+Tt.y)/2,d){const Vt=es();_=Vt.x,N=Vt.y}Lt(_,N,Ee),E=K,T.stopPropagation(),T.preventDefault()}}function It(T){if(T.touches.length>0){const R=qe(T.touches[0]),z=H(R.x,R.y);_=z.x,N=z.y}}function Hs(T,R){const z=T.clientX-R.clientX,K=T.clientY-R.clientY;return Math.sqrt(z*z+K*K)}function Gs(T){No(T)}function Ys(T){if(p)return T.stopPropagation(),!1;if(T.target!==s&&T.target!==n||!(T.button===1&&window.event!==null||T.button===0))return;b.cancel();const z=qe(T),K=H(z.x,z.y);return _=K.x,N=K.y,document.addEventListener("mousemove",Xs),document.addEventListener("mouseup",qs),!1}function Xs(T){if(p||T.ctrlKey)return;Qs();const R=qe(T),z=H(R.x,R.y),K=z.x-_,Ee=z.y-N;_=z.x,N=z.y,Ye(K,Ee)}function qs(){en(),Js()}function Js(){document.removeEventListener("mousemove",Xs),document.removeEventListener("mouseup",qs),g=!1}function Io(){document.removeEventListener("touchmove",Us),document.removeEventListener("touchend",It),document.removeEventListener("touchcancel",It),g=!1,x=!1,p=!1}function Zs(T){b.cancel();let R=T.deltaY;T.deltaMode>0&&(R*=100);const z=Ks(R);if(z!==1){const K=d?es():qe(T);Lt(K.x,K.y,z)}}function qe(T){const R=s.getBoundingClientRect(),z=T.clientX-R.left,K=T.clientY-R.top;return{x:z,y:K}}function es(){const T=s.getBoundingClientRect();return{x:T.width*d.x,y:T.height*d.y}}function Lt(T,R,z){return b.cancel(),ze(T,R,z)}function Ks(T){const R=Math.sign(T),z=Math.min(.25,Math.abs(m*T/128));return 1-R*z}function Qs(){g||(g=!0,b.start())}function en(){g&&(x||b.stop())}}function ki(n){if(!!n){if(typeof n=="object")return(!ct(n.x)||!ct(n.y))&&Ei(),n;Ei()}}function Ei(n){throw new Error(["Cannot parse transform origin.","Some good examples:",'  "center center" can be achieved with {x: 0.5, y: 0.5}','  "top center" can be achieved with {x: 0.5, y: 0}','  "bottom right" can be achieved with {x: 1, y: 1}'].join(`
`))}function Ba(n){const e=typeof n;if(e==="undefined"||e==="boolean")return;if(!(ct(n.left)&&ct(n.top)&&ct(n.bottom)&&ct(n.right)))throw new Error("Bounds object is not valid. It can be: undefined, boolean (true|false) or an object {left, top, right, bottom}")}function ct(n){return Number.isFinite(n)}function Es(n){return Number.isNaN?Number.isNaN(n):n!==n}function za(n,e){const t=n.x2<e.x1,s=n.x1>e.x2,i=n.y1>e.y2,r=n.y2<e.y1;return!(t||s||i||r)}var Fa=(n,e)=>e.type.includes(n.type)||e.type.includes("*");function Gt(n,e){if(n===void 0&&e===void 0)return;const t=Array.isArray(n)?"array":typeof n;if(t==="string"||t==="boolean"||t==="number")return n===e?void 0:e;if(Array.isArray(n)){const o=n.map((l,a)=>typeof e=="object"&&a in e?Gt(l,e[a]):e[a]);return!o.length||o.length===1&&!o[0]?void 0:o}if(!n)return e;const s=Object.keys(n),i={};let r=!1;if(s.forEach(o=>{const l=Gt(n[o],e[o]);l!==void 0&&(r=!0,i[o]=l)}),!!r)return i}function Wa(n,e){return[Gt(n,e),Gt(e,n)]}function Yt(n,e){const t=typeof n;if(t==="string"||t==="boolean"||t==="number")return e;if(Array.isArray(n))return n.map((s,i)=>e[i]?Yt(s,e[i]):s);if(typeof n=="object"){const s=Object.keys(e),i=ce({},n);return s.forEach(r=>{i[r]=Yt(n[r],e[r])}),i}}class Ua{constructor(e,{input:t,output:s}){if(!s||!t)return;if(this.system=e,t.node.getChildren().includes(s.node))throw new Error("Circular reference");if(!Fa(s,t))throw new Error("Can't connect type "+t.type+" to "+s.type);this.output=s,this.input=t,e.options.view&&(this.view=new Ta(this)),this.output.setConnection(this),this.input.setConnection(this),this.output.node.system.save()}joinNode(e){if(!this.isNodeJoinable(e))return;this.remove(),this.output.node.connectTo(e,0,e.getInputs()[0].key);const t=this.input.node.getInputs(),s=t.indexOf(this.input),i=t[s].key;e.connectTo(this.input.node,0,i)}isNodeJoinable(e){const t=this.input.type,s=this.output.type;if(this.input.node===e||this.output.node===e)return!1;const i=e.getInputs();if(!i.length||!i.find(o=>o.type.includes(s)))return!1;const r=e.outputs;return!(!r.length||!r.find(o=>t.includes(o.type)||t.includes("*")))}remove(){this.view&&this.view.remove(),this.input.removeConnection(),this.output.removeConnection(this)}deserialize(){return{id:this.input.node.attributes.id,out:this.indexOut,in:this.indexIn}}get indexOut(){return this.output.node.outputs.indexOf(this.output)}get indexIn(){return this.input.key}}class Ss extends Te{constructor(e,t){super();this.outputs=[],this._state={},this.states={},this.inputData=[],this.enableUpdates=!0,this.refs=[],this.system=e;const{attributes:s,state:i={}}=t;this._state=i,this.attributes=s,this.id=s.id,this._compute=rl((r=this._state)=>this.compute(r))}get state(){return this._state}bindView(e){this.view=e,this.outputs.forEach(t=>t.bindView()),Object.values(this.states).forEach(t=>t.bindView())}setAttributes(e){this.enableUpdates&&this.system.history.addAction(),this.attributes=ce(ce({},this.attributes),e),this==null||this.view.updateViewPosition(),this.save()}compute(e){return e}getChildren(){return this.outputs.map(s=>s.connections).flat().map(s=>s.input.node)}getSockets(){return[...this.getInputs(),...this.outputs]}getInputs(){return Object.values(this.states).map(e=>e.getInput()).filter(e=>!!e)}setStateValue(e,t){this.states[e].setValue(t)}getStateValue(e){return this.state[e]}update(){!this.enableUpdates||(this.computedData=this._compute(this.state),this.emit("computedData",this.computedData),this.refs.forEach(e=>{e.node.enableUpdates=!1,e.keyIn.forEach(t=>{e.node.setStateValue(t,this.computedData)}),e.node.enableUpdates=!0,e.node.update()}),this.save())}remove(){this.system.removeNode(this),this.destroyEventEmitter()}connectTo(e,t=0,s=e.getInputs()[0].key){var a,c,u;const i=this.outputs[t],r=(a=e.states[s])==null?void 0:a.getInput();if(!r)return;const o=new Ua(this.system,{output:i,input:r});(c=i==null?void 0:i.view)==null||c.updatePosition(),(u=r==null?void 0:r.view)==null||u.updatePosition();const l=this.refs.find(h=>h.node.id===e.id&&h.indexOut===t);return l?l.keyIn=[...l.keyIn,s]:this.refs.push({node:e,keyIn:[s],indexOut:t}),this.update(),o}disconnectFrom(e,t,s){this.refs=this.refs.filter(i=>!(i.indexOut!==s||(i.keyIn.splice(i.keyIn.indexOf(t),1),i.keyIn.length===0))),this.update()}deserialize(){const e=Object.assign({},this.attributes);e.refs=this.outputs.map(s=>s.connections).flat().map(s=>s.deserialize());const t={};return Object.values(this.states).forEach(s=>{t[s.key]=s.getValue()}),Object.assign({},{attributes:e,state:t})}save(){this.system.save()}}var Ha={title:"Boolean",type:"boolean",outputs:["boolean"],parameters:{value:{type:"boolean",defaultValue:!1}},compute({value:n=!1}){return n}};const Ga={title:"Math",type:"math",outputs:["number","number"],parameters:{mode:{type:"whatever",internal:!0,inputType:"selection",label:!1,defaultValue:"add",values:["add","multiply","subtract"]},a:{type:"number",defaultValue:0,label:!1},b:{type:"number",defaultValue:0,label:!1}},compute({mode:n,a:e,b:t}){switch(n){case"multiply":return e*t;case"subtract":return e-t;default:return e+t}}};var Ya={title:"Number",type:"number",outputs:["number"],parameters:{value:{type:"number",internal:!0,label:!1,defaultValue:0}},compute({value:n=0}){return n}};class Xa{constructor(e){this.nodeState=e,this.wrapper=document.createElement("div"),this.input=document.createElement("div"),this.isPaused=!1,this.wrapper.classList.add("node-state-single-wrapper"),this.input.classList.add("node-state-input");const t=e.template,s=t.label||e.key;if(typeof s=="string"){const i=document.createElement("p");i.className="state-label",i.innerHTML=s,this.wrapper.appendChild(i)}(t==null?void 0:t.label)===!1&&this.wrapper.classList.add("hide-label"),t.external||(this.element=Jl({target:this.input,template:t,value:e.getValue()}),this.element&&this.element.$on("change",({detail:i})=>{this.isPaused||(this.isPaused=!0,typeof i!="undefined"&&!Number.isNaN(i)&&this.nodeState.setValue(i),this.isPaused=!1)})),e.node.view.stateWrapper.appendChild(this.wrapper),this.wrapper.appendChild(this.input)}updateValue(){this.isPaused||(this.isPaused=!0,setTimeout(()=>{this.element&&(this.element.value=this.nodeState.getValue())},50),this.isPaused=!1)}updatePosition(){var e,t;this.rect=this.wrapper.getBoundingClientRect(),(t=(e=this.nodeState.getInput())==null?void 0:e.view)==null||t.updatePosition()}get y(){return this.rect.y-this.nodeState.node.view.y}get height(){return this.rect.height}setActive(e){this.wrapper.classList[e?"remove":"add"]("disabled")}}class qa{constructor(e){if(!e||!e.node)throw new Error("Somethings missing");this.input=e,this.node=e.node,this.wrapper=document.createElement("div"),this.wrapper.classList.add("node-input-wrapper"),e.type.forEach(t=>{this.wrapper.classList.add(`socket-type-${t==="*"?"all":t}`)}),e.state.view.wrapper.appendChild(this.wrapper),this.wrapper.addEventListener("mousedown",t=>{t.stopPropagation(),t.preventDefault();const s=this.input.connection;s?(s.remove(),this.node.system.view.createFloatingConnection(s.output)):this.node.system.view.createFloatingConnection(this.input)},!1),this.node.system.view.colorStore.on(e.type[0],t=>{const s=window.getComputedStyle(this.wrapper,null).getPropertyValue("background-color");this.wrapper.style.backgroundColor=s!=="rgba(0, 0, 0, 0)"?s:t})}updatePosition(){var e;this.rect=this.wrapper.getBoundingClientRect(),(e=this==null?void 0:this.connection)==null||e.setPosition({x2:this.x,y2:this.y})}remove(){this.wrapper.remove(),this.connection&&this.connection.remove()}set state(e){this.wrapper.classList.forEach(t=>{t.includes("socket-state-")&&this.wrapper.classList.remove(t)}),e&&e.length&&this.wrapper.classList.add("socket-state-"+e)}get x(){return this.node.view.x-3}get y(){const e=this.node.system.view;return(this.rect.y+this.rect.height/2-e.y-e.top)/e.s-e.height/2}}class Et{constructor(e,t,s){this.state=e,this.key=s,this.node=e.node,this.type=Array.isArray(t)?t:[t]}bindView(){this.view=new qa(this)}removeConnection(){const e=this.connection;delete this.connection,e&&e.remove(),this.node.setStateValue(this.key,void 0),this.state.setIsExternal(!1)}setConnection(e){this.connection&&this.connection.remove(),this.connection=e,this.view&&(this.view.connection=e.view),this.state.setIsExternal(!0)}remove(){this.view&&this.view.remove(),this.removeConnection()}}class Ps extends Te{constructor(e,t,s){super();var i,r;this.node=e,this.key=t,this.template=s,this.isExternal=!1,this.value=(r=(i=e.state[t])!=null?i:s.defaultValue)!=null?r:s.value,this.node._state[t]=this.value,this.template.internal||(this.input=new Et(this,s.type,t))}setIsExternal(e=!1){var t;this.isExternal=e,(t=this==null?void 0:this.view)==null||t.setActive(!e)}getValue(){return this.value}setValue(e){this.isExternal||(this.node.enableUpdates&&this.node.system.history.addAction(),this.value=e),this.node._state[this.key]=e,this.node.enableUpdates&&(this==null||this.view.updateValue(),this.node.update())}remove(){}getInput(){return this.input}bindView(){this.view=new Xa(this),this.input&&this.input.bindView()}}class Ms{constructor(e){this.inputs=[],this.outputs=[],this.active=!1,this.x=0,this.y=0,this.downX=0,this.downY=0,this.mDownX=0,this.mDownY=0,this.height=50,this.width=91,this.node=e,this.system=e.system,this.wrapper=document.createElement("div"),this.wrapper.style.minHeight=this.height+"px",this.wrapper.style.minWidth=this.width+"px",this.wrapper.classList.add("node-wrapper","node-type-"+e.attributes.type.toLowerCase()),this.wrapper.setAttribute("id","node-view-"+this.system.id+"-"+this.node.id),this.outputWrapper=document.createElement("div"),this.outputWrapper.classList.add("node-outputs-wrapper"),this.wrapper.append(this.outputWrapper);const t=document.createElement("p");t.innerHTML=e.attributes.name||e.attributes.type,t.classList.add("node-title"),this.wrapper.appendChild(t),this.stateWrapper=document.createElement("div"),this.stateWrapper.classList.add("node-state-wrapper"),this.wrapper.append(this.stateWrapper),e.system.view.nodeContainer.append(this.wrapper);const{pos:{x:s=0,y:i=0}={}}=e.attributes;this.x=s,this.y=i,this.bindEventListeners(),this.wrapper.style.left=s+"px",this.wrapper.style.top=i+"px",setTimeout(()=>{const{width:r,height:o}=this.wrapper.getBoundingClientRect();this.width=r/this.system.view.s,this.height=o/this.system.view.s,this.updateViewPosition(s,i)},10)}bindEventListeners(){this.wrapper.addEventListener("mousedown",e=>this.handleMouseDown(e)),this._unsubscribeMouseMove=this.system.view.on("mousemove",e=>this.handleMouseMove(e)),this._unsubscribeMouseUp=this.system.view.on("mouseup",()=>this.handleMouseUp())}removeEventListeners(){this._unsubscribeMouseMove(),this._unsubscribeMouseUp(),this.wrapper.addEventListener("mousedown",e=>this.handleMouseDown(e))}set state(e){this.wrapper.classList.remove("node-active","node-selected","node-dragging"),this.wrapper.classList.add("node-"+e),this._state=e}get state(){return this._state}handleMouseDown(e){var i,r,o,l;if(this.system.view.keyMap.space||e.button===2||e.target!==e.currentTarget)return;e.stopImmediatePropagation(),e.stopPropagation(),this.node.system.view.setActive(this.node,e);const{rmx:t,rmy:s}=this.system.view;this.mDownX=t,this.mDownY=s,this.downX=((r=(i=this.node.attributes)==null?void 0:i.pos)==null?void 0:r.x)||0,this.downY=((l=(o=this.node.attributes)==null?void 0:o.pos)==null?void 0:l.y)||0,this.active=!0,this.system.view.selectedNodes.length&&this.system.view.selectedNodes.forEach(a=>{a.view.active=!0,a.view.mDownX=t,a.view.mDownY=s,a.view.downX=a.view.x,a.view.downY=a.view.y})}handleMouseUp(){this.active=!1,this.hoveredConnection&&(this.hoveredConnection.connection.joinNode(this.node),delete this.hoveredConnection)}handleMouseMove({mx:e,my:t,keys:s}){if(this.active){this.state="dragging";const i=s.ctrlKey?.02:1;let r=this.mDownX-e,o=this.mDownY-t;s.shiftKey&&(Math.abs(r)>Math.abs(o)?o=0:r=0);const l=Math.round((this.downX-r/this.system.view.s)*i)/i,a=Math.round((this.downY-o/this.system.view.s)*i)/i;this.setPosition(l,a)}}updateViewPosition(e=(r=>(r=(i=>(i=(s=>(s=this.node.attributes)==null?void 0:s.pos)())==null?void 0:i.x)())!=null?r:this.x)(),t=(a=>(a=(l=>(l=(o=>(o=this.node.attributes)==null?void 0:o.pos)())==null?void 0:l.y)())!=null?a:this.y)()){this.wrapper.style.left=e+"px",this.wrapper.style.top=t+"px",Object.values(this.node.states).forEach(c=>{var u;return(u=c==null?void 0:c.view)==null?void 0:u.updatePosition()}),this.node.outputs.forEach(c=>c.view.updatePosition())}setPosition(e,t){this.x=e,this.y=t,this.node.setAttributes({pos:{x:e,y:t}}),this.updateViewPosition()}remove(){this.removeEventListeners(),this.wrapper.remove()}}class Ja extends Ss{constructor(e,t){super(e,t);this.states={input:new Ps(this,"input",{type:"*"})},this.outputs=[]}compute({input:e}){return e}}class Za extends Ms{constructor(e){super(e);const t=document.createElement("div");e.on("computedData",s=>{t.innerHTML="";const i=document.createElement("p");i.innerHTML=JSON.stringify(s,null," "),t.append(i)}),this.wrapper.appendChild(t)}}var Ka={title:"Debug",meta:{description:"Outputs any inputs for debug purposes"},node:Ja,view:Za};class Qa extends Ss{constructor(e,t){super(e,t);this.states={input:new Ps(this,"input",{type:"*",external:!0,label:!1})},this.outputs=[]}compute({input:e}){return e}}class ec extends Ms{constructor(e){super(e);const t=document.createElement("p");t.style.margin="0px",t.style.padding="4px",t.style.color="white",t.style.fontWeight="bold",e.on("computedData",s=>{t.innerHTML=JSON.stringify(s,null,2)}),this.wrapper.appendChild(t)}}var tc={title:"Output",meta:{description:"Outputs the final value"},node:Qa,view:ec};const xs={BooleanNode:Ha,MathNode:Ga,NumberNode:Ya,DebugNode:Ka,OutputNode:tc};class sc{constructor(e){this.x=0,this.y=0,this.view=e,this.system=e.system,this.wrapper=document.createElement("div"),this.wrapper.classList.add("context-wrapper"),this.searchEl=new Yl({target:this.wrapper}),this.searchEl.$on("input",({detail:t})=>{this.resolve(t)}),this.view.wrapper.append(this.wrapper),this.view.system.store.on("types",t=>this.updateTypes(t),20),this.wrapper.classList.add("cl-"+Math.floor(Math.random()*1e3)),this.view.on("keydown",({key:t})=>t==="Escape"&&this.hide())}updateTypes(e){this.searchEl.setItems(e.map(t=>({value:t.type||t.title,title:t.title})))}handleWindowClick(e){e.composedPath().includes(this.wrapper)||this.reject()}reject(){this.rej&&this.rej(),this.hide()}resolve(e){const t=this.system.store.getByName(e),{x:s,y:i}=this.view.projectWindowToLocal(this.x,this.y),r=s-this.view.width/2,o=i-this.view.height/2;t?this.res({attributes:{pos:{x:r,y:o},id:"",name:t.title,type:t.title,refs:[]},state:{value:void 0}}):this.reject(),this.hide()}hide(){this.searchEl.clear(),this.wrapper.classList.remove("context-visible"),this.wrapper.blur(),this.res=e=>e,this.reject=()=>{}}show({x:e,y:t,socket:s}){return this.x=e,this.y=t,this.socket=s,this.wrapper.style.left=e/this.system.view.width*100+"%",this.wrapper.style.top=t/this.system.view.height*100+"%",this.wrapper.classList.add("context-visible"),setTimeout(()=>{this.searchEl.focus()},20),new Promise((i,r)=>{this.res=i,this.rej=r})}}class nc extends Te{constructor(e){super();this.mDownX=0,this.mDownY=0,this.downX=0,this.downY=0,this.isShiftKey=!1,this.view=e,this.wrapper=document.createElement("div"),this.wrapper.classList.add("box-selection-wrapper"),this.view.wrapper.append(this.wrapper),this.view.on("mousedown",({target:t,mx:s,x:i,my:r,y:o,keys:l})=>{var a;l.space||l.shiftKey||l.button===2||!l.ctrlKey||t&&!((a=t==null?void 0:t.className)==null?void 0:a.includes("nodesystem"))||(this.mDownX=s,this.mDownY=r,this.downX=i,this.downY=o,this.wrapper.style.left=s+"px",this.wrapper.style.top=r+"px",this.wrapper.style.width="0px",this.wrapper.style.height="0px",this.isShiftKey=l.shift,this.show())})}show(){this.wrapper.classList.add("box-selection-visible");const e=this.view.system.nodes.map(i=>{const{width:r,height:o}=i.view,{x:l,y:a}=i.view,c=l+this.view.width/2,u=a+this.view.height/2,h=c+r,m=u+o;return{n:i,state:i.view.state,x1:c,y1:u,x2:h,y2:m}});let t=[];const s=this.view.on("mousemove",({mx:i,my:r,x:o,y:l})=>{const{mDownX:a,mDownY:c,downX:u,downY:h,isShiftKey:m}=this,d={x1:Math.min(i,a),x2:Math.max(i,a),y1:Math.min(r,c),y2:Math.max(r,c)};this.wrapper.style.left=d.x1+"px",this.wrapper.style.top=d.y1+"px",this.wrapper.style.width=Math.abs(a-i)+"px",this.wrapper.style.height=Math.abs(c-r)+"px";const f={x1:Math.min(o,u),x2:Math.max(o,u),y1:Math.min(l,h),y2:Math.max(l,h)};t=e.filter(p=>za(f,p)?!0:(m||(p.state="normal",p.n.view.state="normal"),!1)).map(({n:p,state:g})=>(g!=="active"&&(g="selected",p.view.state="selected"),p))},5);this.view.once("mouseup",()=>{s(),this.hide(),this.emit("selection",t)})}projectBox(e){const{x:t,y:s}=this.view.projectWindowToLocal(e.x1,e.y1),{x:i,y:r}=this.view.projectWindowToLocal(e.x2,e.y2);return{x1:t,y1:s,x2:i,y2:r}}hide(){this.wrapper.classList.remove("box-selection-visible")}}class ic{constructor(e){this.connections=[],this.output=e,this.node=e.node,this.wrapper=document.createElement("div"),this.wrapper.classList.add("node-output-wrapper"),this.wrapper.classList.add(`socket-type-${e.type}`),e.node.view.outputWrapper.appendChild(this.wrapper),this.wrapper.addEventListener("mousedown",t=>{t.stopPropagation(),t.preventDefault(),this.node.system.view.createFloatingConnection(this.output)},!1),this.node.system.view.colorStore.on(e.type,t=>{const s=window.getComputedStyle(this.wrapper,null).getPropertyValue("background-color");this.wrapper.style.backgroundColor=s!=="rgba(0, 0, 0, 0)"&&s!=="rgb(0,0,0)"?s:t})}remove(){this.wrapper.remove(),this.connections.forEach(e=>e.remove())}set state(e){this.wrapper.classList.forEach(t=>{t.includes("socket-state-")&&this.wrapper.classList.remove(t)}),e&&e.length&&this.wrapper.classList.add("socket-state-"+e)}updatePosition(){this.rect=this.wrapper.getBoundingClientRect(),this.output.connections.forEach(e=>e.view.setPosition({x1:this.x,y1:this.y}))}get x(){return this.node.view.x+this.node.view.width+3}get y(){const e=this.node.system.view;return(this.rect.y+this.rect.height/2-e.y-e.top)/e.s-e.height/2}}class Xt{constructor(e,t){if(this.connections=[],this.node=e,this.type=t,Array.isArray(t))throw new Error("Output can only output one type, not "+t)}bindView(){this.view=new ic(this)}connectTo(e){const t=this.node.outputs.indexOf(this);return this.node.connectTo(e.node,t,e.key)}removeConnection(e){const t=this.connections.indexOf(e);this.connections.splice(t,1),this.node.disconnectFrom(e.input.node,e.indexIn,e.indexOut),this.view&&this.view.connections.splice(t,1)}setConnection(e){this.connections.push(e),this.view&&this.view.connections.push(e.view)}remove(){this.connections.forEach(e=>e.remove())}}class oc extends Yr(bi,Te){constructor(e,t={}){const{system:s}=e.node;super({},e);this.view=s.view,this.path.style.zIndex="999";const i=Array.isArray(e.type)?e.type[0]:e.type;s.view.colorStore.on(i,h=>{this.path.style.stroke=h}),e.view.updatePosition();const r=e.view.x,o=e.view.y;let l=r,a=o;t&&(l=t.x-s.view.width/2,a=t.y-s.view.height/2),this.setPosition({x1:r,y1:o,x2:l,y2:a}),this.dx2=this.x2,this.dy2=this.y2,this.isInput=e instanceof Et,this.allSockets=e instanceof Et?s.getOutputs(e.type):s.getInputs(e.type),this.allSockets.forEach(h=>h.view.state="potential");let c=this.allSockets.filter(h=>h.node.attributes.id!==e.node.attributes.id);c.forEach(h=>h.view.state="middle");const u="connection"in e?[e.connection]:e.connections;if(u&&!!u.length){const h=u.map(m=>[m.input,m.output]).flat();c=c.filter(m=>!h.includes(m))}this.potentialSockets=c,this.potentialSockets.forEach(h=>h.view.updatePosition()),this.potentialSockets.forEach(h=>h.view.state="highlight"),this._unsubMouseUp=this.view.on("mouseup",this.handleMouseUp.bind(this)),this._unsubMouseMove=this.view.on("mousemove",this.handleMouseMove.bind(this)),this.mdx=this.view.mx,this.mdy=this.view.my,this.socket=e}handleMouseUp(e){const{x:t,y:s,keys:i}=e;this._unsubMouseUp(),this._unsubMouseMove(),this.allSockets.forEach(l=>l.view.state="");let r,o=0;this.socket instanceof Et&&this.hoveredSocket instanceof Xt?(r=this.socket.key,o=this.hoveredSocket.node.outputs.indexOf(this.hoveredSocket)):this.socket instanceof Xt&&this.hoveredSocket instanceof Et&&(r=this.hoveredSocket.key,o=this.socket.node.outputs.indexOf(this.socket)),this.hoveredSocket?(this.emit("connection",{keyIn:r,indexOut:o,inputNode:this.isInput?this.socket.node:this.hoveredSocket.node,outputNode:this.isInput?this.hoveredSocket.node:this.socket.node}),this.remove()):i.ctrlKey?this.view.addMenu.show({x:t,y:s,socket:this.socket}).then(l=>this.view.system.createNode(l)).then(l=>{this.socket instanceof Xt?this.socket.node.connectTo(l,o,r):l.connectTo(this.socket.node,o,r)}).catch(()=>{}).finally(()=>{this.remove()}):this.remove()}handleMouseMove(e){const{x:t,y:s}=e;this.mdx||(this.mdx=t,this.mdy=s);const i=this.dx2+(t-this.mdx),r=this.dy2+(s-this.mdy),o=20,l=this.potentialSockets.map(a=>{const{x:c,y:u}=a.view;return{socket:a,distance:Math.abs(i-c)+Math.abs(r-u)}}).filter(a=>a.distance<o).sort((a,c)=>a.distance>c.distance?-1:1).map(a=>a.socket);if(l.length){const{x:a,y:c}=l[0].view;this.hoveredSocket=l[0],this.setPosition({x2:a,y2:c})}else this.hoveredSocket=void 0,this.setPosition({x2:i,y2:r})}remove(){super.remove()}}const rc=[{color:"#a52a2a",name:"brown"},{color:"#008000",name:"green"},{color:"#4b0082",name:"indigo"},{color:"#f0e68c",name:"khaki"},{color:"#add8e6",name:"lightblue"},{color:"#e0ffff",name:"lightcyan"},{color:"#90ee90",name:"lightgreen"},{color:"#d3d3d3",name:"lightgrey"},{color:"#ffb6c1",name:"lightpink"},{color:"#ffffe0",name:"lightyellow"},{color:"#00ff00",name:"lime"},{color:"#ff00ff",name:"magenta"},{color:"#800000",name:"maroon"},{color:"#000080",name:"navy"},{color:"#808000",name:"olive"},{color:"#ffa500",name:"orange"},{color:"#ffc0cb",name:"pink"},{color:"#800080",name:"purple"},{color:"#800080",name:"violet"},{color:"#ff0000",name:"red"},{color:"#c0c0c0",name:"silver"},{color:"#ffffff",name:"white"}];class lc extends Te{constructor(){super();this.colors={boolean:"#f00",number:"#fff",plant:"#65e2a0",vec3:"#6363C7"},this.index=0}setType(e){e in this.colors||(this.colors[e]=rc[this.index].color,this.index++),this.emit(e,this.colors[e])}on(e,t){return this.setType(e),t(this.colors[e]),super.on(e,t)}}class ac extends Te{constructor(e){super();var t,s,i,r;this.colorStore=new lc,this.width=0,this.height=0,this.top=0,this.left=0,this.x=window.innerWidth/2,this.y=window.innerHeight/2,this.s=1,this.mx=0,this.my=0,this.mdx=0,this.mdy=0,this.rmx=0,this.rmy=0,this.mouseDown=!1,this.keyMap={},this.selectedNodes=[],this.selectedNodesDown=[],this.clipboard=[],this.system=e,this.wrapper=(s=(t=e.options)==null?void 0:t.wrapper)!=null?s:document.createElement("div"),this.wrapper.classList.add("nodesystem-wrapper"),e.options.parent&&e.options.parent.appendChild(this.wrapper),this.transformWrapper=document.createElement("div"),this.transformWrapper.classList.add("nodesystem-transform"),this.wrapper.appendChild(this.transformWrapper),this.nodeContainer=document.createElement("div"),this.nodeContainer.classList.add("nodes-container"),this.transformWrapper.append(this.nodeContainer),this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("viewBox","0 0 1 1"),this.svg.setAttribute("height","1"),this.svg.setAttribute("width","1"),this.svg.setAttribute("preserveAspectRatio","none"),this.svg.style.transform=`scale(${(i=window.devicePixelRatio)!=null?i:1})`,this.transformWrapper.appendChild(this.svg),this.addMenu=new sc(this),this.boxSelection=new nc(this),this.boxSelection.on("selection",o=>{this.selectedNodes=o}),this.dpr=(r=window.devicePixelRatio)!=null?r:1,this.bindEventListeners(),this.handleResize()}createFloatingConnection(e){new oc(e,{x:this.mx,y:this.my}).once("connection",({inputNode:s,outputNode:i,keyIn:r,indexOut:o})=>{i.connectTo(s,o,r)})}setActive(e,{shiftKey:t=!1,ctrlKey:s=!1}={}){if(!e)this.activeNode&&(this.activeNode.view.state="normal",this.activeNode=void 0),this.selectedNodes.forEach(i=>i.view.state="normal"),this.selectedNodes=[];else if(t&&s){if(this.activeNode&&(this.activeNode.view.state="normal",this.activeNode=void 0),this.activeNode=e,this.activeNode.view.state="active",this.activeNode.outputs.length){const i=this.system.createNode({state:{},attributes:{type:"debug",id:"0",name:"debug",refs:[],pos:{x:this.activeNode.view.x+this.activeNode.view.width+10,y:this.activeNode.view.y}}});i.enableUpdates=!0,this.activeNode.connectTo(i,0,"input")}}else t?this.activeNode?(this.selectedNodes.push(this.activeNode),this.activeNode.view.state="selected",this.activeNode=e,this.activeNode.view.state="active"):(this.activeNode=e,this.activeNode.view.state="active"):this.activeNode?(this.selectedNodes.forEach(i=>i.view.state="normal"),this.selectedNodes=[],this.activeNode!==e&&(this.activeNode.view.state="normal",this.activeNode=e,this.activeNode.view.state="active")):(this.activeNode=e,this.activeNode.view.state="active")}getSelectedNodes(){return this.activeNode&&this.selectedNodes.includes(this.activeNode)?this.selectedNodes:this.activeNode?[...this.selectedNodes,this.activeNode]:[...this.selectedNodes]}projectLocalToWindow(e,t){const s=e+this.x,i=t+this.y,r=s*this.s,o=i*this.s;return{x:r,y:o}}projectWindowToLocal(e,t){const s=e-this.x,i=t-this.y,r=s/this.s,o=i/this.s;return{x:r,y:o}}setTransform({x:e=this.x,y:t=this.y,s=this.s}={}){this.x=e,this.y=t,this.s=s/this.dpr,this.panzoom.setTransform(e,t,s/this.dpr)}showAddMenu(){this.addMenu.show({x:this.rmx,y:this.rmy}).then(e=>{const t=this.system.createNode(e);this.setActive(t)}).catch()}bindEventListeners(){window.addEventListener("keydown",e=>this.handleKeyDown(e)),window.addEventListener("keyup",e=>this.handleKeyUp(e)),this.wrapper.addEventListener("mousemove",e=>this.handleMouseMove(e)),this.wrapper.addEventListener("contextmenu",e=>{e.preventDefault(),this.showAddMenu()}),this.wrapper.addEventListener("mousedown",e=>this.handleMouseDown(e)),this.wrapper.addEventListener("touchdown",e=>this.handleMouseDown(e)),this.wrapper.addEventListener("mouseup",e=>this.handleMouseUp(e)),window.addEventListener("resize",Wt(()=>this.handleResize(),10)),this.panzoom=Ra(this.transformWrapper,{minZoom:.2,maxZoom:5,onTransform:({x:e,y:t,scale:s})=>{this.x=e,this.y=t,this.s=s;const i=(s-.2)/5/2,r=s*this.height*.02,o=s*this.width*.02;this.wrapper.style.setProperty("--scale",Math.abs(i)+""),this.wrapper.style.setProperty("--scale-x",r+"%"),this.wrapper.style.setProperty("--scale-y",o+"%"),this.wrapper.style.setProperty("--pos-x",`${e}px`),this.wrapper.style.setProperty("--pos-y",`${t}px`),this.system.setMetaData({transform:{x:e,y:t,s}})}})}handleResize(){const{width:e,height:t,top:s,left:i}=this.wrapper.getBoundingClientRect();this.width=e,this.height=t,this.top=s,this.left=i,this.emit("resize",{width:e,height:t})}handleMouseMove(e){this.ev=e;const{clientX:t,clientY:s,shiftKey:i,ctrlKey:r}=e;this.rmx=t-this.left,this.rmy=s-this.top;const{x:o,y:l}=this.projectWindowToLocal(this.rmx,this.rmy);this.mx=o,this.my=l,this.emit("mousemove",{x:o,y:l,mx:this.rmx,my:this.rmy,keys:De(ce({},this.keyMap),{shiftKey:i,ctrlKey:r})})}handleMouseDown(e){const{shiftKey:t,ctrlKey:s,clientX:i,clientY:r,button:o,target:l}=e;t||this.setActive(),e.path&&![...e.path].includes(this.addMenu.wrapper)&&(this.addMenu.hide(),e.preventDefault()),this.mouseDown=!0,this.rmx=i-this.left,this.rmy=r-this.top;const{x:a,y:c}=this.projectWindowToLocal(this.rmx,this.rmy);this.mx=a,this.my=c,this.selectedNodesDown=this.selectedNodes.map(u=>[u.view.x,u.view.y]),this.emit("mousedown",{x:a,y:c,mx:this.rmx,my:this.rmy,target:l,keys:De(ce({},this.keyMap),{shiftKey:t,ctrlKey:s,button:o})})}handleMouseUp({clientX:e,clientY:t,shiftKey:s,ctrlKey:i}){this.mouseDown=!1;const r=e-this.left,o=t-this.top;this.emit("mouseup",{x:r,y:o,keys:De(ce({},this.keyMap),{shiftKey:s,ctrlKey:i})})}handleKeyUp({key:e}){e===" "&&(e="space"),delete this.keyMap[e&&e.toLowerCase()],this.emit("keyup",{key:e,keys:this.keyMap})}handleKeyDown({key:e,ctrlKey:t,shiftKey:s}){switch(e=e===" "?"space":e.toLowerCase(),this.keyMap[e&&e.toLowerCase()]=!0,e==="space"&&this.ev&&this.handleMouseDown(this.ev),e){case"escape":this.addMenu.hide();break;case"a":s&&this.showAddMenu();break;case"c":if(s&&t)localStorage.clear(),window.location.reload();else if(t){const i=this.selectedNodes.splice(0);this.activeNode&&!i.includes(this.activeNode)&&i.push(this.activeNode),this.clipboard=i.map(r=>r.deserialize())}else this.selectedNodes.length&&this.activeNode&&this.selectedNodes[0].connectTo(this.activeNode);break;case"f":this.setTransform({x:0,y:0,s:1});break;case"g":this.keyMap.g||(this.mdx=this.mx,this.mdy=this.my,this.selectedNodesDown=this.selectedNodes.map(i=>[i.view.x,i.view.y]));break;case"x":this.activeNode&&(t?this.system.spliceNode(this.activeNode):this.system.removeNode(this.activeNode)),this.selectedNodes.forEach(i=>i.remove());break;case"z":this.system.history&&t&&(s?this.system.history.redo():this.system.history.undo());break;case"l":this.activeNode&&(console.log(this.activeNode),console.log(this.activeNode.deserialize()));break;case"v":if(t){const i=this.clipboard.sort((c,u)=>{const{pos:{x:h=0,y:m=0}={}}=c.attributes,{pos:{x:d=0,y:f=0}={}}=u.attributes;return h+m<d+f?-1:1});let{pos:{x:r=0,y:o=0}={}}=i[0].attributes;const{x:l,y:a}=this.projectWindowToLocal(this.mx,this.my);r-=l,o-=a,this.clipboard.map(c=>{const{pos:{x:u=0,y:h=0}={}}=c.attributes;return c.attributes.pos={x:u-r,y:h-o},c}).forEach(c=>this.system.createNode(c))}break}this.emit("keydown",{key:e,keys:De(ce({},this.keyMap),{ctrlKey:t})})}}const Ns=ge("NodeFactory");class cc{constructor(e){this.id=Qr(),this.system=e,Ns("Initialized")}reset(){this.id.reset(),Ns("Reset id generator")}create(e){const{attributes:t}=e,s=t.type.toLowerCase(),i=this.system.store.getByName(s);t.id=this.id(+t.id);const r=new i.node(this.system,e);if(this.system.options.view&&i.view){const o=new i.view(r);r.bindView(o)}return s==="output"&&this.system.setOutputNode(r),Ns(`Created node with type ${t.type}`,e),r}}const qt=ge("NodeHistory");class uc{constructor(e){this.system=e,this.history=[],this.historyIndex=-1,this.isApplyingChanges=!1,this.addAction=(()=>{let t;return()=>{!this.system.isLoaded||this.isApplyingChanges||(t?clearTimeout(t):this.prevState=this.system.serialize().nodes,t=setTimeout(()=>{this._addAction(),t=void 0},200))}})().bind(this),qt("Initialized")}_addAction(){if(qt("Register History Step"),this.isApplyingChanges)return;this.historyIndex!==this.history.length-1&&(this.history.length=this.historyIndex+1);const e=this.system.serialize().nodes,[t,s]=Wa(this.prevState,e);!s||!t||(this.history.push({previous:s,next:t}),this.history.length>60&&(this.history=this.history.reverse().slice(0,60).reverse()),this.historyIndex=this.history.length-1)}serialize(){return{steps:this.history,index:this.historyIndex}}deserialize(e){this.historyIndex=e.index,this.history=e.steps}undo(){if(this.isApplyingChanges)return;if(this.isApplyingChanges=!0,this.historyIndex<0){qt("Reached beginning of Stack"),this.isApplyingChanges=!1;return}const{previous:e}=this.history[this.historyIndex],t=this.system.serialize(),s=Yt(t.nodes,e);t.nodes=s,this.system.load(t),this.historyIndex--,this.isApplyingChanges=!1}redo(){if(this.isApplyingChanges)return;if(this.isApplyingChanges=!0,this.historyIndex>=this.history.length-1){qt("Reached end of Stack"),this.isApplyingChanges=!1;return}const{next:e}=this.history[this.historyIndex+1],t=this.system.serialize(),s=Yt(t.nodes,e);t.nodes=s,this.system.load(t),this.historyIndex++,this.isApplyingChanges=!1}}class hc{constructor(e){this.system=e}parseSystem(e){const{nodes:t}=e,s=new Map,i=t.map(r=>{const o=this.system.factory.create(r);return o.enableUpdates=!1,s.set(o.id,o),o});return i.forEach(r=>{r.attributes.refs&&r.attributes.refs.forEach(o=>{const l=s.get(o.id);if(!l)throw new Error(`Failed ref: from ${r.attributes.name||r.attributes.id} to ${o.id} `);r.connectTo(l,o.out,o.in)})}),i.forEach(r=>{r.enableUpdates=!0,r.update()}),i}parseType(e){const{compute:t,meta:s,outputs:i,title:r,parameters:o}=e,l=class extends Ss{constructor(c,u){super(c,u);if(t&&(this.compute=t),i){const h=Array.isArray(i)?i:[i];this.outputs=h.map(m=>new Xt(this,m))}Object.entries(o).forEach(([h,m])=>{this.states[h]=new Ps(this,h,m)})}},a=Object.values(o).filter(c=>c.internal!==!0).map(c=>c.type);if(this.system.options.view){const c=class extends Ms{constructor(h){super(h)}};return De(ce({},e),{inputs:a,title:r,meta:s,node:l,view:c})}return De(ce({inputs:a},e),{title:r,meta:s,node:l})}getData(){return{meta:this.system.meta,nodes:this.system.nodes.map(e=>e.deserialize())}}}const fc=ge("NodeTypeStore");class dc extends Te{constructor(){super();this.types=[],this.typeMap={}}add(e){fc("register new type "+e.title,e),this.types=[...this.types.filter(t=>t.title.toLowerCase()!==e.title.toLowerCase()),e],this.typeMap[e.title.toLowerCase()]=e,this.emit("types",this.types),this.emit("type",e)}getByName(e){if(e.toLowerCase()in this.typeMap)return this.typeMap[e.toLowerCase()];if(e in this.typeMap)return this.typeMap[e];throw new Error("NodeTypeStore: type "+e+" does not exist")}}var pc=Object.defineProperty,mc=Object.getOwnPropertyDescriptor,vc=(n,e,t,s)=>{for(var i=s>1?void 0:s?mc(e,t):e,r=n.length-1,o;r>=0;r--)(o=n[r])&&(i=(s?o(e,t,i):o(i))||i);return s&&i&&pc(e,t,i),i};let gc=0;const St=ge("NodeSystem");class $s extends Te{constructor(e={}){super();this.parser=new hc(this),this.meta={lastSaved:Date.now()},this.isLoaded=!1,this.isPaused=!1,this.nodes=[],this.states=[],this.id=gc++;const{view:t=!1,wrapper:s,defaultNodes:i=!1,registerNodes:r=!1}=e;this.options={view:t,wrapper:s};try{if(St(`Instantiated id:${this.id}`),this.store=new dc,this.factory=new cc(this),this.history=new uc(this),t&&(this.view=new ac(this)),i){const o=[];i===!0?o.push(...Object.entries(xs).map(l=>l[1])):Array.isArray(i)&&i.length&&i.forEach(l=>{typeof l=="string"&&l in xs&&o.push(xs[l])}),o.forEach(l=>this.registerNodeType(l))}r&&r.length&&r.forEach(this.registerNodeType.bind(this))}catch(o){this.emit("error",{type:"init",error:o})}}get result(){return this._result}set result(e){this._result=e,this.isLoaded&&this.emit("result",e)}setMetaData(e){this.meta=ce(ce({},this.meta),e),this.save()}load(e){var t;try{this.isLoaded=!1,this.isPaused=!0,this.nodes.forEach(i=>i.enableUpdates=!1),this.nodes.forEach(i=>i.remove()),this.factory.reset();const s=this.parser.parseSystem(e);return this.addNodes(s),this.meta=e.meta||{lastSaved:0},this.meta.lastSaved=Date.now(),(t=this==null?void 0:this.view)==null||t.setTransform(this.meta.transform),St(`Loaded NodeSystemData with ${s.length} Nodes`,e),"history"in e&&this.history.deserialize(e.history),this.isPaused=!1,this.isLoaded=!0,this.result=this._result,this}catch(s){this.emit("error",{type:"loading",error:s})}}serialize(){return De(ce({},this.parser.getData()),{history:this.history.serialize(),meta:this.meta})}save(){this.isLoaded&&(this.meta.lastSaved=Date.now(),St("save system",this.serialize()),this.emit("save",this.serialize()))}setOutputNode(e){this.outputNode&&this.outputNode.remove(),this.outputNode=e,e.on("computedData",t=>this.result=t)}addNodes(e){e.forEach(t=>this.addNode(t))}addNode(e){this.history.addAction(),this.nodes.push(e),this.save()}removeNode(e){this.history.addAction(),e.enableUpdates=!1,e.view.remove(),Object.values(e.states).forEach(t=>t.remove()),e.outputs.forEach(t=>t.remove()),e.getInputs().forEach(t=>t.remove()),this.nodes=this.nodes.filter(t=>t!==e),this.save(),St(`Removed Node id:${e.id} type:${e.attributes.type}`,e.deserialize())}spliceNode(e){const t=e.getInputs().map(i=>{var r;return(r=i==null?void 0:i.connection)==null?void 0:r.output}),s=e.outputs.map(i=>i.connections).flat().map(i=>i.input);for(let i=0;i<t.length;i++){const r=t[i],o=s[i];!o||!r||r.connectTo(o)}return this.removeNode(e)}getSockets(e){const t=this.nodes.map(s=>[...s.getSockets()]).flat();return e?t.filter(s=>s.type===e):t}getInputs(e){const t=this.nodes.map(s=>s.getInputs()).flat();return!e||e==="*"?t:t.filter(s=>s.type.includes("*")||s.type.includes(e))}getOutputs(e){const t=this.nodes.map(s=>s.outputs).flat();return!e||e.includes("*")?t:t.filter(s=>s.type==="*"||e.includes(s.type))}createNode(e){const t=this.factory.create(e);return this.addNode(t),this.save(),St(`Created new node id:${e.attributes.id} type:${e.attributes.type}`,e),t}getNodes(){return this.nodes}findNodeById(e){return this.nodes.filter(t=>t.id===e)[0]}getNodeTypes(){return this.store.types}registerNodeType(e){if("node"in e)this.store.add(e);else{const t=this.parser.parseType(e);this.store.add(t)}}}vc([Zr(1e3)],$s.prototype,"save",1);const _c="localStorage"in globalThis&&JSON.parse(localStorage.getItem("pt_local_state")),Pt=ce({},_c),wc=jn((n,e)=>{Pt[n]=e,localStorage.setItem("pt_local_state",JSON.stringify(Pt))},100,!1);var Ie={get(n,e){var t;return Pt[n]=(t=Pt[n])!=null?t:e,Pt[n]},set:wc};var Ih=(()=>{let n=Math.random();return()=>(n=n>0?n-Math.random():n+Math.random(),n.toString().split(".")[1])})();const yc={};ks.forEach(n=>{yc[n.type]=n,"computeSkeleton"in n&&(n.computeSkeleton=rs(n.computeSkeleton)),"computeGeometry"in n&&(n.computeGeometry=rs(n.computeGeometry)),"computeValue"in n&&(n.computeValue=rs(n.computeValue))});const Lh=ge("gen.plant");function bc(){return new Worker("/_app/assets/webWorker.72cd4916.js",{type:"module"})}var Si=()=>{if(!("window"in globalThis))return;const n=bc(),e=qo(n);let t=!1;async function s(i,r){if(t)return;t=!0;const o=await e.plant(i,r);return t=!1,o}return{plant:s}};let Pi=0;class Mi extends Te{constructor({canvas:e,width:t,height:s,clearColor:i="ffffff",alpha:r=!1,camPos:o=[0,2,4]}={}){super();if(this.scene=new Jo,this.lastCamPos=new et(0,0,0),this.canvas=e,(!t||!s)&&e){const l=e.getBoundingClientRect();t=l.width,s=l.height}this.renderer=new Zo({canvas:e,width:t,premultipliedAlpha:!0,height:s,alpha:r,antialias:!0,dpr:1}),this.gl=this.renderer.gl,this.gl.clearColor(...Vn(i),0),this.renderer.gl.canvas&&(this.canvas=this.renderer.gl.canvas),this.camera=new Ko(this.gl,{fov:70,aspect:t/s}),this.lastCamPos.set(o),this.camera.position.set(o),this.camera.lookAt(new et(0,0,0)),e&&(this.controls=new Qo(this.camera,{element:e,target:new et(0,.2,0),maxPolarAngle:1.6,minDistance:.2,maxDistance:15,ease:.7,rotateSpeed:.5,inertia:.5})),this.bindEventlisteners(),e&&this.render()}setControlTarget(e){Number.isNaN(e.x)||(this.controlTarget||(this.controls.target=e),this.controlTarget=e)}setClearColor(e){this.gl.clearColor(...Vn(e),1)}renderScene(e){this.renderer.render({scene:e,camera:this.camera})}render(){requestAnimationFrame(this.render.bind(this)),this.lastCamPos.equals(this.camera.position)||(this.lastCamPos.set(this.camera.position),this.emit("camPos",this.camera.position.toArray())),this.controlTarget&&(this.controlTarget.squaredDistance(this.controls.target)<5e-5?this.controls.target=this.controlTarget:this.controls.target.lerp(this.controlTarget,.05)),window.target=this.controls.target,this.controls.update(),this.renderer.render({scene:this.scene,camera:this.camera}),this.emit("perf",performance.now()-Pi),Pi=performance.now()}bindEventlisteners(){const e=Wt(()=>this.handleResize(),500);window.addEventListener("resize",()=>{this.canvas.classList.add("resizing"),e()})}handleResize(){let e=this.canvas.parentElement;e||(e=this.canvas);const{width:t,height:s}=e.getBoundingClientRect();this.renderer.setSize(t,s),this.camera.perspective({aspect:this.gl.canvas.width/this.gl.canvas.height}),this.canvas.classList.remove("resizing")}}var kc=`precision highp float;precision highp int;
#define GLSLIFY 1
uniform float uTime;uniform sampler2D tMap;uniform vec3 uFogColor;uniform float uFogNear;uniform float uFogFar;uniform float texScale;varying vec2 vUv;varying vec4 vMVPos;varying vec3 vPos;void main(){vec3 tex=texture2D(tMap,vUv*texScale).rgb;float dist=length(vMVPos);float fog=smoothstep(uFogNear,uFogFar,dist);tex=mix(tex,uFogColor,fog);tex=mix(tex,uFogColor,smoothstep(0.0,-1.0,vPos.y));gl_FragColor.rgb=tex;}`,Ec=`precision highp float;precision highp int;
#define GLSLIFY 1
attribute vec2 uv;attribute vec3 position;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform float uTime;varying vec2 vUv;varying vec4 vMVPos;varying vec3 vPos;void main(){vUv=uv;vec3 pos=position;vPos=pos;vMVPos=modelViewMatrix*vec4(pos,1.0);gl_Position=projectionMatrix*vMVPos;}`,Sc=`#version 300 es
precision highp float;
#define varying in
#define texture2D texture
#define gl_FragColor FragColor
out vec4 FragColor;precision highp float;
#define GLSLIFY 1
uniform sampler2D tMap;varying vec4 vMVPos;vec3 normals(vec3 pos){vec3 fdx=dFdx(pos);vec3 fdy=dFdy(pos);return normalize(cross(fdx,fdy));}vec2 matcap(vec3 eye,vec3 normal){vec3 reflected=reflect(eye,normal);float m=2.8284271247461903*sqrt(reflected.z+1.0);return reflected.xy/m+0.5;}void main(){vec3 normal=normals(vMVPos.xyz);vec3 mat=texture2D(tMap,matcap(normalize(vMVPos.xyz),normal)).rgb;gl_FragColor.rgb=mat;gl_FragColor.a=1.0;}`,Pc=`#version 300 es
#define GLSLIFY 1
#define attribute in
#define varying out
attribute vec3 position;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;varying vec4 vMVPos;void main(){vMVPos=modelViewMatrix*vec4(position,1.0);gl_Position=projectionMatrix*vMVPos;}`,Mc=`precision highp float;
#define GLSLIFY 1
float pointSize=0.02;varying float distToCamera;void main(){vec2 uv=gl_PointCoord.xy;float dist=2.0-distToCamera;float circle=pointSize*dist>length(uv-0.5)?0.8:0.0;float xMask=min(abs(uv.x-0.5),abs(uv.y-0.5));circle=xMask>0.003?0.0:circle;gl_FragColor.rgb=vec3(0.0,0.0,0.0);gl_FragColor.a=circle;}`,xc=`#define GLSLIFY 1
attribute vec3 position;uniform mat4 modelMatrix;uniform mat4 viewMatrix;uniform mat4 projectionMatrix;varying float distToCamera;void main(){vec4 mPos=modelMatrix*vec4(position,1.0);vec4 mvPos=viewMatrix*mPos;gl_PointSize=300.0/length(mvPos.xyz);distToCamera=-mvPos.z/10.0+1.0;gl_Position=projectionMatrix*mvPos;}`,Nc=`precision highp float;precision highp int;
#define GLSLIFY 1
void main(){gl_FragColor=vec4(1.,.9,.4,.7);}`,$c=`precision highp float;precision highp int;
#define GLSLIFY 1
attribute vec2 uv;attribute vec3 position;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform mat3 normalMatrix;void main(){gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}`;const xi={fragment:kc,vertex:Ec},Ni={fragment:Nc,vertex:$c},$i={fragment:Mc,vertex:xc},Ii=n=>{const e=new fn(n),t=new Image;return t.onload=()=>e.image=t,t.src="assets/matcap_green.jpg",new At(n,{vertex:Pc,fragment:Sc,uniforms:{tMap:{value:e}},cullFace:null})},Ic=Si(),_e=new Mi({width:100,height:100,alpha:!0,clearColor:"000"}),Li=new $s({view:!1,defaultNodes:!1,registerNodes:ks}),Ke=new mn(_e.gl,{geometry:new vn(_e.gl,{width:0,height:0,depth:0}),program:Ii(_e.gl)}),Mt=document.createElement("canvas");Mt.width=Mt.height=100;const ut=Mt.getContext("2d");Ke.setParent(_e.scene);async function Lc({pd:n,geo:e}){Li.load(n);const t=Li.result;let s;if(e&&(s=e),n&&!s&&(s=(await(await Ic).plant(t,{stemResX:12,stemResY:12})).geometry),!s)return;Ke.geometry=ws(_e.gl,s),Ke.geometry.computeBoundingBox(),_e.camera.position.x=Ke.geometry.bounds.center.x,_e.camera.position.y=Ke.geometry.bounds.center.y;const r=(Ke.geometry.bounds.max.y-Ke.geometry.bounds.center.y)*2/2/Math.tan(Math.PI*_e.camera.fov/360);if(_e.camera.position.z=r,_e.camera.lookAt(Ke.geometry.bounds.center),_e.renderScene(_e.scene),!(_e.canvas.width===0||_e.canvas.height===0)){ut.clearRect(0,0,100,100);for(let o=0;o<1;o++)ut.drawImage(Mt,0,0),ut.drawImage(_e.canvas,0,0),ut.filter="blur(7px) opacity(0.6) brightness(0.95)";return ut.filter="blur(0px) drop-shadow(0px 0px 10px rgba(0, 0, 0, 0.8))",ut.drawImage(_e.canvas,0,0),Mt.toDataURL("image/webp",1)}}class Tc{constructor(e,t,s){this.name=e,this.version=t,this.os=s,this.type="browser"}}class Vc{constructor(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}}class jc{constructor(e,t,s,i){this.name=e,this.version=t,this.os=s,this.bot=i,this.type="bot-device"}}class Dc{constructor(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}}class Cc{constructor(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}}const Oc=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Ac=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Ti=3,Rc=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Oc]],Vi=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ji(n){return n?Di(n):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new Cc:typeof navigator!="undefined"?Di(navigator.userAgent):Fc()}function Bc(n){return n!==""&&Rc.reduce((e,[t,s])=>{if(e)return e;const i=s.exec(n);return!!i&&[t,i]},!1)}function Di(n){const e=Bc(n);if(!e)return null;const[t,s]=e;if(t==="searchbot")return new Dc;let i=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);i?i.length<Ti&&(i=[...i,...Wc(Ti-i.length)]):i=[];const r=i.join("."),o=zc(n),l=Ac.exec(n);return l&&l[1]?new jc(t,r,o,l[1]):new Tc(t,r,o)}function zc(n){for(let e=0,t=Vi.length;e<t;e++){const[s,i]=Vi[e];if(i.exec(n))return s}return null}function Fc(){return typeof process!="undefined"&&process.version?new Vc(process.version.slice(1)):null}function Wc(n){const e=[];for(let t=0;t<n;t++)e.push("0");return e}function Uc(){return"window"in globalThis}let Ci={};(()=>{"sessionStorage"in globalThis||(globalThis.sessionStorage={getItem:n=>{},setItem:(n,e)=>{}})})();if("user"in sessionStorage)try{Ci=JSON.parse(sessionStorage.getItem("user"))}catch{}const Oi=Se(Ci);Oi.subscribe(n=>{sessionStorage.setItem("user",JSON.stringify(n))});const Jt=Oi,{VITE_API_URL:Hc="http://localhost:3000"}={VITE_API_URL:"https://plant-api.jim-fx.com",VITE_SVELTEKIT_AMP:"",BASE_URL:"/_app/",MODE:"production",DEV:!1,PROD:!0};function Gc(n){const t=n.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(t).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(s)}const Ai=Uc(),Zt=(()=>{let n=Ai&&localStorage.getItem("token");function e(){if(!n||n.length<10){Jt.set({});return}const t=Gc(n);Jt.set({username:t.username,id:t.sub})}return e(),{set token(t){n=t,Ai&&localStorage.setItem("token",t),e()},get token(){return n}}})();async function Ge({method:n,path:e,data:t,isJSON:s=!0}){const i={method:n,headers:{}};t&&(i.headers["Content-Type"]="application/json",i.body=JSON.stringify(t)),Zt.token&&(i.headers["access-token"]=`Bearer ${Zt.token}`);const r=await fetch(`${Hc}/${e}`,i);if(r.ok){if(s)try{return await r.json()}catch(l){console.error("Response from "+e+" failed to parse"),console.error(l)}return r.text()}const o=await r.json();return console.error(o),o}function Ri(n,e={}){return Ge(ce({method:"GET",path:n},e))}function Yc(n){return Ge({method:"DELETE",path:n})}function Xc(n,e){return Ge({method:"POST",path:n,data:e})}function qc(n){return Ge({method:"GET",path:`api/report/${n}`})}function Jc(n){return Ge({method:"PUT",path:`api/report/${n}/publish`})}function Zc(n){return Ge({method:"PUT",path:`api/report/${n}/unpublish`})}function Kc(){return Ge({method:"GET",path:"api/report/labels"})}function Qc(n,e){return Ge({method:"PUT",path:`api/report/${n}`,data:{labels:e}})}var eu=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getReport:qc,publishReport:Jc,unpublishReport:Zc,getAvailableLabels:Kc,setReportLabels:Qc});async function tu(n,e){const t=await Xc("api/auth/login",{username:n,password:e});Zt.token=t.access_token}function su(){Zt.token=""}function Bi(n){return Ge({method:"POST",path:"api/report",data:n})}function nu(n){return Yc(`api/report/${n}`)}async function iu(){const n=await Ri("api/user/role",{isJSON:!1});return Jt.update(e=>(e.role=n,e)),n}async function ou(){const n=await Ri("api/user/permission");return Jt.update(e=>(e.permissions=n,e)),n}var ru=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",login:tu,logout:su,submitReport:Bi,deleteReport:nu,getRole:iu,getPermission:ou});ce(ce({},eu),ru);const Ve=ge("ProjectManager"),Is="pt_project_";class lu extends Te{constructor(){super();this.activeProject=Se(),this.projects={},this.store=Se([]),this.loadProjects()}createNewProject(){const e=Object.values(this.projects).filter(s=>/^DefaultProject((\d)+)?/.test(s.meta.name)).length,t={meta:{name:"DefaultProject"+(e||""),id:ss(),transform:{x:0,y:0,s:1}},nodes:[{attributes:{pos:{x:-100,y:0},type:"stem",id:"1",refs:[{id:"0",in:"main",out:0}]}},{attributes:{pos:{x:0,y:0},type:"output",id:"0",refs:[]}}]};return Ve("created new plant",t),t}createNew(){const e=this.createNewProject();this.emit("new",e),this.saveProject(e)}async updateProjectMeta(e,t){const s=await this.getProject(e);s.meta=ce(ce({},s.meta),t),Ve("update meta",e),this.emit("update",s),this.saveProject(s)}async saveProject(e){var s;const t=JSON.parse(JSON.stringify(e));this.projects[t.meta.id]=t,this.emit("save",t),((s=t==null?void 0:t.meta)==null?void 0:s.thumbnail)||this.renderThumbnail({project:t}),await Ae.setItem("pt_project_ids",Object.keys(this.projects)),await Ae.setItem(Is+t.meta.id,t),Ve("saved plant id: ",t.meta.id),this.store.set(Object.values(this.projects))}async getProject(e){if(e in this.projects)return this.projects[e];const t=await Ae.getItem(Is+e);return this.projects[e]=t,t}async deleteProject(e){e in this.projects?(delete this.projects[e],await Ae.removeItem(Is+e),await Ae.setItem("pt_project_ids",Object.keys(this.projects)),this.store.set(Object.values(this.projects)),this.emit("delete",e),Ve("deleted project with id: "+e)):Ve.warn("cant delete project with id: "+e)}async setActiveProject(e){if(this.loadingActiveProject&&await this.loadingActiveProject,e===this.activeProjectId)return;this.activeProjectId=e,this.loadingActiveProject=this.getProject(e);const t=await this.loadingActiveProject;this.loadingActiveProject?(this.activeProjectId=e,this.saveProject(t),this.activeProject.set(t),await Ae.setItem("pt_active_id",e),Ve("set active project to id: "+e),this.emit("load",t),delete this.loadingActiveProject):Ve.warn("cant find plant with id: "+e)}async renderThumbnail({project:e,geo:t}){var o;const s=((o=e==null?void 0:e.meta)==null?void 0:o.id)||this.activeProjectId;if(!(s in this.projects))return;const i=performance.now(),r=await Lc(t?{geo:t}:{pd:e});if(r){const l=performance.now()-i;this.projects[s].meta.thumbnail=r,Ve("generated thumbnail for "+s+" in "+Math.floor(l)+"ms"),this.saveProject(this.projects[s]),this.store.set(Object.values(this.projects))}else Ve.warn("There was an error rendering a thumbnail for: "+s)}async loadProjects(){const e=await Ae.getItem("pt_project_ids")||[];Ve("loaded project ids",e);const t=await Ae.getItem("pt_active_id");if(!e.length){const s=this.createNewProject();e.push(s.meta.id),await this.saveProject(s)}await Promise.all(e.map(async s=>{const i=await this.getProject(s);Ve("loaded ",s),this.projects[s]=i})),t&&e.includes(t)?this.setActiveProject(t):this.setActiveProject(e[0]),this.store.set(Object.values(this.projects))}setProject(e){this.plant=e,this.emit("plant",e)}getActiveProject(){return this.plant}setSettings(e){this.emit("settings",e)}}function au(n){let e,t,s,i,r,o,l,a,c,u=Dn(Date.now()-n[0].meta.lastSaved)+"",h,m,d,f,p,g,_,N,E,b;return{c(){e=P("div"),t=P("div"),s=j(),i=P("div"),r=P("div"),o=P("input"),a=j(),c=P("p"),h=O(u),m=O(" ago"),d=j(),f=P("div"),p=j(),g=P("div"),_=P("button"),N=O("delete"),this.h()},l(x){e=M(x,"DIV",{class:!0});var S=k(e);t=M(S,"DIV",{class:!0,style:!0});var C=k(t);C.forEach(v),s=D(S),i=M(S,"DIV",{class:!0});var V=k(i);r=M(V,"DIV",{class:!0});var Y=k(r);o=M(Y,"INPUT",{contenteditable:!0,class:!0}),a=D(Y),c=M(Y,"P",{class:!0});var W=k(c);h=A(W,u),m=A(W," ago"),W.forEach(v),Y.forEach(v),d=D(V),f=M(V,"DIV",{class:!0}),k(f).forEach(v),p=D(V),g=M(V,"DIV",{class:!0});var ie=k(g);_=M(ie,"BUTTON",{class:!0});var U=k(_);N=A(U,"delete"),U.forEach(v),ie.forEach(v),V.forEach(v),S.forEach(v),this.h()},h(){w(t,"class","project-image svelte-cu2aw0"),B(t,"background-image","url("+n[0].meta.thumbnail+")"),w(o,"contenteditable",""),o.value=l=n[0].meta.name,w(o,"class","svelte-cu2aw0"),w(c,"class","svelte-cu2aw0"),w(r,"class","project-content-header svelte-cu2aw0"),w(f,"class","project-content-main svelte-cu2aw0"),w(_,"class","delete svelte-cu2aw0"),w(g,"class","project-content-footer svelte-cu2aw0"),w(i,"class","project-content svelte-cu2aw0"),w(e,"class","project-wrapper svelte-cu2aw0"),G(e,"active",n[0].meta.id===de.activeProjectId||n[1])},m(x,S){I(x,e,S),y(e,t),y(e,s),y(e,i),y(i,r),y(r,o),y(r,a),y(r,c),y(c,h),y(c,m),y(i,d),y(i,f),y(i,p),y(i,g),y(g,_),y(_,N),E||(b=[X(o,"blur",n[3]),X(o,"keydown",n[4]),X(_,"click",is(n[5])),X(e,"resize",alert),X(e,"click",n[6])],E=!0)},p(x,[S]){S&1&&B(t,"background-image","url("+x[0].meta.thumbnail+")"),S&1&&l!==(l=x[0].meta.name)&&o.value!==l&&(o.value=l),S&1&&u!==(u=Dn(Date.now()-x[0].meta.lastSaved)+"")&&ue(h,u),S&3&&G(e,"active",x[0].meta.id===de.activeProjectId||x[1])},i:F,o:F,d(x){x&&v(e),E=!1,Je(b)}}}function cu(n,e,t){let{project:s}=e,i=!1;function r(){return t(1,i=!0),setTimeout(()=>{t(1,i=!1)},100),!0}const o=function(){const u=this.value.split(`
`).join("").trim();de.updateProjectMeta(s.meta.id,{name:u})},l=function(u){if(u.key==="Enter"){const h=this.value.split(`
`).join("").trim();this.blur(),u.preventDefault(),de.updateProjectMeta(s.meta.id,{name:h})}},a=()=>de.deleteProject(s.meta.id),c=()=>r()&&de.setActiveProject(s.meta.id);return n.$$set=u=>{"project"in u&&t(0,s=u.project)},[s,i,r,o,l,a,c]}class uu extends oe{constructor(e){super();re(this,e,cu,au,le,{project:0})}}function zi(n,e,t){const s=n.slice();return s[9]=e[t],s}function hu(n){let e;return{c(){e=P("div"),this.h()},l(t){e=M(t,"DIV",{class:!0}),k(e).forEach(v),this.h()},h(){w(e,"class","svelte-7wgw1o")},m(t,s){I(t,e,s)},p:F,d(t){t&&v(e)}}}function fu(n){let e,t,s;return{c(){e=P("input"),this.h()},l(i){e=M(i,"INPUT",{type:!0,class:!0,placeholder:!0}),this.h()},h(){w(e,"type","text"),w(e,"class","search svelte-7wgw1o"),w(e,"placeholder","Search")},m(i,r){I(i,e,r),Ne(e,n[1]),t||(s=X(e,"input",n[8]),t=!0)},p(i,r){r&2&&e.value!==i[1]&&Ne(e,i[1])},d(i){i&&v(e),t=!1,s()}}}function Fi(n){let e,t,s=n[2],i=[];for(let o=0;o<s.length;o+=1)i[o]=Ui(zi(n,s,o));const r=o=>L(i[o],1,1,()=>{i[o]=null});return{c(){e=P("div");for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=M(o,"DIV",{class:!0});var l=k(e);for(let a=0;a<i.length;a+=1)i[a].l(l);l.forEach(v),this.h()},h(){w(e,"class","project-list svelte-7wgw1o")},m(o,l){I(o,e,l);for(let a=0;a<i.length;a+=1)i[a].m(e,null);t=!0},p(o,l){if(l&6){s=o[2];let a;for(a=0;a<s.length;a+=1){const c=zi(o,s,a);i[a]?(i[a].p(c,l),$(i[a],1)):(i[a]=Ui(c),i[a].c(),$(i[a],1),i[a].m(e,null))}for(te(),a=s.length;a<i.length;a+=1)r(a);se()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)$(i[l]);t=!0}},o(o){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)L(i[l]);t=!1},d(o){o&&v(e),Pe(i,o)}}}function Wi(n){let e,t;return e=new uu({props:{project:n[9]}}),{c(){q(e.$$.fragment)},l(s){Q(e.$$.fragment,s)},m(s,i){J(e,s,i),t=!0},p(s,i){const r={};i&4&&(r.project=s[9]),e.$set(r)},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Ui(n){let e=Hi(n[1],n[9]),t,s,i=e&&Wi(n);return{c(){i&&i.c(),t=ee()},l(r){i&&i.l(r),t=ee()},m(r,o){i&&i.m(r,o),I(r,t,o),s=!0},p(r,o){o&6&&(e=Hi(r[1],r[9])),e?i?(i.p(r,o),o&6&&$(i,1)):(i=Wi(r),i.c(),$(i,1),i.m(t.parentNode,t)):i&&(te(),L(i,1,1,()=>{i=null}),se())},i(r){s||($(i),s=!0)},o(r){L(i),s=!1},d(r){i&&i.d(r),r&&v(t)}}}function du(n){let e,t,s,i,r,o,l,a,c,u,h,m;t=new er({}),t.$on("resize",n[6]);function d(_,N){return _[2].length>3?fu:hu}let f=d(n),p=f(n),g=n[0]&&Fi(n);return{c(){e=P("div"),q(t.$$.fragment),s=j(),i=P("div"),r=P("button"),o=P("p"),l=O("new"),a=j(),p.c(),c=j(),g&&g.c(),this.h()},l(_){e=M(_,"DIV",{class:!0,style:!0});var N=k(e);Q(t.$$.fragment,N),s=D(N),i=M(N,"DIV",{class:!0});var E=k(i);r=M(E,"BUTTON",{class:!0});var b=k(r);o=M(b,"P",{class:!0});var x=k(o);l=A(x,"new"),x.forEach(v),b.forEach(v),a=D(E),p.l(E),E.forEach(v),c=D(N),g&&g.l(N),N.forEach(v),this.h()},h(){w(o,"class","svelte-7wgw1o"),w(r,"class","add-new svelte-7wgw1o"),w(i,"class","header svelte-7wgw1o"),w(e,"class","project-manager-wrapper svelte-7wgw1o"),w(e,"style",`width: ${n[4]}px; height: ${n[5]}px;`)},m(_,N){I(_,e,N),J(t,e,null),y(e,s),y(e,i),y(i,r),y(r,o),y(o,l),y(i,a),p.m(i,null),y(e,c),g&&g.m(e,null),u=!0,h||(m=X(r,"click",n[7]),h=!0)},p(_,[N]){f===(f=d(_))&&p?p.p(_,N):(p.d(1),p=f(_),p&&(p.c(),p.m(i,null))),_[0]?g?(g.p(_,N),N&1&&$(g,1)):(g=Fi(_),g.c(),$(g,1),g.m(e,null)):g&&(te(),L(g,1,1,()=>{g=null}),se())},i(_){u||($(t.$$.fragment,_),$(g),u=!0)},o(_){L(t.$$.fragment,_),L(g),u=!1},d(_){_&&v(e),Z(t),p.d(),g&&g.d(),h=!1,m()}}}function Hi(n,e){if(!n||n.length<1)return!0;const t=e.meta.name.toLowerCase();return n=n.toLowerCase(),!!(t.includes(n)||n.includes(t))}function pu(n,e,t){let s;const{store:i}=de;Ce(n,i,m=>t(2,s=m));let{visible:r}=e,o;const{width:l,height:a}=Ie.get("projectManagerSize",{width:300,height:window.innerHeight/2}),c=m=>{r&&Ie.set("projectManagerSize",{width:m.detail.clientWidth,height:m.detail.clientHeight})},u=()=>de.createNew();function h(){o=this.value,t(1,o)}return n.$$set=m=>{"visible"in m&&t(0,r=m.visible)},[r,o,s,i,l,a,c,u,h]}class mu extends oe{constructor(e){super();re(this,e,pu,du,le,{visible:0})}}const Ls={enableSync:{type:"boolean",defaultValue:!1},useRandomSeed:{type:"boolean",defaultValue:!1},theme:{type:"select",values:["dark","light"],defaultValue:"dark"},debug:{onlyDev:!0,options:{renderPerf:{type:"boolean",defaultValue:!1},generatePerf:{type:"boolean",defaultValue:!1},pd:{type:"boolean",defaultValue:!1},skeleton:{type:"boolean",defaultValue:!1},wireframe:{type:"boolean",defaultValue:!1},logLevel:{type:"number",min:0,max:2,defaultValue:1}}},background:{options:{grid:{label:"Show Grid",type:"boolean",defaultValue:!1},ground:{label:"Show Ground",type:"boolean",defaultValue:!0},resX:{onlyDev:!0,type:"number",min:8,max:64,step:1,defaultValue:8},resY:{onlyDev:!0,type:"number",min:8,max:64,step:1,defaultValue:16},scale:{type:"number",min:0,max:5,step:.1,defaultValue:1}}},leafRes:{onlyDev:!0,type:"number",min:3,max:12,step:1,defaultValue:2},stemResX:{onlyDev:!0,type:"number",min:3,max:32,step:1,defaultValue:3},stemResY:{onlyDev:!0,type:"number",min:3,max:64,step:1,defaultValue:32},isDev:{label:"Advanced",type:"boolean",defaultValue:!1}},Kt=ge("SettingsManager"),Gi=(n,e)=>{const t={};return Object.entries(n).forEach(([s,i])=>{var o;const r=e&&s in e?e[s]:void 0;typeof i=="object"&&"options"in i?t[s]=Gi(i.options,r):t[s]=(o=r!=null?r:i.defaultValue)!=null?o:i.value}),t},Ts=(n,e)=>{const t=e.shift();if(t&&t in n)return e.length?Ts(n[t],e):n[t]},Yi=n=>n.includes(".")?n.split("."):[n];class vu extends Te{constructor(){super();this.settings={},this.store=Se(this.settings),Kt("Initialized"),this._save=jn(()=>{Ae.setItem("pt_settings",this.settings)},500,!1)}save(){var e,t,s;this.emit("settings",this.settings),ge.setLevel((s=(t=(e=this.settings)==null?void 0:e.debug)==null?void 0:t.logLevel)!=null?s:2),this.store.set(this.settings),Kt("save settings",this.settings),this._save()}async loadFromLocal(){var t,s,i;const e=await Ae.getItem("pt_settings")||{};this.settings=Gi(Ls,e),ge.setLevel((i=(s=(t=this.settings)==null?void 0:t.debug)==null?void 0:s.logLevel)!=null?i:2),this.store.set(this.settings),Kt("loaded settings from local",this.settings),this.emit("settings",this.settings)}set(e,t){const s=Yi(e);if(s.length>1){const i=s.pop(),r=Ts(this.settings,s);r&&(r[i]=t)}else this.settings[s[0]]=t;Kt(`Set ${s}`,t),this.emit(s+".update",t),this.save()}get(e){return Ts(this.settings,Yi(e))}getSettings(){return JSON.parse(JSON.stringify(this.settings))}}let gu=0;const Vs=Ie.get("sections")||[];var _u=()=>{const n=gu++;return{get(){return Vs[n]||!1},set(e){Vs[n]=e,Ie.set("sections",Vs)}}};function Xi(n,e,t){const s=n.slice();return s[11]=e[t][0],s[12]=e[t][1],s}function qi(n){let e,t,s,i,r;const o=[yu,wu],l=[];function a(c,u){return c[3].options?0:1}return t=a(n),s=l[t]=o[t](n),{c(){e=P("div"),s.c(),this.h()},l(c){e=M(c,"DIV",{class:!0});var u=k(e);s.l(u),u.forEach(v),this.h()},h(){w(e,"class","wrapper svelte-1glihwf")},m(c,u){I(c,e,u),l[t].m(e,null),r=!0},p(c,u){let h=t;t=a(c),t===h?l[t].p(c,u):(te(),L(l[h],1,1,()=>{l[h]=null}),se(),s=l[t],s?s.p(c,u):(s=l[t]=o[t](c),s.c()),$(s,1),s.m(e,null))},i(c){r||($(s),mt(()=>{i||(i=Oe(e,ot,{},!0)),i.run(1)}),r=!0)},o(c){L(s),i||(i=Oe(e,ot,{},!1)),i.run(0),r=!1},d(c){c&&v(e),l[t].d(),c&&i&&i.end()}}}function wu(n){let e,t=(n[3].label||n[2])+"",s,i,r,o,l;const a=[{value:n[1]},n[8](n[6])];var c=ps(n[6],n[1]);function u(h){let m={};for(let d=0;d<a.length;d+=1)m=hn(m,a[d]);return{props:m}}return c&&(r=new c(u()),r.$on("change",n[10])),{c(){e=P("p"),s=O(t),i=j(),r&&q(r.$$.fragment),o=ee()},l(h){e=M(h,"P",{});var m=k(e);s=A(m,t),m.forEach(v),i=D(h),r&&Q(r.$$.fragment,h),o=ee()},m(h,m){I(h,e,m),y(e,s),I(h,i,m),r&&J(r,h,m),I(h,o,m),l=!0},p(h,m){(!l||m&12)&&t!==(t=(h[3].label||h[2])+"")&&ue(s,t);const d=m&322?cn(a,[m&2&&{value:h[1]},m&320&&un(h[8](h[6]))]):{};if(c!==(c=ps(h[6],h[1]))){if(r){te();const f=r;L(f.$$.fragment,1,0,()=>{Z(f,1)}),se()}c?(r=new c(u()),r.$on("change",h[10]),q(r.$$.fragment),$(r.$$.fragment,1),J(r,o.parentNode,o)):r=null}else c&&r.$set(d)},i(h){l||(r&&$(r.$$.fragment,h),l=!0)},o(h){r&&L(r.$$.fragment,h),l=!1},d(h){h&&v(e),h&&v(i),h&&v(o),r&&Z(r,h)}}}function yu(n){let e,t;return e=new ds({props:{name:n[2],open:n[7].get(),$$slots:{default:[Eu]},$$scope:{ctx:n}}}),e.$on("toggle",n[9]),{c(){q(e.$$.fragment)},l(s){Q(e.$$.fragment,s)},m(s,i){J(e,s,i),t=!0},p(s,i){const r={};i&4&&(r.name=s[2]),i&32779&&(r.$$scope={dirty:i,ctx:s}),e.$set(r)},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function bu(n){let e,t;return{c(){e=P("p"),t=O("error")},l(s){e=M(s,"P",{});var i=k(e);t=A(i,"error"),i.forEach(v)},m(s,i){I(s,e,i),y(e,t)},p:F,i:F,o:F,d(s){s&&v(e)}}}function ku(n){let e,t;return e=new Zi({props:{path:n[0],value:n[12],key:n[11],template:n[3].options[n[11]]}}),{c(){q(e.$$.fragment)},l(s){Q(e.$$.fragment,s)},m(s,i){J(e,s,i),t=!0},p(s,i){const r={};i&1&&(r.path=s[0]),i&2&&(r.value=s[12]),i&2&&(r.key=s[11]),i&10&&(r.template=s[3].options[s[11]]),e.$set(r)},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Ji(n){let e,t,s,i;const r=[ku,bu],o=[];function l(a,c){return a[11]in a[3].options?0:1}return e=l(n),t=o[e]=r[e](n),{c(){t.c(),s=ee()},l(a){t.l(a),s=ee()},m(a,c){o[e].m(a,c),I(a,s,c),i=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(te(),L(o[u],1,1,()=>{o[u]=null}),se(),t=o[e],t?t.p(a,c):(t=o[e]=r[e](a),t.c()),$(t,1),t.m(s.parentNode,s))},i(a){i||($(t),i=!0)},o(a){L(t),i=!1},d(a){o[e].d(a),a&&v(s)}}}function Eu(n){let e,t,s=Object.entries(n[1]),i=[];for(let o=0;o<s.length;o+=1)i[o]=Ji(Xi(n,s,o));const r=o=>L(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=ee()},l(o){for(let l=0;l<i.length;l+=1)i[l].l(o);e=ee()},m(o,l){for(let a=0;a<i.length;a+=1)i[a].m(o,l);I(o,e,l),t=!0},p(o,l){if(l&11){s=Object.entries(o[1]);let a;for(a=0;a<s.length;a+=1){const c=Xi(o,s,a);i[a]?(i[a].p(c,l),$(i[a],1)):(i[a]=Ji(c),i[a].c(),$(i[a],1),i[a].m(e.parentNode,e))}for(te(),a=s.length;a<i.length;a+=1)r(a);se()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)$(i[l]);t=!0}},o(o){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)L(i[l]);t=!1},d(o){Pe(i,o),o&&v(e)}}}function Su(n){let e,t,s=(n[4].isDev||!n[3].onlyDev)&&qi(n);return{c(){s&&s.c(),e=ee()},l(i){s&&s.l(i),e=ee()},m(i,r){s&&s.m(i,r),I(i,e,r),t=!0},p(i,[r]){i[4].isDev||!i[3].onlyDev?s?(s.p(i,r),r&24&&$(s,1)):(s=qi(i),s.c(),$(s,1),s.m(e.parentNode,e)):s&&(te(),L(s,1,1,()=>{s=null}),se())},i(i){t||($(s),t=!0)},o(i){L(s),t=!1},d(i){s&&s.d(i),i&&v(e)}}}function Pu(n,e,t){let s;const i=we.store;Ce(n,i,f=>t(4,s=f));let{value:r}=e,{key:o}=e,{path:l=""}=e;l=l+(l.length?".":"")+o;let{template:a}=e,c=a;const u=_u(),h=f=>{const p=ce({},f);return delete p.defaultValue,delete p.type,p},m=({detail:f})=>u.set(f),d=f=>we.set(l,f.detail);return n.$$set=f=>{"value"in f&&t(1,r=f.value),"key"in f&&t(2,o=f.key),"path"in f&&t(0,l=f.path),"template"in f&&t(3,a=f.template)},[l,r,o,a,s,i,c,u,h,m,d]}class Zi extends oe{constructor(e){super();re(this,e,Pu,Su,le,{value:1,key:2,path:0,template:3})}}function Ki(n,e,t){const s=n.slice();return s[2]=e[t][0],s[3]=e[t][1],s}function Qi(n){let e,t;return e=new Zi({props:{key:n[2],value:n[3],template:Ls[n[2]]}}),{c(){q(e.$$.fragment)},l(s){Q(e.$$.fragment,s)},m(s,i){J(e,s,i),t=!0},p(s,i){const r={};i&1&&(r.key=s[2]),i&1&&(r.value=s[3]),i&1&&(r.template=Ls[s[2]]),e.$set(r)},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Mu(n){let e,t,s=Object.entries(n[0]),i=[];for(let o=0;o<s.length;o+=1)i[o]=Qi(Ki(n,s,o));const r=o=>L(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=ee()},l(o){for(let l=0;l<i.length;l+=1)i[l].l(o);e=ee()},m(o,l){for(let a=0;a<i.length;a+=1)i[a].m(o,l);I(o,e,l),t=!0},p(o,[l]){if(l&1){s=Object.entries(o[0]);let a;for(a=0;a<s.length;a+=1){const c=Ki(o,s,a);i[a]?(i[a].p(c,l),$(i[a],1)):(i[a]=Qi(c),i[a].c(),$(i[a],1),i[a].m(e.parentNode,e))}for(te(),a=s.length;a<i.length;a+=1)r(a);se()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)$(i[l]);t=!0}},o(o){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)L(i[l]);t=!1},d(o){Pe(i,o),o&&v(e)}}}function xu(n,e,t){let s;const i=we.store;return Ce(n,i,r=>t(0,s=r)),[s,i]}class Nu extends oe{constructor(e){super();re(this,e,xu,Mu,le,{})}}function $u(n){let e,t;return{c(){e=P("p"),t=O(`\u{1F389} Now you have all the knowledge to use the Plantarium. Have some fun with
  it.`),this.h()},l(s){e=M(s,"P",{class:!0});var i=k(e);t=A(i,`\u{1F389} Now you have all the knowledge to use the Plantarium. Have some fun with
  it.`),i.forEach(v),this.h()},h(){w(e,"class","svelte-1h3eb6p")},m(s,i){I(s,e,i),y(e,t)},p:F,i:F,o:F,d(s){s&&v(e)}}}class Iu extends oe{constructor(e){super();re(this,e,null,$u,le,{})}}function Lu(n){let e,t,s,i,r,o,l,a,c,u,h,m;return i=new _t({props:{name:"hand"}}),{c(){e=P("p"),t=O("Hey there "),s=P("span"),r=P("div"),q(i.$$.fragment),o=j(),l=P("p"),a=O("Welcome to "),c=P("b"),u=O("Plantarium"),h=O(`, a tool for creating parametrized, procedural 3D
  plants.`),this.h()},l(d){e=M(d,"P",{class:!0});var f=k(e);t=A(f,"Hey there "),s=M(f,"SPAN",{class:!0});var p=k(s);r=M(p,"DIV",{style:!0});var g=k(r);Q(i.$$.fragment,g),p.forEach(v),f.forEach(v),o=D(d),l=M(d,"P",{class:!0});var _=k(l);a=A(_,"Welcome to "),c=M(_,"B",{});var N=k(c);u=A(N,"Plantarium"),N.forEach(v),h=A(_,`, a tool for creating parametrized, procedural 3D
  plants.`),_.forEach(v),this.h()},h(){B(r,"display","contents"),B(r,"--stroke","#1a1a1a"),w(s,"class","svelte-1tutruj"),w(e,"class","svelte-1tutruj"),w(l,"class","svelte-1tutruj")},m(d,f){I(d,e,f),y(e,t),y(e,s),y(s,r),J(i,r,null),I(d,o,f),I(d,l,f),y(l,a),y(l,c),y(c,u),y(l,h),m=!0},p:F,i(d){m||($(i.$$.fragment,d),m=!0)},o(d){L(i.$$.fragment,d),m=!1},d(d){d&&v(e),Z(i),d&&v(o),d&&v(l)}}}class Tu extends oe{constructor(e){super();re(this,e,null,Lu,le,{})}}const js=[{title:"Tutorial",description:Tu,options:{"lets go":()=>{}},type:"alert"},{description:`This is the <b>Plant View</b>, here you can explore the generated 3D model of your plant. 
      Try to change the view by:`,selector:".scene-wrapper",checks:[{description:"Clicking and dragging",setup:function(n,{c:e}){const t=document.querySelector(e.selector);t.getAttribute("setup")!=="true"&&(t.setAttribute("setup","true"),t.addEventListener("click",n,{once:!0}))}},{description:"Scrolling / Zooming",setup:(n,{c:e})=>{const t=document.querySelector(e.selector+"> canvas");t.getAttribute("setup")!=="true"&&(t.setAttribute("setup","true"),t.addEventListener("wheel",n,{once:!0,passive:!0}))}}]},{selector:"#nodesystem-view",description:"This is the <b>Node View</b>, here you define the way your plant looks. Try playing with some of the settings. If you are not so sure how this works, maybe visit the NodeTutorial"},{description:"This Button opens the project view",clickSelector:"header > div.left > div > div"},{description:"This is the ProjectView, here you can create/rename/delete projects.",selector:".project-manager-wrapper",checks:[{description:"create a new project",setup:(n,{pm:e})=>{e.once("new",n)}},{description:"rename the project",setup:(n,{pm:e})=>{e.once("update",n)}},{description:"delete the project",setup:(n,{pm:e})=>{e.once("delete",n)}}]},{description:"This Button opens the <b>Settings View</b>",clickSelector:"header > div.right > div:nth-child(2) .icon-wrapper"},{description:"This is the <b>SettingView</b>, here you can change some general settings.",selector:"header > div.right > div:nth-child(2) > div > div > div.wrapper.right.visible"},{description:"When you encounter something which doesnt work or you have an Idea for a new feature, use this button to report it.",clickSelector:"header > div.right > div:nth-child(1) > div"},{title:"Tutorial",description:Iu,options:{"lets go":()=>{}},type:"alert"}];var xt=Se(void 0);function eo(n,e,t){const s=n.slice();return s[14]=e[t],s[15]=e,s[16]=t,s}function to(n){let e,t,s,i,r,o,l,a,c=n[6].description+"",u,h,m,d,f,p=n[3]&&so(n);r=new Me({props:{icon:"cross"}}),r.$on("click",n[11]);let g=n[1]&&no(n),_=!n[4]&&oo(n),N=n[0]&&n[5]&&ro(n);return{c(){e=P("span"),p&&p.c(),t=j(),s=P("div"),i=P("div"),o=P("div"),q(r.$$.fragment),l=j(),a=P("p"),u=j(),g&&g.c(),h=j(),_&&_.c(),d=j(),N&&N.c(),this.h()},l(E){e=M(E,"SPAN",{class:!0});var b=k(e);p&&p.l(b),t=D(b),s=M(b,"DIV",{class:!0,style:!0});var x=k(s);i=M(x,"DIV",{class:!0});var S=k(i);o=M(S,"DIV",{style:!0});var C=k(o);Q(r.$$.fragment,C),S.forEach(v),l=D(x),a=M(x,"P",{class:!0});var V=k(a);V.forEach(v),u=D(x),g&&g.l(x),h=D(x),_&&_.l(x),x.forEach(v),d=D(b),N&&N.l(b),b.forEach(v),this.h()},h(){B(o,"display","contents"),B(o,"--bg","transparent"),w(i,"class","close-wrapper svelte-zb5b7g"),w(a,"class","svelte-zb5b7g"),w(s,"class","wrapper svelte-zb5b7g"),w(s,"style",m=`left: ${n[8]}px; top: ${n[0].top+20}px;`),w(e,"class","svelte-zb5b7g"),G(e,"isLeft",n[2]),G(e,"hasElement",!!n[5]),G(e,"hasClick",!!n[3])},m(E,b){I(E,e,b),p&&p.m(e,null),y(e,t),y(e,s),y(s,i),y(i,o),J(r,o,null),y(s,l),y(s,a),a.innerHTML=c,y(s,u),g&&g.m(s,null),y(s,h),_&&_.m(s,null),y(e,d),N&&N.m(e,null),f=!0},p(E,b){E[3]?p?(p.p(E,b),b&8&&$(p,1)):(p=so(E),p.c(),$(p,1),p.m(e,t)):p&&(te(),L(p,1,1,()=>{p=null}),se()),(!f||b&64)&&c!==(c=E[6].description+"")&&(a.innerHTML=c),E[1]?g?(g.p(E,b),b&2&&$(g,1)):(g=no(E),g.c(),$(g,1),g.m(s,h)):g&&(te(),L(g,1,1,()=>{g=null}),se()),E[4]?_&&(te(),L(_,1,1,()=>{_=null}),se()):_?(_.p(E,b),b&16&&$(_,1)):(_=oo(E),_.c(),$(_,1),_.m(s,null)),(!f||b&257&&m!==(m=`left: ${E[8]}px; top: ${E[0].top+20}px;`))&&w(s,"style",m),E[0]&&E[5]?N?N.p(E,b):(N=ro(E),N.c(),N.m(e,null)):N&&(N.d(1),N=null),b&4&&G(e,"isLeft",E[2]),b&32&&G(e,"hasElement",!!E[5]),b&8&&G(e,"hasClick",!!E[3])},i(E){f||($(p),$(r.$$.fragment,E),$(g),$(_),f=!0)},o(E){L(p),L(r.$$.fragment,E),L(g),L(_),f=!1},d(E){E&&v(e),p&&p.d(),Z(r),g&&g.d(),_&&_.d(),N&&N.d()}}}function so(n){let e,t,s,i,r;return t=new _t({props:{name:"pointing"}}),{c(){e=P("div"),s=P("div"),q(t.$$.fragment),this.h()},l(o){e=M(o,"DIV",{class:!0,style:!0});var l=k(e);s=M(l,"DIV",{style:!0});var a=k(s);Q(t.$$.fragment,a),l.forEach(v),this.h()},h(){B(s,"display","contents"),B(s,"--fill","#303030"),w(e,"class","click-wrapper svelte-zb5b7g"),w(e,"style",i=`top: ${n[0].top+20}px; left: ${n[8]-(n[2]?20:-0)}px;`)},m(o,l){I(o,e,l),y(e,s),J(t,s,null),r=!0},p(o,l){(!r||l&261&&i!==(i=`top: ${o[0].top+20}px; left: ${o[8]-(o[2]?20:-0)}px;`))&&w(e,"style",i)},i(o){r||($(t.$$.fragment,o),r=!0)},o(o){L(t.$$.fragment,o),r=!1},d(o){o&&v(e),Z(t)}}}function no(n){let e,t,s=n[1],i=[];for(let o=0;o<s.length;o+=1)i[o]=io(eo(n,s,o));const r=o=>L(i[o],1,1,()=>{i[o]=null});return{c(){e=P("div");for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=M(o,"DIV",{class:!0});var l=k(e);for(let a=0;a<i.length;a+=1)i[a].l(l);l.forEach(v),this.h()},h(){w(e,"class","checks-wrapper svelte-zb5b7g")},m(o,l){I(o,e,l);for(let a=0;a<i.length;a+=1)i[a].m(e,null);t=!0},p(o,l){if(l&2){s=o[1];let a;for(a=0;a<s.length;a+=1){const c=eo(o,s,a);i[a]?(i[a].p(c,l),$(i[a],1)):(i[a]=io(c),i[a].c(),$(i[a],1),i[a].m(e,null))}for(te(),a=s.length;a<i.length;a+=1)r(a);se()}},i(o){if(!t){for(let l=0;l<s.length;l+=1)$(i[l]);t=!0}},o(o){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)L(i[l]);t=!1},d(o){o&&v(e),Pe(i,o)}}}function io(n){let e,t,s,i,r,o=n[14].description+"",l,a,c;function u(m){n[12](m,n[14])}let h={};return n[14]._isCompleted!==void 0&&(h.value=n[14]._isCompleted),t=new Ut({props:h}),ve.push(()=>Bt(t,"value",u)),{c(){e=P("div"),q(t.$$.fragment),i=j(),r=P("p"),l=O(o),a=j(),this.h()},l(m){e=M(m,"DIV",{class:!0});var d=k(e);Q(t.$$.fragment,d),i=D(d),r=M(d,"P",{class:!0});var f=k(r);l=A(f,o),f.forEach(v),a=D(d),d.forEach(v),this.h()},h(){w(r,"class","svelte-zb5b7g"),w(e,"class","check-wrapper svelte-zb5b7g"),G(e,"is-completed",n[14]._isCompleted)},m(m,d){I(m,e,d),J(t,e,null),y(e,i),y(e,r),y(r,l),y(e,a),c=!0},p(m,d){n=m;const f={};!s&&d&2&&(s=!0,f.value=n[14]._isCompleted,Rt(()=>s=!1)),t.$set(f),(!c||d&2)&&o!==(o=n[14].description+"")&&ue(l,o),d&2&&G(e,"is-completed",n[14]._isCompleted)},i(m){c||($(t.$$.fragment,m),c=!0)},o(m){L(t.$$.fragment,m),c=!1},d(m){m&&v(e),Z(t)}}}function oo(n){let e,t,s,i;return t=new Me({props:{name:"next"}}),t.$on("click",n[13]),{c(){e=P("div"),s=P("div"),q(t.$$.fragment),this.h()},l(r){e=M(r,"DIV",{class:!0});var o=k(e);s=M(o,"DIV",{style:!0});var l=k(s);Q(t.$$.fragment,l),o.forEach(v),this.h()},h(){B(s,"display","contents"),B(s,"--text","white"),B(s,"--bg","#303030"),w(e,"class","next-wrapper svelte-zb5b7g")},m(r,o){I(r,e,o),y(e,s),J(t,s,null),i=!0},p:F,i(r){i||($(t.$$.fragment,r),i=!0)},o(r){L(t.$$.fragment,r),i=!1},d(r){r&&v(e),Z(t)}}}function ro(n){let e,t;return{c(){e=P("span"),this.h()},l(s){e=M(s,"SPAN",{class:!0,style:!0}),k(e).forEach(v),this.h()},h(){w(e,"class","highlighter  svelte-zb5b7g"),w(e,"style",t=`width: ${n[0].width}px; height: ${n[0].height}px; left: ${n[0].left}px; top: ${n[0].top}px;`)},m(s,i){I(s,e,i)},p(s,i){i&1&&t!==(t=`width: ${s[0].width}px; height: ${s[0].height}px; left: ${s[0].left}px; top: ${s[0].top}px;`)&&w(e,"style",t)},d(s){s&&v(e)}}}function Vu(n){let e,t,s=n[7]&&to(n);return{c(){s&&s.c(),e=ee()},l(i){s&&s.l(i),e=ee()},m(i,r){s&&s.m(i,r),I(i,e,r),t=!0},p(i,[r]){i[7]?s?(s.p(i,r),r&128&&$(s,1)):(s=to(i),s.c(),$(s,1),s.m(e.parentNode,e)):s&&(te(),L(s,1,1,()=>{s=null}),se())},i(i){t||($(s),t=!0)},o(i){L(s),t=!1},d(i){s&&s.d(i),i&&v(e)}}}function ju(n,e,t){let s,i,r,o,l,a,c,u,h,m,d;Ce(n,xt,_=>t(6,d=_));const f=()=>{t(7,m=!1)};function p(_,N){n.$$.not_equal(N._isCompleted,_)&&(N._isCompleted=_,t(1,h),t(6,d))}const g=()=>gn(xt,d._isCompleted=!0,d);return n.$$.update=()=>{if(n.$$.dirty&64&&d&&d.clickSelector){const _=document.querySelector(d.clickSelector);_&&_.getAttribute("setup")!=="true"&&(_.setAttribute("setup","true"),_.addEventListener("click",()=>{setTimeout(()=>{gn(xt,d._isCompleted=!0,d)},20)},{once:!0}))}n.$$.dirty&64&&t(10,s=d&&d.selector),n.$$.dirty&1024&&t(5,i=s&&document.querySelector(s)),n.$$.dirty&32&&t(9,r=i&&i.getBoundingClientRect()),n.$$.dirty&64&&t(4,o=d&&d.clickSelector&&document.querySelector(d.clickSelector)),n.$$.dirty&16&&t(3,l=o&&o.getBoundingClientRect()),n.$$.dirty&520&&t(0,a=r||l),n.$$.dirty&1&&t(2,c=a&&a.left+a.width>window.innerWidth-100),n.$$.dirty&5&&t(8,u=a&&(c?a.left-10:a.left+a.width+10)),n.$$.dirty&64&&t(1,h=d&&d.checks),n.$$.dirty&66&&h&&h.forEach((_,N)=>(_._isSetup||(_._isSetup=!0,_.setup(()=>{t(1,h[N]._isCompleted=!0,h),t(1,h),t(6,d)},{pm:de,c:d})),_)),n.$$.dirty&1&&t(7,m=!!a)},[a,h,c,l,o,i,d,m,u,r,s,f,p,g]}class Du extends oe{constructor(e){super();re(this,e,ju,Vu,le,{})}}const lo=["yes","next","lets go","okay"];let ao;const co={handleReject:()=>{Ie.set("hasViewedTutorial",!0),yt("The tutorial is accessable under...")},currentIndex:0,previous:async function(){},next:async function(){var t;const n=js[this.currentIndex];if(this.currentIndex===js.length)return;if(n.setup&&await n.setup({pm:ao}),xt.set(n),this.currentIndex++,this.currentIndex>2&&Ie.set("hasViewedTutorial",!0),n.title=(t=n.title)!=null?t:`Tutorial (${this.currentIndex}/${js.length})`,n.type==="alert"){const s=await wt(n.description,{title:n.title,type:"success",values:n.options?Object.keys(n.options):void 0,timeout:0});if(lo.includes(s.toString()))return this.next()}if(n.type==="toast"){const s=await yt(n.description,{values:n.options?Object.keys(n.options):void 0,timeout:0});if(lo.includes(s.toString()))return this.next()}const e=xt.subscribe(s=>{s._isCompleted&&(e(),this.next())})},init:function({projectManager:n}){if(Ie.get("hasViewedTutorial"))return;ao=n;const e=`It looks like this is your first time here...
    Want to take a little tour? `;setTimeout(async()=>{await yt(e,{title:"",timeout:8e3,values:["nah","yes"]})==="yes"?this.next():this.handleReject()},1e4)},restart:function(){Ie.set("hasViewedTutorial",!1),this.currentIndex=0,this.next()}},Cu=Se([]),Ou=Se([]),uo={},Ds={render:!1,generate:!1},Cs={render:Cu,generate:Ou};function Au(n){uo[n]=performance.now()}function ho(n){var e,t;Ds.render=!!((e=n==null?void 0:n.debug)==null?void 0:e.renderPerf),Ds.generate=!!((t=n==null?void 0:n.debug)==null?void 0:t.generatePerf)}function fo(n,e){(n in Cs?Cs[n]:Se([])).update(s=>(s.push(e),s.length>200&&s.shift(),s)),n in Os&&Os[n]()}function Ru(n){var t;if(!Ds[n])return;const e=performance.now()-((t=uo[n])!=null?t:0);fo(n,e)}const po={},Os={};function mo(n,e){e=e||po[n]||document.createElement("canvas"),po[n]=e;const t=200,s=100;e.width=t,e.height=s;const i=e.getContext("2d");Os[n]=()=>{const r=[...tr(Cs[n])],o=Math.max(...r);let l=0;const a=t/200;i.clearRect(0,0,t,s),i.fillStyle="rgba(255, 255, 255, 0.5)",i.fillRect(0,0,t,s);for(let c=0;c<r.length;c++){l+=r[c];const u=r[c]*(s/o);i.fillStyle="rgba(0, 0, 0, 0.5)",i.fillRect(c*a,s-u,a,u)}i.fillStyle="black",i.textAlign="left",i.fillText(n+"",10,10),i.textAlign="right",i.fillText(`avg: ${Math.floor(l/r.length*10)/10}ms max: ${Math.floor(o*10)/10}ms`,180,10)}}const we=new vu,de=new lu;kn(we.get("theme"));ho(we.getSettings());we.on("enableSync.update",n=>{yt(`${n?"Enabled":"Disabled"} sync`,{type:"success"})});we.on("theme.update",n=>{kn(n)});const Nt=new $s({view:!0,defaultNodes:!1,registerNodes:ks});de.on("load",n=>Nt.load(n));Nt.on("result",n=>de.setProject(n),50);Nt.on("save",n=>de.saveProject(n));we.on("settings",n=>{de.setSettings(n),ho(n)},50);co.init({projectManager:de});const Bu=(n,e)=>{const{background:{scale:t=1,resX:s=16,resY:i=16}={}}=e||{},r=t!=null?t:0,o=s!=null?s:8,l=i!=null?i:8,a=oa(r,o,l);return ws(n,a)};class zu{constructor(e,t){this.scene=e,this.gl=e.renderer.gl,this.initMeshes(),t.on("settings",this.setSettings.bind(this)),this.setSettings(we.getSettings())}initMeshes(){const e=new sr(this.gl),t=sl.texture(this.gl,"assets/rocky_dirt1-albedo.jpg",{wrapS:this.gl.REPEAT,wrapT:this.gl.REPEAT}),s=new At(this.gl,{vertex:xi.vertex,fragment:xi.fragment,uniforms:{uTime:{value:0},tMap:{value:t},uFogColor:{value:new _n("#ffffff")},uFogNear:{value:10},uFogFar:{value:30},texScale:{value:1}}});gt.subscribe(r=>{s.uniforms.uFogColor.value=new _n(r["background-color"])}),this.ground=this.scene.addMesh({geometry:e,program:s});const i=(r=0)=>{requestAnimationFrame(i),s.uniforms.uTime.value=r};i()}setSettings(e){var t,s;this.settings=e,((t=e==null?void 0:e.background)==null?void 0:t.ground)&&(this.ground.geometry=Bu(this.gl,e)),this.ground.visible=!!((s=e==null?void 0:e.background)==null?void 0:s.ground)}}function Fu(n){let e,t,s=(n[1]?"<b>[NEW]</b>":"")+"",i,r=n[0].subject+"",o;return{c(){e=P("p"),t=new nr,i=j(),o=O(r),this.h()},l(l){e=M(l,"P",{});var a=k(e);t=ir(a),i=D(a),o=A(a,r),a.forEach(v),this.h()},h(){t.a=i},m(l,a){I(l,e,a),t.m(s,e),y(e,i),y(e,o)},p(l,[a]){a&2&&s!==(s=(l[1]?"<b>[NEW]</b>":"")+"")&&t.p(s),a&1&&r!==(r=l[0].subject+"")&&ue(o,r)},i:F,o:F,d(l){l&&v(e)}}}function Wu(n,e,t){let{commit:s}=e,{isNew:i=!1}=e;return n.$$set=r=>{"commit"in r&&t(0,s=r.commit),"isNew"in r&&t(1,i=r.isNew)},[s,i]}class Uu extends oe{constructor(e){super();re(this,e,Wu,Fu,le,{commit:0,isNew:1})}}const vo=Se([]);let As=Ie.get("lastUpdated",Date.now());function Hu(n){const e=Date.parse(n.date);return De(ce({},n),{date:e,new:As<e})}let Qt;async function Gu(){const e=await(await fetch("commits.json")).json();return As=Date.now(),Ie.set("lastUpdated",As),e.map(t=>Hu(t))}const Yu=async()=>{if(Qt)return Qt;Qt=Gu();const n=await Qt;vo.set(n)};function go(n,e,t){const s=n.slice();return s[4]=e[t],s}function _o(n){let e,t=n[2](n[4].date)+"",s;return{c(){e=P("h3"),s=O(t),this.h()},l(i){e=M(i,"H3",{class:!0});var r=k(e);s=A(r,t),r.forEach(v),this.h()},h(){w(e,"class","svelte-13vbnbr")},m(i,r){I(i,e,r),y(e,s)},p(i,r){r&1&&t!==(t=i[2](i[4].date)+"")&&ue(s,t)},d(i){i&&v(e)}}}function wo(n){let e=n[1](n[4]),t,s,i,r=e&&_o(n);return s=new Uu({props:{commit:n[4]}}),{c(){r&&r.c(),t=j(),q(s.$$.fragment)},l(o){r&&r.l(o),t=D(o),Q(s.$$.fragment,o)},m(o,l){r&&r.m(o,l),I(o,t,l),J(s,o,l),i=!0},p(o,l){l&1&&(e=o[1](o[4])),e?r?r.p(o,l):(r=_o(o),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null);const a={};l&1&&(a.commit=o[4]),s.$set(a)},i(o){i||($(s.$$.fragment,o),i=!0)},o(o){L(s.$$.fragment,o),i=!1},d(o){r&&r.d(o),o&&v(t),Z(s,o)}}}function Xu(n){let e,t,s,i,r,o=n[0],l=[];for(let c=0;c<o.length;c+=1)l[c]=wo(go(n,o,c));const a=c=>L(l[c],1,1,()=>{l[c]=null});return{c(){e=P("h1"),t=O("Changelog"),s=j(),i=P("div");for(let c=0;c<l.length;c+=1)l[c].c();this.h()},l(c){e=M(c,"H1",{});var u=k(e);t=A(u,"Changelog"),u.forEach(v),s=D(c),i=M(c,"DIV",{class:!0});var h=k(i);for(let m=0;m<l.length;m+=1)l[m].l(h);h.forEach(v),this.h()},h(){w(i,"class","svelte-13vbnbr")},m(c,u){I(c,e,u),y(e,t),I(c,s,u),I(c,i,u);for(let h=0;h<l.length;h+=1)l[h].m(i,null);r=!0},p(c,[u]){if(u&7){o=c[0];let h;for(h=0;h<o.length;h+=1){const m=go(c,o,h);l[h]?(l[h].p(m,u),$(l[h],1)):(l[h]=wo(m),l[h].c(),$(l[h],1),l[h].m(i,null))}for(te(),h=o.length;h<l.length;h+=1)a(h);se()}},i(c){if(!r){for(let u=0;u<o.length;u+=1)$(l[u]);r=!0}},o(c){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)L(l[u]);r=!1},d(c){c&&v(e),c&&v(s),c&&v(i),Pe(l,c)}}}function qu(n,e,t){let s;Ce(n,vo,l=>t(0,s=l)),Yu();let i=s.length&&new Date(s[0].date).getDay();return[s,l=>{const a=new Date(l.date);return a.getDay()!=i?(i=a.getDay(),!0):!1},l=>new Date(l).toLocaleDateString()]}class Ju extends oe{constructor(e){super();re(this,e,qu,Xu,le,{})}}function Zu(n){let e,t,s,i,r,o,l,a,c;function u(f){n[6](f)}let h={useActive:!0,icon:n[3],name:n[1]};n[0]!==void 0&&(h.active=n[0]),t=new Me({props:h}),ve.push(()=>Bt(t,"active",u));var m=n[4];function d(f){return{props:{visible:f[0]}}}return m&&(a=new m(d(n))),{c(){e=P("div"),s=P("div"),q(t.$$.fragment),o=j(),l=P("div"),a&&q(a.$$.fragment),this.h()},l(f){e=M(f,"DIV",{class:!0});var p=k(e);s=M(p,"DIV",{style:!0});var g=k(s);Q(t.$$.fragment,g),o=D(p),l=M(p,"DIV",{class:!0});var _=k(l);a&&Q(a.$$.fragment,_),_.forEach(v),p.forEach(v),this.h()},h(){B(s,"display","contents"),B(s,"--bg","transparent"),B(s,"--text",r=n[5]["text-color"]),w(l,"class","wrapper svelte-1e2gb7"),G(l,"visible",n[0]),G(l,"right",n[2]),w(e,"class","icon-wrapper svelte-1e2gb7"),G(e,"active",n[0])},m(f,p){I(f,e,p),y(e,s),J(t,s,null),y(e,o),y(e,l),a&&J(a,l,null),c=!0},p(f,p){p&32&&r!==(r=f[5]["text-color"])&&B(s,"--text",r);const g={};p&8&&(g.icon=f[3]),p&2&&(g.name=f[1]),!i&&p&1&&(i=!0,g.active=f[0],Rt(()=>i=!1)),t.$set(g);const _={};if(p&1&&(_.visible=f[0]),m!==(m=f[4])){if(a){te();const N=a;L(N.$$.fragment,1,0,()=>{Z(N,1)}),se()}m?(a=new m(d(f)),q(a.$$.fragment),$(a.$$.fragment,1),J(a,l,null)):a=null}else m&&a.$set(_);p&1&&G(l,"visible",f[0]),p&4&&G(l,"right",f[2]),p&1&&G(e,"active",f[0])},i(f){c||($(t.$$.fragment,f),a&&$(a.$$.fragment,f),c=!0)},o(f){L(t.$$.fragment,f),a&&L(a.$$.fragment,f),c=!1},d(f){f&&v(e),Z(t),a&&Z(a)}}}function Ku(n){let e,t;return e=new or({props:{$$slots:{default:[Zu]},$$scope:{ctx:n}}}),e.$on("clickoutside",n[7]),{c(){q(e.$$.fragment)},l(s){Q(e.$$.fragment,s)},m(s,i){J(e,s,i),t=!0},p(s,[i]){const r={};i&319&&(r.$$scope={dirty:i,ctx:s}),e.$set(r)},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Qu(n,e,t){let s;Ce(n,gt,h=>t(5,s=h));let{name:i=""}=e,{right:r=!1}=e,{icon:o}=e,{component:l}=e,{visible:a=!1}=e;function c(h){a=h,t(0,a)}const u=()=>t(0,a=!1);return n.$$set=h=>{"name"in h&&t(1,i=h.name),"right"in h&&t(2,r=h.right),"icon"in h&&t(3,o=h.icon),"component"in h&&t(4,l=h.component),"visible"in h&&t(0,a=h.visible)},[a,i,r,o,l,s,c,u]}class Rs extends oe{constructor(e){super();re(this,e,Qu,Ku,le,{name:1,right:2,icon:3,component:4,visible:0})}}function eh(n){let e,t,s,i,r,o,l,a,c,u,h,m,d,f,p,g,_,N,E,b=n[0]==="bug"&&yo(n);return p=new Me({props:{name:"Submit"}}),p.$on("click",n[9]),{c(){e=P("section"),t=P("label"),s=O("Title"),i=j(),r=P("input"),o=j(),l=P("section"),a=P("label"),c=O("Description"),u=j(),h=P("textarea"),d=j(),b&&b.c(),f=j(),g=P("div"),q(p.$$.fragment),this.h()},l(x){e=M(x,"SECTION",{class:!0});var S=k(e);t=M(S,"LABEL",{for:!0,class:!0});var C=k(t);s=A(C,"Title"),C.forEach(v),i=D(S),r=M(S,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),S.forEach(v),o=D(x),l=M(x,"SECTION",{class:!0});var V=k(l);a=M(V,"LABEL",{for:!0,class:!0});var Y=k(a);c=A(Y,"Description"),Y.forEach(v),u=D(V),h=M(V,"TEXTAREA",{type:!0,id:!0,rowspan:!0,placeholder:!0,class:!0}),k(h).forEach(v),V.forEach(v),d=D(x),b&&b.l(x),f=D(x),g=M(x,"DIV",{style:!0});var W=k(g);Q(p.$$.fragment,W),this.h()},h(){w(t,"for","title"),w(t,"class","svelte-1725buf"),w(r,"type","text"),w(r,"id","title"),w(r,"placeholder","Simple Title"),w(r,"class","svelte-1725buf"),w(e,"class","svelte-1725buf"),w(a,"for","description"),w(a,"class","svelte-1725buf"),w(h,"type","text"),w(h,"id","description"),w(h,"rowspan","5"),w(h,"placeholder",m=n[0]==="bug"?"Please provide a detailed description of what happened.":"Please describe the feature."),w(h,"class","svelte-1725buf"),w(l,"class","svelte-1725buf"),B(g,"display","contents"),B(g,"--bg","white"),B(g,"--text-color","#303030")},m(x,S){I(x,e,S),y(e,t),y(t,s),y(e,i),y(e,r),Ne(r,n[2]),I(x,o,S),I(x,l,S),y(l,a),y(a,c),y(l,u),y(l,h),Ne(h,n[3]),I(x,d,S),b&&b.m(x,S),I(x,f,S),I(x,g,S),J(p,g,null),_=!0,N||(E=[X(r,"keydown",is(n[11])),X(r,"input",n[12]),X(h,"keydown",is(n[10])),X(h,"input",n[13])],N=!0)},p(x,S){S&4&&r.value!==x[2]&&Ne(r,x[2]),(!_||S&1&&m!==(m=x[0]==="bug"?"Please provide a detailed description of what happened.":"Please describe the feature."))&&w(h,"placeholder",m),S&8&&Ne(h,x[3]),x[0]==="bug"?b?(b.p(x,S),S&1&&$(b,1)):(b=yo(x),b.c(),$(b,1),b.m(f.parentNode,f)):b&&(te(),L(b,1,1,()=>{b=null}),se())},i(x){_||($(b),$(p.$$.fragment,x),_=!0)},o(x){L(b),L(p.$$.fragment,x),_=!1},d(x){x&&v(e),x&&v(o),x&&v(l),x&&v(d),b&&b.d(x),x&&v(f),x&&v(g),Z(p,x),N=!1,Je(E)}}}function th(n){let e,t,s,i={ctx:n,current:null,token:null,hasCatch:!0,pending:rh,then:oh,catch:ih,value:16,error:17,blocks:[,,,]};return yn(t=n[6],i),{c(){e=ee(),i.block.c()},l(r){e=ee(),i.block.l(r)},m(r,o){I(r,e,o),i.block.m(r,i.anchor=o),i.mount=()=>e.parentNode,i.anchor=e,s=!0},p(r,o){n=r,i.ctx=n,o&64&&t!==(t=n[6])&&yn(t,i)||rr(i,n,o)},i(r){s||($(i.block),s=!0)},o(r){for(let o=0;o<3;o+=1){const l=i.blocks[o];L(l)}s=!1},d(r){r&&v(e),i.block.d(r),i.token=null,i=null}}}function yo(n){let e,t,s,i,r,o,l,a,c,u,h,m,d=n[7]&&bo(n);function f(g){n[15](g)}let p={};return n[4]!==void 0&&(p.value=n[4]),i=new Ut({props:p}),ve.push(()=>Bt(i,"value",f)),h=new ds({props:{name:"What is that?",$$slots:{default:[nh]},$$scope:{ctx:n}}}),{c(){d&&d.c(),e=j(),t=P("section"),s=P("div"),q(i.$$.fragment),o=j(),l=P("p"),a=O("Include Browser Info"),c=j(),u=P("div"),q(h.$$.fragment),this.h()},l(g){d&&d.l(g),e=D(g),t=M(g,"SECTION",{class:!0});var _=k(t);s=M(_,"DIV",{style:!0});var N=k(s);Q(i.$$.fragment,N),o=D(N),l=M(N,"P",{style:!0});var E=k(l);a=A(E,"Include Browser Info"),E.forEach(v),N.forEach(v),c=D(_),u=M(_,"DIV",{class:!0});var b=k(u);Q(h.$$.fragment,b),b.forEach(v),_.forEach(v),this.h()},h(){B(l,"margin-left","5px"),B(s,"display","flex"),B(s,"align-items","center"),w(u,"class","info svelte-1725buf"),w(t,"class","svelte-1725buf")},m(g,_){d&&d.m(g,_),I(g,e,_),I(g,t,_),y(t,s),J(i,s,null),y(s,o),y(s,l),y(l,a),y(t,c),y(t,u),J(h,u,null),m=!0},p(g,_){g[7]?d?(d.p(g,_),_&128&&$(d,1)):(d=bo(g),d.c(),$(d,1),d.m(e.parentNode,e)):d&&(te(),L(d,1,1,()=>{d=null}),se());const N={};!r&&_&16&&(r=!0,N.value=g[4],Rt(()=>r=!1)),i.$set(N);const E={};_&262144&&(E.$$scope={dirty:_,ctx:g}),h.$set(E)},i(g){m||($(d),$(i.$$.fragment,g),$(h.$$.fragment,g),m=!0)},o(g){L(d),L(i.$$.fragment,g),L(h.$$.fragment,g),m=!1},d(g){d&&d.d(g),g&&v(e),g&&v(t),Z(i),Z(h)}}}function bo(n){let e,t,s,i,r,o,l,a,c,u,h;function m(f){n[14](f)}let d={};return n[5]!==void 0&&(d.value=n[5]),s=new Ut({props:d}),ve.push(()=>Bt(s,"value",m)),u=new ds({props:{name:"What is that?",$$slots:{default:[sh]},$$scope:{ctx:n}}}),{c(){e=P("section"),t=P("div"),q(s.$$.fragment),r=j(),o=P("p"),l=O("Include StackTrace"),a=j(),c=P("div"),q(u.$$.fragment),this.h()},l(f){e=M(f,"SECTION",{class:!0});var p=k(e);t=M(p,"DIV",{style:!0});var g=k(t);Q(s.$$.fragment,g),r=D(g),o=M(g,"P",{style:!0});var _=k(o);l=A(_,"Include StackTrace"),_.forEach(v),g.forEach(v),a=D(p),c=M(p,"DIV",{class:!0});var N=k(c);Q(u.$$.fragment,N),N.forEach(v),p.forEach(v),this.h()},h(){B(o,"margin-left","5px"),B(t,"display","flex"),B(t,"align-items","center"),w(c,"class","info svelte-1725buf"),w(e,"class","svelte-1725buf")},m(f,p){I(f,e,p),y(e,t),J(s,t,null),y(t,r),y(t,o),y(o,l),y(e,a),y(e,c),J(u,c,null),h=!0},p(f,p){const g={};!i&&p&32&&(i=!0,g.value=f[5],Rt(()=>i=!1)),s.$set(g);const _={};p&262146&&(_.$$scope={dirty:p,ctx:f}),u.$set(_)},i(f){h||($(s.$$.fragment,f),$(u.$$.fragment,f),h=!0)},o(f){L(s.$$.fragment,f),L(u.$$.fragment,f),h=!1},d(f){f&&v(e),Z(s),Z(u)}}}function sh(n){let e,t,s=n[1].stack+"",i;return{c(){e=P("pre"),t=P("code"),i=O(s)},l(r){e=M(r,"PRE",{});var o=k(e);t=M(o,"CODE",{});var l=k(t);i=A(l,s),l.forEach(v),o.forEach(v)},m(r,o){I(r,e,o),y(e,t),y(t,i)},p(r,o){o&2&&s!==(s=r[1].stack+"")&&ue(i,s)},d(r){r&&v(e)}}}function nh(n){let e,t,s,i,r,o,l,a,c=n[8].os+"",u,h,m,d,f,p,g,_=n[8].name+"",N,E,b=n[8].version+"",x,S,C,V,Y,W,ie,U=window.innerWidth+"",ne,H,ae=window.innerHeight+"",pe,ye,be,ke,je,xe,Qe,$t=window.devicePixelRatio+"",ht,ft;return{c(){e=P("p"),t=O(`This information makes it easier for a developer to track down what
            might have caused the bug.`),s=j(),i=P("ul"),r=P("li"),o=O("OS "),l=P("i"),a=O("("),u=O(c),h=O(")"),m=j(),d=P("li"),f=O("Browser "),p=P("i"),g=O("("),N=O(_),E=O(" / "),x=O(b),S=O(")"),C=j(),V=P("li"),Y=O("Screen Resolution "),W=P("i"),ie=O("("),ne=O(U),H=O("x"),pe=O(ae),ye=O(")"),be=j(),ke=P("li"),je=O("Screen DPI "),xe=P("i"),Qe=O("("),ht=O($t),ft=O(")")},l(me){e=M(me,"P",{});var ze=k(e);t=A(ze,`This information makes it easier for a developer to track down what
            might have caused the bug.`),ze.forEach(v),s=D(me),i=M(me,"UL",{});var Le=k(i);r=M(Le,"LI",{});var dt=k(r);o=A(dt,"OS "),l=M(dt,"I",{});var tt=k(l);a=A(tt,"("),u=A(tt,c),h=A(tt,")"),tt.forEach(v),dt.forEach(v),m=D(Le),d=M(Le,"LI",{});var Ye=k(d);f=A(Ye,"Browser "),p=M(Ye,"I",{});var Xe=k(p);g=A(Xe,"("),N=A(Xe,_),E=A(Xe," / "),x=A(Xe,b),S=A(Xe,")"),Xe.forEach(v),Ye.forEach(v),C=D(Le),V=M(Le,"LI",{});var pt=k(V);Y=A(pt,"Screen Resolution "),W=M(pt,"I",{});var Fe=k(W);ie=A(Fe,"("),ne=A(Fe,U),H=A(Fe,"x"),pe=A(Fe,ae),ye=A(Fe,")"),Fe.forEach(v),pt.forEach(v),be=D(Le),ke=M(Le,"LI",{});var st=k(ke);je=A(st,"Screen DPI "),xe=M(st,"I",{});var nt=k(xe);Qe=A(nt,"("),ht=A(nt,$t),ft=A(nt,")"),nt.forEach(v),st.forEach(v),Le.forEach(v)},m(me,ze){I(me,e,ze),y(e,t),I(me,s,ze),I(me,i,ze),y(i,r),y(r,o),y(r,l),y(l,a),y(l,u),y(l,h),y(i,m),y(i,d),y(d,f),y(d,p),y(p,g),y(p,N),y(p,E),y(p,x),y(p,S),y(i,C),y(i,V),y(V,Y),y(V,W),y(W,ie),y(W,ne),y(W,H),y(W,pe),y(W,ye),y(i,be),y(i,ke),y(ke,je),y(ke,xe),y(xe,Qe),y(xe,ht),y(xe,ft)},p:F,d(me){me&&v(e),me&&v(s),me&&v(i)}}}function ih(n){let e,t,s,i,r=JSON.stringify(n[17],null,2)+"",o;return{c(){e=P("p"),t=O("Errror"),s=j(),i=P("code"),o=O(r)},l(l){e=M(l,"P",{});var a=k(e);t=A(a,"Errror"),a.forEach(v),s=D(l),i=M(l,"CODE",{});var c=k(i);o=A(c,r),c.forEach(v)},m(l,a){I(l,e,a),y(e,t),I(l,s,a),I(l,i,a),y(i,o)},p(l,a){a&64&&r!==(r=JSON.stringify(l[17],null,2)+"")&&ue(o,r)},i:F,o:F,d(l){l&&v(e),l&&v(s),l&&v(i)}}}function oh(n){let e,t,s,i=JSON.stringify(n[16],null,2)+"",r,o;return e=new Me({props:{name:"Done",icon:"checkmark"}}),{c(){q(e.$$.fragment),t=j(),s=P("code"),r=O(i)},l(l){Q(e.$$.fragment,l),t=D(l),s=M(l,"CODE",{});var a=k(s);r=A(a,i),a.forEach(v)},m(l,a){J(e,l,a),I(l,t,a),I(l,s,a),y(s,r),o=!0},p(l,a){(!o||a&64)&&i!==(i=JSON.stringify(l[16],null,2)+"")&&ue(r,i)},i(l){o||($(e.$$.fragment,l),o=!0)},o(l){L(e.$$.fragment,l),o=!1},d(l){Z(e,l),l&&v(t),l&&v(s)}}}function rh(n){let e;return{c(){e=O("Submitting Reprot")},l(t){e=A(t,"Submitting Reprot")},m(t,s){I(t,e,s)},p:F,i:F,o:F,d(t){t&&v(e)}}}function lh(n){let e,t,s,i;const r=[th,eh],o=[];function l(a,c){return a[6]?0:1}return e=l(n),t=o[e]=r[e](n),{c(){t.c(),s=ee()},l(a){t.l(a),s=ee()},m(a,c){o[e].m(a,c),I(a,s,c),i=!0},p(a,[c]){let u=e;e=l(a),e===u?o[e].p(a,c):(te(),L(o[u],1,1,()=>{o[u]=null}),se(),t=o[e],t?t.p(a,c):(t=o[e]=r[e](a),t.c()),$(t,1),t.m(s.parentNode,s))},i(a){i||($(t),i=!0)},o(a){L(t),i=!1},d(a){o[e].d(a),a&&v(s)}}}function ah(n,e,t){let s,{mode:i="bug"}=e,r=ji(),o,l,a=!1,{error:c}=e,u=!0,h;function m(){const E={type:i,title:o,description:l};u&&(E.stacktrace=s),a&&(E.browser=ji(),E.browser.screen={width:window.innerWidth,height:window.innerHeight,dpi:window.devicePixelRatio}),t(6,h=Bi(E))}it(async()=>{s&&t(2,o=s.type+": "+s.title)});function d(E){wn.call(this,n,E)}function f(E){wn.call(this,n,E)}function p(){o=this.value,t(2,o)}function g(){l=this.value,t(3,l)}function _(E){u=E,t(5,u)}function N(E){a=E,t(4,a)}return n.$$set=E=>{"mode"in E&&t(0,i=E.mode),"error"in E&&t(1,c=E.error)},n.$$.update=()=>{n.$$.dirty&2&&t(7,s=c&&fs(c.stack))},[i,c,o,l,a,u,h,s,r,m,d,f,p,g,_,N]}class Bs extends oe{constructor(e){super();re(this,e,ah,lh,le,{mode:0,error:1})}}class ch{constructor(e,t){this.scene=e,this.pm=t,this.m={},this.gl=e.renderer.gl,this.initGeometry(),this.setSettings(we.getSettings()),t.on("settings",this.setSettings.bind(this))}initGeometry(){this.m.skeleton=this.scene.addMesh({geometry:new vt(this.gl,{position:{size:3,data:new Float32Array([0,0,0])},uv:{size:2,data:new Float32Array([0,0])},index:{size:1,data:new Uint16Array([0])}}),program:new At(this.gl,{vertex:Ni.vertex,fragment:Ni.fragment,depthTest:!1}),mode:this.gl.LINES}),this.m.vertices=this.scene.addMesh({mode:this.gl.POINTS,geometry:new vt(this.gl,{position:{size:3,data:new Float32Array(3)}}),program:new At(this.gl,{vertex:$i.vertex,fragment:$i.fragment,depthTest:!1,transparent:!0})})}setSettings(e){var t,s;this.settings=JSON.parse(JSON.stringify(e)),this.m.skeleton.visible=!!((t=this.settings.debug)==null?void 0:t.skeleton),this.m.vertices.visible=!!((s=this.settings.debug)==null?void 0:s.skeleton),this.update()}setPlant(e){this.plant=e,this.update()}update(e=this.plant,t=this.settings){var s,i;if(!(!e||!t)&&(e.allSkeletons||e.skeletons)&&((s=t.debug)==null?void 0:s.skeleton)){const r=(i=e.allSkeletons)!=null?i:e.skeletons;let o=0;for(const u of r)o+=u.length/4*3;const l=new Float32Array(o),a=new Uint32Array((o/3-1)*2);let c=0;r.forEach(u=>{const h=u.length/4;for(let m=0;m<h;m++)l[c*3+m*3+0]=u[m*4+0],l[c*3+m*3+1]=u[m*4+1],l[c*3+m*3+2]=u[m*4+2];for(let m=0;m<h-1;m++)a[c*2+m*2]=c+m,a[c*2+m*2+1]=c+m+1;c+=h}),this.m.skeleton.geometry=new vt(this.gl,{position:{size:3,data:l},index:{size:1,data:a}}),this.m.vertices.geometry=new vt(this.gl,{position:{size:3,data:l}})}}}console.log(!!we,"settings");const uh=Wt(n=>{de.renderThumbnail({geo:n})},5e3),hh=ge("scene.foreground");class fh{constructor(e,t){this.scene=e,this.pm=t,this.worker=Si(),this.gl=e.renderer.gl,this.initGeometry(),this.dbg=new ch(e,t),this.setSettings(we.getSettings()),this.setPlant(t.getActiveProject()),this.pm.on("settings",this.setSettings.bind(this)),this.pm.on("plant",this.setPlant.bind(this))}initGeometry(){const e=new vn(this.scene.gl,{width:0,height:0,depth:0});this.mesh=this.scene.addMesh({geometry:e,program:Ii(this.gl)})}setSettings(e){this.settings=JSON.parse(JSON.stringify(e)),this.update()}setPlant(e){!e||(this.plant=JSON.parse(JSON.stringify(e)),this.update())}async update(e=this.plant,t=this.settings){if(!(!e||!t)){this.scene.isLoading.set(!0);try{Au("generate");const s=await this.worker.plant(e,t);if(Ru("generate"),!s)return;uh(s.geometry),this.scene.isLoading.set(!1),this.dbg.setPlant(s),this.mesh.geometry=ws(this.gl,s.geometry),this.mesh.geometry.computeBoundingBox(),this.scene.renderer.setControlTarget(this.mesh.geometry.bounds.center)}catch(s){hh.error(s),await yt(s,{title:"Error [Generator]",values:["report"]})==="report"&&(console.error(s),wt(Bs,{timeout:0,title:"Report Bug",type:"error",props:{mode:"bug",error:s}}))}}}}class dh{constructor(e,t){this.isLoading=Se(!1),this.renderer=new Mi({canvas:t,camPos:Ie.get("camPos")}),this.renderer.on("camPos",s=>Ie.set("camPos",s)),this.renderer.on("perf",s=>fo("render",s),40),this.renderer.handleResize(),this.scene=this.renderer.scene,this.gl=this.renderer.gl,gt.subscribe(s=>{this.renderer.setClearColor(s["background-color"])}),this.wrapper=t.parentElement,this.bg=new zu(this,e),this.fg=new fh(this,e)}addMesh(e){const t=new mn(this.gl,e);return t.setParent(this.scene),t}}function ko(n){let e,t,s=JSON.stringify(n[1],null,2)+"",i;return{c(){e=P("pre"),t=P("code"),i=O(s),this.h()},l(r){e=M(r,"PRE",{class:!0});var o=k(e);t=M(o,"CODE",{class:!0});var l=k(t);i=A(l,s),l.forEach(v),o.forEach(v),this.h()},h(){w(t,"class","svelte-1pg2gn7"),w(e,"class","svelte-1pg2gn7")},m(r,o){I(r,e,o),y(e,t),y(t,i)},p(r,o){o&2&&s!==(s=JSON.stringify(r[1],null,2)+"")&&ue(i,s)},d(r){r&&v(e)}}}function Eo(n){let e,t,s;return{c(){e=P("div"),t=P("p"),s=O("Is Loading"),this.h()},l(i){e=M(i,"DIV",{class:!0});var r=k(e);t=M(r,"P",{class:!0});var o=k(t);s=A(o,"Is Loading"),o.forEach(v),r.forEach(v),this.h()},h(){w(t,"class","svelte-1pg2gn7"),w(e,"class","is-loading svelte-1pg2gn7")},m(i,r){I(i,e,r),y(e,t),y(t,s)},d(i){i&&v(e)}}}function So(n){let e,t,s;return{c(){e=P("div"),t=P("h2"),s=O("Logs:"),this.h()},l(i){e=M(i,"DIV",{class:!0});var r=k(e);t=M(r,"H2",{class:!0});var o=k(t);s=A(o,"Logs:"),o.forEach(v),r.forEach(v),this.h()},h(){w(t,"class","svelte-1pg2gn7"),w(e,"class","log-wrapper svelte-1pg2gn7")},m(i,r){I(i,e,r),y(e,t),y(t,s)},d(i){i&&v(e)}}}function ph(n){var g,_,N,E;let e,t,s,i,r,o,l,a,c,u,h,m,d=((_=(g=n[6])==null?void 0:g.debug)==null?void 0:_.pd)&&n[1]&&ko(n),f=n[7]&&Eo(),p=((E=(N=n[6])==null?void 0:N.debug)==null?void 0:E.showLogs)&&So();return{c(){e=P("div"),d&&d.c(),t=j(),s=P("div"),i=P("canvas"),o=j(),l=P("canvas"),c=j(),u=P("canvas"),h=j(),f&&f.c(),m=j(),p&&p.c(),this.h()},l(b){e=M(b,"DIV",{class:!0});var x=k(e);d&&d.l(x),t=D(x),s=M(x,"DIV",{class:!0});var S=k(s);i=M(S,"CANVAS",{style:!0,class:!0}),k(i).forEach(v),o=D(S),l=M(S,"CANVAS",{style:!0,class:!0}),k(l).forEach(v),S.forEach(v),c=D(x),u=M(x,"CANVAS",{class:!0}),k(u).forEach(v),h=D(x),f&&f.l(x),m=D(x),p&&p.l(x),x.forEach(v),this.h()},h(){var b,x,S,C;w(i,"style",r=`display: ${((x=(b=n[6])==null?void 0:b.debug)==null?void 0:x.generatePerf)?"visible":"none"}`),w(i,"class","svelte-1pg2gn7"),w(l,"style",a=`display: ${((C=(S=n[6])==null?void 0:S.debug)==null?void 0:C.renderPerf)?"visible":"none"}`),w(l,"class","svelte-1pg2gn7"),w(s,"class","performance-wrapper svelte-1pg2gn7"),w(u,"class","svelte-1pg2gn7"),w(e,"class","scene-wrapper svelte-1pg2gn7")},m(b,x){I(b,e,x),d&&d.m(e,null),y(e,t),y(e,s),y(s,i),n[10](i),y(s,o),y(s,l),n[11](l),y(e,c),y(e,u),n[12](u),y(e,h),f&&f.m(e,null),y(e,m),p&&p.m(e,null)},p(b,[x]){var S,C,V,Y,W,ie,U,ne;((C=(S=b[6])==null?void 0:S.debug)==null?void 0:C.pd)&&b[1]?d?d.p(b,x):(d=ko(b),d.c(),d.m(e,t)):d&&(d.d(1),d=null),x&64&&r!==(r=`display: ${((Y=(V=b[6])==null?void 0:V.debug)==null?void 0:Y.generatePerf)?"visible":"none"}`)&&w(i,"style",r),x&64&&a!==(a=`display: ${((ie=(W=b[6])==null?void 0:W.debug)==null?void 0:ie.renderPerf)?"visible":"none"}`)&&w(l,"style",a),b[7]?f||(f=Eo(),f.c(),f.m(e,m)):f&&(f.d(1),f=null),((ne=(U=b[6])==null?void 0:U.debug)==null?void 0:ne.showLogs)?p||(p=So(),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},i:F,o:F,d(b){b&&v(e),d&&d.d(),n[10](null),n[11](null),n[12](null),f&&f.d(),p&&p.d()}}}function mh(n,e,t){let s,i,r=F,o=()=>(r(),r=bn(f,b=>t(6,i=b)),f),l,a=F,c=()=>(a(),a=bn(s,b=>t(7,l=b)),s);n.$$.on_destroy.push(()=>r()),n.$$.on_destroy.push(()=>a());let u,h,m,d,f,p,g;it(()=>{mo("render",g),mo("generate",p)});function _(b){ve[b?"unshift":"push"](()=>{p=b,t(3,p)})}function N(b){ve[b?"unshift":"push"](()=>{g=b,t(4,g)})}function E(b){ve[b?"unshift":"push"](()=>{u=b,t(0,u)})}return n.$$.update=()=>{n.$$.dirty&257&&u&&de&&!h&&t(8,h=new dh(de,u)),n.$$.dirty&256&&c(t(5,s=h&&h.isLoading)),n.$$.dirty&512&&de&&(d&&d(),t(9,d=de.on("save",b=>{const x=JSON.parse(JSON.stringify(b));x.meta.thumbnail="",t(1,m=x)})))},we&&o(t(2,f=we.store)),[u,m,f,p,g,s,i,l,h,d,_,N,E]}class vh extends oe{constructor(e){super();re(this,e,mh,ph,le,{})}}function gh(n){let e,t,s,i,r,o,l,a,c,u,h,m,d;return t=new Me({props:{name:"Tutorial",icon:"hand"}}),t.$on("click",n[0]),r=new Me({props:{name:"Report Bug",icon:"exclamation"}}),r.$on("click",n[1]),a=new Me({props:{name:"Request Feature"}}),a.$on("click",n[2]),h=new Me({props:{name:"Changelog"}}),h.$on("click",n[3]),{c(){e=P("div"),s=P("div"),q(t.$$.fragment),i=j(),o=P("div"),q(r.$$.fragment),l=j(),c=P("div"),q(a.$$.fragment),u=j(),m=P("div"),q(h.$$.fragment),this.h()},l(f){e=M(f,"DIV",{class:!0});var p=k(e);s=M(p,"DIV",{style:!0});var g=k(s);Q(t.$$.fragment,g),i=D(p),o=M(p,"DIV",{style:!0});var _=k(o);Q(r.$$.fragment,_),l=D(p),c=M(p,"DIV",{style:!0});var N=k(c);Q(a.$$.fragment,N),u=D(p),m=M(p,"DIV",{style:!0});var E=k(m);Q(h.$$.fragment,E),p.forEach(v),this.h()},h(){B(s,"display","contents"),B(s,"--bg","#303030"),B(s,"--text","white"),B(o,"display","contents"),B(o,"--bg","#303030"),B(o,"--text","white"),B(c,"display","contents"),B(c,"--bg","#303030"),B(c,"--text","white"),B(m,"display","contents"),B(m,"--bg","#303030"),B(m,"--text","white"),w(e,"class","svelte-1sr1d3o")},m(f,p){I(f,e,p),y(e,s),J(t,s,null),y(e,i),y(e,o),J(r,o,null),y(e,l),y(e,c),J(a,c,null),y(e,u),y(e,m),J(h,m,null),d=!0},p:F,i(f){d||($(t.$$.fragment,f),$(r.$$.fragment,f),$(a.$$.fragment,f),$(h.$$.fragment,f),d=!0)},o(f){L(t.$$.fragment,f),L(r.$$.fragment,f),L(a.$$.fragment,f),L(h.$$.fragment,f),d=!1},d(f){f&&v(e),Z(t),Z(r),Z(a),Z(h)}}}function _h(n){return[()=>co.restart(),()=>wt(Bs,{timeout:0,title:"Report Bug",type:"error",props:{mode:"bug"}}),()=>wt(Bs,{timeout:0,title:"Request Feature",props:{mode:"feat"}}),()=>wt(Ju,{timeout:0})]}class wh extends oe{constructor(e){super();re(this,e,_h,gh,le,{})}}function yh(n){var p,g;let e,t,s,i,r,o=((g=(p=n[0])==null?void 0:p.meta.name)!=null?g:"")+"",l,a,c,u,h,m,d,f;return s=new Rs({props:{icon:"folder",name:"Projects",component:mu}}),u=new Rs({props:{icon:"question",component:wh,right:!0}}),m=new Rs({props:{icon:"cog",component:Nu,right:!0}}),{c(){e=P("header"),t=P("div"),q(s.$$.fragment),i=j(),r=P("h3"),l=O(o),a=j(),c=P("div"),q(u.$$.fragment),h=j(),d=P("div"),q(m.$$.fragment),this.h()},l(_){e=M(_,"HEADER",{class:!0});var N=k(e);t=M(N,"DIV",{class:!0});var E=k(t);Q(s.$$.fragment,E),E.forEach(v),i=D(N),r=M(N,"H3",{class:!0});var b=k(r);l=A(b,o),b.forEach(v),a=D(N),c=M(N,"DIV",{class:!0});var x=k(c);Q(u.$$.fragment,x),h=D(x),d=M(x,"DIV",{style:!0});var S=k(d);Q(m.$$.fragment,S),x.forEach(v),N.forEach(v),this.h()},h(){w(t,"class","left svelte-1dyrwb1"),w(r,"class","svelte-1dyrwb1"),B(d,"display","contents"),B(d,"--min-width","250px"),w(c,"class","right svelte-1dyrwb1"),w(e,"class","svelte-1dyrwb1")},m(_,N){I(_,e,N),y(e,t),J(s,t,null),y(e,i),y(e,r),y(r,l),y(e,a),y(e,c),J(u,c,null),y(c,h),y(c,d),J(m,d,null),f=!0},p(_,[N]){var E,b;(!f||N&1)&&o!==(o=((b=(E=_[0])==null?void 0:E.meta.name)!=null?b:"")+"")&&ue(l,o)},i(_){f||($(s.$$.fragment,_),$(u.$$.fragment,_),$(m.$$.fragment,_),f=!0)},o(_){L(s.$$.fragment,_),L(u.$$.fragment,_),L(m.$$.fragment,_),f=!1},d(_){_&&v(e),Z(s),Z(u),Z(m)}}}function bh(n,e,t){let s;const i=de.activeProject;return Ce(n,i,r=>t(0,s=r)),[s,i]}class kh extends oe{constructor(e){super();re(this,e,bh,yh,le,{})}}function Eh(n){let e,t,s,i,r,o,l,a,c,u,h,m,d,f,p;return e=new dr({}),s=new Wr({}),r=new El({}),l=new Du({}),c=new kh({}),m=new vh({}),{c(){q(e.$$.fragment),t=j(),q(s.$$.fragment),i=j(),q(r.$$.fragment),o=j(),q(l.$$.fragment),a=j(),q(c.$$.fragment),u=j(),h=P("main"),q(m.$$.fragment),d=j(),f=P("div"),this.h()},l(g){Q(e.$$.fragment,g),t=D(g),Q(s.$$.fragment,g),i=D(g),Q(r.$$.fragment,g),o=D(g),Q(l.$$.fragment,g),a=D(g),Q(c.$$.fragment,g),u=D(g),h=M(g,"MAIN",{class:!0});var _=k(h);Q(m.$$.fragment,_),d=D(_),f=M(_,"DIV",{id:!0,class:!0}),k(f).forEach(v),_.forEach(v),this.h()},h(){w(f,"id","nodesystem-view"),w(f,"class","svelte-1hr3zx4"),w(h,"class","svelte-1hr3zx4")},m(g,_){J(e,g,_),I(g,t,_),J(s,g,_),I(g,i,_),J(r,g,_),I(g,o,_),J(l,g,_),I(g,a,_),J(c,g,_),I(g,u,_),I(g,h,_),J(m,h,null),y(h,d),y(h,f),n[3](f),p=!0},p:F,i(g){p||($(e.$$.fragment,g),$(s.$$.fragment,g),$(r.$$.fragment,g),$(l.$$.fragment,g),$(c.$$.fragment,g),$(m.$$.fragment,g),p=!0)},o(g){L(e.$$.fragment,g),L(s.$$.fragment,g),L(r.$$.fragment,g),L(l.$$.fragment,g),L(c.$$.fragment,g),L(m.$$.fragment,g),p=!1},d(g){Z(e,g),g&&v(t),Z(s,g),g&&v(i),Z(r,g),g&&v(o),Z(l,g),g&&v(a),Z(c,g),g&&v(u),g&&v(h),Z(m),n[3](null)}}}function Sh(n,e,t){let s;const i=!1,r=!1;it(async()=>{await we.loadFromLocal(),s.append(Nt.view.wrapper),Nt.view.handleResize()});function o(l){ve[l?"unshift":"push"](()=>{s=l,t(0,s)})}return[s,i,r,o]}class Th extends oe{constructor(e){super();re(this,e,Sh,Eh,le,{ssr:1,prerender:2})}get ssr(){return this.$$.ctx[1]}get prerender(){return this.$$.ctx[2]}}export{Th as default};
