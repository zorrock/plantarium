function ke(){}function ti(t){return t&&typeof t=="object"&&typeof t.then=="function"}function mr(t){return t()}function yr(){return Object.create(null)}function Ye(t){t.forEach(mr)}function ri(t){return typeof t=="function"}function ni(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ii(t){return Object.keys(t).length===0}function p1(t,e){t.appendChild(e)}function g1(t,e,r){t.insertBefore(e,r||null)}function si(t){t.parentNode.removeChild(t)}function m1(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function y1(t){return document.createElement(t)}function b1(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function br(t){return document.createTextNode(t)}function w1(){return br(" ")}function _1(){return br("")}function x1(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function E1(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function M1(t){return t===""?null:+t}function ai(t){return Array.from(t.childNodes)}function A1(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function S1(t,e){t.value=e==null?"":e}function R1(t,e,r,n){r===null?t.style.removeProperty(e):t.style.setProperty(e,r,n?"important":"")}function T1(t,e,r){t.classList[r?"add":"remove"](e)}function oi(t,e,r=!1){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,r,!1,e),n}let Ve;function ye(t){Ve=t}function wr(){if(!Ve)throw new Error("Function called outside component initialization");return Ve}function O1(){const t=wr();return(e,r)=>{const n=t.$$.callbacks[e];if(n){const i=oi(e,r);n.slice().forEach(s=>{s.call(t,i)})}}}const qe=[],_r=[],Ze=[],xr=[],hi=Promise.resolve();let St=!1;function fi(){St||(St=!0,hi.then(Ot))}function Rt(t){Ze.push(t)}const Tt=new Set;let Ke=0;function Ot(){const t=Ve;do{for(;Ke<qe.length;){const e=qe[Ke];Ke++,ye(e),li(e.$$)}for(ye(null),qe.length=0,Ke=0;_r.length;)_r.pop()();for(let e=0;e<Ze.length;e+=1){const r=Ze[e];Tt.has(r)||(Tt.add(r),r())}Ze.length=0}while(qe.length);for(;xr.length;)xr.pop()();St=!1,Tt.clear(),ye(t)}function li(t){if(t.fragment!==null){t.update(),Ye(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Rt)}}const Je=new Set;let Se;function ui(){Se={r:0,c:[],p:Se}}function ci(){Se.r||Ye(Se.c),Se=Se.p}function Er(t,e){t&&t.i&&(Je.delete(t),t.i(e))}function di(t,e,r,n){if(t&&t.o){if(Je.has(t))return;Je.add(t),Se.c.push(()=>{Je.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}}function I1(t,e){const r=e.token={};function n(i,s,a,h){if(e.token!==r)return;e.resolved=h;let f=e.ctx;a!==void 0&&(f=f.slice(),f[a]=h);const l=i&&(e.current=i)(f);let d=!1;e.block&&(e.blocks?e.blocks.forEach((c,v)=>{v!==s&&c&&(ui(),di(c,1,1,()=>{e.blocks[v]===c&&(e.blocks[v]=null)}),ci())}):e.block.d(1),l.c(),Er(l,1),l.m(e.mount(),e.anchor),d=!0),e.block=l,e.blocks&&(e.blocks[s]=l),d&&Ot()}if(ti(t)){const i=wr();if(t.then(s=>{ye(i),n(e.then,1,e.value,s),ye(null)},s=>{if(ye(i),n(e.catch,2,e.error,s),ye(null),!e.hasCatch)throw s}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,t),!0;e.resolved=t}}function D1(t){t&&t.c()}function vi(t,e,r,n){const{fragment:i,on_mount:s,on_destroy:a,after_update:h}=t.$$;i&&i.m(e,r),n||Rt(()=>{const f=s.map(mr).filter(ri);a?a.push(...f):Ye(f),t.$$.on_mount=[]}),h.forEach(Rt)}function pi(t,e){const r=t.$$;r.fragment!==null&&(Ye(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function gi(t,e){t.$$.dirty[0]===-1&&(qe.push(t),fi(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function N1(t,e,r,n,i,s,a,h=[-1]){const f=Ve;ye(t);const l=t.$$={fragment:null,ctx:null,props:s,update:ke,not_equal:i,bound:yr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:yr(),dirty:h,skip_bound:!1,root:e.target||f.$$.root};a&&a(l.root);let d=!1;if(l.ctx=r?r(t,e.props||{},(c,v,...b)=>{const w=b.length?b[0]:v;return l.ctx&&i(l.ctx[c],l.ctx[c]=w)&&(!l.skip_bound&&l.bound[c]&&l.bound[c](w),d&&gi(t,c)),v}):[],l.update(),d=!0,Ye(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){const c=ai(e.target);l.fragment&&l.fragment.l(c),c.forEach(si)}else l.fragment&&l.fragment.c();e.intro&&Er(t.$$.fragment),vi(t,e.target,e.anchor,e.customElement),Ot()}ye(f)}class L1{$destroy(){pi(this,1),this.$destroy=ke}$on(e,r){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{const i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!ii(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ce=[];function P1(t,e=ke){let r;const n=new Set;function i(h){if(ni(t,h)&&(t=h,r)){const f=!Ce.length;for(const l of n)l[1](),Ce.push(l,t);if(f){for(let l=0;l<Ce.length;l+=2)Ce[l][0](Ce[l+1]);Ce.length=0}}}function s(h){i(h(t))}function a(h,f=ke){const l=[h,f];return n.add(l),n.size===1&&(r=e(i)||ke),h(t),()=>{n.delete(l),n.size===0&&(r(),r=null)}}return{set:i,update:s,subscribe:a}}var be=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function et(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Mr={exports:{}},tt=1;function mi(){return tt=(tt*9301+49297)%233280,tt/233280}function yi(t){tt=t}var bi={nextValue:mi,seed:yi},It=bi,Re="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-",xe,Ar,Xe;function Dt(){Xe=!1}function Sr(t){if(!t){xe!==Re&&(xe=Re,Dt());return}if(t!==xe){if(t.length!==Re.length)throw new Error("Custom alphabet for shortid must be "+Re.length+" unique characters. You submitted "+t.length+" characters: "+t);var e=t.split("").filter(function(r,n,i){return n!==i.lastIndexOf(r)});if(e.length)throw new Error("Custom alphabet for shortid must be "+Re.length+" unique characters. These characters were not unique: "+e.join(", "));xe=t,Dt()}}function wi(t){return Sr(t),xe}function _i(t){It.seed(t),Ar!==t&&(Dt(),Ar=t)}function xi(){xe||Sr(Re);for(var t=xe.split(""),e=[],r=It.nextValue(),n;t.length>0;)r=It.nextValue(),n=Math.floor(r*t.length),e.push(t.splice(n,1)[0]);return e.join("")}function Rr(){return Xe||(Xe=xi(),Xe)}function Ei(t){var e=Rr();return e[t]}function Mi(){return xe||Re}var Nt={get:Mi,characters:wi,seed:_i,lookup:Ei,shuffled:Rr},Lt=typeof window=="object"&&(window.crypto||window.msCrypto),Pt;!Lt||!Lt.getRandomValues?Pt=function(t){for(var e=[],r=0;r<t;r++)e.push(Math.floor(Math.random()*256));return e}:Pt=function(t){return Lt.getRandomValues(new Uint8Array(t))};var Ai=Pt,Si=function(t,e,r){for(var n=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*n*r/e.length),s="";;)for(var a=t(i),h=i;h--;)if(s+=e[a[h]&n]||"",s.length===+r)return s},Ri=Nt,Ti=Ai,Oi=Si;function Ii(t){for(var e=0,r,n="";!r;)n=n+Oi(Ti,Ri.get(),1),r=t<Math.pow(16,e+1),e++;return n}var Di=Ii,rt=Di,Ni=1567752802062,Li=7,nt,Tr;function Pi(t){var e="",r=Math.floor((Date.now()-Ni)*.001);return r===Tr?nt++:(nt=0,Tr=r),e=e+rt(Li),e=e+rt(t),nt>0&&(e=e+rt(nt)),e=e+rt(r),e}var Ci=Pi,Fi=Nt;function zi(t){if(!t||typeof t!="string"||t.length<6)return!1;var e=new RegExp("[^"+Fi.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]");return!e.test(t)}var Bi=zi;(function(t){var e=Nt,r=Ci,n=Bi,i=0;function s(l){return e.seed(l),t.exports}function a(l){return i=l,t.exports}function h(l){return l!==void 0&&e.characters(l),e.shuffled()}function f(){return r(i)}t.exports=f,t.exports.generate=f,t.exports.seed=s,t.exports.worker=a,t.exports.characters=h,t.exports.isValid=n})(Mr);var C1=Mr.exports,Ui={exports:{}};(function(t,e){(function(r,n){n()})(be,function(){function r(l,d){return typeof d=="undefined"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}function n(l,d,c){var v=new XMLHttpRequest;v.open("GET",l),v.responseType="blob",v.onload=function(){f(v.response,d,c)},v.onerror=function(){console.error("could not download file")},v.send()}function i(l){var d=new XMLHttpRequest;d.open("HEAD",l,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function s(l){try{l.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),l.dispatchEvent(d)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof be=="object"&&be.global===be?be:void 0,h=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!h?function(l,d,c){var v=a.URL||a.webkitURL,b=document.createElement("a");d=d||l.name||"download",b.download=d,b.rel="noopener",typeof l=="string"?(b.href=l,b.origin===location.origin?s(b):i(b.href)?n(l,d,c):s(b,b.target="_blank")):(b.href=v.createObjectURL(l),setTimeout(function(){v.revokeObjectURL(b.href)},4e4),setTimeout(function(){s(b)},0))}:"msSaveOrOpenBlob"in navigator?function(l,d,c){if(d=d||l.name||"download",typeof l!="string")navigator.msSaveOrOpenBlob(r(l,c),d);else if(i(l))n(l,d,c);else{var v=document.createElement("a");v.href=l,v.target="_blank",setTimeout(function(){s(v)})}}:function(l,d,c,v){if(v=v||open("","_blank"),v&&(v.document.title=v.document.body.innerText="downloading..."),typeof l=="string")return n(l,d,c);var b=l.type==="application/octet-stream",w=/constructor/i.test(a.HTMLElement)||a.safari,E=/CriOS\/[\d]+/.test(navigator.userAgent);if((E||b&&w||h)&&typeof FileReader!="undefined"){var _=new FileReader;_.onloadend=function(){var N=_.result;N=E?N:N.replace(/^data:[^;]*;/,"data:attachment/file;"),v?v.location.href=N:location=N,v=null},_.readAsDataURL(l)}else{var M=a.URL||a.webkitURL,T=M.createObjectURL(l);v?v.location=T:location.href=T,v=null,setTimeout(function(){M.revokeObjectURL(T)},4e4)}});a.saveAs=f.saveAs=f,t.exports=f})})(Ui);function Or(t){let e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}function Ct(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function $i(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function Ir(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function Dr(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function ki(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function Yi(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function Ft(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function Vi(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)}function qi(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}function Nr(t){let e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function Xi(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Wi(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function zt(t,e){let r=e[0],n=e[1],i=e[2],s=r*r+n*n+i*i;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function Lr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Pr(t,e,r){let n=e[0],i=e[1],s=e[2],a=r[0],h=r[1],f=r[2];return t[0]=i*f-s*h,t[1]=s*a-n*f,t[2]=n*h-i*a,t}function ji(t,e,r,n){let i=e[0],s=e[1],a=e[2];return t[0]=i+n*(r[0]-i),t[1]=s+n*(r[1]-s),t[2]=a+n*(r[2]-a),t}function Gi(t,e,r){let n=e[0],i=e[1],s=e[2],a=r[3]*n+r[7]*i+r[11]*s+r[15];return a=a||1,t[0]=(r[0]*n+r[4]*i+r[8]*s+r[12])/a,t[1]=(r[1]*n+r[5]*i+r[9]*s+r[13])/a,t[2]=(r[2]*n+r[6]*i+r[10]*s+r[14])/a,t}function Hi(t,e,r){let n=e[0],i=e[1],s=e[2],a=r[3]*n+r[7]*i+r[11]*s+r[15];return a=a||1,t[0]=(r[0]*n+r[4]*i+r[8]*s)/a,t[1]=(r[1]*n+r[5]*i+r[9]*s)/a,t[2]=(r[2]*n+r[6]*i+r[10]*s)/a,t}function Qi(t,e,r){let n=e[0],i=e[1],s=e[2],a=r[0],h=r[1],f=r[2],l=r[3],d=h*s-f*i,c=f*n-a*s,v=a*i-h*n,b=h*v-f*c,w=f*d-a*v,E=a*c-h*d,_=l*2;return d*=_,c*=_,v*=_,b*=2,w*=2,E*=2,t[0]=n+d+b,t[1]=i+c+w,t[2]=s+v+E,t}const Zi=function(){const t=[0,0,0],e=[0,0,0];return function(r,n){Ct(t,r),Ct(e,n),zt(t,t),zt(e,e);let i=Lr(t,e);return i>1?0:i<-1?Math.PI:Math.acos(i)}}();function Ki(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}class Q extends Array{constructor(e=0,r=e,n=e){super(e,r,n);return this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e}set y(e){this[1]=e}set z(e){this[2]=e}set(e,r=e,n=e){return e.length?this.copy(e):($i(this,e,r,n),this)}copy(e){return Ct(this,e),this}add(e,r){return r?Ir(this,e,r):Ir(this,this,e),this}sub(e,r){return r?Dr(this,e,r):Dr(this,this,e),this}multiply(e){return e.length?ki(this,this,e):Ft(this,this,e),this}divide(e){return e.length?Yi(this,this,e):Ft(this,this,1/e),this}inverse(e=this){return Wi(this,e),this}len(){return Or(this)}distance(e){return e?Vi(this,e):Or(this)}squaredLen(){return Nr(this)}squaredDistance(e){return e?qi(this,e):Nr(this)}negate(e=this){return Xi(this,e),this}cross(e,r){return r?Pr(this,e,r):Pr(this,this,e),this}scale(e){return Ft(this,this,e),this}normalize(){return zt(this,this),this}dot(e){return Lr(this,e)}equals(e){return Ki(this,e)}applyMatrix4(e){return Gi(this,this,e),this}scaleRotateMatrix4(e){return Hi(this,this,e),this}applyQuaternion(e){return Qi(this,this,e),this}angle(e){return Zi(this,e)}lerp(e,r){return ji(this,this,e,r),this}clone(){return new Q(this[0],this[1],this[2])}fromArray(e,r=0){return this[0]=e[r],this[1]=e[r+1],this[2]=e[r+2],this}toArray(e=[],r=0){return e[r]=this[0],e[r+1]=this[1],e[r+2]=this[2],e}transformDirection(e){const r=this[0],n=this[1],i=this[2];return this[0]=e[0]*r+e[4]*n+e[8]*i,this[1]=e[1]*r+e[5]*n+e[9]*i,this[2]=e[2]*r+e[6]*n+e[10]*i,this.normalize()}}const Cr=new Q;let Ji=1,es=1,Fr=!1;class zr{constructor(e,r={}){e.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=e,this.attributes=r,this.id=Ji++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let n in r)this.addAttribute(n,r[n])}addAttribute(e,r){if(this.attributes[e]=r,r.id=es++,r.size=r.size||1,r.type=r.type||(r.data.constructor===Float32Array?this.gl.FLOAT:r.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),r.target=e==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,r.normalized=r.normalized||!1,r.stride=r.stride||0,r.offset=r.offset||0,r.count=r.count||(r.stride?r.data.byteLength/r.stride:r.data.length/r.size),r.divisor=r.instanced||0,r.needsUpdate=!1,r.buffer||(r.buffer=this.gl.createBuffer(),this.updateAttribute(r)),r.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==r.count*r.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,r.count*r.divisor);this.instancedCount=r.count*r.divisor}else e==="index"?this.drawRange.count=r.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,r.count))}updateAttribute(e){this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),this.gl.bufferData(e.target,e.data,this.gl.STATIC_DRAW),e.needsUpdate=!1}setIndex(e){this.addAttribute("index",e)}setDrawRange(e,r){this.drawRange.start=e,this.drawRange.count=r}setInstancedCount(e){this.instancedCount=e}createVAO(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}bindAttributes(e){e.attributeLocations.forEach((r,{name:n,type:i})=>{if(!this.attributes[n]){console.warn(`active attribute ${n} not being supplied`);return}const s=this.attributes[n];this.gl.bindBuffer(s.target,s.buffer),this.glState.boundBuffer=s.buffer;let a=1;i===35674&&(a=2),i===35675&&(a=3),i===35676&&(a=4);const h=s.size/a,f=a===1?0:a*a*a,l=a===1?0:a*a;for(let d=0;d<a;d++)this.gl.vertexAttribPointer(r+d,h,s.type,s.normalized,s.stride+f,s.offset+d*l),this.gl.enableVertexAttribArray(r+d),this.gl.renderer.vertexAttribDivisor(r+d,s.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:e,mode:r=this.gl.TRIANGLES}){this.gl.renderer.currentGeometry!==`${this.id}_${e.attributeOrder}`&&(this.VAOs[e.attributeOrder]||this.createVAO(e),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${e.attributeOrder}`),e.attributeLocations.forEach((n,{name:i})=>{const s=this.attributes[i];s.needsUpdate&&this.updateAttribute(s)}),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(r,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*2,this.instancedCount):this.gl.renderer.drawArraysInstanced(r,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(r,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*2):this.gl.drawArrays(r,this.drawRange.start,this.drawRange.count)}getPosition(){const e=this.attributes.position;if(e.data)return e;if(!Fr)return console.warn("No position buffer data found to compute bounds"),Fr=!0}computeBoundingBox(e){e||(e=this.getPosition());const r=e.data,n=e.stride?e.stride/r.BYTES_PER_ELEMENT:e.size;this.bounds||(this.bounds={min:new Q,max:new Q,center:new Q,scale:new Q,radius:1/0});const i=this.bounds.min,s=this.bounds.max,a=this.bounds.center,h=this.bounds.scale;i.set(1/0),s.set(-1/0);for(let f=0,l=r.length;f<l;f+=n){const d=r[f],c=r[f+1],v=r[f+2];i.x=Math.min(d,i.x),i.y=Math.min(c,i.y),i.z=Math.min(v,i.z),s.x=Math.max(d,s.x),s.y=Math.max(c,s.y),s.z=Math.max(v,s.z)}h.sub(s,i),a.add(i,s).divide(2)}computeBoundingSphere(e){e||(e=this.getPosition());const r=e.data,n=e.stride?e.stride/r.BYTES_PER_ELEMENT:e.size;this.bounds||this.computeBoundingBox(e);let i=0;for(let s=0,a=r.length;s<a;s+=n)Cr.fromArray(r,s),i=Math.max(i,this.bounds.center.squaredDistance(Cr));this.bounds.radius=Math.sqrt(i)}remove(){for(let e in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[e]),delete this.VAOs[e];for(let e in this.attributes)this.gl.deleteBuffer(this.attributes[e].buffer),delete this.attributes[e]}}let ts=1;const Br={};class F1{constructor(e,{vertex:r,fragment:n,uniforms:i={},transparent:s=!1,cullFace:a=e.BACK,frontFace:h=e.CCW,depthTest:f=!0,depthWrite:l=!0,depthFunc:d=e.LESS}={}){e.canvas||console.error("gl not passed as fist argument to Program"),this.gl=e,this.uniforms=i,this.id=ts++,r||console.warn("vertex shader not supplied"),n||console.warn("fragment shader not supplied"),this.transparent=s,this.cullFace=a,this.frontFace=h,this.depthTest=f,this.depthWrite=l,this.depthFunc=d,this.blendFunc={},this.blendEquation={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA));const c=e.createShader(e.VERTEX_SHADER);e.shaderSource(c,r),e.compileShader(c),e.getShaderInfoLog(c)!==""&&console.warn(`${e.getShaderInfoLog(c)}
Vertex Shader
${Ur(r)}`);const v=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(v,n),e.compileShader(v),e.getShaderInfoLog(v)!==""&&console.warn(`${e.getShaderInfoLog(v)}
Fragment Shader
${Ur(n)}`),this.program=e.createProgram(),e.attachShader(this.program,c),e.attachShader(this.program,v),e.linkProgram(this.program),!e.getProgramParameter(this.program,e.LINK_STATUS))return console.warn(e.getProgramInfoLog(this.program));e.deleteShader(c),e.deleteShader(v),this.uniformLocations=new Map;let b=e.getProgramParameter(this.program,e.ACTIVE_UNIFORMS);for(let _=0;_<b;_++){let M=e.getActiveUniform(this.program,_);this.uniformLocations.set(M,e.getUniformLocation(this.program,M.name));const T=M.name.match(/(\w+)/g);M.uniformName=T[0],T.length===3?(M.isStructArray=!0,M.structIndex=Number(T[1]),M.structProperty=T[2]):T.length===2&&isNaN(Number(T[1]))&&(M.isStruct=!0,M.structProperty=T[1])}this.attributeLocations=new Map;const w=[],E=e.getProgramParameter(this.program,e.ACTIVE_ATTRIBUTES);for(let _=0;_<E;_++){const M=e.getActiveAttrib(this.program,_),T=e.getAttribLocation(this.program,M.name);w[T]=M.name,this.attributeLocations.set(M,T)}this.attributeOrder=w.join("")}setBlendFunc(e,r,n,i){this.blendFunc.src=e,this.blendFunc.dst=r,this.blendFunc.srcAlpha=n,this.blendFunc.dstAlpha=i,e&&(this.transparent=!0)}setBlendEquation(e,r){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=r}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha)}use({flipFaces:e=!1}={}){let r=-1;this.gl.renderer.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.currentProgram=this.id),this.uniformLocations.forEach((i,s)=>{let a=s.uniformName,h=this.uniforms[a];if(s.isStruct&&(h=h[s.structProperty],a+=`.${s.structProperty}`),s.isStructArray&&(h=h[s.structIndex][s.structProperty],a+=`[${s.structIndex}].${s.structProperty}`),!h)return $r(`Active uniform ${a} has not been supplied`);if(h&&h.value===void 0)return $r(`${a} uniform is missing a value parameter`);if(h.value.texture)return r=r+1,h.value.update(r),Bt(this.gl,s.type,i,r);if(h.value.length&&h.value[0].texture){const f=[];return h.value.forEach(l=>{r=r+1,l.update(r),f.push(r)}),Bt(this.gl,s.type,i,f)}Bt(this.gl,s.type,i,h.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function Bt(t,e,r,n){n=n.length?rs(n):n;const i=t.renderer.state.uniformLocations.get(r);if(n.length)if(i===void 0||i.length!==n.length)t.renderer.state.uniformLocations.set(r,n.slice(0));else{if(ns(i,n))return;i.set?i.set(n):is(i,n),t.renderer.state.uniformLocations.set(r,i)}else{if(i===n)return;t.renderer.state.uniformLocations.set(r,n)}switch(e){case 5126:return n.length?t.uniform1fv(r,n):t.uniform1f(r,n);case 35664:return t.uniform2fv(r,n);case 35665:return t.uniform3fv(r,n);case 35666:return t.uniform4fv(r,n);case 35670:case 5124:case 35678:case 35680:return n.length?t.uniform1iv(r,n):t.uniform1i(r,n);case 35671:case 35667:return t.uniform2iv(r,n);case 35672:case 35668:return t.uniform3iv(r,n);case 35673:case 35669:return t.uniform4iv(r,n);case 35674:return t.uniformMatrix2fv(r,!1,n);case 35675:return t.uniformMatrix3fv(r,!1,n);case 35676:return t.uniformMatrix4fv(r,!1,n)}}function Ur(t){let e=t.split(`
`);for(let r=0;r<e.length;r++)e[r]=r+1+": "+e[r];return e.join(`
`)}function rs(t){const e=t.length,r=t[0].length;if(r===void 0)return t;const n=e*r;let i=Br[n];i||(Br[n]=i=new Float32Array(n));for(let s=0;s<e;s++)i.set(t[s],s*r);return i}function ns(t,e){if(t.length!==e.length)return!1;for(let r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0}function is(t,e){for(let r=0,n=t.length;r<n;r++)t[r]=e[r]}let Ut=0;function $r(t){Ut>100||(console.warn(t),Ut++,Ut>100&&console.warn("More than 100 program warnings - stopping logs."))}const $t=new Q;let ss=1;class z1{constructor({canvas:e=document.createElement("canvas"),width:r=300,height:n=150,dpr:i=1,alpha:s=!1,depth:a=!0,stencil:h=!1,antialias:f=!1,premultipliedAlpha:l=!1,preserveDrawingBuffer:d=!1,powerPreference:c="default",autoClear:v=!0,webgl:b=2}={}){const w={alpha:s,depth:a,stencil:h,antialias:f,premultipliedAlpha:l,preserveDrawingBuffer:d,powerPreference:c};this.dpr=i,this.alpha=s,this.color=!0,this.depth=a,this.stencil=h,this.premultipliedAlpha=l,this.autoClear=v,this.id=ss++,b===2&&(this.gl=e.getContext("webgl2",w)),this.isWebgl2=!!this.gl,this.gl||(this.gl=e.getContext("webgl",w)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(r,n),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=null,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LESS,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(e,r){this.width=e,this.height=r,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=r*this.dpr,Object.assign(this.gl.canvas.style,{width:e+"px",height:r+"px"})}setViewport(e,r,n=0,i=0){this.state.viewport.width===e&&this.state.viewport.height===r||(this.state.viewport.width=e,this.state.viewport.height=r,this.state.viewport.x=n,this.state.viewport.y=i,this.gl.viewport(n,i,e,r))}setScissor(e,r,n=0,i=0){this.gl.scissor(n,i,e,r)}enable(e){this.state[e]!==!0&&(this.gl.enable(e),this.state[e]=!0)}disable(e){this.state[e]!==!1&&(this.gl.disable(e),this.state[e]=!1)}setBlendFunc(e,r,n,i){this.state.blendFunc.src===e&&this.state.blendFunc.dst===r&&this.state.blendFunc.srcAlpha===n&&this.state.blendFunc.dstAlpha===i||(this.state.blendFunc.src=e,this.state.blendFunc.dst=r,this.state.blendFunc.srcAlpha=n,this.state.blendFunc.dstAlpha=i,n!==void 0?this.gl.blendFuncSeparate(e,r,n,i):this.gl.blendFunc(e,r))}setBlendEquation(e,r){e=e||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===r)&&(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=r,r!==void 0?this.gl.blendEquationSeparate(e,r):this.gl.blendEquation(e))}setCullFace(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}setFrontFace(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}setDepthMask(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}setDepthFunc(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}activeTexture(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}bindFramebuffer({target:e=this.gl.FRAMEBUFFER,buffer:r=null}={}){this.state.framebuffer!==r&&(this.state.framebuffer=r,this.gl.bindFramebuffer(e,r))}getExtension(e,r,n){return r&&this.gl[r]?this.gl[r].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),r?this.extensions[e]?this.extensions[e][n].bind(this.extensions[e]):null:this.extensions[e])}sortOpaque(e,r){return e.renderOrder!==r.renderOrder?e.renderOrder-r.renderOrder:e.program.id!==r.program.id?e.program.id-r.program.id:e.zDepth!==r.zDepth?e.zDepth-r.zDepth:r.id-e.id}sortTransparent(e,r){return e.renderOrder!==r.renderOrder?e.renderOrder-r.renderOrder:e.zDepth!==r.zDepth?r.zDepth-e.zDepth:r.id-e.id}sortUI(e,r){return e.renderOrder!==r.renderOrder?e.renderOrder-r.renderOrder:e.program.id!==r.program.id?e.program.id-r.program.id:r.id-e.id}getRenderList({scene:e,camera:r,frustumCull:n,sort:i}){let s=[];if(r&&n&&r.updateFrustum(),e.traverse(a=>{if(!a.visible)return!0;!a.draw||n&&a.frustumCulled&&r&&!r.frustumIntersectsMesh(a)||s.push(a)}),i){const a=[],h=[],f=[];s.forEach(l=>{l.program.transparent?l.program.depthTest?h.push(l):f.push(l):a.push(l),l.zDepth=0,!(l.renderOrder!==0||!l.program.depthTest||!r)&&(l.worldMatrix.getTranslation($t),$t.applyMatrix4(r.projectionViewMatrix),l.zDepth=$t.z)}),a.sort(this.sortOpaque),h.sort(this.sortTransparent),f.sort(this.sortUI),s=a.concat(h,f)}return s}render({scene:e,camera:r,target:n=null,update:i=!0,sort:s=!0,frustumCull:a=!0,clear:h}){n===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(n),this.setViewport(n.width,n.height)),(h||this.autoClear&&h!==!1)&&(this.depth&&(!n||n.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),i&&e.updateMatrixWorld(),r&&r.updateMatrixWorld(),this.getRenderList({scene:e,camera:r,frustumCull:a,sort:s}).forEach(l=>{l.draw({camera:r})})}}function as(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function os(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function hs(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=r*r+n*n+i*i+s*s;return a>0&&(a=1/Math.sqrt(a)),t[0]=r*a,t[1]=n*a,t[2]=i*a,t[3]=s*a,t}function fs(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function ls(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function us(t,e,r){r=r*.5;let n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function kr(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],h=r[0],f=r[1],l=r[2],d=r[3];return t[0]=n*d+a*h+i*l-s*f,t[1]=i*d+a*f+s*h-n*l,t[2]=s*d+a*l+n*f-i*h,t[3]=a*d-n*h-i*f-s*l,t}function cs(t,e,r){r*=.5;let n=e[0],i=e[1],s=e[2],a=e[3],h=Math.sin(r),f=Math.cos(r);return t[0]=n*f+a*h,t[1]=i*f+s*h,t[2]=s*f-i*h,t[3]=a*f-n*h,t}function ds(t,e,r){r*=.5;let n=e[0],i=e[1],s=e[2],a=e[3],h=Math.sin(r),f=Math.cos(r);return t[0]=n*f-s*h,t[1]=i*f+a*h,t[2]=s*f+n*h,t[3]=a*f-i*h,t}function vs(t,e,r){r*=.5;let n=e[0],i=e[1],s=e[2],a=e[3],h=Math.sin(r),f=Math.cos(r);return t[0]=n*f+i*h,t[1]=i*f-n*h,t[2]=s*f+a*h,t[3]=a*f-s*h,t}function ps(t,e,r,n){let i=e[0],s=e[1],a=e[2],h=e[3],f=r[0],l=r[1],d=r[2],c=r[3],v,b,w,E,_;return b=i*f+s*l+a*d+h*c,b<0&&(b=-b,f=-f,l=-l,d=-d,c=-c),1-b>1e-6?(v=Math.acos(b),w=Math.sin(v),E=Math.sin((1-n)*v)/w,_=Math.sin(n*v)/w):(E=1-n,_=n),t[0]=E*i+_*f,t[1]=E*s+_*l,t[2]=E*a+_*d,t[3]=E*h+_*c,t}function gs(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=r*r+n*n+i*i+s*s,h=a?1/a:0;return t[0]=-r*h,t[1]=-n*h,t[2]=-i*h,t[3]=s*h,t}function ms(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function ys(t,e){let r=e[0]+e[4]+e[8],n;if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{let i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);let s=(i+1)%3,a=(i+2)%3;n=Math.sqrt(e[i*3+i]-e[s*3+s]-e[a*3+a]+1),t[i]=.5*n,n=.5/n,t[3]=(e[s*3+a]-e[a*3+s])*n,t[s]=(e[s*3+i]+e[i*3+s])*n,t[a]=(e[a*3+i]+e[i*3+a])*n}return t}function bs(t,e,r="YXZ"){let n=Math.sin(e[0]*.5),i=Math.cos(e[0]*.5),s=Math.sin(e[1]*.5),a=Math.cos(e[1]*.5),h=Math.sin(e[2]*.5),f=Math.cos(e[2]*.5);return r==="XYZ"?(t[0]=n*a*f+i*s*h,t[1]=i*s*f-n*a*h,t[2]=i*a*h+n*s*f,t[3]=i*a*f-n*s*h):r==="YXZ"?(t[0]=n*a*f+i*s*h,t[1]=i*s*f-n*a*h,t[2]=i*a*h-n*s*f,t[3]=i*a*f+n*s*h):r==="ZXY"?(t[0]=n*a*f-i*s*h,t[1]=i*s*f+n*a*h,t[2]=i*a*h+n*s*f,t[3]=i*a*f-n*s*h):r==="ZYX"?(t[0]=n*a*f-i*s*h,t[1]=i*s*f+n*a*h,t[2]=i*a*h-n*s*f,t[3]=i*a*f+n*s*h):r==="YZX"?(t[0]=n*a*f+i*s*h,t[1]=i*s*f+n*a*h,t[2]=i*a*h-n*s*f,t[3]=i*a*f-n*s*h):r==="XZY"&&(t[0]=n*a*f-i*s*h,t[1]=i*s*f-n*a*h,t[2]=i*a*h+n*s*f,t[3]=i*a*f+n*s*h),t}const ws=as,_s=os,xs=fs,Es=hs;class Ms extends Array{constructor(e=0,r=0,n=0,i=1){super(e,r,n,i);return this.onChange=()=>{},this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(e){this[0]=e,this.onChange()}set y(e){this[1]=e,this.onChange()}set z(e){this[2]=e,this.onChange()}set w(e){this[3]=e,this.onChange()}identity(){return ls(this),this.onChange(),this}set(e,r,n,i){return e.length?this.copy(e):(_s(this,e,r,n,i),this.onChange(),this)}rotateX(e){return cs(this,this,e),this.onChange(),this}rotateY(e){return ds(this,this,e),this.onChange(),this}rotateZ(e){return vs(this,this,e),this.onChange(),this}inverse(e=this){return gs(this,e),this.onChange(),this}conjugate(e=this){return ms(this,e),this.onChange(),this}copy(e){return ws(this,e),this.onChange(),this}normalize(e=this){return Es(this,e),this.onChange(),this}multiply(e,r){return r?kr(this,e,r):kr(this,this,e),this.onChange(),this}dot(e){return xs(this,e)}fromMatrix3(e){return ys(this,e),this.onChange(),this}fromEuler(e){return bs(this,e,e.order),this}fromAxisAngle(e,r){return us(this,e,r),this}slerp(e,r){return ps(this,this,e,r),this}fromArray(e,r=0){return this[0]=e[r],this[1]=e[r+1],this[2]=e[r+2],this[3]=e[r+3],this}toArray(e=[],r=0){return e[r]=this[0],e[r+1]=this[1],e[r+2]=this[2],e[r+3]=this[3],e}}const As=1e-6;function Ss(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Rs(t,e,r,n,i,s,a,h,f,l,d,c,v,b,w,E,_){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=s,t[5]=a,t[6]=h,t[7]=f,t[8]=l,t[9]=d,t[10]=c,t[11]=v,t[12]=b,t[13]=w,t[14]=E,t[15]=_,t}function Ts(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Os(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],h=e[5],f=e[6],l=e[7],d=e[8],c=e[9],v=e[10],b=e[11],w=e[12],E=e[13],_=e[14],M=e[15],T=r*h-n*a,N=r*f-i*a,P=r*l-s*a,x=n*f-i*h,A=n*l-s*h,O=i*l-s*f,z=d*E-c*w,F=d*_-v*w,Y=d*M-b*w,V=c*_-v*E,U=c*M-b*E,k=v*M-b*_,B=T*k-N*U+P*V+x*Y-A*F+O*z;return B?(B=1/B,t[0]=(h*k-f*U+l*V)*B,t[1]=(i*U-n*k-s*V)*B,t[2]=(E*O-_*A+M*x)*B,t[3]=(v*A-c*O-b*x)*B,t[4]=(f*Y-a*k-l*F)*B,t[5]=(r*k-i*Y+s*F)*B,t[6]=(_*P-w*O-M*N)*B,t[7]=(d*O-v*P+b*N)*B,t[8]=(a*U-h*Y+l*z)*B,t[9]=(n*Y-r*U-s*z)*B,t[10]=(w*A-E*P+M*T)*B,t[11]=(c*P-d*A-b*T)*B,t[12]=(h*F-a*V-f*z)*B,t[13]=(r*V-n*F+i*z)*B,t[14]=(E*N-w*x-_*T)*B,t[15]=(d*x-c*N+v*T)*B,t):null}function Is(t){let e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],a=t[5],h=t[6],f=t[7],l=t[8],d=t[9],c=t[10],v=t[11],b=t[12],w=t[13],E=t[14],_=t[15],M=e*a-r*s,T=e*h-n*s,N=e*f-i*s,P=r*h-n*a,x=r*f-i*a,A=n*f-i*h,O=l*w-d*b,z=l*E-c*b,F=l*_-v*b,Y=d*E-c*w,V=d*_-v*w,U=c*_-v*E;return M*U-T*V+N*Y+P*F-x*z+A*O}function Yr(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],h=e[4],f=e[5],l=e[6],d=e[7],c=e[8],v=e[9],b=e[10],w=e[11],E=e[12],_=e[13],M=e[14],T=e[15],N=r[0],P=r[1],x=r[2],A=r[3];return t[0]=N*n+P*h+x*c+A*E,t[1]=N*i+P*f+x*v+A*_,t[2]=N*s+P*l+x*b+A*M,t[3]=N*a+P*d+x*w+A*T,N=r[4],P=r[5],x=r[6],A=r[7],t[4]=N*n+P*h+x*c+A*E,t[5]=N*i+P*f+x*v+A*_,t[6]=N*s+P*l+x*b+A*M,t[7]=N*a+P*d+x*w+A*T,N=r[8],P=r[9],x=r[10],A=r[11],t[8]=N*n+P*h+x*c+A*E,t[9]=N*i+P*f+x*v+A*_,t[10]=N*s+P*l+x*b+A*M,t[11]=N*a+P*d+x*w+A*T,N=r[12],P=r[13],x=r[14],A=r[15],t[12]=N*n+P*h+x*c+A*E,t[13]=N*i+P*f+x*v+A*_,t[14]=N*s+P*l+x*b+A*M,t[15]=N*a+P*d+x*w+A*T,t}function Ds(t,e,r){let n=r[0],i=r[1],s=r[2],a,h,f,l,d,c,v,b,w,E,_,M;return e===t?(t[12]=e[0]*n+e[4]*i+e[8]*s+e[12],t[13]=e[1]*n+e[5]*i+e[9]*s+e[13],t[14]=e[2]*n+e[6]*i+e[10]*s+e[14],t[15]=e[3]*n+e[7]*i+e[11]*s+e[15]):(a=e[0],h=e[1],f=e[2],l=e[3],d=e[4],c=e[5],v=e[6],b=e[7],w=e[8],E=e[9],_=e[10],M=e[11],t[0]=a,t[1]=h,t[2]=f,t[3]=l,t[4]=d,t[5]=c,t[6]=v,t[7]=b,t[8]=w,t[9]=E,t[10]=_,t[11]=M,t[12]=a*n+d*i+w*s+e[12],t[13]=h*n+c*i+E*s+e[13],t[14]=f*n+v*i+_*s+e[14],t[15]=l*n+b*i+M*s+e[15]),t}function Ns(t,e,r){let n=r[0],i=r[1],s=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ls(t,e,r,n){let i=n[0],s=n[1],a=n[2],h=Math.hypot(i,s,a),f,l,d,c,v,b,w,E,_,M,T,N,P,x,A,O,z,F,Y,V,U,k,B,W;return Math.abs(h)<As?null:(h=1/h,i*=h,s*=h,a*=h,f=Math.sin(r),l=Math.cos(r),d=1-l,c=e[0],v=e[1],b=e[2],w=e[3],E=e[4],_=e[5],M=e[6],T=e[7],N=e[8],P=e[9],x=e[10],A=e[11],O=i*i*d+l,z=s*i*d+a*f,F=a*i*d-s*f,Y=i*s*d-a*f,V=s*s*d+l,U=a*s*d+i*f,k=i*a*d+s*f,B=s*a*d-i*f,W=a*a*d+l,t[0]=c*O+E*z+N*F,t[1]=v*O+_*z+P*F,t[2]=b*O+M*z+x*F,t[3]=w*O+T*z+A*F,t[4]=c*Y+E*V+N*U,t[5]=v*Y+_*V+P*U,t[6]=b*Y+M*V+x*U,t[7]=w*Y+T*V+A*U,t[8]=c*k+E*B+N*W,t[9]=v*k+_*B+P*W,t[10]=b*k+M*B+x*W,t[11]=w*k+T*B+A*W,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function Ps(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Vr(t,e){let r=e[0],n=e[1],i=e[2],s=e[4],a=e[5],h=e[6],f=e[8],l=e[9],d=e[10];return t[0]=Math.hypot(r,n,i),t[1]=Math.hypot(s,a,h),t[2]=Math.hypot(f,l,d),t}function Cs(t){let e=t[0],r=t[1],n=t[2],i=t[4],s=t[5],a=t[6],h=t[8],f=t[9],l=t[10];const d=e*e+r*r+n*n,c=i*i+s*s+a*a,v=h*h+f*f+l*l;return Math.sqrt(Math.max(d,c,v))}const Fs=function(){const t=[0,0,0];return function(e,r){let n=t;Vr(n,r);let i=1/n[0],s=1/n[1],a=1/n[2],h=r[0]*i,f=r[1]*s,l=r[2]*a,d=r[4]*i,c=r[5]*s,v=r[6]*a,b=r[8]*i,w=r[9]*s,E=r[10]*a,_=h+c+E,M=0;return _>0?(M=Math.sqrt(_+1)*2,e[3]=.25*M,e[0]=(v-w)/M,e[1]=(b-l)/M,e[2]=(f-d)/M):h>c&&h>E?(M=Math.sqrt(1+h-c-E)*2,e[3]=(v-w)/M,e[0]=.25*M,e[1]=(f+d)/M,e[2]=(b+l)/M):c>E?(M=Math.sqrt(1+c-h-E)*2,e[3]=(b-l)/M,e[0]=(f+d)/M,e[1]=.25*M,e[2]=(v+w)/M):(M=Math.sqrt(1+E-h-c)*2,e[3]=(f-d)/M,e[0]=(b+l)/M,e[1]=(v+w)/M,e[2]=.25*M),e}}();function zs(t,e,r,n){let i=e[0],s=e[1],a=e[2],h=e[3],f=i+i,l=s+s,d=a+a,c=i*f,v=i*l,b=i*d,w=s*l,E=s*d,_=a*d,M=h*f,T=h*l,N=h*d,P=n[0],x=n[1],A=n[2];return t[0]=(1-(w+_))*P,t[1]=(v+N)*P,t[2]=(b-T)*P,t[3]=0,t[4]=(v-N)*x,t[5]=(1-(c+_))*x,t[6]=(E+M)*x,t[7]=0,t[8]=(b+T)*A,t[9]=(E-M)*A,t[10]=(1-(c+w))*A,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function Bs(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=r+r,h=n+n,f=i+i,l=r*a,d=n*a,c=n*h,v=i*a,b=i*h,w=i*f,E=s*a,_=s*h,M=s*f;return t[0]=1-c-w,t[1]=d+M,t[2]=v-_,t[3]=0,t[4]=d-M,t[5]=1-l-w,t[6]=b+E,t[7]=0,t[8]=v+_,t[9]=b-E,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Us(t,e,r,n,i){let s=1/Math.tan(e/2),a=1/(n-i);return t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*a,t[15]=0,t}function $s(t,e,r,n,i,s,a){let h=1/(e-r),f=1/(n-i),l=1/(s-a);return t[0]=-2*h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*f,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+r)*h,t[13]=(i+n)*f,t[14]=(a+s)*l,t[15]=1,t}function ks(t,e,r,n){let i=e[0],s=e[1],a=e[2],h=n[0],f=n[1],l=n[2],d=i-r[0],c=s-r[1],v=a-r[2],b=d*d+c*c+v*v;b===0?v=1:(b=1/Math.sqrt(b),d*=b,c*=b,v*=b);let w=f*v-l*c,E=l*d-h*v,_=h*c-f*d;return b=w*w+E*E+_*_,b===0&&(l?h+=1e-6:f?l+=1e-6:f+=1e-6,w=f*v-l*c,E=l*d-h*v,_=h*c-f*d,b=w*w+E*E+_*_),b=1/Math.sqrt(b),w*=b,E*=b,_*=b,t[0]=w,t[1]=E,t[2]=_,t[3]=0,t[4]=c*_-v*E,t[5]=v*w-d*_,t[6]=d*E-c*w,t[7]=0,t[8]=d,t[9]=c,t[10]=v,t[11]=0,t[12]=i,t[13]=s,t[14]=a,t[15]=1,t}class Ee extends Array{constructor(e=1,r=0,n=0,i=0,s=0,a=1,h=0,f=0,l=0,d=0,c=1,v=0,b=0,w=0,E=0,_=1){super(e,r,n,i,s,a,h,f,l,d,c,v,b,w,E,_);return this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(e){this[12]=e}set y(e){this[13]=e}set z(e){this[14]=e}set w(e){this[15]=e}set(e,r,n,i,s,a,h,f,l,d,c,v,b,w,E,_){return e.length?this.copy(e):(Rs(this,e,r,n,i,s,a,h,f,l,d,c,v,b,w,E,_),this)}translate(e,r=this){return Ds(this,r,e),this}rotate(e,r,n=this){return Ls(this,n,e,r),this}scale(e,r=this){return Ns(this,r,typeof e=="number"?[e,e,e]:e),this}multiply(e,r){return r?Yr(this,e,r):Yr(this,this,e),this}identity(){return Ts(this),this}copy(e){return Ss(this,e),this}fromPerspective({fov:e,aspect:r,near:n,far:i}={}){return Us(this,e,r,n,i),this}fromOrthogonal({left:e,right:r,bottom:n,top:i,near:s,far:a}){return $s(this,e,r,n,i,s,a),this}fromQuaternion(e){return Bs(this,e),this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}inverse(e=this){return Os(this,e),this}compose(e,r,n){return zs(this,e,r,n),this}getRotation(e){return Fs(e,this),this}getTranslation(e){return Ps(e,this),this}getScaling(e){return Vr(e,this),this}getMaxScaleOnAxis(){return Cs(this)}lookAt(e,r,n){return ks(this,e,r,n),this}determinant(){return Is(this)}fromArray(e,r=0){return this[0]=e[r],this[1]=e[r+1],this[2]=e[r+2],this[3]=e[r+3],this[4]=e[r+4],this[5]=e[r+5],this[6]=e[r+6],this[7]=e[r+7],this[8]=e[r+8],this[9]=e[r+9],this[10]=e[r+10],this[11]=e[r+11],this[12]=e[r+12],this[13]=e[r+13],this[14]=e[r+14],this[15]=e[r+15],this}toArray(e=[],r=0){return e[r]=this[0],e[r+1]=this[1],e[r+2]=this[2],e[r+3]=this[3],e[r+4]=this[4],e[r+5]=this[5],e[r+6]=this[6],e[r+7]=this[7],e[r+8]=this[8],e[r+9]=this[9],e[r+10]=this[10],e[r+11]=this[11],e[r+12]=this[12],e[r+13]=this[13],e[r+14]=this[14],e[r+15]=this[15],e}}function Ys(t,e,r="YXZ"){return r==="XYZ"?(t[1]=Math.asin(Math.min(Math.max(e[8],-1),1)),Math.abs(e[8])<.99999?(t[0]=Math.atan2(-e[9],e[10]),t[2]=Math.atan2(-e[4],e[0])):(t[0]=Math.atan2(e[6],e[5]),t[2]=0)):r==="YXZ"?(t[0]=Math.asin(-Math.min(Math.max(e[9],-1),1)),Math.abs(e[9])<.99999?(t[1]=Math.atan2(e[8],e[10]),t[2]=Math.atan2(e[1],e[5])):(t[1]=Math.atan2(-e[2],e[0]),t[2]=0)):r==="ZXY"?(t[0]=Math.asin(Math.min(Math.max(e[6],-1),1)),Math.abs(e[6])<.99999?(t[1]=Math.atan2(-e[2],e[10]),t[2]=Math.atan2(-e[4],e[5])):(t[1]=0,t[2]=Math.atan2(e[1],e[0]))):r==="ZYX"?(t[1]=Math.asin(-Math.min(Math.max(e[2],-1),1)),Math.abs(e[2])<.99999?(t[0]=Math.atan2(e[6],e[10]),t[2]=Math.atan2(e[1],e[0])):(t[0]=0,t[2]=Math.atan2(-e[4],e[5]))):r==="YZX"?(t[2]=Math.asin(Math.min(Math.max(e[1],-1),1)),Math.abs(e[1])<.99999?(t[0]=Math.atan2(-e[9],e[5]),t[1]=Math.atan2(-e[2],e[0])):(t[0]=0,t[1]=Math.atan2(e[8],e[10]))):r==="XZY"&&(t[2]=Math.asin(-Math.min(Math.max(e[4],-1),1)),Math.abs(e[4])<.99999?(t[0]=Math.atan2(e[6],e[5]),t[1]=Math.atan2(e[8],e[0])):(t[0]=Math.atan2(-e[9],e[10]),t[1]=0)),t}const qr=new Ee;class Vs extends Array{constructor(e=0,r=e,n=e,i="YXZ"){super(e,r,n);return this.order=i,this.onChange=()=>{},this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e,this.onChange()}set y(e){this[1]=e,this.onChange()}set z(e){this[2]=e,this.onChange()}set(e,r=e,n=e){return e.length?this.copy(e):(this[0]=e,this[1]=r,this[2]=n,this.onChange(),this)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.onChange(),this}reorder(e){return this.order=e,this.onChange(),this}fromRotationMatrix(e,r=this.order){return Ys(this,e,r),this}fromQuaternion(e,r=this.order){return qr.fromQuaternion(e),this.fromRotationMatrix(qr,r)}toArray(e=[],r=0){return e[r]=this[0],e[r+1]=this[1],e[r+2]=this[2],e}}class Xr{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new Ee,this.worldMatrix=new Ee,this.matrixAutoUpdate=!0,this.position=new Q,this.quaternion=new Ms,this.scale=new Q(1),this.rotation=new Vs,this.up=new Q(0,1,0),this.rotation.onChange=()=>this.quaternion.fromEuler(this.rotation),this.quaternion.onChange=()=>this.rotation.fromQuaternion(this.quaternion)}setParent(e,r=!0){this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,r&&e&&e.addChild(this,!1)}addChild(e,r=!0){~this.children.indexOf(e)||this.children.push(e),r&&e.setParent(this,!1)}removeChild(e,r=!0){~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),r&&e.setParent(null,!1)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(let r=0,n=this.children.length;r<n;r++)this.children[r].updateMatrixWorld(e)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(e){if(!e(this))for(let r=0,n=this.children.length;r<n;r++)this.children[r].traverse(e)}decompose(){this.matrix.getTranslation(this.position),this.matrix.getRotation(this.quaternion),this.matrix.getScaling(this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(e,r=!1){r?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion),this.rotation.fromQuaternion(this.quaternion)}}const qs=new Ee,Xs=new Q,Ws=new Q;class B1 extends Xr{constructor(e,{near:r=.1,far:n=100,fov:i=45,aspect:s=1,left:a,right:h,bottom:f,top:l,zoom:d=1}={}){super();Object.assign(this,{near:r,far:n,fov:i,aspect:s,left:a,right:h,bottom:f,top:l,zoom:d}),this.projectionMatrix=new Ee,this.viewMatrix=new Ee,this.projectionViewMatrix=new Ee,this.worldPosition=new Q,this.type=a||h?"orthographic":"perspective",this.type==="orthographic"?this.orthographic():this.perspective()}perspective({near:e=this.near,far:r=this.far,fov:n=this.fov,aspect:i=this.aspect}={}){return Object.assign(this,{near:e,far:r,fov:n,aspect:i}),this.projectionMatrix.fromPerspective({fov:n*(Math.PI/180),aspect:i,near:e,far:r}),this.type="perspective",this}orthographic({near:e=this.near,far:r=this.far,left:n=this.left,right:i=this.right,bottom:s=this.bottom,top:a=this.top,zoom:h=this.zoom}={}){return Object.assign(this,{near:e,far:r,left:n,right:i,bottom:s,top:a,zoom:h}),n/=h,i/=h,s/=h,a/=h,this.projectionMatrix.fromOrthogonal({left:n,right:i,bottom:s,top:a,near:e,far:r}),this.type="orthographic",this}updateMatrixWorld(){return super.updateMatrixWorld(),this.viewMatrix.inverse(this.worldMatrix),this.worldMatrix.getTranslation(this.worldPosition),this.projectionViewMatrix.multiply(this.projectionMatrix,this.viewMatrix),this}lookAt(e){return super.lookAt(e,!0),this}project(e){return e.applyMatrix4(this.viewMatrix),e.applyMatrix4(this.projectionMatrix),this}unproject(e){return e.applyMatrix4(qs.inverse(this.projectionMatrix)),e.applyMatrix4(this.worldMatrix),this}updateFrustum(){this.frustum||(this.frustum=[new Q,new Q,new Q,new Q,new Q,new Q]);const e=this.projectionViewMatrix;this.frustum[0].set(e[3]-e[0],e[7]-e[4],e[11]-e[8]).constant=e[15]-e[12],this.frustum[1].set(e[3]+e[0],e[7]+e[4],e[11]+e[8]).constant=e[15]+e[12],this.frustum[2].set(e[3]+e[1],e[7]+e[5],e[11]+e[9]).constant=e[15]+e[13],this.frustum[3].set(e[3]-e[1],e[7]-e[5],e[11]-e[9]).constant=e[15]-e[13],this.frustum[4].set(e[3]-e[2],e[7]-e[6],e[11]-e[10]).constant=e[15]-e[14],this.frustum[5].set(e[3]+e[2],e[7]+e[6],e[11]+e[10]).constant=e[15]+e[14];for(let r=0;r<6;r++){const n=1/this.frustum[r].distance();this.frustum[r].multiply(n),this.frustum[r].constant*=n}}frustumIntersectsMesh(e){if(!e.geometry.attributes.position||((!e.geometry.bounds||e.geometry.bounds.radius===1/0)&&e.geometry.computeBoundingSphere(),!e.geometry.bounds))return!0;const r=Xs;r.copy(e.geometry.bounds.center),r.applyMatrix4(e.worldMatrix);const n=e.geometry.bounds.radius*e.worldMatrix.getMaxScaleOnAxis();return this.frustumIntersectsSphere(r,n)}frustumIntersectsSphere(e,r){const n=Ws;for(let i=0;i<6;i++){const s=this.frustum[i];if(n.copy(s).dot(e)+s.constant<-r)return!1}return!0}}function js(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function Gs(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=r+r,h=n+n,f=i+i,l=r*a,d=n*a,c=n*h,v=i*a,b=i*h,w=i*f,E=s*a,_=s*h,M=s*f;return t[0]=1-c-w,t[3]=d-M,t[6]=v+_,t[1]=d+M,t[4]=1-l-w,t[7]=b-E,t[2]=v-_,t[5]=b+E,t[8]=1-l-c,t}function Hs(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Qs(t,e,r,n,i,s,a,h,f,l){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=s,t[5]=a,t[6]=h,t[7]=f,t[8]=l,t}function Zs(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ks(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],h=e[5],f=e[6],l=e[7],d=e[8],c=d*a-h*l,v=-d*s+h*f,b=l*s-a*f,w=r*c+n*v+i*b;return w?(w=1/w,t[0]=c*w,t[1]=(-d*n+i*l)*w,t[2]=(h*n-i*a)*w,t[3]=v*w,t[4]=(d*r-i*f)*w,t[5]=(-h*r+i*s)*w,t[6]=b*w,t[7]=(-l*r+n*f)*w,t[8]=(a*r-n*s)*w,t):null}function Wr(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],h=e[4],f=e[5],l=e[6],d=e[7],c=e[8],v=r[0],b=r[1],w=r[2],E=r[3],_=r[4],M=r[5],T=r[6],N=r[7],P=r[8];return t[0]=v*n+b*a+w*l,t[1]=v*i+b*h+w*d,t[2]=v*s+b*f+w*c,t[3]=E*n+_*a+M*l,t[4]=E*i+_*h+M*d,t[5]=E*s+_*f+M*c,t[6]=T*n+N*a+P*l,t[7]=T*i+N*h+P*d,t[8]=T*s+N*f+P*c,t}function Js(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],h=e[4],f=e[5],l=e[6],d=e[7],c=e[8],v=r[0],b=r[1];return t[0]=n,t[1]=i,t[2]=s,t[3]=a,t[4]=h,t[5]=f,t[6]=v*n+b*a+l,t[7]=v*i+b*h+d,t[8]=v*s+b*f+c,t}function ea(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],h=e[4],f=e[5],l=e[6],d=e[7],c=e[8],v=Math.sin(r),b=Math.cos(r);return t[0]=b*n+v*a,t[1]=b*i+v*h,t[2]=b*s+v*f,t[3]=b*a-v*n,t[4]=b*h-v*i,t[5]=b*f-v*s,t[6]=l,t[7]=d,t[8]=c,t}function ta(t,e,r){let n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function ra(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],h=e[5],f=e[6],l=e[7],d=e[8],c=e[9],v=e[10],b=e[11],w=e[12],E=e[13],_=e[14],M=e[15],T=r*h-n*a,N=r*f-i*a,P=r*l-s*a,x=n*f-i*h,A=n*l-s*h,O=i*l-s*f,z=d*E-c*w,F=d*_-v*w,Y=d*M-b*w,V=c*_-v*E,U=c*M-b*E,k=v*M-b*_,B=T*k-N*U+P*V+x*Y-A*F+O*z;return B?(B=1/B,t[0]=(h*k-f*U+l*V)*B,t[1]=(f*Y-a*k-l*F)*B,t[2]=(a*U-h*Y+l*z)*B,t[3]=(i*U-n*k-s*V)*B,t[4]=(r*k-i*Y+s*F)*B,t[5]=(n*Y-r*U-s*z)*B,t[6]=(E*O-_*A+M*x)*B,t[7]=(_*P-w*O-M*N)*B,t[8]=(w*A-E*P+M*T)*B,t):null}class na extends Array{constructor(e=1,r=0,n=0,i=0,s=1,a=0,h=0,f=0,l=1){super(e,r,n,i,s,a,h,f,l);return this}set(e,r,n,i,s,a,h,f,l){return e.length?this.copy(e):(Qs(this,e,r,n,i,s,a,h,f,l),this)}translate(e,r=this){return Js(this,r,e),this}rotate(e,r=this){return ea(this,r,e),this}scale(e,r=this){return ta(this,r,e),this}multiply(e,r){return r?Wr(this,e,r):Wr(this,this,e),this}identity(){return Zs(this),this}copy(e){return Hs(this,e),this}fromMatrix4(e){return js(this,e),this}fromQuaternion(e){return Gs(this,e),this}fromBasis(e,r,n){return this.set(e[0],e[1],e[2],r[0],r[1],r[2],n[0],n[1],n[2]),this}inverse(e=this){return Ks(this,e),this}getNormalMatrix(e){return ra(this,e),this}}let ia=0;class U1 extends Xr{constructor(e,{geometry:r,program:n,mode:i=e.TRIANGLES,frustumCulled:s=!0,renderOrder:a=0}={}){super();e.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=e,this.id=ia++,this.geometry=r,this.program=n,this.mode=i,this.frustumCulled=s,this.renderOrder=a,this.modelViewMatrix=new Ee,this.normalMatrix=new na,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(e){return this.beforeRenderCallbacks.push(e),this}onAfterRender(e){return this.afterRenderCallbacks.push(e),this}draw({camera:e}={}){this.beforeRenderCallbacks.forEach(n=>n&&n({mesh:this,camera:e})),e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix);let r=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:r}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(n=>n&&n({mesh:this,camera:e}))}}const jr=new Uint8Array(4);function Gr(t){return(t&t-1)==0}let sa=1;class $1{constructor(e,{image:r,target:n=e.TEXTURE_2D,type:i=e.UNSIGNED_BYTE,format:s=e.RGBA,internalFormat:a=s,wrapS:h=e.CLAMP_TO_EDGE,wrapT:f=e.CLAMP_TO_EDGE,generateMipmaps:l=!0,minFilter:d=l?e.NEAREST_MIPMAP_LINEAR:e.LINEAR,magFilter:c=e.LINEAR,premultiplyAlpha:v=!1,unpackAlignment:b=4,flipY:w=n==e.TEXTURE_2D,anisotropy:E=0,level:_=0,width:M,height:T=M}={}){this.gl=e,this.id=sa++,this.image=r,this.target=n,this.type=i,this.format=s,this.internalFormat=a,this.minFilter=d,this.magFilter=c,this.wrapS=h,this.wrapT=f,this.generateMipmaps=l,this.premultiplyAlpha=v,this.unpackAlignment=b,this.flipY=w,this.anisotropy=Math.min(E,this.gl.renderer.parameters.maxAnisotropy),this.level=_,this.width=M,this.height=T,this.texture=this.gl.createTexture(),this.store={image:null},this.glState=this.gl.renderer.state,this.state={},this.state.minFilter=this.gl.NEAREST_MIPMAP_LINEAR,this.state.magFilter=this.gl.LINEAR,this.state.wrapS=this.gl.REPEAT,this.state.wrapT=this.gl.REPEAT,this.state.anisotropy=0}bind(){this.glState.textureUnits[this.glState.activeTextureUnit]!==this.id&&(this.gl.bindTexture(this.target,this.texture),this.glState.textureUnits[this.glState.activeTextureUnit]=this.id)}update(e=0){const r=!(this.image===this.store.image&&!this.needsUpdate);if((r||this.glState.textureUnits[e]!==this.id)&&(this.gl.renderer.activeTexture(e),this.bind()),!!r){if(this.needsUpdate=!1,this.flipY!==this.glState.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this.flipY),this.glState.flipY=this.flipY),this.premultiplyAlpha!==this.glState.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),this.glState.premultiplyAlpha=this.premultiplyAlpha),this.unpackAlignment!==this.glState.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this.unpackAlignment),this.glState.unpackAlignment=this.unpackAlignment),this.minFilter!==this.state.minFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.minFilter),this.state.minFilter=this.minFilter),this.magFilter!==this.state.magFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.magFilter),this.state.magFilter=this.magFilter),this.wrapS!==this.state.wrapS&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.wrapS),this.state.wrapS=this.wrapS),this.wrapT!==this.state.wrapT&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.wrapT),this.state.wrapT=this.wrapT),this.anisotropy&&this.anisotropy!==this.state.anisotropy&&(this.gl.texParameterf(this.target,this.gl.renderer.getExtension("EXT_texture_filter_anisotropic").TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropy),this.state.anisotropy=this.anisotropy),this.image){if(this.image.width&&(this.width=this.image.width,this.height=this.image.height),this.target===this.gl.TEXTURE_CUBE_MAP)for(let n=0;n<6;n++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+n,this.level,this.internalFormat,this.format,this.type,this.image[n]);else if(ArrayBuffer.isView(this.image))this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,this.image);else if(this.image.isCompressedTexture)for(let n=0;n<this.image.length;n++)this.gl.compressedTexImage2D(this.target,n,this.internalFormat,this.image[n].width,this.image[n].height,0,this.image[n].data);else this.gl.texImage2D(this.target,this.level,this.internalFormat,this.format,this.type,this.image);this.generateMipmaps&&(!this.gl.renderer.isWebgl2&&(!Gr(this.image.width)||!Gr(this.image.height))?(this.generateMipmaps=!1,this.wrapS=this.wrapT=this.gl.CLAMP_TO_EDGE,this.minFilter=this.gl.LINEAR):this.gl.generateMipmap(this.target)),this.onUpdate&&this.onUpdate()}else if(this.target===this.gl.TEXTURE_CUBE_MAP)for(let n=0;n<6;n++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,jr);else this.width?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,null):this.gl.texImage2D(this.target,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,jr);this.store.image=this.image}}}function aa(t,e){return t[0]=e[0],t[1]=e[1],t}function oa(t,e,r){return t[0]=e,t[1]=r,t}function Hr(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function Qr(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function ha(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function fa(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function kt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function la(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}function ua(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function Zr(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)}function ca(t){var e=t[0],r=t[1];return e*e+r*r}function da(t,e){return t[0]=-e[0],t[1]=-e[1],t}function va(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function pa(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function ga(t,e){return t[0]*e[0]+t[1]*e[1]}function Kr(t,e){return t[0]*e[1]-t[1]*e[0]}function ma(t,e,r,n){var i=e[0],s=e[1];return t[0]=i+n*(r[0]-i),t[1]=s+n*(r[1]-s),t}function ya(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t}function ba(t,e,r){let n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t}function wa(t,e){return t[0]===e[0]&&t[1]===e[1]}class Te extends Array{constructor(e=0,r=e){super(e,r);return this}get x(){return this[0]}get y(){return this[1]}set x(e){this[0]=e}set y(e){this[1]=e}set(e,r=e){return e.length?this.copy(e):(oa(this,e,r),this)}copy(e){return aa(this,e),this}add(e,r){return r?Hr(this,e,r):Hr(this,this,e),this}sub(e,r){return r?Qr(this,e,r):Qr(this,this,e),this}multiply(e){return e.length?ha(this,this,e):kt(this,this,e),this}divide(e){return e.length?fa(this,this,e):kt(this,this,1/e),this}inverse(e=this){return va(this,e),this}len(){return Zr(this)}distance(e){return e?la(this,e):Zr(this)}squaredLen(){return this.squaredDistance()}squaredDistance(e){return e?ua(this,e):ca(this)}negate(e=this){return da(this,e),this}cross(e,r){return r?Kr(e,r):Kr(this,e)}scale(e){return kt(this,this,e),this}normalize(){return pa(this,this),this}dot(e){return ga(this,e)}equals(e){return wa(this,e)}applyMatrix3(e){return ya(this,this,e),this}applyMatrix4(e){return ba(this,this,e),this}lerp(e,r){return ma(this,this,e,r),this}clone(){return new Te(this[0],this[1])}fromArray(e,r=0){return this[0]=e[r],this[1]=e[r+1],this}toArray(e=[],r=0){return e[r]=this[0],e[r+1]=this[1],e}}class Me extends zr{constructor(e,{width:r=1,height:n=1,widthSegments:i=1,heightSegments:s=1,attributes:a={}}={}){const h=i,f=s,l=(h+1)*(f+1),d=h*f*6,c=new Float32Array(l*3),v=new Float32Array(l*3),b=new Float32Array(l*2),w=d>65536?new Uint32Array(d):new Uint16Array(d);Me.buildPlane(c,v,b,w,r,n,0,h,f),Object.assign(a,{position:{size:3,data:c},normal:{size:3,data:v},uv:{size:2,data:b},index:{data:w}});super(e,a)}static buildPlane(e,r,n,i,s,a,h,f,l,d=0,c=1,v=2,b=1,w=-1,E=0,_=0){const M=E,T=s/f,N=a/l;for(let P=0;P<=l;P++){let x=P*N-a/2;for(let A=0;A<=f;A++,E++){let O=A*T-s/2;if(e[E*3+d]=O*b,e[E*3+c]=x*w,e[E*3+v]=h/2,r[E*3+d]=0,r[E*3+c]=0,r[E*3+v]=h>=0?1:-1,n[E*2]=A/f,n[E*2+1]=1-P/l,P===l||A===f)continue;let z=M+A+P*(f+1),F=M+A+(P+1)*(f+1),Y=M+A+(P+1)*(f+1)+1,V=M+A+P*(f+1)+1;i[_*6]=z,i[_*6+1]=F,i[_*6+2]=V,i[_*6+3]=F,i[_*6+4]=Y,i[_*6+5]=V,_++}}}}class k1 extends zr{constructor(e,{width:r=1,height:n=1,depth:i=1,widthSegments:s=1,heightSegments:a=1,depthSegments:h=1,attributes:f={}}={}){const l=s,d=a,c=h,v=(l+1)*(d+1)*2+(l+1)*(c+1)*2+(d+1)*(c+1)*2,b=(l*d*2+l*c*2+d*c*2)*6,w=new Float32Array(v*3),E=new Float32Array(v*3),_=new Float32Array(v*2),M=v>65536?new Uint32Array(b):new Uint16Array(b);let T=0,N=0;Me.buildPlane(w,E,_,M,i,n,r,c,d,2,1,0,-1,-1,T,N),T+=(c+1)*(d+1),N+=c*d,Me.buildPlane(w,E,_,M,i,n,-r,c,d,2,1,0,1,-1,T,N),T+=(c+1)*(d+1),N+=c*d,Me.buildPlane(w,E,_,M,r,i,n,c,l,0,2,1,1,1,T,N),T+=(l+1)*(c+1),N+=l*c,Me.buildPlane(w,E,_,M,r,i,-n,c,l,0,2,1,1,-1,T,N),T+=(l+1)*(c+1),N+=l*c,Me.buildPlane(w,E,_,M,r,n,-i,l,d,0,1,2,-1,-1,T,N),T+=(l+1)*(d+1),N+=l*d,Me.buildPlane(w,E,_,M,r,n,i,l,d,0,1,2,1,-1,T,N),Object.assign(f,{position:{size:3,data:w},normal:{size:3,data:E},uv:{size:2,data:_},index:{data:M}});super(e,f)}}const ae={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,DOLLY_PAN:3},Ae=new Q,le=new Te,ce=new Te;function Y1(t,{element:e=document,enabled:r=!0,target:n=new Q,ease:i=.25,inertia:s=.85,enableRotate:a=!0,rotateSpeed:h=.1,autoRotate:f=!1,autoRotateSpeed:l=1,enableZoom:d=!0,zoomSpeed:c=1,zoomStyle:v="dolly",enablePan:b=!0,panSpeed:w=.1,minPolarAngle:E=0,maxPolarAngle:_=Math.PI,minAzimuthAngle:M=-1/0,maxAzimuthAngle:T=1/0,minDistance:N=0,maxDistance:P=1/0}={}){this.enabled=r,this.target=n,this.zoomStyle=v,i=i||1,s=s||0,this.minDistance=N,this.maxDistance=P;const x={radius:1,phi:0,theta:0},A={radius:1,phi:0,theta:0},O={radius:1,phi:0,theta:0},z=new Q,F=new Q;F.copy(t.position).sub(this.target),O.radius=A.radius=F.distance(),O.theta=A.theta=Math.atan2(F.x,F.z),O.phi=A.phi=Math.acos(Math.min(Math.max(F.y/A.radius,-1),1)),this.offset=F,this.update=()=>{f&&se(),A.radius*=x.radius,A.theta+=x.theta,A.phi+=x.phi,A.theta=Math.max(M,Math.min(T,A.theta)),A.phi=Math.max(E,Math.min(_,A.phi)),A.radius=Math.max(this.minDistance,Math.min(this.maxDistance,A.radius)),O.phi+=(A.phi-O.phi)*i,O.theta+=(A.theta-O.theta)*i,O.radius+=(A.radius-O.radius)*i,this.target.add(z);let C=O.radius*Math.sin(Math.max(1e-6,O.phi));F.x=C*Math.sin(O.theta),F.y=O.radius*Math.cos(O.phi),F.z=C*Math.cos(O.theta),t.position.copy(this.target).add(F),t.lookAt(this.target),x.theta*=s,x.phi*=s,z.multiply(s),x.radius=1},this.forcePosition=()=>{F.copy(t.position).sub(this.target),O.radius=A.radius=F.distance(),O.theta=A.theta=Math.atan2(F.x,F.z),O.phi=A.phi=Math.acos(Math.min(Math.max(F.y/A.radius,-1),1)),t.lookAt(this.target)};const Y=new Te,V=new Te,U=new Te;let k=ae.NONE;this.mouseButtons={ORBIT:0,ZOOM:1,PAN:2};function B(){return Math.pow(.95,c)}function W(C,X){Ae.set(X[0],X[1],X[2]),Ae.multiply(-C),z.add(Ae)}function ie(C,X){Ae.set(X[4],X[5],X[6]),Ae.multiply(C),z.add(Ae)}const H=(C,X)=>{let re=e===document?document.body:e;Ae.copy(t.position).sub(this.target);let ve=Ae.distance();ve*=Math.tan((t.fov||45)/2*Math.PI/180),W(2*C*ve/re.clientHeight,t.matrix),ie(2*X*ve/re.clientHeight,t.matrix)},K=C=>{this.zoomStyle==="dolly"?x.radius/=C:(t.fov/=C,t.type==="orthographic"?t.orthographic():t.perspective())};function se(){const C=2*Math.PI/60/60*l;x.theta-=C}function he(C,X){le.set(C,X),ce.sub(le,Y).multiply(h);let re=e===document?document.body:e;x.theta-=2*Math.PI*ce.x/re.clientHeight,x.phi-=2*Math.PI*ce.y/re.clientHeight,Y.copy(le)}function J(C){le.set(C.clientX,C.clientY),ce.sub(le,U),ce.y>0?K(B()):ce.y<0&&K(1/B()),U.copy(le)}function te(C,X){le.set(C,X),ce.sub(le,V).multiply(w),H(ce.x,ce.y),V.copy(le)}function ge(C){if(d){let X=C.touches[0].pageX-C.touches[1].pageX,re=C.touches[0].pageY-C.touches[1].pageY,ve=Math.sqrt(X*X+re*re);U.set(0,ve)}if(b){let X=.5*(C.touches[0].pageX+C.touches[1].pageX),re=.5*(C.touches[0].pageY+C.touches[1].pageY);V.set(X,re)}}function me(C){if(d){let X=C.touches[0].pageX-C.touches[1].pageX,re=C.touches[0].pageY-C.touches[1].pageY,ve=Math.sqrt(X*X+re*re);le.set(0,ve),ce.set(0,Math.pow(le.y/U.y,c)),K(ce.y),U.copy(le)}if(b){let X=.5*(C.touches[0].pageX+C.touches[1].pageX),re=.5*(C.touches[0].pageY+C.touches[1].pageY);te(X,re)}}const de=C=>{if(!!this.enabled){switch(C.button){case this.mouseButtons.ORBIT:if(a===!1)return;Y.set(C.clientX,C.clientY),k=ae.ROTATE;break;case this.mouseButtons.ZOOM:if(d===!1)return;U.set(C.clientX,C.clientY),k=ae.DOLLY;break;case this.mouseButtons.PAN:if(b===!1)return;V.set(C.clientX,C.clientY),k=ae.PAN;break}k!==ae.NONE&&(window.addEventListener("mousemove",ue,!1),window.addEventListener("mouseup",oe,!1))}},ue=C=>{if(!!this.enabled)switch(k){case ae.ROTATE:if(a===!1)return;he(C.clientX,C.clientY);break;case ae.DOLLY:if(d===!1)return;J(C);break;case ae.PAN:if(b===!1)return;te(C.clientX,C.clientY);break}},oe=()=>{window.removeEventListener("mousemove",ue,!1),window.removeEventListener("mouseup",oe,!1),k=ae.NONE},we=C=>{!this.enabled||!d||k!==ae.NONE&&k!==ae.ROTATE||(C.stopPropagation(),C.preventDefault(),C.deltaY<0?K(1/B()):C.deltaY>0&&K(B()))},Ie=C=>{if(!!this.enabled)switch(C.preventDefault(),C.touches.length){case 1:if(a===!1)return;Y.set(C.touches[0].pageX,C.touches[0].pageY),k=ae.ROTATE;break;case 2:if(d===!1&&b===!1)return;ge(C),k=ae.DOLLY_PAN;break;default:k=ae.NONE}},De=C=>{if(!!this.enabled)switch(C.preventDefault(),C.stopPropagation(),C.touches.length){case 1:if(a===!1)return;he(C.touches[0].pageX,C.touches[0].pageY);break;case 2:if(d===!1&&b===!1)return;me(C);break;default:k=ae.NONE}},Ne=()=>{!this.enabled||(k=ae.NONE)},Le=C=>{!this.enabled||C.preventDefault()};function Be(){e.addEventListener("contextmenu",Le,!1),e.addEventListener("mousedown",de,!1),e.addEventListener("wheel",we,{passive:!1}),e.addEventListener("touchstart",Ie,{passive:!1}),e.addEventListener("touchend",Ne,!1),e.addEventListener("touchmove",De,{passive:!1})}this.remove=function(){e.removeEventListener("contextmenu",Le),e.removeEventListener("mousedown",de),e.removeEventListener("wheel",we),e.removeEventListener("touchstart",Ie),e.removeEventListener("touchend",Ne),e.removeEventListener("touchmove",De),window.removeEventListener("mousemove",ue),window.removeEventListener("mouseup",oe)},Be()}/**
 * Convert a series of points to a monotone cubic spline
 * Algorithm based on https://github.com/mbostock/d3
 * https://github.com/yr/monotone-cubic-spline
 * @copyright Yr
 * @license MIT
 */var _a=1e-6,V1={points:function(e){var r=xa(e),n=e[1],i=e[0],s=[],a=r[1],h=r[0];s.push(i,[i[0]+h[0],i[1]+h[1],n[0]-a[0],n[1]-a[1],n[0],n[1]]);for(var f=2,l=r.length;f<l;f++){var d=e[f],c=r[f];s.push([d[0]-c[0],d[1]-c[1],d[0],d[1]])}return s},slice:function(e,r,n){var i=e.slice(r,n);if(r){if(i[1].length<6){var s=i[0].length;i[1]=[i[0][s-2]*2-i[0][s-4],i[0][s-1]*2-i[0][s-3]].concat(i[1])}i[0]=i[0].slice(-2)}return i},svgPath:function(e){for(var r="",n=0;n<e.length;n++){var i=e[n],s=i.length;n?s>4?(r+="C"+i[0]+", "+i[1],r+=", "+i[2]+", "+i[3],r+=", "+i[4]+", "+i[5]):(r+="S"+i[0]+", "+i[1],r+=", "+i[2]+", "+i[3]):r+="M"+i[s-2]+" "+i[s-1]}return r}};function xa(t){for(var e=Ea(t),r=t.length-1,n=[],i=void 0,s=void 0,a=void 0,h=void 0,f=0;f<r;f++)a=Yt(t[f],t[f+1]),Math.abs(a)<_a?e[f]=e[f+1]=0:(i=e[f]/a,s=e[f+1]/a,h=i*i+s*s,h>9&&(h=a*3/Math.sqrt(h),e[f]=h*i,e[f+1]=h*s));for(var l=0;l<=r;l++)h=(t[Math.min(r,l+1)][0]-t[Math.max(0,l-1)][0])/(6*(1+e[l]*e[l])),n.push([h||0,e[l]*h||0]);return n}function Yt(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Ea(t){for(var e=[],r=t[0],n=t[1],i=e[0]=Yt(r,n),s=1,a=t.length-1;s<a;s++)r=n,n=t[s+1],e[s]=(i+(i=Yt(r,n)))*.5;return e[s]=i,e}var Ma=1e-6,Jr=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function q1(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function X1(t,e,r,n){var i=n[0],s=n[1],a=n[2],h=Math.hypot(i,s,a),f,l,d,c,v,b,w,E,_,M,T,N,P,x,A,O,z,F,Y,V,U,k,B,W;return h<Ma?null:(h=1/h,i*=h,s*=h,a*=h,f=Math.sin(r),l=Math.cos(r),d=1-l,c=e[0],v=e[1],b=e[2],w=e[3],E=e[4],_=e[5],M=e[6],T=e[7],N=e[8],P=e[9],x=e[10],A=e[11],O=i*i*d+l,z=s*i*d+a*f,F=a*i*d-s*f,Y=i*s*d-a*f,V=s*s*d+l,U=a*s*d+i*f,k=i*a*d+s*f,B=s*a*d-i*f,W=a*a*d+l,t[0]=c*O+E*z+N*F,t[1]=v*O+_*z+P*F,t[2]=b*O+M*z+x*F,t[3]=w*O+T*z+A*F,t[4]=c*Y+E*V+N*U,t[5]=v*Y+_*V+P*U,t[6]=b*Y+M*V+x*U,t[7]=w*Y+T*V+A*U,t[8]=c*k+E*B+N*W,t[9]=v*k+_*B+P*W,t[10]=b*k+M*B+x*W,t[11]=w*k+T*B+A*W,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function Aa(){var t=new Jr(3);return Jr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function W1(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function j1(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function Sa(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function G1(t,e){var r=e[0],n=e[1],i=e[2],s=r*r+n*n+i*i;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function H1(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Q1(t,e,r){var n=e[0],i=e[1],s=e[2],a=r[0],h=r[1],f=r[2];return t[0]=i*f-s*h,t[1]=s*a-n*f,t[2]=n*h-i*a,t}function Z1(t,e,r){var n=e[0],i=e[1],s=e[2],a=r[3]*n+r[7]*i+r[11]*s+r[15];return a=a||1,t[0]=(r[0]*n+r[4]*i+r[8]*s+r[12])/a,t[1]=(r[1]*n+r[5]*i+r[9]*s+r[13])/a,t[2]=(r[2]*n+r[6]*i+r[10]*s+r[14])/a,t}var K1=Sa;(function(){var t=Aa();return function(e,r,n,i,s,a){var h,f;for(r||(r=3),n||(n=0),i?f=Math.min(i*r+n,e.length):f=e.length,h=n;h<f;h+=r)t[0]=e[h],t[1]=e[h+1],t[2]=e[h+2],s(t,t,a),e[h]=t[0],e[h+1]=t[1],e[h+2]=t[2];return e}})();var Ra={},it={},We={};Object.defineProperty(We,"__esModule",{value:!0});function Ta(t){var e=new Uint32Array(1);return e[0]=t[0]*1664525+1013904223,e}We.default=Ta;Object.defineProperty(it,"__esModule",{value:!0});it.makeNoise2D=void 0;var st=We,Oa=1/47,Vt=(Math.sqrt(2+1)-1)/2,Ia=(1/Math.sqrt(2+1)-1)/2;function en(t,e,r){return{dx:-e-t*Vt,dy:-r-t*Vt,xsb:e,ysb:r}}function Da(t){for(var e=[],r=0;r<je.length;r+=4){for(var n=Na[je[r]],i=null,s=null,a=0;a<n.length;a+=3)s=en(n[a],n[a+1],n[a+2]),i===null?e[r/4]=s:i.next=s,i=s;s.next=en(je[r+1],je[r+2],je[r+3])}for(var h=[],r=0;r<qt.length;r+=2)h[qt[r]]=e[qt[r+1]];for(var f=new Uint8Array(256),l=new Uint8Array(256),d=new Uint8Array(256),r=0;r<256;r++)d[r]=r;var c=new Uint32Array(1);c[0]=t,c=st.default(st.default(st.default(c)));for(var r=255;r>=0;r--){c=st.default(c);var v=new Uint32Array(1);v[0]=(c[0]+31)%(r+1),v[0]<0&&(v[0]+=r+1),f[r]=d[v[0]],l[r]=f[r]&14,d[v[0]]=d[r]}return function(b,w){for(var E=(b+w)*Ia,_=b+E,M=w+E,T=Math.floor(_),N=Math.floor(M),P=(T+N)*Vt,x=b-(T+P),A=w-(N+P),O=_-T,z=M-N,F=O+z,Y=O-z+1|F<<1|F+z<<2|F+O<<4,V=0,U=h[Y];U!==void 0;U=U.next){var k=x+U.dx,B=A+U.dy,W=2-k*k-B*B;if(W>0){var ie=T+U.xsb,H=N+U.ysb,K=f[ie&255],se=l[K+H&255],he=tn[se]*k+tn[se+1]*B;V+=W*W*W*W*he}}return V*Oa}}it.makeNoise2D=Da;var Na=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],tn=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],qt=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],je=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0],at={};Object.defineProperty(at,"__esModule",{value:!0});at.makeNoise3D=void 0;var ot=We,La=1/103,ht=(Math.sqrt(3+1)-1)/3,Pa=(1/Math.sqrt(3+1)-1)/3;function Xt(t,e,r,n){return{dx:-e-t*ht,dy:-r-t*ht,dz:-n-t*ht,xsb:e,ysb:r,zsb:n}}function Ca(t){for(var e=[],r=0;r<pe.length;r+=9){for(var n=Fa[pe[r]],i=null,s=null,a=0;a<n.length;a+=4)s=Xt(n[a],n[a+1],n[a+2],n[a+3]),i===null?e[r/9]=s:i.next=s,i=s;s.next=Xt(pe[r+1],pe[r+2],pe[r+3],pe[r+4]),s.next.next=Xt(pe[r+5],pe[r+6],pe[r+7],pe[r+8])}for(var h=[],r=0;r<jt.length;r+=2)h[jt[r]]=e[jt[r+1]];for(var f=new Uint8Array(256),l=new Uint8Array(256),d=new Uint8Array(256),r=0;r<256;r++)d[r]=r;var c=new Uint32Array(1);c[0]=t,c=ot.default(ot.default(ot.default(c)));for(var r=255;r>=0;r--){c=ot.default(c);var v=new Uint32Array(1);v[0]=(c[0]+31)%(r+1),v[0]<0&&(v[0]+=r+1),f[r]=d[v[0]],l[r]=f[r]%24*3,d[v[0]]=d[r]}return function(b,w,E){for(var _=(b+w+E)*Pa,M=b+_,T=w+_,N=E+_,P=Math.floor(M),x=Math.floor(T),A=Math.floor(N),O=(P+x+A)*ht,z=b-(P+O),F=w-(x+O),Y=E-(A+O),V=M-P,U=T-x,k=N-A,B=V+U+k,W=U-k+1|V-U+1<<1|V-k+1<<2|B<<3|B+k<<5|B+U<<7|B+V<<9,ie=0,H=h[W];H!==void 0;H=H.next){var K=z+H.dx,se=F+H.dy,he=Y+H.dz,J=2-K*K-se*se-he*he;if(J>0){var te=P+H.xsb,ge=x+H.ysb,me=A+H.zsb,de=f[te&255],ue=f[de+ge&255],oe=l[ue+me&255],we=Wt[oe]*K+Wt[oe+1]*se+Wt[oe+2]*he;ie+=J*J*J*J*we}}return ie*La}}at.makeNoise3D=Ca;var Fa=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],Wt=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],jt=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],pe=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0],ft={};Object.defineProperty(ft,"__esModule",{value:!0});ft.makeNoise4D=void 0;var lt=We,za=1/30,Ge=(Math.sqrt(4+1)-1)/4,Ba=(1/Math.sqrt(4+1)-1)/4;function ut(t,e,r,n,i){return{dx:-e-t*Ge,dy:-r-t*Ge,dz:-n-t*Ge,dw:-i-t*Ge,xsb:e,ysb:r,zsb:n,wsb:i}}function Ua(t){for(var e=[],r=0;r<ne.length;r+=16){for(var n=$a[ne[r]],i=null,s=null,a=0;a<n.length;a+=5)s=ut(n[a],n[a+1],n[a+2],n[a+3],n[a+4]),i===null?e[r/16]=s:i.next=s,i=s;s.next=ut(ne[r+1],ne[r+2],ne[r+3],ne[r+4],ne[r+5]),s.next.next=ut(ne[r+6],ne[r+7],ne[r+8],ne[r+9],ne[r+10]),s.next.next.next=ut(ne[r+11],ne[r+12],ne[r+13],ne[r+14],ne[r+15])}for(var h=[],r=0;r<Gt.length;r+=2)h[Gt[r]]=e[Gt[r+1]];for(var f=new Uint8Array(256),l=new Uint8Array(256),d=new Uint8Array(256),r=0;r<256;r++)d[r]=r;var c=new Uint32Array(1);c[0]=t,c=lt.default(lt.default(lt.default(c)));for(var r=255;r>=0;r--){c=lt.default(c);var v=new Uint32Array(1);v[0]=(c[0]+31)%(r+1),v[0]<0&&(v[0]+=r+1),f[r]=d[v[0]],l[r]=f[r]&252,d[v[0]]=d[r]}return function(b,w,E,_){for(var M=(b+w+E+_)*Ba,T=b+M,N=w+M,P=E+M,x=_+M,A=Math.floor(T),O=Math.floor(N),z=Math.floor(P),F=Math.floor(x),Y=(A+O+z+F)*Ge,V=b-(A+Y),U=w-(O+Y),k=E-(z+Y),B=_-(F+Y),W=T-A,ie=N-O,H=P-z,K=x-F,se=W+ie+H+K,he=H-K+1|ie-H+1<<1|ie-K+1<<2|W-ie+1<<3|W-H+1<<4|W-K+1<<5|se<<6|se+K<<8|se+H<<11|se+ie<<14|se+W<<17,J=0,te=h[he];te!==void 0;te=te.next){var ge=V+te.dx,me=U+te.dy,de=k+te.dz,ue=B+te.dw,oe=2-ge*ge-me*me-de*de-ue*ue;if(oe>0){var we=A+te.xsb,Ie=O+te.ysb,De=z+te.zsb,Ne=F+te.wsb,Le=f[we&255],Be=f[Le+Ie&255],C=f[Be+De&255],X=l[C+Ne&255],re=ct[X]*ge+ct[X+1]*me+ct[X+2]*de+ct[X+3]*ue;J+=oe*oe*oe*oe*re}}return J*za}}ft.makeNoise4D=Ua;var $a=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],ct=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],Gt=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],ne=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1];(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.makeNoise4D=t.makeNoise3D=t.makeNoise2D=void 0;var e=it;Object.defineProperty(t,"makeNoise2D",{enumerable:!0,get:function(){return e.makeNoise2D}});var r=at;Object.defineProperty(t,"makeNoise3D",{enumerable:!0,get:function(){return r.makeNoise3D}});var n=ft;Object.defineProperty(t,"makeNoise4D",{enumerable:!0,get:function(){return n.makeNoise4D}})})(Ra);var rn={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,i,s){function a(l,d){if(!i[l]){if(!n[l]){var c=typeof et=="function"&&et;if(!d&&c)return c(l,!0);if(h)return h(l,!0);var v=new Error("Cannot find module '"+l+"'");throw v.code="MODULE_NOT_FOUND",v}var b=i[l]={exports:{}};n[l][0].call(b.exports,function(w){var E=n[l][1][w];return a(E||w)},b,b.exports,r,n,i,s)}return i[l].exports}for(var h=typeof et=="function"&&et,f=0;f<s.length;f++)a(s[f]);return a}({1:[function(r,n,i){(function(s){var a=s.MutationObserver||s.WebKitMutationObserver,h;if(a){var f=0,l=new a(w),d=s.document.createTextNode("");l.observe(d,{characterData:!0}),h=function(){d.data=f=++f%2}}else if(!s.setImmediate&&typeof s.MessageChannel!="undefined"){var c=new s.MessageChannel;c.port1.onmessage=w,h=function(){c.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?h=function(){var _=s.document.createElement("script");_.onreadystatechange=function(){w(),_.onreadystatechange=null,_.parentNode.removeChild(_),_=null},s.document.documentElement.appendChild(_)}:h=function(){setTimeout(w,0)};var v,b=[];function w(){v=!0;for(var _,M,T=b.length;T;){for(M=b,b=[],_=-1;++_<T;)M[_]();T=b.length}v=!1}n.exports=E;function E(_){b.push(_)===1&&!v&&h()}}).call(this,typeof be!="undefined"?be:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],2:[function(r,n,i){var s=r(1);function a(){}var h={},f=["REJECTED"],l=["FULFILLED"],d=["PENDING"];n.exports=c;function c(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,x!==a&&E(this,x)}c.prototype.catch=function(x){return this.then(null,x)},c.prototype.then=function(x,A){if(typeof x!="function"&&this.state===l||typeof A!="function"&&this.state===f)return this;var O=new this.constructor(a);if(this.state!==d){var z=this.state===l?x:A;b(O,z,this.outcome)}else this.queue.push(new v(O,x,A));return O};function v(x,A,O){this.promise=x,typeof A=="function"&&(this.onFulfilled=A,this.callFulfilled=this.otherCallFulfilled),typeof O=="function"&&(this.onRejected=O,this.callRejected=this.otherCallRejected)}v.prototype.callFulfilled=function(x){h.resolve(this.promise,x)},v.prototype.otherCallFulfilled=function(x){b(this.promise,this.onFulfilled,x)},v.prototype.callRejected=function(x){h.reject(this.promise,x)},v.prototype.otherCallRejected=function(x){b(this.promise,this.onRejected,x)};function b(x,A,O){s(function(){var z;try{z=A(O)}catch(F){return h.reject(x,F)}z===x?h.reject(x,new TypeError("Cannot resolve promise with itself")):h.resolve(x,z)})}h.resolve=function(x,A){var O=_(w,A);if(O.status==="error")return h.reject(x,O.value);var z=O.value;if(z)E(x,z);else{x.state=l,x.outcome=A;for(var F=-1,Y=x.queue.length;++F<Y;)x.queue[F].callFulfilled(A)}return x},h.reject=function(x,A){x.state=f,x.outcome=A;for(var O=-1,z=x.queue.length;++O<z;)x.queue[O].callRejected(A);return x};function w(x){var A=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof A=="function")return function(){A.apply(x,arguments)}}function E(x,A){var O=!1;function z(U){O||(O=!0,h.reject(x,U))}function F(U){O||(O=!0,h.resolve(x,U))}function Y(){A(F,z)}var V=_(Y);V.status==="error"&&z(V.value)}function _(x,A){var O={};try{O.value=x(A),O.status="success"}catch(z){O.status="error",O.value=z}return O}c.resolve=M;function M(x){return x instanceof this?x:h.resolve(new this(a),x)}c.reject=T;function T(x){var A=new this(a);return h.reject(A,x)}c.all=N;function N(x){var A=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var O=x.length,z=!1;if(!O)return this.resolve([]);for(var F=new Array(O),Y=0,V=-1,U=new this(a);++V<O;)k(x[V],V);return U;function k(B,W){A.resolve(B).then(ie,function(H){z||(z=!0,h.reject(U,H))});function ie(H){F[W]=H,++Y===O&&!z&&(z=!0,h.resolve(U,F))}}}c.race=P;function P(x){var A=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var O=x.length,z=!1;if(!O)return this.resolve([]);for(var F=-1,Y=new this(a);++F<O;)V(x[F]);return Y;function V(U){A.resolve(U).then(function(k){z||(z=!0,h.resolve(Y,k))},function(k){z||(z=!0,h.reject(Y,k))})}}},{"1":1}],3:[function(r,n,i){(function(s){typeof s.Promise!="function"&&(s.Promise=r(2))}).call(this,typeof be!="undefined"?be:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"2":2}],4:[function(r,n,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};function a(o,p){if(!(o instanceof p))throw new TypeError("Cannot call a class as a function")}function h(){try{if(typeof indexedDB!="undefined")return indexedDB;if(typeof webkitIndexedDB!="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!="undefined")return mozIndexedDB;if(typeof OIndexedDB!="undefined")return OIndexedDB;if(typeof msIndexedDB!="undefined")return msIndexedDB}catch{return}}var f=h();function l(){try{if(!f||!f.open)return!1;var o=typeof openDatabase!="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),p=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!o||p)&&typeof indexedDB!="undefined"&&typeof IDBKeyRange!="undefined"}catch{return!1}}function d(o,p){o=o||[],p=p||{};try{return new Blob(o,p)}catch(g){if(g.name!=="TypeError")throw g;for(var u=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,m=new u,y=0;y<o.length;y+=1)m.append(o[y]);return m.getBlob(p.type)}}typeof Promise=="undefined"&&r(3);var c=Promise;function v(o,p){p&&o.then(function(u){p(null,u)},function(u){p(u)})}function b(o,p,u){typeof p=="function"&&o.then(p),typeof u=="function"&&o.catch(u)}function w(o){return typeof o!="string"&&(console.warn(o+" used as a key, but it is not a string."),o=String(o)),o}function E(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var _="local-forage-detect-blob-support",M=void 0,T={},N=Object.prototype.toString,P="readonly",x="readwrite";function A(o){for(var p=o.length,u=new ArrayBuffer(p),m=new Uint8Array(u),y=0;y<p;y++)m[y]=o.charCodeAt(y);return u}function O(o){return new c(function(p){var u=o.transaction(_,x),m=d([""]);u.objectStore(_).put(m,"key"),u.onabort=function(y){y.preventDefault(),y.stopPropagation(),p(!1)},u.oncomplete=function(){var y=navigator.userAgent.match(/Chrome\/(\d+)/),g=navigator.userAgent.match(/Edge\//);p(g||!y||parseInt(y[1],10)>=43)}}).catch(function(){return!1})}function z(o){return typeof M=="boolean"?c.resolve(M):O(o).then(function(p){return M=p,M})}function F(o){var p=T[o.name],u={};u.promise=new c(function(m,y){u.resolve=m,u.reject=y}),p.deferredOperations.push(u),p.dbReady?p.dbReady=p.dbReady.then(function(){return u.promise}):p.dbReady=u.promise}function Y(o){var p=T[o.name],u=p.deferredOperations.pop();if(u)return u.resolve(),u.promise}function V(o,p){var u=T[o.name],m=u.deferredOperations.pop();if(m)return m.reject(p),m.promise}function U(o,p){return new c(function(u,m){if(T[o.name]=T[o.name]||te(),o.db)if(p)F(o),o.db.close();else return u(o.db);var y=[o.name];p&&y.push(o.version);var g=f.open.apply(f,y);p&&(g.onupgradeneeded=function(S){var R=g.result;try{R.createObjectStore(o.storeName),S.oldVersion<=1&&R.createObjectStore(_)}catch(I){if(I.name==="ConstraintError")console.warn('The database "'+o.name+'" has been upgraded from version '+S.oldVersion+" to version "+S.newVersion+', but the storage "'+o.storeName+'" already exists.');else throw I}}),g.onerror=function(S){S.preventDefault(),m(g.error)},g.onsuccess=function(){var S=g.result;S.onversionchange=function(R){R.target.close()},u(S),Y(o)}})}function k(o){return U(o,!1)}function B(o){return U(o,!0)}function W(o,p){if(!o.db)return!0;var u=!o.db.objectStoreNames.contains(o.storeName),m=o.version<o.db.version,y=o.version>o.db.version;if(m&&(o.version!==p&&console.warn('The database "'+o.name+`" can't be downgraded from version `+o.db.version+" to version "+o.version+"."),o.version=o.db.version),y||u){if(u){var g=o.db.version+1;g>o.version&&(o.version=g)}return!0}return!1}function ie(o){return new c(function(p,u){var m=new FileReader;m.onerror=u,m.onloadend=function(y){var g=btoa(y.target.result||"");p({__local_forage_encoded_blob:!0,data:g,type:o.type})},m.readAsBinaryString(o)})}function H(o){var p=A(atob(o.data));return d([p],{type:o.type})}function K(o){return o&&o.__local_forage_encoded_blob}function se(o){var p=this,u=p._initReady().then(function(){var m=T[p._dbInfo.name];if(m&&m.dbReady)return m.dbReady});return b(u,o,o),u}function he(o){F(o);for(var p=T[o.name],u=p.forages,m=0;m<u.length;m++){var y=u[m];y._dbInfo.db&&(y._dbInfo.db.close(),y._dbInfo.db=null)}return o.db=null,k(o).then(function(g){return o.db=g,W(o)?B(o):g}).then(function(g){o.db=p.db=g;for(var S=0;S<u.length;S++)u[S]._dbInfo.db=g}).catch(function(g){throw V(o,g),g})}function J(o,p,u,m){m===void 0&&(m=1);try{var y=o.db.transaction(o.storeName,p);u(null,y)}catch(g){if(m>0&&(!o.db||g.name==="InvalidStateError"||g.name==="NotFoundError"))return c.resolve().then(function(){if(!o.db||g.name==="NotFoundError"&&!o.db.objectStoreNames.contains(o.storeName)&&o.version<=o.db.version)return o.db&&(o.version=o.db.version+1),B(o)}).then(function(){return he(o).then(function(){J(o,p,u,m-1)})}).catch(u);u(g)}}function te(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ge(o){var p=this,u={db:null};if(o)for(var m in o)u[m]=o[m];var y=T[u.name];y||(y=te(),T[u.name]=y),y.forages.push(p),p._initReady||(p._initReady=p.ready,p.ready=se);var g=[];function S(){return c.resolve()}for(var R=0;R<y.forages.length;R++){var I=y.forages[R];I!==p&&g.push(I._initReady().catch(S))}var D=y.forages.slice(0);return c.all(g).then(function(){return u.db=y.db,k(u)}).then(function(L){return u.db=L,W(u,p._defaultConfig.version)?B(u):L}).then(function(L){u.db=y.db=L,p._dbInfo=u;for(var $=0;$<D.length;$++){var q=D[$];q!==p&&(q._dbInfo.db=u.db,q._dbInfo.version=u.version)}})}function me(o,p){var u=this;o=w(o);var m=new c(function(y,g){u.ready().then(function(){J(u._dbInfo,P,function(S,R){if(S)return g(S);try{var I=R.objectStore(u._dbInfo.storeName),D=I.get(o);D.onsuccess=function(){var L=D.result;L===void 0&&(L=null),K(L)&&(L=H(L)),y(L)},D.onerror=function(){g(D.error)}}catch(L){g(L)}})}).catch(g)});return v(m,p),m}function de(o,p){var u=this,m=new c(function(y,g){u.ready().then(function(){J(u._dbInfo,P,function(S,R){if(S)return g(S);try{var I=R.objectStore(u._dbInfo.storeName),D=I.openCursor(),L=1;D.onsuccess=function(){var $=D.result;if($){var q=$.value;K(q)&&(q=H(q));var j=o(q,$.key,L++);j!==void 0?y(j):$.continue()}else y()},D.onerror=function(){g(D.error)}}catch($){g($)}})}).catch(g)});return v(m,p),m}function ue(o,p,u){var m=this;o=w(o);var y=new c(function(g,S){var R;m.ready().then(function(){return R=m._dbInfo,N.call(p)==="[object Blob]"?z(R.db).then(function(I){return I?p:ie(p)}):p}).then(function(I){J(m._dbInfo,x,function(D,L){if(D)return S(D);try{var $=L.objectStore(m._dbInfo.storeName);I===null&&(I=void 0);var q=$.put(I,o);L.oncomplete=function(){I===void 0&&(I=null),g(I)},L.onabort=L.onerror=function(){var j=q.error?q.error:q.transaction.error;S(j)}}catch(j){S(j)}})}).catch(S)});return v(y,u),y}function oe(o,p){var u=this;o=w(o);var m=new c(function(y,g){u.ready().then(function(){J(u._dbInfo,x,function(S,R){if(S)return g(S);try{var I=R.objectStore(u._dbInfo.storeName),D=I.delete(o);R.oncomplete=function(){y()},R.onerror=function(){g(D.error)},R.onabort=function(){var L=D.error?D.error:D.transaction.error;g(L)}}catch(L){g(L)}})}).catch(g)});return v(m,p),m}function we(o){var p=this,u=new c(function(m,y){p.ready().then(function(){J(p._dbInfo,x,function(g,S){if(g)return y(g);try{var R=S.objectStore(p._dbInfo.storeName),I=R.clear();S.oncomplete=function(){m()},S.onabort=S.onerror=function(){var D=I.error?I.error:I.transaction.error;y(D)}}catch(D){y(D)}})}).catch(y)});return v(u,o),u}function Ie(o){var p=this,u=new c(function(m,y){p.ready().then(function(){J(p._dbInfo,P,function(g,S){if(g)return y(g);try{var R=S.objectStore(p._dbInfo.storeName),I=R.count();I.onsuccess=function(){m(I.result)},I.onerror=function(){y(I.error)}}catch(D){y(D)}})}).catch(y)});return v(u,o),u}function De(o,p){var u=this,m=new c(function(y,g){if(o<0){y(null);return}u.ready().then(function(){J(u._dbInfo,P,function(S,R){if(S)return g(S);try{var I=R.objectStore(u._dbInfo.storeName),D=!1,L=I.openKeyCursor();L.onsuccess=function(){var $=L.result;if(!$){y(null);return}o===0||D?y($.key):(D=!0,$.advance(o))},L.onerror=function(){g(L.error)}}catch($){g($)}})}).catch(g)});return v(m,p),m}function Ne(o){var p=this,u=new c(function(m,y){p.ready().then(function(){J(p._dbInfo,P,function(g,S){if(g)return y(g);try{var R=S.objectStore(p._dbInfo.storeName),I=R.openKeyCursor(),D=[];I.onsuccess=function(){var L=I.result;if(!L){m(D);return}D.push(L.key),L.continue()},I.onerror=function(){y(I.error)}}catch(L){y(L)}})}).catch(y)});return v(u,o),u}function Le(o,p){p=E.apply(this,arguments);var u=this.config();o=typeof o!="function"&&o||{},o.name||(o.name=o.name||u.name,o.storeName=o.storeName||u.storeName);var m=this,y;if(!o.name)y=c.reject("Invalid arguments");else{var g=o.name===u.name&&m._dbInfo.db,S=g?c.resolve(m._dbInfo.db):k(o).then(function(R){var I=T[o.name],D=I.forages;I.db=R;for(var L=0;L<D.length;L++)D[L]._dbInfo.db=R;return R});o.storeName?y=S.then(function(R){if(!!R.objectStoreNames.contains(o.storeName)){var I=R.version+1;F(o);var D=T[o.name],L=D.forages;R.close();for(var $=0;$<L.length;$++){var q=L[$];q._dbInfo.db=null,q._dbInfo.version=I}var j=new c(function(G,ee){var Z=f.open(o.name,I);Z.onerror=function(fe){var $e=Z.result;$e.close(),ee(fe)},Z.onupgradeneeded=function(){var fe=Z.result;fe.deleteObjectStore(o.storeName)},Z.onsuccess=function(){var fe=Z.result;fe.close(),G(fe)}});return j.then(function(G){D.db=G;for(var ee=0;ee<L.length;ee++){var Z=L[ee];Z._dbInfo.db=G,Y(Z._dbInfo)}}).catch(function(G){throw(V(o,G)||c.resolve()).catch(function(){}),G})}}):y=S.then(function(R){F(o);var I=T[o.name],D=I.forages;R.close();for(var L=0;L<D.length;L++){var $=D[L];$._dbInfo.db=null}var q=new c(function(j,G){var ee=f.deleteDatabase(o.name);ee.onerror=function(){var Z=ee.result;Z&&Z.close(),G(ee.error)},ee.onblocked=function(){console.warn('dropInstance blocked for database "'+o.name+'" until all open connections are closed')},ee.onsuccess=function(){var Z=ee.result;Z&&Z.close(),j(Z)}});return q.then(function(j){I.db=j;for(var G=0;G<D.length;G++){var ee=D[G];Y(ee._dbInfo)}}).catch(function(j){throw(V(o,j)||c.resolve()).catch(function(){}),j})})}return v(y,p),y}var Be={_driver:"asyncStorage",_initStorage:ge,_support:l(),iterate:de,getItem:me,setItem:ue,removeItem:oe,clear:we,length:Ie,key:De,keys:Ne,dropInstance:Le};function C(){return typeof openDatabase=="function"}var X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",re="~~local_forage_type~",ve=/^~~local_forage_type~([^~]+)~/,He="__lfsc__:",mt=He.length,yt="arbf",bt="blob",Jt="si08",er="ui08",tr="uic8",rr="si16",nr="si32",ir="ur16",sr="ui32",ar="fl32",or="fl64",hr=mt+yt.length,fr=Object.prototype.toString;function lr(o){var p=o.length*.75,u=o.length,m,y=0,g,S,R,I;o[o.length-1]==="="&&(p--,o[o.length-2]==="="&&p--);var D=new ArrayBuffer(p),L=new Uint8Array(D);for(m=0;m<u;m+=4)g=X.indexOf(o[m]),S=X.indexOf(o[m+1]),R=X.indexOf(o[m+2]),I=X.indexOf(o[m+3]),L[y++]=g<<2|S>>4,L[y++]=(S&15)<<4|R>>2,L[y++]=(R&3)<<6|I&63;return D}function wt(o){var p=new Uint8Array(o),u="",m;for(m=0;m<p.length;m+=3)u+=X[p[m]>>2],u+=X[(p[m]&3)<<4|p[m+1]>>4],u+=X[(p[m+1]&15)<<2|p[m+2]>>6],u+=X[p[m+2]&63];return p.length%3==2?u=u.substring(0,u.length-1)+"=":p.length%3==1&&(u=u.substring(0,u.length-2)+"=="),u}function mn(o,p){var u="";if(o&&(u=fr.call(o)),o&&(u==="[object ArrayBuffer]"||o.buffer&&fr.call(o.buffer)==="[object ArrayBuffer]")){var m,y=He;o instanceof ArrayBuffer?(m=o,y+=yt):(m=o.buffer,u==="[object Int8Array]"?y+=Jt:u==="[object Uint8Array]"?y+=er:u==="[object Uint8ClampedArray]"?y+=tr:u==="[object Int16Array]"?y+=rr:u==="[object Uint16Array]"?y+=ir:u==="[object Int32Array]"?y+=nr:u==="[object Uint32Array]"?y+=sr:u==="[object Float32Array]"?y+=ar:u==="[object Float64Array]"?y+=or:p(new Error("Failed to get type for BinaryArray"))),p(y+wt(m))}else if(u==="[object Blob]"){var g=new FileReader;g.onload=function(){var S=re+o.type+"~"+wt(this.result);p(He+bt+S)},g.readAsArrayBuffer(o)}else try{p(JSON.stringify(o))}catch(S){console.error("Couldn't convert value into a JSON string: ",o),p(null,S)}}function yn(o){if(o.substring(0,mt)!==He)return JSON.parse(o);var p=o.substring(hr),u=o.substring(mt,hr),m;if(u===bt&&ve.test(p)){var y=p.match(ve);m=y[1],p=p.substring(y[0].length)}var g=lr(p);switch(u){case yt:return g;case bt:return d([g],{type:m});case Jt:return new Int8Array(g);case er:return new Uint8Array(g);case tr:return new Uint8ClampedArray(g);case rr:return new Int16Array(g);case ir:return new Uint16Array(g);case nr:return new Int32Array(g);case sr:return new Uint32Array(g);case ar:return new Float32Array(g);case or:return new Float64Array(g);default:throw new Error("Unkown type: "+u)}}var _t={serialize:mn,deserialize:yn,stringToBuffer:lr,bufferToString:wt};function ur(o,p,u,m){o.executeSql("CREATE TABLE IF NOT EXISTS "+p.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],u,m)}function bn(o){var p=this,u={db:null};if(o)for(var m in o)u[m]=typeof o[m]!="string"?o[m].toString():o[m];var y=new c(function(g,S){try{u.db=openDatabase(u.name,String(u.version),u.description,u.size)}catch(R){return S(R)}u.db.transaction(function(R){ur(R,u,function(){p._dbInfo=u,g()},function(I,D){S(D)})},S)});return u.serializer=_t,y}function _e(o,p,u,m,y,g){o.executeSql(u,m,y,function(S,R){R.code===R.SYNTAX_ERR?S.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[p.storeName],function(I,D){D.rows.length?g(I,R):ur(I,p,function(){I.executeSql(u,m,y,g)},g)},g):g(S,R)},g)}function wn(o,p){var u=this;o=w(o);var m=new c(function(y,g){u.ready().then(function(){var S=u._dbInfo;S.db.transaction(function(R){_e(R,S,"SELECT * FROM "+S.storeName+" WHERE key = ? LIMIT 1",[o],function(I,D){var L=D.rows.length?D.rows.item(0).value:null;L&&(L=S.serializer.deserialize(L)),y(L)},function(I,D){g(D)})})}).catch(g)});return v(m,p),m}function _n(o,p){var u=this,m=new c(function(y,g){u.ready().then(function(){var S=u._dbInfo;S.db.transaction(function(R){_e(R,S,"SELECT * FROM "+S.storeName,[],function(I,D){for(var L=D.rows,$=L.length,q=0;q<$;q++){var j=L.item(q),G=j.value;if(G&&(G=S.serializer.deserialize(G)),G=o(G,j.key,q+1),G!==void 0){y(G);return}}y()},function(I,D){g(D)})})}).catch(g)});return v(m,p),m}function cr(o,p,u,m){var y=this;o=w(o);var g=new c(function(S,R){y.ready().then(function(){p===void 0&&(p=null);var I=p,D=y._dbInfo;D.serializer.serialize(p,function(L,$){$?R($):D.db.transaction(function(q){_e(q,D,"INSERT OR REPLACE INTO "+D.storeName+" (key, value) VALUES (?, ?)",[o,L],function(){S(I)},function(j,G){R(G)})},function(q){if(q.code===q.QUOTA_ERR){if(m>0){S(cr.apply(y,[o,I,u,m-1]));return}R(q)}})})}).catch(R)});return v(g,u),g}function xn(o,p,u){return cr.apply(this,[o,p,u,1])}function En(o,p){var u=this;o=w(o);var m=new c(function(y,g){u.ready().then(function(){var S=u._dbInfo;S.db.transaction(function(R){_e(R,S,"DELETE FROM "+S.storeName+" WHERE key = ?",[o],function(){y()},function(I,D){g(D)})})}).catch(g)});return v(m,p),m}function Mn(o){var p=this,u=new c(function(m,y){p.ready().then(function(){var g=p._dbInfo;g.db.transaction(function(S){_e(S,g,"DELETE FROM "+g.storeName,[],function(){m()},function(R,I){y(I)})})}).catch(y)});return v(u,o),u}function An(o){var p=this,u=new c(function(m,y){p.ready().then(function(){var g=p._dbInfo;g.db.transaction(function(S){_e(S,g,"SELECT COUNT(key) as c FROM "+g.storeName,[],function(R,I){var D=I.rows.item(0).c;m(D)},function(R,I){y(I)})})}).catch(y)});return v(u,o),u}function Sn(o,p){var u=this,m=new c(function(y,g){u.ready().then(function(){var S=u._dbInfo;S.db.transaction(function(R){_e(R,S,"SELECT key FROM "+S.storeName+" WHERE id = ? LIMIT 1",[o+1],function(I,D){var L=D.rows.length?D.rows.item(0).key:null;y(L)},function(I,D){g(D)})})}).catch(g)});return v(m,p),m}function Rn(o){var p=this,u=new c(function(m,y){p.ready().then(function(){var g=p._dbInfo;g.db.transaction(function(S){_e(S,g,"SELECT key FROM "+g.storeName,[],function(R,I){for(var D=[],L=0;L<I.rows.length;L++)D.push(I.rows.item(L).key);m(D)},function(R,I){y(I)})})}).catch(y)});return v(u,o),u}function Tn(o){return new c(function(p,u){o.transaction(function(m){m.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(y,g){for(var S=[],R=0;R<g.rows.length;R++)S.push(g.rows.item(R).name);p({db:o,storeNames:S})},function(y,g){u(g)})},function(m){u(m)})})}function On(o,p){p=E.apply(this,arguments);var u=this.config();o=typeof o!="function"&&o||{},o.name||(o.name=o.name||u.name,o.storeName=o.storeName||u.storeName);var m=this,y;return o.name?y=new c(function(g){var S;o.name===u.name?S=m._dbInfo.db:S=openDatabase(o.name,"","",0),o.storeName?g({db:S,storeNames:[o.storeName]}):g(Tn(S))}).then(function(g){return new c(function(S,R){g.db.transaction(function(I){function D(j){return new c(function(G,ee){I.executeSql("DROP TABLE IF EXISTS "+j,[],function(){G()},function(Z,fe){ee(fe)})})}for(var L=[],$=0,q=g.storeNames.length;$<q;$++)L.push(D(g.storeNames[$]));c.all(L).then(function(){S()}).catch(function(j){R(j)})},function(I){R(I)})})}):y=c.reject("Invalid arguments"),v(y,p),y}var In={_driver:"webSQLStorage",_initStorage:bn,_support:C(),iterate:_n,getItem:wn,setItem:xn,removeItem:En,clear:Mn,length:An,key:Sn,keys:Rn,dropInstance:On};function Dn(){try{return typeof localStorage!="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function dr(o,p){var u=o.name+"/";return o.storeName!==p.storeName&&(u+=o.storeName+"/"),u}function Nn(){var o="_localforage_support_test";try{return localStorage.setItem(o,!0),localStorage.removeItem(o),!1}catch{return!0}}function Ln(){return!Nn()||localStorage.length>0}function Pn(o){var p=this,u={};if(o)for(var m in o)u[m]=o[m];return u.keyPrefix=dr(o,p._defaultConfig),Ln()?(p._dbInfo=u,u.serializer=_t,c.resolve()):c.reject()}function Cn(o){var p=this,u=p.ready().then(function(){for(var m=p._dbInfo.keyPrefix,y=localStorage.length-1;y>=0;y--){var g=localStorage.key(y);g.indexOf(m)===0&&localStorage.removeItem(g)}});return v(u,o),u}function Fn(o,p){var u=this;o=w(o);var m=u.ready().then(function(){var y=u._dbInfo,g=localStorage.getItem(y.keyPrefix+o);return g&&(g=y.serializer.deserialize(g)),g});return v(m,p),m}function zn(o,p){var u=this,m=u.ready().then(function(){for(var y=u._dbInfo,g=y.keyPrefix,S=g.length,R=localStorage.length,I=1,D=0;D<R;D++){var L=localStorage.key(D);if(L.indexOf(g)===0){var $=localStorage.getItem(L);if($&&($=y.serializer.deserialize($)),$=o($,L.substring(S),I++),$!==void 0)return $}}});return v(m,p),m}function Bn(o,p){var u=this,m=u.ready().then(function(){var y=u._dbInfo,g;try{g=localStorage.key(o)}catch{g=null}return g&&(g=g.substring(y.keyPrefix.length)),g});return v(m,p),m}function Un(o){var p=this,u=p.ready().then(function(){for(var m=p._dbInfo,y=localStorage.length,g=[],S=0;S<y;S++){var R=localStorage.key(S);R.indexOf(m.keyPrefix)===0&&g.push(R.substring(m.keyPrefix.length))}return g});return v(u,o),u}function $n(o){var p=this,u=p.keys().then(function(m){return m.length});return v(u,o),u}function kn(o,p){var u=this;o=w(o);var m=u.ready().then(function(){var y=u._dbInfo;localStorage.removeItem(y.keyPrefix+o)});return v(m,p),m}function Yn(o,p,u){var m=this;o=w(o);var y=m.ready().then(function(){p===void 0&&(p=null);var g=p;return new c(function(S,R){var I=m._dbInfo;I.serializer.serialize(p,function(D,L){if(L)R(L);else try{localStorage.setItem(I.keyPrefix+o,D),S(g)}catch($){($.name==="QuotaExceededError"||$.name==="NS_ERROR_DOM_QUOTA_REACHED")&&R($),R($)}})})});return v(y,u),y}function Vn(o,p){if(p=E.apply(this,arguments),o=typeof o!="function"&&o||{},!o.name){var u=this.config();o.name=o.name||u.name,o.storeName=o.storeName||u.storeName}var m=this,y;return o.name?y=new c(function(g){o.storeName?g(dr(o,m._defaultConfig)):g(o.name+"/")}).then(function(g){for(var S=localStorage.length-1;S>=0;S--){var R=localStorage.key(S);R.indexOf(g)===0&&localStorage.removeItem(R)}}):y=c.reject("Invalid arguments"),v(y,p),y}var qn={_driver:"localStorageWrapper",_initStorage:Pn,_support:Dn(),iterate:zn,getItem:Fn,setItem:Yn,removeItem:kn,clear:Cn,length:$n,key:Bn,keys:Un,dropInstance:Vn},Xn=function(p,u){return p===u||typeof p=="number"&&typeof u=="number"&&isNaN(p)&&isNaN(u)},Wn=function(p,u){for(var m=p.length,y=0;y<m;){if(Xn(p[y],u))return!0;y++}return!1},vr=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"},Ue={},pr={},Pe={INDEXEDDB:Be,WEBSQL:In,LOCALSTORAGE:qn},jn=[Pe.INDEXEDDB._driver,Pe.WEBSQL._driver,Pe.LOCALSTORAGE._driver],Qe=["dropInstance"],xt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Qe),Gn={description:"",driver:jn.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Hn(o,p){o[p]=function(){var u=arguments;return o.ready().then(function(){return o[p].apply(o,u)})}}function Et(){for(var o=1;o<arguments.length;o++){var p=arguments[o];if(p)for(var u in p)p.hasOwnProperty(u)&&(vr(p[u])?arguments[0][u]=p[u].slice():arguments[0][u]=p[u])}return arguments[0]}var Qn=function(){function o(p){a(this,o);for(var u in Pe)if(Pe.hasOwnProperty(u)){var m=Pe[u],y=m._driver;this[u]=y,Ue[y]||this.defineDriver(m)}this._defaultConfig=Et({},Gn),this._config=Et({},this._defaultConfig,p),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return o.prototype.config=function(u){if((typeof u=="undefined"?"undefined":s(u))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var m in u){if(m==="storeName"&&(u[m]=u[m].replace(/\W/g,"_")),m==="version"&&typeof u[m]!="number")return new Error("Database version must be a number.");this._config[m]=u[m]}return"driver"in u&&u.driver?this.setDriver(this._config.driver):!0}else return typeof u=="string"?this._config[u]:this._config},o.prototype.defineDriver=function(u,m,y){var g=new c(function(S,R){try{var I=u._driver,D=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!u._driver){R(D);return}for(var L=xt.concat("_initStorage"),$=0,q=L.length;$<q;$++){var j=L[$],G=!Wn(Qe,j);if((G||u[j])&&typeof u[j]!="function"){R(D);return}}var ee=function(){for(var $e=function(Jn){return function(){var ei=new Error("Method "+Jn+" is not implemented by the current driver"),gr=c.reject(ei);return v(gr,arguments[arguments.length-1]),gr}},Mt=0,Kn=Qe.length;Mt<Kn;Mt++){var At=Qe[Mt];u[At]||(u[At]=$e(At))}};ee();var Z=function($e){Ue[I]&&console.info("Redefining LocalForage driver: "+I),Ue[I]=u,pr[I]=$e,S()};"_support"in u?u._support&&typeof u._support=="function"?u._support().then(Z,R):Z(!!u._support):Z(!0)}catch(fe){R(fe)}});return b(g,m,y),g},o.prototype.driver=function(){return this._driver||null},o.prototype.getDriver=function(u,m,y){var g=Ue[u]?c.resolve(Ue[u]):c.reject(new Error("Driver not found."));return b(g,m,y),g},o.prototype.getSerializer=function(u){var m=c.resolve(_t);return b(m,u),m},o.prototype.ready=function(u){var m=this,y=m._driverSet.then(function(){return m._ready===null&&(m._ready=m._initDriver()),m._ready});return b(y,u,u),y},o.prototype.setDriver=function(u,m,y){var g=this;vr(u)||(u=[u]);var S=this._getSupportedDrivers(u);function R(){g._config.driver=g.driver()}function I($){return g._extend($),R(),g._ready=g._initStorage(g._config),g._ready}function D($){return function(){var q=0;function j(){for(;q<$.length;){var G=$[q];return q++,g._dbInfo=null,g._ready=null,g.getDriver(G).then(I).catch(j)}R();var ee=new Error("No available storage method found.");return g._driverSet=c.reject(ee),g._driverSet}return j()}}var L=this._driverSet!==null?this._driverSet.catch(function(){return c.resolve()}):c.resolve();return this._driverSet=L.then(function(){var $=S[0];return g._dbInfo=null,g._ready=null,g.getDriver($).then(function(q){g._driver=q._driver,R(),g._wrapLibraryMethodsWithReady(),g._initDriver=D(S)})}).catch(function(){R();var $=new Error("No available storage method found.");return g._driverSet=c.reject($),g._driverSet}),b(this._driverSet,m,y),this._driverSet},o.prototype.supports=function(u){return!!pr[u]},o.prototype._extend=function(u){Et(this,u)},o.prototype._getSupportedDrivers=function(u){for(var m=[],y=0,g=u.length;y<g;y++){var S=u[y];this.supports(S)&&m.push(S)}return m},o.prototype._wrapLibraryMethodsWithReady=function(){for(var u=0,m=xt.length;u<m;u++)Hn(this,xt[u])},o.prototype.createInstance=function(u){return new o(u)},o}(),Zn=new Qn;n.exports=Zn},{"3":3}]},{},[4])(4)})})(rn);var J1=rn.exports;const nn=Symbol("Comlink.proxy"),ka=Symbol("Comlink.endpoint"),Ya=Symbol("Comlink.releaseProxy"),Ht=Symbol("Comlink.thrown"),sn=t=>typeof t=="object"&&t!==null||typeof t=="function",Va={canHandle:t=>sn(t)&&t[nn],serialize(t){const{port1:e,port2:r}=new MessageChannel;return on(t,e),[r,[r]]},deserialize(t){return t.start(),Wa(t)}},qa={canHandle:t=>sn(t)&&Ht in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},an=new Map([["proxy",Va],["throw",qa]]);function on(t,e=self){e.addEventListener("message",function r(n){if(!n||!n.data)return;const{id:i,type:s,path:a}=Object.assign({path:[]},n.data),h=(n.data.argumentList||[]).map(Oe);let f;try{const l=a.slice(0,-1).reduce((c,v)=>c[v],t),d=a.reduce((c,v)=>c[v],t);switch(s){case"GET":f=d;break;case"SET":l[a.slice(-1)[0]]=Oe(n.data.value),f=!0;break;case"APPLY":f=d.apply(l,h);break;case"CONSTRUCT":{const c=new d(...h);f=Ha(c)}break;case"ENDPOINT":{const{port1:c,port2:v}=new MessageChannel;on(t,v),f=Ga(c,[c])}break;case"RELEASE":f=void 0;break;default:return}}catch(l){f={value:l,[Ht]:0}}Promise.resolve(f).catch(l=>({value:l,[Ht]:0})).then(l=>{const[d,c]=Zt(l);e.postMessage(Object.assign(Object.assign({},d),{id:i}),c),s==="RELEASE"&&(e.removeEventListener("message",r),hn(e))})}),e.start&&e.start()}function Xa(t){return t.constructor.name==="MessagePort"}function hn(t){Xa(t)&&t.close()}function Wa(t,e){return Qt(t,[],e)}function dt(t){if(t)throw new Error("Proxy has been released and is not useable")}function Qt(t,e=[],r=function(){}){let n=!1;const i=new Proxy(r,{get(s,a){if(dt(n),a===Ya)return()=>Fe(t,{type:"RELEASE",path:e.map(h=>h.toString())}).then(()=>{hn(t),n=!0});if(a==="then"){if(e.length===0)return{then:()=>i};const h=Fe(t,{type:"GET",path:e.map(f=>f.toString())}).then(Oe);return h.then.bind(h)}return Qt(t,[...e,a])},set(s,a,h){dt(n);const[f,l]=Zt(h);return Fe(t,{type:"SET",path:[...e,a].map(d=>d.toString()),value:f},l).then(Oe)},apply(s,a,h){dt(n);const f=e[e.length-1];if(f===ka)return Fe(t,{type:"ENDPOINT"}).then(Oe);if(f==="bind")return Qt(t,e.slice(0,-1));const[l,d]=fn(h);return Fe(t,{type:"APPLY",path:e.map(c=>c.toString()),argumentList:l},d).then(Oe)},construct(s,a){dt(n);const[h,f]=fn(a);return Fe(t,{type:"CONSTRUCT",path:e.map(l=>l.toString()),argumentList:h},f).then(Oe)}});return i}function ja(t){return Array.prototype.concat.apply([],t)}function fn(t){const e=t.map(Zt);return[e.map(r=>r[0]),ja(e.map(r=>r[1]))]}const ln=new WeakMap;function Ga(t,e){return ln.set(t,e),t}function Ha(t){return Object.assign(t,{[nn]:!0})}function Zt(t){for(const[e,r]of an)if(r.canHandle(t)){const[n,i]=r.serialize(t);return[{type:"HANDLER",name:e,value:n},i]}return[{type:"RAW",value:t},ln.get(t)||[]]}function Oe(t){switch(t.type){case"HANDLER":return an.get(t.name).deserialize(t.value);case"RAW":return t.value}}function Fe(t,e,r){return new Promise(n=>{const i=Qa();t.addEventListener("message",function s(a){!a.data||!a.data.id||a.data.id!==i||(t.removeEventListener("message",s),n(a.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:i},e),r)})}function Qa(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var un=function(){if(typeof Map!="undefined")return Map;function t(e,r){var n=-1;return e.some(function(i,s){return i[0]===r?(n=s,!0):!1}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(r){var n=t(this.__entries__,r),i=this.__entries__[n];return i&&i[1]},e.prototype.set=function(r,n){var i=t(this.__entries__,r);~i?this.__entries__[i][1]=n:this.__entries__.push([r,n])},e.prototype.delete=function(r){var n=this.__entries__,i=t(n,r);~i&&n.splice(i,1)},e.prototype.has=function(r){return!!~t(this.__entries__,r)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var i=0,s=this.__entries__;i<s.length;i++){var a=s[i];r.call(n,a[1],a[0])}},e}()}(),Kt=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,vt=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),Za=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(vt):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),Ka=2;function Ja(t,e){var r=!1,n=!1,i=0;function s(){r&&(r=!1,t()),n&&h()}function a(){Za(s)}function h(){var f=Date.now();if(r){if(f-i<Ka)return;n=!0}else r=!0,n=!1,setTimeout(a,e);i=f}return h}var e1=20,t1=["top","right","bottom","left","width","height","size","weight"],r1=typeof MutationObserver!="undefined",n1=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Ja(this.refresh.bind(this),e1)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var r=this.observers_,n=r.indexOf(e);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return e.forEach(function(r){return r.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!Kt||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),r1?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!Kt||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var r=e.propertyName,n=r===void 0?"":r,i=t1.some(function(s){return!!~n.indexOf(s)});i&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),cn=function(t,e){for(var r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},ze=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||vt},dn=gt(0,0,0,0);function pt(t){return parseFloat(t)||0}function vn(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.reduce(function(n,i){var s=t["border-"+i+"-width"];return n+pt(s)},0)}function i1(t){for(var e=["top","right","bottom","left"],r={},n=0,i=e;n<i.length;n++){var s=i[n],a=t["padding-"+s];r[s]=pt(a)}return r}function s1(t){var e=t.getBBox();return gt(0,0,e.width,e.height)}function a1(t){var e=t.clientWidth,r=t.clientHeight;if(!e&&!r)return dn;var n=ze(t).getComputedStyle(t),i=i1(n),s=i.left+i.right,a=i.top+i.bottom,h=pt(n.width),f=pt(n.height);if(n.boxSizing==="border-box"&&(Math.round(h+s)!==e&&(h-=vn(n,"left","right")+s),Math.round(f+a)!==r&&(f-=vn(n,"top","bottom")+a)),!h1(t)){var l=Math.round(h+s)-e,d=Math.round(f+a)-r;Math.abs(l)!==1&&(h-=l),Math.abs(d)!==1&&(f-=d)}return gt(i.left,i.top,h,f)}var o1=function(){return typeof SVGGraphicsElement!="undefined"?function(t){return t instanceof ze(t).SVGGraphicsElement}:function(t){return t instanceof ze(t).SVGElement&&typeof t.getBBox=="function"}}();function h1(t){return t===ze(t).document.documentElement}function f1(t){return Kt?o1(t)?s1(t):a1(t):dn}function l1(t){var e=t.x,r=t.y,n=t.width,i=t.height,s=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,a=Object.create(s.prototype);return cn(a,{x:e,y:r,width:n,height:i,top:r,right:e+n,bottom:i+r,left:e}),a}function gt(t,e,r,n){return{x:t,y:e,width:r,height:n}}var u1=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=gt(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=f1(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),c1=function(){function t(e,r){var n=l1(r);cn(this,{target:e,contentRect:n})}return t}(),d1=function(){function t(e,r,n){if(this.activeObservations_=[],this.observations_=new un,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=r,this.callbackCtx_=n}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(e instanceof ze(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(e)||(r.set(e,new u1(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(e instanceof ze(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;!r.has(e)||(r.delete(e),r.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&e.activeObservations_.push(r)})},t.prototype.broadcastActive=function(){if(!!this.hasActive()){var e=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new c1(n.target,n.broadcastRect())});this.callback_.call(e,r,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),pn=typeof WeakMap!="undefined"?new WeakMap:new un,gn=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=n1.getInstance(),n=new d1(e,r,this);pn.set(this,n)}return t}();["observe","unobserve","disconnect"].forEach(function(t){gn.prototype[t]=function(){var e;return(e=pn.get(this))[t].apply(e,arguments)}});(function(){return typeof vt.ResizeObserver!="undefined"?vt.ResizeObserver:gn})();export{pi as $,j1 as A,G1 as B,Q1 as C,H1 as D,q1 as E,X1 as F,K1 as G,Z1 as H,W1 as I,Ra as J,zr as K,Wa as L,B1 as M,$1 as N,Y1 as O,F1 as P,U1 as Q,z1 as R,L1 as S,Xr as T,k1 as U,Q as V,J1 as W,D1 as X,vi as Y,Er as Z,di as _,ni as a,I1 as a0,w1 as b,b1 as c,E1 as d,y1 as e,g1 as f,p1 as g,si as h,N1 as i,O1 as j,T1 as k,x1 as l,m1 as m,ke as n,V1 as o,Ot as p,S1 as q,Ye as r,C1 as s,br as t,M1 as u,_r as v,P1 as w,_1 as x,A1 as y,R1 as z};
//# sourceMappingURL=vendor.5fc20639.js.map
