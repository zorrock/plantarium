function ut(){}const Lr=e=>e;function Oi(e,t){for(const r in t)e[r]=t[r];return e}function Ii(e){return e&&typeof e=="object"&&typeof e.then=="function"}function Cr(e){return e()}function Pr(){return Object.create(null)}function Ft(e){e.forEach(Cr)}function Fr(e){return typeof e=="function"}function Pe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Di(e){return Object.keys(e).length===0}function Ni(e,...t){if(e==null)return ut;const r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}function d1(e,t,r){e.$$.on_destroy.push(Ni(t,r))}function Li(e,t,r,n){if(e){const i=zr(e,t,r,n);return e[0](i)}}function zr(e,t,r,n){return e[1]&&n?Oi(r.ctx.slice(),e[1](n(t))):r.ctx}function Ci(e,t,r,n){if(e[2]&&n){const i=e[2](n(r));if(t.dirty===void 0)return i;if(typeof i=="object"){const s=[],a=Math.max(t.dirty.length,i.length);for(let o=0;o<a;o+=1)s[o]=t.dirty[o]|i[o];return s}return t.dirty|i}return t.dirty}function Pi(e,t,r,n,i,s){if(i){const a=zr(t,r,n,s);e.p(a,i)}}function Fi(e){if(e.ctx.length>32){const t=[],r=e.ctx.length/32;for(let n=0;n<r;n++)t[n]=-1;return t}return-1}function p1(e,t,r){return e.set(r),t}const Br=typeof window!="undefined";let zi=Br?()=>window.performance.now():()=>Date.now(),Fe=Br?e=>requestAnimationFrame(e):ut;const zt=new Set;function $r(e){zt.forEach(t=>{t.c(e)||(zt.delete(t),t.f())}),zt.size!==0&&Fe($r)}function Bi(e){let t;return zt.size===0&&Fe($r),{promise:new Promise(r=>{zt.add(t={c:e,f:r})}),abort(){zt.delete(t)}}}function $i(e,t){e.appendChild(t)}function Ur(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Ui(e){const t=te("style");return ki(Ur(e),t),t}function ki(e,t){$i(e.head||e,t)}function Jt(e,t,r){e.insertBefore(t,r||null)}function qt(e){e.parentNode.removeChild(e)}function v1(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function te(e){return document.createElement(e)}function g1(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function kr(e){return document.createTextNode(e)}function Yi(){return kr(" ")}function m1(){return kr("")}function Vi(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function y1(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function qi(e,t,r){r==null?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function b1(e,t,r){t in e?e[t]=typeof e[t]=="boolean"&&r===""?!0:r:qi(e,t,r)}function _1(e){return e===""?null:+e}function Xi(e){return Array.from(e.childNodes)}function w1(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function x1(e,t){e.value=t==null?"":t}function ji(e,t,r,n){e.style.setProperty(t,r,n?"important":"")}function E1(e,t,r){e.classList[r?"add":"remove"](t)}function Yr(e,t,r=!1){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,r,!1,t),n}class M1{constructor(){this.e=this.n=null}c(t){this.h(t)}m(t,r,n=null){this.e||(this.e=te(r.nodeName),this.t=r,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let r=0;r<this.n.length;r+=1)Jt(this.t,this.n[r],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(qt)}}const ze=new Set;let ee=0;function Wi(e){let t=5381,r=e.length;for(;r--;)t=(t<<5)-t^e.charCodeAt(r);return t>>>0}function Vr(e,t,r,n,i,s,a,o=0){const h=16.666/n;let l=`{
`;for(let w=0;w<=1;w+=h){const A=t+(r-t)*s(w);l+=w*100+`%{${a(A,1-A)}}
`}const p=l+`100% {${a(r,1-r)}}
}`,c=`__svelte_${Wi(p)}_${o}`,d=Ur(e);ze.add(d);const g=d.__svelte_stylesheet||(d.__svelte_stylesheet=Ui(e).sheet),_=d.__svelte_rules||(d.__svelte_rules={});_[c]||(_[c]=!0,g.insertRule(`@keyframes ${c} ${p}`,g.cssRules.length));const x=e.style.animation||"";return e.style.animation=`${x?`${x}, `:""}${c} ${n}ms linear ${i}ms 1 both`,ee+=1,c}function Gi(e,t){const r=(e.style.animation||"").split(", "),n=r.filter(t?s=>s.indexOf(t)<0:s=>s.indexOf("__svelte")===-1),i=r.length-n.length;i&&(e.style.animation=n.join(", "),ee-=i,ee||Hi())}function Hi(){Fe(()=>{ee||(ze.forEach(e=>{const t=e.__svelte_stylesheet;let r=t.cssRules.length;for(;r--;)t.deleteRule(r);e.__svelte_rules={}}),ze.clear())})}let re;function Et(e){re=e}function ne(){if(!re)throw new Error("Function called outside component initialization");return re}function Qi(e){ne().$$.on_mount.push(e)}function Zi(e){ne().$$.on_destroy.push(e)}function qr(){const e=ne();return(t,r)=>{const n=e.$$.callbacks[t];if(n){const i=Yr(t,r);n.slice().forEach(s=>{s.call(e,i)})}}}const Xt=[],ie=[],se=[],Be=[],Ki=Promise.resolve();let $e=!1;function Ji(){$e||($e=!0,Ki.then(Ye))}function ae(e){se.push(e)}function A1(e){Be.push(e)}let Ue=!1;const ke=new Set;function Ye(){if(!Ue){Ue=!0;do{for(let e=0;e<Xt.length;e+=1){const t=Xt[e];Et(t),ts(t.$$)}for(Et(null),Xt.length=0;ie.length;)ie.pop()();for(let e=0;e<se.length;e+=1){const t=se[e];ke.has(t)||(ke.add(t),t())}se.length=0}while(Xt.length);for(;Be.length;)Be.pop()();$e=!1,Ue=!1,ke.clear()}}function ts(e){if(e.fragment!==null){e.update(),Ft(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ae)}}let jt;function es(){return jt||(jt=Promise.resolve(),jt.then(()=>{jt=null})),jt}function Ve(e,t,r){e.dispatchEvent(Yr(`${t?"intro":"outro"}${r}`))}const oe=new Set;let bt;function rs(){bt={r:0,c:[],p:bt}}function ns(){bt.r||Ft(bt.c),bt=bt.p}function he(e,t){e&&e.i&&(oe.delete(e),e.i(t))}function qe(e,t,r,n){if(e&&e.o){if(oe.has(e))return;oe.add(e),bt.c.push(()=>{oe.delete(e),n&&(r&&e.d(1),n())}),e.o(t)}}const is={duration:0};function S1(e,t,r,n){let i=t(e,r),s=n?0:1,a=null,o=null,h=null;function l(){h&&Gi(e,h)}function p(d,g){const _=d.b-s;return g*=Math.abs(_),{a:s,b:d.b,d:_,duration:g,start:d.start,end:d.start+g,group:d.group}}function c(d){const{delay:g=0,duration:_=300,easing:x=Lr,tick:w=ut,css:A}=i||is,T={start:zi()+g,b:d};d||(T.group=bt,bt.r+=1),a||o?o=T:(A&&(l(),h=Vr(e,s,d,_,g,x,A)),d&&w(0,1),a=p(T,_),ae(()=>Ve(e,d,"start")),Bi(I=>{if(o&&I>o.start&&(a=p(o,_),o=null,Ve(e,a.b,"start"),A&&(l(),h=Vr(e,s,a.b,a.duration,0,x,i.css))),a){if(I>=a.end)w(s=a.b,1-s),Ve(e,a.b,"end"),o||(a.b?l():--a.group.r||Ft(a.group.c)),a=null;else if(I>=a.start){const L=I-a.start;s=a.a+a.d*x(L/a.duration),w(s,1-s)}}return!!(a||o)}))}return{run(d){Fr(i)?es().then(()=>{i=i(),c(d)}):c(d)},end(){l(),a=o=null}}}function R1(e,t){const r=t.token={};function n(i,s,a,o){if(t.token!==r)return;t.resolved=o;let h=t.ctx;a!==void 0&&(h=h.slice(),h[a]=o);const l=i&&(t.current=i)(h);let p=!1;t.block&&(t.blocks?t.blocks.forEach((c,d)=>{d!==s&&c&&(rs(),qe(c,1,1,()=>{t.blocks[d]===c&&(t.blocks[d]=null)}),ns())}):t.block.d(1),l.c(),he(l,1),l.m(t.mount(),t.anchor),p=!0),t.block=l,t.blocks&&(t.blocks[s]=l),p&&Ye()}if(Ii(e)){const i=ne();if(e.then(s=>{Et(i),n(t.then,1,t.value,s),Et(null)},s=>{if(Et(i),n(t.catch,2,t.error,s),Et(null),!t.hasCatch)throw s}),t.current!==t.pending)return n(t.pending,0),!0}else{if(t.current!==t.then)return n(t.then,1,t.value,e),!0;t.resolved=e}}function T1(e,t){qe(e,1,1,()=>{t.delete(e.key)})}function O1(e,t,r,n,i,s,a,o,h,l,p,c){let d=e.length,g=s.length,_=d;const x={};for(;_--;)x[e[_].key]=_;const w=[],A=new Map,T=new Map;for(_=g;_--;){const M=c(i,s,_),R=r(M);let P=a.get(R);P?n&&P.p(M,t):(P=l(R,M),P.c()),A.set(R,w[_]=P),R in x&&T.set(R,Math.abs(_-x[R]))}const I=new Set,L=new Set;function E(M){he(M,1),M.m(o,p),a.set(M.key,M),p=M.first,g--}for(;d&&g;){const M=w[g-1],R=e[d-1],P=M.key,F=R.key;M===R?(p=M.first,d--,g--):A.has(F)?!a.has(P)||I.has(P)?E(M):L.has(F)?d--:T.get(P)>T.get(F)?(L.add(P),E(M)):(I.add(F),d--):(h(R,a),d--)}for(;d--;){const M=e[d];A.has(M.key)||h(M,a)}for(;g;)E(w[g-1]);return w}function I1(e,t){const r={},n={},i={$$scope:1};let s=e.length;for(;s--;){const a=e[s],o=t[s];if(o){for(const h in a)h in o||(n[h]=1);for(const h in o)i[h]||(r[h]=o[h],i[h]=1);e[s]=o}else for(const h in a)i[h]=1}for(const a in n)a in r||(r[a]=void 0);return r}function D1(e){return typeof e=="object"&&e!==null?e:{}}function N1(e,t,r){const n=e.$$.props[t];n!==void 0&&(e.$$.bound[n]=r,r(e.$$.ctx[n]))}function L1(e){e&&e.c()}function ss(e,t,r,n){const{fragment:i,on_mount:s,on_destroy:a,after_update:o}=e.$$;i&&i.m(t,r),n||ae(()=>{const h=s.map(Cr).filter(Fr);a?a.push(...h):Ft(h),e.$$.on_mount=[]}),o.forEach(ae)}function as(e,t){const r=e.$$;r.fragment!==null&&(Ft(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function os(e,t){e.$$.dirty[0]===-1&&(Xt.push(e),Ji(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Xr(e,t,r,n,i,s,a,o=[-1]){const h=re;Et(e);const l=e.$$={fragment:null,ctx:null,props:s,update:ut,not_equal:i,bound:Pr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(h?h.$$.context:[])),callbacks:Pr(),dirty:o,skip_bound:!1,root:t.target||h.$$.root};a&&a(l.root);let p=!1;if(l.ctx=r?r(e,t.props||{},(c,d,...g)=>{const _=g.length?g[0]:d;return l.ctx&&i(l.ctx[c],l.ctx[c]=_)&&(!l.skip_bound&&l.bound[c]&&l.bound[c](_),p&&os(e,c)),d}):[],l.update(),p=!0,Ft(l.before_update),l.fragment=n?n(l.ctx):!1,t.target){if(t.hydrate){const c=Xi(t.target);l.fragment&&l.fragment.l(c),c.forEach(qt)}else l.fragment&&l.fragment.c();t.intro&&he(e.$$.fragment),ss(e,t.target,t.anchor,t.customElement),Ye()}Et(h)}class Xe{$destroy(){as(this,1),this.$destroy=ut}$on(t,r){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(r),()=>{const i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!Di(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}class C1 extends Xe{constructor(t){if(!t||!t.target&&!t.$$inline)throw new Error("'target' is a required option");super()}$destroy(){super.$destroy(),this.$destroy=()=>{console.warn("Component was already destroyed")}}$capture_state(){}$inject_state(){}}const Bt=[];function P1(e,t=ut){let r;const n=new Set;function i(o){if(Pe(e,o)&&(e=o,r)){const h=!Bt.length;for(const l of n)l[1](),Bt.push(l,e);if(h){for(let l=0;l<Bt.length;l+=2)Bt[l][0](Bt[l+1]);Bt.length=0}}}function s(o){i(o(e))}function a(o,h=ut){const l=[o,h];return n.add(l),n.size===1&&(r=t(i)||ut),o(e),()=>{n.delete(l),n.size===0&&(r(),r=null)}}return{set:i,update:s,subscribe:a}}function F1(e){return jr("",typeof e=="string"?JSON.parse(e):e)}function jr(e,t){var r="";return Object.entries(t).forEach(function(n){var i=n[0],s=n[1];r+=typeof s=="object"?jr(""+Wr(e,i),s):"--"+Wr(e,i)+": "+s+";"}),r}function Wr(e,t){return e?t==="__default"?e:e+"-"+t:t}function z1(e){const t=1.70158*1.525;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)}function Gr(e){const t=e-1;return t*t*t+1}function B1(e,{delay:t=0,duration:r=400,easing:n=Lr}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:n,css:s=>`opacity: ${s*i}`}}function $1(e,{delay:t=0,duration:r=400,easing:n=Gr}={}){const i=getComputedStyle(e),s=+i.opacity,a=parseFloat(i.height),o=parseFloat(i.paddingTop),h=parseFloat(i.paddingBottom),l=parseFloat(i.marginTop),p=parseFloat(i.marginBottom),c=parseFloat(i.borderTopWidth),d=parseFloat(i.borderBottomWidth);return{delay:t,duration:r,easing:n,css:g=>`overflow: hidden;opacity: ${Math.min(g*20,1)*s};height: ${g*a}px;padding-top: ${g*o}px;padding-bottom: ${g*h}px;margin-top: ${g*l}px;margin-bottom: ${g*p}px;border-top-width: ${g*c}px;border-bottom-width: ${g*d}px;`}}function U1(e,{delay:t=0,duration:r=400,easing:n=Gr,start:i=0,opacity:s=0}={}){const a=getComputedStyle(e),o=+a.opacity,h=a.transform==="none"?"":a.transform,l=1-i,p=o*(1-s);return{delay:t,duration:r,easing:n,css:(c,d)=>`
			transform: ${h} scale(${1-l*d});
			opacity: ${o-p*d}
		`}}var _t=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function fe(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Hr={exports:{}},le=1;function hs(){return le=(le*9301+49297)%233280,le/233280}function fs(e){le=e}var ls={nextValue:hs,seed:fs},je=ls,Tt="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-",Mt,Qr,Wt;function We(){Wt=!1}function Zr(e){if(!e){Mt!==Tt&&(Mt=Tt,We());return}if(e!==Mt){if(e.length!==Tt.length)throw new Error("Custom alphabet for shortid must be "+Tt.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter(function(r,n,i){return n!==i.lastIndexOf(r)});if(t.length)throw new Error("Custom alphabet for shortid must be "+Tt.length+" unique characters. These characters were not unique: "+t.join(", "));Mt=e,We()}}function cs(e){return Zr(e),Mt}function us(e){je.seed(e),Qr!==e&&(We(),Qr=e)}function ds(){Mt||Zr(Tt);for(var e=Mt.split(""),t=[],r=je.nextValue(),n;e.length>0;)r=je.nextValue(),n=Math.floor(r*e.length),t.push(e.splice(n,1)[0]);return t.join("")}function Kr(){return Wt||(Wt=ds(),Wt)}function ps(e){var t=Kr();return t[e]}function vs(){return Mt||Tt}var Ge={get:vs,characters:cs,seed:us,lookup:ps,shuffled:Kr},He=typeof window=="object"&&(window.crypto||window.msCrypto),Qe;!He||!He.getRandomValues?Qe=function(e){for(var t=[],r=0;r<e;r++)t.push(Math.floor(Math.random()*256));return t}:Qe=function(e){return He.getRandomValues(new Uint8Array(e))};var gs=Qe,ms=function(e,t,r){for(var n=(2<<Math.log(t.length-1)/Math.LN2)-1,i=-~(1.6*n*r/t.length),s="";;)for(var a=e(i),o=i;o--;)if(s+=t[a[o]&n]||"",s.length===+r)return s},ys=Ge,bs=gs,_s=ms;function ws(e){for(var t=0,r,n="";!r;)n=n+_s(bs,ys.get(),1),r=e<Math.pow(16,t+1),t++;return n}var xs=ws,ce=xs,Es=1567752802062,Ms=7,ue,Jr;function As(e){var t="",r=Math.floor((Date.now()-Es)*.001);return r===Jr?ue++:(ue=0,Jr=r),t=t+ce(Ms),t=t+ce(e),ue>0&&(t=t+ce(ue)),t=t+ce(r),t}var Ss=As,Rs=Ge;function Ts(e){if(!e||typeof e!="string"||e.length<6)return!1;var t=new RegExp("[^"+Rs.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]");return!t.test(e)}var Os=Ts;(function(e){var t=Ge,r=Ss,n=Os,i=0;function s(l){return t.seed(l),e.exports}function a(l){return i=l,e.exports}function o(l){return l!==void 0&&t.characters(l),t.shuffled()}function h(){return r(i)}e.exports=h,e.exports.generate=h,e.exports.seed=s,e.exports.worker=a,e.exports.characters=o,e.exports.isValid=n})(Hr);var k1=Hr.exports,Is={exports:{}};(function(e,t){(function(r,n){n()})(_t,function(){function r(l,p){return typeof p=="undefined"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}function n(l,p,c){var d=new XMLHttpRequest;d.open("GET",l),d.responseType="blob",d.onload=function(){h(d.response,p,c)},d.onerror=function(){console.error("could not download file")},d.send()}function i(l){var p=new XMLHttpRequest;p.open("HEAD",l,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function s(l){try{l.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),l.dispatchEvent(p)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof _t=="object"&&_t.global===_t?_t:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),h=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(l,p,c){var d=a.URL||a.webkitURL,g=document.createElement("a");p=p||l.name||"download",g.download=p,g.rel="noopener",typeof l=="string"?(g.href=l,g.origin===location.origin?s(g):i(g.href)?n(l,p,c):s(g,g.target="_blank")):(g.href=d.createObjectURL(l),setTimeout(function(){d.revokeObjectURL(g.href)},4e4),setTimeout(function(){s(g)},0))}:"msSaveOrOpenBlob"in navigator?function(l,p,c){if(p=p||l.name||"download",typeof l!="string")navigator.msSaveOrOpenBlob(r(l,c),p);else if(i(l))n(l,p,c);else{var d=document.createElement("a");d.href=l,d.target="_blank",setTimeout(function(){s(d)})}}:function(l,p,c,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),typeof l=="string")return n(l,p,c);var g=l.type==="application/octet-stream",_=/constructor/i.test(a.HTMLElement)||a.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||g&&_||o)&&typeof FileReader!="undefined"){var w=new FileReader;w.onloadend=function(){var I=w.result;I=x?I:I.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=I:location=I,d=null},w.readAsDataURL(l)}else{var A=a.URL||a.webkitURL,T=A.createObjectURL(l);d?d.location=T:location.href=T,d=null,setTimeout(function(){A.revokeObjectURL(T)},4e4)}});a.saveAs=h.saveAs=h,e.exports=h})})(Is);function tn(e){let t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)}function Ze(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ds(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e}function en(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function rn(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function Ns(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function Ls(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function Ke(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function Cs(e,t){let r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+n*n+i*i)}function Ps(e,t){let r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return r*r+n*n+i*i}function nn(e){let t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function Fs(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function zs(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function Je(e,t){let r=t[0],n=t[1],i=t[2],s=r*r+n*n+i*i;return s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e}function sn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function an(e,t,r){let n=t[0],i=t[1],s=t[2],a=r[0],o=r[1],h=r[2];return e[0]=i*h-s*o,e[1]=s*a-n*h,e[2]=n*o-i*a,e}function Bs(e,t,r,n){let i=t[0],s=t[1],a=t[2];return e[0]=i+n*(r[0]-i),e[1]=s+n*(r[1]-s),e[2]=a+n*(r[2]-a),e}function $s(e,t,r){let n=t[0],i=t[1],s=t[2],a=r[3]*n+r[7]*i+r[11]*s+r[15];return a=a||1,e[0]=(r[0]*n+r[4]*i+r[8]*s+r[12])/a,e[1]=(r[1]*n+r[5]*i+r[9]*s+r[13])/a,e[2]=(r[2]*n+r[6]*i+r[10]*s+r[14])/a,e}function Us(e,t,r){let n=t[0],i=t[1],s=t[2],a=r[3]*n+r[7]*i+r[11]*s+r[15];return a=a||1,e[0]=(r[0]*n+r[4]*i+r[8]*s)/a,e[1]=(r[1]*n+r[5]*i+r[9]*s)/a,e[2]=(r[2]*n+r[6]*i+r[10]*s)/a,e}function ks(e,t,r){let n=t[0],i=t[1],s=t[2],a=r[0],o=r[1],h=r[2],l=r[3],p=o*s-h*i,c=h*n-a*s,d=a*i-o*n,g=o*d-h*c,_=h*p-a*d,x=a*c-o*p,w=l*2;return p*=w,c*=w,d*=w,g*=2,_*=2,x*=2,e[0]=n+p+g,e[1]=i+c+_,e[2]=s+d+x,e}const Ys=function(){const e=[0,0,0],t=[0,0,0];return function(r,n){Ze(e,r),Ze(t,n),Je(e,e),Je(t,t);let i=sn(e,t);return i>1?0:i<-1?Math.PI:Math.acos(i)}}();function Vs(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}class Q extends Array{constructor(t=0,r=t,n=t){super(t,r,n);return this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(t){this[0]=t}set y(t){this[1]=t}set z(t){this[2]=t}set(t,r=t,n=t){return t.length?this.copy(t):(Ds(this,t,r,n),this)}copy(t){return Ze(this,t),this}add(t,r){return r?en(this,t,r):en(this,this,t),this}sub(t,r){return r?rn(this,t,r):rn(this,this,t),this}multiply(t){return t.length?Ns(this,this,t):Ke(this,this,t),this}divide(t){return t.length?Ls(this,this,t):Ke(this,this,1/t),this}inverse(t=this){return zs(this,t),this}len(){return tn(this)}distance(t){return t?Cs(this,t):tn(this)}squaredLen(){return nn(this)}squaredDistance(t){return t?Ps(this,t):nn(this)}negate(t=this){return Fs(this,t),this}cross(t,r){return r?an(this,t,r):an(this,this,t),this}scale(t){return Ke(this,this,t),this}normalize(){return Je(this,this),this}dot(t){return sn(this,t)}equals(t){return Vs(this,t)}applyMatrix4(t){return $s(this,this,t),this}scaleRotateMatrix4(t){return Us(this,this,t),this}applyQuaternion(t){return ks(this,this,t),this}angle(t){return Ys(this,t)}lerp(t,r){return Bs(this,this,t,r),this}clone(){return new Q(this[0],this[1],this[2])}fromArray(t,r=0){return this[0]=t[r],this[1]=t[r+1],this[2]=t[r+2],this}toArray(t=[],r=0){return t[r]=this[0],t[r+1]=this[1],t[r+2]=this[2],t}transformDirection(t){const r=this[0],n=this[1],i=this[2];return this[0]=t[0]*r+t[4]*n+t[8]*i,this[1]=t[1]*r+t[5]*n+t[9]*i,this[2]=t[2]*r+t[6]*n+t[10]*i,this.normalize()}}const on=new Q;let qs=1,Xs=1,hn=!1;class fn{constructor(t,r={}){t.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=t,this.attributes=r,this.id=qs++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let n in r)this.addAttribute(n,r[n])}addAttribute(t,r){if(this.attributes[t]=r,r.id=Xs++,r.size=r.size||1,r.type=r.type||(r.data.constructor===Float32Array?this.gl.FLOAT:r.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),r.target=t==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,r.normalized=r.normalized||!1,r.stride=r.stride||0,r.offset=r.offset||0,r.count=r.count||(r.stride?r.data.byteLength/r.stride:r.data.length/r.size),r.divisor=r.instanced||0,r.needsUpdate=!1,r.buffer||(r.buffer=this.gl.createBuffer(),this.updateAttribute(r)),r.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==r.count*r.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,r.count*r.divisor);this.instancedCount=r.count*r.divisor}else t==="index"?this.drawRange.count=r.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,r.count))}updateAttribute(t){this.glState.boundBuffer!==t.buffer&&(this.gl.bindBuffer(t.target,t.buffer),this.glState.boundBuffer=t.buffer),this.gl.bufferData(t.target,t.data,this.gl.STATIC_DRAW),t.needsUpdate=!1}setIndex(t){this.addAttribute("index",t)}setDrawRange(t,r){this.drawRange.start=t,this.drawRange.count=r}setInstancedCount(t){this.instancedCount=t}createVAO(t){this.VAOs[t.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.bindAttributes(t)}bindAttributes(t){t.attributeLocations.forEach((r,{name:n,type:i})=>{if(!this.attributes[n]){console.warn(`active attribute ${n} not being supplied`);return}const s=this.attributes[n];this.gl.bindBuffer(s.target,s.buffer),this.glState.boundBuffer=s.buffer;let a=1;i===35674&&(a=2),i===35675&&(a=3),i===35676&&(a=4);const o=s.size/a,h=a===1?0:a*a*a,l=a===1?0:a*a;for(let p=0;p<a;p++)this.gl.vertexAttribPointer(r+p,o,s.type,s.normalized,s.stride+h,s.offset+p*l),this.gl.enableVertexAttribArray(r+p),this.gl.renderer.vertexAttribDivisor(r+p,s.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:t,mode:r=this.gl.TRIANGLES}){this.gl.renderer.currentGeometry!==`${this.id}_${t.attributeOrder}`&&(this.VAOs[t.attributeOrder]||this.createVAO(t),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${t.attributeOrder}`),t.attributeLocations.forEach((n,{name:i})=>{const s=this.attributes[i];s.needsUpdate&&this.updateAttribute(s)}),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(r,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*2,this.instancedCount):this.gl.renderer.drawArraysInstanced(r,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(r,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*2):this.gl.drawArrays(r,this.drawRange.start,this.drawRange.count)}getPosition(){const t=this.attributes.position;if(t.data)return t;if(!hn)return console.warn("No position buffer data found to compute bounds"),hn=!0}computeBoundingBox(t){t||(t=this.getPosition());const r=t.data,n=t.offset||0,i=t.stride||t.size;this.bounds||(this.bounds={min:new Q,max:new Q,center:new Q,scale:new Q,radius:1/0});const s=this.bounds.min,a=this.bounds.max,o=this.bounds.center,h=this.bounds.scale;s.set(1/0),a.set(-1/0);for(let l=n,p=r.length;l<p;l+=i){const c=r[l],d=r[l+1],g=r[l+2];s.x=Math.min(c,s.x),s.y=Math.min(d,s.y),s.z=Math.min(g,s.z),a.x=Math.max(c,a.x),a.y=Math.max(d,a.y),a.z=Math.max(g,a.z)}h.sub(a,s),o.add(s,a).divide(2)}computeBoundingSphere(t){t||(t=this.getPosition());const r=t.data,n=t.offset||0,i=t.stride||t.size;this.bounds||this.computeBoundingBox(t);let s=0;for(let a=n,o=r.length;a<o;a+=i)on.fromArray(r,a),s=Math.max(s,this.bounds.center.squaredDistance(on));this.bounds.radius=Math.sqrt(s)}remove(){for(let t in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[t]),delete this.VAOs[t];for(let t in this.attributes)this.gl.deleteBuffer(this.attributes[t].buffer),delete this.attributes[t]}}let js=1;const ln={};class Y1{constructor(t,{vertex:r,fragment:n,uniforms:i={},transparent:s=!1,cullFace:a=t.BACK,frontFace:o=t.CCW,depthTest:h=!0,depthWrite:l=!0,depthFunc:p=t.LESS}={}){t.canvas||console.error("gl not passed as fist argument to Program"),this.gl=t,this.uniforms=i,this.id=js++,r||console.warn("vertex shader not supplied"),n||console.warn("fragment shader not supplied"),this.transparent=s,this.cullFace=a,this.frontFace=o,this.depthTest=h,this.depthWrite=l,this.depthFunc=p,this.blendFunc={},this.blendEquation={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA));const c=t.createShader(t.VERTEX_SHADER);t.shaderSource(c,r),t.compileShader(c),t.getShaderInfoLog(c)!==""&&console.warn(`${t.getShaderInfoLog(c)}
Vertex Shader
${cn(r)}`);const d=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(d,n),t.compileShader(d),t.getShaderInfoLog(d)!==""&&console.warn(`${t.getShaderInfoLog(d)}
Fragment Shader
${cn(n)}`),this.program=t.createProgram(),t.attachShader(this.program,c),t.attachShader(this.program,d),t.linkProgram(this.program),!t.getProgramParameter(this.program,t.LINK_STATUS))return console.warn(t.getProgramInfoLog(this.program));t.deleteShader(c),t.deleteShader(d),this.uniformLocations=new Map;let g=t.getProgramParameter(this.program,t.ACTIVE_UNIFORMS);for(let w=0;w<g;w++){let A=t.getActiveUniform(this.program,w);this.uniformLocations.set(A,t.getUniformLocation(this.program,A.name));const T=A.name.match(/(\w+)/g);A.uniformName=T[0],T.length===3?(A.isStructArray=!0,A.structIndex=Number(T[1]),A.structProperty=T[2]):T.length===2&&isNaN(Number(T[1]))&&(A.isStruct=!0,A.structProperty=T[1])}this.attributeLocations=new Map;const _=[],x=t.getProgramParameter(this.program,t.ACTIVE_ATTRIBUTES);for(let w=0;w<x;w++){const A=t.getActiveAttrib(this.program,w),T=t.getAttribLocation(this.program,A.name);_[T]=A.name,this.attributeLocations.set(A,T)}this.attributeOrder=_.join("")}setBlendFunc(t,r,n,i){this.blendFunc.src=t,this.blendFunc.dst=r,this.blendFunc.srcAlpha=n,this.blendFunc.dstAlpha=i,t&&(this.transparent=!0)}setBlendEquation(t,r){this.blendEquation.modeRGB=t,this.blendEquation.modeAlpha=r}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha)}use({flipFaces:t=!1}={}){let r=-1;this.gl.renderer.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.currentProgram=this.id),this.uniformLocations.forEach((i,s)=>{let a=s.uniformName,o=this.uniforms[a];if(s.isStruct&&(o=o[s.structProperty],a+=`.${s.structProperty}`),s.isStructArray&&(o=o[s.structIndex][s.structProperty],a+=`[${s.structIndex}].${s.structProperty}`),!o)return un(`Active uniform ${a} has not been supplied`);if(o&&o.value===void 0)return un(`${a} uniform is missing a value parameter`);if(o.value.texture)return r=r+1,o.value.update(r),tr(this.gl,s.type,i,r);if(o.value.length&&o.value[0].texture){const h=[];return o.value.forEach(l=>{r=r+1,l.update(r),h.push(r)}),tr(this.gl,s.type,i,h)}tr(this.gl,s.type,i,o.value)}),this.applyState(),t&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function tr(e,t,r,n){n=n.length?Ws(n):n;const i=e.renderer.state.uniformLocations.get(r);if(n.length)if(i===void 0||i.length!==n.length)e.renderer.state.uniformLocations.set(r,n.slice(0));else{if(Gs(i,n))return;i.set?i.set(n):Hs(i,n),e.renderer.state.uniformLocations.set(r,i)}else{if(i===n)return;e.renderer.state.uniformLocations.set(r,n)}switch(t){case 5126:return n.length?e.uniform1fv(r,n):e.uniform1f(r,n);case 35664:return e.uniform2fv(r,n);case 35665:return e.uniform3fv(r,n);case 35666:return e.uniform4fv(r,n);case 35670:case 5124:case 35678:case 35680:return n.length?e.uniform1iv(r,n):e.uniform1i(r,n);case 35671:case 35667:return e.uniform2iv(r,n);case 35672:case 35668:return e.uniform3iv(r,n);case 35673:case 35669:return e.uniform4iv(r,n);case 35674:return e.uniformMatrix2fv(r,!1,n);case 35675:return e.uniformMatrix3fv(r,!1,n);case 35676:return e.uniformMatrix4fv(r,!1,n)}}function cn(e){let t=e.split(`
`);for(let r=0;r<t.length;r++)t[r]=r+1+": "+t[r];return t.join(`
`)}function Ws(e){const t=e.length,r=e[0].length;if(r===void 0)return e;const n=t*r;let i=ln[n];i||(ln[n]=i=new Float32Array(n));for(let s=0;s<t;s++)i.set(e[s],s*r);return i}function Gs(e,t){if(e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Hs(e,t){for(let r=0,n=e.length;r<n;r++)e[r]=t[r]}let er=0;function un(e){er>100||(console.warn(e),er++,er>100&&console.warn("More than 100 program warnings - stopping logs."))}const rr=new Q;let Qs=1;class V1{constructor({canvas:t=document.createElement("canvas"),width:r=300,height:n=150,dpr:i=1,alpha:s=!1,depth:a=!0,stencil:o=!1,antialias:h=!1,premultipliedAlpha:l=!1,preserveDrawingBuffer:p=!1,powerPreference:c="default",autoClear:d=!0,webgl:g=2}={}){const _={alpha:s,depth:a,stencil:o,antialias:h,premultipliedAlpha:l,preserveDrawingBuffer:p,powerPreference:c};this.dpr=i,this.alpha=s,this.color=!0,this.depth=a,this.stencil=o,this.premultipliedAlpha=l,this.autoClear=d,this.id=Qs++,g===2&&(this.gl=t.getContext("webgl2",_)),this.isWebgl2=!!this.gl,this.gl||(this.gl=t.getContext("webgl",_)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(r,n),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=null,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LESS,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(t,r){this.width=t,this.height=r,this.gl.canvas.width=t*this.dpr,this.gl.canvas.height=r*this.dpr,Object.assign(this.gl.canvas.style,{width:t+"px",height:r+"px"})}setViewport(t,r){this.state.viewport.width===t&&this.state.viewport.height===r||(this.state.viewport.width=t,this.state.viewport.height=r,this.gl.viewport(0,0,t,r))}enable(t){this.state[t]!==!0&&(this.gl.enable(t),this.state[t]=!0)}disable(t){this.state[t]!==!1&&(this.gl.disable(t),this.state[t]=!1)}setBlendFunc(t,r,n,i){this.state.blendFunc.src===t&&this.state.blendFunc.dst===r&&this.state.blendFunc.srcAlpha===n&&this.state.blendFunc.dstAlpha===i||(this.state.blendFunc.src=t,this.state.blendFunc.dst=r,this.state.blendFunc.srcAlpha=n,this.state.blendFunc.dstAlpha=i,n!==void 0?this.gl.blendFuncSeparate(t,r,n,i):this.gl.blendFunc(t,r))}setBlendEquation(t,r){t=t||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===t&&this.state.blendEquation.modeAlpha===r)&&(this.state.blendEquation.modeRGB=t,this.state.blendEquation.modeAlpha=r,r!==void 0?this.gl.blendEquationSeparate(t,r):this.gl.blendEquation(t))}setCullFace(t){this.state.cullFace!==t&&(this.state.cullFace=t,this.gl.cullFace(t))}setFrontFace(t){this.state.frontFace!==t&&(this.state.frontFace=t,this.gl.frontFace(t))}setDepthMask(t){this.state.depthMask!==t&&(this.state.depthMask=t,this.gl.depthMask(t))}setDepthFunc(t){this.state.depthFunc!==t&&(this.state.depthFunc=t,this.gl.depthFunc(t))}activeTexture(t){this.state.activeTextureUnit!==t&&(this.state.activeTextureUnit=t,this.gl.activeTexture(this.gl.TEXTURE0+t))}bindFramebuffer({target:t=this.gl.FRAMEBUFFER,buffer:r=null}={}){this.state.framebuffer!==r&&(this.state.framebuffer=r,this.gl.bindFramebuffer(t,r))}getExtension(t,r,n){return r&&this.gl[r]?this.gl[r].bind(this.gl):(this.extensions[t]||(this.extensions[t]=this.gl.getExtension(t)),r?this.extensions[t]?this.extensions[t][n].bind(this.extensions[t]):null:this.extensions[t])}sortOpaque(t,r){return t.renderOrder!==r.renderOrder?t.renderOrder-r.renderOrder:t.program.id!==r.program.id?t.program.id-r.program.id:t.zDepth!==r.zDepth?t.zDepth-r.zDepth:r.id-t.id}sortTransparent(t,r){return t.renderOrder!==r.renderOrder?t.renderOrder-r.renderOrder:t.zDepth!==r.zDepth?r.zDepth-t.zDepth:r.id-t.id}sortUI(t,r){return t.renderOrder!==r.renderOrder?t.renderOrder-r.renderOrder:t.program.id!==r.program.id?t.program.id-r.program.id:r.id-t.id}getRenderList({scene:t,camera:r,frustumCull:n,sort:i}){let s=[];if(r&&n&&r.updateFrustum(),t.traverse(a=>{if(!a.visible)return!0;!a.draw||n&&a.frustumCulled&&r&&!r.frustumIntersectsMesh(a)||s.push(a)}),i){const a=[],o=[],h=[];s.forEach(l=>{l.program.transparent?l.program.depthTest?o.push(l):h.push(l):a.push(l),l.zDepth=0,!(l.renderOrder!==0||!l.program.depthTest||!r)&&(l.worldMatrix.getTranslation(rr),rr.applyMatrix4(r.projectionViewMatrix),l.zDepth=rr.z)}),a.sort(this.sortOpaque),o.sort(this.sortTransparent),h.sort(this.sortUI),s=a.concat(o,h)}return s}render({scene:t,camera:r,target:n=null,update:i=!0,sort:s=!0,frustumCull:a=!0,clear:o}){n===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(n),this.setViewport(n.width,n.height)),(o||this.autoClear&&o!==!1)&&(this.depth&&(!n||n.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),i&&t.updateMatrixWorld(),r&&r.updateMatrixWorld(),this.getRenderList({scene:t,camera:r,frustumCull:a,sort:s}).forEach(l=>{l.draw({camera:r})})}}function Zs(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Ks(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function Js(e,t){let r=t[0],n=t[1],i=t[2],s=t[3],a=r*r+n*n+i*i+s*s;return a>0&&(a=1/Math.sqrt(a)),e[0]=r*a,e[1]=n*a,e[2]=i*a,e[3]=s*a,e}function ta(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function ea(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function ra(e,t,r){r=r*.5;let n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function dn(e,t,r){let n=t[0],i=t[1],s=t[2],a=t[3],o=r[0],h=r[1],l=r[2],p=r[3];return e[0]=n*p+a*o+i*l-s*h,e[1]=i*p+a*h+s*o-n*l,e[2]=s*p+a*l+n*h-i*o,e[3]=a*p-n*o-i*h-s*l,e}function na(e,t,r){r*=.5;let n=t[0],i=t[1],s=t[2],a=t[3],o=Math.sin(r),h=Math.cos(r);return e[0]=n*h+a*o,e[1]=i*h+s*o,e[2]=s*h-i*o,e[3]=a*h-n*o,e}function ia(e,t,r){r*=.5;let n=t[0],i=t[1],s=t[2],a=t[3],o=Math.sin(r),h=Math.cos(r);return e[0]=n*h-s*o,e[1]=i*h+a*o,e[2]=s*h+n*o,e[3]=a*h-i*o,e}function sa(e,t,r){r*=.5;let n=t[0],i=t[1],s=t[2],a=t[3],o=Math.sin(r),h=Math.cos(r);return e[0]=n*h+i*o,e[1]=i*h-n*o,e[2]=s*h+a*o,e[3]=a*h-s*o,e}function aa(e,t,r,n){let i=t[0],s=t[1],a=t[2],o=t[3],h=r[0],l=r[1],p=r[2],c=r[3],d,g,_,x,w;return g=i*h+s*l+a*p+o*c,g<0&&(g=-g,h=-h,l=-l,p=-p,c=-c),1-g>1e-6?(d=Math.acos(g),_=Math.sin(d),x=Math.sin((1-n)*d)/_,w=Math.sin(n*d)/_):(x=1-n,w=n),e[0]=x*i+w*h,e[1]=x*s+w*l,e[2]=x*a+w*p,e[3]=x*o+w*c,e}function oa(e,t){let r=t[0],n=t[1],i=t[2],s=t[3],a=r*r+n*n+i*i+s*s,o=a?1/a:0;return e[0]=-r*o,e[1]=-n*o,e[2]=-i*o,e[3]=s*o,e}function ha(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function fa(e,t){let r=t[0]+t[4]+t[8],n;if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{let i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);let s=(i+1)%3,a=(i+2)%3;n=Math.sqrt(t[i*3+i]-t[s*3+s]-t[a*3+a]+1),e[i]=.5*n,n=.5/n,e[3]=(t[s*3+a]-t[a*3+s])*n,e[s]=(t[s*3+i]+t[i*3+s])*n,e[a]=(t[a*3+i]+t[i*3+a])*n}return e}function la(e,t,r="YXZ"){let n=Math.sin(t[0]*.5),i=Math.cos(t[0]*.5),s=Math.sin(t[1]*.5),a=Math.cos(t[1]*.5),o=Math.sin(t[2]*.5),h=Math.cos(t[2]*.5);return r==="XYZ"?(e[0]=n*a*h+i*s*o,e[1]=i*s*h-n*a*o,e[2]=i*a*o+n*s*h,e[3]=i*a*h-n*s*o):r==="YXZ"?(e[0]=n*a*h+i*s*o,e[1]=i*s*h-n*a*o,e[2]=i*a*o-n*s*h,e[3]=i*a*h+n*s*o):r==="ZXY"?(e[0]=n*a*h-i*s*o,e[1]=i*s*h+n*a*o,e[2]=i*a*o+n*s*h,e[3]=i*a*h-n*s*o):r==="ZYX"?(e[0]=n*a*h-i*s*o,e[1]=i*s*h+n*a*o,e[2]=i*a*o-n*s*h,e[3]=i*a*h+n*s*o):r==="YZX"?(e[0]=n*a*h+i*s*o,e[1]=i*s*h+n*a*o,e[2]=i*a*o-n*s*h,e[3]=i*a*h-n*s*o):r==="XZY"&&(e[0]=n*a*h-i*s*o,e[1]=i*s*h-n*a*o,e[2]=i*a*o+n*s*h,e[3]=i*a*h+n*s*o),e}const ca=Zs,ua=Ks,da=ta,pa=Js;class va extends Array{constructor(t=0,r=0,n=0,i=1){super(t,r,n,i);return this.onChange=()=>{},this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(t){this[0]=t,this.onChange()}set y(t){this[1]=t,this.onChange()}set z(t){this[2]=t,this.onChange()}set w(t){this[3]=t,this.onChange()}identity(){return ea(this),this.onChange(),this}set(t,r,n,i){return t.length?this.copy(t):(ua(this,t,r,n,i),this.onChange(),this)}rotateX(t){return na(this,this,t),this.onChange(),this}rotateY(t){return ia(this,this,t),this.onChange(),this}rotateZ(t){return sa(this,this,t),this.onChange(),this}inverse(t=this){return oa(this,t),this.onChange(),this}conjugate(t=this){return ha(this,t),this.onChange(),this}copy(t){return ca(this,t),this.onChange(),this}normalize(t=this){return pa(this,t),this.onChange(),this}multiply(t,r){return r?dn(this,t,r):dn(this,this,t),this.onChange(),this}dot(t){return da(this,t)}fromMatrix3(t){return fa(this,t),this.onChange(),this}fromEuler(t){return la(this,t,t.order),this}fromAxisAngle(t,r){return ra(this,t,r),this}slerp(t,r){return aa(this,this,t,r),this}fromArray(t,r=0){return this[0]=t[r],this[1]=t[r+1],this[2]=t[r+2],this[3]=t[r+3],this}toArray(t=[],r=0){return t[r]=this[0],t[r+1]=this[1],t[r+2]=this[2],t[r+3]=this[3],t}}const ga=1e-6;function ma(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ya(e,t,r,n,i,s,a,o,h,l,p,c,d,g,_,x,w){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=s,e[5]=a,e[6]=o,e[7]=h,e[8]=l,e[9]=p,e[10]=c,e[11]=d,e[12]=g,e[13]=_,e[14]=x,e[15]=w,e}function ba(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function _a(e,t){let r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5],h=t[6],l=t[7],p=t[8],c=t[9],d=t[10],g=t[11],_=t[12],x=t[13],w=t[14],A=t[15],T=r*o-n*a,I=r*h-i*a,L=r*l-s*a,E=n*h-i*o,M=n*l-s*o,R=i*l-s*h,P=p*x-c*_,F=p*w-d*_,Y=p*A-g*_,V=c*w-d*x,$=c*A-g*x,k=d*A-g*w,B=T*k-I*$+L*V+E*Y-M*F+R*P;return B?(B=1/B,e[0]=(o*k-h*$+l*V)*B,e[1]=(i*$-n*k-s*V)*B,e[2]=(x*R-w*M+A*E)*B,e[3]=(d*M-c*R-g*E)*B,e[4]=(h*Y-a*k-l*F)*B,e[5]=(r*k-i*Y+s*F)*B,e[6]=(w*L-_*R-A*I)*B,e[7]=(p*R-d*L+g*I)*B,e[8]=(a*$-o*Y+l*P)*B,e[9]=(n*Y-r*$-s*P)*B,e[10]=(_*M-x*L+A*T)*B,e[11]=(c*L-p*M-g*T)*B,e[12]=(o*F-a*V-h*P)*B,e[13]=(r*V-n*F+i*P)*B,e[14]=(x*I-_*E-w*T)*B,e[15]=(p*E-c*I+d*T)*B,e):null}function wa(e){let t=e[0],r=e[1],n=e[2],i=e[3],s=e[4],a=e[5],o=e[6],h=e[7],l=e[8],p=e[9],c=e[10],d=e[11],g=e[12],_=e[13],x=e[14],w=e[15],A=t*a-r*s,T=t*o-n*s,I=t*h-i*s,L=r*o-n*a,E=r*h-i*a,M=n*h-i*o,R=l*_-p*g,P=l*x-c*g,F=l*w-d*g,Y=p*x-c*_,V=p*w-d*_,$=c*w-d*x;return A*$-T*V+I*Y+L*F-E*P+M*R}function pn(e,t,r){let n=t[0],i=t[1],s=t[2],a=t[3],o=t[4],h=t[5],l=t[6],p=t[7],c=t[8],d=t[9],g=t[10],_=t[11],x=t[12],w=t[13],A=t[14],T=t[15],I=r[0],L=r[1],E=r[2],M=r[3];return e[0]=I*n+L*o+E*c+M*x,e[1]=I*i+L*h+E*d+M*w,e[2]=I*s+L*l+E*g+M*A,e[3]=I*a+L*p+E*_+M*T,I=r[4],L=r[5],E=r[6],M=r[7],e[4]=I*n+L*o+E*c+M*x,e[5]=I*i+L*h+E*d+M*w,e[6]=I*s+L*l+E*g+M*A,e[7]=I*a+L*p+E*_+M*T,I=r[8],L=r[9],E=r[10],M=r[11],e[8]=I*n+L*o+E*c+M*x,e[9]=I*i+L*h+E*d+M*w,e[10]=I*s+L*l+E*g+M*A,e[11]=I*a+L*p+E*_+M*T,I=r[12],L=r[13],E=r[14],M=r[15],e[12]=I*n+L*o+E*c+M*x,e[13]=I*i+L*h+E*d+M*w,e[14]=I*s+L*l+E*g+M*A,e[15]=I*a+L*p+E*_+M*T,e}function xa(e,t,r){let n=r[0],i=r[1],s=r[2],a,o,h,l,p,c,d,g,_,x,w,A;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*s+t[12],e[13]=t[1]*n+t[5]*i+t[9]*s+t[13],e[14]=t[2]*n+t[6]*i+t[10]*s+t[14],e[15]=t[3]*n+t[7]*i+t[11]*s+t[15]):(a=t[0],o=t[1],h=t[2],l=t[3],p=t[4],c=t[5],d=t[6],g=t[7],_=t[8],x=t[9],w=t[10],A=t[11],e[0]=a,e[1]=o,e[2]=h,e[3]=l,e[4]=p,e[5]=c,e[6]=d,e[7]=g,e[8]=_,e[9]=x,e[10]=w,e[11]=A,e[12]=a*n+p*i+_*s+t[12],e[13]=o*n+c*i+x*s+t[13],e[14]=h*n+d*i+w*s+t[14],e[15]=l*n+g*i+A*s+t[15]),e}function Ea(e,t,r){let n=r[0],i=r[1],s=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Ma(e,t,r,n){let i=n[0],s=n[1],a=n[2],o=Math.hypot(i,s,a),h,l,p,c,d,g,_,x,w,A,T,I,L,E,M,R,P,F,Y,V,$,k,B,j;return Math.abs(o)<ga?null:(o=1/o,i*=o,s*=o,a*=o,h=Math.sin(r),l=Math.cos(r),p=1-l,c=t[0],d=t[1],g=t[2],_=t[3],x=t[4],w=t[5],A=t[6],T=t[7],I=t[8],L=t[9],E=t[10],M=t[11],R=i*i*p+l,P=s*i*p+a*h,F=a*i*p-s*h,Y=i*s*p-a*h,V=s*s*p+l,$=a*s*p+i*h,k=i*a*p+s*h,B=s*a*p-i*h,j=a*a*p+l,e[0]=c*R+x*P+I*F,e[1]=d*R+w*P+L*F,e[2]=g*R+A*P+E*F,e[3]=_*R+T*P+M*F,e[4]=c*Y+x*V+I*$,e[5]=d*Y+w*V+L*$,e[6]=g*Y+A*V+E*$,e[7]=_*Y+T*V+M*$,e[8]=c*k+x*B+I*j,e[9]=d*k+w*B+L*j,e[10]=g*k+A*B+E*j,e[11]=_*k+T*B+M*j,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function Aa(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function vn(e,t){let r=t[0],n=t[1],i=t[2],s=t[4],a=t[5],o=t[6],h=t[8],l=t[9],p=t[10];return e[0]=Math.hypot(r,n,i),e[1]=Math.hypot(s,a,o),e[2]=Math.hypot(h,l,p),e}function Sa(e){let t=e[0],r=e[1],n=e[2],i=e[4],s=e[5],a=e[6],o=e[8],h=e[9],l=e[10];const p=t*t+r*r+n*n,c=i*i+s*s+a*a,d=o*o+h*h+l*l;return Math.sqrt(Math.max(p,c,d))}const Ra=function(){const e=[0,0,0];return function(t,r){let n=e;vn(n,r);let i=1/n[0],s=1/n[1],a=1/n[2],o=r[0]*i,h=r[1]*s,l=r[2]*a,p=r[4]*i,c=r[5]*s,d=r[6]*a,g=r[8]*i,_=r[9]*s,x=r[10]*a,w=o+c+x,A=0;return w>0?(A=Math.sqrt(w+1)*2,t[3]=.25*A,t[0]=(d-_)/A,t[1]=(g-l)/A,t[2]=(h-p)/A):o>c&&o>x?(A=Math.sqrt(1+o-c-x)*2,t[3]=(d-_)/A,t[0]=.25*A,t[1]=(h+p)/A,t[2]=(g+l)/A):c>x?(A=Math.sqrt(1+c-o-x)*2,t[3]=(g-l)/A,t[0]=(h+p)/A,t[1]=.25*A,t[2]=(d+_)/A):(A=Math.sqrt(1+x-o-c)*2,t[3]=(h-p)/A,t[0]=(g+l)/A,t[1]=(d+_)/A,t[2]=.25*A),t}}();function Ta(e,t,r,n){let i=t[0],s=t[1],a=t[2],o=t[3],h=i+i,l=s+s,p=a+a,c=i*h,d=i*l,g=i*p,_=s*l,x=s*p,w=a*p,A=o*h,T=o*l,I=o*p,L=n[0],E=n[1],M=n[2];return e[0]=(1-(_+w))*L,e[1]=(d+I)*L,e[2]=(g-T)*L,e[3]=0,e[4]=(d-I)*E,e[5]=(1-(c+w))*E,e[6]=(x+A)*E,e[7]=0,e[8]=(g+T)*M,e[9]=(x-A)*M,e[10]=(1-(c+_))*M,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Oa(e,t){let r=t[0],n=t[1],i=t[2],s=t[3],a=r+r,o=n+n,h=i+i,l=r*a,p=n*a,c=n*o,d=i*a,g=i*o,_=i*h,x=s*a,w=s*o,A=s*h;return e[0]=1-c-_,e[1]=p+A,e[2]=d-w,e[3]=0,e[4]=p-A,e[5]=1-l-_,e[6]=g+x,e[7]=0,e[8]=d+w,e[9]=g-x,e[10]=1-l-c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ia(e,t,r,n,i){let s=1/Math.tan(t/2),a=1/(n-i);return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+n)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*n*a,e[15]=0,e}function Da(e,t,r,n,i,s,a){let o=1/(t-r),h=1/(n-i),l=1/(s-a);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*h,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+r)*o,e[13]=(i+n)*h,e[14]=(a+s)*l,e[15]=1,e}function Na(e,t,r,n){let i=t[0],s=t[1],a=t[2],o=n[0],h=n[1],l=n[2],p=i-r[0],c=s-r[1],d=a-r[2],g=p*p+c*c+d*d;g===0?d=1:(g=1/Math.sqrt(g),p*=g,c*=g,d*=g);let _=h*d-l*c,x=l*p-o*d,w=o*c-h*p;return g=_*_+x*x+w*w,g===0&&(l?o+=1e-6:h?l+=1e-6:h+=1e-6,_=h*d-l*c,x=l*p-o*d,w=o*c-h*p,g=_*_+x*x+w*w),g=1/Math.sqrt(g),_*=g,x*=g,w*=g,e[0]=_,e[1]=x,e[2]=w,e[3]=0,e[4]=c*w-d*x,e[5]=d*_-p*w,e[6]=p*x-c*_,e[7]=0,e[8]=p,e[9]=c,e[10]=d,e[11]=0,e[12]=i,e[13]=s,e[14]=a,e[15]=1,e}class At extends Array{constructor(t=1,r=0,n=0,i=0,s=0,a=1,o=0,h=0,l=0,p=0,c=1,d=0,g=0,_=0,x=0,w=1){super(t,r,n,i,s,a,o,h,l,p,c,d,g,_,x,w);return this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(t){this[12]=t}set y(t){this[13]=t}set z(t){this[14]=t}set w(t){this[15]=t}set(t,r,n,i,s,a,o,h,l,p,c,d,g,_,x,w){return t.length?this.copy(t):(ya(this,t,r,n,i,s,a,o,h,l,p,c,d,g,_,x,w),this)}translate(t,r=this){return xa(this,r,t),this}rotate(t,r,n=this){return Ma(this,n,t,r),this}scale(t,r=this){return Ea(this,r,typeof t=="number"?[t,t,t]:t),this}multiply(t,r){return r?pn(this,t,r):pn(this,this,t),this}identity(){return ba(this),this}copy(t){return ma(this,t),this}fromPerspective({fov:t,aspect:r,near:n,far:i}={}){return Ia(this,t,r,n,i),this}fromOrthogonal({left:t,right:r,bottom:n,top:i,near:s,far:a}){return Da(this,t,r,n,i,s,a),this}fromQuaternion(t){return Oa(this,t),this}setPosition(t){return this.x=t[0],this.y=t[1],this.z=t[2],this}inverse(t=this){return _a(this,t),this}compose(t,r,n){return Ta(this,t,r,n),this}getRotation(t){return Ra(t,this),this}getTranslation(t){return Aa(t,this),this}getScaling(t){return vn(t,this),this}getMaxScaleOnAxis(){return Sa(this)}lookAt(t,r,n){return Na(this,t,r,n),this}determinant(){return wa(this)}fromArray(t,r=0){return this[0]=t[r],this[1]=t[r+1],this[2]=t[r+2],this[3]=t[r+3],this[4]=t[r+4],this[5]=t[r+5],this[6]=t[r+6],this[7]=t[r+7],this[8]=t[r+8],this[9]=t[r+9],this[10]=t[r+10],this[11]=t[r+11],this[12]=t[r+12],this[13]=t[r+13],this[14]=t[r+14],this[15]=t[r+15],this}toArray(t=[],r=0){return t[r]=this[0],t[r+1]=this[1],t[r+2]=this[2],t[r+3]=this[3],t[r+4]=this[4],t[r+5]=this[5],t[r+6]=this[6],t[r+7]=this[7],t[r+8]=this[8],t[r+9]=this[9],t[r+10]=this[10],t[r+11]=this[11],t[r+12]=this[12],t[r+13]=this[13],t[r+14]=this[14],t[r+15]=this[15],t}}function La(e,t,r="YXZ"){return r==="XYZ"?(e[1]=Math.asin(Math.min(Math.max(t[8],-1),1)),Math.abs(t[8])<.99999?(e[0]=Math.atan2(-t[9],t[10]),e[2]=Math.atan2(-t[4],t[0])):(e[0]=Math.atan2(t[6],t[5]),e[2]=0)):r==="YXZ"?(e[0]=Math.asin(-Math.min(Math.max(t[9],-1),1)),Math.abs(t[9])<.99999?(e[1]=Math.atan2(t[8],t[10]),e[2]=Math.atan2(t[1],t[5])):(e[1]=Math.atan2(-t[2],t[0]),e[2]=0)):r==="ZXY"?(e[0]=Math.asin(Math.min(Math.max(t[6],-1),1)),Math.abs(t[6])<.99999?(e[1]=Math.atan2(-t[2],t[10]),e[2]=Math.atan2(-t[4],t[5])):(e[1]=0,e[2]=Math.atan2(t[1],t[0]))):r==="ZYX"?(e[1]=Math.asin(-Math.min(Math.max(t[2],-1),1)),Math.abs(t[2])<.99999?(e[0]=Math.atan2(t[6],t[10]),e[2]=Math.atan2(t[1],t[0])):(e[0]=0,e[2]=Math.atan2(-t[4],t[5]))):r==="YZX"?(e[2]=Math.asin(Math.min(Math.max(t[1],-1),1)),Math.abs(t[1])<.99999?(e[0]=Math.atan2(-t[9],t[5]),e[1]=Math.atan2(-t[2],t[0])):(e[0]=0,e[1]=Math.atan2(t[8],t[10]))):r==="XZY"&&(e[2]=Math.asin(-Math.min(Math.max(t[4],-1),1)),Math.abs(t[4])<.99999?(e[0]=Math.atan2(t[6],t[5]),e[1]=Math.atan2(t[8],t[0])):(e[0]=Math.atan2(-t[9],t[10]),e[1]=0)),e}const gn=new At;class Ca extends Array{constructor(t=0,r=t,n=t,i="YXZ"){super(t,r,n);return this.order=i,this.onChange=()=>{},this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(t){this[0]=t,this.onChange()}set y(t){this[1]=t,this.onChange()}set z(t){this[2]=t,this.onChange()}set(t,r=t,n=t){return t.length?this.copy(t):(this[0]=t,this[1]=r,this[2]=n,this.onChange(),this)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.onChange(),this}reorder(t){return this.order=t,this.onChange(),this}fromRotationMatrix(t,r=this.order){return La(this,t,r),this}fromQuaternion(t,r=this.order){return gn.fromQuaternion(t),this.fromRotationMatrix(gn,r)}toArray(t=[],r=0){return t[r]=this[0],t[r+1]=this[1],t[r+2]=this[2],t}}class mn{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new At,this.worldMatrix=new At,this.matrixAutoUpdate=!0,this.position=new Q,this.quaternion=new va,this.scale=new Q(1),this.rotation=new Ca,this.up=new Q(0,1,0),this.rotation.onChange=()=>this.quaternion.fromEuler(this.rotation),this.quaternion.onChange=()=>this.rotation.fromQuaternion(this.quaternion)}setParent(t,r=!0){this.parent&&t!==this.parent&&this.parent.removeChild(this,!1),this.parent=t,r&&t&&t.addChild(this,!1)}addChild(t,r=!0){~this.children.indexOf(t)||this.children.push(t),r&&t.setParent(this,!1)}removeChild(t,r=!0){~this.children.indexOf(t)&&this.children.splice(this.children.indexOf(t),1),r&&t.setParent(null,!1)}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||t)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,t=!0);for(let r=0,n=this.children.length;r<n;r++)this.children[r].updateMatrixWorld(t)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(t){if(!t(this))for(let r=0,n=this.children.length;r<n;r++)this.children[r].traverse(t)}decompose(){this.matrix.getTranslation(this.position),this.matrix.getRotation(this.quaternion),this.matrix.getScaling(this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(t,r=!1){r?this.matrix.lookAt(this.position,t,this.up):this.matrix.lookAt(t,this.position,this.up),this.matrix.getRotation(this.quaternion),this.rotation.fromQuaternion(this.quaternion)}}const Pa=new At,Fa=new Q,za=new Q;class q1 extends mn{constructor(t,{near:r=.1,far:n=100,fov:i=45,aspect:s=1,left:a,right:o,bottom:h,top:l,zoom:p=1}={}){super();Object.assign(this,{near:r,far:n,fov:i,aspect:s,left:a,right:o,bottom:h,top:l,zoom:p}),this.projectionMatrix=new At,this.viewMatrix=new At,this.projectionViewMatrix=new At,this.worldPosition=new Q,this.type=a||o?"orthographic":"perspective",this.type==="orthographic"?this.orthographic():this.perspective()}perspective({near:t=this.near,far:r=this.far,fov:n=this.fov,aspect:i=this.aspect}={}){return Object.assign(this,{near:t,far:r,fov:n,aspect:i}),this.projectionMatrix.fromPerspective({fov:n*(Math.PI/180),aspect:i,near:t,far:r}),this.type="perspective",this}orthographic({near:t=this.near,far:r=this.far,left:n=this.left,right:i=this.right,bottom:s=this.bottom,top:a=this.top,zoom:o=this.zoom}={}){return Object.assign(this,{near:t,far:r,left:n,right:i,bottom:s,top:a,zoom:o}),n/=o,i/=o,s/=o,a/=o,this.projectionMatrix.fromOrthogonal({left:n,right:i,bottom:s,top:a,near:t,far:r}),this.type="orthographic",this}updateMatrixWorld(){return super.updateMatrixWorld(),this.viewMatrix.inverse(this.worldMatrix),this.worldMatrix.getTranslation(this.worldPosition),this.projectionViewMatrix.multiply(this.projectionMatrix,this.viewMatrix),this}lookAt(t){return super.lookAt(t,!0),this}project(t){return t.applyMatrix4(this.viewMatrix),t.applyMatrix4(this.projectionMatrix),this}unproject(t){return t.applyMatrix4(Pa.inverse(this.projectionMatrix)),t.applyMatrix4(this.worldMatrix),this}updateFrustum(){this.frustum||(this.frustum=[new Q,new Q,new Q,new Q,new Q,new Q]);const t=this.projectionViewMatrix;this.frustum[0].set(t[3]-t[0],t[7]-t[4],t[11]-t[8]).constant=t[15]-t[12],this.frustum[1].set(t[3]+t[0],t[7]+t[4],t[11]+t[8]).constant=t[15]+t[12],this.frustum[2].set(t[3]+t[1],t[7]+t[5],t[11]+t[9]).constant=t[15]+t[13],this.frustum[3].set(t[3]-t[1],t[7]-t[5],t[11]-t[9]).constant=t[15]-t[13],this.frustum[4].set(t[3]-t[2],t[7]-t[6],t[11]-t[10]).constant=t[15]-t[14],this.frustum[5].set(t[3]+t[2],t[7]+t[6],t[11]+t[10]).constant=t[15]+t[14];for(let r=0;r<6;r++){const n=1/this.frustum[r].distance();this.frustum[r].multiply(n),this.frustum[r].constant*=n}}frustumIntersectsMesh(t){if(!t.geometry.attributes.position||((!t.geometry.bounds||t.geometry.bounds.radius===1/0)&&t.geometry.computeBoundingSphere(),!t.geometry.bounds))return!0;const r=Fa;r.copy(t.geometry.bounds.center),r.applyMatrix4(t.worldMatrix);const n=t.geometry.bounds.radius*t.worldMatrix.getMaxScaleOnAxis();return this.frustumIntersectsSphere(r,n)}frustumIntersectsSphere(t,r){const n=za;for(let i=0;i<6;i++){const s=this.frustum[i];if(n.copy(s).dot(t)+s.constant<-r)return!1}return!0}}function Ba(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function $a(e,t){let r=t[0],n=t[1],i=t[2],s=t[3],a=r+r,o=n+n,h=i+i,l=r*a,p=n*a,c=n*o,d=i*a,g=i*o,_=i*h,x=s*a,w=s*o,A=s*h;return e[0]=1-c-_,e[3]=p-A,e[6]=d+w,e[1]=p+A,e[4]=1-l-_,e[7]=g-x,e[2]=d-w,e[5]=g+x,e[8]=1-l-c,e}function Ua(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function ka(e,t,r,n,i,s,a,o,h,l){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=s,e[5]=a,e[6]=o,e[7]=h,e[8]=l,e}function Ya(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Va(e,t){let r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5],h=t[6],l=t[7],p=t[8],c=p*a-o*l,d=-p*s+o*h,g=l*s-a*h,_=r*c+n*d+i*g;return _?(_=1/_,e[0]=c*_,e[1]=(-p*n+i*l)*_,e[2]=(o*n-i*a)*_,e[3]=d*_,e[4]=(p*r-i*h)*_,e[5]=(-o*r+i*s)*_,e[6]=g*_,e[7]=(-l*r+n*h)*_,e[8]=(a*r-n*s)*_,e):null}function yn(e,t,r){let n=t[0],i=t[1],s=t[2],a=t[3],o=t[4],h=t[5],l=t[6],p=t[7],c=t[8],d=r[0],g=r[1],_=r[2],x=r[3],w=r[4],A=r[5],T=r[6],I=r[7],L=r[8];return e[0]=d*n+g*a+_*l,e[1]=d*i+g*o+_*p,e[2]=d*s+g*h+_*c,e[3]=x*n+w*a+A*l,e[4]=x*i+w*o+A*p,e[5]=x*s+w*h+A*c,e[6]=T*n+I*a+L*l,e[7]=T*i+I*o+L*p,e[8]=T*s+I*h+L*c,e}function qa(e,t,r){let n=t[0],i=t[1],s=t[2],a=t[3],o=t[4],h=t[5],l=t[6],p=t[7],c=t[8],d=r[0],g=r[1];return e[0]=n,e[1]=i,e[2]=s,e[3]=a,e[4]=o,e[5]=h,e[6]=d*n+g*a+l,e[7]=d*i+g*o+p,e[8]=d*s+g*h+c,e}function Xa(e,t,r){let n=t[0],i=t[1],s=t[2],a=t[3],o=t[4],h=t[5],l=t[6],p=t[7],c=t[8],d=Math.sin(r),g=Math.cos(r);return e[0]=g*n+d*a,e[1]=g*i+d*o,e[2]=g*s+d*h,e[3]=g*a-d*n,e[4]=g*o-d*i,e[5]=g*h-d*s,e[6]=l,e[7]=p,e[8]=c,e}function ja(e,t,r){let n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Wa(e,t){let r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5],h=t[6],l=t[7],p=t[8],c=t[9],d=t[10],g=t[11],_=t[12],x=t[13],w=t[14],A=t[15],T=r*o-n*a,I=r*h-i*a,L=r*l-s*a,E=n*h-i*o,M=n*l-s*o,R=i*l-s*h,P=p*x-c*_,F=p*w-d*_,Y=p*A-g*_,V=c*w-d*x,$=c*A-g*x,k=d*A-g*w,B=T*k-I*$+L*V+E*Y-M*F+R*P;return B?(B=1/B,e[0]=(o*k-h*$+l*V)*B,e[1]=(h*Y-a*k-l*F)*B,e[2]=(a*$-o*Y+l*P)*B,e[3]=(i*$-n*k-s*V)*B,e[4]=(r*k-i*Y+s*F)*B,e[5]=(n*Y-r*$-s*P)*B,e[6]=(x*R-w*M+A*E)*B,e[7]=(w*L-_*R-A*I)*B,e[8]=(_*M-x*L+A*T)*B,e):null}class Ga extends Array{constructor(t=1,r=0,n=0,i=0,s=1,a=0,o=0,h=0,l=1){super(t,r,n,i,s,a,o,h,l);return this}set(t,r,n,i,s,a,o,h,l){return t.length?this.copy(t):(ka(this,t,r,n,i,s,a,o,h,l),this)}translate(t,r=this){return qa(this,r,t),this}rotate(t,r=this){return Xa(this,r,t),this}scale(t,r=this){return ja(this,r,t),this}multiply(t,r){return r?yn(this,t,r):yn(this,this,t),this}identity(){return Ya(this),this}copy(t){return Ua(this,t),this}fromMatrix4(t){return Ba(this,t),this}fromQuaternion(t){return $a(this,t),this}fromBasis(t,r,n){return this.set(t[0],t[1],t[2],r[0],r[1],r[2],n[0],n[1],n[2]),this}inverse(t=this){return Va(this,t),this}getNormalMatrix(t){return Wa(this,t),this}}let Ha=0;class X1 extends mn{constructor(t,{geometry:r,program:n,mode:i=t.TRIANGLES,frustumCulled:s=!0,renderOrder:a=0}={}){super();t.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=t,this.id=Ha++,this.geometry=r,this.program=n,this.mode=i,this.frustumCulled=s,this.renderOrder=a,this.modelViewMatrix=new At,this.normalMatrix=new Ga,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(t){return this.beforeRenderCallbacks.push(t),this}onAfterRender(t){return this.afterRenderCallbacks.push(t),this}draw({camera:t}={}){this.beforeRenderCallbacks.forEach(n=>n&&n({mesh:this,camera:t})),t&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=t.projectionMatrix,this.program.uniforms.cameraPosition.value=t.worldPosition,this.program.uniforms.viewMatrix.value=t.viewMatrix,this.modelViewMatrix.multiply(t.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix);let r=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:r}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(n=>n&&n({mesh:this,camera:t}))}}const bn=new Uint8Array(4);function _n(e){return(e&e-1)==0}let Qa=1;class j1{constructor(t,{image:r,target:n=t.TEXTURE_2D,type:i=t.UNSIGNED_BYTE,format:s=t.RGBA,internalFormat:a=s,wrapS:o=t.CLAMP_TO_EDGE,wrapT:h=t.CLAMP_TO_EDGE,generateMipmaps:l=!0,minFilter:p=l?t.NEAREST_MIPMAP_LINEAR:t.LINEAR,magFilter:c=t.LINEAR,premultiplyAlpha:d=!1,unpackAlignment:g=4,flipY:_=n==t.TEXTURE_2D,anisotropy:x=0,level:w=0,width:A,height:T=A}={}){this.gl=t,this.id=Qa++,this.image=r,this.target=n,this.type=i,this.format=s,this.internalFormat=a,this.minFilter=p,this.magFilter=c,this.wrapS=o,this.wrapT=h,this.generateMipmaps=l,this.premultiplyAlpha=d,this.unpackAlignment=g,this.flipY=_,this.anisotropy=Math.min(x,this.gl.renderer.parameters.maxAnisotropy),this.level=w,this.width=A,this.height=T,this.texture=this.gl.createTexture(),this.store={image:null},this.glState=this.gl.renderer.state,this.state={},this.state.minFilter=this.gl.NEAREST_MIPMAP_LINEAR,this.state.magFilter=this.gl.LINEAR,this.state.wrapS=this.gl.REPEAT,this.state.wrapT=this.gl.REPEAT,this.state.anisotropy=0}bind(){this.glState.textureUnits[this.glState.activeTextureUnit]!==this.id&&(this.gl.bindTexture(this.target,this.texture),this.glState.textureUnits[this.glState.activeTextureUnit]=this.id)}update(t=0){const r=!(this.image===this.store.image&&!this.needsUpdate);if((r||this.glState.textureUnits[t]!==this.id)&&(this.gl.renderer.activeTexture(t),this.bind()),!!r){if(this.needsUpdate=!1,this.flipY!==this.glState.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this.flipY),this.glState.flipY=this.flipY),this.premultiplyAlpha!==this.glState.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),this.glState.premultiplyAlpha=this.premultiplyAlpha),this.unpackAlignment!==this.glState.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this.unpackAlignment),this.glState.unpackAlignment=this.unpackAlignment),this.minFilter!==this.state.minFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.minFilter),this.state.minFilter=this.minFilter),this.magFilter!==this.state.magFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.magFilter),this.state.magFilter=this.magFilter),this.wrapS!==this.state.wrapS&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.wrapS),this.state.wrapS=this.wrapS),this.wrapT!==this.state.wrapT&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.wrapT),this.state.wrapT=this.wrapT),this.anisotropy&&this.anisotropy!==this.state.anisotropy&&(this.gl.texParameterf(this.target,this.gl.renderer.getExtension("EXT_texture_filter_anisotropic").TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropy),this.state.anisotropy=this.anisotropy),this.image){if(this.image.width&&(this.width=this.image.width,this.height=this.image.height),this.target===this.gl.TEXTURE_CUBE_MAP)for(let n=0;n<6;n++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+n,this.level,this.internalFormat,this.format,this.type,this.image[n]);else if(ArrayBuffer.isView(this.image))this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,this.image);else if(this.image.isCompressedTexture)for(let n=0;n<this.image.length;n++)this.gl.compressedTexImage2D(this.target,n,this.internalFormat,this.image[n].width,this.image[n].height,0,this.image[n].data);else this.gl.texImage2D(this.target,this.level,this.internalFormat,this.format,this.type,this.image);this.generateMipmaps&&(!this.gl.renderer.isWebgl2&&(!_n(this.image.width)||!_n(this.image.height))?(this.generateMipmaps=!1,this.wrapS=this.wrapT=this.gl.CLAMP_TO_EDGE,this.minFilter=this.gl.LINEAR):this.gl.generateMipmap(this.target)),this.onUpdate&&this.onUpdate()}else if(this.target===this.gl.TEXTURE_CUBE_MAP)for(let n=0;n<6;n++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,bn);else this.width?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,null):this.gl.texImage2D(this.target,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,bn);this.store.image=this.image}}}const wn={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#00ff00",blue:"#0000ff",fuchsia:"#ff00ff",cyan:"#00ffff",yellow:"#ffff00",orange:"#ff8000"};function xn(e){e.length===4&&(e=e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t||console.warn(`Unable to convert hex string ${e} to rgb values`),[parseInt(t[1],16)/255,parseInt(t[2],16)/255,parseInt(t[3],16)/255]}function Za(e){return e=parseInt(e),[(e>>16&255)/255,(e>>8&255)/255,(e&255)/255]}function En(e){return e===void 0?[0,0,0]:arguments.length===3?arguments:isNaN(e)?e[0]==="#"?xn(e):wn[e.toLowerCase()]?xn(wn[e.toLowerCase()]):(console.warn("Color format not recognised"),[0,0,0]):Za(e)}class W1 extends Array{constructor(t){return Array.isArray(t)?super(...t):super(...En(...arguments))}get r(){return this[0]}get g(){return this[1]}get b(){return this[2]}set r(t){this[0]=t}set g(t){this[1]=t}set b(t){this[2]=t}set(t){return Array.isArray(t)?this.copy(t):this.copy(En(...arguments))}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this}}function Ka(e,t){return e[0]=t[0],e[1]=t[1],e}function Ja(e,t,r){return e[0]=t,e[1]=r,e}function Mn(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function An(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function to(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function eo(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function nr(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function ro(e,t){var r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}function no(e,t){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function Sn(e){var t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function io(e){var t=e[0],r=e[1];return t*t+r*r}function so(e,t){return e[0]=-t[0],e[1]=-t[1],e}function ao(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function oo(e,t){var r=t[0],n=t[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e}function ho(e,t){return e[0]*t[0]+e[1]*t[1]}function Rn(e,t){return e[0]*t[1]-e[1]*t[0]}function fo(e,t,r,n){var i=t[0],s=t[1];return e[0]=i+n*(r[0]-i),e[1]=s+n*(r[1]-s),e}function lo(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}function co(e,t,r){let n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e}function uo(e,t){return e[0]===t[0]&&e[1]===t[1]}class Ot extends Array{constructor(t=0,r=t){super(t,r);return this}get x(){return this[0]}get y(){return this[1]}set x(t){this[0]=t}set y(t){this[1]=t}set(t,r=t){return t.length?this.copy(t):(Ja(this,t,r),this)}copy(t){return Ka(this,t),this}add(t,r){return r?Mn(this,t,r):Mn(this,this,t),this}sub(t,r){return r?An(this,t,r):An(this,this,t),this}multiply(t){return t.length?to(this,this,t):nr(this,this,t),this}divide(t){return t.length?eo(this,this,t):nr(this,this,1/t),this}inverse(t=this){return ao(this,t),this}len(){return Sn(this)}distance(t){return t?ro(this,t):Sn(this)}squaredLen(){return this.squaredDistance()}squaredDistance(t){return t?no(this,t):io(this)}negate(t=this){return so(this,t),this}cross(t,r){return r?Rn(t,r):Rn(this,t)}scale(t){return nr(this,this,t),this}normalize(){return oo(this,this),this}dot(t){return ho(this,t)}equals(t){return uo(this,t)}applyMatrix3(t){return lo(this,this,t),this}applyMatrix4(t){return co(this,this,t),this}lerp(t,r){return fo(this,this,t,r),this}clone(){return new Ot(this[0],this[1])}fromArray(t,r=0){return this[0]=t[r],this[1]=t[r+1],this}toArray(t=[],r=0){return t[r]=this[0],t[r+1]=this[1],t}}class St extends fn{constructor(t,{width:r=1,height:n=1,widthSegments:i=1,heightSegments:s=1,attributes:a={}}={}){const o=i,h=s,l=(o+1)*(h+1),p=o*h*6,c=new Float32Array(l*3),d=new Float32Array(l*3),g=new Float32Array(l*2),_=p>65536?new Uint32Array(p):new Uint16Array(p);St.buildPlane(c,d,g,_,r,n,0,o,h),Object.assign(a,{position:{size:3,data:c},normal:{size:3,data:d},uv:{size:2,data:g},index:{data:_}});super(t,a)}static buildPlane(t,r,n,i,s,a,o,h,l,p=0,c=1,d=2,g=1,_=-1,x=0,w=0){const A=x,T=s/h,I=a/l;for(let L=0;L<=l;L++){let E=L*I-a/2;for(let M=0;M<=h;M++,x++){let R=M*T-s/2;if(t[x*3+p]=R*g,t[x*3+c]=E*_,t[x*3+d]=o/2,r[x*3+p]=0,r[x*3+c]=0,r[x*3+d]=o>=0?1:-1,n[x*2]=M/h,n[x*2+1]=1-L/l,L===l||M===h)continue;let P=A+M+L*(h+1),F=A+M+(L+1)*(h+1),Y=A+M+(L+1)*(h+1)+1,V=A+M+L*(h+1)+1;i[w*6]=P,i[w*6+1]=F,i[w*6+2]=V,i[w*6+3]=F,i[w*6+4]=Y,i[w*6+5]=V,w++}}}}class G1 extends fn{constructor(t,{width:r=1,height:n=1,depth:i=1,widthSegments:s=1,heightSegments:a=1,depthSegments:o=1,attributes:h={}}={}){const l=s,p=a,c=o,d=(l+1)*(p+1)*2+(l+1)*(c+1)*2+(p+1)*(c+1)*2,g=(l*p*2+l*c*2+p*c*2)*6,_=new Float32Array(d*3),x=new Float32Array(d*3),w=new Float32Array(d*2),A=d>65536?new Uint32Array(g):new Uint16Array(g);let T=0,I=0;St.buildPlane(_,x,w,A,i,n,r,c,p,2,1,0,-1,-1,T,I),T+=(c+1)*(p+1),I+=c*p,St.buildPlane(_,x,w,A,i,n,-r,c,p,2,1,0,1,-1,T,I),T+=(c+1)*(p+1),I+=c*p,St.buildPlane(_,x,w,A,r,i,n,c,l,0,2,1,1,1,T,I),T+=(l+1)*(c+1),I+=l*c,St.buildPlane(_,x,w,A,r,i,-n,c,l,0,2,1,1,-1,T,I),T+=(l+1)*(c+1),I+=l*c,St.buildPlane(_,x,w,A,r,n,-i,l,p,0,1,2,-1,-1,T,I),T+=(l+1)*(p+1),I+=l*p,St.buildPlane(_,x,w,A,r,n,i,l,p,0,1,2,1,-1,T,I),Object.assign(h,{position:{size:3,data:_},normal:{size:3,data:x},uv:{size:2,data:w},index:{data:A}});super(t,h)}}const at={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,DOLLY_PAN:3},Rt=new Q,lt=new Ot,dt=new Ot;function H1(e,{element:t=document,enabled:r=!0,target:n=new Q,ease:i=.25,inertia:s=.85,enableRotate:a=!0,rotateSpeed:o=.1,autoRotate:h=!1,autoRotateSpeed:l=1,enableZoom:p=!0,zoomSpeed:c=1,zoomStyle:d="dolly",enablePan:g=!0,panSpeed:_=.1,minPolarAngle:x=0,maxPolarAngle:w=Math.PI,minAzimuthAngle:A=-1/0,maxAzimuthAngle:T=1/0,minDistance:I=0,maxDistance:L=1/0}={}){this.enabled=r,this.target=n,this.zoomStyle=d,i=i||1,s=s||0,this.minDistance=I,this.maxDistance=L;const E={radius:1,phi:0,theta:0},M={radius:1,phi:0,theta:0},R={radius:1,phi:0,theta:0},P=new Q,F=new Q;F.copy(e.position).sub(this.target),R.radius=M.radius=F.distance(),R.theta=M.theta=Math.atan2(F.x,F.z),R.phi=M.phi=Math.acos(Math.min(Math.max(F.y/M.radius,-1),1)),this.offset=F,this.update=()=>{h&&st(),M.radius*=E.radius,M.theta+=E.theta,M.phi+=E.phi,M.theta=Math.max(A,Math.min(T,M.theta)),M.phi=Math.max(x,Math.min(w,M.phi)),M.radius=Math.max(this.minDistance,Math.min(this.maxDistance,M.radius)),R.phi+=(M.phi-R.phi)*i,R.theta+=(M.theta-R.theta)*i,R.radius+=(M.radius-R.radius)*i,this.target.add(P);let z=R.radius*Math.sin(Math.max(1e-6,R.phi));F.x=z*Math.sin(R.theta),F.y=R.radius*Math.cos(R.phi),F.z=z*Math.cos(R.theta),e.position.copy(this.target).add(F),e.lookAt(this.target),E.theta*=s,E.phi*=s,P.multiply(s),E.radius=1},this.forcePosition=()=>{F.copy(e.position).sub(this.target),R.radius=M.radius=F.distance(),R.theta=M.theta=Math.atan2(F.x,F.z),R.phi=M.phi=Math.acos(Math.min(Math.max(F.y/M.radius,-1),1)),e.lookAt(this.target)};const Y=new Ot,V=new Ot,$=new Ot;let k=at.NONE;this.mouseButtons={ORBIT:0,ZOOM:1,PAN:2};function B(){return Math.pow(.95,c)}function j(z,X){Rt.set(X[0],X[1],X[2]),Rt.multiply(-z),P.add(Rt)}function it(z,X){Rt.set(X[4],X[5],X[6]),Rt.multiply(z),P.add(Rt)}const H=(z,X)=>{let rt=t===document?document.body:t;Rt.copy(e.position).sub(this.target);let vt=Rt.distance();vt*=Math.tan((e.fov||45)/2*Math.PI/180),j(2*z*vt/rt.clientHeight,e.matrix),it(2*X*vt/rt.clientHeight,e.matrix)},K=z=>{this.zoomStyle==="dolly"?E.radius/=z:(e.fov/=z,e.type==="orthographic"?e.orthographic():e.perspective())};function st(){const z=2*Math.PI/60/60*l;E.theta-=z}function ht(z,X){lt.set(z,X),dt.sub(lt,Y).multiply(o);let rt=t===document?document.body:t;E.theta-=2*Math.PI*dt.x/rt.clientHeight,E.phi-=2*Math.PI*dt.y/rt.clientHeight,Y.copy(lt)}function J(z){lt.set(z.clientX,z.clientY),dt.sub(lt,$),dt.y>0?K(B()):dt.y<0&&K(1/B()),$.copy(lt)}function et(z,X){lt.set(z,X),dt.sub(lt,V).multiply(_),H(dt.x,dt.y),V.copy(lt)}function mt(z){if(p){let X=z.touches[0].pageX-z.touches[1].pageX,rt=z.touches[0].pageY-z.touches[1].pageY,vt=Math.sqrt(X*X+rt*rt);$.set(0,vt)}if(g){let X=.5*(z.touches[0].pageX+z.touches[1].pageX),rt=.5*(z.touches[0].pageY+z.touches[1].pageY);V.set(X,rt)}}function yt(z){if(p){let X=z.touches[0].pageX-z.touches[1].pageX,rt=z.touches[0].pageY-z.touches[1].pageY,vt=Math.sqrt(X*X+rt*rt);lt.set(0,vt),dt.set(0,Math.pow(lt.y/$.y,c)),K(dt.y),$.copy(lt)}if(g){let X=.5*(z.touches[0].pageX+z.touches[1].pageX),rt=.5*(z.touches[0].pageY+z.touches[1].pageY);et(X,rt)}}const pt=z=>{if(!!this.enabled){switch(z.button){case this.mouseButtons.ORBIT:if(a===!1)return;Y.set(z.clientX,z.clientY),k=at.ROTATE;break;case this.mouseButtons.ZOOM:if(p===!1)return;$.set(z.clientX,z.clientY),k=at.DOLLY;break;case this.mouseButtons.PAN:if(g===!1)return;V.set(z.clientX,z.clientY),k=at.PAN;break}k!==at.NONE&&(window.addEventListener("mousemove",ct,!1),window.addEventListener("mouseup",ot,!1))}},ct=z=>{if(!!this.enabled)switch(k){case at.ROTATE:if(a===!1)return;ht(z.clientX,z.clientY);break;case at.DOLLY:if(p===!1)return;J(z);break;case at.PAN:if(g===!1)return;et(z.clientX,z.clientY);break}},ot=()=>{window.removeEventListener("mousemove",ct,!1),window.removeEventListener("mouseup",ot,!1),k=at.NONE},wt=z=>{!this.enabled||!p||k!==at.NONE&&k!==at.ROTATE||(z.stopPropagation(),z.preventDefault(),z.deltaY<0?K(1/B()):z.deltaY>0&&K(B()))},Dt=z=>{if(!!this.enabled)switch(z.preventDefault(),z.touches.length){case 1:if(a===!1)return;Y.set(z.touches[0].pageX,z.touches[0].pageY),k=at.ROTATE;break;case 2:if(p===!1&&g===!1)return;mt(z),k=at.DOLLY_PAN;break;default:k=at.NONE}},Nt=z=>{if(!!this.enabled)switch(z.preventDefault(),z.stopPropagation(),z.touches.length){case 1:if(a===!1)return;ht(z.touches[0].pageX,z.touches[0].pageY);break;case 2:if(p===!1&&g===!1)return;yt(z);break;default:k=at.NONE}},Lt=()=>{!this.enabled||(k=at.NONE)},Ct=z=>{!this.enabled||z.preventDefault()};function kt(){t.addEventListener("contextmenu",Ct,!1),t.addEventListener("mousedown",pt,!1),t.addEventListener("wheel",wt,{passive:!1}),t.addEventListener("touchstart",Dt,{passive:!1}),t.addEventListener("touchend",Lt,!1),t.addEventListener("touchmove",Nt,{passive:!1})}this.remove=function(){t.removeEventListener("contextmenu",Ct),t.removeEventListener("mousedown",pt),t.removeEventListener("wheel",wt),t.removeEventListener("touchstart",Dt),t.removeEventListener("touchend",Lt),t.removeEventListener("touchmove",Nt),window.removeEventListener("mousemove",ct),window.removeEventListener("mouseup",ot)},kt()}/**
 * Convert a series of points to a monotone cubic spline
 * Algorithm based on https://github.com/mbostock/d3
 * https://github.com/yr/monotone-cubic-spline
 * @copyright Yr
 * @license MIT
 */var po=1e-6,Q1={points:function(t){var r=vo(t),n=t[1],i=t[0],s=[],a=r[1],o=r[0];s.push(i,[i[0]+o[0],i[1]+o[1],n[0]-a[0],n[1]-a[1],n[0],n[1]]);for(var h=2,l=r.length;h<l;h++){var p=t[h],c=r[h];s.push([p[0]-c[0],p[1]-c[1],p[0],p[1]])}return s},slice:function(t,r,n){var i=t.slice(r,n);if(r){if(i[1].length<6){var s=i[0].length;i[1]=[i[0][s-2]*2-i[0][s-4],i[0][s-1]*2-i[0][s-3]].concat(i[1])}i[0]=i[0].slice(-2)}return i},svgPath:function(t){for(var r="",n=0;n<t.length;n++){var i=t[n],s=i.length;n?s>4?(r+="C"+i[0]+", "+i[1],r+=", "+i[2]+", "+i[3],r+=", "+i[4]+", "+i[5]):(r+="S"+i[0]+", "+i[1],r+=", "+i[2]+", "+i[3]):r+="M"+i[s-2]+" "+i[s-1]}return r}};function vo(e){for(var t=go(e),r=e.length-1,n=[],i=void 0,s=void 0,a=void 0,o=void 0,h=0;h<r;h++)a=ir(e[h],e[h+1]),Math.abs(a)<po?t[h]=t[h+1]=0:(i=t[h]/a,s=t[h+1]/a,o=i*i+s*s,o>9&&(o=a*3/Math.sqrt(o),t[h]=o*i,t[h+1]=o*s));for(var l=0;l<=r;l++)o=(e[Math.min(r,l+1)][0]-e[Math.max(0,l-1)][0])/(6*(1+t[l]*t[l])),n.push([o||0,t[l]*o||0]);return n}function ir(e,t){return(t[1]-e[1])/(t[0]-e[0])}function go(e){for(var t=[],r=e[0],n=e[1],i=t[0]=ir(r,n),s=1,a=e.length-1;s<a;s++)r=n,n=e[s+1],t[s]=(i+(i=ir(r,n)))*.5;return t[s]=i,t}var mo=1e-6,Tn=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function Z1(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function K1(e,t,r,n){var i=n[0],s=n[1],a=n[2],o=Math.hypot(i,s,a),h,l,p,c,d,g,_,x,w,A,T,I,L,E,M,R,P,F,Y,V,$,k,B,j;return o<mo?null:(o=1/o,i*=o,s*=o,a*=o,h=Math.sin(r),l=Math.cos(r),p=1-l,c=t[0],d=t[1],g=t[2],_=t[3],x=t[4],w=t[5],A=t[6],T=t[7],I=t[8],L=t[9],E=t[10],M=t[11],R=i*i*p+l,P=s*i*p+a*h,F=a*i*p-s*h,Y=i*s*p-a*h,V=s*s*p+l,$=a*s*p+i*h,k=i*a*p+s*h,B=s*a*p-i*h,j=a*a*p+l,e[0]=c*R+x*P+I*F,e[1]=d*R+w*P+L*F,e[2]=g*R+A*P+E*F,e[3]=_*R+T*P+M*F,e[4]=c*Y+x*V+I*$,e[5]=d*Y+w*V+L*$,e[6]=g*Y+A*V+E*$,e[7]=_*Y+T*V+M*$,e[8]=c*k+x*B+I*j,e[9]=d*k+w*B+L*j,e[10]=g*k+A*B+E*j,e[11]=_*k+T*B+M*j,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function yo(){var e=new Tn(3);return Tn!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function J1(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function th(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function bo(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function eh(e,t){var r=t[0],n=t[1],i=t[2],s=r*r+n*n+i*i;return s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e}function rh(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function nh(e,t,r){var n=t[0],i=t[1],s=t[2],a=r[0],o=r[1],h=r[2];return e[0]=i*h-s*o,e[1]=s*a-n*h,e[2]=n*o-i*a,e}function ih(e,t,r){var n=t[0],i=t[1],s=t[2],a=r[3]*n+r[7]*i+r[11]*s+r[15];return a=a||1,e[0]=(r[0]*n+r[4]*i+r[8]*s+r[12])/a,e[1]=(r[1]*n+r[5]*i+r[9]*s+r[13])/a,e[2]=(r[2]*n+r[6]*i+r[10]*s+r[14])/a,e}var sh=bo;(function(){var e=yo();return function(t,r,n,i,s,a){var o,h;for(r||(r=3),n||(n=0),i?h=Math.min(i*r+n,t.length):h=t.length,o=n;o<h;o+=r)e[0]=t[o],e[1]=t[o+1],e[2]=t[o+2],s(e,e,a),t[o]=e[0],t[o+1]=e[1],t[o+2]=e[2];return t}})();var _o={},de={},Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});function wo(e){var t=new Uint32Array(1);return t[0]=e[0]*1664525+1013904223,t}Gt.default=wo;Object.defineProperty(de,"__esModule",{value:!0});de.makeNoise2D=void 0;var pe=Gt,xo=1/47,sr=(Math.sqrt(2+1)-1)/2,Eo=(1/Math.sqrt(2+1)-1)/2;function On(e,t,r){return{dx:-t-e*sr,dy:-r-e*sr,xsb:t,ysb:r}}function Mo(e){for(var t=[],r=0;r<Ht.length;r+=4){for(var n=Ao[Ht[r]],i=null,s=null,a=0;a<n.length;a+=3)s=On(n[a],n[a+1],n[a+2]),i===null?t[r/4]=s:i.next=s,i=s;s.next=On(Ht[r+1],Ht[r+2],Ht[r+3])}for(var o=[],r=0;r<ar.length;r+=2)o[ar[r]]=t[ar[r+1]];for(var h=new Uint8Array(256),l=new Uint8Array(256),p=new Uint8Array(256),r=0;r<256;r++)p[r]=r;var c=new Uint32Array(1);c[0]=e,c=pe.default(pe.default(pe.default(c)));for(var r=255;r>=0;r--){c=pe.default(c);var d=new Uint32Array(1);d[0]=(c[0]+31)%(r+1),d[0]<0&&(d[0]+=r+1),h[r]=p[d[0]],l[r]=h[r]&14,p[d[0]]=p[r]}return function(g,_){for(var x=(g+_)*Eo,w=g+x,A=_+x,T=Math.floor(w),I=Math.floor(A),L=(T+I)*sr,E=g-(T+L),M=_-(I+L),R=w-T,P=A-I,F=R+P,Y=R-P+1|F<<1|F+P<<2|F+R<<4,V=0,$=o[Y];$!==void 0;$=$.next){var k=E+$.dx,B=M+$.dy,j=2-k*k-B*B;if(j>0){var it=T+$.xsb,H=I+$.ysb,K=h[it&255],st=l[K+H&255],ht=In[st]*k+In[st+1]*B;V+=j*j*j*j*ht}}return V*xo}}de.makeNoise2D=Mo;var Ao=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],In=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],ar=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],Ht=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0],ve={};Object.defineProperty(ve,"__esModule",{value:!0});ve.makeNoise3D=void 0;var ge=Gt,So=1/103,me=(Math.sqrt(3+1)-1)/3,Ro=(1/Math.sqrt(3+1)-1)/3;function or(e,t,r,n){return{dx:-t-e*me,dy:-r-e*me,dz:-n-e*me,xsb:t,ysb:r,zsb:n}}function To(e){for(var t=[],r=0;r<gt.length;r+=9){for(var n=Oo[gt[r]],i=null,s=null,a=0;a<n.length;a+=4)s=or(n[a],n[a+1],n[a+2],n[a+3]),i===null?t[r/9]=s:i.next=s,i=s;s.next=or(gt[r+1],gt[r+2],gt[r+3],gt[r+4]),s.next.next=or(gt[r+5],gt[r+6],gt[r+7],gt[r+8])}for(var o=[],r=0;r<fr.length;r+=2)o[fr[r]]=t[fr[r+1]];for(var h=new Uint8Array(256),l=new Uint8Array(256),p=new Uint8Array(256),r=0;r<256;r++)p[r]=r;var c=new Uint32Array(1);c[0]=e,c=ge.default(ge.default(ge.default(c)));for(var r=255;r>=0;r--){c=ge.default(c);var d=new Uint32Array(1);d[0]=(c[0]+31)%(r+1),d[0]<0&&(d[0]+=r+1),h[r]=p[d[0]],l[r]=h[r]%24*3,p[d[0]]=p[r]}return function(g,_,x){for(var w=(g+_+x)*Ro,A=g+w,T=_+w,I=x+w,L=Math.floor(A),E=Math.floor(T),M=Math.floor(I),R=(L+E+M)*me,P=g-(L+R),F=_-(E+R),Y=x-(M+R),V=A-L,$=T-E,k=I-M,B=V+$+k,j=$-k+1|V-$+1<<1|V-k+1<<2|B<<3|B+k<<5|B+$<<7|B+V<<9,it=0,H=o[j];H!==void 0;H=H.next){var K=P+H.dx,st=F+H.dy,ht=Y+H.dz,J=2-K*K-st*st-ht*ht;if(J>0){var et=L+H.xsb,mt=E+H.ysb,yt=M+H.zsb,pt=h[et&255],ct=h[pt+mt&255],ot=l[ct+yt&255],wt=hr[ot]*K+hr[ot+1]*st+hr[ot+2]*ht;it+=J*J*J*J*wt}}return it*So}}ve.makeNoise3D=To;var Oo=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],hr=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],fr=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],gt=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0],ye={};Object.defineProperty(ye,"__esModule",{value:!0});ye.makeNoise4D=void 0;var be=Gt,Io=1/30,Qt=(Math.sqrt(4+1)-1)/4,Do=(1/Math.sqrt(4+1)-1)/4;function _e(e,t,r,n,i){return{dx:-t-e*Qt,dy:-r-e*Qt,dz:-n-e*Qt,dw:-i-e*Qt,xsb:t,ysb:r,zsb:n,wsb:i}}function No(e){for(var t=[],r=0;r<nt.length;r+=16){for(var n=Lo[nt[r]],i=null,s=null,a=0;a<n.length;a+=5)s=_e(n[a],n[a+1],n[a+2],n[a+3],n[a+4]),i===null?t[r/16]=s:i.next=s,i=s;s.next=_e(nt[r+1],nt[r+2],nt[r+3],nt[r+4],nt[r+5]),s.next.next=_e(nt[r+6],nt[r+7],nt[r+8],nt[r+9],nt[r+10]),s.next.next.next=_e(nt[r+11],nt[r+12],nt[r+13],nt[r+14],nt[r+15])}for(var o=[],r=0;r<lr.length;r+=2)o[lr[r]]=t[lr[r+1]];for(var h=new Uint8Array(256),l=new Uint8Array(256),p=new Uint8Array(256),r=0;r<256;r++)p[r]=r;var c=new Uint32Array(1);c[0]=e,c=be.default(be.default(be.default(c)));for(var r=255;r>=0;r--){c=be.default(c);var d=new Uint32Array(1);d[0]=(c[0]+31)%(r+1),d[0]<0&&(d[0]+=r+1),h[r]=p[d[0]],l[r]=h[r]&252,p[d[0]]=p[r]}return function(g,_,x,w){for(var A=(g+_+x+w)*Do,T=g+A,I=_+A,L=x+A,E=w+A,M=Math.floor(T),R=Math.floor(I),P=Math.floor(L),F=Math.floor(E),Y=(M+R+P+F)*Qt,V=g-(M+Y),$=_-(R+Y),k=x-(P+Y),B=w-(F+Y),j=T-M,it=I-R,H=L-P,K=E-F,st=j+it+H+K,ht=H-K+1|it-H+1<<1|it-K+1<<2|j-it+1<<3|j-H+1<<4|j-K+1<<5|st<<6|st+K<<8|st+H<<11|st+it<<14|st+j<<17,J=0,et=o[ht];et!==void 0;et=et.next){var mt=V+et.dx,yt=$+et.dy,pt=k+et.dz,ct=B+et.dw,ot=2-mt*mt-yt*yt-pt*pt-ct*ct;if(ot>0){var wt=M+et.xsb,Dt=R+et.ysb,Nt=P+et.zsb,Lt=F+et.wsb,Ct=h[wt&255],kt=h[Ct+Dt&255],z=h[kt+Nt&255],X=l[z+Lt&255],rt=we[X]*mt+we[X+1]*yt+we[X+2]*pt+we[X+3]*ct;J+=ot*ot*ot*ot*rt}}return J*Io}}ye.makeNoise4D=No;var Lo=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],we=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],lr=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],nt=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1];(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.makeNoise4D=e.makeNoise3D=e.makeNoise2D=void 0;var t=de;Object.defineProperty(e,"makeNoise2D",{enumerable:!0,get:function(){return t.makeNoise2D}});var r=ve;Object.defineProperty(e,"makeNoise3D",{enumerable:!0,get:function(){return r.makeNoise3D}});var n=ye;Object.defineProperty(e,"makeNoise4D",{enumerable:!0,get:function(){return n.makeNoise4D}})})(_o);var Dn={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(r){e.exports=r()})(function(){return function r(n,i,s){function a(l,p){if(!i[l]){if(!n[l]){var c=typeof fe=="function"&&fe;if(!p&&c)return c(l,!0);if(o)return o(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var g=i[l]={exports:{}};n[l][0].call(g.exports,function(_){var x=n[l][1][_];return a(x||_)},g,g.exports,r,n,i,s)}return i[l].exports}for(var o=typeof fe=="function"&&fe,h=0;h<s.length;h++)a(s[h]);return a}({1:[function(r,n,i){(function(s){var a=s.MutationObserver||s.WebKitMutationObserver,o;if(a){var h=0,l=new a(_),p=s.document.createTextNode("");l.observe(p,{characterData:!0}),o=function(){p.data=h=++h%2}}else if(!s.setImmediate&&typeof s.MessageChannel!="undefined"){var c=new s.MessageChannel;c.port1.onmessage=_,o=function(){c.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?o=function(){var w=s.document.createElement("script");w.onreadystatechange=function(){_(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},s.document.documentElement.appendChild(w)}:o=function(){setTimeout(_,0)};var d,g=[];function _(){d=!0;for(var w,A,T=g.length;T;){for(A=g,g=[],w=-1;++w<T;)A[w]();T=g.length}d=!1}n.exports=x;function x(w){g.push(w)===1&&!d&&o()}}).call(this,typeof _t!="undefined"?_t:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],2:[function(r,n,i){var s=r(1);function a(){}var o={},h=["REJECTED"],l=["FULFILLED"],p=["PENDING"];n.exports=c;function c(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,E!==a&&x(this,E)}c.prototype.catch=function(E){return this.then(null,E)},c.prototype.then=function(E,M){if(typeof E!="function"&&this.state===l||typeof M!="function"&&this.state===h)return this;var R=new this.constructor(a);if(this.state!==p){var P=this.state===l?E:M;g(R,P,this.outcome)}else this.queue.push(new d(R,E,M));return R};function d(E,M,R){this.promise=E,typeof M=="function"&&(this.onFulfilled=M,this.callFulfilled=this.otherCallFulfilled),typeof R=="function"&&(this.onRejected=R,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){o.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){g(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){o.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){g(this.promise,this.onRejected,E)};function g(E,M,R){s(function(){var P;try{P=M(R)}catch(F){return o.reject(E,F)}P===E?o.reject(E,new TypeError("Cannot resolve promise with itself")):o.resolve(E,P)})}o.resolve=function(E,M){var R=w(_,M);if(R.status==="error")return o.reject(E,R.value);var P=R.value;if(P)x(E,P);else{E.state=l,E.outcome=M;for(var F=-1,Y=E.queue.length;++F<Y;)E.queue[F].callFulfilled(M)}return E},o.reject=function(E,M){E.state=h,E.outcome=M;for(var R=-1,P=E.queue.length;++R<P;)E.queue[R].callRejected(M);return E};function _(E){var M=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof M=="function")return function(){M.apply(E,arguments)}}function x(E,M){var R=!1;function P($){R||(R=!0,o.reject(E,$))}function F($){R||(R=!0,o.resolve(E,$))}function Y(){M(F,P)}var V=w(Y);V.status==="error"&&P(V.value)}function w(E,M){var R={};try{R.value=E(M),R.status="success"}catch(P){R.status="error",R.value=P}return R}c.resolve=A;function A(E){return E instanceof this?E:o.resolve(new this(a),E)}c.reject=T;function T(E){var M=new this(a);return o.reject(M,E)}c.all=I;function I(E){var M=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=E.length,P=!1;if(!R)return this.resolve([]);for(var F=new Array(R),Y=0,V=-1,$=new this(a);++V<R;)k(E[V],V);return $;function k(B,j){M.resolve(B).then(it,function(H){P||(P=!0,o.reject($,H))});function it(H){F[j]=H,++Y===R&&!P&&(P=!0,o.resolve($,F))}}}c.race=L;function L(E){var M=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=E.length,P=!1;if(!R)return this.resolve([]);for(var F=-1,Y=new this(a);++F<R;)V(E[F]);return Y;function V($){M.resolve($).then(function(k){P||(P=!0,o.resolve(Y,k))},function(k){P||(P=!0,o.reject(Y,k))})}}},{"1":1}],3:[function(r,n,i){(function(s){typeof s.Promise!="function"&&(s.Promise=r(2))}).call(this,typeof _t!="undefined"?_t:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"2":2}],4:[function(r,n,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f};function a(f,v){if(!(f instanceof v))throw new TypeError("Cannot call a class as a function")}function o(){try{if(typeof indexedDB!="undefined")return indexedDB;if(typeof webkitIndexedDB!="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!="undefined")return mozIndexedDB;if(typeof OIndexedDB!="undefined")return OIndexedDB;if(typeof msIndexedDB!="undefined")return msIndexedDB}catch{return}}var h=o();function l(){try{if(!h||!h.open)return!1;var f=typeof openDatabase!="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),v=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!f||v)&&typeof indexedDB!="undefined"&&typeof IDBKeyRange!="undefined"}catch{return!1}}function p(f,v){f=f||[],v=v||{};try{return new Blob(f,v)}catch(m){if(m.name!=="TypeError")throw m;for(var u=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,y=new u,b=0;b<f.length;b+=1)y.append(f[b]);return y.getBlob(v.type)}}typeof Promise=="undefined"&&r(3);var c=Promise;function d(f,v){v&&f.then(function(u){v(null,u)},function(u){v(u)})}function g(f,v,u){typeof v=="function"&&f.then(v),typeof u=="function"&&f.catch(u)}function _(f){return typeof f!="string"&&(console.warn(f+" used as a key, but it is not a string."),f=String(f)),f}function x(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var w="local-forage-detect-blob-support",A=void 0,T={},I=Object.prototype.toString,L="readonly",E="readwrite";function M(f){for(var v=f.length,u=new ArrayBuffer(v),y=new Uint8Array(u),b=0;b<v;b++)y[b]=f.charCodeAt(b);return u}function R(f){return new c(function(v){var u=f.transaction(w,E),y=p([""]);u.objectStore(w).put(y,"key"),u.onabort=function(b){b.preventDefault(),b.stopPropagation(),v(!1)},u.oncomplete=function(){var b=navigator.userAgent.match(/Chrome\/(\d+)/),m=navigator.userAgent.match(/Edge\//);v(m||!b||parseInt(b[1],10)>=43)}}).catch(function(){return!1})}function P(f){return typeof A=="boolean"?c.resolve(A):R(f).then(function(v){return A=v,A})}function F(f){var v=T[f.name],u={};u.promise=new c(function(y,b){u.resolve=y,u.reject=b}),v.deferredOperations.push(u),v.dbReady?v.dbReady=v.dbReady.then(function(){return u.promise}):v.dbReady=u.promise}function Y(f){var v=T[f.name],u=v.deferredOperations.pop();if(u)return u.resolve(),u.promise}function V(f,v){var u=T[f.name],y=u.deferredOperations.pop();if(y)return y.reject(v),y.promise}function $(f,v){return new c(function(u,y){if(T[f.name]=T[f.name]||et(),f.db)if(v)F(f),f.db.close();else return u(f.db);var b=[f.name];v&&b.push(f.version);var m=h.open.apply(h,b);v&&(m.onupgradeneeded=function(S){var O=m.result;try{O.createObjectStore(f.storeName),S.oldVersion<=1&&O.createObjectStore(w)}catch(D){if(D.name==="ConstraintError")console.warn('The database "'+f.name+'" has been upgraded from version '+S.oldVersion+" to version "+S.newVersion+', but the storage "'+f.storeName+'" already exists.');else throw D}}),m.onerror=function(S){S.preventDefault(),y(m.error)},m.onsuccess=function(){var S=m.result;S.onversionchange=function(O){O.target.close()},u(S),Y(f)}})}function k(f){return $(f,!1)}function B(f){return $(f,!0)}function j(f,v){if(!f.db)return!0;var u=!f.db.objectStoreNames.contains(f.storeName),y=f.version<f.db.version,b=f.version>f.db.version;if(y&&(f.version!==v&&console.warn('The database "'+f.name+`" can't be downgraded from version `+f.db.version+" to version "+f.version+"."),f.version=f.db.version),b||u){if(u){var m=f.db.version+1;m>f.version&&(f.version=m)}return!0}return!1}function it(f){return new c(function(v,u){var y=new FileReader;y.onerror=u,y.onloadend=function(b){var m=btoa(b.target.result||"");v({__local_forage_encoded_blob:!0,data:m,type:f.type})},y.readAsBinaryString(f)})}function H(f){var v=M(atob(f.data));return p([v],{type:f.type})}function K(f){return f&&f.__local_forage_encoded_blob}function st(f){var v=this,u=v._initReady().then(function(){var y=T[v._dbInfo.name];if(y&&y.dbReady)return y.dbReady});return g(u,f,f),u}function ht(f){F(f);for(var v=T[f.name],u=v.forages,y=0;y<u.length;y++){var b=u[y];b._dbInfo.db&&(b._dbInfo.db.close(),b._dbInfo.db=null)}return f.db=null,k(f).then(function(m){return f.db=m,j(f)?B(f):m}).then(function(m){f.db=v.db=m;for(var S=0;S<u.length;S++)u[S]._dbInfo.db=m}).catch(function(m){throw V(f,m),m})}function J(f,v,u,y){y===void 0&&(y=1);try{var b=f.db.transaction(f.storeName,v);u(null,b)}catch(m){if(y>0&&(!f.db||m.name==="InvalidStateError"||m.name==="NotFoundError"))return c.resolve().then(function(){if(!f.db||m.name==="NotFoundError"&&!f.db.objectStoreNames.contains(f.storeName)&&f.version<=f.db.version)return f.db&&(f.version=f.db.version+1),B(f)}).then(function(){return ht(f).then(function(){J(f,v,u,y-1)})}).catch(u);u(m)}}function et(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function mt(f){var v=this,u={db:null};if(f)for(var y in f)u[y]=f[y];var b=T[u.name];b||(b=et(),T[u.name]=b),b.forages.push(v),v._initReady||(v._initReady=v.ready,v.ready=st);var m=[];function S(){return c.resolve()}for(var O=0;O<b.forages.length;O++){var D=b.forages[O];D!==v&&m.push(D._initReady().catch(S))}var N=b.forages.slice(0);return c.all(m).then(function(){return u.db=b.db,k(u)}).then(function(C){return u.db=C,j(u,v._defaultConfig.version)?B(u):C}).then(function(C){u.db=b.db=C,v._dbInfo=u;for(var U=0;U<N.length;U++){var q=N[U];q!==v&&(q._dbInfo.db=u.db,q._dbInfo.version=u.version)}})}function yt(f,v){var u=this;f=_(f);var y=new c(function(b,m){u.ready().then(function(){J(u._dbInfo,L,function(S,O){if(S)return m(S);try{var D=O.objectStore(u._dbInfo.storeName),N=D.get(f);N.onsuccess=function(){var C=N.result;C===void 0&&(C=null),K(C)&&(C=H(C)),b(C)},N.onerror=function(){m(N.error)}}catch(C){m(C)}})}).catch(m)});return d(y,v),y}function pt(f,v){var u=this,y=new c(function(b,m){u.ready().then(function(){J(u._dbInfo,L,function(S,O){if(S)return m(S);try{var D=O.objectStore(u._dbInfo.storeName),N=D.openCursor(),C=1;N.onsuccess=function(){var U=N.result;if(U){var q=U.value;K(q)&&(q=H(q));var W=f(q,U.key,C++);W!==void 0?b(W):U.continue()}else b()},N.onerror=function(){m(N.error)}}catch(U){m(U)}})}).catch(m)});return d(y,v),y}function ct(f,v,u){var y=this;f=_(f);var b=new c(function(m,S){var O;y.ready().then(function(){return O=y._dbInfo,I.call(v)==="[object Blob]"?P(O.db).then(function(D){return D?v:it(v)}):v}).then(function(D){J(y._dbInfo,E,function(N,C){if(N)return S(N);try{var U=C.objectStore(y._dbInfo.storeName);D===null&&(D=void 0);var q=U.put(D,f);C.oncomplete=function(){D===void 0&&(D=null),m(D)},C.onabort=C.onerror=function(){var W=q.error?q.error:q.transaction.error;S(W)}}catch(W){S(W)}})}).catch(S)});return d(b,u),b}function ot(f,v){var u=this;f=_(f);var y=new c(function(b,m){u.ready().then(function(){J(u._dbInfo,E,function(S,O){if(S)return m(S);try{var D=O.objectStore(u._dbInfo.storeName),N=D.delete(f);O.oncomplete=function(){b()},O.onerror=function(){m(N.error)},O.onabort=function(){var C=N.error?N.error:N.transaction.error;m(C)}}catch(C){m(C)}})}).catch(m)});return d(y,v),y}function wt(f){var v=this,u=new c(function(y,b){v.ready().then(function(){J(v._dbInfo,E,function(m,S){if(m)return b(m);try{var O=S.objectStore(v._dbInfo.storeName),D=O.clear();S.oncomplete=function(){y()},S.onabort=S.onerror=function(){var N=D.error?D.error:D.transaction.error;b(N)}}catch(N){b(N)}})}).catch(b)});return d(u,f),u}function Dt(f){var v=this,u=new c(function(y,b){v.ready().then(function(){J(v._dbInfo,L,function(m,S){if(m)return b(m);try{var O=S.objectStore(v._dbInfo.storeName),D=O.count();D.onsuccess=function(){y(D.result)},D.onerror=function(){b(D.error)}}catch(N){b(N)}})}).catch(b)});return d(u,f),u}function Nt(f,v){var u=this,y=new c(function(b,m){if(f<0){b(null);return}u.ready().then(function(){J(u._dbInfo,L,function(S,O){if(S)return m(S);try{var D=O.objectStore(u._dbInfo.storeName),N=!1,C=D.openKeyCursor();C.onsuccess=function(){var U=C.result;if(!U){b(null);return}f===0||N?b(U.key):(N=!0,U.advance(f))},C.onerror=function(){m(C.error)}}catch(U){m(U)}})}).catch(m)});return d(y,v),y}function Lt(f){var v=this,u=new c(function(y,b){v.ready().then(function(){J(v._dbInfo,L,function(m,S){if(m)return b(m);try{var O=S.objectStore(v._dbInfo.storeName),D=O.openKeyCursor(),N=[];D.onsuccess=function(){var C=D.result;if(!C){y(N);return}N.push(C.key),C.continue()},D.onerror=function(){b(D.error)}}catch(C){b(C)}})}).catch(b)});return d(u,f),u}function Ct(f,v){v=x.apply(this,arguments);var u=this.config();f=typeof f!="function"&&f||{},f.name||(f.name=f.name||u.name,f.storeName=f.storeName||u.storeName);var y=this,b;if(!f.name)b=c.reject("Invalid arguments");else{var m=f.name===u.name&&y._dbInfo.db,S=m?c.resolve(y._dbInfo.db):k(f).then(function(O){var D=T[f.name],N=D.forages;D.db=O;for(var C=0;C<N.length;C++)N[C]._dbInfo.db=O;return O});f.storeName?b=S.then(function(O){if(!!O.objectStoreNames.contains(f.storeName)){var D=O.version+1;F(f);var N=T[f.name],C=N.forages;O.close();for(var U=0;U<C.length;U++){var q=C[U];q._dbInfo.db=null,q._dbInfo.version=D}var W=new c(function(G,tt){var Z=h.open(f.name,D);Z.onerror=function(ft){var Vt=Z.result;Vt.close(),tt(ft)},Z.onupgradeneeded=function(){var ft=Z.result;ft.deleteObjectStore(f.storeName)},Z.onsuccess=function(){var ft=Z.result;ft.close(),G(ft)}});return W.then(function(G){N.db=G;for(var tt=0;tt<C.length;tt++){var Z=C[tt];Z._dbInfo.db=G,Y(Z._dbInfo)}}).catch(function(G){throw(V(f,G)||c.resolve()).catch(function(){}),G})}}):b=S.then(function(O){F(f);var D=T[f.name],N=D.forages;O.close();for(var C=0;C<N.length;C++){var U=N[C];U._dbInfo.db=null}var q=new c(function(W,G){var tt=h.deleteDatabase(f.name);tt.onerror=function(){var Z=tt.result;Z&&Z.close(),G(tt.error)},tt.onblocked=function(){console.warn('dropInstance blocked for database "'+f.name+'" until all open connections are closed')},tt.onsuccess=function(){var Z=tt.result;Z&&Z.close(),W(Z)}});return q.then(function(W){D.db=W;for(var G=0;G<N.length;G++){var tt=N[G];Y(tt._dbInfo)}}).catch(function(W){throw(V(f,W)||c.resolve()).catch(function(){}),W})})}return d(b,v),b}var kt={_driver:"asyncStorage",_initStorage:mt,_support:l(),iterate:pt,getItem:yt,setItem:ct,removeItem:ot,clear:wt,length:Dt,key:Nt,keys:Lt,dropInstance:Ct};function z(){return typeof openDatabase=="function"}var X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rt="~~local_forage_type~",vt=/^~~local_forage_type~([^~]+)~/,Zt="__lfsc__:",Se=Zt.length,Re="arbf",Te="blob",vr="si08",gr="ui08",mr="uic8",yr="si16",br="si32",_r="ur16",wr="ui32",xr="fl32",Er="fl64",Mr=Se+Re.length,Ar=Object.prototype.toString;function Sr(f){var v=f.length*.75,u=f.length,y,b=0,m,S,O,D;f[f.length-1]==="="&&(v--,f[f.length-2]==="="&&v--);var N=new ArrayBuffer(v),C=new Uint8Array(N);for(y=0;y<u;y+=4)m=X.indexOf(f[y]),S=X.indexOf(f[y+1]),O=X.indexOf(f[y+2]),D=X.indexOf(f[y+3]),C[b++]=m<<2|S>>4,C[b++]=(S&15)<<4|O>>2,C[b++]=(O&3)<<6|D&63;return N}function Oe(f){var v=new Uint8Array(f),u="",y;for(y=0;y<v.length;y+=3)u+=X[v[y]>>2],u+=X[(v[y]&3)<<4|v[y+1]>>4],u+=X[(v[y+1]&15)<<2|v[y+2]>>6],u+=X[v[y+2]&63];return v.length%3==2?u=u.substring(0,u.length-1)+"=":v.length%3==1&&(u=u.substring(0,u.length-2)+"=="),u}function Xn(f,v){var u="";if(f&&(u=Ar.call(f)),f&&(u==="[object ArrayBuffer]"||f.buffer&&Ar.call(f.buffer)==="[object ArrayBuffer]")){var y,b=Zt;f instanceof ArrayBuffer?(y=f,b+=Re):(y=f.buffer,u==="[object Int8Array]"?b+=vr:u==="[object Uint8Array]"?b+=gr:u==="[object Uint8ClampedArray]"?b+=mr:u==="[object Int16Array]"?b+=yr:u==="[object Uint16Array]"?b+=_r:u==="[object Int32Array]"?b+=br:u==="[object Uint32Array]"?b+=wr:u==="[object Float32Array]"?b+=xr:u==="[object Float64Array]"?b+=Er:v(new Error("Failed to get type for BinaryArray"))),v(b+Oe(y))}else if(u==="[object Blob]"){var m=new FileReader;m.onload=function(){var S=rt+f.type+"~"+Oe(this.result);v(Zt+Te+S)},m.readAsArrayBuffer(f)}else try{v(JSON.stringify(f))}catch(S){console.error("Couldn't convert value into a JSON string: ",f),v(null,S)}}function jn(f){if(f.substring(0,Se)!==Zt)return JSON.parse(f);var v=f.substring(Mr),u=f.substring(Se,Mr),y;if(u===Te&&vt.test(v)){var b=v.match(vt);y=b[1],v=v.substring(b[0].length)}var m=Sr(v);switch(u){case Re:return m;case Te:return p([m],{type:y});case vr:return new Int8Array(m);case gr:return new Uint8Array(m);case mr:return new Uint8ClampedArray(m);case yr:return new Int16Array(m);case _r:return new Uint16Array(m);case br:return new Int32Array(m);case wr:return new Uint32Array(m);case xr:return new Float32Array(m);case Er:return new Float64Array(m);default:throw new Error("Unkown type: "+u)}}var Ie={serialize:Xn,deserialize:jn,stringToBuffer:Sr,bufferToString:Oe};function Rr(f,v,u,y){f.executeSql("CREATE TABLE IF NOT EXISTS "+v.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],u,y)}function Wn(f){var v=this,u={db:null};if(f)for(var y in f)u[y]=typeof f[y]!="string"?f[y].toString():f[y];var b=new c(function(m,S){try{u.db=openDatabase(u.name,String(u.version),u.description,u.size)}catch(O){return S(O)}u.db.transaction(function(O){Rr(O,u,function(){v._dbInfo=u,m()},function(D,N){S(N)})},S)});return u.serializer=Ie,b}function xt(f,v,u,y,b,m){f.executeSql(u,y,b,function(S,O){O.code===O.SYNTAX_ERR?S.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[v.storeName],function(D,N){N.rows.length?m(D,O):Rr(D,v,function(){D.executeSql(u,y,b,m)},m)},m):m(S,O)},m)}function Gn(f,v){var u=this;f=_(f);var y=new c(function(b,m){u.ready().then(function(){var S=u._dbInfo;S.db.transaction(function(O){xt(O,S,"SELECT * FROM "+S.storeName+" WHERE key = ? LIMIT 1",[f],function(D,N){var C=N.rows.length?N.rows.item(0).value:null;C&&(C=S.serializer.deserialize(C)),b(C)},function(D,N){m(N)})})}).catch(m)});return d(y,v),y}function Hn(f,v){var u=this,y=new c(function(b,m){u.ready().then(function(){var S=u._dbInfo;S.db.transaction(function(O){xt(O,S,"SELECT * FROM "+S.storeName,[],function(D,N){for(var C=N.rows,U=C.length,q=0;q<U;q++){var W=C.item(q),G=W.value;if(G&&(G=S.serializer.deserialize(G)),G=f(G,W.key,q+1),G!==void 0){b(G);return}}b()},function(D,N){m(N)})})}).catch(m)});return d(y,v),y}function Tr(f,v,u,y){var b=this;f=_(f);var m=new c(function(S,O){b.ready().then(function(){v===void 0&&(v=null);var D=v,N=b._dbInfo;N.serializer.serialize(v,function(C,U){U?O(U):N.db.transaction(function(q){xt(q,N,"INSERT OR REPLACE INTO "+N.storeName+" (key, value) VALUES (?, ?)",[f,C],function(){S(D)},function(W,G){O(G)})},function(q){if(q.code===q.QUOTA_ERR){if(y>0){S(Tr.apply(b,[f,D,u,y-1]));return}O(q)}})})}).catch(O)});return d(m,u),m}function Qn(f,v,u){return Tr.apply(this,[f,v,u,1])}function Zn(f,v){var u=this;f=_(f);var y=new c(function(b,m){u.ready().then(function(){var S=u._dbInfo;S.db.transaction(function(O){xt(O,S,"DELETE FROM "+S.storeName+" WHERE key = ?",[f],function(){b()},function(D,N){m(N)})})}).catch(m)});return d(y,v),y}function Kn(f){var v=this,u=new c(function(y,b){v.ready().then(function(){var m=v._dbInfo;m.db.transaction(function(S){xt(S,m,"DELETE FROM "+m.storeName,[],function(){y()},function(O,D){b(D)})})}).catch(b)});return d(u,f),u}function Jn(f){var v=this,u=new c(function(y,b){v.ready().then(function(){var m=v._dbInfo;m.db.transaction(function(S){xt(S,m,"SELECT COUNT(key) as c FROM "+m.storeName,[],function(O,D){var N=D.rows.item(0).c;y(N)},function(O,D){b(D)})})}).catch(b)});return d(u,f),u}function ti(f,v){var u=this,y=new c(function(b,m){u.ready().then(function(){var S=u._dbInfo;S.db.transaction(function(O){xt(O,S,"SELECT key FROM "+S.storeName+" WHERE id = ? LIMIT 1",[f+1],function(D,N){var C=N.rows.length?N.rows.item(0).key:null;b(C)},function(D,N){m(N)})})}).catch(m)});return d(y,v),y}function ei(f){var v=this,u=new c(function(y,b){v.ready().then(function(){var m=v._dbInfo;m.db.transaction(function(S){xt(S,m,"SELECT key FROM "+m.storeName,[],function(O,D){for(var N=[],C=0;C<D.rows.length;C++)N.push(D.rows.item(C).key);y(N)},function(O,D){b(D)})})}).catch(b)});return d(u,f),u}function ri(f){return new c(function(v,u){f.transaction(function(y){y.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(b,m){for(var S=[],O=0;O<m.rows.length;O++)S.push(m.rows.item(O).name);v({db:f,storeNames:S})},function(b,m){u(m)})},function(y){u(y)})})}function ni(f,v){v=x.apply(this,arguments);var u=this.config();f=typeof f!="function"&&f||{},f.name||(f.name=f.name||u.name,f.storeName=f.storeName||u.storeName);var y=this,b;return f.name?b=new c(function(m){var S;f.name===u.name?S=y._dbInfo.db:S=openDatabase(f.name,"","",0),f.storeName?m({db:S,storeNames:[f.storeName]}):m(ri(S))}).then(function(m){return new c(function(S,O){m.db.transaction(function(D){function N(W){return new c(function(G,tt){D.executeSql("DROP TABLE IF EXISTS "+W,[],function(){G()},function(Z,ft){tt(ft)})})}for(var C=[],U=0,q=m.storeNames.length;U<q;U++)C.push(N(m.storeNames[U]));c.all(C).then(function(){S()}).catch(function(W){O(W)})},function(D){O(D)})})}):b=c.reject("Invalid arguments"),d(b,v),b}var ii={_driver:"webSQLStorage",_initStorage:Wn,_support:z(),iterate:Hn,getItem:Gn,setItem:Qn,removeItem:Zn,clear:Kn,length:Jn,key:ti,keys:ei,dropInstance:ni};function si(){try{return typeof localStorage!="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Or(f,v){var u=f.name+"/";return f.storeName!==v.storeName&&(u+=f.storeName+"/"),u}function ai(){var f="_localforage_support_test";try{return localStorage.setItem(f,!0),localStorage.removeItem(f),!1}catch{return!0}}function oi(){return!ai()||localStorage.length>0}function hi(f){var v=this,u={};if(f)for(var y in f)u[y]=f[y];return u.keyPrefix=Or(f,v._defaultConfig),oi()?(v._dbInfo=u,u.serializer=Ie,c.resolve()):c.reject()}function fi(f){var v=this,u=v.ready().then(function(){for(var y=v._dbInfo.keyPrefix,b=localStorage.length-1;b>=0;b--){var m=localStorage.key(b);m.indexOf(y)===0&&localStorage.removeItem(m)}});return d(u,f),u}function li(f,v){var u=this;f=_(f);var y=u.ready().then(function(){var b=u._dbInfo,m=localStorage.getItem(b.keyPrefix+f);return m&&(m=b.serializer.deserialize(m)),m});return d(y,v),y}function ci(f,v){var u=this,y=u.ready().then(function(){for(var b=u._dbInfo,m=b.keyPrefix,S=m.length,O=localStorage.length,D=1,N=0;N<O;N++){var C=localStorage.key(N);if(C.indexOf(m)===0){var U=localStorage.getItem(C);if(U&&(U=b.serializer.deserialize(U)),U=f(U,C.substring(S),D++),U!==void 0)return U}}});return d(y,v),y}function ui(f,v){var u=this,y=u.ready().then(function(){var b=u._dbInfo,m;try{m=localStorage.key(f)}catch{m=null}return m&&(m=m.substring(b.keyPrefix.length)),m});return d(y,v),y}function di(f){var v=this,u=v.ready().then(function(){for(var y=v._dbInfo,b=localStorage.length,m=[],S=0;S<b;S++){var O=localStorage.key(S);O.indexOf(y.keyPrefix)===0&&m.push(O.substring(y.keyPrefix.length))}return m});return d(u,f),u}function pi(f){var v=this,u=v.keys().then(function(y){return y.length});return d(u,f),u}function vi(f,v){var u=this;f=_(f);var y=u.ready().then(function(){var b=u._dbInfo;localStorage.removeItem(b.keyPrefix+f)});return d(y,v),y}function gi(f,v,u){var y=this;f=_(f);var b=y.ready().then(function(){v===void 0&&(v=null);var m=v;return new c(function(S,O){var D=y._dbInfo;D.serializer.serialize(v,function(N,C){if(C)O(C);else try{localStorage.setItem(D.keyPrefix+f,N),S(m)}catch(U){(U.name==="QuotaExceededError"||U.name==="NS_ERROR_DOM_QUOTA_REACHED")&&O(U),O(U)}})})});return d(b,u),b}function mi(f,v){if(v=x.apply(this,arguments),f=typeof f!="function"&&f||{},!f.name){var u=this.config();f.name=f.name||u.name,f.storeName=f.storeName||u.storeName}var y=this,b;return f.name?b=new c(function(m){f.storeName?m(Or(f,y._defaultConfig)):m(f.name+"/")}).then(function(m){for(var S=localStorage.length-1;S>=0;S--){var O=localStorage.key(S);O.indexOf(m)===0&&localStorage.removeItem(O)}}):b=c.reject("Invalid arguments"),d(b,v),b}var yi={_driver:"localStorageWrapper",_initStorage:hi,_support:si(),iterate:ci,getItem:li,setItem:gi,removeItem:vi,clear:fi,length:pi,key:ui,keys:di,dropInstance:mi},bi=function(v,u){return v===u||typeof v=="number"&&typeof u=="number"&&isNaN(v)&&isNaN(u)},_i=function(v,u){for(var y=v.length,b=0;b<y;){if(bi(v[b],u))return!0;b++}return!1},Ir=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"},Yt={},Dr={},Pt={INDEXEDDB:kt,WEBSQL:ii,LOCALSTORAGE:yi},wi=[Pt.INDEXEDDB._driver,Pt.WEBSQL._driver,Pt.LOCALSTORAGE._driver],Kt=["dropInstance"],De=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Kt),xi={description:"",driver:wi.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ei(f,v){f[v]=function(){var u=arguments;return f.ready().then(function(){return f[v].apply(f,u)})}}function Ne(){for(var f=1;f<arguments.length;f++){var v=arguments[f];if(v)for(var u in v)v.hasOwnProperty(u)&&(Ir(v[u])?arguments[0][u]=v[u].slice():arguments[0][u]=v[u])}return arguments[0]}var Mi=function(){function f(v){a(this,f);for(var u in Pt)if(Pt.hasOwnProperty(u)){var y=Pt[u],b=y._driver;this[u]=b,Yt[b]||this.defineDriver(y)}this._defaultConfig=Ne({},xi),this._config=Ne({},this._defaultConfig,v),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return f.prototype.config=function(u){if((typeof u=="undefined"?"undefined":s(u))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var y in u){if(y==="storeName"&&(u[y]=u[y].replace(/\W/g,"_")),y==="version"&&typeof u[y]!="number")return new Error("Database version must be a number.");this._config[y]=u[y]}return"driver"in u&&u.driver?this.setDriver(this._config.driver):!0}else return typeof u=="string"?this._config[u]:this._config},f.prototype.defineDriver=function(u,y,b){var m=new c(function(S,O){try{var D=u._driver,N=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!u._driver){O(N);return}for(var C=De.concat("_initStorage"),U=0,q=C.length;U<q;U++){var W=C[U],G=!_i(Kt,W);if((G||u[W])&&typeof u[W]!="function"){O(N);return}}var tt=function(){for(var Vt=function(Ri){return function(){var Ti=new Error("Method "+Ri+" is not implemented by the current driver"),Nr=c.reject(Ti);return d(Nr,arguments[arguments.length-1]),Nr}},Le=0,Si=Kt.length;Le<Si;Le++){var Ce=Kt[Le];u[Ce]||(u[Ce]=Vt(Ce))}};tt();var Z=function(Vt){Yt[D]&&console.info("Redefining LocalForage driver: "+D),Yt[D]=u,Dr[D]=Vt,S()};"_support"in u?u._support&&typeof u._support=="function"?u._support().then(Z,O):Z(!!u._support):Z(!0)}catch(ft){O(ft)}});return g(m,y,b),m},f.prototype.driver=function(){return this._driver||null},f.prototype.getDriver=function(u,y,b){var m=Yt[u]?c.resolve(Yt[u]):c.reject(new Error("Driver not found."));return g(m,y,b),m},f.prototype.getSerializer=function(u){var y=c.resolve(Ie);return g(y,u),y},f.prototype.ready=function(u){var y=this,b=y._driverSet.then(function(){return y._ready===null&&(y._ready=y._initDriver()),y._ready});return g(b,u,u),b},f.prototype.setDriver=function(u,y,b){var m=this;Ir(u)||(u=[u]);var S=this._getSupportedDrivers(u);function O(){m._config.driver=m.driver()}function D(U){return m._extend(U),O(),m._ready=m._initStorage(m._config),m._ready}function N(U){return function(){var q=0;function W(){for(;q<U.length;){var G=U[q];return q++,m._dbInfo=null,m._ready=null,m.getDriver(G).then(D).catch(W)}O();var tt=new Error("No available storage method found.");return m._driverSet=c.reject(tt),m._driverSet}return W()}}var C=this._driverSet!==null?this._driverSet.catch(function(){return c.resolve()}):c.resolve();return this._driverSet=C.then(function(){var U=S[0];return m._dbInfo=null,m._ready=null,m.getDriver(U).then(function(q){m._driver=q._driver,O(),m._wrapLibraryMethodsWithReady(),m._initDriver=N(S)})}).catch(function(){O();var U=new Error("No available storage method found.");return m._driverSet=c.reject(U),m._driverSet}),g(this._driverSet,y,b),this._driverSet},f.prototype.supports=function(u){return!!Dr[u]},f.prototype._extend=function(u){Ne(this,u)},f.prototype._getSupportedDrivers=function(u){for(var y=[],b=0,m=u.length;b<m;b++){var S=u[b];this.supports(S)&&y.push(S)}return y},f.prototype._wrapLibraryMethodsWithReady=function(){for(var u=0,y=De.length;u<y;u++)Ei(this,De[u])},f.prototype.createInstance=function(u){return new f(u)},f}(),Ai=new Mi;n.exports=Ai},{"3":3}]},{},[4])(4)})})(Dn);var ah=Dn.exports,Nn=function(){if(typeof Map!="undefined")return Map;function e(t,r){var n=-1;return t.some(function(i,s){return i[0]===r?(n=s,!0):!1}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var n=e(this.__entries__,r),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(r,n){var i=e(this.__entries__,r);~i?this.__entries__[i][1]=n:this.__entries__.push([r,n])},t.prototype.delete=function(r){var n=this.__entries__,i=e(n,r);~i&&n.splice(i,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var i=0,s=this.__entries__;i<s.length;i++){var a=s[i];r.call(n,a[1],a[0])}},t}()}(),cr=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,xe=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),Co=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(xe):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),Po=2;function Fo(e,t){var r=!1,n=!1,i=0;function s(){r&&(r=!1,e()),n&&o()}function a(){Co(s)}function o(){var h=Date.now();if(r){if(h-i<Po)return;n=!0}else r=!0,n=!1,setTimeout(a,t);i=h}return o}var zo=20,Bo=["top","right","bottom","left","width","height","size","weight"],$o=typeof MutationObserver!="undefined",Uo=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Fo(this.refresh.bind(this),zo)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,n=r.indexOf(t);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!cr||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),$o?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!cr||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,n=r===void 0?"":r,i=Bo.some(function(s){return!!~n.indexOf(s)});i&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),Ln=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},$t=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||xe},Cn=Me(0,0,0,0);function Ee(e){return parseFloat(e)||0}function Pn(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(n,i){var s=e["border-"+i+"-width"];return n+Ee(s)},0)}function ko(e){for(var t=["top","right","bottom","left"],r={},n=0,i=t;n<i.length;n++){var s=i[n],a=e["padding-"+s];r[s]=Ee(a)}return r}function Yo(e){var t=e.getBBox();return Me(0,0,t.width,t.height)}function Vo(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return Cn;var n=$t(e).getComputedStyle(e),i=ko(n),s=i.left+i.right,a=i.top+i.bottom,o=Ee(n.width),h=Ee(n.height);if(n.boxSizing==="border-box"&&(Math.round(o+s)!==t&&(o-=Pn(n,"left","right")+s),Math.round(h+a)!==r&&(h-=Pn(n,"top","bottom")+a)),!Xo(e)){var l=Math.round(o+s)-t,p=Math.round(h+a)-r;Math.abs(l)!==1&&(o-=l),Math.abs(p)!==1&&(h-=p)}return Me(i.left,i.top,o,h)}var qo=function(){return typeof SVGGraphicsElement!="undefined"?function(e){return e instanceof $t(e).SVGGraphicsElement}:function(e){return e instanceof $t(e).SVGElement&&typeof e.getBBox=="function"}}();function Xo(e){return e===$t(e).document.documentElement}function jo(e){return cr?qo(e)?Yo(e):Vo(e):Cn}function Wo(e){var t=e.x,r=e.y,n=e.width,i=e.height,s=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,a=Object.create(s.prototype);return Ln(a,{x:t,y:r,width:n,height:i,top:r,right:t+n,bottom:i+r,left:t}),a}function Me(e,t,r,n){return{x:e,y:t,width:r,height:n}}var Go=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Me(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=jo(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),Ho=function(){function e(t,r){var n=Wo(r);Ln(this,{target:t,contentRect:n})}return e}(),Qo=function(){function e(t,r,n){if(this.activeObservations_=[],this.observations_=new Nn,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=n}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof $t(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)||(r.set(t,new Go(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof $t(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;!r.has(t)||(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(!!this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new Ho(n.target,n.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),Fn=typeof WeakMap!="undefined"?new WeakMap:new Nn,zn=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=Uo.getInstance(),n=new Qo(t,r,this);Fn.set(this,n)}return e}();["observe","unobserve","disconnect"].forEach(function(e){zn.prototype[e]=function(){var t;return(t=Fn.get(this))[e].apply(t,arguments)}});var Zo=function(){return typeof xe.ResizeObserver!="undefined"?xe.ResizeObserver:zn}();function Ko(e){let t;return{c(){t=te("div"),ji(t,"width","0px")},m(r,n){Jt(r,t,n),e[3](t)},p:ut,i:ut,o:ut,d(r){r&&qt(t),e[3](null)}}}function Jo(e,t,r){let{elementResize:n=void 0}=t;const i=qr();let s,a;Qi(()=>{r(2,a=new Zo(h=>{i("resize",h[0].target)}))}),Zi(()=>{a.disconnect()});function o(h){ie[h?"unshift":"push"](()=>{s=h,r(0,s)})}return e.$$set=h=>{"elementResize"in h&&r(1,n=h.elementResize)},e.$$.update=()=>{if(e.$$.dirty&7&&(s||n)){const h=n||s.parentNode;a.observe(h)}},[s,n,a,o]}class oh extends Xe{constructor(t){super();Xr(this,t,Jo,Ko,Pe,{elementResize:1})}}const Bn=Symbol("Comlink.proxy"),t1=Symbol("Comlink.endpoint"),e1=Symbol("Comlink.releaseProxy"),ur=Symbol("Comlink.thrown"),$n=e=>typeof e=="object"&&e!==null||typeof e=="function",r1={canHandle:e=>$n(e)&&e[Bn],serialize(e){const{port1:t,port2:r}=new MessageChannel;return kn(e,t),[r,[r]]},deserialize(e){return e.start(),s1(e)}},n1={canHandle:e=>$n(e)&&ur in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},Un=new Map([["proxy",r1],["throw",n1]]);function kn(e,t=self){t.addEventListener("message",function r(n){if(!n||!n.data)return;const{id:i,type:s,path:a}=Object.assign({path:[]},n.data),o=(n.data.argumentList||[]).map(It);let h;try{const l=a.slice(0,-1).reduce((c,d)=>c[d],e),p=a.reduce((c,d)=>c[d],e);switch(s){case"GET":h=p;break;case"SET":l[a.slice(-1)[0]]=It(n.data.value),h=!0;break;case"APPLY":h=p.apply(l,o);break;case"CONSTRUCT":{const c=new p(...o);h=h1(c)}break;case"ENDPOINT":{const{port1:c,port2:d}=new MessageChannel;kn(e,d),h=o1(c,[c])}break;case"RELEASE":h=void 0;break;default:return}}catch(l){h={value:l,[ur]:0}}Promise.resolve(h).catch(l=>({value:l,[ur]:0})).then(l=>{const[p,c]=pr(l);t.postMessage(Object.assign(Object.assign({},p),{id:i}),c),s==="RELEASE"&&(t.removeEventListener("message",r),Yn(t))})}),t.start&&t.start()}function i1(e){return e.constructor.name==="MessagePort"}function Yn(e){i1(e)&&e.close()}function s1(e,t){return dr(e,[],t)}function Ae(e){if(e)throw new Error("Proxy has been released and is not useable")}function dr(e,t=[],r=function(){}){let n=!1;const i=new Proxy(r,{get(s,a){if(Ae(n),a===e1)return()=>Ut(e,{type:"RELEASE",path:t.map(o=>o.toString())}).then(()=>{Yn(e),n=!0});if(a==="then"){if(t.length===0)return{then:()=>i};const o=Ut(e,{type:"GET",path:t.map(h=>h.toString())}).then(It);return o.then.bind(o)}return dr(e,[...t,a])},set(s,a,o){Ae(n);const[h,l]=pr(o);return Ut(e,{type:"SET",path:[...t,a].map(p=>p.toString()),value:h},l).then(It)},apply(s,a,o){Ae(n);const h=t[t.length-1];if(h===t1)return Ut(e,{type:"ENDPOINT"}).then(It);if(h==="bind")return dr(e,t.slice(0,-1));const[l,p]=Vn(o);return Ut(e,{type:"APPLY",path:t.map(c=>c.toString()),argumentList:l},p).then(It)},construct(s,a){Ae(n);const[o,h]=Vn(a);return Ut(e,{type:"CONSTRUCT",path:t.map(l=>l.toString()),argumentList:o},h).then(It)}});return i}function a1(e){return Array.prototype.concat.apply([],e)}function Vn(e){const t=e.map(pr);return[t.map(r=>r[0]),a1(t.map(r=>r[1]))]}const qn=new WeakMap;function o1(e,t){return qn.set(e,t),e}function h1(e){return Object.assign(e,{[Bn]:!0})}function pr(e){for(const[t,r]of Un)if(r.canHandle(e)){const[n,i]=r.serialize(e);return[{type:"HANDLER",name:t,value:n},i]}return[{type:"RAW",value:e},qn.get(e)||[]]}function It(e){switch(e.type){case"HANDLER":return Un.get(e.name).deserialize(e.value);case"RAW":return e.value}}function Ut(e,t,r){return new Promise(n=>{const i=f1();e.addEventListener("message",function s(a){!a.data||!a.data.id||a.data.id!==i||(e.removeEventListener("message",s),n(a.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:i},t),r)})}function f1(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function l1(e){let t,r,n,i,s;const a=e[4].default,o=Li(a,e,e[3],null);return{c(){t=Yi(),r=te("div"),o&&o.c()},m(h,l){Jt(h,t,l),Jt(h,r,l),o&&o.m(r,null),e[5](r),n=!0,i||(s=Vi(document.body,"click",e[1]),i=!0)},p(h,[l]){o&&o.p&&(!n||l&8)&&Pi(o,a,h,h[3],n?Ci(a,h[3],l,null):Fi(h[3]),null)},i(h){n||(he(o,h),n=!0)},o(h){qe(o,h),n=!1},d(h){h&&qt(t),h&&qt(r),o&&o.d(h),e[5](null),i=!1,s()}}}function c1(e,t,r){let{$$slots:n={},$$scope:i}=t,{exclude:s=[]}=t,a;const o=qr();function h(c){for(var d=c;d;){if(s.indexOf(d)>=0||d===a)return!0;d=d.parentNode}return!1}function l(c){h(c.target)||o("clickoutside")}function p(c){ie[c?"unshift":"push"](()=>{a=c,r(0,a)})}return e.$$set=c=>{"exclude"in c&&r(2,s=c.exclude),"$$scope"in c&&r(3,i=c.$$scope)},[a,l,s,i,n,p]}class hh extends Xe{constructor(t){super();Xr(this,t,c1,l1,Pe,{exclude:2})}}export{x1 as $,Ci as A,qr as B,b1 as C,L1 as D,ss as E,as as F,k1 as G,ji as H,v1 as I,ae as J,S1 as K,U1 as L,B1 as M,I1 as N,D1 as O,Oi as P,C1 as Q,$1 as R,Xe as S,j1 as T,O1 as U,z1 as V,T1 as W,Ye as X,g1 as Y,Ft as Z,Q1 as _,Yi as a,_1 as a0,th as a1,eh as a2,nh as a3,rh as a4,Z1 as a5,K1 as a6,sh as a7,ih as a8,J1 as a9,_o as aa,Q as ab,fn as ac,ah as ad,s1 as ae,mn as af,V1 as ag,q1 as ah,H1 as ai,Y1 as aj,X1 as ak,G1 as al,y1 as am,oh as an,A1 as ao,N1 as ap,p1 as aq,St as ar,W1 as as,Ni as at,M1 as au,hh as av,R1 as aw,qi as b,$i as c,Jt as d,te as e,qt as f,d1 as g,ie as h,Xr as i,E1 as j,m1 as k,rs as l,qe as m,ut as n,Qi as o,ns as p,he as q,kr as r,Pe as s,F1 as t,w1 as u,Li as v,P1 as w,Vi as x,Pi as y,Fi as z};
//# sourceMappingURL=vendor.fc45968a.js.map
